!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).focusWithin=t()}(this,function(){"use strict";return{polyfill:function(e){var t,r,o,n;if(e){if("string"!=typeof e)throw new TypeError('Failed to execute "polyfill" on "focusWithin":parameter 1 ("selector") is not a string.');if("."!==e.charAt(0)&&"["!==e.charAt(0)&&"]"!==e.charAt(e.length-1))throw new TypeError('Failed to execute "polyfill" on "focusWithin":parameter 1 ("selector") is not a valid selector.');try{document.querySelector(e)}catch(e){throw new TypeError('Failed to execute "polyfill" on "focusWithin":parameter 1 ("selector") is not a valid selector.')}}function i(e){for(var t=[];e&&(1===e.nodeType||11===e.nodeType);)11!==e.nodeType?(t.push(e),e=e.parentNode):e=e.host;return t}function c(e){var c;o=function(){for(var e=document.activeElement;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}(),c||(window.requestAnimationFrame(function(){var a,u;c=!1,Array.prototype.slice.call(i(n)).forEach((a=t,u=r,function(e){var t=e.getAttribute(a)||"";if(-1!==t.indexOf(u)){var r=t.replace(u,"").trim();""===r?e.removeAttribute(a):e.setAttribute(a,r)}})),n=o,"focus"===e.type&&o&&Array.prototype.slice.call(i(o)).forEach(function(e,t){return function(r){var o=r.getAttribute(e)||"";if(-1===o.indexOf(t)){var n=(o+" "+t).trim();r.setAttribute(e,n)}}}(t,r))}),c=!0)}e=0!==(e=e||"[focus-within]").indexOf(".")?t=r=e.replace(/[[\]']+/g,""):(t="class",r=e.replace(".",""));try{return document.querySelector(":focus-within"),!0}catch(e){return document.addEventListener("focus",c,!0),document.addEventListener("blur",c,!0),!1}}}});