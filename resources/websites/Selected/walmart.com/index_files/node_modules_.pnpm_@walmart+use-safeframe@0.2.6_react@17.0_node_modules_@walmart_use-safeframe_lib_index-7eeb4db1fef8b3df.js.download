"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31307],{355436:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},331597:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PageMsgActionEnum=t.ExtActionEnum=void 0,t.ExtActionEnum={CLICK:"click",INIT:"init",PAGE_MSG:"page_msg",READ_COOKIE:"read_cookie",RESIZE:"resize",WRITE_COOKIE:"write_cookie"},t.PageMsgActionEnum={ADD_IDENTIFIER:"add_identifier",GET_QUERY_STRING:"get_query_string",HIDE_ELEMENT:"hide_element",OPEN_NEW_TAB:"open_new_tab",SCROLL_TO_VIEW:"scroll_to_view",SHOW_ELEMENT:"show_element"}},872575:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HostActionEnum=void 0,t.HostActionEnum={READ_COOKIE:"read_cookie",UPDATE_CREATIVE_POSITION:"update_creative_position",UPDATE_POSITION:"update_position",UPDATE_SCREEN_SIZE:"update_screen_size",WRITE_COOKIE:"write_cookie"}},764161:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},343196:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(355436),t),r(n(331597),t),r(n(872575),t),r(n(764161),t)},565799:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(343196),o=n(443762),u=i(n(260303)),a=i(n(833547));t.default=function(e){var t=function(t){if(e.indexOf(t)<0)throw new Error("Access to cookie is disallowed")};return function(e,n){var i=e.type,c=e.payload;if(i===r.ExtActionEnum.READ_COOKIE){var f=c.cookie.name,d=void 0,s=!1;try{t(f),d=(0,u.default)(f)||""}catch(E){d="",s=!0}var l={payload:{cookie:{data:{info:d},name:f,status:s?"failed":"read-cookie"}},type:r.HostActionEnum.READ_COOKIE},v=(0,o.sendHostMsg)(l,!0);n.dispatch(v)}if(i===r.ExtActionEnum.WRITE_COOKIE){var _=c.cookie,p=_.name;v=_.data,s=!1;try{(null===v||void 0===v?void 0:v.info)&&(t(p),(0,a.default)(p,v.info))}catch(E){s=!0}var h={payload:{cookie:{data:v,name:p,status:s?"failed":"write-cookie"}},type:r.HostActionEnum.WRITE_COOKIE};n.dispatch((0,o.sendHostMsg)(h,!0))}}}},171997:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(752406),o=n(443762),u=i(n(139475));t.default=function(e){var t=(0,r.useRef)();(0,r.useEffect)((function(){return e.subscribe((function(n,i,r){var a,c;if((0,u.default)()){if(!t.current){var f=document.getElementById(e.getState().id);f&&(t.current=f)}var d=null===(a=r.meta)||void 0===a?void 0:a.sendToExt;if(d){var s=null===(c=t.current)||void 0===c?void 0:c.contentWindow;if(s){var l="string"!==typeof d?JSON.stringify(d):d;s.postMessage(l,"*"),e.dispatch((0,o.sendHostMsg)(d))}}}}))}),[e])}},436718:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(343196),c=n(752406),f=u(n(565799)),d=o(n(443762)),s=u(n(137445)),l=u(n(312831)),v=u(n(186362)),_=u(n(791049)),p=u(n(139475)),h=u(n(503204)),E=u(n(171997)),y=u(n(487501)),O=u(n(615059)),g=function(e){var t=e.id,n=e.html,i=void 0===n?"":n,r=e.data,o={config:{sfLoadEvent:"instant",sfType:"ads"},data:void 0===r?{}:r,html:i,id:t};return{height:e.height,html:i,id:t,init:!1,name:encodeURIComponent(JSON.stringify(o)),pos:{intersectionRatio:0,x:0,y:0},received:[],sent:[]}};t.default=function(e,t){var n=(0,y.default)(g(e),(0,d.default)(g(e)),[(0,f.default)(t.allowedCookies)]);return(0,E.default)(n),(0,O.default)(n),(0,c.useEffect)((function(){var t=(0,h.default)((function(t){t&&e.id===t.id&&(n.dispatch(t),n.dispatch((0,d.recExtMsg)(t)))})),i=(0,l.default)((function(){if((0,s.default)(n.getState())){var e={height:(0,v.default)(),width:(0,_.default)()};n.dispatch((0,d.updateViewport)(e,{sendToExt:{payload:e,type:a.HostActionEnum.UPDATE_SCREEN_SIZE}}))}}),250);return i(),(0,p.default)()&&(window.addEventListener("scroll",i),window.addEventListener("resize",i)),function(){(0,p.default)()&&(window.removeEventListener("scroll",i),window.removeEventListener("resize",i)),t()}}),[]),n}},487501:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(752406),o=i(n(29856));t.default=function(e,t,n){void 0===n&&(n=[]);var i=(0,r.useRef)((0,o.default)(t,e,n)),u=(0,r.useRef)(i.current.getState());return(0,r.useEffect)((function(){return i.current.subscribe((function(e){u.current=e}))}),[]),i.current}},103841:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(752406);t.default=function(e,t){var n=(0,i.useState)(t(e.getState())),r=n[0],o=n[1];return(0,i.useEffect)((function(){return e.subscribe((function(e,n){var i=t(e);t(n)!==i&&o(i)}))}),[]),r}},888129:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(752406);t.default=function(e,t){(0,i.useEffect)((function(){return e.subscribe(t)}),[])}},615059:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(343196),u=n(752406),a=n(443762),c=r(n(665877)),f=r(n(757259)),d=r(n(312831)),s=r(n(139475)),l=r(n(888129)),v=function(e){if(e&&e.getBoundingClientRect){var t=e.getBoundingClientRect();return{x:t.x,y:t.y}}return null};t.default=function(e){var t=(0,u.useRef)(function(e){return(0,d.default)((function(){var t=e.getState(),n=(0,f.default)(t),r=(0,c.default)(t);if(r&&n){var u={payload:i(i({},r),{screenHeight:n.height,screenWidth:n.width}),type:o.HostActionEnum.UPDATE_CREATIVE_POSITION};e.dispatch((0,a.sendHostMsg)(u,!0))}}),250)}(e));(0,u.useEffect)((function(){var t,n=document.getElementById(e.getState().id);if((0,s.default)()&&n&&window.IntersectionObserver){var r=new window.IntersectionObserver((function(t){var r=t[0].intersectionRatio,o=v(n);o&&e.dispatch((0,a.updatePos)(i({intersectionRatio:r},o)))}),{threshold:[0,.3,.5,.8,1]});r.observe(n);var o=(0,d.default)((function(){var t=v(n),r=(0,c.default)(e.getState());t&&r&&e.dispatch((0,a.updatePos)(i({intersectionRatio:r.intersectionRatio},t)))}),100);window.addEventListener("scroll",o),window.removeEventListener("resize",o);var u=setInterval((function(){var t=v(n);if(t){var i=t.x,r=t.y,u=(0,c.default)(e.getState());u&&u.x===i&&u.y===r||o()}}),1e3);t=function(){clearInterval(u),window.removeEventListener("scroll",o),window.removeEventListener("resize",o),r.unobserve(n)}}return function(){t&&t()}}),[]),(0,l.default)(e,(function(e,n){if((0,s.default)()){var i=(0,f.default)(n),r=(0,f.default)(e),o=(0,c.default)(n),u=(0,c.default)(e);!r||!u||i&&o&&i.height===r.height&&i.width===r.width&&o.x===u.x&&o.y===u.y||t.current()}}))}},255913:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(436718)),a=o(n(103841));r(n(81098),t);var c={allowedCookies:[]};t.default=function(e,t){var n=e.initialHeight,i=void 0===n?0:n,r=e.html,o=e.data,f=e.id;void 0===t&&(t=c);var d=(0,u.default)({data:o,height:i,html:r,id:f},t);return{height:(0,a.default)(d,(function(e){return e.height})),name:(0,a.default)(d,(function(e){return e.name})),store:d}}},443762:function(e,t,n){var i,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.sendHostMsg=t.recExtMsg=t.updateViewport=t.updatePos=void 0;var u=n(343196),a=n(29856),c="[internal]",f="".concat(c," UPDATE_POS");t.updatePos=function(e){return{payload:e,type:f}};var d="".concat(c," UPDATE_VIEWPORT");t.updateViewport=function(e,t){return{meta:t,payload:e,type:d}};var s="".concat(c," REC_EXT_MSG");t.recExtMsg=function(e){return{payload:e,type:s}};var l="".concat(c," HOST_SEND_MSG");t.sendHostMsg=function(e,t){var n;return t&&(n={sendToExt:e}),{meta:n,payload:e,type:l}};var v=((i={})[l]=function(e,t){var n=t.payload;return r(r({},e),{sent:o([n],e.sent,!0).slice(0,20)})},i[s]=function(e,t){var n=t.payload;return r(r({},e),{received:o([n],e.received,!0).slice(0,20)})},i[f]=function(e,t){var n=t.payload;return r(r({},e),{pos:n})},i[u.ExtActionEnum.INIT]=function(e){return r(r({},e),{html:"",init:!0,name:""})},i[u.ExtActionEnum.RESIZE]=function(e,t){var n=t.payload;return r(r({},e),{height:n.height})},i[d]=function(e,t){var n=t.payload;return r(r({},e),{viewPort:n})},i);t.default=function(e){return(0,a.createReducer)(e,v)}},137445:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.init}},665877:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.pos}},757259:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.viewPort}},81098:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},29856:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createReducer=void 0;t.default=function(e,t,i){void 0===i&&(i=[]);var r=function(e,t){var n=t,i=n,r=[];return{dispatch:function(t){i=n,n=e(n,t),r.forEach((function(e){e(n,i,t)}))},getState:function(){return n},subscribe:function(e){return r.push(e),function(){var t=r.indexOf(e);r.splice(t,1)}}}}(e,t),o=function(){},u={dispatch:function(e){return o(e)},getState:r.getState};return o=function(e){i.forEach((function(t){t(e,u)})),r.dispatch(e)},n(n({},r),{dispatch:o})};t.createReducer=function(e,t){return function(n,i){if(void 0===n&&(n=e),"string"===typeof i.type){var r=t[i.type];if(r)return r(n,i)}return n}}},312831:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;return function(){null!==n&&clearTimeout(n);var i=arguments,r=this;n=setTimeout((function(){e.apply(r,i)}),t)}}},186362:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.innerHeight}},791049:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.innerWidth}},260303:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null,n="".concat(escape(e),"="),i=document.cookie,r=void 0===i?null:i;if(null===r)return t;for(var o=r.split(";"),u=0;u<o.length;u++){for(var a=o[u];" "===a.charAt(0);)a=a.substring(1,a.length);0===a.indexOf(n)&&(t=unescape(a.substring(n.length,a.length)))}return t}},139475:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"undefined"!==typeof window}},503204:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(343196),o=i(n(139475)),u=i(n(329555)),a=[];(0,o.default)()&&window.addEventListener("message",(function(e){var t=(0,u.default)(e.data);if("boolean"!==typeof t){var n=t.id,i=void 0===n?"":n,o=t.type,c=void 0===o?"":o,f=t.payload;if(i&&c)switch(c){case r.ExtActionEnum.CLICK:case r.ExtActionEnum.INIT:case r.ExtActionEnum.READ_COOKIE:case r.ExtActionEnum.WRITE_COOKIE:case r.ExtActionEnum.RESIZE:a.forEach((function(e){try{e({id:i,payload:f,type:c})}catch(t){0}}))}}})),t.default=function(e){return(0,o.default)()&&a.push(e),function(){a=a.filter((function(t){return t!==e}))}}},329555:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){try{return JSON.parse(e)}catch(t){return!1}}},833547:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="".concat(e,"=").concat(t);document.cookie=n}}}]);