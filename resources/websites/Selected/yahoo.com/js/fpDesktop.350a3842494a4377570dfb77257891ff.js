!function(){"use strict";var e=window.wafer,t=e.base||{};function n(n,o){if(e)return o=o||{},e.utils.elementInView(n,o,t.viewport)}function o(e,t,n,o,i){return{clean:t,dest:n,h:i,metaSize:!0,pos:e,supports:!1,w:o}}var i={context:{bucket:"",bucketId:"",device:"",intl:"",lang:"",meta:{},mode:"normal",region:"",rid:"",site:""},i13n:{}},a=["MAST","LDRB"],r=function(){var e,t,r,s,l,d=window,c=document,f=d.adsConfig,u=d.YAHOO,v=void 0===u?i:u,m=d.DARLA,p=void 0===m?null:m,h=d.wafer,g={},w="adRotateEvt",b="scroll",E="homepage-viewer",L="sda-",A="sticky-lrec2-footer",C=L+"LREC4",x=L+"MON2",y="2023538075",O="native-leaderboard-ad",R="gemini-ad-refresh",B=!1;function D(){var o;if(f&&(t=f.rotation)&&(null===(o=null==f?void 0:f.positions)||void 0===o?void 0:o[t.currentpos]))if(f.clientPositionMeta.positions.forEach((function(e){g[e.id]=e})),s=g[t.currentpos],p)if(t.enableNavAdRotation&&h.on("fetch:success",(function(e){e.elem.classList.contains("nextgen-page-navigation")&&function(e){var t=d._darlaAutoEvt;t||(t=p.evtSettings("AUTO")||{});for(var o=[],i=0;i<e.length;i++){var a=e[i],r=p.posSettings(a);if(r&&r.dest){var s=document.getElementById(r.dest);s&&n(s,0)&&s.offsetHeight>1&&o.push(a)}}if(o.length){var l=t.sa,c={experience:t.experience,name:w,npv:1,property:"fp",ps:o.join(","),ref:d.location.href,sa:l,secure:t.secure,sp:t.sp,ssl:t.ssl,ult:t.ult};p.add(c),p.event(w)}}(a)})),r=c.getElementById(L+(null==s?void 0:s.pos))){e={offsetX:0,offsetY:parseInt(t.offset,10)||100},h.on(b,T),d.addEventListener("viewerOpened",(function(){B=!0})),d.addEventListener("seamless:article:inview",(function(){B=!0})),d.addEventListener("seamless:home:inview",(function(){B=!1,S()})),d.addEventListener("viewerScrollRestored",(function(){B=!1,S()})),d.addEventListener("ads:finish:parse",P),setTimeout((function(){T()}),300);var i=c.getElementsByClassName(O);i&&i.length>0&&(l=i[0]),"failsafe"===v.context.mode&&p.event("adFetch")}else console.error("No LRECAdsContainer");else console.error("No Darla instance")}function P(e){var t=e.detail.positions;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n].posData.conf.clean,i=document.getElementById(o);i&&(i=i.parentElement)&&i.classList&&(i.classList.contains("Ht-pl-LDRB")||i.classList.contains("Ht-pl-LREC"))&&(i.classList.remove("Ht-pl-LDRB"),i.classList.remove("Ht-pl-LREC"))}if(t.MON2&&t.LREC3&&t.LREC4){var a=t.MON2.validAd,r=document.getElementById("sda-LREC3"),s=document.getElementById("sda-LREC4");a?(r.classList.add("D(n)"),s.classList.add("D(n)")):(r.classList.remove("D(n)"),s.classList.remove("D(n)"))}}function T(t){B||n(r,e)&&(I(),h.removeListener(b,T))}function I(){if(t){var e,n=s,i="",a=[n],r=t.lrec4pos||"LREC4",l=L+r,d=g[r]||o(r,l,l+"-iframe",300,250),c=t.mon2pos||"MON2",f=L+c,u=g[c]||o(c,f,f+"-iframe",300,600);n&&(e=n.pos,n.id=e,i+=e),t.lrec4enabled&&(i+=","+d.pos,a.unshift(d)),t.mon2enabled&&(i+=","+u.pos,a.push(u));var v,m,h="fetch_selective_ad_"+e.toLowerCase(),w=k(i,h);if(p.inProgress()){var b=p.inProgress();if(!b||b!==E)return v=0,void(m=setInterval((function(){v>20?clearInterval(m):(p.inProgress()||(clearInterval(m),I()),v++)}),500));p.abort(),p.add(w),p.addPos(a),p.event(h)}else t.lrec2selectiveenabled&&(p.add(w),p.addPos([a]),p.event(h))}}function S(){var e;if(d.pageloadNonCollapsedAds){for(var o,i=[],a=d.pageloadNonCollapsedAds,r=0,s=["LREC","MAST","LDRB","UBALDRB","UBALREC","UBALREC2","UBALREC3"];r<s.length;r++){var f=s[r],u=f;if(a.indexOf(f)>=0){f.includes("UBA")&&(u=f.split("UBA")[1]);var v=c.getElementById(L+u);v&&n(v)&&i.push(f)}}if(i.length)F(o=k(i,w),!0);else if(a.indexOf("FPAD")>=0&&d.safeframeOptinPositions&&d.safeframeOptinPositions.FPAD){o=k("FPAD",w);var m=p.config(),h=c.getElementById(L+"FPAD");!!(null===(e=null==m?void 0:m.positions)||void 0===e?void 0:e.FPAD)&&h&&n(h)&&F(o)}if(t){var b=c.getElementById(A),E=c.getElementById(C),y=c.getElementById(x);if(b&&n(b)||E&&n(E)||t.mon2enabled&&y&&n(y)){var B=[],D=null==g?void 0:g[t.currentpos],P=(null==D?void 0:D.pos)||"";if(P&&B.push(P),t.mon2enabled?(B.push("MON2"),t.lrec4enabled&&t.lrec4pos&&B.push(t.lrec4pos)):t.lrec4enabled&&t.lrec4pos&&B.push(t.lrec4pos),B.length){var T="fetch_selective_ad_"+P.toLowerCase(),I=k(B.join(","),T);p.add(I),p.event(T)}}l&&n(l)&&function(){if(!l)return;var e=l.getElementsByClassName(R);if(e&&e.length>0){var t=(e=e[0]).getAttribute("data-url"),n=e.getAttribute("data-body");t&&n&&d.wafer&&d.wafer.utils&&d.wafer.utils.fetchWithCache&&d.wafer.utils.fetchWithCache(t,{body:n,cache:0}).then((function(t){if(t&&t.html){e.innerHTML=t.html;var n=e.getElementsByClassName(O);if(n&&n.length>0){l.replaceWith(n[0]);var o=c.getElementsByClassName(O);o&&o.length>0&&(l=o[0],d.wafer.base.sync(l.parentElement))}}}))}}()}}}function k(e,t,n){var o,i,a=v.context,r={pg:{device:a.device,intl:a.intl,property:"fp",rid:a.rid,test:a.bucket}},s={experience:{bucket:a.bucket||"",pd:"modal",pt:"index",rid:a.rid||"",sid:(null===(o=null==v?void 0:v.i13n)||void 0===o?void 0:o.currentSID)||""},name:t,npv:1,property:"fp",ps:e,ref:d.location.href,sa:"",secure:1,sp:(null===(i=null==v?void 0:v.i13n)||void 0===i?void 0:i.SPACEID)||y,ssl:1,ult:r};for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);if(p){var c=p.evtSettings("adFetch");s.sa=(null==c?void 0:c.sa)||""}return s}function F(e,t){var n;t=t||!1,p.inProgress()?p.inProgress()===E&&(p.abort(),t&&d._darlaAutoEvt&&d._darlaAutoEvt.ps&&p.add(d._darlaAutoEvt),p.add(e),p.event(w)):(t&&(null===(n=null==d?void 0:d._darlaAutoEvt)||void 0===n?void 0:n.ps)&&p.add(d._darlaAutoEvt),p.add(e),p.event(w))}p?D():d.addEventListener("darlaReadyOnAsync",(function(){D()}))};var s,l,d=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.transformDarlaConfToJac=t.siteAttributesToMap=t.updateRotationConfFromAutoEvent=t.transformDarlaPositionConfToJac=t.transformDarlaDefaultPositionConfToJac=void 0,t.transformDarlaDefaultPositionConfToJac=e=>{const t={targetElement:e.dest};if(e.meta&&(t.meta=e.meta),e.sandbox){const n=e.sandbox.split(" ").map((e=>e.replace(/^allow-/,"")));t.sandbox={allow:n}}return{client:t,service:{id:"DEFAULT"}}},t.transformDarlaPositionConfToJac=e=>{if(!e)return null;if("DEFAULT"===e.id)return(0,t.transformDarlaDefaultPositionConfToJac)(e);const n=e.id||e.pos||e.name||"",o={fetch:{auto:!1},render:{auto:!0,doubleBuffering:!0},safeFrame:{enabled:!0},targetElement:e.dest},i={client:o,service:{id:n.split("-")[0],sizes:[(e.w||1)+"x"+(e.h||1)]}};return e.supports&&(o.safeFrame.features={},e.supports["exp-ovr"]||(o.safeFrame.features.expandOver={enabled:!1}),e.supports["exp-push"]&&(o.safeFrame.features.expandPush={enabled:!0}),e.supports["resize-to"]&&(o.safeFrame.features.resize={enabled:!0})),e.flex&&(o.flexible={enabled:!0},e.flex.w&&(o.flexible.width={enabled:!0},e.flex.w.min&&(o.flexible.width.min=parseInt(String(e.flex.w.min),10)),e.flex.w.max&&(o.flexible.width.max=parseInt(String(e.flex.w.max),10))),e.flex.h?(o.flexible.height={enabled:!0},e.flex.h.min&&(o.flexible.height.min=parseInt(String(e.flex.h.min),10)),e.flex.h.max&&(o.flexible.height.max=parseInt(String(e.flex.h.max),10))):e.flex.w&&!e.flex.ratio&&(o.flexible.height={enabled:!1}),e.flex.ratio&&(o.flexible.ratio=e.flex.ratio)),e.closeBtn&&(o.closeButton={enabled:!0},e.closeBtn.useShow&&(o.closeButton.showButtonEnabled=!0)),e.meta&&(o.meta=e.meta),void 0!==e.doubleBuffering&&(o.render.doubleBuffering=!!e.doubleBuffering),e.rotation&&(o.rotation=e.rotation),e.metaSize&&(o.render.useConfigSize=!0),i},t.updateRotationConfFromAutoEvent=(e,t,n)=>{var o,i;if("string"!=typeof(null==e?void 0:e.ps)&&(null===(i=null===(o=null==e?void 0:e.ps)||void 0===o?void 0:o[t])||void 0===i?void 0:i.autoMax)){const o=e.ps[t];n.rotation={enabled:!0},o.autoRT&&(n.rotation.inViewDuration=parseInt(String(o.autoRT),10)),o.autoIV&&(n.rotation.requireViewable=!0),n.rotation.limit=parseInt(String(o.autoMax||e.autoMax),10),n.rotation.period=parseInt(String(e.autoRT),10)}},t.siteAttributesToMap=e=>{if(!e)return null;let t="";const n=[];let o=0,i="";const a=()=>{if(o+1<e.length){i=e.charAt(o+1);let t=!1;for(;" "===i&&o+1<e.length;)o++,i=e.charAt(o),t=!0;t&&o--}},r=n=>{if(o+1<e.length){for(i=e.charAt(o+1),o++;i!==n&&o+1<e.length;)t+=i,i=e.charAt(o+1),o++;i!==n&&(t+=i)}};for(o=0;o<e.length;o++)i=e.charAt(o),"="===i?(t&&(n.push(t),t=""),a()):'"'===i?(t&&(n.push(t),t=""),r('"'),t&&(n.push(t),t="")):"'"===i?(t&&(n.push(t),t=""),r("'"),t&&(n.push(t),t="")):" "===i?(t&&(n.push(t),t=""),a()):t+=i;t&&(n.push(t),t="");const s={};for(o=0;o<n.length;o+=2)s[n[o]]=n[o+1];return n.length%2==1&&(s[n[n.length-1]]=" "),s},t.transformDarlaConfToJac=(e,n,o)=>{var i,a,r,s,l,d;const c={client:{positions:{}},service:{adServer:{PG:{siteAttributes:{}}},positions:{}}},f=e.events||{},u=f.AUTO,v=u.sp||(null===(i=f.DEFAULT)||void 0===i?void 0:i.sp)||(null===(a=f.adFetch)||void 0===a?void 0:a.sp),m=u.site||(null===(r=f.DEFAULT)||void 0===r?void 0:r.site)||(null===(s=f.adFetch)||void 0===s?void 0:s.site)||"";v&&(c.service.site={name:m,spaceId:v,url:o});const p=n||u.sa||(null===(l=f.DEFAULT)||void 0===l?void 0:l.sa)||(null===(d=f.adFetch)||void 0===d?void 0:d.sa);if(p)if("string"==typeof p){const e=(0,t.siteAttributesToMap)(p);c.service.adServer.PG.siteAttributes=e}else c.service.adServer.PG.siteAttributes=p;const h=e.positions,g=o?o.split("?")[0]:"";if(h&&Object.keys(h).forEach((e=>{const n=h[e];if(!n)return;const o=(0,t.transformDarlaPositionConfToJac)(n);o&&(o.client.meta&&o.client.meta.hostURL||!g||(o.client.meta||(o.client.meta={hostURL:""}),o.client.meta.hostURL=g),(0,t.updateRotationConfFromAutoEvent)(u,e,o.client),c.service.positions[e]=o.service,c.client.positions[e]=o.client)})),u.groups){const e=u.groups,t={};Object.keys(e).forEach((n=>{const o=e[n];o&&o.indexOf(",")>=0?(t[n]||(t[n]=[]),t[n].push(o.split(","))):o&&(e[o]?t[o]?1===t[o].length&&t[o][0][0]!==o&&t[o].push(o):t[o]=[[o]]:t[o]=[[n],[o]])}));const n=[];Object.keys(t).forEach((e=>{n.push(t[e])})),c.client.rotation={groups:n}}return c}}(s={exports:{}},s.exports),s.exports);(l=d)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")&&l.default,d.transformDarlaConfToJac,d.siteAttributesToMap,d.updateRotationConfFromAutoEvent;var c=d.transformDarlaPositionConfToJac;d.transformDarlaDefaultPositionConfToJac;var f=function(){var e,t,i,a,r=window,s=document,l=r.adsConfig,d=r.wafer,f={},u="scroll",v="sda-",m=!1;function p(e){var t,n,o,i,a=null==e?void 0:e.meta,s=null==a?void 0:a.positionNames;for(var l in s)if(s[l]){var c=r.JAC.getConfig(),f=s[l],u=null===(n=null===(t=null==c?void 0:c.client)||void 0===t?void 0:t.positions[f])||void 0===n?void 0:n.targetElement,v=document.getElementById(u);(v=d.utils.findAncestor(v,"viewer-sda-container"))&&(v.classList.contains("Ht-pl-LDRB")||v.classList.contains("Ht-pl-LREC"))&&v.classList.remove("Ht-pl-LDRB","Ht-pl-LREC")}var m=null===(o=a.response)||void 0===o?void 0:o.positions;if(m&&m.MON2&&m.LREC3&&m.LREC4){var p=null===(i=m.MON2.content)||void 0===i?void 0:i.size,h=p&&1!==p.width&&1!==p.height,g=document.getElementById("sda-LREC3"),w=document.getElementById("sda-LREC4");h?(g.classList.add("D(n)"),w.classList.add("D(n)")):(g.classList.remove("D(n)"),w.classList.remove("D(n)"))}}function h(s){m||n(i,e)&&(!function(){var e,n;if(t){var i,s=a,l=[s],d=t.lrec4pos||"LREC4",u=v+d,m=f[d]||o(d,u,u+"-iframe",300,250),p=t.mon2pos||"MON2",h=v+p,g=f[p]||o(p,h,h+"-iframe",300,600);s&&(i=s.pos,s.id=i),t.lrec4enabled&&l.unshift(m),t.mon2enabled&&l.push(g);for(var w=r.JAC.getConfig(),b=[],E=0;E<l.length;E++){var L=c(l[E]),A=null===(e=null==L?void 0:L.service)||void 0===e?void 0:e.id;(null===(n=null==w?void 0:w.client)||void 0===n?void 0:n.positions)&&(null==L?void 0:L.client)&&(w.client.positions[A]=L.client),b.push(A)}r.JAC.setConfig(w),r.JAC.fetch(b)}}(),d.removeListener(u,h))}!function(){var n;if(!l||!r.JAC)return;if(!(t=l.rotation)||!(null===(n=null==l?void 0:l.positions)||void 0===n?void 0:n[t.currentpos]))return;if(l.clientPositionMeta.positions.forEach((function(e){f[e.id]=e})),a=f[t.currentpos],!(i=s.getElementById(v+(null==a?void 0:a.pos))))return void console.error("No LRECAdsContainer");e={offsetX:0,offsetY:parseInt(t.offset,10)||100},d.on(u,h),r.addEventListener("viewerOpened",(function(){m=!0})),r.JAC.on("FETCH_COMPLETE",p),setTimeout((function(){h()}),300)}()},u=function(){return u=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function v(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}var m=function(e){var t=window.rapidInstance,n=e.meta,o=n.index,i=n.selectedValue,a=n.type,r=n.ylk,s=r.sec,l=r.slk,d=void 0===l?i:l,c=v(r,["sec","slk"]);c.elm||(c.elm="btn"),t.beaconClick(s,d,o,u(u({},c),{elmt:a}),"")},p=window.wafer,h=function(){var e,t=window.wafer,n=window.adsConfig;(e=window.s)&&e.t(),n.enableJac?f():r(),t.on("autocomplete:select",m),t.on("autocomplete:deleted",m),function(){var e=window.wafer;e.on("lightbox:close",(function(t){var n=t.elem,o=t.meta,i=window.rapidInstance;if(i){var a=o.source;if("closeClick"!==a){var r=n.getElementsByClassName("wafer-lightbox-close")[0];if(!r)return;var s=e.utils.getYlkMapForNode(r,"data-ylk"),l=s.sec,d=s.slk,c=v(s,["sec","slk"]);c.elm||(c.elm="close"),i.beaconClick(l,d,0,u(u({},c),{elmt:a||"close"}),"")}}}))}(),function(){var e=window.wafer;e.on("form:submit",(function(e){var t;if("darkmode-switcher-form"===e.elem.getAttribute("id")){var n=null===(t=e.meta.body.homeData)||void 0===t?void 0:t.theme;if(n){if("2"!==window.YAHOO.context.authed){var o=document.getElementById("darkmodeSignInURL"),i=o&&o.getAttribute("href");if(i){var a=new URL(i),r=new URLSearchParams(a.search),s=r.get(".done"),l=new URL(s);l.searchParams.set("theme",n),r.set(".done",l.toString()),a.search=r.toString(),o.setAttribute("href",a.toString())}}n="default"===(n=n.toLowerCase().replace("mode",""))?"auto":n,window.YAHOO.switchColorSchema(n)}}})),e.on("lightbox:open",(function(e){var t=e.elem,n=t.getElementsByClassName("wafer-ligthbox-source-darkmode-modal-switch")[0],o=!n&&t.getElementsByClassName("wafer-ligthbox-source-darkmode-profile-menu-toggle")[0];if(n||o){var i=document.documentElement.getAttribute("data-color-scheme");i="default"===i?"auto":i;var a=document.getElementById(i);a&&(a.checked=!0)}}));var t=document.documentElement;if("true"===t.getAttribute("data-color-theme-enabled")){var n=t.getAttribute("data-color-scheme");n&&(n="default"===n?"auto":n,window.YAHOO.switchColorSchema(n))}}(),function(){if(document.startViewTransition&&-1!==window.YAHOO.context.feature.indexOf("enableSharedElementTransition")){var e=window.matchMedia("(prefers-reduced-motion: reduce)");e&&!0===e.matches||window.wafer.features.isSlowBrowser.then((function(e){if(!e){var t=document.body;t.classList.add("enableSharedElementTransition"),window.wafer.utils.bindEvent(t,"click",(function(e){var n=e.target;if("BUTTON"!==n.tagName&&window.wafer.utils.findAncestor(n,"js-content-viewer")){var o=document.documentElement,i=o.classList.contains("Reader-open");i?o.classList.remove("viewer-open","modal-open"):o.classList.remove("Reader-open"),t.classList.add("startViewTransition"),i?o.classList.add("Reader-open"):o.classList.add("viewer-open","modal-open"),document.startViewTransition().finished.then((function(){t.classList.remove("startViewTransition")}))}}))}}))}}(),-1!==window.YAHOO.context.feature.indexOf("enableArticleClusterStoryContinuous")&&window.wafer.on("caas:article:fetch",(function(e){var t=e.elem;if("mainArticle"===t.getAttribute("id")){var n=t.getElementsByClassName("caas-readmore-collapse")[0];n&&n.parentElement.removeChild(n)}}))};p?p.ready((function(){h()})):document.body.addEventListener("wafer:ready",(function(){h()})),window.YAHOO.switchColorSchema||(window.YAHOO.switchColorSchema=function(e){var t=document.documentElement;t.setAttribute("data-color-theme-enabled","true"),t.setAttribute("data-color-scheme",e);var n=document.body.classList,o="system-theme-default-off";"dark"===e?(n.add(o,"theme-dark"),n.remove("theme-light")):"light"===e?(n.add(o,"theme-light"),n.remove("theme-dark")):n.remove(o,"theme-dark","theme-light"),window.wafer.base.colorSchema=e})}();
//# sourceMappingURL=fpDesktop.js.map
