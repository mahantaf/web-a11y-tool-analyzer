!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("wafer-tabs",[],e):"object"==typeof exports?exports["wafer-tabs"]=e():(t.wafer=t.wafer||{},t.wafer.wafers=t.wafer.wafers||{},t.wafer.wafers["wafer-tabs"]=e())}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(a[i])return a[i].exports;var o=a[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var a={};return e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://s.yimg.com/aaq/wf/",e(e.s="./src/entry.js")}({"./src/base.js":function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var a=[],i=!0,o=!1,s=void 0;try{for(var r,n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){o=!0,s=t}finally{try{!i&&n.return&&n.return()}finally{if(o)throw s}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),u=function t(e,a,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,a);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,a,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},l=window.wafer,c=l.base,h=l.constants,f=l.utils,v=l.WaferBaseClass,d=f.bindEvent,b=f.clearTimeout,p=f.convertNodeListToArray,g=f.findAncestor,y=f.setTimeout,m=f.unbindEvent,w=h.ATTR_PREFIX,T=["handleKeyDown","handleTargetFocusIn","handleTargetFocusOut","handleTargetMouseLeave","handleTargetMouseOver","tabChange","tabClick","tabFocusIn","tabMouseOver"],_=function(t){function e(t){i(this,e);for(var a,s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,{},{})),n=t.getAttribute(w+"active-class")||"wafer-tab-active",u=t.getAttribute(w+"trigger-active-class")||"active",l=t.getAttribute(w+"inactive-class"),c=Number(t.getAttribute(w+"scroll-restore"))||0,h=t.hasAttribute(w+"collapsable"),f=t.hasAttribute(w+"handle-hover"),v=t.hasAttribute(w+"handle-focus"),d=t.hasAttribute(w+"tabs-allowdefault"),b=t.hasAttribute(w+"disable-focus"),y=t.hasAttribute(w+"aria"),m=Number(t.getAttribute(w+"auto-switch"))||0,_=Number(t.getAttribute(w+"auto-switch-timeout"))||2e3,E=Number(t.getAttribute(w+"auto-switch-rotation-interval"))||0,A=Number(t.getAttribute(w+"active-index"))||(h?null:0),O=g(t,t.getAttribute(w+"boundary"))||document.body,S=t.getAttribute(w+"target"),k=t.getAttribute("aria-orientation"),x="vertical"===k,j=[],C=0,F=t.getElementsByClassName("tab");a=F[C];++C)j.push({tabElem:a,hasTrigger:"tabActivate"===a.getAttribute(w+"trigger")});var P=p(O.getElementsByClassName(S)),L=r(P,1),I=L[0],M=I&&I.children,D=M&&p(M),H=D&&D.length!==j.length,N=s._util={activeClass:n,autoSwitchRotationInterval:E,autoSwitchTimeout:_,boundary:O,elem:t,inactiveClass:l,isCollapsable:h,singleTabpanel:H,shouldAllowDefault:d,shouldAutoSwitch:m,shouldDisableFocus:b,shouldHandleFocus:v,shouldHandleHover:f,shouldScrollRestore:c,shouldUseAria:y,tabsElems:j,targetElem:I,triggerActiveClass:u,targetElems:D,verticalTabs:x};if(I&&I.classList.add("wafer-tabs-target"),s._state={activeIndex:0,activeTabElem:null,tabsTopStyleInPixel:0},c&&(s._state.scrollPositions=s._state.scrollPositions||{},s._state.tabsTopStyleInPixel=parseInt(window.getComputedStyle(t).top)||0),null!==A){s._state.activeIndex=A;var R=N.tabsElems[A];R&&s.activateTab(R.tabElem,{skipScroll:!0,useTrigger:!1})}return T.forEach(function(t){s[t]=s[t].bind(s)}),m&&s.setTimeoutForTabChange(),s.addEventListeners(),s}return s(e,t),n(e,[{key:"addEventListeners",value:function(){var t=this._util,a=t.shouldAutoSwitch,i=t.targetElem;a&&(d(i,"focusin",this.handleTargetFocusIn,{passive:!1}),d(i,"focusout",this.handleTargetFocusOut,{passive:!1}),d(i,"mouseleave",this.handleTargetMouseLeave,{passive:!1}),d(i,"mouseover",this.handleTargetMouseOver,{passive:!1})),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addEventListeners",this).call(this)}},{key:"removeEventListeners",value:function(){var t=this._util,a=t.shouldAutoSwitch,i=t.targetElem;a&&(m(i,"focusin",this.handleTargetFocusIn,{passive:!1}),m(i,"focusout",this.handleTargetFocusOut,{passive:!1}),m(i,"mouseleave",this.handleTargetMouseLeave,{passive:!1}),m(i,"mouseover",this.handleTargetMouseOver,{passive:!1})),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeEventListeners",this).call(this)}},{key:"setTimeoutForTabChange",value:function(){var t=this,e=this._util.autoSwitchTimeout,a=this._util.autoSwitchRotationInterval;a&&this._util.switchTabTimeout&&(e=a),this.pauseSwitching(),this._util.switchTabTimeout=y(function(){t.switchTab("next"),t.setTimeoutForTabChange()},e,this)}},{key:"switchTab",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.focus,i=void 0!==a&&a,o=this._util.tabsElems,s=this._state.activeIndex,r="next"===t?s+1:s-1;s===o.length-1&&"next"===t?this.activateTab(o[0].tabElem,{focus:i,force:!0}):0===s&&"prev"===t?this.activateTab(o[o.length-1].tabElem,{focus:i,force:!0}):this.activateTab(o[r].tabElem,{focus:i,force:!0})}},{key:"handleKeyDown",value:function(t){t=t||window.event;var e=this._util.verticalTabs;switch(t.keyCode){case 37:this.switchTab("prev",{focus:!0});break;case 38:e&&(t.preventDefault(),this.switchTab("prev",{focus:!0}));break;case 39:this.switchTab("next",{focus:!0});break;case 40:e&&(t.preventDefault(),this.switchTab("next",{focus:!0}))}}},{key:"pauseSwitching",value:function(){this._util.switchTabTimeout&&b(this._util.switchTabTimeout,this)}},{key:"activateTab",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.focus,o=void 0!==i&&i,s=a.force,n=void 0!==s&&s,u=a.skipScroll,l=void 0!==u&&u,h=a.useTrigger,f=void 0===h||h,v=this._state.activeTabElem,d=this._util.triggerActiveClass;if(!n&&t===v)return void t.classList.add(d);var b=!1,p=t.classList.contains("wafer-fetch")&&t||t.getElementsByClassName("wafer-fetch")[0],g=this._util,m=g.activeClass,w=g.boundary,T=g.elem,_=g.inactiveClass,E=g.singleTabpanel,A=g.shouldAutoSwitch,O=g.shouldScrollRestore,S=g.shouldUseAria,k=g.tabsElems,x=g.targetElems,j=this._state,C=j.activeIndex,F=j.tabsTopStyleInPixel;b=p&&!p.classList.contains("wafer-fetch-complete"),A&&this.pauseSwitching();var P=0,L=0;if(O){var I=window.pageYOffset||document.documentElement.scrollTop,M=window.pageXOffset||document.documentElement.scrollLeft,D=w.getBoundingClientRect(),H=D.top,N=D.left;P=H+I-F,L=N+M,H>F?l=!0:this._state.scrollPositions[C]={top:I,lef:M}}if(b){var R=x||[],U=r(R,1),B=U[0];if(B){var K=B.parentNode;K&&K.style&&(K.style.minHeight="",K.style.minHeight=K.offsetHeight+"px")}}k.forEach(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.tabElem,s=a.hasTrigger,r=arguments[1],n=void 0;if(n=E?x&&x[0]:x&&x[r],i===t){if(i.classList.add(d),i.setAttribute("aria-selected",!0),S&&(i.setAttribute("tabindex",0),o&&i.focus({preventScroll:!0})),e._state.activeIndex=r,e._state.activeTabElem=i,n){if(O&&!l){var u=e._state||{},h=u.scrollPositions,v=void 0===h?{}:h,b=v[r]||{},p=b.top,g=void 0===p?P:p,w=b.left,A=void 0===w?L:w;y(function(){window.scrollTo(A,g)},2)}_&&n.classList.remove(_),n.classList.add(m),n.setAttribute("aria-hidden",!1),S&&n.removeAttribute("hidden"),c.unlock(i),c.sync(n),c.syncUI(n),f&&s&&c.trigger(i),c.emitWaferEvent("tab:selected",{elem:T,meta:{tabElem:i,targetElem:n}})}}else c.lock(i),i.classList.remove(d),i.setAttribute("aria-selected",!1),S&&(n&&n.removeAttribute("hidden"),i.setAttribute("tabindex",-1)),n&&!E&&(n.classList.remove(m),_&&n.classList.add(_),n.setAttribute("aria-hidden",!0),S&&(n.setAttribute("hidden","hidden"),n.setAttribute("tabindex",-1)))})}},{key:"focusActiveTab",value:function(){var t=this._util,e=t.singleTabpanel,a=t.shouldDisableFocus,i=t.targetElems,o=void 0;(o=e?i&&i[0]:i&&i[this._state.activeIndex])&&!a&&(o.setAttribute("tabIndex",-1),o.focus({preventScroll:!0}))}},{key:"deactivateTab",value:function(t){var e=this,a=this._util,i=a.activeClass,o=a.inactiveClass,s=a.tabsElems,r=a.targetElems,n=a.triggerActiveClass;this._state.activeTabElem=null,s.some(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.tabElem,u=arguments[1],l=r&&r[u];if(s===t)return s.classList.remove(n),s.setAttribute("aria-selected",!1),l&&(l.classList.remove(i),o&&l.classList.add(o),l.setAttribute("aria-hidden",!0)),e._state.activeIndex=0,!0})}},{key:"tabClick",value:function(t){!this._util.shouldAllowDefault&&t.preventDefault(),this.activateTab(t.eventTarget),this.focusActiveTab()}},{key:"handleTargetFocusIn",value:function(t){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"tabFocusIn",value:function(t){var e=this._util,a=e.shouldHandleFocus,i=e.focusOutTimeout;a&&(i&&b(i,this),this.activateTab(t.currentTarget))}},{key:"focusIn",value:function(t){this._util.shouldUseAria&&d(document,"keydown",this.handleKeyDown)}},{key:"handleTargetFocusOut",value:function(t){this._util.shouldAutoSwitch&&this.setTimeoutForTabChange()}},{key:"focusOut",value:function(){var t=this,e=this._util,a=e.shouldHandleFocus,i=e.shouldUseAria,o=this._state.activeTabElem;o&&a&&(this._util.focusOutTimeout=y(function(){t.deactivateTab(o)},1,this)),i&&m(document,"keydown",this.handleKeyDown)}},{key:"handleTargetMouseOver",value:function(t){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"tabMouseOver",value:function(t){var e=this._util,a=e.shouldAutoSwitch,i=e.shouldHandleHover;a&&this.pauseSwitching(),i&&this.activateTab(t.currentTarget)}},{key:"handleTargetMouseLeave",value:function(t){this._util.shouldAutoSwitch&&this.setTimeoutForTabChange()}},{key:"mouseover",value:function(){this._util.shouldAutoSwitch&&this.pauseSwitching()}},{key:"mouseleave",value:function(){var t=this._util,e=t.shouldAutoSwitch,a=t.shouldHandleHover,i=t.isCollapsable,o=this._state.activeTabElem;e&&this.setTimeoutForTabChange(),a&&i&&o&&this.deactivateTab(o)}},{key:"tabChange",value:function(t){t.preventDefault();var e=t.eventTarget.selectedIndex||0;this.activateTab(t.eventTarget.options[e])}},{key:"destroy",value:function(){this.pauseSwitching(),this.removeEventListeners(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"config",get:function(){return{shouldAutoSwitch:this._util.shouldAutoSwitch}}}]),e}(v);_.events={change:[["tabs","tabChange"]],click:[["tab","tabClick"]],focusin:[["tab","tabFocusIn"],["_self","focusIn"]],focusout:[["_self","focusOut"]],mouseleave:[["_self","mouseleave"]],mouseover:[["tab","tabMouseOver"],["_self","mouseover"]]},e.default=_,t.exports=e.default},"./src/controller.js":function(t,e,a){"use strict";function i(){return u=o(a("./src/base.js"))}function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u,l=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),c=function t(e,a,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,a);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,a,i)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(i)},h=window.wafer,f=h.controllers,v=h.utils,d=v.findAncestor,b=f.WaferBaseController,p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.root,o=void 0===a?document:a,n=t.selector,l=void 0===n?".wafer-tabs":n;s(this,e);var c=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{root:o,selector:l,WaferClass:(u||i()).default}));return c.sync(),c.handleFetchSuccessEvent=c.handleFetchSuccessEvent.bind(c),c.handleErrorEvent=c.handleErrorEvent.bind(c),c.addEventListeners(),c}return n(e,t),l(e,[{key:"handleTabTargetFetchUpdate",value:function(t){var e=t.elem;if(e&&"tab"===e.getAttribute("role")){var a=t.meta.targetElem||e,i=d(a,"wafer-tabs-target");i&&i.style&&(i.style.minHeight="")}}},{key:"handleFetchSuccessEvent",value:function(t){this.handleTabTargetFetchUpdate(t)}},{key:"handleErrorEvent",value:function(t){"wafer-fetch"===t.name&&this.handleTabTargetFetchUpdate(t)}},{key:"addEventListeners",value:function(){var t=this;window.wafer.ready(function(){window.wafer.on("fetch:success",t.handleFetchSuccessEvent),window.wafer.on("error",t.handleErrorEvent)}),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addEventListeners",this)&&c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addEventListeners",this).call(this)}},{key:"handleVisibilityChange",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this._state.elementInstances,a=!0,i=!1,o=void 0;try{for(var s,r=e.values()[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var n=s.value,u=n.instance;u.config.shouldAutoSwitch&&(t?u.setTimeoutForTabChange():u.pauseSwitching())}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}}}]),e}(b);e.default=p,t.exports=e.default},"./src/entry.js":function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o;e.default=new((o||function(){return o=i(a("./src/controller.js"))}()).default)({selector:".wafer-tabs"}),t.exports=e.default}})});