/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});

window.Granite = window.Granite || {};

(function(Granite, $) {
    Granite.Util = (function() {

        var self = {
            patchText: function(text, snippets) {
                if (snippets) {
                    if (!$.isArray(snippets)) {
                        text = text.replace("{0}", snippets);
                    } else {
                        for (var i = 0; i < snippets.length; i++) {
                            text = text.replace(("{" + i + "}"), snippets[i]);
                        }
                    }
                }
                return text;
            }

        };

        return self;

    }());

}(Granite, jQuery));


(function (Granite, util, $) {
    Granite.HTTP = (function() {
        var contextPath = null,
            SCRIPT_URL_REGEXP = /^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs).*\.js(\?.*)?$/,
            ENCODE_PATH_REGEXP = /[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,
            loginRedirected = false,
            self = {};
        self.getSchemeAndAuthority = function (url) {
            var end;

            try {
                if (url.indexOf("://") === -1) return ""; // e.g. url was /en.html
                end = url.indexOf("/", url.indexOf("://") + 3);

                return (end === -1) ?
                    url :   // e.g. url was http://www.day.com
                    url.substring(0, end);  // e.g. url was http://www.day.com/en.html
            }
            catch (e) {
                return "";
            }
        };
        self.getContextPath = function () {
            return contextPath;
        };
        self.detectContextPath = function () {
            try {
                if (window.CQURLInfo) {
                    contextPath = CQURLInfo.contextPath || "";
                } else {
                    var scripts = document.getElementsByTagName("script");
                    for (var i = 0; i < scripts.length; i++) {
                        // in IE the first script is not the expected widgets js: loop
                        // until it is found
                        var result = SCRIPT_URL_REGEXP.exec(scripts[i].src);
                        if (result) {
                            contextPath = result[1];
                            return;
                        }
                    }
                    contextPath = "";
                }
            } catch (e) {
            }
        };
        self.externalize = function (url) {
            try {
                if (url.indexOf("/") === 0 && contextPath &&
                    url.indexOf(contextPath + "/") !== 0) {
                    url = contextPath + url;
                }
            }
            catch (e) {
            }
            return url;
        };
        self.internalize = function (url, doc) {
            if (url.charAt(0) === '/') {
                if (contextPath === url) {
                    return '';
                }
                else if (contextPath && url.indexOf(contextPath + "/") === 0) {
                    return url.substring(contextPath.length);
                } else {
                    return url;
                }
            }

            if (!doc) doc = document;
            var docHost = self.getSchemeAndAuthority(doc.location.href);
            var urlHost = self.getSchemeAndAuthority(url);
            if (docHost === urlHost) {
                return url.substring(urlHost.length + (contextPath ? contextPath.length : 0));
            }
            else {
                return url;
            }
        };
        self.getPath = function (url) {

            if (!url) {
                if (window.CQURLInfo && CQURLInfo.requestPath) {
                    return CQURLInfo.requestPath;
                } else {
                    url = window.location.pathname;
                }
            } else {
                url = self.removeParameters(url);
                url = self.removeAnchor(url);
            }

            url = self.internalize(url);
            var i = url.indexOf(".", url.lastIndexOf("/"));
            if (i !== -1) {
                url = url.substring(0, i);
            }
            return url;
        };
        self.removeAnchor = function (url) {
            if (url.indexOf("#") !== -1) {
                return url.substring(0, url.indexOf("#"));
            }
            return url;
        };
        self.removeParameters = function (url) {
            if (url.indexOf("?") !== -1) {
                return url.substring(0, url.indexOf("?"));
            }
            return url;
        };
        self.encodePathOfURI = function (url) {
            var parts, delim;
            if (url.indexOf("?") !== -1) {
                parts = url.split("?");
                delim = "?";
            }
            else if (url.indexOf("#") !== -1) {
                parts = url.split("#");
                delim = "#";
            }
            else {
                parts = [url];
            }
            if (ENCODE_PATH_REGEXP.test(parts[0])) {
                parts[0] = self.encodePath(parts[0]);
            }
            return parts.join(delim);
        };
       self.encodePath = function (path) {
            path = encodeURI(path).replace(/%5B/g, '[').replace(/%5D/g, ']');
            path = path.replace(/\+/g, "%2B");
            path = path.replace(/\?/g, "%3F");
            path = path.replace(/;/g, "%3B");
            path = path.replace(/#/g, "%23");
            path = path.replace(/=/g, "%3D");
            path = path.replace(/\$/g, "%24");
            path = path.replace(/,/g, "%2C");
            path = path.replace(/'/g, "%27");
            path = path.replace(/"/g, "%22");
            return path;
       };
        self.handleLoginRedirect = function () {
            if (!loginRedirected) {
                loginRedirected = true;
                alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));
                var l = util.getTopWindow().document.location;
                l.href = self.externalize(sling.LOGIN_URL) +
                    "?resource=" + encodeURIComponent(l.pathname + l.search + l.hash);
            }
        };
        self.getXhrHook = function (url, method, params) {
            method = method || "GET";
            if (window.G_XHR_HOOK && $.isFunction(G_XHR_HOOK)) {
                var p = {
                    "url": url,
                    "method": method
                };
                if (params) {
                    p["params"] = params;
                }
                return G_XHR_HOOK(p);
            }
            return null;
        };

        self.eval = function(response) {
            if (typeof response !== "object") {
                response = $.ajax({
                    url: response,
                    type: 'get',
                    async: false
                });
            }
            try {
                return eval("(" + (response.body ? response.body :
                    response.responseText) + ")");
            } catch (e) {
            }
            return null;
        };

        return self;
    }());

}(Granite, Granite.Util, jQuery));

(function(document, Granite, util, http, $) {

    Granite.I18n = (function() {

         var dicts = {},

            //urlPrefix = "/libs/cq/i18n/dict.",
            urlPrefix = "/aemapi/v6/common/i18n/dict.",	// UPDATE 2019.07.18 i18n export url 변경 ex)/aemapi/v6/common/i18n/dict.uk.b2c.json

            urlBaseNameSelector = ".b2c",

            urlSuffix = ".json",

            manualLocale = undefined,

            pseudoTranslations = false,

            languages = null,

            self = {},

            manualDictionary = false,

            getDictionaryUrl = function(locale) {
        	 	var i18nParam = $("#i18nAppsParam").val();
                if(i18nParam && i18nParam.length > -1){
                	/* [CRHQ-7838] bc의 경우 i18n 분리 */
                	if(i18nParam == "bc"){
                		urlBaseNameSelector = ".bc"
                	}else{
                		urlBaseNameSelector +=  "." + i18nParam;
                	}
	     	 	}

                if (manualDictionary) {
                    return urlPrefix + locale + urlBaseNameSelector + urlSuffix;
                }

                var dictionarySrc = $("html").attr("data-i18n-dictionary-src");

                if (!dictionarySrc) {
                    return urlPrefix + locale + urlBaseNameSelector + urlSuffix;
                }

                return dictionarySrc.replace("{locale}", encodeURIComponent(locale)).replace("{+locale}", locale);
            };

        self.LOCALE_DEFAULT = "en";

        self.PSEUDO_LANGUAGE = "zz";

        self.PSEUDO_PATTERN_KEY = "_pseudoPattern_";

        self.init = function(config) {
            config = config || {};

            this.setLocale(config.locale);
            this.setUrlPrefix(config.urlPrefix);
            this.setUrlSuffix(config.urlSuffix);
        };

        self.setLocale = function(locale) {
            if (!locale) return;

            manualLocale = $('#language').val() || locale;
        };

        self.getLocale = function() {
            if ($.isFunction(manualLocale)) {
                manualLocale = manualLocale();
            }

            return $('#language').val() || self.LOCALE_DEFAULT;
        };

        self.setUrlPrefix = function(prefix) {
            if (!prefix) return;

            urlPrefix = prefix;
            manualDictionary = true;
        };

        self.setUrlSuffix = function(suffix) {
            if (!suffix) return;

            urlSuffix = suffix;
            manualDictionary = true;
        };

        self.getDictionary = function(locale) {
            locale = locale || self.getLocale();

            if (!dicts[locale]) {
                pseudoTranslations = (locale.indexOf(self.PSEUDO_LANGUAGE) === 0);

                try {
                    var response = $.ajax(getDictionaryUrl(locale), {
                        async: false,
                        dataType: "json"
                    });
                    dicts[locale] = $.parseJSON(response.responseText);
                } catch (e) {}
                if (!dicts[locale]) {
                    dicts[locale] = {};
                }
            }
            return dicts[locale];
        };

        self.get = function(text, snippets, note) {
            var dict, newText, lookupText;

            dict = self.getDictionary();

            lookupText = pseudoTranslations ? self.PSEUDO_PATTERN_KEY :
                note ? text + " ((" + note + "))" :
                text;
            if (dict) {
                newText = dict[lookupText];
            }
            if (!newText) {
                newText = text;
            }
            if (pseudoTranslations) {
                newText = newText.replace("{string}", text).replace("{comment}", note ? note : "");
            }
            return util.patchText(newText, snippets);
        };

        self.getVar = function(text, note) {
            if (!text) {
                return null;
            }
            return self.get(text, null, note);
        };

        self.getLanguages = function() {
            if (!languages) {
                try {
                    var json = http.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");
                    $.each(json, function(name, lang) {
                        lang.title = self.getVar(lang.language);
                        if (lang.title && lang.country && lang.country !== "*") {
                            lang.title += " (" + self.getVar(lang.country) + ")";
                        }
                    });
                    languages = json;
                } catch (e) {
                    languages = {};
                }
            }
            return languages;
        };

        self.parseLocale = function(langCode) {
            if (!langCode) {
                return null;
            }
            var pos = langCode.indexOf("_");
            if (pos < 0) {
                pos = langCode.indexOf("-");
            }

            var language, country;
            if (pos < 0) {
                language = langCode;
                country = null;
            } else {
                language = langCode.substring(0, pos);
                country = langCode.substring(pos + 1);
            }
            return {
                code: langCode,
                language: language,
                country: country
            };
        };

        return self;

    }());

}(document, Granite, Granite.Util, Granite.HTTP, jQuery));

Granite.HTTP.detectContextPath();

/**
 * Copyright (c) 2005 - 2010, James Auldridge
 * All rights reserved.
 *
 * Licensed under the BSD, MIT, and GPL (your choice!) Licenses:
 *  http://code.google.com/p/cookies/wiki/License
 *
 */
var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{};jaaulde.utils.cookies=(function(){var resolveOptions,assembleOptionsString,parseCookies,constructor,defaultOptions={expiresAt:null,path:'/',domain:null,secure:false};resolveOptions=function(options){var returnValue,expireDate;if(typeof options!=='object'||options===null){returnValue=defaultOptions;}else
{returnValue={expiresAt:defaultOptions.expiresAt,path:defaultOptions.path,domain:defaultOptions.domain,secure:defaultOptions.secure};if(typeof options.expiresAt==='object'&&options.expiresAt instanceof Date){returnValue.expiresAt=options.expiresAt;}else if(typeof options.hoursToLive==='number'&&options.hoursToLive!==0){expireDate=new Date();expireDate.setTime(expireDate.getTime()+(options.hoursToLive*60*60*1000));returnValue.expiresAt=expireDate;}if(typeof options.path==='string'&&options.path!==''){returnValue.path=options.path;}if(typeof options.domain==='string'&&options.domain!==''){returnValue.domain=options.domain;}if(options.secure===true){returnValue.secure=options.secure;}}return returnValue;};assembleOptionsString=function(options){options=resolveOptions(options);return((typeof options.expiresAt==='object'&&options.expiresAt instanceof Date?'; expires='+options.expiresAt.toGMTString():'')+'; path='+options.path+(typeof options.domain==='string'?'; domain='+options.domain:'')+(options.secure===true?'; secure':''));};parseCookies=function(){var cookies={},i,pair,name,value,separated=document.cookie.split(';'),unparsedValue;for(i=0;i<separated.length;i=i+1){pair=separated[i].split('=');name=pair[0].replace(/^\s*/,'').replace(/\s*$/,'');try
{value=decodeURIComponent(pair[1]);}catch(e1){value=pair[1];}if(typeof JSON==='object'&&JSON!==null&&typeof JSON.parse==='function'){try
{unparsedValue=value;value=JSON.parse(value);}catch(e2){value=unparsedValue;}}cookies[name]=value;}return cookies;};constructor=function(){};constructor.prototype.get=function(cookieName){var returnValue,item,cookies=parseCookies();if(typeof cookieName==='string'){returnValue=(typeof cookies[cookieName]!=='undefined')?cookies[cookieName]:null;}else if(typeof cookieName==='object'&&cookieName!==null){returnValue={};for(item in cookieName){if(typeof cookies[cookieName[item]]!=='undefined'){returnValue[cookieName[item]]=cookies[cookieName[item]];}else
{returnValue[cookieName[item]]=null;}}}else
{returnValue=cookies;}return returnValue;};constructor.prototype.filter=function(cookieNameRegExp){var cookieName,returnValue={},cookies=parseCookies();if(typeof cookieNameRegExp==='string'){cookieNameRegExp=new RegExp(cookieNameRegExp);}for(cookieName in cookies){if(cookieName.match(cookieNameRegExp)){returnValue[cookieName]=cookies[cookieName];}}return returnValue;};constructor.prototype.set=function(cookieName,value,options){if(typeof options!=='object'||options===null){options={};}if(typeof value==='undefined'||value===null){value='';options.hoursToLive=-8760;}else if(typeof value!=='string'){if(typeof JSON==='object'&&JSON!==null&&typeof JSON.stringify==='function'){value=JSON.stringify(value);}else
{throw new Error('cookies.set() received non-string value and could not serialize.');}}var optionsString=assembleOptionsString(options);document.cookie=cookieName+'='+encodeURIComponent(value)+optionsString;};constructor.prototype.del=function(cookieName,options){var allCookies={},name;if(typeof options!=='object'||options===null){options={};}if(typeof cookieName==='boolean'&&cookieName===true){allCookies=this.get();}else if(typeof cookieName==='string'){allCookies[cookieName]=true;}for(name in allCookies){if(typeof name==='string'&&name!==''){this.set(name,null,options);}}};constructor.prototype.test=function(){var returnValue=false,testName='cT',testValue='data';this.set(testName,testValue);if(this.get(testName)===testValue){this.del(testName);returnValue=true;}return returnValue;};constructor.prototype.setOptions=function(options){if(typeof options!=='object'){options=null;}defaultOptions=resolveOptions(options);};return new constructor();})();(function(){if(window.jQuery){(function($){$.cookies=jaaulde.utils.cookies;var extensions={cookify:function(options){return this.each(function(){var i,nameAttrs=['name','id'],name,$this=$(this),value;for(i in nameAttrs){if(!isNaN(i)){name=$this.attr(nameAttrs[i]);if(typeof name==='string'&&name!==''){if($this.is(':checkbox, :radio')){if($this.attr('checked')){value=$this.val();}}else if($this.is(':input')){value=$this.val();}else
{value=$this.html();}if(typeof value!=='string'||value===''){value=null;}$.cookies.set(name,value,options);break;}}}});},cookieFill:function(){return this.each(function(){var n,getN,nameAttrs=['name','id'],name,$this=$(this),value;getN=function(){n=nameAttrs.pop();return!!n;};while(getN()){name=$this.attr(n);if(typeof name==='string'&&name!==''){value=$.cookies.get(name);if(value!==null){if($this.is(':checkbox, :radio')){if($this.val()===value){$this.attr('checked','checked');}else
{$this.removeAttr('checked');}}else if($this.is(':input')){$this.val(value);}else
{$this.html(value);}}break;}}});},cookieBind:function(options){return this.each(function(){var $this=$(this);$this.cookieFill().change(function(){$this.cookify(options);});});}};$.each(extensions,function(i){$.fn[i]=this;});})(window.jQuery);}})();/* END FILE */

/**
 * 디볼트 language 설정
 */
Granite.I18n.setLocale($('#language').val());

/**
 * currencyComma
 * 
 * @return currencyComma
 */
var currencyComma= function (num, currency) {
    if(currency != null){
        currency = currency.toLowerCase();
    }
    if(num === null || num === ""){
        return "";
    }
    var numStr = String(num);
    var siteCd = $("#siteCode").val();
    if (numStr.indexOf(".") > -1) {
        var numSplit = numStr.split(".");
        if(numSplit.length >1 && numSplit[1].length < 2){
            numStr += "0";
        }else if(numSplit[1].length > 2){
            numStr = Number(numStr).toFixed(2);
        }
    }
    var returnValue = "";
    var multistoreSiteCode = '';
    
    if( siteCd === 'levant' ){
        multistoreSiteCode = 'jo';
    } else if( siteCd === 'levant_ar' ){
        multistoreSiteCode = 'jo_ar';
    } else if( siteCd === 'ae' || siteCd === 'ae_ar' ){
		if($.cookies.get("estoreSitecode")) {
			tempMultistoreSiteCode = $.cookies.get("estoreSitecode").toString();
			//NOTICE : dotcomMultistore 값이 존재 하는 경우 ae, ae_ar, kw, kw_ar, om, om_ar, bh, bh_ar 인 경우만 세팅 
			if(tempMultistoreSiteCode === "ae" || tempMultistoreSiteCode === "ae_ar" || tempMultistoreSiteCode === "kw" || tempMultistoreSiteCode === "kw_ar" || tempMultistoreSiteCode === "om" || tempMultistoreSiteCode === "om_ar" || tempMultistoreSiteCode === "bh" || tempMultistoreSiteCode === "bh_ar" || tempMultistoreSiteCode === "qa" || tempMultistoreSiteCode === "qa_ar") {
				multistoreSiteCode = tempMultistoreSiteCode;
			} else {
				multistoreSiteCode = siteCd;
			}
		} else {
			multistoreSiteCode = siteCd;
		}
    }
    
    switch (currency) {
        case "usd":
            if(siteCd === "n_africa"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ".00";
                }
                return returnValue + " DH";
            }else if(siteCd === "iq_ar" || siteCd === "iq_ku"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return returnValue + " $";
            }else{
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return "$" + returnValue;
            }
        case "cad":
            if (siteCd === "ca_fr") {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
                    returnValue = returnValue.replace(".", ",");
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ",00";
                }
                return returnValue + " $";
            } else {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return "$" + returnValue;
            }
        case "eur":
            var tempSepNum;
            if (siteCd === "de" || siteCd === "es" || siteCd === "be_fr" || siteCd === "it" || siteCd === "pt") {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
                }
                
                if( siteCd === "be_fr" ){
                    return returnValue;
                } else {
                    return returnValue + " €";
                }
                
            } else if (siteCd === "fi" || siteCd === "fr" || siteCd === "sk" || siteCd === "at"
                || siteCd === "ee" || siteCd === "lt" || siteCd === "lv" || siteCd === "si" || siteCd === "hr") {
                //ee 에스토니아,lt 리투아니아,lv 라트비아
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ",00";
                }
                return returnValue + " €";
            } else if(siteCd === "gr"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return "€" + returnValue;
            } else {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
                }
                if( siteCd === "be" || siteCd === "nl" ){
                    return returnValue;
                } else {
                    return "€ " + returnValue;
                }
            }
        case "gbp":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "£" + returnValue;
        case "sek":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return returnValue + " kr";
        case "dkk":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return returnValue + " kr";
        case "nok":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return returnValue + " kr";
        case "brl":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
            }
            return "R$ " + returnValue;
        case "inr":
            //var lastThree = "";
            //var otherNumbers = "";
            var naturalNumbers = "";
            var decimalNumbers = ".00";
            if (numStr.indexOf(".") > -1) {
                naturalNumbers = numStr.substring(0, numStr.indexOf("."));
                decimalNumbers = numStr.substring(numStr.indexOf("."));
            } else {
                naturalNumbers = numStr;
            }
            /* // CRHQ-1612 [B2C] 인도 가격내 , 제거 건 => 인도 사이트내 노출되는 가격에 콤마 제거
            if (naturalNumbers.length > 3 && !isNaN(naturalNumbers)) {
                lastThree = "," + naturalNumbers.substring(naturalNumbers.length - 3);
                otherNumbers = naturalNumbers.substring(0, naturalNumbers.length - 3);
            } else {
                lastThree = naturalNumbers;
            }
            returnValue = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThree + decimalNumbers;
            */
            returnValue = naturalNumbers + decimalNumbers;
            return "₹" + returnValue;
        case "krw":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return returnValue + "원";
        case "aed":
            if (siteCd === "ae_ar") {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                
                if(multistoreSiteCode == 'kw_ar') {
                    return returnValue + " د.ك";
                }else if(multistoreSiteCode == 'om_ar') {
                    return returnValue + " ر.ع.";
                }else if(multistoreSiteCode == 'bh_ar') {
                    return returnValue + " .د.ب";
                }else if(multistoreSiteCode == 'qa_ar') {
                    return returnValue + " ر.ق";
                }else{
                    return returnValue + " د.إ";
                }
            } else {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                
                if(multistoreSiteCode == 'kw') {
                    return returnValue + " KD";
                } else if(multistoreSiteCode == 'bh') {
                    return returnValue + " BD";
                } else if(multistoreSiteCode == 'om') {
                    return returnValue + " RO";
                } else if(multistoreSiteCode == 'qa') {
                    return returnValue + " QAR";
                } else {
                    return returnValue + " AED";
                }
            }
        case "rub":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            }
            return returnValue + " ₽";
        case "twd":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return "NT$" + returnValue;
        case "czk"://체코
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            }
            return returnValue+" Kč";
        case "myr"://말레이시아
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "RM " + returnValue;
        case "idr"://인도네시아
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return "Rp " + returnValue;
        case "pln"://폴란드
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ",00";
            }
            return returnValue + " zł";
        case "ron"://루마니아
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
            }
            return returnValue + " lei";
        case "php"://필리핀
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "₱" + returnValue;
        case "sar"://sa
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            
            if("sa" == siteCode){
                return returnValue + " ر.س";
            } else {
                return returnValue + " SAR";
            }
        case "pab":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            //returnValue = parseFloat(returnValue).toFixed(2);
            
            return "US$ " + returnValue;
        case "mxn": //México
        	if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "$ " + returnValue;
            break;
        case "ars": //Argentina
            // 20200310
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "$ " + returnValue;
        case "pen": //Perú
            // 20200310
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "s/ " + returnValue;
        case "clp": //Chile
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return "$ " + returnValue;
        case "cop": //Colombia
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return "$ " + returnValue;
        case "vnd": //동
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return returnValue + " ₫";
        case "chf": //프랑
            if(siteCd === "ch" || siteCd === "ch_fr"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
                }
                return returnValue +" CHF" ;
            }else{
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '\'');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '\'') + ".00";
                }
                return "CHF " + returnValue;
            }
        case "hkd": //hk, hk_en국가
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "HK$ " + returnValue;
        case "lbp"://levant
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            
            if (multistoreSiteCode == "jo") {
                return returnValue + " JD";
            }else if(multistoreSiteCode == "jo_ar"){
                return returnValue + " د.ا";
            }
            break;
        case "pkr": //pk
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
			return "Rs. " + returnValue;
		case "ils": //il
			if (numStr.indexOf(".") > -1) {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			} else {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
			}
			return returnValue + " ₪";
		case "kzt":
			/* kz_kz, kz_ru */
			returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
			return returnValue + " ₸";
			break;
		case "egp": //eg
			if(numStr.indexOf(".") > -1){
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			}else{
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
			}
			return returnValue + " ج.م.";
			break;
		case "huf":
			returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
			return returnValue + " Ft";
			break;
		case "hrk":
			if (numStr.indexOf(".") > -1) {
				returnValue = numStr.replace(".", ",");
				returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + " kn";
			} else {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00" + " kn";
			}
			
			return returnValue;
			break;
		case "uah":
			if (numStr.indexOf(".") > -1) {
				returnValue = numStr.replace(".", ",");
				returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');

			} else {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
			}
			return returnValue + " ₴";
			break;
		case "yen": //jp
			if(numStr.indexOf(".") > -1){
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			}else{
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			}
			return returnValue + "円";
			break;
		case "iqd":  //iq_ar
			if (numStr.indexOf(".") > -1) {
				returnValue = numStr.replace(".", ",");
				returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
			} else {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			}
			if( siteCd === "iq_ar"){
				return returnValue + "د.ع";
			} else if( siteCd === "iq_ku"){
				return returnValue + "د.ع";
			}
			break;
        default:
            try {
                returnValue = parseFloat(numStr).toLocaleString($("#localLang").val(), { style: 'currency', currency: currency.toUpperCase() });
            } catch(e) {
                returnValue = numStr;
            }
            return returnValue;
    }
};
//new-hybris (SEBN 예외처리)
var currencyCommaExcep= function (num, currency) {
    if(currency != null){
        currency = currency.toLowerCase();
    }
    if(num === null || num === ""){
        return "";
    }
    var numStr = String(num);
    var siteCd = $("#siteCode").val();
    if (numStr.indexOf(".") > -1) {
        var numSplit = numStr.split(".");
        if(numSplit.length >1 && numSplit[1].length < 2){
            numStr += "0";
        }else if(numSplit[1].length > 2){
        	if(siteCd !== "id" ) {
        		numStr = Number(numStr).toFixed(2);
        	}  
            
        }
    }
    var returnValue = "";
    var multistoreSiteCode = '';
    
    if( siteCd === 'levant' ){
        multistoreSiteCode = 'jo';
    } else if( siteCd === 'levant_ar' ){
        multistoreSiteCode = 'jo_ar';
    } else if( siteCd === 'ae' || siteCd === 'ae_ar' ){
		if($.cookies.get("estoreSitecode")) {
			tempMultistoreSiteCode = $.cookies.get("estoreSitecode").toString();
			//NOTICE : dotcomMultistore 값이 존재 하는 경우 ae, ae_ar, kw, kw_ar, om, om_ar, bh, bh_ar 인 경우만 세팅 
			if(tempMultistoreSiteCode === "ae" || tempMultistoreSiteCode === "ae_ar" || tempMultistoreSiteCode === "kw" || tempMultistoreSiteCode === "kw_ar" || tempMultistoreSiteCode === "om" || tempMultistoreSiteCode === "om_ar" || tempMultistoreSiteCode === "bh" || tempMultistoreSiteCode === "bh_ar" || tempMultistoreSiteCode === "qa" || tempMultistoreSiteCode === "qa_ar") {
				multistoreSiteCode = tempMultistoreSiteCode;
			} else {
				multistoreSiteCode = siteCd;
			}
		} else {
			multistoreSiteCode = siteCd;
		}
    }
    
    switch (currency) {
        case "usd":
            if(siteCd === "n_africa"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ".00";
                }
                return returnValue + " DH";
            }else{
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return "$" + returnValue;
            }
        case "dollar":
            if (siteCd === "ca_fr") {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
                    returnValue = returnValue.replace(".", ",");
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ",00";
                }
                return returnValue + " $";
            } else {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return "$" + returnValue;
            }
        case "eur":
            var tempSepNum;
            if (siteCd === "de" || siteCd === "es" || siteCd === "be_fr" || siteCd === "it" || siteCd === "pt") {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
                }
                
                 return returnValue + " €";
                
            } else if (siteCd === "fi" || siteCd === "fr" || siteCd === "sk" || siteCd === "at"
                || siteCd === "ee" || siteCd === "lt" || siteCd === "lv" || siteCd === "si") {
                //ee 에스토니아,lt 리투아니아,lv 라트비아
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ",00";
                }
                return returnValue + " €";
            } else if(siteCd === "gr"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                return "€" + returnValue;
            } else {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
                }
               
                if( siteCd === "be" || siteCd === "nl" ){
                    return returnValue;
                } else {
                    return "€ " + returnValue;
                }
                
            }
        case "gbp":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "£" + returnValue;
        case "sek":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return returnValue + " kr";
        case "dkk":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return returnValue + " kr";
        case "nok":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return returnValue + " kr";
        case "brl":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
            }
            return "R$ " + returnValue;
        case "inr":
            //var lastThree = "";
            //var otherNumbers = "";
            var naturalNumbers = "";
            var decimalNumbers = ".00";
            if (numStr.indexOf(".") > -1) {
                naturalNumbers = numStr.substring(0, numStr.indexOf("."));
                decimalNumbers = numStr.substring(numStr.indexOf("."));
            } else {
                naturalNumbers = numStr;
            }
            /* // CRHQ-1612 [B2C] 인도 가격내 , 제거 건 => 인도 사이트내 노출되는 가격에 콤마 제거
            if (naturalNumbers.length > 3 && !isNaN(naturalNumbers)) {
                lastThree = "," + naturalNumbers.substring(naturalNumbers.length - 3);
                otherNumbers = naturalNumbers.substring(0, naturalNumbers.length - 3);
            } else {
                lastThree = naturalNumbers;
            }
            returnValue = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThree + decimalNumbers;
            */
            returnValue = naturalNumbers + decimalNumbers;
            return "₹" + returnValue;
        case "krw":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return returnValue + "원";
        case "aed":
            if (siteCd === "ae_ar") {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                
                if(multistoreSiteCode == 'kw_ar') {
                    return returnValue + " د.ك";
                }else if(multistoreSiteCode == 'om_ar') {
                    return returnValue + " ر.ع.";
                }else if(multistoreSiteCode == 'bh_ar') {
                    return returnValue + " .د.ب";
                }else if(multistoreSiteCode == 'qa_ar') {
                    return returnValue + " ر.ق";
                }else{
                    return returnValue + " د.إ";
                }
            } else {
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
                }
                
                if(multistoreSiteCode == 'kw') {
                    return returnValue + " KD";
                } else if(multistoreSiteCode == 'bh') {
                    return returnValue + " BD";
                } else if(multistoreSiteCode == 'om') {
                    return returnValue + " RO";
                } else if(multistoreSiteCode == 'qa') {
                    return returnValue + " QAR";
                } else {
                    return returnValue + " AED";
                }
            }
        case "rub":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            }
            return returnValue + " ₽";
        case "twd":
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return "NT$" + returnValue;
        case "czk"://체코
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            }
            return returnValue+" Kč";
        case "myr"://말레이시아
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "RM " + returnValue;
        case "idr"://인도네시아
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return "Rp " + returnValue;
        case "pln"://폴란드
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ",00";
            }
            return returnValue + " zł";
        case "ron"://루마니아
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(".", ",");
                returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
            }
            return returnValue + " lei";
        case "php"://필리핀
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "₱" + returnValue;
        case "sar"://sa
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            
            if("sa" == siteCode){
                return returnValue + " ر.س";
            } else {
                return returnValue + " SAR";
            }
        case "pab":
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            //returnValue = parseFloat(returnValue).toFixed(2);
            
            return "US$ " + returnValue;
        case "mxn": //México
            return "$ " + num;
        case "ars": //Argentina
            // 20200310
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "$ " + returnValue;
        case "pen": //Perú
            // 20200310
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "s/ " + returnValue;
        case "clp": //Chile
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return "$ " + returnValue;
        case "cop": //Colombia
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return "$ " + returnValue;
        case "vnd": //동
            returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            return returnValue + " ₫";
        case "chf": //프랑
            if(siteCd === "ch" || siteCd === "ch_fr"){
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(".", ",");
                    returnValue = returnValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ",00";
                }
                return returnValue +" CHF" ;
            }else{
                if (numStr.indexOf(".") > -1) {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '\'');
                } else {
                    returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, '\'') + ".00";
                }
                return "CHF " + returnValue;
            }
        case "hkd": //hk, hk_en국가
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            return "HK$ " + returnValue;
        case "lbp"://levant
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
            
            if (multistoreSiteCode == "jo") {
                return returnValue + " JD";
            }else if(multistoreSiteCode == "jo_ar"){
                return returnValue + " د.ا";
            }
            break;
        case "pkr": //pk
            if (numStr.indexOf(".") > -1) {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else {
                returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
            }
			return "Rs. " + returnValue;
		case "ils": //il
			if (numStr.indexOf(".") > -1) {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
			} else {
				returnValue = numStr.replace(/\B(?=(\d{3})+(?!\d))/g, ',') + ".00";
			}
			return returnValue + " ₪";
        default:
            try {
                returnValue = parseFloat(numStr).toLocaleString($("#localLang").val(), { style: 'currency', currency: currency.toUpperCase() });
            } catch(e) {
                returnValue = numStr;
            }
            return returnValue;
    }
};

/** 
 * priceDisplay 에서 숫자+소수점만 반환
 */
var deleteCurrencyComma = function(text, currency){
    var returnValue = '';
    var siteCd = $("#siteCode").val();
    
    if(currency != null){
        currency = currency.toLowerCase();
    }
    if(fnIsNull(text)){
        return "";
    } else {
        if(siteCd === "ca_fr" || (currency==="eur" && siteCd !== "gr") || currency === "rub"
                || currency === "brl" || currency === "pln" || currency === "ron" 
                || currency === "krw" || currency === "twd" || siteCd === "ch" || siteCd === "ch_fr"){
            if (text.indexOf(",") > -1) {
                var numSplit = text.split(",");
                if(numSplit[0] != null && numSplit[0] != ""){
                    returnValue = numSplit[0].replace(/[^0-9]/g, "");
                }
                if(numSplit[1] != null && numSplit[1] != ""){
                    returnValue += '.'+numSplit[1].replace(/[^0-9]/g, "");
                }
            } else {
                returnValue = text.replace(/[^0-9]/g, "");
            }
        } else if(siteCd === "pk") {
            if (text.indexOf(".") > -1) {
                var numSplit = text.split(".");
                if(numSplit[1] != null && numSplit[1] != ""){
                    returnValue = numSplit[1].replace(/[^0-9]/g, "");
                }
                if(numSplit[2] != null && numSplit[2] != ""){
                    returnValue += '.'+numSplit[2].replace(/[^0-9]/g, "");
                }
            }
        } else {
            if (text.indexOf(".") > -1) {
                var numSplit = text.split(".");
                if(numSplit[0] != null && numSplit[0] != ""){
                    returnValue = numSplit[0].replace(/[^0-9]/g, "");
                }
                if(numSplit[1] != null && numSplit[1] != ""){
                    returnValue += '.'+numSplit[1].replace(/[^0-9]/g, "");
                }
            } else {
                returnValue = text.replace(/[^0-9]/g, "");
            }
        }

        return returnValue;
    }
};



var deleteCurrency= function (text, currency) {

	if(fnIsNull(text)){
		return "";
	} else {
		// 20200305
		if(siteCode == "cl" || siteCode == "py"){
			text = text.replace(/[^0-9]/g, "");
		}else if(siteCode == "pe" || siteCode == "ar"  || siteCode == "co" || siteCode === "pk"){
			// 3,499.00 -> 3499
			if (text.indexOf(".") > -1) {
				var numSplit = text.split(".");
				if(siteCode === "pk"){
					if(numSplit[1] != null && numSplit[1] != ""){
						text = numSplit[1].replace(/[^0-9]/g, "");
					}
				}else{
					if(numSplit[0] != null && numSplit[0] != ""){
						text = numSplit[0].replace(/[^0-9]/g, "");
					}
				}
			}
		}else if(siteCode == "latin"){
			// US$999.00
		}
		
		var returnValue = text;
		
		if(currency != null){
			currency = currency.toLowerCase();
		}
		
		switch (currency) {
			case "usd":
				if(text.indexOf("$") > -1){
					returnValue = text.replace("$", '');
				}
				return returnValue;
				break;
			case "dollar":
				if (siteCode === "ca_fr") {
					if(text.indexOf("$") > -1){
						returnValue = text.replace("$", '');
					}
					return returnValue;
				} else {
					if(text.indexOf("$") > -1){
						returnValue = text.replace("$", '');
					}
					return returnValue;
				}
				break;
			case "eur":
				var tempSepNum;
				if (siteCode === "de" || siteCode === "es" || siteCode === "be_fr" || siteCode === "at") {
					if(text.indexOf("€") > -1){
						returnValue = text.replace("€", '');
					}
					return returnValue ;
				} else if (siteCode === "fi" || siteCode === "fr" || siteCode === "sk" 
					|| siteCode === "ee" || siteCode === "lt" || siteCode === "lv" || siteCode === "si") {
					if(text.indexOf("€") > -1){
						returnValue = text.replace("€", '');
					}
					return returnValue;
				} else {
					if(text.indexOf("€") > -1){
						returnValue = text.replace("€", '');
					}
					return returnValue;
				}
				break;
			case "gbp":
				if(text.indexOf("£") > -1){
					returnValue = text.replace("£", '');
				}
				return returnValue;
				break;
			case "sek":
				if(text.indexOf("kr") > -1){
					returnValue = text.replace("kr", '');
				}
				return returnValue;
				break;
			case "dkk":
				if(text.indexOf("kr") > -1){
					returnValue = text.replace("kr", '');
				}
				return returnValue;
				break;
			case "nok":
				if(text.indexOf("kr") > -1){
					returnValue = text.replace("kr", '');
				}
				return returnValue;
				break;
			case "brl":
				if(text.indexOf("R$") > -1){
	                returnValue = text.replace(".", '').replace("R$", '').replace(" ", '').replace(",", '.');
				}
				return returnValue;
				break;

			case "inr":
				if(text.indexOf("₹") > -1){
					returnValue = text.replace("₹", '');
				}
				return "₹" + returnValue;
				break;

			case "krw":
				if(text.indexOf("원") > -1){
					returnValue = text.replace("원", '');
				}
				return returnValue;
				break;

			case "ae":
				if (siteCode === "ae_ar") {
					if(text.indexOf("د.إ") > -1){
						returnValue = text.replace("د.إ", '');
					}
					return returnValue;

				} else {
					if(text.indexOf("AED") > -1){
						returnValue = text.replace("AED", '');
					}
					return returnValue;
				}

				break;

			case "rub":
				if(text.indexOf("₽") > -1){
					returnValue = text.replace("₽", '');
				}

				return returnValue;
				break;
			case "twd":
				if(text.indexOf("NT$") > -1){
					returnValue = text.replace("NT$", '');
				}

				return "NT$" + returnValue;
				break;
			case "czk":
				//체코
				if(text.indexOf("Kč") > -1){
					returnValue = text.replace("Kč", '');
				}

				return returnValue;
				break;
			case "myr":
				//말레이시아
				if(text.indexOf("RM") > -1){
					returnValue = text.replace("RM", '');
				}

				return returnValue;
				break;
			case "aed"://ae-ar
				if(text.indexOf(" د.إ") > -1){
					returnValue = text.replace(" د.إ", '');
				}
				
				return returnValue;
				break;	
			case "pab": //latin
				if(text.indexOf("U$S") > -1){
					returnValue = text.replace("U$S", '').replace(",", '').replace(" ", '');
				} else if(text.indexOf("US$") > -1) {
					returnValue = text.replace("US$", '').replace(",", '').replace(" ", '');
				}
				return returnValue;
				break;	
			case "mxn": //México
				if(text.indexOf("$") > -1){
					returnValue = text.replace("$", '').replace(" ", '');
				}
				return returnValue;
				break;
			case "ars": //Argentina
				if(text.indexOf("$") > -1){
					returnValue = text.replace("$", '').replace(" ", '');
				}
				return returnValue;
				break;
			case "pen": //Perú
				if(text.indexOf("s/") > -1){
					returnValue = text.replace("s/", '').replace(" ", '');
				}
				return returnValue;
				break;
			case "clp": //Chile
				if(text.indexOf("$") > -1){
					returnValue = text.replace("$", '').replace(" ", '');
				}
				return returnValue;
				break;			
			case "cop": //Colombia
				if(text.indexOf("$") > -1){
					returnValue = text.replace("$", '').replace(" ", '');
				}
				return returnValue;
				break;	
			case "pyg": //py
				if(text.indexOf("₲") > -1){
					returnValue = text.replace("₲", '').replace(" ", '');
				}
				return returnValue;
				break;
			case "hkd": //hk, hk_en
				if(text.indexOf("HK$") > -1){
					returnValue = text.replace("HK$", '').replace(" ", '');
				}
				return returnValue;
				break;
			case "pkr":	//pk
				if (text.indexOf("Rs.") > -1) {
					//returnValue = text.replace("Rs.", '').replace(" ", '');
				}
				return returnValue;
				break;
			case "ils": //il
				if (text.indexOf("₪") > -1) {
					returnValue = text.replace("₪", '').replace(" ", '');
				}
				return returnValue;
			default:
				return text;
				break;
		}
	}
};

var imagePreset = function (parmImgSrc) {
    if (parmImgSrc.indexOf("jpg") > -1) {
        return "?$ORIGIN_JPG$";
    } else if (parmImgSrc.indexOf("jpeg") > -1) {
        return "?$ORIGIN_JPG$";
    } else if (parmImgSrc.indexOf("png") > -1) {
        return "?$ORIGIN_PNG$";
    } else if (parmImgSrc.indexOf("gif") > -1) {
        return "?$ORIGIN_GIF$";
    } else {
        return "?$ORIGIN_PNG$";
    }
};

var imgDomain = function (imgUrl, iconFl) {
    var newUrl = "";
    var useScene7domain = $('#scene7domain').val();
    if (imgUrl !== null) {
        if (imgUrl.indexOf("image.samsung.com") > -1) {
            newUrl = imgUrl + imagePreset(imgUrl);
        } else if (imgUrl.indexOf("http:") > -1 || imgUrl === "") {
            newUrl = imgUrl;
        } else {
            if (iconFl) useScene7domain = useScene7domain.replace('/image/', '/content/');
            newUrl = useScene7domain + imgUrl + imagePreset(imgUrl);
        }
    }
    return newUrl;
};

var jqueryImgsrc = function (imgsrc, crunmode, crunmode2) {
    if (imgsrc === null) {
        return "";
    }
    if (imgsrc.indexOf("/content/dam/samsung") > -1) {
        if (crunmode === "qa") {
            if (crunmode2 === "stg") {
                imgsrc = imgsrc.replace("/content/dam/samsung", "//stg-images.samsung.com/is/image/samsung/assets");
            } else if (crunmode2 === "prod") {
                imgsrc = imgsrc.replace("/content/dam/samsung", "//stg-images.samsung.com/is/image/samsung/assets");
            } else {
                imgsrc = imgsrc.replace("/content/dam/samsung", "//stg-images.samsung.com/is/image/samsungdev/assets");
            }
            imgsrc += imagePreset(imgsrc);
        } else if (crunmode === "live") {
            if (crunmode2 === "stg") {
                imgsrc = imgsrc.replace("/content/dam/samsung", "//images.samsung.com/is/image/samsungstg/assets");
            } else if (crunmode2 === "prod") {
                imgsrc = imgsrc.replace("/content/dam/samsung", "//images.samsung.com/is/image/samsung/assets");
            } else {
                imgsrc = imgsrc.replace("/content/dam/samsung", "//images.samsung.com/is/image/samsungdev/assets");
            }
            imgsrc += imagePreset(imgsrc);
        }
    }
    
    return imgsrc;
};

/*
 * Anil Singh
 */

var dateFormat = function () {
    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
        timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
        timezoneClip = /[^-+\dA-Z]/g,
        pad = function (val, len) {
            val = String(val);
            len = len || 2;
            while (val.length < len) val = "0" + val;
            return val;
        };

    // Regexes and supporting functions are cached through closure
    return function (date, mask, utc) {
        var dF = dateFormat;
        var originDate = date;
        // You can't provide utc if you skip other args (use the "UTC:" mask prefix)
        if (arguments.length === 1 && Object.prototype.toString.call(date) === "[object String]" && !/\d/.test(date)) {
            mask = date;
            date = undefined;
        }

        // Passing date through Date applies Date.parse, if necessary
        date = date ? new Date(date) : new Date;
        if (isNaN(date)) {
        	if(originDate) return originDate;
        	throw SyntaxError("invalid date");        	
        }

        mask = String(dF.masks[mask] || mask || dF.masks["default"]);

        // Allow setting the utc argument via the mask
        if (mask.slice(0, 4) === "UTC:") {
            mask = mask.slice(4);
            utc = true;
        }

        var _ = utc ? "getUTC" : "get",
            d = date[_ + "Date"](),
            D = date[_ + "Day"](),
            m = date[_ + "Month"](),
            y = date[_ + "FullYear"](),
            H = date[_ + "Hours"](),
            M = date[_ + "Minutes"](),
            s = date[_ + "Seconds"](),
            L = date[_ + "Milliseconds"](),
            o = utc ? 0 : date.getTimezoneOffset(),
            flags = {
                d: d,
                dd: pad(d),
                ddd: dF.i18n.dayNames[D],
                dddd: dF.i18n.dayNames[D + 7],
                m: m + 1,
                mm: pad(m + 1),
                mmm: dF.i18n.monthNames[m],
                mmmm: dF.i18n.monthNames[m + 12],
                yy: String(y).slice(2),
                yyyy: y,
                h: H % 12 || 12,
                hh: pad(H % 12 || 12),
                H: H,
                HH: pad(H),
                M: M,
                MM: pad(M),
                s: s,
                ss: pad(s),
                l: pad(L, 3),
                L: pad(L > 99 ? Math.round(L / 10) : L),
                t: H < 12 ? "a" : "p",
                tt: H < 12 ? "am" : "pm",
                T: H < 12 ? "A" : "P",
                TT: H < 12 ? "AM" : "PM",
                Z: utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),
                o: (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),
                S: ["th", "st", "nd", "rd"][d % 10 > 3 ? 0 : (d % 100 - d % 10 !== 10) * d % 10]
            };

        return mask.replace(token, function ($0) {
            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
        });
    };
}();

// Some common format strings
dateFormat.masks = {
    "default": "ddd mmm dd yyyy HH:MM:ss",
    shortDate: "m/d/yy",
    mediumDate: "mmm d, yyyy",
    longDate: "mmmm d, yyyy",
    fullDate: "dddd, mmmm d, yyyy",
    shortTime: "h:MM TT",
    mediumTime: "h:MM:ss TT",
    longTime: "h:MM:ss TT Z",
    isoDate: "yyyy-mm-dd",
    isoTime: "HH:MM:ss",
    isoDateTime: "yyyy-mm-dd'T'HH:MM:ss",
    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
};

// Internationalization strings
dateFormat.i18n = {
    dayNames: [
        "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat",
        "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    ],
    monthNames: [
        "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec",
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    ]
};

// For convenience...
Date.prototype.format = function (mask, utc) {
    return dateFormat(this, mask, utc);
};


var loginJwtApiCal = function (storeDomain, buyingHreflang, countryIsoCode) {

    var validateParamObj = {"jwt": loginJwt};
    //us 국가 만 있음
    if(siteCode==="us"){
        var epp_verified = $.cookies.get("epp_verified",{domain:".samsung.com"});
        
        var tmktid = $.cookies.get("tmktid",{domain:".samsung.com"});
        var validateStoreId = $.cookies.get("store_id", {domain:".samsung.com"});
        
        if(epp_verified != null){
            epp_verified = epp_verified.toString();
            if(epp_verified=="true" && tmktid != null && tmktid != ''){
                validateParamObj["store_id"] = tmktid.toString();
            } else if(validateStoreId != null && validateStoreId != ""){
                validateParamObj["store_id"] = validateStoreId.toString();
            }
        }
    }
    $.ajax({
        headers : {
            "Cache-Control": "no-cache",
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin" : "*"
        },
        url : storeDomain + "/v1/sso/user/validate",
        type : "POST",
        dataType : "json",
        data : JSON.stringify (validateParamObj),
        timeout : 10000,
        xhrFields: { withCredentials: true },
        async : false,
        beforeSend : function(xhr){
            /* multi language 사이트 헤더값 추가 */
            if(buyingMultiLanguageYn === "Y"){ 
                xhr.setRequestHeader("x-ecom-locale", buyingHreflang);
            }
        },
        success : function (data) {
            if(data.statusCode !== 200 && data.statusCode !== "200"){
                $.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
                return {"isValidJwtToken":false};
            }
        },
        error : function(jqXHR, textStatus, errorThrown){
            console.error(textStatus);
            //2019.10.10 epp jwt 토큰 쿠키 삭제 방지 로직 추가
            if(jqXHR.responseJSON == null || jqXHR.responseJSON.error !== "StoreIdNotPresent"){
                $.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
                return {"isValidJwtToken":false};
            } else {
                return {"loginFlag":false};
            }
        }
    });
};


var isValidJwtTokenApiCal = function (storeDomain, buyingHreflang, countryIsoCode, buyingMultiLanguageYn) {

	var redCookie = $.cookies.get("ReD", {domain : ".samsung.com"});

	var siteCd = $("#siteCode").val();

	var returnVal = false;
		
	$.ajax({
		url: "/aemapi/v6/data-login/callSALogin."+siteCd+".json",
		type: "GET",
		dataType : "json",
		success: function (data) {
			if(data.statusCode===200){
				if(data.redCookieChk === "Y" && $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"})){
					returnVal = true;
				}
			}
		},
		error:function(jqXHR, textStatus, errorThrown){
		}
	});
	return returnVal;
};

var loginJwtValidateApiCal = function (storeDomain, buyingHreflang, countryIsoCode, buyingMultiLanguageYn, loginJwt) {
	var returnVal = false;
	// jwt validate 체크

	var validateParamObj = {"jwt": loginJwt};
	//us 국가 만 있음
	if(siteCode==="us"){
		var epp_verified = $.cookies.get("epp_verified",{domain:".samsung.com"});
		
		var tmktid = $.cookies.get("tmktid",{domain:".samsung.com"});
		var validateStoreId = $.cookies.get("store_id", {domain:".samsung.com"});
		
		if(epp_verified != null){
			epp_verified = epp_verified.toString();
			if(epp_verified=="true" && tmktid != null && tmktid != ''){
				validateParamObj["store_id"] = tmktid.toString();
			} else if(validateStoreId != null && validateStoreId != ""){
				validateParamObj["store_id"] = validateStoreId.toString();
			}
		}
	}
	$.ajax({
		headers : {
			"Cache-Control": "no-cache",
			"Content-Type": "application/json",
			"Access-Control-Allow-Origin" : "*"
		},
		url : storeDomain + "/v1/sso/user/validate",
		type : "POST",
		dataType : "json",
		data: JSON.stringify (validateParamObj),
		xhrFields: { withCredentials: true },
		async : false,
		beforeSend : function(xhr){
			/* multi language 사이트 헤더값 추가 */
			if(buyingMultiLanguageYn === "Y"){ 
				xhr.setRequestHeader("x-ecom-locale", buyingHreflang);
			}
		},
		success : function (data) {
			if(data.statusCode === 200 || data.statusCode === "200"){
				returnVal = true;
				$('#loginValidateYnForGPv2').val("Y");
			} else {
				$('#loginValidateYnForGPv2').val("N");
			}
		},
		error : function() {
			$('#loginValidateYnForGPv2').val("N");
		}
	});
	return returnVal;
};
/**
 * 각 Product Page 및 Offer Page 에서 공통 Login Check
 */
var commonLoginCheck = function(callbackFn){
	var shopIntegrationFlag = $("#shopIntegrationFlag").val();
	var isGPv2 = shopIntegrationFlag === "GPv2" ? true : false;

	var failLogin = function(){
		$('#loginValidateYnForGPv2').val("N");
		return false;
	};
	var successLogin = function(){
		$('#loginValidateYnForGPv2').val("Y");
		return true;
	};
	
	//[EPP] epp 일 때 login check 로직 분기 추가
    if(checkEppSite()){
        if(window.sg.epp != null && window.sg.epp.common != null){
            if (callbackFn && typeof (callbackFn) === "function") {
                callbackFn(window.sg.epp.common.isLogged);
            } else {
                return window.sg.epp.common.isLogged;
            }
        } else {
            return false;
        }
    } else if(isGPv2){
		var storeDomain = $("#storeDomain").val();
		var countryIsoCode = $("#countryIsoCode").val();
		var buyingMultiLanguageYn = $("#multiLanguageYn").val();
		var buyingHreflang = $("#localLang").val();
		var token = $.cookies.get("xsdcxyn", {domain : ".samsung.com"});
		var loginJwt = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
		var isLoginValidateYn = $('#loginValidateYnForGPv2').val(); // "GNB 에서 로그인 처리 된 경우" 혹은 "이미 commonLoginCheck 한 경우"
		var loginFlag = false;
		var isValidJwtToken = true;

		if(isLoginValidateYn){
			if(isLoginValidateYn === "Y"){
				return true;
			} else if(isLoginValidateYn === "N"){
				return false;
			}
		} else {
			// Account Login 토큰 값이 있을 경우에만 로그인 체크
			if(loginJwt != null){
				// jwt validate 체크
				var validateParamObj = {"jwt": loginJwt};
				var isUSEppGuestUser = false;
				//us 국가 만 있음
				if(siteCode==="us"){
					var epp_verified = $.cookies.get("epp_verified",{domain:".samsung.com"});
					
					var tmktid = $.cookies.get("tmktid",{domain:".samsung.com"});
					var validateStoreId = $.cookies.get("store_id", {domain:".samsung.com"});
					if(epp_verified != null){
						epp_verified = epp_verified.toString();
						if(epp_verified=="true" && tmktid != null && tmktid != ''){
							validateParamObj["store_id"] = tmktid.toString();
						} else if(validateStoreId != null && validateStoreId != ""){
							validateParamObj["store_id"] = validateStoreId.toString();
						}
					}
					
					$.ajax({
			    		headers: {
					         "Cache-Control": "no-cache",
					         "Content-Type": "application/json",
					         "Access-Control-Allow-Origin" : "*"
			    		},
					    url: storeDomain + "/v1/sso/jwt/details",
		    			type: "POST",
		    			async: false,
			    		dataType : "json",
				    	data: JSON.stringify (validateParamObj),
						xhrFields : {
							withCredentials: true
						},
					    success: function (data) {
					    	if(data != null && data !== "" && data.login_type != null && (data.login_type === "guest_epp_store"|| data.login_type === "referral_url")){
					    		isUSEppGuestUser = true;
					    	 }
					     }
			    	 });
				}
				if(!isUSEppGuestUser){
					$.ajax({
						headers : {
							"Cache-Control": "no-cache",
							"Content-Type": "application/json",
							"Access-Control-Allow-Origin" : "*"
						},
						url : storeDomain + "/v1/sso/user/validate",
						type : "POST",
						dataType : "json",
						data: JSON.stringify (validateParamObj),
						async : false,
						xhrFields : {
							withCredentials: true
						},
						beforeSend : function(xhr){
							if(buyingMultiLanguageYn === "Y"){
								xhr.setRequestHeader("x-ecom-locale", buyingHreflang);
							}
						},
						success : function (data) {
							if(data.statusCode !== 200 && data.statusCode !== "200"){
								isValidJwtToken = false;
							}
						},
						error : function(jqXHR, textStatus, errorThrown){
							console.error(textStatus);
							isValidJwtToken = false;
						}
					});
				} else {
					loginFlag = failLogin();
				}
				
				if(!isValidJwtToken){
					if(isValidJwtTokenApiCal(storeDomain,buyingHreflang,countryIsoCode,buyingMultiLanguageYn)){
						var newJWT = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"}).toString();
						loginFlag = loginJwtValidateApiCal(storeDomain, buyingHreflang, countryIsoCode,buyingMultiLanguageYn,newJWT);
					} else {
						loginFlag = failLogin();
					}
				}else{
					loginFlag = successLogin();
				}
			}else{
				if(token != null){
					if(isValidJwtTokenApiCal(storeDomain,buyingHreflang,countryIsoCode,buyingMultiLanguageYn)){
						var newJWT = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"}).toString();
						loginFlag = loginJwtValidateApiCal(storeDomain, buyingHreflang, countryIsoCode,buyingMultiLanguageYn,newJWT);
					} else {
						loginFlag = failLogin();
					}
				} else {
					loginFlag = failLogin();
				}
			}
			return loginFlag;
		}
		
	} else {
		//new-hybris
		return ss.Auth.checkSignIn(callbackFn);
	}
};

/**
 * 페이지 로딩 시 get wishlist api call function
 */
var addedWishList = [];
var commonGetWishlist = function (callbackFn) {
    
	var shopIntegrationFlag = $("#shopIntegrationFlag").val();
    var isNewHybris = shopIntegrationFlag === "Hybris-new" ? true : false;				//new-hybris
    var storeDomain = $("#storeDomain").val();
    const b2bFlag = $('#b2bFlag').val();
    const storeSiteCode = $('#store_sitecode').val();
    
    let isEppLogged = false;
    let siteCodeWithEpp = storeSiteCode;
    if(checkEppSite()){
        if(window.sg.epp != null && window.sg.epp.common != null){
            siteCodeWithEpp = window.sg.epp.common.companyCode;
            isEppLogged = window.sg.epp.common.isLogged;
        }
    }
    
    addedWishList = [];
    //new-hybris
    if ( isNewHybris || (b2bFlag && shopIntegrationFlag =='true')){
        var guid = $.cookies.get("guid",{domain:".samsung.com"});
        if( guid != null || isEppLogged) {
            $.ajax({
                url: storeDomain + "/tokocommercewebservices/v2/" + siteCodeWithEpp + "/users/current/wishlist?loadEntries=true",
                type: "GET",
                dataType: "json",
                timeout: 20000,
                xhrFields: {
                    withCredentials: true
                },
                crossDomain: true,
                success: function (data) {
                    if (data != null && data.wishlists != null && data.wishlists.length > 0) {
                        for( wishlist in data.wishlists){
                            const wishlistItem = data.wishlists[wishlist];
                            if( wishlistItem != null && wishlistItem.isDefault){
                                if(wishlistItem.entries != null && wishlistItem.entries.length > 0){
                                    for(entry in wishlistItem.entries){
                                        const entItem = wishlistItem.entries[entry];
                                        if(entItem.product != null && entItem.product.code != null){
                                            let wishlistItemObj = {};
                                            wishlistItemObj.sku = entItem.product.code;
                                            wishlistItemObj.deleted = false;

                                            addedWishList.push(wishlistItemObj);
                                        }
                                    }
                                }
                                break;
                            }
                        }
                    }
                },
                error: function (e) {
                    addedWishList = [];
                },
                complete : function () {
                    if (callbackFn && typeof (callbackFn) === "function") {
                        callbackFn();
                    }
                }
            });
        } else if (callbackFn && typeof (callbackFn) === "function") {
            callbackFn();
        }
    } else if(shopIntegrationFlag === "GPv2"){
        var countryIsoCode = $("#countryIsoCode").val();
        var loginJwt = $.cookies.get("jwt_" + countryIsoCode, {
            domain: ".samsung.com"
        });
        
        //[EPP] store_id 파라미터 추가
        let param = {};
        if(isEppLogged){
            if(window.sg.epp!= null && window.sg.epp.common != null){
                param["store_id"] = window.sg.epp.common.companyCode;
            }
        }
        //[EPP] store_id 파라미터 추가
        
        /* 20190219 US GPv2 api 호출 시  헤더 추가 관련 변수 : S*/
        var multiLanguageYN = $("#multiLanguageYn").val(),
        hreflang = $("#hreflang").val();
        /* 20190219 US GPv2 api 호출 시  헤더 추가 관련 변수 : E*/
        if (loginJwt != null) {
            $.ajax({
                headers: {
                    "Cache-Control": "no-cache",
                    "Content-Type": "application/json",
                    "Access-Control-Allow-Origin": "*",
                    "x-ecom-app-id": "identity-store-global",
                    "x-ecom-jwt": loginJwt
                },
                url: storeDomain + "/v4/identity/wishlist",
                type: "GET",
                data: param,
                dataType: "json",
                timeout: 20000,
                xhrFields: {
                    withCredentials: true
                },
                beforeSend: function (xhr) {
                    if (multiLanguageYN === "Y") {
                        xhr.setRequestHeader("x-ecom-locale", hreflang);
                    }
                },
                success: function (data) {
                    if (data != null) {
                        addedWishList = data;
                    }
                },
                error: function (e) {
                    addedWishList = [];
                },
                complete : function () {
                    if (callbackFn && typeof (callbackFn) === "function") {
                        callbackFn();
                    }
                }
            });
        } else if (callbackFn && typeof (callbackFn) === "function") {
            callbackFn();
        }
    }
        
};


/**
 * null 체크
 * @param item : 체크대상
 **/
function fnIsNull(item) {
    return (item === '' || item === undefined || item === null);
}

/**
 * p5 window.smg.aem.util.def
 */
function def(org, src) {
    for (var prop in src) {
        if (!Object.prototype.hasOwnProperty.call(src, prop)) continue;
        if ('object' === $.type(org[prop])) {
            org[prop] = (this.isArray(org[prop]) ? src[prop].slice(0) : this.def(org[prop], src[prop]));
        } else {
            org[prop] = src[prop];
        }
    }
    return org;
}

/**
 * p5 window.smg.aem.util.cookies
 */
var cookies = (function () {
    var defParams = {
        expires: '',
        path: '/',
        domain: '',
        secure: ''
    };
    return {
        setCookie: function (cname, cvalue, exdays) {
            var d = new Date();
            d.setTime(d.getTime() + ((exdays || 0) * 24 * 60 * 60 * 1000));

            var opt = def(defParams, {
                expires: d
            });
            document.cookie = [
                cname, '=', cvalue,
                opt.expires ? '; expires=' + opt.expires.toUTCString() : '',
                opt.path ? '; path=' + opt.path : '',
                opt.domain ? '; domain=' + opt.domain : '',
                opt.secure ? '; secure' : ''
            ].join('');
        },
        getCookie: function (cname) {
            var name = cname + '=',
                ca = document.cookie.split(';'),
                c;

            for (var i = 0, leng = ca.length; i < leng; i++) {
                c = ca[i];
                while (c.charAt(0) === ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) !== -1) {
                    return c.substring(name.length, c.length);
                }
            }
            return '';
        },
        setCookieMailForm : function ( form ) {
            for( var name in form ){
                var isPossible = this.checkMailName( name );
                if( isPossible && form[name] != null){
                    var valueChane = form[name].replace(';','||@||')
                    this.setCookie('mail_form_'+name, valueChane, 1);
                }
                
            }
            
        },
        checkMailName : function( name ){
            return name && ( name === 'CompanyName' || name === 'ContactFirstName'  || name === 'ContactName' || 
                             name === 'EmailAddress' || name === 'CompanyAddress' || name === 'CompanyInterest' || name === 'JobTitle' ||
                             name === 'Employee' || name === 'City' || name === 'Zipcode' || name === 'Telephone')
        },
        getCookieMailForm : function () {
            var cookies = document.cookie.split(';');
            var result = {};
            for( var item of cookies ){
                if( item.indexOf('mail_form_') > 0){
                    var data = item.replace('mail_form_','').trim().split("=");
                    var name = data[0];
                    var value = data[1].replace('||@||',';');
                    result[name] = value;
                }
            }
            return result;
        }
    };
})();


/**
 * PF 공통 Function
 */
if(window.sg === undefined){
    window.sg = {};
}
if(window.sg.components === undefined){
    window.sg.components = {};
}

window.sg.components.pfdevfn = {
        afterAddWishlist : function(wishBtnEl, elClass, tooltipText, shopFl, modelCode, arialabelText){
            if(!fnIsNull(wishBtnEl)){
                if(!wishBtnEl.hasClass(elClass)){
                    wishBtnEl.addClass(elClass);
                } else if ( shopFl === "GPv2"){
                    wishBtnEl.removeClass(elClass);
                }
                
                let arialabel = tooltipText;
                if(arialabelText && arialabelText != ''){
                    arialabel = arialabelText;
                }

                if(shopFl==="hybrisIntg"){
    //					wishBtnEl.attr("disabled", "disabled");
                    wishBtnEl.prop("disabled", true);
                    wishBtnEl.attr("data-add-text",tooltipText);
                    wishBtnEl.removeAttr("aria-label");
                    wishBtnEl.addClass("cta--disabled");
                } else if(shopFl==="GPv2"){
                    if(wishBtnEl.hasClass('js-delete-wishlist-btn')){
                        wishBtnEl.removeClass("js-delete-wishlist-btn");

                        wishBtnEl.removeAttr("data-added-text");
                        wishBtnEl.attr("data-add-text",tooltipText);

                        wishBtnEl.attr("an-la","add to wishlist");
                        
                        wishBtnEl.find('span').text(tooltipText);
                        
                        wishBtnEl.blur();
                        
                    } else {
                        wishBtnEl.addClass("js-delete-wishlist-btn");

                        wishBtnEl.removeAttr("data-add-text");
                        wishBtnEl.attr("data-added-text",tooltipText);

                        wishBtnEl.attr("an-la","remove from wishlist");
                        
                        wishBtnEl.find('span').text(tooltipText);

                        //처음 페이지 로딩시만 addedWishList 를 생성하므로 그 후 wishlist 에 추가된 제품은 임시로 addedWishList 에 추가함.
                        var wishlistItemObj = {};
                        wishlistItemObj.sku = modelCode;
                        wishlistItemObj.deleted = false;
                        
                        addedWishList.push(wishlistItemObj);
                    }
        
                    window.sg.components.wishlistIcon.reInit();
                }
                wishBtnEl.removeAttr("aria-label").attr("aria-label", arialabel);
            }
        },
		
		/**
		 * addedWishList 중 tempProductCode 에 해당하는 제품 정보 제거 function
		 */
		spliceAddedWishList : function(tempProductCode){
			if(addedWishList.length > 0){
				for(var idx = 0; idx < addedWishList.length; idx++){
					var addedWishlistInfo = addedWishList[idx];
					if(addedWishlistInfo.sku === tempProductCode){
						addedWishList.splice(idx,1);
						break;
					}
				}
			}
		}
	};

/**
 * p6 모델코드 seletor로 들어갈 시 치환로직
 */
function modelCodeToSelector( modelCode ) {
	var result = '';
	if( modelCode ){
		result = modelCode.replace(/\//g,"@$");
	}
	return result;
}
/**
 * NewHybris Cart 공통 로직 
 * new-hybris
 */
function addToCartNewHybris( modelCode, goCartUrl='', callbackFn, services, returnParam = {}, isB2B = false, $btnEl ){
   // getNewCartId ( ( isSuccess, returnParam )=>{
  //      if( isSuccess ){
            const storeDomain = $("#storeDomain") ? $("#storeDomain").val()+'/tokocommercewebservices/v2' : '';
            const storeWebDomain = $("#storeWebDomain").val();
            const storeSiteCode = $("#store_sitecode").val();
            const siteCode = $("#siteCode") ? $("#siteCode").val() : '';
            const pageType = $("#tempTitle").val();
            const cartSiteCode = isB2B ? storeSiteCode : siteCode;
            const wbcRef = $("#tempTitle").val() === 'page-wearable-bc' ? '&ref=wbc' : ''; 
            
            // epp shop분기 추가
            const siteCodeWithEpp = checkEppSite() ? (window.sg.epp != null && window.sg.epp.common != null ? window.sg.epp.common.companyCode : "") : cartSiteCode;
            
            let cartUrl = `${storeDomain}/${siteCodeWithEpp}/addToCart/multi/?fields=BASIC`+wbcRef;
            let param =[];
            let isNewCart = false;
            let result = '';
            let isSuccess = false;
            if( services ){
            	// addon 공용 컴포넌트
            	if( services.isAddonComponent ){
            		param = services.filter(function(elem){
        				return elem;
            		});
            	}
            	
                //bezel세팅
            	if( services.bezelCode && !services.isContinue ){
                    param.push({
                        "productCode": services.bezelCode,
                        "qty": 1,
                    });
                }
            	
            	// embed addon세팅
        		if( services.embedaddon && services.embedaddon.length > 0 ){
        			for( const itemCode of services.embedaddon ){
        				param.push({
        					'productCode' : itemCode,
        					'qty' : 1,
        				});
        			}
        		}
                
                //addon세팅
                if( services.addon && services.addon.modelCodeList && services.addon.modelCodeList.length > 0 ){
                    for( const itemCode of services.addon.modelCodeList ){
                        param.push({
                            "productCode": itemCode,
                            "qty": 1,
                        });
                    }
                }

                //gift세팅
                if( services.gift && services.gift.modelCode ){
                	for(let i = 0; i < services.gift.modelCode.length; i++){
                		 param.push({
                             "productCode": services.gift.modelCode[i],
                             "qty": 1,
                         })
                	}
                   
                }

                //combo세팅
                if( services.combo && services.combo.modelCodeList && services.combo.modelCodeList.length > 0 ){
                    for( const itemCode of services.combo.modelCodeList ){
                        param.push({
                            "productCode": itemCode,
                            "qty": 1,
                        });
                        if(itemCode.indexOf("SIM") > -1)
                        	isNewCart = true;
                    }
                }

                //공통에서 사용할 multi제품 세팅
                if( services.multi && services.multi.modelCodeList && services.multi.modelCodeList.length > 0 ){
                    for( const itemCode of services.multi.modelCodeList ){
                        param.push({
                            "productCode": itemCode,
                            "qty": 1,
                        });
                    }
                }
            }

            if( modelCode ){
                const originParam = {
                    "productCode": modelCode,
                    "qty": 1,
                }

                if( services ){

                    //band 세팅
                    if( services.band && services.band.bandCode ){
                        originParam.childProducts = [];
                        originParam.childProducts.push( {'product' : {'code':services.band.bandCode}, 'quantity' : 1 } );
                    }

                    originParam.services = [];
                    
                    // tiered 제품 수량 선택 
                     if( services.orignalQuantity ){
                        originParam.qty = services.orignalQuantity.quantity;
                     }
                     
                    //tradeIn세팅
                    if( services.tradeIn && services.tradeIn.plan_id ){
                        if( services.tradeIn && services.tradeIn.plan_id ){
                        	originParam.services.push( {'exchangeId' : services.tradeIn.plan_id} );
                        }
                    }
                    
                    //care세팅
                    if( services.care && services.care.modelCode ){
                        if( services.care && services.care.modelCode ){
                        	originParam.services.push( {'serviceCode' : services.care.modelCode} );
                        }
                    }
                    
                    //upgrade세팅
                    if( services.upgrade && services.upgrade.modelCode ){
                        originParam.services.push( {'serviceCode' : services.upgrade.modelCode } );
                        isNewCart = true;
                    }
                    
                    //tariff세팅
                    if( services.tariff && services.tariff.modelCode && services.tariff.simSkuCode ){
                        originParam.services.push( {'planId' : services.tariff.modelCode, 'serviceCode' : services.tariff.simSkuCode } );
                        isNewCart = true;
                    }
                }

                param.push(originParam);
            }
            if(!isB2B && (pageType == 'page-pf' || pageType == 'page-standard-pd' || pageType == 'page-buying-pd' || wbcRef) && commonNetFunnelUseYn == "Y"){
            	var buyPageId = '';
                var addPageId = '';
                var cartActionId = '';
				buyPageId = COMMON_NETFUNNEL_ACTIONID.AEM_BUY != undefined && COMMON_NETFUNNEL_ACTIONID.AEM_BUY != "" ? COMMON_NETFUNNEL_ACTIONID.AEM_BUY : "AddtoCart_aem1";
    			addPageId = COMMON_NETFUNNEL_ACTIONID.AEM_ADD != undefined && COMMON_NETFUNNEL_ACTIONID.AEM_ADD != "" ? COMMON_NETFUNNEL_ACTIONID.AEM_ADD : "AddtoCart_aem";
    			cartActionId = buyPageId;
    			if($(".pdd16-step-buying").is(':visible')){
    				if($(".hubble-addon-page").hasClass("pdd16-step-buying--free-gift"))
    					cartActionId = addPageId;
    				else
    					cartActionId = addPageId;
    			}
    			NetFunnel_Action({action_id: cartActionId},function(ev, ret){
		            $.ajax({
		                url: cartUrl,
		                type: "POST",
		                dataType: "json",
		                cache: true,
		                crossDomain: true,
		                contentType: 'application/json',
		                timeout: 30000,
		                xhrFields : {
		                    withCredentials: true
		                },
		                data: JSON.stringify(param),
		                success: function (data) {
		                    result = data;
		                    isSuccess = true;
		                },
		                error : function(error){
		                    var errorText = "";
		                    if ( error.responseJSON && error.responseJSON.message ) {
		                        errorText = error.responseJSON.message;
		                    }
		                    confirmPopup(errorText, null, null, $btnEl);
		                },
		                complete : function (){
		                	if( isSuccess ){
		                        if( goCartUrl ){
		                            location.href = goCartUrl; 
		                        } else if( callbackFn && typeof callbackFn ==='function' ){
		                            callbackFn(result, isSuccess, returnParam );
		                        }
		                        
			                    // CRHQ-4280 수정이 필요한 경우 ( Cart 페이지로 바로 넘기는 경우, 토큰 반납 불 필요 )
			                    if(!goCartUrl) {
			                    	NetFunnel_Complete();
			                    }
			                    
		                    }
		                }
		            });
    			});
            }else{
                if( param.length === 0 ){
                    if( goCartUrl ){
                        location.href = goCartUrl; 
                    } else if( callbackFn && typeof callbackFn ==='function' ){
                        callbackFn(result, isSuccess, returnParam );
                    }
                } else {
                    if( isB2B && siteCode !== "uk" ){
                        let quantity = 1;
                        let productIndex = 0;
                        let paramNg = [];
                        //POST용 !!!
                		var postParam = {
                				'products' : []
                		};
                		
                		let postApiURL =`${storeWebDomain}/servicesv2/addToCart`;
                		
                        if( services ){
                             // tiered 제품 수량 선택 
                             if( services.orignalQuantity ){
                                quantity = services.orignalQuantity.quantity;
                             }
                             
                             //addOn제품
                             if( services.addon && services.addon.modelCodeList && services.addon.modelCodeList.length > 0 ){
                                for( const itemCode of services.addon.modelCodeList ){
                                    paramNg.push(`products[${productIndex}].productCode=${itemCode}&products[${productIndex}].quantity=1`);
                                    productIndex++;
                                    
                                    //post style
                    				postParam['products'].push({
                    					'productCode' : itemCode,
                    					'quantity' : 1,
                    				})
                    				
                    				 
                                }
                            }
                        }
                        
                        if( modelCode ){
                            paramNg.push(`products[${productIndex}].productCode=${modelCode}&products[${productIndex}].quantity=${quantity}`);
                            productIndex++;
                            
                 			//  Post 방식으로 cart 변경
                  			postParam['products'].push({
                  				'productCode' : modelCode,
                  				'quantity' : quantity
                  			});
 
                        }
                        
                        $.ajax({
                            url: postApiURL,
                            type: 'POST',
                            cache: false,
                            crossDomain: true,
                            xhrFields: { withCredentials: true },
                            contentType: 'application/json',
                            dataType: 'json',
                            data : JSON.stringify (postParam),
                            timeout: 20000,
                            success : function ( data) {
                            	if(data.resultCode === "0000") {
                                    result = data;
                                    isSuccess = true;
                            	}
                            },
                            error : function(error){
                                var errorText = "";
                                if ( error.responseJSON && error.responseJSON.message ) {
                                    errorText = error.responseJSON.message;
                                }
                                confirmPopup(errorText, null, null, $btnEl);
                            },
                            complete : function (){
                                if( isSuccess ){
                                    if( goCartUrl ){
                                        location.href = goCartUrl; 
                                    } else if( callbackFn && typeof callbackFn ==='function' ){
                                        callbackFn(result, isSuccess, returnParam );
                                    }
                                }
                            } 
                        });
                    } else {
                        $.ajax({
                            url: cartUrl,
                            type: "POST",
                            dataType: "json",
                            cache: true,
                            crossDomain: true,
                            contentType: 'application/json',
                            timeout: 30000,
                            xhrFields : {
                                withCredentials: true
                            },
                            data: JSON.stringify(param),
                            success: function (data) {
                                result = data;
                                isSuccess = true;
                            },
                            error : function(error){
                                var errorText = "";
                                if ( error.responseJSON && error.responseJSON.message ) {
                                    errorText = error.responseJSON.message;
                                }
                                const errorType = error?.responseJSON?.errors[0]?.type;
                                if(errorType == 'TokoUpgradeProductsError') errorText = 'Please remove Samsung Flex or Samsung Upgrade to order multiple items, or place a separate order.';
                                confirmPopup(errorText, null, null, $btnEl);
                            },
                            complete : function (){
                                if( isSuccess ){
                                    if( goCartUrl ){
                                        location.href = goCartUrl; 
                                    } else if( callbackFn && typeof callbackFn ==='function' ){
                                        callbackFn(result, isSuccess, returnParam );
                                    }
                                }
                            }
                            
                        });
                    }
                }
            }
       // }

   //},returnParam);
}


/**
 * 쿠기 생성 공통함수  
 */
function setCookieData ( name, value, exfireHour, cookiePath ) {
    const day = new Date();
    let path = '';
    day.setTime(day.getTime() + ((exfireHour || 0) * 60 * 60 * 1000));
    if( cookiePath ){
        path = `; path=${cookiePath}`;
    }
    document.cookie = `${name}=${value}; domain=samsung.com; expires=${day.toUTCString()}` + path;
}

/**
 * cartID 신규 세팅 로직
 * new-hybris
 */
function getNewCartId ( callbackFn, returnParam = {} ){
	
    const loginFlag = commonLoginCheck();
    const storeDomain = $("#storeDomain") ? $("#storeDomain").val()+'/tokocommercewebservices/v2' : '';
	const siteCode = $("#siteCode") ? $("#siteCode").val() : '';
	const store_sitecode = $("#store_sitecode").val();
	const b2bFlag = $("#b2bFlag").val();
	
    let guid = $.cookies.get('hybriscartID-guid');
    let code = $.cookies.get('hybriscartID-code');

    let setAPI = false;
    let user = '';
    let isSuccess = false;

    if( loginFlag && !code ){
        setAPI = true;
        user = 'current';
    } else if ( !loginFlag && !guid ){
        setAPI = true;
        user = 'anonymous';
    } else {
    	isSuccess = true;
        if( callbackFn && typeof callbackFn ==='function' ){
            callbackFn( isSuccess, returnParam );
        }
    }

    if( setAPI ){
        let apiURL = `${storeDomain}/${siteCode}/users/${user}/carts?fields=BASIC`;
        if('Y'=== b2bFlag){
        	apiURL = `${storeDomain}/${store_sitecode}/users/${user}/carts?fields=BASIC`;
        }
        const ajaxObj = {
            url: apiURL,
            type: "POST",
            dataType: "json",
            cache: true,
            crossDomain: true,
            timeout: 5000,
            xhrFields : {
                withCredentials: true
            },
            success: function (data) {
                if( data && ( data.code || data.guid )  ){
                    const path = location.href.indexOf('/content/samsung') > -1 ? `/content/samsung/${siteCode}` : `${siteCode}`;
                    if(user === 'current'){
                        isSuccess = true;
                        const code = data.code;
                        setCookieData('hybriscartID-code',code,1, path);
                    } else {
                        isSuccess = true;
                        const guid = data.guid;
                        setCookieData('hybriscartID-guid',guid,1, path);
                    }
                }
            },
             error : function(error){
                var errorText = "";
                if ( error.responseJSON && error.responseJSON.message ) {
                    errorText = error.responseJSON.message;
                }
                confirmPopup(errorText);
            },
            complete : function (){
                if( callbackFn && typeof callbackFn ==='function' ){
                    callbackFn( isSuccess, returnParam );
                }
            }
        }
        
        $.ajax(ajaxObj);
    }
    
}

/**
 * [B2B] PF / PD SMB Register 버튼 클릭 시 호출
 *  
 *  - 로그인이 되어있지않을 때 로그인 페이지 이동
 *  - 로그인이 되어있을 때 register 페이지 이동
 */
function goToSMBRegister(smbRegisterUrl, isLoginFl){
    
    const smbCookiePath = '/' + SITE_CD + '/';
    $.cookies.del("isSMBRegisteredUserYN", {path:smbCookiePath, domain:'.samsung.com'});

    if(isLoginFl){
        document.location.href = smbRegisterUrl;
    } else {
        $.cookies.set("goSMBRegisterYN", "Y", {domain : ".samsung.com"});
        $.cookies.set("smbRegisterUrl", smbRegisterUrl, {domain : ".samsung.com"});
        ss.Auth.callSaSignInGate();
    }
}

/**
 * [EPP]
 * EPP 페이지 여부 체크
 * page path 에서 multistore 유무를 확인하여 Epp 페이지인지 판단한다.
 */
function checkEppSite() {
    let tmpStr = "";
    let p = document.location.pathname;
    p = p.replace(".html","/");

    let arr = p.split("/");
    if (arr.length >= 5 && "content" == arr[1] && "samsung" == arr[2]) {
        tmpStr = arr[4];
    } else if (arr.length >= 3) {
        tmpStr = arr[2];
    }
    return (tmpStr=="multistore");
}
(function ($) {
    "use strict";

    if (typeof $.cookies === "undefined") {
        $.cookies = {};
    }

    var CONTENT = "/content/samsung";
    var siteCode = $("#siteCode").val();
    var cookiePath = '/' + siteCode + '/';
    if (cookiePath === "/global_nw/") {
        cookiePath = "/global/business/networks/";
    } else if (cookiePath === "/global_cps/") {
        cookiePath = "/global/business/compressor/";
    }

    /**
     * 쿠키 데이터
     */
    $.cookies.data = $.cookies.data || {};
    $.cookies.data.SEARCH_NAME = "sk";
    $.cookies.data.ACCESSORY_SEARCH_NAME = "ask";

    /**
     * 쿠키의 Default Option return
     */
    $.cookies.getDefaultOption = function (expires, path) {
        // expires 값이 없을 경우 default 1일
        if (!expires || !(expires instanceof Date)) {
            expires = new Date();
            expires.setTime(expires.getTime() + 1000 * 60 * 60 * 24);
        }
        // path 값이 없을 경우 '/'
        if (!path) {
            path = '/';
        } else if (window.location.pathname.indexOf(CONTENT) > -1) {
            path = CONTENT + path;
        }

        // SITE CODE 별로 저장
        return {
            expiresAt: expires,
            path: path,
            domain: ".samsung.com",
            secure: false
        };
    };

    /**
     * 검색 키워드 저장
     * @param keyword, expires
     */
    $.cookies.setSearchKeyword = function (keyword, expires) {
        var cookieNm = this.data.SEARCH_NAME;
        var searchMaxSize = 4;
        var cookieVal = this.get(cookieNm);

        if (!cookieVal) {
            cookieVal = [keyword];
        } else {
            // 중복 체크
            if ($.inArray(keyword, cookieVal) >= 0) {
                return;
            }
            if (cookieVal.length >= searchMaxSize) {
                cookieVal.splice(0, 1);
            }
            cookieVal.push(keyword);
        }
        this.set(cookieNm, cookieVal, this.getDefaultOption(expires, cookiePath));
    };

    /**
     * 검색 키워드 조회
     * @returns Array
     */
    $.cookies.getSearchKeyword = function () {
        var cookieVal = this.get(this.data.SEARCH_NAME);
        return (cookieVal && $.isArray(cookieVal) ? cookieVal : []);
    };

    $.cookies.clearSearchKeyword = function (expires) {
        this.del(this.data.SEARCH_NAME, this.getDefaultOption(expires, cookiePath));
    }
    /**
     * Accessories 검색 키워드 저장
     * @param keyword, expires
     */
    $.cookies.setAccessorySearchKeyword = function (keyword, expires) {
        var cookieNm = this.data.ACCESSORY_SEARCH_NAME;
        var searchMaxSize = 4;
        var cookieVal = this.get(cookieNm);

        if (!cookieVal) {
            cookieVal = [keyword];
        } else {
            // 중복 체크
            if ($.inArray(keyword, cookieVal) >= 0) {
                return;
            }
            if (cookieVal.length >= searchMaxSize) {
                cookieVal.splice(0, 1);
            }
            cookieVal.push(keyword);
        }
        this.set(cookieNm, cookieVal, this.getDefaultOption(expires, cookiePath));
    };
    /**
     * 검색 키워드 조회
     * @returns Array
     */
    $.cookies.getAccessorySearchKeyword = function () {
        var cookieVal = this.get(this.data.ACCESSORY_SEARCH_NAME);
        return (cookieVal && $.isArray(cookieVal) ? cookieVal : []);
    };

    $.cookies.clearAccessorySearchKeyword = function (expires) {
        this.del(this.data.ACCESSORY_SEARCH_NAME, this.getDefaultOption(expires, cookiePath));
    }
    
	$(function () {
		//My Page 쿠키 설정
		if('live'=== $("#runmodeInfo").val() && 'Y' === $("#b2bFlag").val()){
			var filterType = '';
			if('business solution detail' === digitalData.page.pageInfo.pageTrack
					|| 'business solutions detail' === digitalData.page.pageInfo.pageTrack){
				filterType = 'solution';
			}else if('business insight detail' === digitalData.page.pageInfo.pageTrack
					||'business insights detail' === digitalData.page.pageInfo.pageTrack){
				filterType = 'insight';
			}
			if('' !== filterType){
				if(window.sg.components.util !== undefined){
					this.cookieUtil = new window.sg.components.util.CookieUtil();
					this.cookieUtil.addHistory(filterType, $("#pathString").val(), $("#pageUrl").val());
				}			
			}
		}
	});    
})(window.jQuery);
var COMMON_NETFUNNEL_ACTIONID;
(function ($, doc) {
	COMMON_NETFUNNEL_ACTIONID = (function () {
		var sap=function () {
			var sapdata="";
			
			//quere-fra : SMN / SMN2 / SMN3 / SMI / SMR
			//queue-syd : SMA
			//queue-sin : SMS
			//queue-yvr : SMC
			/*
			if(siteCode == "at" || siteCode == "es" || siteCode == "dk" || siteCode == "fi" || siteCode == "it" || siteCode == "no" 
				|| siteCode == "pt" || siteCode == "se" || siteCode == "ch" || siteCode == "ch_fr"){
				sapdata ="SME";
			}else if(siteCode == "ae" || siteCode == "ae_ar" || siteCode == "bh" || siteCode == "bh_ar" || siteCode == "kw" || siteCode == "kw_ar" || siteCode == "om" || siteCode == "om_ar" || siteCode == "sa" || siteCode == "sa_en" || siteCode == "za" || siteCode == "eg" || siteCode == "il" || siteCode == "n_africa" || siteCode == "levant" || siteCode == "levant_ar" || siteCode == "pk"){
				sapdata ="SMM";
			}else if(siteCode == "ru"){
				sapdata ="SMR";
			}else if(siteCode == "au"){
				sapdata ="SAM1";
			}else if(siteCode == "nz" || siteCode == "vn" || siteCode == "th" || siteCode == "my" || siteCode == "sg" || siteCode == "tw" || siteCode == "hk" || siteCode == "hk_en"){
				sapdata ="SAM2";
			}else if(siteCode == "ca" || siteCode == "ca_fr"){
				sapdata ="SMC";
			}
			*/
			
			//commonNetFunnelJsStringArea가 없는 곳에서 호출되는 경우 commonNetFunnelJsStringArea is not defined 방지
			if(typeof commonNetFunnelJsStringArea != "undefined") {
				sapdata = commonNetFunnelJsStringArea; //meta에 정의된 값을 가져옴
			}
			
			return sapdata;
		};
		return  {
			AEM_BUY : "Buy_"+sap(),
			AEM_ADD : "BuyAdd_"+sap()
		}
	})();
})(window.jQuery, window.document);
;
(function($, doc) {

	"use strict";

	window.sg = window.sg || {};
	window.sg.sdf = window.sg.sdf || {};

	const DEBUG = parseInt("1") === 0; // turn off

	const SDF_CLS_METADATA = "sdf-component-metadata";
	const SDF_CLS_TEMPLATE_HOLDER = "sdf-component-templates";
	const SDF_CLS_TEMPLATE = "sdf-component-template";

	const SDF_ATTRPREFIX = "data-sdf-";
	const SDF_ATTR_PROPERTY = "data-sdf-prop";
	const SDF_ATTR_BIND = "data-sdf-bind";
	const SDF_ATTR_TEMPLATE = "data-sdf-template";
	const SDF_ATTR_CALL = "data-sdf-call";
	const SDF_ATTR_TEST = "data-sdf-test";
	const SDF_ATTR_UNWRAP = "data-sdf-unwrap";
	const SDF_ATTR_ELEMENT = "data-sdf-element";
	const SDF_ATTR_LIST = "data-sdf-list";
	const SDF_ATTR_REPEAT = "data-sdf-repeat";
	const SDF_ATTR_ATTRIBUTE = "data-sdf-attr";
	const SDF_ATTR_ATTRIBUTE_LEN = SDF_ATTR_ATTRIBUTE.length;

	const EXP_BEGIN = "{{";
	const EXP_BEGIN_LEN = EXP_BEGIN.length;
	const EXP_END = "}}";
	const EXP_END_LEN = EXP_END.length;

	const DEFAULT_LOOP_VAR = "item";
	const LOOPVAR_INDEX = "loopIndex";
	const LOOPVAR_COUNT = "loopCount";

	const COMPEVT_ON_CREATED = "onCreated";
	const COMPEVT_ON_DISPOSE = "onDispose";
	const COMPEVT_ON_BEFORE_INIT = "onBeforeInit";
	const COMPEVT_ON_AFTER_INIT = "onAfterInit";

	const COMPOBS_ON_TEMPLATE_RENDERED = "onTemplateRendered";

	// supported namespaces
	//
	const NAMESPACES = {
		"html" : "http://www.w3.org/1999/xhtml",
		"xlink" : "http://www.w3.org/1999/xlink",
		"svg" : "http://www.w3.org/2000/svg",
		"xbl" : "http://www.mozilla.org/xbl",
		"xul" : "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	};

	//
	// PRIVATE FUNCTIONS: COMPILE SECTION
	//

	function _compile(cmp, el) {
		if (el.children) {
			for (let x = 0; x < el.children.length;) {
				let child = el.children[x], clsList = child.classList;

				// fetch metadata
				//
				if (clsList && clsList.contains(SDF_CLS_METADATA)) {
					_parseComponentMetadata(cmp, child);
					continue;
				}

				// fetch template holder
				//
				if (clsList && clsList.contains(SDF_CLS_TEMPLATE_HOLDER)) {
					let tmpls = child.children;
					let i = 0;
					while (i < tmpls.length) {
						let t = tmpls[i];
						if (t.hasAttribute(SDF_ATTR_TEMPLATE)) {
							_parseComponentTemplate(cmp, t);
							continue;
						}
						i++;
					}
					el.removeChild(child);
					continue;
				}

				// fetch template
				//
				if (child.hasAttribute(SDF_ATTR_TEMPLATE)) {
					_parseComponentTemplate(cmp, child);
					continue;
				}

				// fetch test directive
				//
				if (child.hasAttribute(SDF_ATTR_TEST)) {
					let sCtx = child.sdfContext = {};
					_parseTestDirective(sCtx, child.getAttribute(SDF_ATTR_TEST));
					child.removeAttribute(SDF_ATTR_TEST);
				}

				// fetch call directive
				//
				if (child.hasAttribute(SDF_ATTR_CALL)) {
					let sCtx = child.sdfContext = {};
					_parseCallDirective(sCtx, child.getAttribute(SDF_ATTR_CALL));
					child.removeAttribute(SDF_ATTR_CALL);
					continue;
				}

				_compile(cmp, child);
				x++;
			}
		}
	}

	function _parseComponentMetadata(cmp, el) {
		let $el = $(el);
		$el.find("[" + SDF_ATTR_PROPERTY + "]").each(function(i) {
			let key = $.trim(this.getAttribute(SDF_ATTR_PROPERTY));
			if (key && key.length > 0) {
				cmp.metadata.set(key, $.trim(this.textContent));
			}
		});
		$el.remove();
	}

	function _parseComponentTemplate(cmp, tmpl) {
		let $tmpl = $(tmpl), parent = tmpl.parentElement;
		$tmpl.removeClass(SDF_CLS_TEMPLATE);

		let tAttr = $.trim(tmpl.getAttribute(SDF_ATTR_TEMPLATE));
		if (tAttr.length === 0) {
			log.error("[SDF] Illegal template attribute: template name required: " + _dumpElement(tmpl));
			return;
		}
		let idx = tAttr.indexOf('@');
		let tname = idx < 0 ? tAttr : $.trim(tAttr.substring(0, idx));
		if (tname.length === 0) {
			log.error("[SDF] Illegal template attribute: template name is empty: " + _dumpElement(tmpl));
			return;
		}
		if (DEBUG) {
			console.log("[SDF] Template detected: " + tname);
		}

		let vrec = _parseTemplateVariables($.trim(tAttr.substring(idx + 1)));
		tmpl.removeAttribute(SDF_ATTR_TEMPLATE);

		if (vrec.invokeImmd) {
			// copy & detach current template element
			// replace current template element to invoker
			tmpl = _immdTemplate(cmp, tmpl, tname, vrec.variables);
		} else {
			if (parent) {
				parent.removeChild(tmpl);
			}
		}

		let tCtx = {
			name : tname,
			element : tmpl,
			$element : $tmpl,
			variables : vrec.variables,
			target : _templateTarget($tmpl)
		};
		cmp.templates.set(tname, tCtx);

		tmpl.sdfContext = tmpl.sdfContext || {};
		tmpl.sdfContext.template = tCtx;

		_scanTemplateContent(cmp, tCtx, tmpl);
	}

	function _immdTemplate(cmd, tmpl, tname, vars) {
		let copied = doc.createElement(tmpl.localName);
		if (tmpl.hasAttributes()) {
			_moveAttributes(tmpl, copied);
		}
		if (tmpl.hasChildNodes()) {
			_moveChildren(tmpl, copied);
		}
		let isDynamicTmpl = _isDynamicBindable(tname);
		tmpl.sdfContext = {
			invokeTemplate : {
				template : tname,
				isDynamic : isDynamicTmpl,
				nameToken : isDynamicTmpl ? _parseBindableText(tname) : null,
				binds : vars
			}
		};
		return copied;
	}

	function _scanTemplateContent(cmp, tCtx, node) {
		if (node.nodeType === doc.ELEMENT_NODE) {
			return _parseElementNode(cmp, tCtx, node);
		}
		if (node.nodeType === doc.TEXT_NODE) {
			if (node.nodeValue.indexOf(EXP_BEGIN) >= 0) {
				let tokens = _parseBindableText(node.nodeValue);
				node.sdfContext = {
					bindTokens : tokens
				};
			}
		}
		// ignore COMMENT_NODE & other node types
		return false;
	}

	function _parseElementNode(cmp, tCtx, node) {
		node.sdfContext = node.sdfContext || {};
		if (node.hasAttributes()) {
			if (node.hasAttribute(SDF_ATTR_TEMPLATE)) {
				_parseComponentTemplate(cmp, node);
				return true;
			}
			_parseElementAttributes(cmp, node);
		}
		if (node.hasChildNodes()) {
			let nodes = node.childNodes;
			for (let i = 0; i < nodes.length;) {
				let detached = _scanTemplateContent(cmp, tCtx, nodes[i]);
				if (!detached) {
					i++;
				}
			}
		}
		return false;
	}

	function _parseElementAttributes(cmp, node) {
		let attrs = node.attributes;
		let dynFlag = false;

		let sCtx = node.sdfContext;

		for (let i = 0; i < attrs.length; i++) {
			let attr = attrs[i], aname = attr.name, val = attr.nodeValue;

			// data-sdf-test
			//
			if (aname === SDF_ATTR_TEST) {
				_parseTestDirective(sCtx, val);
			}

			// data-sdf-call
			//
			else if (aname === SDF_ATTR_CALL) {
				_parseCallDirective(sCtx, val);
			}

			// data-sdf-unwrap
			//
			else if (aname === SDF_ATTR_UNWRAP) {
				_parseUnwrapDirective(sCtx, val);
			}

			// data-sdf-element
			//
			else if (aname === SDF_ATTR_ELEMENT) {
				_parseElementDirective(sCtx, val);
			}

			// data-sdf-attr.<attribute-name>
			//
			else if (aname.indexOf(SDF_ATTR_ATTRIBUTE) === 0) {
				_parseAttributeDirective(sCtx, aname, val);
			}

			// data-sdf-list[.<loop-variable>]
			//
			else if (aname.indexOf(SDF_ATTR_LIST) === 0) {
				_parseLoopDirective(SDF_ATTR_LIST, sCtx, aname, val);
			}

			// data-sdf-repeat[.<loop-variable>]
			//
			else if (aname.indexOf(SDF_ATTR_REPEAT) === 0) {
				_parseLoopDirective(SDF_ATTR_REPEAT, sCtx, aname, val);
			}

			// others
			//
			else {
				let isDyn = _isDynamicBindable(val);
				_sdfDynamicAttribute(sCtx, isDyn, true, aname, isDyn ? _parseBindableText(val) : val);
			}
		}
		node.sdfContext = sCtx;
	}

	function _parseTestDirective(sCtx, val) {
		let bindable = _isDynamicBindable(val);
		let expr = bindable ? _parseExpression($.trim(val)) : val.toLowerCase();
		if (expr && expr.length > 0) {
			sCtx.test = bindable ? expr : (expr === 'true');
		} else {
			console.warn("[SDF] Empty test attribute: " + aname + "=\"" + val + "\"");
		}
	}

	function _parseCallDirective(sCtx, val) {
		let tokens = $.trim(val).split(/\s*@\s*/);
		if (tokens[0].length === 0) {
			console.warn("[SDF] Illegal template call: " + val + "\"");
			return;
		}
		let tname = tokens[0], isDynamic = _isDynamicBindable(tname);
		sCtx.invokeTemplate = {
			template : tname,
			isDynamic : isDynamic,
			nameTokens : isDynamic ? _parseBindableText(tname) : null
		};

		if (tokens.length > 1 && tokens[1].length > 0) {
			let binds = [];
			let asgns = tokens[1].split(/\s*,\s*/);
			for (let x = 0; x < asgns.length; x++) {
				if (asgns[x].length > 0) {
					let arr = asgns[x].split(/\s*=\s*/);
					if (arr.length > 2 || arr[0].length === 0) {
						console.warn("[SDF] Illegal variable binds: " + asgns[x]);
						continue;
					}
					binds.push({
						variable : arr[0],
						reference : arr.length === 2 ? _parseExpression(arr[1]) : null
					});
				}
			}
			if (binds.length > 0) {
				sCtx.invokeTemplate.binds = binds;
			}
		}
	}

	function _parseUnwrapDirective(sCtx, val) {
		if (_isDynamicBindable(val)) {
			sCtx.unwrap = {
				isDynamic : true,
				value : _parseExpression(val)
			};
		} else {
			val = $.trim(val);
			sCtx.unwrap = {
				isDynamic : false,
				value : val.length === 0 || val.toLowerCase() === "true"
			};
		}
	}

	function _parseElementDirective(sCtx, val) {
		if (_isDynamicBindable(val)) {
			sCtx.element = {
				isDynamic : true,
				value : _parseExpression(val)
			};
		} else {
			sCtx.element = {
				isDynamic : false,
				value : $.trim(val)
			}
		}
	}

	function _parseAttributeDirective(sCtx, aname, val) {
		aname = aname.substring(SDF_ATTR_ATTRIBUTE_LEN);
		if (aname.length <= 1 || aname.charAt(0) !== '.') {
			console.warn("[SDF] Empty dynamic attribute name: " + aname + "=\"" + val + "\"");
			return;
		}
		_sdfDynamicAttribute(sCtx, true, false, aname.substring(1), _parseBindableText(val));
	}

	function _parseLoopDirective(directive, sCtx, aname, val) {
		aname = aname.substring(directive.length);

		let vname = aname.length > 1 && aname.charAt(0) === '.' ? aname.substring(1) : "";
		if (vname.length === 0) {
			vname = DEFAULT_LOOP_VAR;
		}

		let ref = _parseExpression(val);
		if (ref.length === 0) {
			console.warn("[SDF] Illegal '" + directive + "' directive: " + aname + "=\"" + val + "\"");
			return;
		}
		sCtx[directive === SDF_ATTR_LIST ? "list" : "repeat"] = {
			variable : vname,
			reference : ref
		};
	}

	function _sdfDynamicAttribute(sCtx, isDyn, allowBlank, name, value) {
		if (name && value && value.length > 0) {
			if (!sCtx.attributes) {
				sCtx.attributes = {};
			}
			sCtx.attributes[name] = {
				isDynamic : isDyn,
				isAllowBlank : allowBlank,
				isNamespaceProvided : name.indexOf(":") > 0,
				name : name,
				value : value
			};
		}
	}

	function _parseBindableText(txt) {
		let si = 0, ei = 0;
		let tokens = [];

		while (si < txt.length) {
			si = txt.indexOf(EXP_BEGIN, ei);
			if (si < 0) {
				tokens.push(txt.substring(ei));
				break;
			}

			// push text
			tokens.push(txt.substring(ei, si));

			ei = txt.indexOf(EXP_END, si + EXP_BEGIN_LEN);
			if (ei < 0) {
				tokens.push(txt.substring(si));
				break;
			}

			// push variable
			tokens.push(txt.substring(si + EXP_BEGIN_LEN, ei));

			si = ei = ei + EXP_END_LEN;
		}
		return tokens;
	}

	function _isTemplateElement(el) {
		return el.hasAttribute(SDF_ATTR_TEMPLATE);
	}

	function _isDynamicBindable(s) {
		let si = s.indexOf(EXP_BEGIN);
		if (si >= 0) {
			return s.indexOf(EXP_END, si + EXP_BEGIN_LEN + 1) > 0;
		}
		return false;
	}

	function _fetchTemplateAttr(el) {
		let attrs = el.getAttributeNames();
		for (let i = 0; i < attrs.length; i++) {
			if (attrs[i].indexOf(SDF_ATTR_TEMPLATE) === 0) {
				return attrs[i];
			}
		}
		return undefined;
	}

	function _parseTemplateVariables(val) {
		let vars = [];
		let invokeImmd = false;
		if (val.length > 0) {
			let arr = val.split(',');
			for (let i = 0; i < arr.length; i++) {
				let exp = $.trim(arr[i]);
				if (exp.length === 0) {
					continue;
				}
				let idx = exp.indexOf('=');
				if (idx < 0) {
					vars.push({
						variable : exp
					});
				} else {
					let v = $.trim(exp.substring(0, idx));
					let ref = _parseExpression($.trim(exp.substring(idx + 1)));
					if (!invokeImmd && ref) {
						invokeImmd = true;
					}
					vars.push({
						variable : v,
						reference : ref
					});
				}
			}
		}
		return {
			invokeImmd : invokeImmd,
			variables : vars
		};
	}

	function _templateTarget($tmpl) {
		let $p = $tmpl.parent();
		return $p && $p.length > 0 && !$p.hasClass(SDF_CLS_TEMPLATE_HOLDER) ? $p.get(0) : null;
	}

	function _parseExpression(s) {
		if (!s || s.length < 4) {
			return "";
		}
		let si = s.indexOf(EXP_BEGIN), ei = s.indexOf(EXP_END);
		if (si < 0 || ei < 0 || si > ei || (si + EXP_BEGIN_LEN) === ei) {
			console.warn("[SDF] Illegal expression: " + s);
			return "";
		}
		return s.substring(si + EXP_BEGIN_LEN, ei);
	}

	//
	// PRIVATE FUNCTIONS: BIND SECTION
	//

	function _bindTemplate(cmp, tmpl, bindObj, target) {
		target = target || tmpl.target;
		if (!target) {
			console.error("[SDF] Unknown bind target");
			return undefined;
		}
		let bindCtx = {
			component : cmp,
			template : tmpl,
			bindObject : bindObj,
			target : target,
			parent : target,
			currentNode : tmpl.element
		};
		let elem = _renderNode(bindCtx);
		if (elem) {
			elem.boundData = bindObj;
		}
		if (cmp.observers.length > 0) {
			cmp.notify(COMPOBS_ON_TEMPLATE_RENDERED, {
				template : tmpl,
				target : target,
				boundData : bindObj
			});
		}
		return elem;
	}

	function _renderNode(bindCtx) {
		let node = bindCtx.currentNode, sCtx = node.sdfContext;
		if (node.nodeType === doc.TEXT_NODE) {
			let txt = node.nodeValue;
			if (sCtx) {
				if (sCtx.bindTokens) {
					txt = _bindObj(sCtx.bindTokens, bindCtx.bindObject);
				}
			} else { // exceptive handling for IE
				if (_isDynamicBindable(txt)) {
					let tokens = _parseBindableText(txt);
					txt = _bindObj(tokens, bindCtx.bindObject);
				}
			}
			let dummyTag = document.createElement("div");
			dummyTag.innerHTML = txt;
			while (dummyTag.firstChild) {
				bindCtx.parent.appendChild(dummyTag.firstChild);
			}
			if (DEBUG) {
				console.log("Text node: " + txt);
			}
			return node;
		}
		return _renderElement(bindCtx, sCtx || {});
	}

	function _renderElement(bindCtx, sCtx) {
		let bindObj = bindCtx.bindObject;

		if (!_examTest(sCtx, bindObj)) {
			return undefined;
		}

		if (sCtx.invokeTemplate) {
			let invTmpl = sCtx.invokeTemplate;
			let tname = invTmpl.isDynamic ? _bindObj(invTmpl.nameTokens, bindObj) : invTmpl.template;
			let tmpl = bindCtx.component.templates.get(tname);
			if (!tmpl) {
				console.warn("[SDF] Unknown template '" + tname + "'");
			} else {
				return _invokeTemplate(bindCtx.component, tmpl, invTmpl.binds, bindObj, bindCtx.parent);
			}
		}

		let unwrap = false;
		if (sCtx.unwrap) {
			let uc = sCtx.unwrap;
			if ((!uc.isDynamic && uc.value === true) || (uc.isDynamic && _fetch(uc.value) === true)) {
				unwrap = true;
			}
		}

		let elem = undefined;
		if (sCtx.repeat || sCtx.list) {
			if (sCtx.repeat) {
				_renderRepeat(bindCtx, bindObj, sCtx, unwrap);
			}
			if (sCtx.list) {
				elem = _renderList(bindCtx, bindObj, sCtx, unwrap);
			}
		} else {
			if (!unwrap) {
				elem = _createElement(bindCtx.parent, bindCtx.currentNode, sCtx, bindObj);
				bindCtx.parent = elem;
			}
			_renderChildren(bindCtx);
		}
		return elem;
	}

	function _invokeTemplate(cmp, tmpl, binds, bindObj, target) {
		let obj = {};
		if (binds && binds.length > 0) {
			for (let i = 0; i < binds.length; i++) {
				obj[binds[i].variable] = _fetch(bindObj, binds[i].reference);
			}
		}
		if (DEBUG) {
			console.dir($.extend({}, {
				mesg : "invokeTemplate",
				cmp : cmp,
				tmpl : tmpl,
				binds : binds,
				bindObj : $.extend({}, bindObj),
				bound : obj,
				target : target
			}));
		}
		return _bindTemplate(cmp, tmpl, obj, target || tmpl.target);
	}

	function _renderRepeat(bindCtx, bindObj, sCtx, unwrap) {
		let items = _fetch(bindObj, sCtx.repeat.reference);
		if (DEBUG) {
			console.dir({
				mesg : "renderRepeat",
				bindContext : bindCtx,
				bindObject : bindObj,
				sdfContext : sCtx,
				unwrap : unwrap,
				items : items
			});
		}
		if (items && items.length > 0) {
			let parent = bindCtx.parent, node = bindCtx.currentNode;
			let vname = sCtx.repeat.variable;
			for (let i = 0; i < items.length; i++) {
				let item = items[i];
				bindObj[vname] = item;
				item[LOOPVAR_INDEX] = (i).toString();
				item[LOOPVAR_COUNT] = (i + 1).toString();
				if (DEBUG) {
					console.dir({
						mesg : "repeatItem",
						bindObject : bindObj,
						item : item,
						index : i
					});
				}
				bindCtx.parent = unwrap ? parent : _createElement(parent, node, sCtx, bindObj);
				bindCtx.currentNode = node;
				_renderChildren(bindCtx);
			}
			delete bindObj[vname];
			bindCtx.parent = parent;
		}
	}

	function _renderList(bindCtx, bindObj, sCtx, unwrap) {
		let elem = undefined;
		let items = _fetch(bindObj, sCtx.list.reference);
		if (DEBUG) {
			console.dir({
				mesg : "renderList",
				bindContext : bindCtx,
				bindObject : bindObj,
				sdfContext : sCtx,
				unwrap : unwrap,
				items : items
			});
		}
		if (items && items.length > 0) {
			let parent = bindCtx.parent, node = bindCtx.currentNode;
			let vname = sCtx.list.variable;
			if (!unwrap) {
				elem = _createElement(parent, node, sCtx, bindObj);
				bindCtx.parent = elem;
			}
			for (let i = 0; i < items.length; i++) {
				let item = items[i];
				bindObj[vname] = item;
				item[LOOPVAR_INDEX] = (i).toString();
				item[LOOPVAR_COUNT] = (i + 1).toString();
				if (DEBUG) {
					console.dir({
						mesg : "listItem",
						bindObject : bindObj,
						item : item,
						index : i
					});
				}
				bindCtx.parent = unwrap ? parent : elem;
				bindCtx.currentNode = node;
				_renderChildren(bindCtx);
			}
			delete bindObj[vname];
			bindCtx.parent = parent;
		}
		return elem;
	}

	function _renderChildren(bindCtx) {
		let parent = bindCtx.parent, node = bindCtx.currentNode;
		let nodes = node.childNodes;
		if (nodes && nodes.length > 0) {
			for (let i = 0; i < nodes.length; i++) {
				bindCtx.parent = parent;
				bindCtx.currentNode = nodes[i];
				_renderNode(bindCtx);
			}
		}
		bindCtx.parent = parent;
	}

	function _fetch(obj, ref) {
		if (obj && ref) {
			let ids = $.trim(ref).split('.');
			for (let i = 0; i < ids.length; i++) {
				obj = obj[ids[i]];
				if (!obj) {
					break;
				}
			}
			return obj;
		}
		return undefined;
	}

	function _bindObj(tokens, obj) {
		let result = [];
		if (tokens && tokens.length > 0) {
			for (let i = 0; i < tokens.length; i++) {
				let s = tokens[i], v = _fetch(obj, s);
				if (v !== undefined && v !== null) {
					v = (v).toString();
				}
				result.push(i % 2 == 0 ? s : v);
			}
		}
		return result.join("");
	}

	function _examTest(sCtx, bindObj) {
		if (typeof (sCtx.test) !== 'undefined') {
			let val = typeof (sCtx.test) === 'string' ? _fetch(bindObj, sCtx.test) : sCtx.test;
			if (val === undefined || val === null || val === false || ((typeof (val.length) !== 'undefined') && val.length === 0)) {
				return false;
			}
		}
		return true;
	}

	function _createElement(parent, node, sCtx, bindObj) {
		let tag = node.localName;
		if (sCtx.element) {
			let ec = sCtx.element;
			tag = $.trim(ec.isDynamic ? _fetch(bindObj, ec.value) : ec.value);
			if (tag.length === 0) {
				console.warn("[SDF] Empty dynamic tag name: use default '" + node.localName + "'");
				tag = node.localName;
			}
		}
		let elem = null;
		try {
			if (node.prefix) {
				let ns = NAMESPACES[node.prefix];
				if (ns) {
					elem = doc.createElementNS(ns, tag);
				} else {
					console.warn("[SDF] Unsupported name prefix of element: " + node.name + "; namespace ignored");
					elem = doc.createElement(tag);
				}
			} else {
				elem = doc.createElement(tag);
			}
		} catch (exc) {
			console.warn("[SDF] Can't create element: " + exc.toString() + ": use default '" + node.localName + "'");
			elem = doc.createElement(node.localName);
		}

		let attrs = sCtx.attributes;
		if (attrs) {
			for ( let aname in attrs) {
				let attr = attrs[aname];
				let val = attr.isDynamic ? _bindObj(attr.value, bindObj) : attr.value;
				if (attr.isAllowBlank || (!attr.isAllowBlank && val.length > 0)) {
					if (attr.isNamespaceProvided) {
						let prefix = aname.substring(0, aname.indexOf(":"));
						let ns = NAMESPACES[prefix];
						if (ns) {
							elem.setAttributeNS(ns, aname, val);
						} else {
							console.warn("[SDF] Unsupported name prefix of attribute: " + aname + "; namespace ignored");
							elem.setAttribute(aname, val);
						}
					} else {
						elem.setAttribute(aname, val);
					}
				}
			}
		}

		parent.appendChild(elem);
		if (DEBUG) {
			console.log(_dumpElement(elem));
		}

		return elem;
	}

	function _initComponent(cmp, bindObj) {
		let ref = _parseExpression(cmp.rootElement.getAttribute(SDF_ATTR_BIND));
		if (ref && ref.length > 0) {
			bindObj = _fetch(bindObj, ref);
			if (bindObj) {
				_initNode(cmp, cmp.rootElement, bindObj);
			}
			cmp.rootElement.removeAttribute(SDF_ATTR_BIND);
			cmp.rootElement.boundData = bindObj;
		}
	}

	function _initNode(cmp, node, bindObj) {
		// text node
		//
		if (node.nodeType === doc.TEXT_NODE) {
			_interpolate(node, bindObj);
			return;
		}

		// element node
		//
		if (node.sdfContext) {
			let sCtx = node.sdfContext;
			if (!_examTest(sCtx, bindObj)) {
				node.parentElement.removeChild(node);
				return;
			}
			if (sCtx.invokeTemplate) {
				_injectTemplate(cmp, node, bindObj);
				return;
			}
		}
		if (node.hasAttributes()) {
			let attrs = node.attributes;
			for (let i = 0; i < attrs.length; i++) {
				// ignore all attributes starts with 'sdf-data-'
				if (attrs[i].localName.indexOf(SDF_ATTRPREFIX) < 0) {
					_interpolate(attrs[i], bindObj);
				}
			}
		}
		if (node.hasChildNodes()) {
			for (let i = 0; i < node.childNodes.length; i++) {
				_initNode(cmp, node.childNodes[i], bindObj);
			}
		}
	}

	function _injectTemplate(cmp, node, bindObj) {
		let parent = node.parentElement;
		let invTmpl = node.sdfContext.invokeTemplate;
		let tname = invTmpl.isDynamic ? _bindObj(invTmpl.nameTokens, bindObj) : invTmpl.template;
		let tmpl = cmp.templates.get(tname);
		if (tmpl) {
			_removeChildren(node);
			_invokeTemplate(cmp, tmpl, invTmpl.binds, bindObj, node);
			if (parent) {
				while (node.hasChildNodes()) {
					parent.insertBefore(node.firstChild, node);
				}
			}
		}
		if (parent) {
			parent.removeChild(node);
		}
	}

	function _interpolate(node, bindObj) {
		if (_isDynamicBindable(node.nodeValue)) {
			let tokens = _parseBindableText(node.nodeValue);
			node.nodeValue = _bindObj(tokens, bindObj);
		}
	}

	//
	// PRIVATE FUNCTIONS: UTILITIES & MISC.
	//

	function _moveAttributes(src, dest) {
		_copyAttributes(src, dest);
		_removeAttributes(src);
	}

	function _copyAttributes(src, dest) {
		let attrs = src.attributes;
		for (let i = 0; i < attrs.length; i++) {
			dest.setAttribute(attrs[i].localName, attrs[i].nodeValue);
		}
	}

	function _removeAttributes(elem) {
		let attrs = elem.attributes;
		for (let i = attrs.length - 1; i >= 0; i--) {
			elem.removeAttribute(attrs[i].localName);
		}
	}

	function _moveChildren(src, dest) {
		while (src.firstChild) {
			dest.appendChild(src.firstChild);
		}
	}

	function _removeChildren(elem) {
		let nodes = elem.childNodes;
		for (let i = nodes.length - 1; i >= 0; i--) {
			elem.removeChild(nodes[i]);
		}
	}

	function _dumpElement(el) {
		let tag = "<" + el.nodeName.toLowerCase();
		if (el.hasAttributes()) {
			let attrs = el.attributes;
			for (let i = 0; i < attrs.length; i++) {
				tag += " " + attrs[i].name + "=\"" + attrs[i].nodeValue + "\"";
			}
		}
		tag += ">";
		return tag;
	}

	//
	// PUBLIC FUNCTIONS: Component class & comp sligeton object
	//

	let _compListeners = new Map();
	let _instances = new Map();

	function _notifyListener(selector, evtName, instance) {
		if (DEBUG) {
			console.log("[SDF] Component event fired for '" + selector + "': " + evtName);
		}
		let lsnrs = _compListeners.get(selector);
		if (lsnrs && lsnrs.length > 0) {
			for (let i = 0; i < lsnrs.length; i++) {
				let lsnr = lsnrs[i];
				if (lsnr[evtName]) {
					try {
						lsnr[evtName].call(lsnr, instance);
					} catch (e) {
						console.warn("[SDF] Can't notify component event '" + evtName + "': " + e);
					}
				}
			}
		}
	}

	function Component(selector, $jqObj) {
		this.selector = selector;
		this.$ui = $jqObj;
		this.rootElement = $jqObj.get(0);
		this.metadata = new Map();
		this.templates = new Map();
		this.observers = [];

		_compile(this, this.rootElement);
	}
	Component.prototype = {
		init : function(bindObj) {
			_notifyListener(this.selector, COMPEVT_ON_BEFORE_INIT, this);
			_initComponent(this, bindObj);
			_notifyListener(this.selector, COMPEVT_ON_AFTER_INIT, this);
		},

		meta : function(key) {
			return this.metadata.get(key);
		},

		invokeTemplate : function(tname, bindObj, target) {
			if (_isDynamicBindable(tname)) {
				let tokens = _parseBindableText(tname);
				tname = _bindObj(tokens, bindObj);
			}
			let tmpl = this.templates.get(tname);
			return tmpl ? _bindTemplate(this, tmpl, bindObj, target) : null;
		},

		addObserver : function(observer) {
			this.observers.push(observer);
		},

		removeObserver : function(observer) {
			let idx = this.observers.indexOf(observer);
			if (idx >= 0) {
				this.observers.splice(idx, 1);
			}
		},

		notify : function(evtName, passObj) {
			for (let i = 0; i < this.observers.length; i++) {
				let obs = this.observers[i];
				if (obs[evtName]) {
					try {
						obs[evtName].call(obs, passObj);
					} catch (e) {
						console.warn("[SDF] Notification failure: '" + evtName + "': " + e);
					}
				}
			}
		}
	};

	let comp = {

		dispatch : function(selector) {
			let $el = $(selector);
			if ($el.length === 0) {
				return undefined;
			}
			let instances = _instances.get(selector);
			if (!instances) {
				instances = [];
				_instances.set(selector, instances);
				$el.each(function() {
					let c = new Component(selector, $(this));
					_notifyListener(selector, COMPEVT_ON_CREATED, c);
					instances.push(c);
				});
			}
			if (DEBUG) {
				console.log("[SDF] Component dispatched for '" + selector + "'");
			}
			return instances.length === 1 ? instances[0] : instances;
		},

		dispose : function(selector) {
			if (_instances.has(selector)) {
				let instances = _instances.get(selector);
				for (let i = 0; i < instances.length; i++) {
					_notifyListener(selector, COMPEVT_ON_DISPOSE, instances[i]);
				}
				_instances["delete"](selector);
				if (DEBUG) {
					console.log("[SDF] Component disposed for '" + selector + "'");
				}
			}
		},

		attachListener : function(selector, lsnrObj) {
			let lsnrs = _compListeners.get(selector);
			if (!lsnrs) {
				lsnrs = [];
				_compListeners.set(selector, lsnrs);
			}
			lsnrs.push(lsnrObj);
			if (DEBUG) {
				console.log("[SDF] Component event listener attached for '" + selector + "'");
			}
		},

		detachListener : function(selector, lsnrObj) {
			let lsnrs = _compListeners.get(selector);
			if (lsnrs && lsnrs.length > 0) {
				let idx = lsnrs.indexOf(lsnrObj);
				if (idx >= 0) {
					lsnrs.splice(idx, 1);
				}
				if (DEBUG) {
					console.log("[SDF] Component event listener detached for '" + selector + "'");
				}
			}
		}
	};

	window.sg.sdf.comp = comp;

})(jQuery, document);
;
(function($) {

	"use strict";

	window.sg = window.sg || {};
	window.sg.sdf = window.sg.sdf || {};

	const IMGPRESET_LAZYLOAD_HOME = "LazyLoad_Home";
	const IMGPRESET_PC_PRD_CARD = "PC_PRD_CARD";

	let util = {

		getImagePreset : function(preset, imgSrc, forcedExt) {
			let src = $.trim((imgSrc || "")).toLowerCase();
			if (src.indexOf("?$") < 0) {
				let pfx = "?$" + preset + "_";
				if (forcedExt && $.trim(forcedExt) !== '') {
					return pfx + $.trim(forcedExt).toUpperCase() + "$";
				}
				let idx = src.lastIndexOf('.');
				if (idx > 0) {
					let ext = src.substring(idx + 1);
					switch (ext) {
					case "jpg":
					case "jpeg":
						return pfx + "JPG$";
					case "png":
						return pfx + "PNG$";
					case "gif":
						return pfx + "GIF$";
					default:
						if ("LazyLoad_Home" === preset) {
							return pfx + "PNG$";
						} else {
							return pfx + "IMG$";
						}
					}
				}
			}
			return "";
		},

		presetImage : function(preset, imgSrc, forcedExt) {
			let src = $.trim(imgSrc);
			return src.length > 0 ? (imgSrc + this.getImagePreset(preset, imgSrc, forcedExt)) : imgSrc;
		},

		previewImageSrc : function(imgSrc, forcedExt) {
			return this.presetImage(IMGPRESET_LAZYLOAD_HOME, imgSrc, forcedExt);
		},

		productCardImageSrc : function(imgSrc, forcedExt) {
			return this.presetImage(IMGPRESET_PC_PRD_CARD, imgSrc, forcedExt);
		}
	};

	function Queue(size) {
		this._capacity = size;
		this._queue = [];
	}
	Queue.prototype = {

		offer : function(item) {
			if (this._queue.length < this._capacity) {
				this._queue.push(item);
				return true;
			}
			return false;
		},

		put : function(item) {
			let removed = null;
			if (this._queue.length === this._capacity) {
				removed = this._queue.shift();
			}
			this._queue.push(item);
			return removed;
		},

		get : function() {
			let item = null;
			if (this._queue.length > 0) {
				item = this._queue[0];
			}
			return item;
		},

		take : function() {
			let item = null;
			if (this._queue.length > 0) {
				item = this._queue.shift();
			}
			return item;
		},

		clear : function() {
			this._queue = [];
		},

		capacity : function() {
			return this._capacity;
		},

		size : function() {
			return this._queue.length;
		}
	};
	util.Queue = Queue;

	window.sg.sdf.util = util;

})(jQuery);
;
(function($) {

	"use strict";

	function _arrangeAccessibilityElements(tagSelector, attr) {
		$(tagSelector).each(function(i, elem) {
			_setEmptyAttribute(elem, attr);
		});
	}

	function _setEmptyAttribute(elem, attr) {
		if (!elem.hasAttribute(attr)) {
			elem.setAttribute(attr, "");
		}
	}

	$(function() {
		// _arrangeAccessibilityElements("a", "title");
		_arrangeAccessibilityElements("img", "alt");
	});

})(jQuery);

;
(function() {

	"use strict";

	const SEL_ALL_VIDEO = "script[data-object-type='VideoObject']";

	const ATTR_THUMBNAIL_URL = "thumbnailUrl";
	const ATTR_CONTENT_URL = "contentUrl";

	const DTYPE_DESKTOP = "desktop";
	const DTYPE_MOBILE = "mobile";

	const SFX_DESKTOP = "_" + DTYPE_DESKTOP;
	const SFX_MOBILE = "_" + DTYPE_MOBILE;

	// Client functions from clientlibs-common: window.sg.common.utils.getCurrentDevice()
	//
	const BREAKPOINTS = {
		DESKTOP : 1440,
		MOBILE : 767,
		MOBILE_UNDER : 360,
	};
	function _getViewPort() {
		let doc = window;
		let pre = 'inner';

		if (!('innerWidth' in window)) {
			pre = 'client';
			doc = document.documentElement || document.body;
		}

		return {
			width : doc[pre + "Width"],
			height : doc[pre + "Height"],
		};
	}
	function _getCurrentDevice() {
		const width = _getViewPort().width;
		return width > BREAKPOINTS.MOBILE ? 'desktop' : 'mobile';
	}

	let _deviceType = _getCurrentDevice();

	function _arrangeVideoObjects() {
		let tags = document.querySelectorAll(SEL_ALL_VIDEO);
		if (tags && tags.length > 0) {
			for (let i = 0, nTags = tags.length; i < nTags; i++) {
				let t = tags[i], obj = JSON.parse(tags[i].innerText);
				_arrangeField(obj, ATTR_THUMBNAIL_URL);
				_arrangeField(obj, ATTR_CONTENT_URL);
				tags[i].innerText = JSON.stringify(obj);
			}
		}
	}

	function _arrangeField(obj, target) {

		function _checkAndSet(o, a, b, target) {
			if (a && a.length > 0) {
				o[target] = a;
			} else {
				if (!o[target] && b && b.length > 0) {
					obj[target] = b;
				}
			}
		}

		let dKey = target + SFX_DESKTOP, d = obj[dKey];
		let mKey = target + SFX_MOBILE, m = obj[mKey];

		if (_deviceType === DTYPE_MOBILE) {
			_checkAndSet(obj, m, d, target);
		} else if (_deviceType === DTYPE_DESKTOP) {
			_checkAndSet(obj, d, m, target);
		}

		delete obj[dKey];
		delete obj[mKey];
	}

	// execute on load time
	//
	_arrangeVideoObjects();

})();

/**
 * A common utils module used as window.sg.common.utils
 * @module window/sg/common/utils
 * @author hyunsik.yim
 */
(() => {
  window.sg = window.sg || {};
  window.sg.common = window.sg.common || {};
  window.sg.components = window.sg.components || {};

  const constants = {
    BREAKPOINTS: {
      DESKTOP: 1440,
      MOBILE: 767,
      MOBILE_UNDER: 360,
    },
    SELECTOR: {
      RES_IMG: '.responsive-img',
      VIDEO: '.video',
      LAZY_LOAD: '.lazy-load',
      PREVIEW_IMG: '.preview',
      INDICATOR: '.indicator',
    },
    KEY_CODE: {
      TAB: 9,
      ENTER: 13,
      SPACE: 32,
      PAGE_UP: 33,
      PAGE_DOWN: 34,
      END: 35,
      HOME: 36,
      LEFT: 37,
      UP: 38,
      RIGHT: 39,
      DOWN: 40,
      ESC: 27,
    },
  };

  let scrollTimer;
  let listenersMap;
  let scrollType = '';
  let passive = null;
  let overDimEls = null;
  const isWearableBc = !!document.querySelector('.wearable-bc');

  const utils = {
    getViewPort() {
      let doc = window;
      let pre = 'inner';

      if (!('innerWidth' in window)) {
        pre = 'client';
        doc = document.documentElement || document.body;
      }

      return {
        width: doc[`${pre}Width`],
        height: doc[`${pre}Height`],
      };
    },
    getCurrentDevice() {
      const width = utils.getViewPort().width;
      return width > constants.BREAKPOINTS.MOBILE ? 'desktop' : 'mobile';
    },
    getCurrentMediaType() {
      const width = utils.getViewPort().width;
      return width > constants.BREAKPOINTS.MOBILE ? width > constants.BREAKPOINTS.DESKTOP ? 'desktop-over' : 'desktop' : width > constants.BREAKPOINTS.MOBILE_UNDER ? 'mobile' : 'mobile-under';
    },
    /**
     * view port 의 vertical 영역 내 element 가 존재하는지 여부 검사
     * @func isInVerticalViewPort
     * @param {HTMLElement} el 검사 대상
     * @return {boolean} view port 의 vertical 영역 내 element 가 존재하는지 여부 리턴
     * @static
     */
    // add 200px lazy-load buffer
    // remove bottom buffer for anchor navigation
    isInVerticalViewPort(el) {
      const rect = el.getBoundingClientRect();
      // return rect.top - 200 < utils.getViewPort().height && rect.bottom + 200 > 0 && rect.width + rect.height !== 0;
      // return rect.top - 200 < utils.getViewPort().height && rect.bottom + 200 > 0;
      return rect.top - 200 <= utils.getViewPort().height && rect.bottom >= 0 + (this.scrollFlag ? null : utils.getStickyNavHeightPromise());
    },
    /**
     * view port 의 horizontal 영역 내 element 가 존재하는지 여부 검사
     * @func isInHorizontalViewPort
     * @param {HTMLElement} el 검사 대상
     * @return {boolean} view port 의 horizontal 영역 내 element 가 존재하는지 여부 리턴
     * @static
     */
    isInHorizontalViewPort(el) {
      const rect = el.getBoundingClientRect();
      // return rect.left - 200 < utils.getViewPort().width && rect.right + 200 > 0 && rect.width + rect.height !== 0;
      return rect.left - 200 <= utils.getViewPort().width && rect.right + 200 >= 0;
    },
    /**
     * screen 의 vertical 영역 내 element 가 보이는지 검사
     * @func isVerticalVisible
     * @param {HTMLElement} el 검사 대상
     * @return {boolean} screen 의 vertical 영역 내 element 가 보이는지 여부 리턴
     * @static
     */
    isVerticalVisible(el) {
      // return utils.isInVerticalViewPort(el) && getComputedStyle(el).display !== 'none';
      return utils.isInVerticalViewPort(el) && !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);
    },
    /**
     * screen 의 horizontal 영역 내 element 가 보이는지 검사
     * @func isHorizontalVisible
     * @param {HTMLElement} el 검사 대상
     * @return {boolean} screen 의 horizontal 영역 내 element 가 보이는지 여부 리턴
     * @static
     */
    isHorizontalVisible(el) {
      // return utils.isInHorizontalViewPort(el) && getComputedStyle(el).display !== 'none';
      return utils.isInHorizontalViewPort(el) && !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);
    },
    /**
     * view port 영역 내  element 가 존재하는지 여부 검사
     * @func isInViewPort
     * @param {HTMLElement} el 검사 대상
     * @return {boolean} view port 영역 내  element 가 존재하는지 여부 리턴
     * @static
     */
    isInViewPort(el) {
      return utils.isInVerticalViewPort(el) && utils.isInHorizontalViewPort(el);
    },
    /**
     * screen 영역 내 element 가 보이는지 여부 검사
     * @func isVisible
     * @param {HTMLElement} el 검사 대상
     * @return {boolean} screen 영역 내 element 가 보이는지 여부 리턴
     * @static
     */
    isVisible(el) {
      return utils.isInViewPort(el) && !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length);
    },
    scrollTo(oriY, desY) {
      const { scrollLeft, scrollTop, scrollHeight, clientHeight } = document.documentElement;
      const posX = scrollLeft;

      if (oriY > scrollHeight - clientHeight) {
        oriY = scrollHeight - clientHeight;
      }

      let tmpDesY;
      if (isNaN(desY)) {
        tmpDesY = scrollTop;
      } else {
        tmpDesY = desY;
      }

      const speed = 7;
      tmpDesY += (oriY - scrollTop) / speed;
      if (tmpDesY < 0) {
        tmpDesY = 0;
      } else if (tmpDesY > scrollHeight - clientHeight) {
        tmpDesY = scrollHeight - clientHeight;
      }

      const posY = Math.ceil(tmpDesY);

      window.scrollTo(posX, posY);

      if (posY !== oriY) {
        scrollTimer = setTimeout(() => {
          utils.scrollTo(oriY, tmpDesY);
        }, 15);
      } else {
        clearTimeout(scrollTimer);
      }
    },
    /**
     * Description...
     * @func setImageSpecGuide
     * @param {HTMLElement} targetElement (optional) param description...
     * @param {string} guideSpecText (optional) param description...
     * @static
     */
    setImageSpecGuide(targetElement, guideSpecText) {
      const mediaSizeGuide = document.createElement('span');
      mediaSizeGuide.innerHTML = guideSpecText;
      mediaSizeGuide.style.position = 'absolute';
      mediaSizeGuide.style.display = 'inline-block';
      mediaSizeGuide.style.top = '50%';
      mediaSizeGuide.style.right = '50%';
      mediaSizeGuide.style.width = '100%';
      mediaSizeGuide.style.textAlign = 'center';
      mediaSizeGuide.style.fontStyle = 'italic';
      mediaSizeGuide.style.transform = 'translateX(50%) translateY(-50%)';
      mediaSizeGuide.style.color = '#fff';
      mediaSizeGuide.style.fontSize = '30px';
      mediaSizeGuide.classList.add('media-size-guide');
      targetElement.appendChild(mediaSizeGuide);
    },
    /**
     * 두 개의 object 를 하나로 합침
     * @func extend
     * @param {object} de 합칠 object
     * @param {object} add 합칠 object
     * @return {object} 합쳐진 object 리턴
     * @static
     */
    extend(de, add) {
      Object.keys(add).forEach((key) => {
        de[key] = add[key];
      });

      return de;
    },
    setCookie(name, value, day) {
      const date = new Date();
      date.setTime(date.getTime() + day * 60 * 60 * 24 * 1000);
      document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
    },
    /**
     * 현재 cookie 값 가져옴
     * @func getCookie
     * @param {string} name 가져올 cookie name
     * @return {string} cookie value
     * @static
     */
    getCookie(name) {
      const value = document.cookie.match(`(^|;) ?${name}=([^;]*)(;|$)`);
      return value ? value[2] : null;
    },
    /**
     * custom event trigger
     * @func triggerEvent
     * @param {HTMLElement} el event 를  trigger 할 element
     * @param {string} eventName event name
     * @param {T} detail = null (optional) event 와 함께 전달할 detail
     * @param {boolean} bubbles = false (optional) bubbles
     * @param {boolean} cancelable = true (optional) cancelable
     * @static
     */
    triggerEvent(el, eventName, detail = null, bubbles = false, cancelable = true) {
      let event;

      if (typeof CustomEvent === 'function') {
        event = new CustomEvent(eventName, {
          bubbles,
          cancelable,
          detail,
        });
      } else {
        event = document.createEvent('CustomEvent');
        event.initCustomEvent(eventName, bubbles, cancelable, detail);
      }

      el.dispatchEvent(event);
    },
    /**
     * layer popup 등이 표출될 경우 body 의 scroll 을 숨김
     * @func hiddenScroll
     * @static
     */
    hiddenScroll() {
      if (this.scrollFlag === true) {
        return;
      }
      this.scrollFlag = true;
      this.currentPos = window.scrollY || document.documentElement.scrollTop;
      const $body = document.querySelector('body');
      let fixedPos;

      if (this.currentPos > 0) {
        fixedPos = `-${this.currentPos}px`;
      } else {
        fixedPos = 0;
      }

      $body.style.position = 'fixed';
      $body.style.width = '100%';
      $body.style.top = fixedPos;
    },
    /**
     * 숨겨진 body 의 scroll 을 다시 표출
     * @func visibleScroll
     * @static
     */
    visibleScroll() {
      if (this.scrollFlag === true) {
        this.scrollFlag = false;
        const $body = document.querySelector('body');
        
        $body.style.position = '';
        $body.style.width = '';
        $body.style.top = '';

        window.scrollTo(0, this.currentPos);
      }
    },
    /**
     * 현재 direction 리턴
     * @func getDirection
     * @return {string} ltr 또는 rtl 리턴
     * @static
     */
    getDirection() {
      return window.getComputedStyle(document.body).direction;
    },
    /**
     * event listener 등록<br>
     * 이 함수를 통해 등록한 listener 는 removeAllEventListeners 를 통해 제거 가능
     * @func addEventListener
     * @param {HTMLElement} el event listener 를 등록 할 element
     * @param {string} type event name
     * @param {function} fn event listener
     * @static
     */
    addEventListener(el, type, fn) {
      if (!el) {
        return;
      }

      if (!listenersMap) {
        listenersMap = new WeakMap();
      }

      let listeners;
      if(!listenersMap.has(el)) {
        listeners = {};
      } else {
        listeners = listenersMap.get(el);
      }

      if (!listeners[type]) {
        listeners[type] = [];
      }

      listeners[type].push(fn);
      listenersMap.set(el, listeners);

      el.addEventListener(type, fn);
    },
    /**
     * element 에 등록된 모든 event listener 제거<br>
     * addEventListener 를 통해 등록한 listener 만 제거 가능
     * @func removeAllEventListeners
     * @param {HTMLElement} el event listener 를 제거할 element
     * @param {string} type event name
     * @static
     */
    removeAllEventListeners(el, type) {
      if (!el || !listenersMap) {
        return;
      }

      let listeners;
      if(listenersMap.has(el)) {
        listeners = listenersMap.get(el);
        if (listeners[type]) {
          listeners[type].forEach((listener) => {
            el.removeEventListener(type, listener);
          });

          delete listeners[type];

          if (!Object.keys(listeners).length) {
            listenersMap.delete(el);
          }
        }
      }
    },
    /**
     * element 의 부모 중 selector 에 해당하는 가장 가까운 element 를 찾음
     * @func closest
     * @param {HTMLElement} el 시작 element
     * @param {string} selector selector
     * @return {HTMLElement} 찾은 element 리턴 또는 없을 경우 null 리턴
     * @static
     */
    closest(el, selector) {
      do {
        if (el.matches ? el.matches(selector) : el.msMatchesSelector(selector)) {
          return el;
        }

        el = el.parentElement || el.parentNode;
      } while (el !== null && el.nodeType === 1);

      return null;
    },
    popupControl: {
      closeParam: null,

      /**
       * Description...
       * @func popstateHandler
       * @static
       */
      popstateHandler: () => {
        if (!window.history.state) {
          window.sg.common.utils.popupControl.closeParam();
          window.sg.common.utils.popupControl.close();
          // return;
        } else if (window.history.state.page === 'popOpen') {
          window.sg.common.utils.popupControl.closeParam();
          window.sg.common.utils.popupControl.close();
        }
      },
      /**
     * Description...
     * @func open
     * @return {string} (optional) return description...
     * @static
     */
      open(param) {
        this.closeParam = param;
        window.removeEventListener('popstate', this.popstateHandler);
        window.addEventListener('popstate', this.popstateHandler);

        window.history.pushState({
          page: 'popOpen',
        },'',`${window.location.href}`);

        // only for wearable-bc
        if (isWearableBc) {
          utils.hideOverDimEls();
        }
      },
      /**
     * Description...
     * @func close
     * @return {string} (optional) return description...
     * @static
     */
      close(){
        this.closeParam = null;
        if (!window.history.state) {
          return;
        }
        if (window.history.state.page === 'popOpen') {
          window.history.forward();
          window.removeEventListener('popstate', this.popstateHandler);
        }
        // only for wearable-bc
        if (isWearableBc) {
          utils.showOverDimEls();
        }
      },
    },
    /**
     * Description...
     * @func setSwiperIndicatorTaggingAttributes
     * @return {string} (optional) return description...
     * @static
     */
    setSwiperIndicatorTaggingAttributes(taggingAttributes, target) {
      const taggingAttributesDetail = JSON.parse(taggingAttributes);

      [...target.querySelectorAll('.swiper-pagination-bullet')].forEach((el, index) => {
        el.setAttribute('an-tr', taggingAttributesDetail.anTr);
        el.setAttribute('an-ca', taggingAttributesDetail.anCa);
        el.setAttribute('an-ac', taggingAttributesDetail.anAc);
        el.setAttribute('an-la', `${taggingAttributesDetail.anLa}${index + 1}`);
      });
    },
    /**
     * Description...
     * @func isEnglish
     * @return {string} (optional) return description...
     * @static
     */
    isEnglish(str) {
      const regExp = /^[a-zA-Z]*$/;
      return regExp.test(str);
    },
    /**
     * Description...
     * @func isNumber
     * @return {string} (optional) return description...
     * @static
     */
    isNumber(str) {
      const regExp = /^[0-9]*$/;
      return regExp.test(str);
    },
    /**
     * Description...
     * @func isEngNum
     * @return {string} (optional) return description...
     * @static
     */
    isEngNum(str) {
      const regExp = /^[a-zA-Z0-9]*$/;
      return regExp.test(str);
    },
    /**
     * Description...
     * @func isEmail
     * @return {string} (optional) return description...
     * @static
     */
    isEmail(str) {
      const regExp = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
      return regExp.test(str);
    },
    /**
     * Description...
     * @func detectTransitionEndEvent
     * @return {string} (optional) return description...
     * @static
     */
    detectTransitionEndEvent(el) {
      const transitions = {
        'transition': 'transitionend',
        'OTransition': 'oTransitionEnd',
        'MozTransition': 'transitionend',
        'WebkitTransition': 'webkitTransitionEnd',
      };

      const keys = Object.keys(transitions);
      for (let i = 0; i < keys.length; i++) {
        if( el.style[keys[i]] !== undefined ){
          return transitions[keys[i]];
        }
      }

      return undefined;
    },
    /**
     * rtl 여부 리턴
     * @func isRtl
     * @return {boolean} rtl 여부 리턴
     * @static
     */
    isRtl() {
      return getComputedStyle(document.body).direction.toUpperCase() === 'RTL';
    },
    /**
     * 접근성을 위해 mobile layer popup 에서 accessibility focus 가 loop 되도록 설정
     * @func setMobileFocusLoop
     * @param {HTMLElement} el layer popup element
     * @static
     */
    setMobileFocusLoop(el) {
      do {
        const siblings = el.parentElement.childNodes;

        for (let i = 0; i < siblings.length; i++) {
          if (siblings[i].nodeType === 1 && siblings[i] !== el &&
            siblings[i].tagName.toUpperCase() !== 'SCRIPT' && siblings[i].tagName.toUpperCase() !== 'STYLE') {
            siblings[i].setAttribute('data-aria-hidden', siblings[i].getAttribute('aria-hidden') || 'null');
            siblings[i].setAttribute('aria-hidden', 'true');
          }
        }

        el = el.parentElement;
      } while (el !== document.body);
    },
    /**
     * mobile layer popup 에서 accessibility focus loop 를 해제
     * @func removeMobileFocusLoop
     * @static
     */
    removeMobileFocusLoop() {
      const els = document.querySelectorAll('[data-aria-hidden]');

      for (let i = 0; i < els.length; i++) {
        const originAriaHidden = els[i].getAttribute('data-aria-hidden');

        if (originAriaHidden === 'null') {
          els[i].removeAttribute('aria-hidden');
        } else {
          els[i].setAttribute('aria-hidden', originAriaHidden);
        }

        els[i].removeAttribute('data-aria-hidden');
      }
    },
    /**
     * rtl 에서 현재 scroll type 을 리턴
     * @func detectScrollType
     * @return {string} default, reverse, negative 중 현재 scroll type 리턴
     * @static
     */
    detectScrollType() {
      if (scrollType) {
        return scrollType;
      }

      scrollType = 'reverse';

      const tmpDivEl = document.createElement('div');

      tmpDivEl.appendChild(document.createTextNode('tmpDivEl'));
      tmpDivEl.dir = 'rtl';
      tmpDivEl.style.fontSize = '12px';
      tmpDivEl.style.width = '4px';
      tmpDivEl.style.height = '2px';
      tmpDivEl.style.position = 'absolute';
      tmpDivEl.style.overflow = 'scroll';

      document.body.appendChild(tmpDivEl);

      if (tmpDivEl.scrollLeft > 0) {
        scrollType = 'default';
      } else {
        tmpDivEl.scrollLeft = 2;
        if (tmpDivEl.scrollLeft < 2) {
          scrollType = 'negative';
        }
      }

      document.body.removeChild(tmpDivEl);
      return scrollType;
    },
    /**
     * rtl 에서 browser 에 따라 scrollLeft 값이 다르지 않도록 normalize 하여 리턴
     * @func getNormalizedScrollLeft
     * @param {HTMLElement} scrollLeft 를 가져올 element
     * @return {number} normalize 한 scrollLeft 리턴
     * @static
     */
    getNormalizedScrollLeft(el) {
      if (utils.isRtl()) {
        switch (utils.detectScrollType()) {
        case 'negative':
          return el.scrollWidth - el.clientWidth + el.scrollLeft;
        case 'reverse':
          return el.scrollWidth - el.clientWidth - el.scrollLeft;
        default:
          return el.scrollLeft;
        }
      }

      return el.scrollLeft;
    },
    /**
     * rtl 에서 browser 에 따라 normalize 된 scrollLeft 를 세팅
     * @func setNormalizedScrollLeft
     * @param {HTMLElement} scrollLeft 를 세팅할 element
     * @param {number} normalize 된 scrollLeft 값
     * @return {string} (optional) return description...
     * @static
     */
    setNormalizedScrollLeft(el, scrollLeft) {
      if (utils.isRtl()) {
        switch (utils.detectScrollType()) {
        case 'negative':
          el.scrollLeft =  el.clientWidth - el.scrollWidth + scrollLeft;
          break;
        case 'reverse':
          el.scrollLeft =  el.scrollWidth - el.clientWidth - scrollLeft;
          break;
        default:
          el.scrollLeft = scrollLeft;
        }
      } else {
        el.scrollLeft = scrollLeft;
      }
    },
    /**
     * 현재 browser 가 scroll event listener 에서 option 으로 passive: true 를 지원하는지 여부
     * @func isPassiveSupport
     * @return {boolean} scroll event listener 에서 option 으로 passive: true 를 지원하는지 여부
     * @static
     */
    isPassiveSupported() {
      if (passive === null) {
        try {
          const options = {
            // eslint-disable-next-line getter-return
            get passive() {
              passive = true;
            },
          };

          // noinspection JSCheckFunctionSignatures
          window.addEventListener('test', options, options);
          // noinspection JSCheckFunctionSignatures
          window.removeEventListener('test', options, options);
        } catch(err) {
          passive = false;
        }
      }

      return passive;
    },
    makeDate(timeTxt) {
      const useText = timeTxt.replace(/[+|-][0-9]{4}$/,'');
      const returnVal = new Date(useText);

      const offset = timeTxt.substring(useText.length);

      if (offset !== '') {
        const offsetHour = parseInt(offset.substring(0,3),0);
        let offsetMin = parseInt(offset.substring(3),0);
        if (offsetHour < 0) {
          offsetMin = offsetMin * -1;
        }

        returnVal.setHours(returnVal.getHours() + offsetHour * -1);
        returnVal.setMinutes(returnVal.getMinutes() + offsetMin * -1);
      }

      return returnVal;
    },
    getTimeStatus(startTime, endTime) {
      const start = utils.makeDate(startTime);
      const end = utils.makeDate(endTime);
      const now = new Date();

      if (now >= start) {
        if (now > end) {
          return 'after';
        } else {
          return 'live';
        }
      } else {
        return 'before';
      }
    },
    showBambuserLiveShopping(bambuserShowId) {
      window.onBambuserLiveShoppingReady = (player) => {
        player.configure({
          buttons: {
            dismiss: player.BUTTON.MINIMIZE,
          },
        });
      };

      if (!window.initBambuserLiveShopping) {
        window.initBambuserLiveShopping = function(item) {
          window.initBambuserLiveShopping.queue.push(item);
        };

        window.initBambuserLiveShopping.queue = [];
        const scriptNode = document.createElement('script');
        scriptNode.src = 'https://lcx-embed.bambuser.com/samsung/embed.js';
        document.body.appendChild(scriptNode);
      }

      window.initBambuserLiveShopping({
        showId: bambuserShowId,
        type: 'overlay',
      });
    },
    removeReCaptchaFrameBorder() {
      if (document.querySelectorAll('[title="reCAPTCHA"]').length > 0) {
        [...document.querySelectorAll('[title="reCAPTCHA"]')].forEach((el) => {
          el.removeAttribute('frameborder');
        });
      }
    },
    changeActiveReCaptchaProperty() {
      if (document.querySelectorAll('[title="reCAPTCHA"]').length > 0) {
        [...document.querySelectorAll('[title="reCAPTCHA"]')].forEach((el) => {
          el.setAttribute('aria-hidden', 'true');
          el.removeAttribute('frameborder');
          if (/Android/i.test(navigator.userAgent)) {
            el.removeAttribute('role');
          }
        });
      }
    },
    changeInActiveReCaptchaProperty() {
      if (document.querySelectorAll('[title="reCAPTCHA"]').length > 0) {
        [...document.querySelectorAll('[title="reCAPTCHA"]')].forEach((el) => {
          el.removeAttribute('aria-hidden');
          if (/Android/i.test(navigator.userAgent)) {
            el.setAttribute('role', 'presentation');
          }
        });
      }
    },
    /**
     * 팝업 닫은 후 바로 포커스 이동 (b2c, b2b, wearable pd-popup)
     * @func buyingFocus
     * @param {string} target
     * @static
     */
    buyingFocus(target) {
      const selectors = [
        `.pdd-buying-tool [data-target-popup="${target}"]`,
        `.pd-buying-tool [data-target-popup="${target}"]`,
        `.wearable-bc-buying [data-target-popup="${target}"]`,
      ];
      
      const targetEl = document.querySelector(selectors.join(','));
      if(targetEl) {
        targetEl.focus();
      }
    },
    /**
     * dim팝업 위에 올라가는 컴포넌트 숨기기
     * @func hideOverDimEls
     * @static
     */
    hideOverDimEls() {
      if (overDimEls) {
        return;
      }

      overDimEls = [
        { display: null, sel: '#spr-live-chat-app' },
        { display: null, sel: '#QSIFeedbackButton-btn' },
        { display: null, sel: '#kampyleButtonContainer' },
      ];

      overDimEls.forEach((overDimEl) => {
        const el = document.querySelector(overDimEl.sel);
        if (el) {
          overDimEl.display = el.style.display;
          el.style.display = 'none';
        }
      });
    },
    /**
     * hideOverDimEls 호출후 되돌리기
     * @func showOverDimEls
     * @static
     */
    showOverDimEls() {
      if (!overDimEls) {
        return;
      }

      overDimEls.forEach((overDimEl) => {
        const el = document.querySelector(overDimEl.sel);
        if (el) {
          el.style.display = overDimEl.display;
        }
      });

      overDimEls = null;
    },
    bindRaf(handler) {
      let tick = false;

      return (e) => {
        if (tick) {
          return;
        }

        tick = true;

        requestAnimationFrame(() => {
          tick = false;
          handler(e);
        });
      };
    },
    getFirstFocusableEl(el, excludeSelectors = []) {
      el = !el ? document : el;
      const focusableSelectors = 'input:not([tabindex="-1"]), select:not([tabindex="-1"]), textarea:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), [href]:not(use):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])';
      
      const isVisible = (el) => !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length)
        && getComputedStyle(el).visibility !== 'hidden';

      const isExcluded = (el) => {
        if (excludeSelectors.length) {
          for (let i = 0; i < excludeSelectors.length; i++) {
            if (el.matches(excludeSelectors[i])) {
              return true;
            }
          }
        }

        return false;
      };
      
      if ((el.matches ? el.matches(focusableSelectors) : el.msMatchesSelector(focusableSelectors)) && isVisible(el)) {
        return el;
      }
      
      const focusableEls = el.querySelectorAll(focusableSelectors);

      if (!focusableEls.length) {
        return null;
      }

      for (let i = 0; i < focusableEls.length; i++) {
        const el = focusableEls[i];
        if (isVisible(el) && !isExcluded(el)) {
          return el;
        }
      }
    },
    setFocusFirstFocusableEl(el, excludeSelectors) {
      const focusableEl = utils.getFirstFocusableEl(el, excludeSelectors);

      if (focusableEl) {
        focusableEl.focus();
        return focusableEl;
      }
    },
    setFocusNextFocusableEl(el) {
      if (!el || !(el instanceof Element)) {
        return null;
      }

      const nextSiblingEl = el.nextElementSibling;

      if (nextSiblingEl) {
        const focusableEl = utils.getFirstFocusableEl(nextSiblingEl);

        if (focusableEl) {
          focusableEl.focus();
          return focusableEl;
        } else {
          return utils.setFocusNextFocusableEl(nextSiblingEl);
        }
      } else {
        const parentEl = el.parentElement;

        if (parentEl === document.body) {
          return null;
        } else {
          return utils.setFocusNextFocusableEl(parentEl);
        }
      }
    },
    getMobileOS() {
      const userAgent = navigator.userAgent;

      if (/android/i.test(userAgent)) {
        return 'android';
      } else if (/iPad|iPhone|iPod|iPad Simulator|iPhone Simulator|iPod Simulator/.test(userAgent)
        || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) {
        return 'ios';
      }

      return 'other';
    },

    getStickyNavHeightPromise(async = false) {
      const floatTargetClassArray = [
        '.explore-lnb-navigation .explore-lnb.sticky-nav', 
        '.nv07-explore-floating-navigation.use-sticky-nav',
        '.floating-navigation.floating-navigation--fixed',
        '.nv14-visual-lnb__container.sticky',
        '.lnb-nav.lnb-nav--sticky.lnb-nav--fixed',
        '.sticky-navigation-text.is-fixed',
      ];

      const promises = [];
      let stickyHeight = null;

      floatTargetClassArray.forEach((elementClass) => {
        const floatTarget = document.querySelector(elementClass);
        if (floatTarget && floatTarget.offsetWidth > 0 && floatTarget.offsetHeight > 0) {
          if (async) {
            const promise = new Promise((resolve) => {
              let stickyHeight  = null;
              let prevOffsetHeight = floatTarget.offsetHeight;
              const interval = setInterval(() => {
                if (floatTarget.offsetHeight === prevOffsetHeight) {
                  clearInterval(interval);
                  stickyHeight = stickyHeight + floatTarget.offsetHeight;
                  resolve(stickyHeight);
                } else {
                  prevOffsetHeight = floatTarget.offsetHeight;
                }
              }, 100);
            });
            promises.push(promise);
          } else {
            stickyHeight = stickyHeight + floatTarget.offsetHeight;
          }
        }
      });

      if (async) {
        return Promise.allSettled(promises);
      } else {
        return stickyHeight;
      }
    },

    scrollHash() {
      const hashId = window.location.hash.trim().replace('#', '');
      if (document.getElementById(hashId)) {
        utils.getStickyNavHeightPromise(true).then((result) => {
          let stickyHeight = null;
          result.forEach((obj) => {
            stickyHeight = stickyHeight + obj.value;
          });
          window.scrollTo(0, document.getElementById(hashId).offsetTop - stickyHeight);
        });
      }
    },
  };

  const events = {
    hashChange() {
      window.removeEventListener('hashchange', window.sg.common.utils.scrollHash);
      window.addEventListener('hashchange', window.sg.common.utils.scrollHash);
    },
  };

  window.sg.common.constants = constants;
  window.sg.common.utils = utils;
  window.sg.common.bindEvents = events;

  window.sg.common.bindEvents.hashChange();
})();

(() => {
  const componentClasses = {};
  const { extend, closest } = window.sg.common.utils;

  class Base {
    constructor(el, options = {}) {
      if (!el || el.nodeType !== Node.ELEMENT_NODE) {
        throw new TypeError('Element should be given to initialize.');
      }

      this.el = el;

      this.options = {
        isRoot: true,
        shouldInitChildren: true,
      };

      extend(this.options, options);

      this.children = new Map();

      this.init();
      this.constructor.instances.set(this.el, this);
    }

    static create(el, options) {
      return this.instances.get(el) || new this(el, options);
    }

    init() {
      if (this.options.isRoot && this.options.shouldInitChildren) {
        this._initChildren();
      }

      this._init();
    }

    _initChildren() {
      const innerEls = this._getChildEls();
      innerEls.forEach((el) => this._initChild(el));
    }

    _getChildEls() {
      const childEls = Array.from(this.el.querySelectorAll('[data-comp-name]'));

      childEls.sort((a, b) => {
        if (a === b) {
          return 0;
        }

        const position = a.compareDocumentPosition(b);

        if (position & 4 || position & 16) {
          return 1;
        } else if (position & 2 || position & 8) {
          return -1;
        } else {
          return 0;
        }
      });

      return childEls;
    }

    _initChild(el) {
      const Cls = componentClasses[el.getAttribute('data-comp-name')];

      if (!Cls) {
        return;
      }

      let instance;

      if (Cls.create && typeof Cls.create === 'function') {
        instance = Cls.create(el, { isRoot: false });
      } else {
        if (Cls.instances && Cls.instances.has(el)) {
          instance = Cls.instances.get(el);
        } else {
          instance = new Cls(el);
        }
      }

      this.children.set(el, instance);
    }

    _init() {}

    reInit() {
      if (this.options.isRoot) {
        this._reInitChildren();
      }

      this._reInit();

      if (this.options.isRoot) {
        window.sg.common.lazyLoad.setLazyLoad();
      }
    }

    _reInitChildren() {
      this.children.forEach((instance, el) => {
        if (!this.el.contains(el)) {
          if (instance.destroy && typeof instance.destroy === 'function') {
            instance.destroy();
          }

          this.children.delete(el);
        }
      });

      const innerEls = this._getChildEls();
      innerEls.forEach((el) => this._reInitChild(el));
    }

    _reInitChild(el) {
      if (this.children.has(el)) {
        const instance = this.children.get(el);

        if (instance.reInit && typeof instance.reInit === 'function') {
          instance.reInit();
        }
      } else {
        this._initChild(el);
      }
    }

    _reInit() {}

    update() {
      if (this.options.isRoot) {
        this._updateChildren();
      }

      this._update();

      if (this.options.isRoot) {
        window.sg.common.lazyLoad.setLazyLoad();
      }
    }

    _updateChildren() {
      this.children.forEach((instance, el) => {
        if (this.el.contains(el)) {
          if (instance.update && typeof instance.update === 'function') {
            instance.update();
          }
        }
      });
    }

    _update() {}

    destroy() {
      this.children.forEach((instance, el) => {
        if (instance.destroy && typeof instance.destroy === 'function') {
          instance.destroy();
        }

        this.children.delete(el);
      });

      this.children = null;
      this._destroy();
      this.constructor.instances.delete(this.el);
    }

    _destroy() {}
    
    getChild(el) {
      if (this.children && this.children.has(el)) {
        return this.children.get(el);
      } else {
        if (this.el.contains(el)) {
          const Cls = componentClasses[el.getAttribute('data-comp-name')];
          if (Cls && Cls.instances && Cls.instances.has(el)) {
            return Cls.instances.get(el);
          }
        }
      }
    }

    emit(type, data, shouldBubble = false) {
      let event;

      if (typeof CustomEvent === 'function') {
        event = new CustomEvent(type, {
          bubbles: shouldBubble,
          detail: data,
        });
      } else {
        event = document.createEvent('CustomEvent');
        event.initCustomEvent(type, shouldBubble, false, data);
      }

      this.el.dispatchEvent(event);
    }

    listen(type, handler, option) {
      this.el.addEventListener(type, handler, option);
    }

    unListen(type, handler, option) {
      this.el.removeEventListener(type, handler, option);
    }
  }

  Base.instances = new WeakMap();

  const create = (el, options) => {
    const name = el.getAttribute('data-comp-name');

    if (!name || !componentClasses[name]) {
      throw new ReferenceError('Component class should be registered.');
    }

    const Cls = componentClasses[name];
    if (Cls && (Cls === Base || Cls.prototype instanceof Base)) {
      return Cls.create(el, options);
    }
  };

  const registerClass = (name, Cls) => {
    componentClasses[name] = Cls;

    if (Cls === Base || Cls.prototype instanceof Base) {
      let componentEls = Array.from(document.querySelectorAll(`[data-comp-name="${name}"]:not([data-auto-init="false"])`));
      componentEls = componentEls.filter((el) => !closest(el.parentElement, '[data-comp-name]'));

      const initComponents = () => componentEls.forEach((el) => create(el));

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initComponents);
      } else {
        initComponents();
      }
    }
  };

  const unRegisterClass = (name) => {
    componentClasses[name] = null;
    delete componentClasses[name];
  };

  const getClass = (name) => componentClasses[name];

  registerClass('base', Base);

  extend(window.sg.components, {
    create,
    registerClass,
    unRegisterClass,
    getClass,
    Base,
  });
})();

(() => {
  // let mutationObserver = null;
  const handlers = [];

  const register = (handler) => {
    if (typeof handler === 'function') {
      if (handlers.indexOf(handler) === -1) {
        handlers.push(handler);
      }
    }
  };

  const unRegister = (handler) => {
    if (typeof handler === 'function') {
      const index = handlers.indexOf(handler);
      if (index > -1) {
        handler.splice(index, 1);
      }
    }
  };

  // const handleObserver = (mutations) => {
  //   mutations.forEach((mutation) => {
  //     [...mutation.removedNodes].forEach((node) => {
  //       if (node.nodeType === 1 &&
  //         (node.tagName.toLowerCase() === 'div' || node.tagName.toLowerCase() === 'section')) {
  //         handlers.forEach((handler) => {
  //           handler(node);
  //         });
  //       }
  //     });
  //   });
  // };

  // const initObserver = () => {
  //   if (typeof MutationObserver !== 'undefined') {
  //     mutationObserver = new MutationObserver(handleObserver);
  //     mutationObserver.observe(document, { childList: true, subtree: true });
  //   }
  // };

  // initObserver();

  const observer = {
    register,
    unRegister,
    test() {
      handlers.forEach((handler) => {
        handler(document);
      });
    },
    handlers,
  };

  window.sg.common.observer = observer;
})();

(() => {
  const libs = {
    // keyCode
    'keyCode': { 'TAB_KEY': 9,'ENTER': 13,'SPACE': 32,'PAGE_UP': 33,'PAGE_DOWN': 34,'END': 35 ,'HOME': 36,'LEFT': 37,'UP': 38,'RIGHT': 39,'DOWN': 40 },
    // object exted
    extend(de , add) {
      Object.keys(add).forEach((key) => {
        de[key] = add[key];
      });
      return de;
    },
  };

  /**
   * javascript selector libray
   * @class
   * @author  geuni
   */
  class Selector {
    constructor(element) {
      if (typeof element === 'object') {
        this.target = Array.isArray(element) ? element : [element];
      } else if (!element) {
        this.target = [];
      } else {
        this.target = Array.prototype.slice.call(document.querySelectorAll(element));
      }
    }

    /**
     * Get the descendants of each element in the current set of matched elements
     * @param {string} element containing a querySelector expression to match elements against.
     * @return  {instance}   (optional) return description...
     * @private
     */
    find (element) {
      let tarr = [];
      this.target.forEach((_target) => {
        tarr = tarr.concat(Array.prototype.slice.call(_target.querySelectorAll(element)));
      });

      return new Selector(tarr);
    }

    /**
     * Description...
     * @param {number} num  (optional) param description...
     * @return  {instance}   (optional) return description...
     * @private
     */
    eq(num) {
      const value = this.target[num];
      const temp = value ? [value] : '';
      return new Selector(temp);
    }

    /**
     * Description...
     * @return  {instance}   (optional) return description...
     * @private
     */
    parent() {
      if (this.target.length === 0) {
        return new Selector('');
      }

      const value = this.target[0].parentNode;
      const temp = value ? [this.target[0].parentNode] : '';
      return new Selector(temp);
    }

    /**
     * Description...
     * @param {string} selector=null  (optional) param description...
     * @return  {instance}   (optional) return description...
     * @private
     */
    children(selector = null) {
      let tarr = [];
      this.target.forEach((_target) => {
        if (selector) {
          tarr = tarr.concat(Array.prototype.slice.call(_target.querySelectorAll(selector)));
        } else {
          tarr = tarr.concat(Array.prototype.slice.call(_target.children));
        }
      });

      return new Selector(tarr);
    }

    /**
     * Description...
     * @param {string} selector  (optional) param description...
     * @return  {instance}   (optional) return description...
     * @private
     */
    closest(selector) {
      if (this.target.length === 0) {
        return this;
      } else if (!this.target[0].parentElement) {
        return new Selector([this.target]);
      }

      const rtnElement = [];
      const isQuery = typeof selector === 'string';

      function roop(current) {
        let matchCheck;
        if (current.matches) {
          matchCheck = current.matches(selector);
        } else if (current.webkitMatchesSelector) {
          matchCheck = current.webkitMatchesSelector(selector);
        } else {
          matchCheck = current.msMatchesSelector(selector);
        }

        if (matchCheck) {
          return current;
        } else if (current === document.body) {
          return null;
        }

        return current.parentNode !== null ? roop(current.parentNode) : null;
      }

      function roopEl(current) {
        if (current === selector) {
          return current;
        } else if (current === document.body) {
          return null;
        }

        return roopEl(current.parentNode);
      }

      this.target.forEach((element) => {
        const parent = isQuery ? roop(element) : roopEl(element);
        if (parent !== null) {
          rtnElement.push(parent);
        }
      });

      return new Selector(rtnElement);
    }

    /**
     * Description...
     * @return  {instance}   (optional) return description...
     * @private
     */
    siblings() {
      const siblingsFunc = (t) => [...t.parentElement.children].filter((e) => e !== t);
      return new Selector(siblingsFunc(this.target[0]));
    }

    setLayerFocus(firstStr, endStr, setTabIndex = true) {
      const selctor = {
        first: 'layer-popup__looping--first',
        end: 'layer-popup__looping--end',
      };

      const firstEl = this.find(firstStr);
      if (setTabIndex) {
        firstEl.attr('tabindex', 0);
      }
      firstEl.addClass('layer-popup__looping');

      if (!this.find(`.${selctor.first}`).target.length) {
        if (setTabIndex) {
          firstEl.prepend(`<button class="${selctor.first} hidden"></button>`);
        } else {
          this.target[0].insertAdjacentHTML('afterbegin', `<button class="${selctor.first} hidden"></button>`);
        }
      }

      const endEl = this.find(endStr);
      if (!this.find(`.${selctor.end}`).target.length) {
        if (setTabIndex) {
          endEl.after(`<button class="${selctor.end} hidden"></button>`);
        } else {
          this.append(`<button class="${selctor.end} hidden"></button>`);
        }
      }

      const loopingFirst = this.find(`.${selctor.first}`);
      const loopingEnd = this.find(`.${selctor.end}`);

      loopingFirst.off('focus').on('focus', () => {
        endEl.focus();
      });

      loopingEnd.off('focus').on('focus', () => {
        firstEl.focus();
      });

      firstEl.focus();
      // loopingFirst.focus();
    }

    /**
     * Description...
     * @private
     */
    offLayerFocus() {
      this.find('.layer-popup__looping').removeAttr('tabindex');
      this.find('.layer-popup__looping--first').off('focus').remove();
      this.find('.layer-popup__looping--end').off('focus').remove();
    }

    /**
     * css 스타일을 적용하거나 적용된 스타일 값을 얻어낸다.
     * @param {object|string} obj  ex) {left:10px} , get string style
     * @return  {string|null}   style value
     * @private
     */
    css(obj) {
      const el = this.target[0];
      if (!el) {
        return;
      }

      if (typeof obj === 'string') {
        return window.getComputedStyle(el)[obj];
      } else {
        this.target.forEach((element) => {
          Object.keys(obj).forEach((key) => {
            element.style[key] = obj[key];
          });
        });
      }
    }

    /**
     * display:block
     * @private
     */
    show() {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        $q(element).css({
          'display': 'block',
        });
      });
    }

    /**
     * display:none
     * @private
     */
    hide() {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        $q(element).css({
          'display': 'none',
        });
      });
    }

    /**
     * Description...
     * @param {string} pos (optional) param description...
     * @private
     */
    scrollTop(pos) {
      const el = this.target[0];
      if (!el) {
        return;
      }

      if (pos === undefined) {
        return el.scrollTop;
      } else {
        el.scrollTop = pos;
      }
    }

    /**
     * Description...
     * @author  kejmail
     * @param {object} css  get string style. ex) {left:'10px'}
     * @param {number} speed  미리세컨드 단위. ex) 1000
     * @param {string|undefined} easing=null  이징 https://www.w3schools.com/cssref/css3_pr_transition-timing-function.asp. ex) 'ease-in-out'
     * @param {function|undefined} callBack=null  애니메이션완료후 실행할 콜백함수
     * @private
     */
    animate(css, speed, easing = null, callBack = null) {
      if (typeof easing !== 'string') {
        callBack = easing;
        easing = null;
      }

      const eventName = ['webkitTransitionEnd' , 'oTransitionEnd' , 'otransitionend' , 'mozTransitionEnd', 'moztransitionend' , 'transitionend', 'transitionEnd'];

      this.target.forEach((element) => {
        const nowStyle = window.getComputedStyle(element);
        Object.keys(css).forEach((key) => {
          element.style[key] = nowStyle[key];
          // element.setAttribute( 'animate', 'true' );
        });

        const orgTransition = element.style.transition;
        element.style.transitionDuration = `${speed / 1000}s`;

        if (easing !== null) {
          element.style.transitionTimingFunction = easing;
        }

        ['o' , 'ms' , 'moz', 'webkit'].forEach((name) => {
          element.style[`${name}TransitionDuration`] = `${speed / 1000}s`;

          if (easing !== null) {
            element.style[`${name}transitionTimingFunction`] = easing;
          }
        });

        function complete(event) {
          if(event !== undefined && event.target !== element){
            return;
          }

          if (callBack !== null) {
            callBack(element);
          }

          element.style.transition = orgTransition;

          eventName.forEach((name) => {
            element.removeEventListener(name, complete);
            element.animateComplete = null;
            // element.removeAttribute( 'animate');
          });
        }

        element.animateComplete = complete;

        eventName.forEach((name) => {
          element.addEventListener(name, complete);
        });
      });

      setTimeout((() => {
        this.css(css);
      }).bind(this), 30);
    }

    /**
     * Description...
     * @return  {instance|null}   (optional) return description...
     * @private
     */
    finish(){
      const el = this.target[0];
      if (!el) {
        return;
      }

      const evt = document.createEvent('Event');

      ['webkitTransitionEnd' , 'oTransitionEnd' , 'otransitionend' , 'mozTransitionEnd', 'moztransitionend' , 'transitionend', 'transitionEnd'].forEach((event) => {
        evt.initEvent(event, false, true);
        this.target.forEach((element) => {
          element.dispatchEvent(evt);
        });
      });

      return this;
    }

    /**
     * Description...
     * @return  {instance}   (optional) return description...
     * @private
     */
    stop() {
      this.target.forEach((element) => {
        let i = 0;
        const style = window.getComputedStyle(element);
        while (element.style.length > i) {
          i++;
          const name = element.style[i - 1];
          if (name.indexOf('transition') > -1) continue;
          element.style[name] = style[name];
        }

        element.style.transitionDuration = '0s';

        ['o', 'ms', 'moz', 'webkit'].forEach((name) => {
          element.style[`${name}TransitionDuration`] = '0s';
        });

        const eventName = ['webkitTransitionEnd' , 'oTransitionEnd' , 'otransitionend' , 'mozTransitionEnd' , 'moztransitionend' , 'transitionend' , 'transitionEnd'];
        const eventFn = element.animateComplete;
        eventName.forEach((name) => {
          element.removeEventListener(name, eventFn);
          element.animateComplete = null;
          // element.removeAttribute( 'animate');
        });
      });

      return this;
    }

    /**
     * Description...
     * @return  {boolean}   (optional) return description...
     * @private
     */
    isAnimate() {
      return this.target.some((element) => {
        if (typeof element.animateComplete === 'function') return true;
      });
    }

    /**
     * Description...
     * @param {number} duration  (optional) param description...
     * @param {function} complete  (optional) param description...
     * @private
     */
    slideDown(duration, complete) {
      this.target.forEach((element) => {
        const orgHeight = element.style.height;

        const orgDisplay = element.style.display;
        element.style.display = 'block';

        const goHeight = window.getComputedStyle(element).height;
        element.style.height = '0px';

        const orgOverflow = element.style.overflow;
        element.style.overflow = 'hidden';


        function callBack() {
          element.style.display = orgDisplay;
          element.style.height = orgHeight;
          element.style.overflow = orgOverflow;

          if (complete !== undefined) {
            complete();
          }
        }

        this.css({
          overflow: 'hidden',
        });

        this.animate({
          height: goHeight,
        },
        duration, callBack);
      });
    }

    /**
     * Description...
     * @param {number} duration  (optional) param description...
     * @param {function} complete  (optional) param description...
     * @private
     */
    slideUp(duration, complete) {
      this.target.forEach((element) => {
        const orgCss = {
          height: element.style.height,
          overflow: element.style.overflow,
          padding: element.style.padding,
        };

        function callBack() {
          element.style.height = orgCss.height;
          element.style.overflow = orgCss.overflow;
          element.style.padding = orgCss.padding;

          if (complete !== undefined) {
            complete();
          }
        }

        element.style.height = window.getComputedStyle(element).height;

        setTimeout((() => {
          this.animate({
            overflow: 'hidden',
            height: '0px',
            paddingTop: '0px',
            paddingBottom: '0px',
          }, duration, callBack);
        }).bind(this), 30);
      });
    }

    /**
     * Description...
     * @return {number} (optional) return description...
     * @private
     */
    index() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      let index = 0;
      Array.prototype.slice.call(el.parentNode.children).forEach((ele , idx) => {
        if (el === ele) {
          index = idx;
        }
      });

      return index;
    }

    /**
     * position. a DOMRect object providing information about the size of an element and its position relative to the viewport.
     * @return {object|null} a DOMRect object
     * @private
     */
    offset() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      return el.getBoundingClientRect();
    }

    /**
     * size.
     * @return {number|null}  (optional) return description...
     * @private
     */
    width() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      const style = window.getComputedStyle(el);
      return el.offsetWidth - parseInt(style.paddingLeft, 10) - parseInt(style.paddingRight, 10) - parseInt(style.borderLeftWidth, 10) - parseInt(style.borderRightWidth, 10);
    }

    /**
     * Description...
     * @return {number|null}  (optional) return description...
     * @private
     */
    innerWidth() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      const style = window.getComputedStyle(el);
      return el.offsetWidth - parseInt(style.borderLeftWidth, 10) - parseInt(style.borderRightWidth, 10);
    }

    /**
     * Description...
     * @return {number|null}  (optional) return description...
     * @private
     */
    outerWidth() {
      // const style = window.getComputedStyle(this.target[0]);
      // return parseInt(style.width,10);
      const el = this.target[0];
      if (!el) {
        return;
      }

      return el.clientWidth;
    }

    /**
     * Description...
     * @return {number|null}  (optional) return description...
     * @private
     */
    height() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      const style = window.getComputedStyle(el);
      return el.offsetHeight - parseInt(style.paddingTop, 10) - parseInt(style.paddingBottom, 10) - parseInt(style.borderTopWidth, 10) - parseInt(style.borderBottomWidth, 10);
    }

    /**
     * Description...
     * @return {number|null}  (optional) return description...
     * @private
     */
    innerHeight() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      const style = window.getComputedStyle(el);
      return el.offsetHeight - parseInt(style.borderTopWidth, 10) - parseInt(style.borderBottomWidth, 10);
    }

    /**
     * Description...
     * @return {number|null}  (optional) return description...
     * @private
     */
    outerHeight() {
      const el = this.target[0];
      if (!el) {
        return;
      }

      return el.clientHeight;
    }

    /**
     * Description...
     * @return {boolean}  (optional) return description...
     * @private
     */
    isImageLoad() {
      return (this.target[0].naturalWidth > 0 && this.target[0].naturalHeight) ? true : false;
    }

    /**
     * Description...
     * @return {boolean}  (optional) return description...
     * @private
     */
    hasClass(className) {
      const el = this.target[0];
      if (!el) {
        return;
      }

      return new RegExp(`(\\s|^)${className}(\\s|$)`).test(el.className);
    }

    /**
     * Description...
     * @param {string} className (optional) param description...
     * @private
     */
    addClass(className) {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        element.classList.add(className);
      });
    }

    /**
     * Description...
     * @param {string} className (optional) param description...
     * @private
     */
    removeClass(className) {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        element.classList.remove(className);
      });
    }

    /**
     * Description...
     * @param {string} className (optional) param description...
     * @private
     */
    toggleClass(className) {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        element.classList.toggle(className);
      });
    }

    /**
     * attribute control
     * @param {string} attribute (optional) param description...
     * @param {string} value (optional) param description...
     * @return  {instance|null}   (optional) return description...
     * @private
     */
    attr(attribute , value) {
      if (!this.target){
        return;
      }

      const arg = arguments.length;
      if (arg > 1) {
        this.target.forEach((element) => {
          if (!element.setAttribute) {
            return;
          }

          element.setAttribute(attribute, value);
        });
      } else {
        const ele = this.target[0];
        if (ele) {
          return ele.getAttribute(attribute);
        } else {
          return false;
        }
      }

      return this;
    }

    /**
     * Description...
     * @param {string} attribute (optional) param description...
     * @private
     */
    removeAttr(attribute) {
      if (!this.target) {
        return;
      }

      this.target.forEach((element) => {
        element.removeAttribute(attribute);
      });
    }

    /**
     * text control
     * @param {string} string (optional) param description...
     * @private
     */
    text(string) {
      this.target.forEach((element) => {
        element.textContent = string;
      });
    }

    /**
     * Description...
     * @param {string} str (optional) param description...
     * @private
     */
    innerHTML(str) {
      if (!this.target) {
        return;
      }
      this.target[0].innerHTML = str;
    }

    /**
     * html element insert
     * @param {array|string} insert (optional) param description...
     * @private
     */
    append(insert) {
      this.target.forEach((element) => {
        if (Array.isArray(insert)) {
          insert.forEach((add) => {
            if (typeof add === 'string') {
              element.insertAdjacentHTML('beforeend', add);
            } else {
              element.appendChild(add);
            }
          });
        } else {
          if (typeof insert === 'string') {
            element.insertAdjacentHTML('beforeend', insert);
          } else {
            element.appendChild(insert);
          }
        }
      });
    }

    /**
     * html element insert
     * @param {array|string} insert (optional) param description...
     * @private
     */
    after(insert) {
      this.target.forEach((element) => {
        if (Array.isArray(insert)) {
          insert = [...insert].reverse();
          insert.forEach((add) => {
            if (typeof add === 'string') {
              element.insertAdjacentHTML('afterend', add);
            } else {
              element.insertAdjacentElement('afterend', add);
            }
          });
        } else {
          if (typeof insert === 'string') {
            element.insertAdjacentHTML('afterend', insert);
          } else {
            element.insertAdjacentElement('afterend', insert);
          }
        }
      });
    }

    /**
     * html element insert
     * @param {array|string} insert (optional) param description...
     * @private
     */
    prepend(insert) {
      this.target.forEach((element) => {
        if (Array.isArray(insert)) {
          insert.forEach((add) => {
            if (typeof add === 'string') {
              element.insertAdjacentHTML('beforebegin', add);
            } else {
              if (add) {
                element.insertBefore(add , element.firstChild);
              }
            }
          });
        }else{
          if (typeof insert === 'string') {
            element.insertAdjacentHTML('beforebegin', insert);
          } else {
            if (insert) {
              element.insertBefore(insert, element.firstChild);
            }
          }
        }
      });
    }

    before(){}

    /**
     * Description...
     * @return {array|null} (optional) return description...
     * @private
     */
    clone() {
      if (!this.target[0]) {
        return;
      }

      const arr = [];
      this.target.forEach((element) => {
        arr.push(element.cloneNode(true));
      });

      return arr;
    }

    /**
     * Description...
     * @private
     */
    remove() {
      if (!this.target[0]) {
        return;
      }

      this.target.forEach((element) => {
        element.parentNode.removeChild(element);
      });
    }

    /**
     * Description...
     * @return {instance|null} (optional) return description...
     * @private
     */
    focus(){
      const el = this.target[0];
      if (! el || !el.focus) {
        return;
      }

      el.focus();

      return this;
    }

    /**
     * Description...
     * @return {array|null} (optional) return description...
     * @private
     */
    blur(){
      const el = this.target[0];
      if (!el) {
        return;
      }

      el.blur();

      return this;
    }

    /**
     * bind
     * @private
     */
    on(event, handler) {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        if (!Selector.instances.has(element)) {
          Selector.instances.set(element, {
            event: [],
            handler: [],
          });
        }

        Selector.instances.get(element).handler.push({
          'event': event,
          'handler': handler,
        });

        element.addEventListener(event, handler);
      });
    }

    /**
     * bind off
     * @param {string} event (optional) param description...
     * @param {function} handler (optional) param description...
     * @return {instance|null} (optional) return description...
     * @private
     */
    off(event, handler) {
      const el = this.target;
      if (!el) {
        return;
      }

      el.forEach((element) => {
        if (Selector.instances.has(element)) {
          const object = Selector.instances.get(element);

          if (event && handler) {
            const tarr = [];
            object.handler.forEach((obj) => {
              if (obj.event === event && obj.handler === handler) {
                element.removeEventListener(obj.event, obj.handler);
              } else {
                tarr.push({
                  'event': obj.event,
                  'handler': obj.handler,
                });
              }
            });

            object.handler = tarr;
          } else if (event) {
            const tarr = [];
            object.handler.forEach((obj) => {
              if (obj.event === event && element !== window) {
                element.removeEventListener(obj.event, obj.handler);
              } else {
                tarr.push({
                  'event': obj.event,
                  'handler': obj.handler,
                });
              }
            });

            object.handler = tarr;
          }else{
            if (element !== window) {
              object.handler.forEach((obj) => {
                element.removeEventListener(obj.event, obj.handler);
              });

              object.handler = [];
            }
          }
        }
      });
      return this;
    }

    /**
     * event trigger ie11 support
     * @param {string} event (optional) param description...
     * @private
     */
    trigger(event) {
      const el = this.target[0];
      if (!el) {
        return;
      }

      const evt = document.createEvent('Event');
      evt.initEvent(event, false, true);
      this.target.forEach((element) => {
        element.dispatchEvent(evt);
      });

      // el.dispatchEvent(evt);
    }

    /**
     * 바디 스크롤 혹은 태그 내 스크롤을 원하는 위치로 이동 (Move the body scroll or scroll within the tag to the desired position)
     * @author eunji park
     * @param {number} movePos ex) 500 , 픽셀(px) 단위
     * @param {number} delayTime=500 ex) 1000 , 미리세컨드(ms) 단위
     * @param {function} callBack=null 애니메이션 이후 실행할 콜백 (after scroll callback)
     * @return {boolean|null} (optional) return description...
     * @private
     */
    moveScroll(movePos, delayTime = 500, callBack = null) {
      const startTime = new Date().getTime();
      if (this.target.length === 0) {
        return false;
      }
      if (this.target[0].tagName !== 'HTML' && this.target[0].tagName !== 'BODY') {
        const endScrollPosition = movePos;
        const scrollingElement = this.target[0];
        const startPos = scrollingElement.scrollTop;
        const distance = endScrollPosition - startPos;
        const timeInMS = delayTime;
        const ratio = Math.ceil(Math.abs(distance) / Math.ceil(timeInMS / 16));

        requestAnimationFrame(function animate() {
          const now = new Date().getTime() - startTime;
          let movePos2 = 0;

          if (distance > 0) {
            movePos2 = scrollingElement.scrollTop + ratio;
            scrollingElement.scrollTop = scrollingElement.scrollTop > endScrollPosition ? endScrollPosition : movePos2;
          } else {
            movePos2 = scrollingElement.scrollTop - ratio;
            scrollingElement.scrollTop = scrollingElement.scrollTop < endScrollPosition ? endScrollPosition : movePos2;
          }

          if (now <= timeInMS) {
            requestAnimationFrame(animate);
          } else {
            if (distance > 0) {
              if (scrollingElement.scrollTop < endScrollPosition) {
                scrollingElement.scrollTop = endScrollPosition;
              }
            } else {
              if (scrollingElement.scrollTop > endScrollPosition) {
                scrollingElement.scrollTop = endScrollPosition;
              }
            }

            if (callBack !== null) {
              callBack();
            }
          }
        });
      } else {
        const endScrollPosition = Math.round(movePos);
        const startPos = document.body.scrollTop || document.documentElement.scrollTop;
        const distance = endScrollPosition - startPos;
        const ratio = Math.ceil(Math.abs(distance) / (delayTime / 16));
        const left = document.body.scrollLeft || document.documentElement.scrollLeft;
        let oldTop = null;

        requestAnimationFrame(function animate() {
          const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
          if (oldTop === scrollTop) {
            if (callBack !== null) {
              callBack();
            }
            return;
          }

          let movePos2 = 0;

          if (distance > 0) {
            movePos2 = scrollTop + ratio;
            if (movePos2 > endScrollPosition) {
              movePos2 = endScrollPosition;
            }
          } else {
            movePos2 = scrollTop - ratio;
            if (movePos2 < endScrollPosition) {
              movePos2 = endScrollPosition;
            }
          }

          window.scrollTo(left, movePos2);
          oldTop = scrollTop;

          if (endScrollPosition !== movePos2) {
            requestAnimationFrame(animate);
          } else {
            if (callBack !== null) {
              callBack();
            }
          }
        });
      }
    }

    /**
     * 태그 내 스크롤X를 원하는 위치로 이동 (scroll within the tag to the desired position)
     * @author eunji85.kim
     * @param {number} movePos ex) 500 , 픽셀(px) 단위
     * @param {number} delayTime=500 ex) 1000 , 미리세컨드(ms) 단위
     * @param {function} callBack=null 애니메이션 이후 실행할 콜백 (after scroll callback)
     * @return {boolean|null} (optional) return description...
     * @private
     */
    moveScrollX(movePos, delayTime = 500, callBack = null) {
      const startTime = new Date().getTime();
      if (this.target.length === 0) {
        return false;
      }
      const endScrollPosition = movePos;
      const scrollingElement = this.target[0];
      const startPos = scrollingElement.scrollLeft;
      const distance = endScrollPosition - startPos;
      const timeInMS = delayTime;
      const ratio = Math.ceil(Math.abs(distance) / Math.ceil(timeInMS / 16));

      function finish(){
        scrollingElement.scrollLeft = endScrollPosition;
        if (callBack !== null) {
          callBack();
        }
      }

      requestAnimationFrame(function animate() {
        const now = new Date().getTime() - startTime;
        let movePos2 = 0;

        if (distance > 0) {
          movePos2 = scrollingElement.scrollLeft + ratio;
          if (scrollingElement.scrollLeft > endScrollPosition) {
            finish();
            return;
          } else {
            scrollingElement.scrollLeft = movePos2;
          }
        } else {
          movePos2 = scrollingElement.scrollLeft - ratio;
          if (scrollingElement.scrollLeft < endScrollPosition) {
            finish();
            return;
          } else {
            scrollingElement.scrollLeft = movePos2;
          }
        }

        if (now <= timeInMS) {
          requestAnimationFrame(animate);
        } else {
          if (distance > 0) {
            if (scrollingElement.scrollLeft < endScrollPosition) {
              finish();
            }
          } else {
            if (scrollingElement.scrollLeft > endScrollPosition) {
              finish();
            }
          }
        }
      });
    }
  }


  Selector.instances = new WeakMap();

  const $q = function(element) {
    return new Selector(element);
  };

  $q.ready = (handler) => {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handler);
    } else {
      handler();
    }
  };

  $q.load = (handler) => {
    document.addEventListener('readystatechange', (event) => {
      if (event.target.readyState === 'complete') {
        handler();
      }
    });
  };

  window.sg.common.libs = libs;
  window.sg.common.$q = $q;
})();

(() => {
  const isVerticalVisible = window.sg.common.utils.isVerticalVisible;
  const isHorizontalVisible = window.sg.common.utils.isHorizontalVisible;

  class LazyLoad {
    constructor(el = document) {
      this.el = el;
      this.lazyEls = [];
      this.active = false;
      this.disabled = false;
      this.init();
    }

    init() {
      this.setLazyLoad();
      this.bindEvents();
    }

    dispose() {
      this.el = null;
      this.lazyEls = [];
      this.unBindEvents();
    }

    setDisabled(disabled = true) {
      this.disabled = disabled;
      if (!disabled) {
        this.setLazyLoad();
      }
    }

    getEls() {
      if (this.el) {
        this.lazyEls = [...this.el.querySelectorAll('.lazy-load')];
      }
    }

    reInit() {
      this.active = false;
      this.disabled = false;
      this.setLazyLoad();
      this.unBindEvents();
      this.bindEvents();
    }

    handleLazyLoad() {
      this.setLazyLoad();
    }

    setLazyLoad(delay = 200) {
      const triggerLazyLoad = () => {
        if (!this.disabled) {
          this.getEls();
          this.lazyEls.forEach((el) => {
            this.load(el);

            if (this.lazyEls.length === 0) {
              this.unBindEvents();
            }
          });
        }
      };

      if (!this.active) {
        if (delay > 0) {
          this.active = true;
          setTimeout(() => {
            triggerLazyLoad();
            this.active = false;
          }, delay);
        } else {
          triggerLazyLoad();
        }
      }
    }

    setPreviewImageLoaded(el) {
      const loadPreviewImage = () => {
        if (!this.disabled) {
          if (isVerticalVisible(el)) {
            [...el.querySelectorAll('.image__preview')].forEach((imageEl) => {
              if (imageEl.classList.contains('lazy-load')) {
                this.loadImage(imageEl);
              }
            });

            document.removeEventListener('scroll', loadPreviewImage);
            window.removeEventListener('resize', loadPreviewImage);
            window.removeEventListener('orientationchange', loadPreviewImage);
          }
        }
      };

      document.addEventListener('scroll', loadPreviewImage);
      window.addEventListener('resize', loadPreviewImage);
      window.addEventListener('orientationchange', loadPreviewImage);
    }

    loadImmediately(el) {
      if (el.classList.contains('image__preview') || el.classList.contains('image__main') || el.classList.contains('image__hover-image--hover')) {
        this.loadImage(el);
      } else if (el.classList.contains('video')) {
        this.loadVideo(el);
      }

      if (el.classList.contains('image-v2')) {
        this.loadImage(el, 'all');
      }
    }

    setLazyLoadManually(el) {
      if (el.classList.contains('lazy-load-man')) {
        this.loadImmediately(el);
        el.classList.remove('lazy-load-man');
      } else {
        [...el.querySelectorAll('.lazy-load-man')].forEach((lazyEl) => {
          this.loadImmediately(lazyEl);
          lazyEl.classList.remove('lazy-load-man');
        });
      }
    }

    ignoreLazyLoadOnceUnder(el, scrollPos) {
      [...el.querySelectorAll('.lazy-load')].forEach((lazyEl) => {
        const curScrollPos = window.pageYOffset;
        const rect = lazyEl.getBoundingClientRect();

        if (rect.bottom + curScrollPos < scrollPos || rect.top + curScrollPos < scrollPos) {
          lazyEl.classList.add('lazy-load-ignore-once');
        }
      });
    }

    forceLoad(el) {
      if (el.classList.contains('lazy-load')) {
        this.loadImmediately(el);
      } else {
        [...el.querySelectorAll('.lazy-load')].forEach((lazyEl) => {
          this.loadImmediately(lazyEl);
        });
      }
    }

    load(el) {
      if (!el.classList.contains('lazy-load-ignore-once')) {
        if (isVerticalVisible(el)) {
          if (el.classList.contains('image__preview')) {
            this.loadImage(el);
          } else {
            if (isHorizontalVisible(el)) {
              if (el.classList.contains('image__main') || el.classList.contains('image__hover-image--hover')) {
                this.loadImage(el);
              } else if (el.classList.contains('video')){
                this.loadVideo(el);
              }
            }
          }
        }

        if (el.classList.contains('image-v2')) {
          if (isVerticalVisible(el)) {
            this.loadImage(el, 'preview');

            if (isHorizontalVisible(el)) {
              this.loadImage(el, 'main');
            }
          }
        }
      }

      el.classList.remove('lazy-load-ignore-once');
    }

    clearLazy(lazyEl) {
      if (lazyEl.classList.contains('image-v2')) {
        let isNotAllSet = false;

        [...lazyEl.querySelectorAll('img')].forEach((imageEl) => {
          if (imageEl.dataset.src) {
            isNotAllSet = true;
          }
        });

        if (isNotAllSet) {
          return;
        }
      }

      lazyEl.classList.remove('lazy-load');
      this.lazyEls = this.lazyEls.filter((el) => el !== lazyEl);
    }

    loadImage(imageEl, target = null) {
      const image = target ? window.sg.common.imagev2 : window.sg.common.image;
      if (image) {
        image.load(imageEl, target);
      }

      this.clearLazy(imageEl);
    }

    loadVideo(videoEl) {
      const video = window.sg.common.video;
      if (video) {
        video.load(videoEl);
      }

      this.clearLazy(videoEl);
    }

    bindEvents() {
      this.handleLazyLoad = this.handleLazyLoad.bind(this);

      document.addEventListener('scroll', this.handleLazyLoad);
      window.addEventListener('resize', this.handleLazyLoad);
      window.addEventListener('orientationchange', this.handleLazyLoad);
    }

    unBindEvents() {
      document.removeEventListener('scroll', this.handleLazyLoad);
      window.removeEventListener('resize', this.handleLazyLoad);
      window.removeEventListener('orientationchange', this.handleLazyLoad);
    }
  }

  LazyLoad.instance = null;

  /**
   * a common lazy load module used as window.sg.common.lazyLoad
   * @module window/sg/common/lazyLoad
   */
  const lazyLoad = {
    /**
     * Description...
     * @func initAll
     * @static
     */
    initAll() {
      if (LazyLoad.instance) {
        LazyLoad.instance.dispose();
        LazyLoad.instance = null;
      }

      LazyLoad.instance = new LazyLoad();
    },
    /**
     * Description...
     * @func reInit
     * @static
     */
    reInit() {
      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      } else {
        LazyLoad.instance.reInit();
      }
    },
    /**
     * Description...
     * @func setLazyLoad
     * @static
     */
    setLazyLoad() {
      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      }

      LazyLoad.instance.setLazyLoad(0);
    },
    /**
     * Description...
     * @func setPreviewImageLoaded
     * @param {HTMLElement} el (optional) param description...
     * @static
     */
    setPreviewImageLoaded(el) {
      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      }

      LazyLoad.instance.setPreviewImageLoaded(el);
    },
    /**
     * Description...
     * @func setLazyLoadManually
     * @param {HTMLElement} el (optional) param description...
     * @static
     */
    setLazyLoadManually(el) {
      if (!el) {
        return;
      }

      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      }

      LazyLoad.instance.setLazyLoadManually(el);
    },
    /**
     * Description...
     * @func ignoreLazyLoadOnceUnder
     * @param {HTMLElement} el (optional) param description...
     * @param {number} scrollPos (optional) param description...
     * @static
     */
    ignoreLazyLoadOnceUnder(el, scrollPos) {
      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      }

      LazyLoad.instance.ignoreLazyLoadOnceUnder(el, scrollPos);
    },
    /**
     * Description...
     * @func setDisabled
     * @param {boolean} disabled=true (optioanal) param description
     * @static
     */
    setDisabled(disabled = true) {
      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      }

      LazyLoad.instance.setDisabled(disabled);
    },
    /**
     * Description...
     * @func forceLoad
     * @param {HTMLElement} el (optional) param description...
     * @static
     */
    forceLoad(el) {
      if (!el) {
        return;
      }

      if (!LazyLoad.instance) {
        LazyLoad.instance = new LazyLoad();
      }

      LazyLoad.instance.forceLoad(el);
    },
  };

  window.sg.common.lazyLoad = lazyLoad;

  document.addEventListener('DOMContentLoaded', lazyLoad.initAll);
  if (document.readyState !== 'loading') {
    lazyLoad.initAll();
  }
})();

(() => {
  const getViewPort = window.sg.common.utils.getViewPort;
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;

  class Image {
    constructor(el) {
      this.els = {
        el,
        previewImgEl: null,
        mainImgEl: null,
      };

      this.device = '';
      this.maxWidth = '';
      this.dpr = '';
      this.init();
    }

    init() {
      if (Image.instances.has(this.els.el)) {
        return;
      }

      Image.instances.set(this.els.el, this);

      this.setElement();

      if (this.els.mainImgEl.complete && this.els.mainImgEl.naturalWidth !== 0) {
        this.handleLoad();
      }

      this.setResponsive();
      this.bindEvents();
    }

    setElement() {
      this.els.previewImgEl = this.els.el.querySelector('.image-v2__preview');
      this.els.mainImgEl = this.els.el.querySelector('.image-v2__main');
    }

    setResponsive() {
      const device = getCurrentDevice();
      const maxWidth = this.getCurrentMaxWidth();
      const dpr = this.getCurrentDpr();
      const isLazyLoad = this.els.el.classList.contains('lazy-load') || this.els.el.classList.contains('lazy-load-man');

      const setSrc = (el, src) => {
        if (isLazyLoad) {
          el.dataset.src = el.dataset.src === undefined ? '' : el.dataset.src;

          if (el.dataset.src.indexOf(src) < 0) {
            el.dataset.src = src;
          }
        } else {
          if (decodeURI(el.src).indexOf(src) < 0) {
            if (el === this.els.mainImgEl) {
              this.els.el.classList.remove('image-v2--main-loaded');
            }

            el.src = src;
          }
        }
      };

      if (this.els.previewImgEl && this.device !== device) {
        this.device = device;
        const src = this.els.previewImgEl.dataset[`${this.device}Src`];
        setSrc(this.els.previewImgEl, src);
        if (this.els.previewImgEl.dataset.desktopAlt) {
          if (this.device === 'desktop') {
            this.els.previewImgEl.setAttribute('alt', this.els.previewImgEl.dataset.desktopAlt);
          } else {
            this.els.previewImgEl.setAttribute('alt', this.els.previewImgEl.dataset.mobileAlt);
          }
        }
      }

      if (this.maxWidth !== maxWidth || this.dpr !== dpr) {
        this.maxWidth = maxWidth;
        this.dpr = dpr;
        const src = this.els.mainImgEl.dataset[`${this.maxWidth}w${this.dpr}xSrc`];
        setSrc(this.els.mainImgEl, src);
        if (this.els.mainImgEl.dataset.desktopAlt) {
          if (this.maxWidth === '360') {
            this.els.mainImgEl.setAttribute('alt', this.els.mainImgEl.dataset.mobileAlt);
          } else {
            this.els.mainImgEl.setAttribute('alt', this.els.mainImgEl.dataset.desktopAlt);
          }
        }
      }
    }

    load(target) {
      const setLoad = (el) => {
        if (el && el.dataset.src && decodeURI(el.src).indexOf(el.dataset.src) < 0) {
          if (el === this.els.mainImgEl) {
            this.els.el.classList.remove('image-v2--main-loaded');
          }

          el.src = el.dataset.src;
          el.removeAttribute('data-src');
        }
      };

      if (target === 'preview') {
        setLoad(this.els.previewImgEl);
      } else if (target === 'main') {
        setLoad(this.els.mainImgEl);
      } else {
        setLoad(this.els.previewImgEl);
        setLoad(this.els.mainImgEl);
      }
    }

    handleLoad() {
      this.els.el.classList.add('image-v2--main-loaded');
    }

    bindEvents() {
      this.setResponsive = this.setResponsive.bind(this);
      window.addEventListener('resize', this.setResponsive);

      this.handleLoad = this.handleLoad.bind(this);
      this.els.mainImgEl.addEventListener('load', this.handleLoad);
    }


    getCurrentMaxWidth() {
      const width = getViewPort().width;

      if (width < 768) {
        return '360';
      } else if (width >= 768 && width < 1366) {
        return '768';
      } else {
        return '1366';
      }
    }

    getCurrentDpr() {
      return window.devicePixelRatio < 1.5 ? 1 : 2;
    }
  }

  Image.instances = new WeakMap();

  const image = {
    initAll(el = document) {
      const init = (imageEl) => {
        if (!Image.instances.has(imageEl)) {
          new Image(imageEl);
        }
      };

      if (el !== document && el.classList && el.classList.contain('image-v2')) {
        init(el);
      } else {
        if (!el.querySelectorAll) {
          el = document;
        }

        [...el.querySelectorAll('.image-v2')].forEach((imageEl) => {
          init(imageEl);
        });
      }
    },
    load(el, target = 'all') {
      if (Image.instances.has(el)) {
        Image.instances.get(el).load(target);
      } else {
        new Image(el).load(target);
      }
    },
  };

  window.sg.common.imagev2 = image;

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', image.initAll);
  } else {
    image.initAll();
  }
})();

(() => {
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;
  const detectTransitionEndEvent = window.sg.common.utils.detectTransitionEndEvent;

  class Image {
    constructor(el) {
      this.el = el;
      this.init();
    }

    init() {
      if (Image.instances.has(this.el)) {
        return;
      }

      Image.instances.set(this.el, this);

      this.setElement();
      this.setResponsiveImage();
      this.bindEvents();
    }

    reInit() {
      this.unBindEvents();
      this.setElement();
      this.setResponsiveImage();
      this.bindEvents();
    }

    setElement() {
      if (!this.el.getAttribute('alt')) {
        this.el.setAttribute('alt', '');
        this.el.removeAttribute('role');
      }
    }

    destroy() {
      this.unBindEvents();

      if (Image.instances.has(this.el)) {
        Image.instances.delete(this.el);
      }

      this.el = null;
    }

    load() {
      if (decodeURI(this.el.src).indexOf(this.el.dataset.src) < 0) {
        this.el.src = this.el.dataset.src;

        this.el.classList.remove('image--loaded');
        this.el.classList.remove('image--hide');
        this.el.removeAttribute('aria-hidden');
      }

      this.el.removeAttribute('data-src');
    }

    setImageLoaded() {
      this.el.classList.add('image--loaded');

      if (this.el.classList.contains('image__main')) {
        this.el.style.transition = 'opacity .2s';

        this.el.parentElement.classList.add('image--main-loaded');

        const transitionEnded = () => {
          this.el.style.transition = '';

          const previewEl = this.el.parentElement.querySelector('.image__preview');

          if (previewEl) {
            previewEl.classList.add('image--hide');
            previewEl.setAttribute('aria-hidden', 'true');
          }
        };

        const transitionEndEvent = detectTransitionEndEvent(this.el);
        if (transitionEndEvent) {
          const handleTransitionEnd = () => {
            transitionEnded();
            this.el.removeEventListener(transitionEndEvent, handleTransitionEnd);
          };

          this.el.addEventListener(transitionEndEvent, handleTransitionEnd);
        } else {
          setTimeout(transitionEnded, 200);
        }
      }
    }

    bindImageLoad() {
      if (this.el.classList.contains('image__main')
        || this.el.classList.contains('image__preview')) {
        if (this.el.complete && this.el.naturalWidth !== 0
          && !this.el.classList.contains('image--loaded')) {
          this.setImageLoaded();
        }

        this.setImageLoaded = this.setImageLoaded.bind(this);
        this.el.addEventListener('load', this.setImageLoaded);
      }
    }

    bindResponsive() {
      // eslint-disable-next-line dot-notation
      if (this.el.dataset['desktopSrc'] !== this.el.dataset['mobileSrc']) {
        this.setResponsiveImage = this.setResponsiveImage.bind(this);
        window.addEventListener('resize', this.setResponsiveImage);
      }
    }

    bindEvents() {
      if (this.el.classList.contains('responsive-img')) {
        this.bindResponsive();
      }

      this.bindImageLoad();
    }

    unBindEvents() {
      this.el.removeEventListener('load', this.setImageLoaded);
      window.removeEventListener('resize', this.setResponsiveImage);
    }

    setResponsiveImage() {
      if (this.el.classList.contains('responsive-img')) {
        const device = getCurrentDevice();
        if (this.device !== device) {
          this.device = device;
          const src = this.el.dataset[`${this.device}Src`];

          if (!src) {
            this.el.style.display = 'none';
          } else {
            this.el.style.removeProperty('display');
          }

          if (this.el.classList.contains('lazy-load') || this.el.classList.contains('lazy-load-man')) {
            this.el.dataset.src = this.el.dataset.src === undefined ? '' : this.el.dataset.src;
            if (this.el.dataset.src.indexOf(src) < 0) {
              this.el.dataset.src = src;
            }
          } else {
            if (decodeURI(this.el.src).indexOf(src) < 0) {
              this.el.classList.remove('image--loaded');
              this.el.classList.remove('image--hide');
              this.el.removeAttribute('aria-hidden');
              this.el.src = src;
            }
          }

          const alt = this.el.dataset[`${this.device}Alt`];
          if (alt !== undefined) {
            this.el.setAttribute('alt', alt);
          }
        }
      }
    }
  }

  Image.instances = new WeakMap();
  window.sg.components.registerClass('image', Image);

  /**
   * a common image module used as window.sg.common.image
   * @module window/sg/common/image
   */
  const image = {
    /**
     * 모든 image 초기화
     * @func initAll
     * @static
     */
    initAll() {
      [...document.querySelectorAll('.image img:not([data-auto-init="false"])')].forEach((el) => {
        if (!Image.instances.has(el)) {
          new Image(el);
        }
      });
    },
    init(el) {
      if (!Image.instances.has(el)) {
        new Image(el);
      }
    },
    reInit(el) {
      if (Image.instances.has(el)) {
        Image.instances.get(el).reInit();
      } else {
        new Image(el);
      }
    },
    load(el) {
      if (Image.instances.has(el)) {
        Image.instances.get(el).load();
      } else {
        new Image(el).load();
      }
    },
    /**
     * image instance 삭제
     * @func delete
     * @param {HTMLElement} el image element
     * @static
     */
    delete(el) {
      Image.instances.delete(el);
    },
    destroy(el) {
      if (Image.instances.has(el)) {
        Image.instances.get(el).destroy();
      }
    },
  };

  window.sg.common.image = image;

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', image.initAll);
  } else {
    image.initAll();
  }
})();

(() => {
  const videoApi = {
    index: 0,
    isYoutubeReady: false,
    callbacks: [],
    enqueueOnYoutubeIframeApiReady: (callback) => {
      if (videoApi.isYoutubeReady) {
        callback();
      } else {
        videoApi.callbacks.push(callback);
      }
    },
    onYouTubeIframeApiReady: () => {
      videoApi.isYoutubeReady = true;
      videoApi.callbacks.forEach((callback) => {
        callback();
      });
      videoApi.callbacks.splice(0);
    },
  };

  window.sg.common.videoApi = videoApi;
  window.onYouTubeIframeAPIReady = videoApi.onYouTubeIframeApiReady;

  // const brightCoveData = {
  //   //'DEV': { accountId: '1752604059001', playerId: 'rJtrO8EKW' },
  //   'DEV': { accountId: '901961867001', playerId: 'Skefq0fEUZ' },
  //   // 'DEV': { accountId: '901961867001', playerId: 'Skefq0fEUZ' }, //v5.24.5
  //   // 'DEV2': { accountId: '901961867001', playerId: 'Vylv7fdWKl' }, //v5.11.4
  //   'LIVE': { accountId: '901973578001', playerId: 'rkHiJmE8b' },
  //   'LIVE2': { accountId: '901973578001', playerId: 'BJroFThOM' }, //v6.44.3
  //   'GLOBAL': { accountId: '2933392367001', playerId: 'HyinAQ4IW' },
  //   'EG': { accountId: '923162680001', playerId: 'r1Wa9zBQ8Z' },
  //   'CN': { accountId: '923270636001', playerId: 'SylXp4rXLb' },
  //   'PK': { accountId: '923227816001', playerId: 'rkx4vzBm8b' },
  //   'LEVANT': { accountId: '923227815001', playerId: 'BkuGfH7IZ' },
  //   'CO': { accountId: '923162663001', playerId: 'H1R4Pm7UW' },
  //   'SG': { accountId: '923162665001', playerId: 'Syz3FXQLW' },
  //   'VN': { accountId: '923136705001', playerId: 'ryMuHjmm8W' },
  //   'US': { accountId: '923227797001', playerId: 'B1lhu4BX8Z' },
  //   'HR': { accountId: '923270646001', playerId: 'rJ0SpNX8W' },
  //   'RS': { accountId: '923162676001', playerId: 'Skf0W64mUW' },
  //   'SI': { accountId: '3855502820001', playerId: 'ryKYpN7Lb' },
  //   'AT': { accountId: '923227809001', playerId: 'SJqA5VQUb' },
  //   'CH_FR': { accountId: '923227810001', playerId: 'SJH8oEQIW' },
  //   'CH': { accountId: '923162673001', playerId: 'SyIfiVmUZ' },
  //   'AR': { accountId: '923270634001', playerId: 'SkoYw7mLZ' },
  //   'PY': { accountId: '4455299568001', playerId: 'SyZFOmXIZ' },
  //   'UR': { accountId: '4455299570001', playerId: 'ryezNOmXUZ' },
  //   'AU': { accountId: '923162666001', playerId: 'H12xqm7Ub' },
  //   'NZ': { accountId: '923136704001', playerId: 'BJ7brcXm8W' },
  //   'EE': { accountId: '923227812001', playerId: 'rytC3E7LW' },
  //   'LV': { accountId: '923270644001', playerId: 'rylCU2NmLW' },
  //   'LT': { accountId: '923227813001', playerId: 'BkR5nNXUW' },
  //   'BE': { accountId: '923136716001', playerId: 'H1gxqi4Q8b' },
  //   'BE_FR': { accountId: '923162674001', playerId: 'rkERsVX8Z' },
  //   'NL': { accountId: '923136717001', playerId: 'SklAMhEQ8Z' },
  //   'JP': { accountId: '923162668001', playerId: 'H1elEC7Q8W' },
  //   'SEC': { accountId: '923136708001', playerId: 'BJmCHrmIb' },
  //   'CA': { accountId: '923270632001', playerId: 'BJ04MQXLb' },
  //   'CA_FR': { accountId: '923227798001', playerId: 'rkjclX78W' },
  //   'CL': { accountId: '923227801001', playerId: 'Sy8mK7Q8Z' },
  //   'CZ': { accountId: '923270642001', playerId: 'rJ1TKEXLW' },
  //   'SK': { accountId: '923227808001', playerId: 'rylQe94mIb' },
  //   'BR': { accountId: '923162661001', playerId: 'rkrg7XmUW' },
  //   'FR': { accountId: '923227807001', playerId: 'SkXZOV7Ub' },
  //   'GR': { accountId: '923136713001', playerId: 'HJZ0dEmUZ' },
  //   'DE': { accountId: '923227805001', playerId: 'HylzJLVQLW' },
  //   'HU': { accountId: '923270637001', playerId: 'H14LrEQLb' },
  //   'HK': { accountId: '923227804001', playerId: 'S1e6xSr7Ib' },
  //   'HK_EN': { accountId: '923136709001', playerId: 'BJnNrrmLZ' },
  //   'IT': { accountId: '923136712001', playerId: 'rkgapeE78W' },
  //   'ID': { accountId: '923162667001', playerId: 'ryx3c97XUZ' },
  //   'KZ_UR': { accountId: '923270647001', playerId: 'HJZfeBQLZ' },
  //   'LATIN': { accountId: '923136703001', playerId: 'BJxSu7XQUb' },
  //   'LATIN_EN': { accountId: '923227800001', playerId: 'r1WoKH7QIW' },
  //   'VE': { accountId: '923162662001', playerId: 'rJhxEsPMz' }, //v5.28.1
  //   'MX': { accountId: '923227799001', playerId: 'SJX05MXQUb' },
  //   'N_AFRICA': { accountId: '923227817001', playerId: 'ByImXr78W' },
  //   'DK': { accountId: '923270638001', playerId: 'Hyb1DEQ8W' },
  //   'FI': { accountId: '923162672001', playerId: 'HkUXD4XUZ' },
  //   'NO': { accountId: '923227806001', playerId: 'B1I2PVmLb' },
  //   'SE': { accountId: '923162671001', playerId: 'B1jKIVQ8b' },
  //   'PT': { accountId: '923270640001', playerId: 'SJburdEmUZ' },
  //   'PH': { accountId: '923136707001', playerId: 'r1Mnk67XUZ' },
  //   'PL': { accountId: '923270641001', playerId: 'BkjYdNQUZ' },
  //   'PE': { accountId: '923162664001', playerId: 'rkXuK77UZ' },
  //   'RU': { accountId: '923136718001', playerId: 'BkZBHJrXUW' },
  //   'BG': { accountId: '923270643001', playerId: 'r1cK5EmIW' },
  //   'RO': { accountId: '923136715001', playerId: 'r1gR45NXIZ' },
  //   'ES': { accountId: '923162670001', playerId: 'H1xJrNQUW' },
  //   'TW': { accountId: '923270635001', playerId: 'BywFHHmUZ' },
  //   'TR': { accountId: '923136721001', playerId: 'r175Zrm8Z' },
  //   'UA': { accountId: '923162678001', playerId: 'S1SKkrQIb' },
  //   'UA_RU': { accountId: '923162677001', playerId: 'B1Ba1rX8Z' },
  //   'IE': { accountId: '923136711001', playerId: 'B1DVe4m8Z' },
  //   'UK': { accountId: '923136710001', playerId: 'SycJx4QLW' },
  //   'AE': { accountId: '923227814001', playerId: 'BygNUlrX8b' },
  //   'AE_ARABIC': { accountId: '923136719001', playerId: 'BJjKlS7UZ' },
  //   'IN': { accountId: '923162669001', playerId: 'S1KRCQX8W' },
  //   'MY': { accountId: '923136706001', playerId: 'B1EqjmQIW' },
  //   'ZA': { accountId: '2571515531001', playerId: 'S1fb7VSQUb' },
  //   'AFRICA_EN': { accountId: '923270648001', playerId: 'HJKv7H7UZ' },
  //   'AFRICA_FR': { accountId: '923227818001', playerId: 'SkmimH7LZ' },
  //   'AFRICA_PT': { accountId: '923136723001', playerId: 'S1b8yEBXLb' },
  //   'IRAN': { accountId: '923270650001', playerId: 'r1YRZSmIZ' },
  //   'IL': { accountId: '923162679001', playerId: 'ryloagBXLb' },
  //   'SA': { accountId: '923136720001', playerId: 'HyItbbS7Ub' },
  //   'SA_EN': { accountId: '2571515532001', playerId: 'SJpHbr7Ub' },
  //   'TH': { accountId: '923227802001', playerId: 'ryoyiQXIZ' },
  //   'AL': { accountId: '5395474900001', playerId: 'S1WPmS4Rg' },
  //   'LB': { accountId: '5359769185001', playerId: 'By5uztNAe' },
  //   'MM': { accountId: '5395474902001', playerId: 'BJWPXt4Al' },
  //   'GCS': { accountId: '1852113008001', playerId: 'B1HX3oXbG' },
  //   'SC': { accountId: '1275380501001', playerId: 'rJUZMbBZG' },
  //   'LED': { accountId: '2172563229001', playerId: 'SJEqMbSWM' },
  //   'UK_CS': { accountId: '5675787969001', playerId: 'Hkmjd40bM' },
  //   'DE_CS': { accountId: '5675787970001', playerId: 'ByxCBuECZG' },
  //   'BE_CS': { accountId: '5675787971001', playerId: 'r1SZIVRWf' },
  //   'BE_FR_CS': { accountId: '5675787972001', playerId: 'r16xOECbz' },
  //   'NL_CS': { accountId: '5675788007001', playerId: 'HymXOVAWf' },
  //   'ACE': { accountId: '5685289444001', playerId: 'Byn7wEUzz' },
  //   'US_CS': { accountId: '5709700875001', playerId: 'SJC96gsNf' },
  //   'CA_FR_CS': { accountId: '5709700876001', playerId: 'rye60eiNG' },
  //   'CA_CS': { accountId: '5709700877001', playerId: 'BJJnCxi4z' },
  //   'MX_CS': { accountId: '5709700878001', playerId: 'SyFThbi4G' },
  //   'BR_CS': { accountId: '5709700879001', playerId: 'rypXhbjEf' },
  //   'LATIN_CS': { accountId: '5709700880001', playerId: 'rJ3qnZoVz' },
  //   'LATIN_EN_CS': { accountId: '5709700881001', playerId: 'rJSnnZjNz' },
  //   'VE_CS': { accountId: '5709700882001', playerId: 'HyyTnWo4M' },
  //   'CO_CS': { accountId: '5709700883001', playerId: 'B1sd6ejEf' },
  //   'AR_CS': { accountId: '5709700884001', playerId: 'ByGBCloVz' },
  //   'CL_CS': { accountId: '5709700885001', playerId: 'HyjTClsVf' },
  //   'PE_CS': { accountId: '5709700887001', playerId: 'H1qXpZs4z' },
  //   'SG_CS': { accountId: '5709700888001', playerId: 'BywY6goNz' },
  //   'AU_CS': { accountId: '5709700889001', playerId: 'rkZZPClsEf' },
  //   'NZ_CS': { accountId: '5709700890001', playerId: 'H1jD0xsVf' },
  //   'ID_CS': { accountId: '5709700891001', playerId: 'rJnOhZi4f' },
  //   'TH_CS': { accountId: '5711373553001', playerId: 'SkiJkGsNG' },
  //   'VN_CS': { accountId: '5711373555001', playerId: 'rJmcTxiEz' },
  //   'MY_CS': { accountId: '5711373556001', playerId: 'SJxYtAZiVG' },
  //   'PH_CS': { accountId: '5711373557001', playerId: 'BJ8M6Wj4M' },
  //   'TW_CS': { accountId: '5711373558001', playerId: 'rJxptpbo4f' },
  //   'JP_CS': { accountId: '5711373559001', playerId: 'Bk4j0ljVG' },
  //   'IN_CS': { accountId: '5711373560001', playerId: 'Sk7CdCZjNG' },
  //   'CN_CS': { accountId: '5711373561001', playerId: 'S1xr6gsNz' },
  //   'HK_CS': { accountId: '5711373562001', playerId: 'HJsUhboVf' },
  //   'HK_EN_CS': { accountId: '5711373563001', playerId: 'H1vvhboNf' },
  //   'IE_CS': { accountId: '5711373564001', playerId: 'HJgpICZjVM' },
  //   'IT_CS': { accountId: '5711373565001', playerId: 'H1Md2boEf' },
  //   'ES_CS': { accountId: '5711373566001', playerId: 'By1FaWoNG' },
  //   'HU_CS': { accountId: '5711373567001', playerId: 'Bye0rnZoVG' },
  //   'SE_CS': { accountId: '5711373568001', playerId: 'Skhl6biEf' },
  //   'DK_CS': { accountId: '5711373569001', playerId: 'HkxTRhWjVG' },
  //   'FI_CS': { accountId: '5711373571001', playerId: 'Bydk6ZiNM' },
  //   'NO_CS': { accountId: '5711373572001', playerId: 'rkMeTWjEz' },
  //   'FR_CS': { accountId: '5711373573001', playerId: 'S1ONnWs4G' },
  //   'PT_CS': { accountId: '5711373574001', playerId: 'rkZwWaWiVz' },
  //   'PL_CS': { accountId: '5711373575001', playerId: 'HyxXTWiVG' },
  //   'GR_CS': { accountId: '5711373576001', playerId: 'Hkx7S3WsNM' },
  //   'CZ_CS': { accountId: '5711373577001', playerId: 'SJOfnWjEf' },
  //   'SK_CS': { accountId: '5711373578001', playerId: 'rkm7hZoNG' },
  //   'RO_CS': { accountId: '5711373579001', playerId: 'Sk2D6ZoEG' },
  //   'BG_CS': { accountId: '5711373580001', playerId: 'BkzvaZjVG' },
  //   'AT_CS': { accountId: '5711373581001', playerId: 'SkaMRgjEz' },
  //   'CH_CS': { accountId: '5711373582001', playerId: 'SJumAxjEG' },
  //   'CH_FR_CS': { accountId: '5711373583001', playerId: 'BylOVAxoVM' },
  //   'LV_CS': { accountId: '5711373584001', playerId: 'B1CFCloEG' },
  //   'LT_CS': { accountId: '5711373585001', playerId: 'rytcRljEz' },
  //   'EE_CS': { accountId: '5711373586001', playerId: 'ryfYAljEG' },
  //   'RS_CS': { accountId: '5711373587001', playerId: 'Skmu3agsEf' },
  //   'HR_CS': { accountId: '5711373588001', playerId: 'Bkcials4G' },
  //   'RU_CS': { accountId: '5711373589001', playerId: 'BJxrLabiNz' },
  //   'UA_CS': { accountId: '5711373590001', playerId: 'SylNBRZiVG' },
  //   'UA_RU_CS': { accountId: '5711373592001', playerId: 'rygURWsNM' },
  //   'KZ_RU_CS': { accountId: '5711373593001', playerId: 'BJq31zoVG' },
  //   'AE_CS': { accountId: '5711373594001', playerId: 'HJgEORWiNz' },
  //   'AE_ARABIC_CS': { accountId: '5711373595001', playerId: 'H1ecP0biEG' },
  //   'IL_CS': { accountId: '5711373596001', playerId: 'SyyCCZs4G' },
  //   'SA_CS': { accountId: '5711373597001', playerId: 'Skd0AboVz' },
  //   'SA_EN_CS': { accountId: '5711373598001', playerId: 'BJfkyGoEM' },
  //   'TR_CS': { accountId: '5711373599001', playerId: 'Hku9aWi4M' },
  //   'IRAN_CS': { accountId: '5711373600001', playerId: 'HkVTCWjVz' },
  //   'LEVANT_CS': { accountId: '5711373601001', playerId: 'HkHwplo4M' },
  //   'PK_CS': { accountId: '5711373602001', playerId: 'S12rTgoEG' },
  //   'EG_CS': { accountId: '5711373603001', playerId: 'SkoQTljVG' },
  //   'N_AFRICA_CS': { accountId: '5711373604001', playerId: 'SyeMCnZjNG' },
  //   'AFRICA_EN_CS': { accountId: '5711373605001', playerId: 'By1sAbiVM' },
  //   'AFRICA_FR_CS': { accountId: '5711373606001', playerId: 'S1MhiRbjEf' },
  //   'AFRICA_PT_CS': { accountId: '5711373607001', playerId: 'SyZtnCbs4M' },
  //   'ZA_CS': { accountId: '5711373608001', playerId: 'SJNq0Wi4G' },
  //   'SI_CS': { accountId: '5711373609001', playerId: 'rJzfRxsVf' },
  //   'PY_CS': { accountId: '5711373610001', playerId: 'SkTHCgo4f' },
  //   'UR_CS': { accountId: '5711373612001', playerId: 'ByII0eiNf' },
  //   'LB_CS': { accountId: '5711373613001', playerId: 'HJK8TlsVz' },
  //   'AL_CS': { accountId: '5711373614001', playerId: 'HJjongoEf' },
  //   'MM_CS': { accountId: '5711373615001', playerId: 'rkyO6xiNM' },
  // };

  const brightCoveData = {
    'ACE': { accountId: '5685289444001', playerId: 'WO3Tb7i1g' },
    'AE': { accountId: '923227814001', playerId: 'YVPxrKSek' },
    'AE_ARABIC': { accountId: '923136719001', playerId: 'E3oao1olw' },
    'AE_ARABIC_CS': { accountId: '5711373595001', playerId: '9urZPAGHD' },
    'AE_CS': { accountId: '5711373594001', playerId: '0XMYguG2Nw' },
    'AFRICA_EN': { accountId: '923270648001', playerId: 'lsyG00Wz0' },
    'AFRICA_EN_CS': { accountId: '5711373605001', playerId: 't1guP7iYwy' },
    'AFRICA_FR': { accountId: '923227818001', playerId: 'Tmx2dzbrT' },
    'AFRICA_FR_CS': { accountId: '5711373606001', playerId: 'gLuvxDp4b' },
    'AFRICA_PT': { accountId: '923136723001', playerId: '1CZXrnviEE' },
    'AFRICA_PT_CS': { accountId: '5711373607001', playerId: 'azVZUTl7x' },
    'AL': { accountId: '5395474900001', playerId: 'oKHrt1Hn6' },
    'AL_CS': { accountId: '5711373614001', playerId: 'if48zX24H' },
    'AR': { accountId: '923270634001', playerId: 'gqJSxYCzB' },
    'AR_CS': { accountId: '5709700884001', playerId: 'ojd4uMnUWl' },
    'AT': { accountId: '923227809001', playerId: 'wnRfbwIVL' },
    'AT_CS': { accountId: '5711373581001', playerId: 'cGZtAkJpT' },
    'AU': { accountId: '923162666001', playerId: 'VMb9FyMxk' },
    'AU_CS': { accountId: '5709700889001', playerId: 'bB2vkQudw' },
    'BE': { accountId: '923136716001', playerId: 'LzbXypCvz' },
    'BE_CS': { accountId: '5675787971001', playerId: 'sEimKv7IW' },
    'BE_FR': { accountId: '923162674001', playerId: 'FleM4KQofp' },
    'BE_FR_CS': { accountId: '5675787972001', playerId: '7WhhmlxJj' },
    'BG': { accountId: '923270643001', playerId: 'Jo7zzVtd5' },
    'BG_CS': { accountId: '5711373580001', playerId: 'e6AWwoixf' },
    'BR': { accountId: '923162661001', playerId: 'v2BLpgM8d' },
    'BR_CS': { accountId: '5709700879001', playerId: 'qjm3J8bZLB' },
    'CA': { accountId: '923270632001', playerId: 'RUxsKbp4e' },
    'CA_CS': { accountId: '5709700877001', playerId: 'VCXS3jzBQ' },
    'CA_FR': { accountId: '923227798001', playerId: 'db9VQnzIIo' },
    'CA_FR_CS': { accountId: '5709700876001', playerId: 'Hghbkb4GOc' },
    'CH': { accountId: '923162673001', playerId: 'U0Tv0wE3G' },
    'CH_CS': { accountId: '5711373582001', playerId: 'wfkyW1T9N' },
    'CH_FR': { accountId: '923227810001', playerId: 'wvyBB7ZyD' },
    'CH_FR_CS': { accountId: '5711373583001', playerId: '8iaLX3eay' },
    'CL': { accountId: '923227801001', playerId: 'nbGAqWiyZ' },
    'CL_CS': { accountId: '5709700885001', playerId: 'seAio3Iab1' },
    'CN': { accountId: '923270636001', playerId: 'UOGt9s1Ot' },
    'CN_CS': { accountId: '5711373561001', playerId: '0polYNx0hB' },
    'CO': { accountId: '923162663001', playerId: 'VN3FsuEmoA' },
    'CO_CS': { accountId: '5709700883001', playerId: 'QkIcs4LRi' },
    'CZ': { accountId: '923270642001', playerId: 'JofGmsuUaU' },
    'CZ_CS': { accountId: '5711373577001', playerId: 'W4LcfRCdX' },
    'DE': { accountId: '923227805001', playerId: 'r5nOZyzd1' },
    'DEV': { accountId: '901961867001', playerId: 'jSPFC1gYrR' },
    'DE_CS': { accountId: '5675787970001', playerId: 'Ojq20h6rI' },
    'DK': { accountId: '923270638001', playerId: 'zThis2SPx' },
    'DK_CS': { accountId: '5711373569001', playerId: 'V6MCi9Amm' },
    'EE': { accountId: '923227812001', playerId: '89aGBrdO5' },
    'EE_CS': { accountId: '5711373586001', playerId: 'h1RB4WzC8h' },
    'EG': { accountId: '923162680001', playerId: 'KWJoclhcD' },
    'EG_CS': { accountId: '5711373603001', playerId: 't6vHuEvebf' },
    'ES': { accountId: '923162670001', playerId: 'yq8Y8zZ3dG' },
    'ES_CS': { accountId: '5711373566001', playerId: 'AzllJfpFb' },
    'FI': { accountId: '923162672001', playerId: 'B8mrwLnI6' },
    'FI_CS': { accountId: '5711373571001', playerId: '1d4N0XfEj' },
    'FR': { accountId: '923227807001', playerId: 'aACd9IQvK' },
    'FR_CS': { accountId: '5711373573001', playerId: 'wfmvyAQHg' },
    'GCS': { accountId: '1852113008001', playerId: 'b1SElAGyQ' },
    'GLOBAL': { accountId: '2933392367001', playerId: 'i8zNocbMqF' },
    'GR': { accountId: '923136713001', playerId: 'VXwt3KwO7' },
    'GR_CS': { accountId: '5711373576001', playerId: 'OHk0ZpVMG' },
    'HK': { accountId: '923227804001', playerId: 'BlUhaVyrM' },
    'HK_CS': { accountId: '5711373562001', playerId: 'rUnBOAERZ' },
    'HK_EN': { accountId: '923136709001', playerId: 'y80dQbj5o' },
    'HK_EN_CS': { accountId: '5711373563001', playerId: 'oiUmA2Dpb' },
    'HR': { accountId: '923270646001', playerId: 'rtDIMNREJ' },
    'HR_CS': { accountId: '5711373588001', playerId: '4dpG0kuPi' },
    'HU': { accountId: '923270637001', playerId: 'J3N8K2Ta8' },
    'HU_CS': { accountId: '5711373567001', playerId: 'xhpdyXZwQC' },
    'ID': { accountId: '923162667001', playerId: '8VQZlxO23' },
    'ID_CS': { accountId: '5709700891001', playerId: 'eS8Ygw9D5N' },
    'IE': { accountId: '923136711001', playerId: 'Eby5I5ug3' },
    'IE_CS': { accountId: '5711373564001', playerId: 'g2yJSJmLr' },
    'IL': { accountId: '923162679001', playerId: 'CNuem5Ud0' },
    'IL_CS': { accountId: '5711373596001', playerId: 'CuXrQqYtZ' },
    'IN': { accountId: '923162669001', playerId: 'q6Ut0BCj1' },
    'IN_CS': { accountId: '5711373560001', playerId: 'CcOagXw6na' },
    'IRAN': { accountId: '923270650001', playerId: 'z13tWzaxK' },
    'IRAN_CS': { accountId: '5711373600001', playerId: 'rLjx2H1MSc' },
    'IT': { accountId: '923136712001', playerId: 'JhjbQ74fF' },
    'IT_CS': { accountId: '5711373565001', playerId: 'YeJZJaeSW' },
    'JP': { accountId: '923162668001', playerId: '5syx1iggoU' },
    'JP_CS': { accountId: '5711373559001', playerId: '1pWQq0OoW' },
    'KZ_RU_CS': { accountId: '5711373593001', playerId: 'IjzGA4NhB' },
    'KZ_UR': { accountId: '923270647001', playerId: '1wWJHtrJL' },
    'LATIN': { accountId: '923136703001', playerId: 'Ejglgn7vR' },
    'LATIN_CS': { accountId: '5709700880001', playerId: 'xtj1AknXN' },
    'LATIN_EN': { accountId: '923227800001', playerId: 'PqDI8nhcAF' },
    'LATIN_EN_CS': { accountId: '5709700881001', playerId: 'BwUsVdHWJ' },
    'LB': { accountId: '5359769185001', playerId: 'I6JB29uKP' },
    'LB_CS': { accountId: '5711373613001', playerId: 'PF3r8iX45' },
    'LED': { accountId: '2172563229001', playerId: 'fZOTwR23Ja' },
    'LEVANT': { accountId: '923227815001', playerId: 'sNmJq2Rhtq' },
    'LEVANT_CS': { accountId: '5711373601001', playerId: 'S2BFseOxn' },
    'LIVE': { accountId: '901973578001', playerId: 'rkHiJmE8b' },
    'LIVE2': { accountId: '901973578001', playerId: 'BJroFThOM' },
    'LT': { accountId: '923227813001', playerId: 'UnNH8Q0aA' },
    'LT_CS': { accountId: '5711373585001', playerId: 'PLBhOXxqd' },
    'LV': { accountId: '923270644001', playerId: '8DWjAYXe8t' },
    'LV_CS': { accountId: '5711373584001', playerId: 'wVmguU4uL' },
    'MM': { accountId: '5395474902001', playerId: 'vF6OMxYpz' },
    'MM_CS': { accountId: '5711373615001', playerId: 'HRve5S5Wk' },
    'MX': { accountId: '923227799001', playerId: 'yWADI9eqWt' },
    'MX_CS': { accountId: '5709700878001', playerId: 'fMFwGNOoA' },
    'MY': { accountId: '923136706001', playerId: 'kkY3yWnfk2' },
    'MY_CS': { accountId: '5711373556001', playerId: 'TUr9f1ZrD' },
    'NL': { accountId: '923136717001', playerId: 'Lv58R1RvL' },
    'NL_CS': { accountId: '5675788007001', playerId: 'MKP6lFpdB' },
    'NO': { accountId: '923227806001', playerId: 'RtYYg3Lhz' },
    'NO_CS': { accountId: '5711373572001', playerId: 'lpa9BAvSi' },
    'NZ': { accountId: '923136704001', playerId: 'uc2rRn2xNM' },
    'NZ_CS': { accountId: '5709700890001', playerId: 'C200YutMY' },
    'N_AFRICA': { accountId: '923227817001', playerId: 'xMwGwNxoe' },
    'N_AFRICA_CS': { accountId: '5711373604001', playerId: 'trym9TQi9' },
    'PE': { accountId: '923162664001', playerId: 'QnLGOyhWT' },
    'PE_CS': { accountId: '5709700887001', playerId: '8g7eqsa4b' },
    'PH': { accountId: '923136707001', playerId: 'TPkcStHQq' },
    'PH_CS': { accountId: '5711373557001', playerId: 'XAANJvPl4I' },
    'PK': { accountId: '923227816001', playerId: 'KMGcvTLwI' },
    'PK_CS': { accountId: '5711373602001', playerId: 'ucBD9N7Wo' },
    'PL': { accountId: '923270641001', playerId: 'w6lBgsUzX' },
    'PL_CS': { accountId: '5711373575001', playerId: 'oimMVhVjJ' },
    'PT': { accountId: '923270640001', playerId: 'sdOVA4ZFD' },
    'PT_CS': { accountId: '5711373574001', playerId: 'coEoIreou' },
    'PY': { accountId: '4455299568001', playerId: 'DVT5m3yv2' },
    'PY_CS': { accountId: '5711373610001', playerId: 'Pog90o2pZ' },
    'RO': { accountId: '923136715001', playerId: 'Xpb5ogQRq' },
    'RO_CS': { accountId: '5711373579001', playerId: '7m3xl6r857' },
    'RS': { accountId: '923162676001', playerId: 'An8gNEU4n' },
    'RS_CS': { accountId: '5711373587001', playerId: 'XkZo8R4hQ' },
    'RU': { accountId: '923136718001', playerId: 'prEGLNvtgw' },
    'RU_CS': { accountId: '5711373589001', playerId: 'TGIYbAEj4' },
    'SA': { accountId: '923136720001', playerId: 'UGyvbSD4m' },
    'SA_CS': { accountId: '5711373597001', playerId: 'e8LeXD9z2' },
    'SA_EN': { accountId: '2571515532001', playerId: 'e1aY2iob1' },
    'SA_EN_CS': { accountId: '5711373598001', playerId: 'HMfJhv02t' },
    'SC': { accountId: '1275380501001', playerId: 'uOrcEND0S' },
    'SE': { accountId: '923162671001', playerId: '87s7LoiYm' },
    'SEC': { accountId: '923136708001', playerId: 'O0UmvJBBkC' },
    'SE_CS': { accountId: '5711373568001', playerId: 'YQAEzeCh7' },
    'SG': { accountId: '923162665001', playerId: 'VcCu1i5eGY' },
    'SG_CS': { accountId: '5709700888001', playerId: '1uAHw2z66' },
    'SI': { accountId: '3855502820001', playerId: '3iQ8u8kzHJ' },
    'SI_CS': { accountId: '5711373609001', playerId: 'aWXzB4G7Y' },
    'SK': { accountId: '923227808001', playerId: '6pYCGSOVM' },
    'SK_CS': { accountId: '5711373578001', playerId: 'DtyAUtIWf' },
    'TH': { accountId: '923227802001', playerId: 'GjtcZdzhG' },
    'TH_CS': { accountId: '5711373553001', playerId: 'jhV8EaiQ2P' },
    'TR': { accountId: '923136721001', playerId: 'eo4EiXfOZ6' },
    'TR_CS': { accountId: '5711373599001', playerId: 'uw0Vade3U' },
    'TW': { accountId: '923270635001', playerId: 'gB0Jrk4eC' },
    'TW_CS': { accountId: '5711373558001', playerId: 'zRLdsvdiUi' },
    'UA': { accountId: '923162678001', playerId: '1ZqNirAQQ' },
    'UA_CS': { accountId: '5711373590001', playerId: '1oPqU5Hja' },
    'UA_RU': { accountId: '923162677001', playerId: 'TNhyfS3s0z' },
    'UA_RU_CS': { accountId: '5711373592001', playerId: 'n355uJ5toG' },
    'UK': { accountId: '923136710001', playerId: 'Ta4g51Ongy' },
    'UK_CS': { accountId: '5675787969001', playerId: 'X4XabEZljp' },
    'UR': { accountId: '4455299570001', playerId: '6Sn4qURxs' },
    'UR_CS': { accountId: '5711373612001', playerId: 'SQg3bJxYB' },
    'US': { accountId: '923227797001', playerId: 'COJfPFSPz' },
    'US_CS': { accountId: '5709700875001', playerId: 'YtbrW77H5e' },
    'VE': { accountId: '923162662001', playerId: 'NGFTP7VzK' },
    'VE_CS': { accountId: '5709700882001', playerId: 't00eQogYI' },
    'VN': { accountId: '923136705001', playerId: 'V8VheyNOH' },
    'VN_CS': { accountId: '5711373555001', playerId: '4gy4Qw9sC' },
    'ZA': { accountId: '2571515531001', playerId: 'ohoOzqLWr' },
    'ZA_CS': { accountId: '5711373608001', playerId: 'lK2PT9hyDT' },
    'GLOBAL_NW': { accountId: '1832636967001', playerId: 'default' },
    'GLOBAL_CPS': { accountId: '1832636966001', playerId: 'HJ7xuijZz' },

  };

  const isVisible = window.sg.common.utils.isVisible;
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;
  // const setCookie = window.sg.common.utils.setCookie;
  const getCookie = window.sg.common.utils.getCookie;
  const triggerEvents = window.sg.common.utils.triggerEvent;

  class Video {
    constructor(el) {
      this.el = el;
      this.init();
    }

    initValues() {
      this.type = '';
      this.isEmbed = false;
      this.isLazyLoad = false;
      this.isScrollPlay = false;
      this.isResponsive = false;
      this.isScrollPlayBind = false;
      this.isResonsiveBind = false;
      this.option = {};

      this.defaultOption = {
        mp4: {
          videoEl: '<video class="video-player" playsinline><source src="" type="video/mp4"></video>',
          src: '',
          desktopSrc: '',
          mobileSrc: '',
          autoplay: false,
          muted: false,
          controls: false,
          loop: false,
          scrollplay: false,
        },
        youtube: {
          videoEl: '<iframe class="video-player" src=\'about:blank\' allowfullscreen allow="autoplay" sandbox="allow-scripts allow-same-origin allow-presentation" style="border: none;"></iframe>',
          src: 'https://www.youtube.com/embed/{{VIDEO_ID}}?wmode=opaque&rel=0&enablejsapi=1&version=3&origin={{ORIGIN}}',
          id: '',
          autoplay: false,
          muted: false,
        },
        brightCove: {
          countryCode: 'DEV',
          videoEl: '<video data-embed="default" controls class="video-js video-player"></video>',
          id: '',
          autoplay: false,
          muted: false,
        },
        aparat: {
          videoEl: '<iframe src=\'about:blank\' allowfullscreen style="border: none;"></iframe>',
          // src: 'https://www.aparat.com/video/video/embed/vt/frame/pid/0/showadstart/no/showvideo/yes/videohash/{{VIDEO_ID}}',
          src: 'https://www.aparat.com/video/video/embed/videohash/{{VIDEO_ID}}/vt/frame',
          liveSrc: '',
          autoplay: false,
        },
        url: {
          videoEl: '<iframe src=\'about:blank\' allowfullscreen style="border: none;"></iframe>',
          src: '',
        },
      };

      this.videoInfo = {};
      this.toVideoState = '';
      this.useDefaultImage = false;

      this.isLazyLoad = this.el.classList.contains('lazy-load') || this.el.classList.contains('lazy-load-man');
      // eslint-disable-next-line dot-notation
      this.isEmbed = this.el.dataset['videoEmbed'].toUpperCase() === 'TRUE';
      // eslint-disable-next-line dot-notation
      this.videoData = JSON.parse(this.el.dataset['videoData']);
      // eslint-disable-next-line dot-notation
      this.type = this.el.dataset['videoType'];
    }

    setElements() {
      this.setDefaultImage();

      if (!this.isLazyLoad && this.isEmbed) {
        this.setVideo();
      }
    }

    init() {
      if (Video.instances.has(this.el)) {
        return;
      }

      Video.instances.set(this.el, this);

      this.initValues();
      this.setElements();
    }

    reInit() {
      this.unBindEvents();
      this.dispose();
      this.initValues();
      this.setElements();
    }

    load() {
      if (this.isLazyLoad || !this.isEmbed) {
        this.setVideo();
      }
    }

    setDefaultImage() {
      const imageEl = this.el.querySelector('.image');
      if (imageEl) {
        // [...imageEl.querySelectorAll('img')].forEach((el) => {
        //   el.setAttribute('alt', this.videoData.title);
        // });
        imageEl.style.width = this.videoData.width ? this.videoData.width : '100%';
        imageEl.style.height = this.videoData.height ? this.videoData.height : '100%';
      }

      // eslint-disable-next-line dot-notation
      this.useDefaultImage = this.el.dataset['imageDefault'].toUpperCase() === 'TRUE';

      if (this.useDefaultImage) {
        // setCookie('__COM_SPEED', 'L', 1);
        const nwSpeed = getCookie('__COM_SPEED');

        if (nwSpeed === null || nwSpeed.toString().toUpperCase() !== 'L') {
          this.useDefaultImage = false;
        }
      }

      this.el.dataset.imageDefault = this.useDefaultImage.toString();

      if (imageEl) {
        if (this.useDefaultImage) {
          imageEl.classList.add('default-image--show');
        } else {
          imageEl.setAttribute('aria-hidden', 'true');
        }
      }
    }

    setVideo() {
      if (!this.useDefaultImage) {
        switch (this.type) {
        case 'mp4':
          this.setMp4(this.videoData);
          break;
        case 'youtube':
          this.setYoutube(this.videoData);
          break;
        case 'brightcove':
          this.setBrightCove(this.videoData);
          break;
        case 'aparat':
          this.setAparat(this.videoData);
          break;
        case 'url':
          this.setIframe(this.videoData);
          break;
        }

        triggerEvents(this.el, 'videoInit', this.type);
      }
    }

    setMp4(data) {
      const option = JSON.parse(JSON.stringify(this.defaultOption.mp4));
      const mp4VideoEl = this.getEl(option.videoEl, this.el);
      const sourceEl = mp4VideoEl.querySelector('source');

      this.videoInfo.el = mp4VideoEl;
      this.videoInfo.sourceEl = sourceEl;

      this.option = this.setOption(option, data);

      if (this.option.src !== '') {
        sourceEl.setAttribute('src', this.option.src);
      } else {
        this.setResponsiveVideo();
        this.isResponsive = true;

        if (!this.isResonsiveBind) {
          this.bindResponsive();
          this.isResonsiveBind = true;
        }
      }

      this.bindPlay();

      // if mp4, delete title attribute for accessibility
      // mp4VideoEl.setAttribute('title', this.option.title);
      mp4VideoEl.muted = this.option.muted;
      mp4VideoEl.autoplay = this.option.autoplay;
      mp4VideoEl.controls = this.option.controls;
      mp4VideoEl.loop = this.option.loop;

      if (this.isEmbed) {
        mp4VideoEl.disableRemotePlayback = true;
      }

      // for preventing default poster of android webview
      // mp4VideoEl.poster = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';

      if (this.option.scrollplay && this.isEmbed) {
        mp4VideoEl.preload = 'auto';
        mp4VideoEl.autoplay = false;
        this.videoInfo.state = 'stop';
        this.isScrollPlay = true;

        if (!this.isScrollPlayBind) {
          this.bindScrollPlay();
          this.isScrollPlayBind = true;
        }
      }

      mp4VideoEl.style.width = this.option.width ? this.option.width : '100%';
      mp4VideoEl.style.height = this.option.height ? this.option.height : '100%';

      this.setCaption(this.option.caption, mp4VideoEl);

      if (this.toVideoState === 'play') {
        this.playMp4Video();
      } else if (this.toVideoState === 'stop') {
        this.stopMp4Video();
      }

      this.toVideoState = '';
    }

    setPlayed() {
      if (!this.videoInfo.el.parentElement.classList.contains('video--played')) {
        this.videoInfo.el.parentElement.classList.add('video--played');
      }
    }

    bindPlay() {
      if (this.type === 'mp4') {
        this.setPlayed = this.setPlayed.bind(this);
        this.videoInfo.el.addEventListener('play', this.setPlayed);
      }
    }

    setScrollPlayVideo() {
      if (isVisible(this.videoInfo.el)) {
        if (this.videoInfo.state !== 'play' && this.videoInfo.el.readyState >= 1) {
          this.videoInfo.el.currentTime = 0;
          this.videoInfo.el.play();
          this.videoInfo.state = 'play';
        }
      } else {
        if (this.videoInfo.state === 'play' && this.videoInfo.el.readyState >= 1) {
          this.videoInfo.el.pause();
          this.videoInfo.state = 'pause';
        }
      }
    }

    bindScrollPlay() {
      if (this.type === 'mp4' && this.isScrollPlay) {
        this.setScrollPlayVideo = this.setScrollPlayVideo.bind(this);

        this.videoInfo.el.addEventListener('loadedmetadata', this.setScrollPlayVideo);
        document.addEventListener('scroll', this.setScrollPlayVideo);
        window.addEventListener('resize', this.setScrollPlayVideo);
        window.addEventListener('orientationchange', this.setScrollPlayVideo);

        this.setScrollPlayVideo();
      }
    }

    setResponsiveVideo() {
      const device = getCurrentDevice();
      if (!this.isEmbed || this.device !== device) {
        this.device = device;
        const src = this.option[`${this.device}Src`];
        if (this.videoInfo.sourceEl.src.indexOf(src) < 0) {
          this.videoInfo.sourceEl.src = src;
          this.videoInfo.el.load();
          if (this.isScrollPlay) {
            this.videoInfo.state = 'stop';
          }
        }
      }
    }

    bindResponsive() {
      if (this.type === 'mp4' && this.isResponsive) {
        this.setResponsiveVideo = this.setResponsiveVideo.bind(this);
        window.addEventListener('resize', this.setResponsiveVideo);
      }
    }

    unBindEvents() {
      if (this.videoInfo.el) {
        this.videoInfo.el.removeEventListener('play', this.setPlayed);
        this.videoInfo.el.removeEventListener('loadedmetadata', this.setScrollPlayVideo);
      }

      // this.videoInfo.el.removeEventListener('play', this.setPlayed);
      // this.videoInfo.el.removeEventListener('loadedmetadata', this.setScrollPlayVideo);

      document.removeEventListener('scroll', this.setScrollPlayVideo);
      window.removeEventListener('resize', this.setResponsiveVideo);
      window.removeEventListener('resize', this.setScrollPlayVideo);
      window.removeEventListener('orientationchange', this.setScrollPlayVideo);
    }

    destroy() {
      this.unBindEvents();
      this.dispose();

      if (Video.instances.has(this.el)) {
        Video.instances.delete(this.el);
      }

      this.el = null;
      this.videoInfo = null;
    }

    setYoutube(data) {
      const api = window.sg.common.videoApi;
      const option = JSON.parse(JSON.stringify(this.defaultOption.youtube));
      const youtubeVideoEl = this.getEl(option.videoEl, this.el);

      this.option = this.setOption(option, data);
      this.option.muted = data.muted !== undefined ? data.muted : this.option.autoplay;
      // this.option.src = `${this.option.src.replace('{{VIDEO_ID}}', this.option.id).replace('{{ORIGIN}}', window.location.origin)}&autoplay=${this.option.autoplay ? '1' : '0'}&mute=${this.option.autoplay ? '1' : '0'}`;

      this.option.src = `${this.option.src.replace('{{VIDEO_ID}}', this.option.id).replace('{{ORIGIN}}', window.location.origin)}&autoplay=${this.option.autoplay ? '1' : '0'}&mute=${this.option.muted ? '1' : '0'}`;
      const id = this.option.id + api.index++;

      youtubeVideoEl.setAttribute('id', id);
      youtubeVideoEl.setAttribute('src', this.option.src);
      youtubeVideoEl.setAttribute('title', this.option.title);
      youtubeVideoEl.style.width = this.option.width ? this.option.width : '100%';
      youtubeVideoEl.style.height = this.option.height ? this.option.height : '100%';

      this.setCaption(this.option.caption, youtubeVideoEl);

      const youTubeScript = document.createElement('script');
      youTubeScript.src = 'https://www.youtube.com/iframe_api';
      youTubeScript.classList.add('sg-youtube-api');

      const script = document.querySelector(`script[src="${youTubeScript.src}"]`);
      if (!script) {
        document.body.appendChild(youTubeScript);
      }

      const onPlayerReady = () => {
        if (this.toVideoState === 'play') {
          this.playYoutubeVideo();
        } else if (this.toVideoState === 'stop') {
          this.stopYoutubeVideo();
        }

        this.toVideoState = '';
      };

      api.enqueueOnYoutubeIframeApiReady(() => {
        // eslint-disable-next-line no-undef
        this.videoInfo.player = new YT.Player(id, {
          host: 'https://www.youtube.com',
          events: {
            'onReady': onPlayerReady,
          },
        });
      });
    }

    setBrightCove(data) {
      /*let style = '.vjs-menu li:focus{border:white dashed 1px}.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-control-bar,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-progress-control,.vjs-mouse.vjs-has-started.vjs-user-inactive .vjs-time-divider {transition-delay: 0s!important;-webkit-transition-delay: 0s!important;-moz-transition-delay: 0s!important;-ms-transition-delay: 0s!important;-o-transition-delay: 0s!important;}.vjs-big-play-button {top:0px!important; left:0px!important; right:0px!important; bottom:0px!important; margin:auto!important;}.vjs-big-play-button:focus { border:white dashed 1px }.vjs-play-control:focus{ border:white dashed 1px }.vjs-progress-holder:focus { border:white dashed 1px }.vjs-volume-menu-button:focus { border:white dashed 1px }.vjs-captions-button:focus { border:white dashed 1px }.vjs-fullscreen-control:focus { border:white dashed 1px }.vjs-volume-bar:focus{ border:white dashed 1px }.vjs-control-bar.ie8 {display:none !important;}.vjs-fade-out {display: block;visibility: hidden;opacity: 0;-webkit-transition: visibility 1.5s, opacity 1.5s;-moz-transition: visibility 1.5s, opacity 1.5s;-ms-transition: visibility 1.5s, opacity 1.5s;-o-transition: visibility 1.5s, opacity 1.5s;transition: visibility 1.5s, opacity 1.5s;-webkit-transition-delay: 2s;-moz-transition-delay: 2s;-ms-transition-delay: 2s;-o-transition-delay: 2s;transition-delay: 2s;}';
      style += '/!* for IE *!/ #brightCoveArea2 span {display:inline !important}/!* fix bc html5 player *!/#brightCoveArea2 .vjs-control-text{display:none !important;}.single-area.video-KV.on {max-height: 810px; overflow: hidden;}.vjs-big-play-button{left:0 !important; right:0 !important; top:0 !important; bottom:0 !important; margin: auto;}.vjs-playing .vjs-big-play-button{display:none !important;}.rtl .vjs-control-bar, .rtl .vjs-control-bar *{direction:ltr !important;}';

      const brightCoveStyle = document.createElement('style');
      brightCoveStyle.appendChild(document.createTextNode(style));
      document.getElementsByTagName('head')[0].appendChild(brightCoveStyle);*/

      const api = window.sg.common.videoApi;
      const option = JSON.parse(JSON.stringify(this.defaultOption.brightCove));
      const brightCoveVideoEl = this.getEl(option.videoEl, this.el);

      this.option = this.setOption(option, data);
      this.option.muted = data.muted !== undefined ? data.muted : this.option.autoplay;

      const countryCode = this.option.countryCode.toUpperCase();
      const id = this.option.id + api.index++;

      brightCoveVideoEl.setAttribute('id', id);
      brightCoveVideoEl.setAttribute('data-video-id', this.option.id);
      // if brightCove, delete title attribute for accessibility
      // brightCoveVideoEl.setAttribute('title', this.option.title);
      brightCoveVideoEl.setAttribute('data-account', brightCoveData[countryCode].accountId);
      brightCoveVideoEl.setAttribute('data-player', brightCoveData[countryCode].playerId);
      brightCoveVideoEl.style.width = this.option.width ? this.option.width : '100%';
      brightCoveVideoEl.style.height = this.option.height ? this.option.height : '100%';

      this.setCaption(this.option.caption, brightCoveVideoEl);

      const brightCoveScriptSrc = `https://players.brightcove.net/${brightCoveData[countryCode].accountId}/${brightCoveData[countryCode].playerId}_default/index.min.js`;

      const brightCoveScript = document.createElement('script');
      brightCoveScript.src = brightCoveScriptSrc;
      document.body.appendChild(brightCoveScript);

      brightCoveScript.onload = () => this.setBrightCovePlayer(id, this.option);
    }

    /** @suppress {undefinedVars} */
    setBrightCovePlayer(id, option) {
      // eslint-disable-next-line no-undef
      this.videoInfo.player = videojs(id);

      const setAutoPlay = () => {
        if (this.option.muted) {
          this.videoInfo.player.muted(true);
        }

        this.videoInfo.player.play();
      };

      const onPlayerReady = () => {
        if (this.toVideoState === 'play') {
          this.playBrightCoveVideo();
        } else if (this.toVideoState === 'stop') {
          this.stopBrightCoveVideo();
        }

        this.toVideoState = '';
      };

      /*const setAccessibility = () => {
        const vjs = document.querySelector(`#b-${id}`);
        //const vjsBigPlayButton = vjs.querySelector('.vjs-big-play-button');
        const vjsProgressHolder = vjs.querySelector('.vjs-progress-holder');
        const vjsProgressBar = vjs.querySelector('.vjs-tooltip-progress-bar');
        const vjsMenuButton = vjs.querySelectorAll('.vjs-menu-button');
        const vjsTextTrack = vjs.querySelector('.vjs-text-track-display');

        vjsProgressHolder.setAttribute('aria-valuenow', '0');
        vjsProgressBar.setAttribute('role', 'slider');
        vjsProgressBar.setAttribute('aria-valuemin', '0');
        vjsProgressBar.setAttribute('aria-valuemax', '100');
        vjsProgressBar.setAttribute('aria-valuenow', '0');
        vjsMenuButton.forEach((button) => button.setAttribute('role', 'menu'));
        vjsTextTrack.setAttribute('tabIndex', '0');

        if (vjs.classList.contains('vjs-v5')) {
          const uiFont = '.vjs-control-bar button { font-family: VideoJS !important; } .vjs-big-play-button { font-family: VideoJS !important; }';
          const style = document.createElement('style');
          style.appendChild(document.createTextNode(uiFont));
          document.getElementsByTagName('head')[0].appendChild(style);
        }
      };*/

      if (this.videoInfo.player.readyState() < 1) {
        if (option.autoplay) {
          // eslint-disable-next-line dot-notation
          this.videoInfo.player['on']('loadedmetadata', setAutoPlay);
        }

        // eslint-disable-next-line dot-notation
        this.videoInfo.player['on']('loadedmetadata', onPlayerReady);
      } else {
        if (option.autoplay) {
          setAutoPlay();
        }

        onPlayerReady();
      }

      // player.ready(setAccessibility);
    }

    setAparat(data) {
      const option = JSON.parse(JSON.stringify(this.defaultOption.aparat));
      const aparatVideoEl = this.getEl(option.videoEl, this.el);

      this.option = this.setOption(option, data);

      if (this.option.liveSrc) {
        this.option.src = this.option.liveSrc;
      } else {
        // this.option.src = `${this.option.src.replace('{{VIDEO_ID}}', this.option.id)}${this.option.autoplay ? '?data[as]=1' : ''}`;
        this.option.src = `${this.option.src.replace('{{VIDEO_ID}}', this.option.id)}`;
      }

      aparatVideoEl.setAttribute('src', this.option.src);
      aparatVideoEl.setAttribute('title', this.option.title);
      aparatVideoEl.style.width = this.option.width ? this.option.width : '100%';
      aparatVideoEl.style.height = this.option.height ? this.option.height : '100%';

      this.setCaption(this.option.caption, aparatVideoEl);
    }

    setIframe(data) {
      const option = JSON.parse(JSON.stringify(this.defaultOption.url));
      const videoEl = this.getEl(option.videoEl, this.el);

      this.option = this.setOption(option, data);

      videoEl.setAttribute('src', this.option.src);
      videoEl.setAttribute('title', this.option.title);
      videoEl.style.width = this.option.width ? this.option.width : '100%';
      videoEl.style.height = this.option.height ? this.option.height : '100%';

      this.setCaption(this.option.caption, videoEl);
    }

    setOption(option, data) {
      const keys = Object.keys(data);
      for (let i = 0; i < keys.length; i++) {
        const key = keys[i];
        option[key] = data[key] ? data[key] : option[key];
      }

      return option;
    }

    setCaption(caption, videoEl) {
      if (caption) {
        const figureCaptionHtmlStr = `<p class="hidden">${caption}</p>`;
        videoEl.insertAdjacentHTML('afterend', figureCaptionHtmlStr);
      }
    }

    getEl(htmlStr, videoEl) {
      if (!videoEl.querySelector('figure')) {
        const figureHtmlStr = '<figure></figure>';
        videoEl.insertAdjacentHTML('beforeend', figureHtmlStr);
      }

      const figureEl = videoEl.lastElementChild;
      figureEl.style.width = this.videoData.width ? this.videoData.width : '100%';
      figureEl.style.height = this.videoData.height ? this.videoData.height : '100%';

      if (!figureEl.querySelector('.video-player')) {
        figureEl.insertAdjacentHTML('afterbegin', htmlStr);
      }

      return figureEl.firstElementChild;
    }

    play() {
      switch(this.type) {
      case 'mp4':
        this.playMp4Video();
        break;
      case 'youtube':
        this.playYoutubeVideo();
        break;
      case 'brightcove':
        this.playBrightCoveVideo();
        break;
      }
    }

    stop() {
      switch(this.type) {
      case 'mp4':
        this.stopMp4Video();
        break;
      case 'youtube':
        this.stopYoutubeVideo();
        break;
      case 'brightcove':
        this.stopBrightCoveVideo();
        break;
      }
    }

    playMp4Video() {
      if (this.type === 'mp4') {
        if (this.videoInfo.el) {
          if (!this.isScrollPlay) {
            this.videoInfo.el.play();
            this.videoInfo.state = 'play';
          }
        } else {
          this.toVideoState = 'play';
        }
      }
    }

    stopMp4Video() {
      if (this.type === 'mp4') {
        if (this.videoInfo.el) {
          const stop = () => {
            this.videoInfo.el.pause();
            this.videoInfo.el.currentTime = 0;
            this.videoInfo.state = 'stop';
          };

          const handleLoadedMetaData = () => {
            stop();
            this.videoInfo.el.removeEventListener('loadedmetadata', handleLoadedMetaData);
          };

          if (this.videoInfo.el.readyState < 1) {
            this.videoInfo.el.addEventListener('loadedmetadata', handleLoadedMetaData);
          } else {
            stop();
          }
        } else {
          this.toVideoState = 'stop';
        }
      }
    }

    playYoutubeVideo() {
      if (this.type === 'youtube') {
        if (this.videoInfo.player) {
          this.videoInfo.player.playVideo();
          this.videoInfo.state = 'play';
        } else {
          this.toVideoState = 'play';
        }
      }
    }

    stopYoutubeVideo() {
      if (this.type === 'youtube') {
        if (this.videoInfo.player) {
          this.videoInfo.player.stopVideo();
          this.videoInfo.state = 'stop';
        } else {
          this.toVideoState = 'stop';
        }
      }
    }

    playBrightCoveVideo() {
      if (this.type === 'brightcove') {
        if (this.videoInfo.player) {
          if (this.videoInfo.player.readyState() < 1) {
            // eslint-disable-next-line dot-notation
            this.videoInfo.player['on']('loadedmetadata', () => {
              this.videoInfo.player.play();
              this.videoInfo.state = 'play';
            });
          } else {
            this.videoInfo.player.play();
            this.videoInfo.state = 'play';
          }
        } else {
          this.toVideoState = 'play';
        }
      }
    }

    stopBrightCoveVideo() {
      if (this.type === 'brightcove') {
        if (this.videoInfo.player) {
          if (this.videoInfo.player.readyState() < 1) {
            // eslint-disable-next-line dot-notation
            this.videoInfo.player['on']('loadedmetadata', () => {
              this.videoInfo.player.pause();
              this.videoInfo.player.currentTime(0);
              this.videoInfo.state = 'stop';
            });
          } else {
            this.videoInfo.player.pause();
            this.videoInfo.player.currentTime(0);
            this.videoInfo.state = 'stop';
          }
        } else {
          this.toVideoState = 'stop';
        }
      }
    }

    /** @suppress {undefinedVars} */
    dispose() {
      if (this.el.lastElementChild) {
        if (!this.isEmbed) {
          if (this.type === 'brightcove') {
            if (this.videoInfo.player) {
              this.videoInfo.player.dispose();
            }

            const countryCode = this.option.countryCode.toUpperCase();
            const brightCoveScriptSrc = `https://players.brightcove.net/${brightCoveData[countryCode].accountId}/${brightCoveData[countryCode].playerId}_default/index.min.js`;
            const script = document.querySelector(`script[src="${brightCoveScriptSrc}"]`);
            if (script) {
              document.body.removeChild(script);
            }
          } else if (this.type === 'youtube') {
            const script = document.body.querySelector('script[src="https://www.youtube.com/iframe_api"].sg-youtube-api');
            if (script) {
              document.body.removeChild(script);
            }
          }

          while (this.el.lastElementChild.hasChildNodes()) {
            this.el.lastElementChild.removeChild(this.el.lastElementChild.firstChild);
          }

          this.el.removeChild(this.el.lastElementChild);
        }
      }
    }
  }

  Video.instances = new WeakMap();

  /**
   * a common video module used as window.sg.common.video
   * @module window/sg/common/video
   */
  const video = {
    /**
     * 모든 video 초기화
     * @func initAll
     * @static
     */
    initAll() {
      const videoEls = [...document.querySelectorAll('.video')];
      const staticVideoEls = [...document.querySelectorAll('.static-content .video')];

      for (let i = 0; i < videoEls.length; i++) {
        const videoEl = videoEls[i];
        let isDuplicate = false;

        for (let j = 0; j < staticVideoEls.length; j++) {
          const staticVideoEl = staticVideoEls[j];
          if (videoEl === staticVideoEl) {
            isDuplicate = true;
            break;
          }
        }

        if (!isDuplicate) {
          if (!Video.instances.has(videoEl)) {
            new Video(videoEl);
          }
        }
      }
    },

    /**
     * video element 초기화
     * @func init
     * @param {HTMLElement} el video element
     * @param {boolean} isLoad video load 여부
     * @return {Video|V} video instance 리턴
     * @static
     */
    init(el, isLoad = true) {
      let instance = null;

      if (Video.instances.has(el)) {
        instance = Video.instances.get(el);
      } else {
        instance = new Video(el);
      }

      if (isLoad) {
        instance.load();
      }

      return instance;
    },
    reInit(el) {
      if (Video.instances.has(el)) {
        Video.instances.get(el).reInit();
      } else {
        new Video(el);
      }
    },

    /**
     * video 제거
     * @func dispose
     * @param {HTMLElement} el video element
     * @static
     */
    dispose(el){
      if (Video.instances.has(el)) {
        Video.instances.get(el).dispose();
      }
    },

    load(el) {
      if (Video.instances.has(el)) {
        Video.instances.get(el).load();
      } else {
        new Video(el).load();
      }
    },

    /**
     * video 재생 (aparat 제외)
     * @func play
     * @param {HTMLElement} el video element
     * @static
     */
    play(el) {
      if (Video.instances.has(el)) {
        Video.instances.get(el).play();
      } else {
        new Video(el).play();
      }
    },

    /**
     * video 멈춤 (aparat 제외)
     * @func stop
     * @param {HTMLElement} el video element
     * @static
     */
    stop(el) {
      if (Video.instances.has(el)) {
        Video.instances.get(el).stop();
      } else {
        new Video(el).stop();
      }
    },

    destroy(el) {
      if (Video.instances.has(el)) {
        Video.instances.get(el).destroy();
      }
    },
  };

  window.sg.common.video = video;

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', video.initAll);
  } else {
    video.initAll();
  }
})();

(() => {
  const $q = window.sg.common.$q;
  const bezierEasing = window.BezierEasing;
  const closest = window.sg.common.utils.closest;
  const getNormalizedScrollLeft = window.sg.common.utils.getNormalizedScrollLeft;
  const setNormalizedScrollLeft = window.sg.common.utils.setNormalizedScrollLeft;
  const isPassiveSupported = window.sg.common.utils.isPassiveSupported;
  const bindRaf = window.sg.common.utils.bindRaf;

  /**
   * Description...
   * @class
   * @author hyunsik.yim
   */
  class Scrollbar {
    constructor(el) {
      this.els = {
        el,
        contentsEl: null,
        wrapEl: null,
        horizTrackEl: null,
        horizTrackContentEl: null,
        horizBarEl: null,
        vertTrackEl: null,
        vertTrackContentEl: null,
        vertBarEl: null,
      };

      this.init();
    }

    /**
     * Description...
     * @private
     */
    init() {
      if (Scrollbar.instances.has(this.els.el)) {
        return;
      }

      Scrollbar.instances.set(this.els.el, this);

      this.initValues();
      this.setElement();
      this.resize();
      this.initHandlers();
      this.bindEvents();
    }

    /**
     * Description...
     * @private
     */
    initValues() {
      this.barScrollLeft = 0;
      this.barScrollTop = 0;
      this.isbarDragging = false;
      this.isContentsDragging = false;
      this.isAnim = false;
      this.isPassiveSupported = isPassiveSupported();
      this.isAutoResize = this.els.el.hasAttribute('data-auto-resize');
      this.observer = null;
    }

    /**
     * Description...
     * @private
     */
    reInit() {
      this.unBindEvents();
      this.initValues();
      this.setElement();
      this.resize();
      this.bindEvents();
    }

    /**
     * Description...
     * @private
     */
    destroy() {
      this.unBindEvents();

      if (Scrollbar.instances.has(this.els.el)) {
        Scrollbar.instances.delete(this.els.el);
      }

      this.els.el = null;
      this.els = null;
    }

    /**
     * Description...
     * @private
     */
    setElement() {
      this.els.contentsEl = this.els.el.querySelector('.scrollbar__contents');
      // this.els.wrapEl = this.els.el.querySelector('.scrollbar__wrap');
      this.els.wrapEl = Array.from(this.els.el.children).filter((el) => el.classList.contains('scrollbar__wrap'))[0];

      if (!this.els.wrapEl) {
        const wrapHtmlStr = '<div class="scrollbar__wrap"></div>';
        this.els.el.insertAdjacentHTML('afterbegin', wrapHtmlStr);
        // this.els.wrapEl = this.els.el.querySelector('.scrollbar__wrap');
        this.els.wrapEl = Array.from(this.els.el.children).filter((el) => el.classList.contains('scrollbar__wrap'))[0];
        this.els.wrapEl.insertAdjacentElement('afterbegin', this.els.contentsEl);
      }

      // this.els.horizTrackEl = this.els.el.querySelector('.scrollbar-horizontal__track');
      this.els.horizTrackEl = Array.from(this.els.el.children).filter((el) => el.classList.contains('scrollbar-horizontal__track'))[0];

      if (!this.els.horizTrackEl) {
        const horizBarHtmlStr = '<div class="scrollbar-horizontal__track"><div class="scrollbar-horizontal__track-content"><div class="scrollbar-horizontal__bar"></div></div>';
        this.els.el.insertAdjacentHTML('beforeend', horizBarHtmlStr);
        // this.els.horizTrackEl = this.els.el.querySelector('.scrollbar-horizontal__track');
        this.els.horizTrackEl = Array.from(this.els.el.children).filter((el) => el.classList.contains('scrollbar-horizontal__track'))[0];
      }

      // this.els.horizTrackContentEl = this.els.el.querySelector('.scrollbar-horizontal__track-content');
      // this.els.horizBarEl = this.els.el.querySelector('.scrollbar-horizontal__bar');
      this.els.horizTrackContentEl = this.els.horizTrackEl.querySelector('.scrollbar-horizontal__track-content');
      this.els.horizBarEl = this.els.horizTrackEl.querySelector('.scrollbar-horizontal__bar');

      // this.els.vertTrackEl = this.els.el.querySelector('.scrollbar-vertical__track');
      this.els.vertTrackEl = Array.from(this.els.el.children).filter((el) => el.classList.contains('scrollbar-vertical__track'))[0];

      if (!this.els.vertTrackEl) {
        const vertBarHtmlStr = '<div class="scrollbar-vertical__track"><div class="scrollbar-vertical__track-content"><div class="scrollbar-vertical__bar"></div>';
        this.els.el.insertAdjacentHTML('beforeend', vertBarHtmlStr);
        // this.els.vertTrackEl = this.els.el.querySelector('.scrollbar-vertical__track');
        this.els.vertTrackEl = Array.from(this.els.el.children).filter((el) => el.classList.contains('scrollbar-vertical__track'))[0];
      }

      // this.els.vertTrackContentEl = this.els.el.querySelector('.scrollbar-vertical__track-content');
      // this.els.vertBarEl = this.els.el.querySelector('.scrollbar-vertical__bar');

      this.els.vertTrackContentEl = this.els.vertTrackEl.querySelector('.scrollbar-vertical__track-content');
      this.els.vertBarEl = this.els.vertTrackEl.querySelector('.scrollbar-vertical__bar');

      this.els.wrapEl.style['-ms-user-select'] = '';
      this.els.wrapEl.style.userSelect = '';
      this.els.wrapEl.style.cursor = '';
      this.els.wrapEl.style.overscrollBehaviorX = '';
    }

    /**
     * Description...
     * @private
     */
    setBarSize() {
      this.els.horizTrackEl.style.display = '';
      const elWidth = Math.ceil(this.els.wrapEl.getBoundingClientRect().width);
      const contentsElWidth = this.els.contentsEl.scrollWidth;
      const horizTrackContentElWidth = Math.ceil(this.els.horizTrackContentEl.getBoundingClientRect().width);
      const horizRatio = elWidth / contentsElWidth;

      if (horizRatio < 1) {
        this.els.horizTrackEl.style.display = '';
        this.horizBarWidth = horizTrackContentElWidth * horizRatio;
        this.els.horizBarEl.style.width = `${this.horizBarWidth}px`;
        this.contentsMaxScrollLeft = contentsElWidth - elWidth;
        this.barMaxScrollLeft = horizTrackContentElWidth - (horizTrackContentElWidth * horizRatio);
        this.isHorizBar = true;

        // set user select none
        this.els.wrapEl.style['-ms-user-select'] = 'none';
        this.els.wrapEl.style.userSelect = 'none';

        // set default cursor
        this.els.wrapEl.style.cursor = 'default';

        // prevent scroll chaining
        this.els.wrapEl.style.overscrollBehaviorX = 'contain';
      } else {
        this.els.horizTrackEl.style.display = 'none';
        this.contentsMaxScrollLeft = 0;
        this.barMaxScrollLeft = 0;
        this.isHorizBar = false;
      }

      this.els.vertTrackEl.style.display = '';
      const elHeight = Math.ceil(this.els.wrapEl.getBoundingClientRect().height);
      const contentElHeight = this.els.contentsEl.scrollHeight;
      const vertTrackContentElHeight = Math.ceil(this.els.vertTrackContentEl.getBoundingClientRect().height);
      const vertRatio = elHeight / contentElHeight;

      if (vertRatio < 1) {
        this.els.vertTrackEl.style.display = '';
        this.els.vertBarEl.style.height = `${vertTrackContentElHeight * vertRatio}px`;

        this.contentsMaxScrollTop = contentElHeight - elHeight;
        this.barMaxScrollTop = vertTrackContentElHeight - (vertTrackContentElHeight * vertRatio);
        this.isVertBar = true;
      } else {
        this.els.vertTrackEl.style.display = 'none';

        this.contentsMaxScrollTop = 0;
        this.barMaxScrollTop = 0;
        this.isVertBar = false;
      }
    }

    // setScroll() {
    //   this.calcVelocity = this.calcVelocity.bind(this);
    // }

    /**
     * Description...
     * @param {number} scrollLeft (optional) param description...
     * @private
     */
    scrollHorizBar(scrollLeft) {
      if (scrollLeft < 0) {
        scrollLeft = 0;
      } else if (scrollLeft > this.barMaxScrollLeft) {
        scrollLeft = this.barMaxScrollLeft;
      }

      this.barScrollLeft = scrollLeft;
      this.els.horizBarEl.style.transition = '';
      this.els.horizBarEl.style.transform = `translate3d(${scrollLeft}px, 0, 0)`;
    }

    /**
     * Description...
     * @param {number} scrollTop (optional) param description...
     * @private
     */
    scrollVertBar(scrollTop) {
      if (scrollTop < 0) {
        scrollTop = 0;
      } else if (scrollTop > this.barMaxScrollTop) {
        scrollTop = this.barMaxScrollTop;
      }

      this.barScrollTop = scrollTop;
      this.els.vertBarEl.style.transform = `translate3d(0, ${scrollTop}px, 0)`;
    }

    /**
     * Description...
     * @param {number} scrollLeft (optional) param description...
     * @private
     */
    scrollHoriz(scrollLeft) {
      let curScrollLeft = scrollLeft;
      if (scrollLeft < 0) {
        curScrollLeft = 0;
      } else if (scrollLeft > this.contentsMaxScrollLeft) {
        curScrollLeft = this.contentsMaxScrollLeft;
      }

      setNormalizedScrollLeft(this.els.wrapEl, curScrollLeft);
    }

    /**
     * Description...
     * @param {number} scrollTop (optional) param description...
     * @private
     */
    scrollVert(scrollTop) {
      if (scrollTop < 0) {
        scrollTop = 0;
      } else if (scrollTop > this.contentsMaxScrollTop) {
        scrollTop = this.contentsMaxScrollTop;
      }

      this.els.wrapEl.scrollTop = scrollTop;
    }

    /**
     * Description...
     * @private
     */
    handleScroll() {
      if (this.isHorizBar) {
        const scrollLeft = getNormalizedScrollLeft(this.els.wrapEl);
        this.scrollHorizBar(scrollLeft / this.contentsMaxScrollLeft * this.barMaxScrollLeft);
      }

      if (this.isVertBar) {
        const scrollTop = this.els.wrapEl.scrollTop;
        this.scrollVertBar(scrollTop / this.contentsMaxScrollTop * this.barMaxScrollTop);
      }

      $q(document).trigger('scroll');
    }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleBarScrollStart(e) {
      this.isbarDragging = true;
      this.prevPointX = e.screenX;
      this.prevPointY = e.screenY;

      if (e.target === this.els.horizBarEl) {
        this.els.horizTrackContentEl.classList.add('bar-dragging');
      } else if (e.target === this.els.vertBarEl) {
        this.els.vertTrackContentEl.classList.add('bar-dragging');
      }

      document.addEventListener('mousemove', this.handleBarScroll);
      document.addEventListener('mouseup', this.handleBarScrollEnd);
      document.addEventListener('selectstart', this.handleSelect);
    }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleBarScrollTouchStart(e) {
      this.isbarDragging = true;
      this.prevPointX = e.touches[0].screenX;
      this.prevPointY = e.touches[0].screenY;

      if (e.target === this.els.horizBarEl) {
        this.els.horizTrackContentEl.classList.add('bar-dragging');
      } else if (e.target === this.els.vertBarEl) {
        this.els.vertTrackContentEl.classList.add('bar-dragging');
      }

      document.addEventListener('touchmove', this.handleBarScroll, this.isPassiveSupported ? { passive: true } :  false);
      document.addEventListener('touchend', this.handleBarScrollEnd);
    }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleBarScroll(e) {
      if (!this.isAnim && this.isbarDragging) {
        if (this.isHorizBar) {
          const pointX = e.screenX !== undefined ? e.screenX : e.touches[0].screenX;
          const scrollLeft = this.barScrollLeft + (pointX - this.prevPointX);
          this.scrollHorizBar(scrollLeft);
          this.scrollHoriz(scrollLeft * this.contentsMaxScrollLeft / this.barMaxScrollLeft);
          this.prevPointX = pointX;
        }

        if (this.isVertBar) {
          const pointY = e.screenY !== undefined ? e.screenY : e.touches[0].screenY;
          const scrollTop = this.barScrollTop + (pointY - this.prevPointY);
          this.scrollVertBar(scrollTop);
          this.scrollVert(scrollTop * this.contentsMaxScrollTop / this.barMaxScrollTop);
          this.prevPointY = pointY;
        }
      }
    }

    /**
     * Description...
     * @private
     */
    handleBarScrollEnd() {
      this.isbarDragging = false;
      this.prevPointX = 0;
      this.prevPointY = 0;

      this.els.horizTrackContentEl.classList.remove('bar-dragging');
      this.els.vertTrackContentEl.classList.remove('bar-dragging');

      document.removeEventListener('mousemove', this.handleBarScroll);
      document.removeEventListener('mouseup', this.handleBarScrollEnd);
      document.removeEventListener('touchmove', this.handleBarScroll);
      document.removeEventListener('touchend', this.handleBarScrollEnd);
      document.removeEventListener('selectstart', this.handleSelect);
    }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleSelect(e) {
      e.stopPropagation();
      e.preventDefault();
      return false;
    }

    // calcVelocity() {
    //   const now = Date.now();
    //   const elapsed = now - this.timeStamp;
    //   this.timeStamp = now;
    //
    //   const delta = this.scrollLeft - this.prevScrollLeft;
    //   this.prevScrollLeft = this.scrollLeft;
    //
    //   const v = 1000 * delta / elapsed;
    //   this.velocity = 0.8 * v + 0.2 * this.velocity;
    // }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleContentsDragStart(e) {
      if (this.isHorizBar && window.getComputedStyle(this.els.wrapEl).overflow !== 'hidden') {
        this.startX = e.clientX + getNormalizedScrollLeft(this.els.wrapEl);
        this.isContentsDragging = true;
        this.isClickDisabled = false;
        this.diffX = 0;

        document.addEventListener('mousemove', this.handleContentsDrag);
        document.addEventListener('mouseup', this.handleContentsDragEnd);

        // this.velocity = 0;
        // this.scrollLeft = this.els.wrapEl.scrollLeft;
        // this.prevScrollLeft = this.scrollLeft;
        // this.timeStamp = Date.now();

        // clearInterval(this.checkVelocity);
        // this.checkVelocity = setInterval(this.calcVelocity, 100);
      }
    }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleContentsDrag(e) {
      if (!this.isAnim && this.isContentsDragging) {
        this.diffX = this.startX - (e.clientX + getNormalizedScrollLeft(this.els.wrapEl));
        this.scrollHoriz(getNormalizedScrollLeft(this.els.wrapEl) + this.diffX);

        const preventClick = (ce) => {
          const aEl = closest(ce.target, 'a');

          if (aEl) {
            ce.preventDefault();
            ce.stopPropagation();
          }

          document.removeEventListener('click', preventClick);
        };

        if (!this.isClickDisabled) {
          document.addEventListener('click', preventClick);
          this.isClickDisabled = true;
        }
      }
    }

    /**
     * Description...
     * @private
     */
    handleContentsDragEnd() {
      // let isPlay = true;
      // let start = 1;
      //
      //
      // if (!this.diffX) {
      //   this.isContentsDragging = false;
      // }
      //
      // const animation = () => {
      //   if (isPlay) {
      //     this.isAnim = true;
      //     this.isContentsDragging = false;
      //     this.isBarDragging = false;
      //     const step = Math.sin(start);
      //
      //     if (step <= 0) {
      //       isPlay = false;
      //       this.isAnim = false;
      //     } else {
      //       const diff = Math.abs(this.diffX * step);
      //       if (diff > 1) {
      //         this.scroll(this.els.wrapEl.scrollLeft + (this.diffX * step));
      //         start -= 0.02;
      //         requestAnimationFrame(animation);
      //       } else {
      //         isPlay = false;
      //         this.isAnim = false;
      //       }
      //     }
      //   }
      // };
      //
      // if (!this.isAnim && this.isContentsDragging) {
      //   animation();
      // }

      this.isContentsDragging = false;

      document.removeEventListener('mousemove', this.handleContentsDrag);
      document.removeEventListener('mouseup', this.handleContentsDragEnd);

      // clearInterval(this.checkVelocity);

      // const autoScroll = () => {
      //   const elapsed = Date.now() - this.timeStamp;
      //   const delta = -this.velocity * 0.5 *  Math.exp(-elapsed / 325);
      //   if (this.isAnim && (delta > 0.5 || delta < -0.5)) {
      //     this.scrollHoriz(this.target + delta);
      //     requestAnimationFrame(autoScroll);
      //   } else {
      //     this.isAnim = false;
      //   }
      // };
      //
      // if (this.velocity > 10 || this.velocity < -10) {
      //   this.target = Math.round(this.scrollLeft + this.velocity * 0.5);
      //   this.timeStamp = Date.now();
      //   this.isAnim = true;
      //   requestAnimationFrame(autoScroll);
      // }
    }

    /**
     * Description...
     * @param {event} e (optional) param description...
     * @private
     */
    handleHorizTrackContentClick(e) {
      const offsetX = e.clientX - this.els.horizTrackContentEl.getBoundingClientRect().left;
      if (offsetX < this.barScrollLeft) {
        this.scrollTo(-this.els.wrapEl.getBoundingClientRect().width, null, false, 200);
      } else if (offsetX > this.barScrollLeft + this.horizBarWidth) {
        this.scrollTo(this.els.wrapEl.getBoundingClientRect().width, null, false, 200);
      }
    }

    handleDragStart(e) {
      e.preventDefault();
    }

    // handleWheel(e) {
    //   e.stopPropagation();
    //   e.preventDefault();
    //
    //   if (!this.isAnim) {
    //     const delta = e.wheelDelta || e.detail * -1 || e.deltaY * -1;
    //     if (delta < 0) {
    //       this.scrollHoriz(this.els.wrapEl.scrollLeft + 120);
    //     } else {
    //       this.scrollHoriz(this.els.wrapEl.scrollLeft - 120);
    //     }
    //   }
    // }

    // handleKeyDown(e) {
    //   if (!this.isAnim) {
    //     if (e.keyCode === 39) {
    //       this.scrollTo(120, 0, 100);
    //     } else if (e.keyCode === 37) {
    //       this.scrollTo(-120, 0, 100);
    //     }
    //   }
    // }

    /**
     * Description...
     * @param {object} data (optional) param description...
     * @private
     */
    resize() {
      this.setBarSize();
      this.handleScroll();
    }

    /**
     * Description...
     * @private
     */
    initHandlers() {
      this.handleScroll = bindRaf(this.handleScroll.bind(this));
      this.handleBarScrollStart = this.handleBarScrollStart.bind(this);
      this.handleBarScrollTouchStart = this.handleBarScrollTouchStart.bind(this);
      this.handleBarScroll = bindRaf(this.handleBarScroll.bind(this));
      this.handleBarScrollEnd = this.handleBarScrollEnd.bind(this);
      this.handleSelect = this.handleSelect.bind(this);
      this.handleContentsDragStart = this.handleContentsDragStart.bind(this);
      this.handleContentsDrag = bindRaf(this.handleContentsDrag.bind(this));
      this.handleContentsDragEnd = this.handleContentsDragEnd.bind(this);
      // this.handleWheel = this.handleWheel.bind(this);
      // this.handleKeyDown = this.handleKeyDown.bind(this);
      this.resize = bindRaf(this.resize.bind(this));
      this.handleHorizTrackContentClick = this.handleHorizTrackContentClick.bind(this);
      this.handleDragStart = this.handleDragStart.bind(this);
    }

    /**
     * Description...
     * @private
     */
    bindEvents() {
      this.els.wrapEl.addEventListener('scroll', this.handleScroll);

      this.els.horizTrackContentEl.addEventListener('click', this.handleHorizTrackContentClick);
      this.els.horizBarEl.addEventListener('mousedown', this.handleBarScrollStart);
      this.els.horizBarEl.addEventListener('touchstart', this.handleBarScrollTouchStart, this.isPassiveSupported ? { passive: true } :  false);

      this.els.vertBarEl.addEventListener('mousedown', this.handleBarScrollStart);
      this.els.vertBarEl.addEventListener('touchstart', this.handleBarScrollTouchStart, this.isPassiveSupported ? { passive: true } :  false);

      this.els.wrapEl.addEventListener('mousedown', this.handleContentsDragStart);
      this.els.wrapEl.addEventListener('dragstart', this.handleDragStart);
      // this.els.el.addEventListener('mousewheel', this.handleWheel);
      // this.els.el.addEventListener('DOMMouseScroll', this.handleWheel);
      // this.els.el.addEventListener('keydown', this.handleKeyDown);

      window.addEventListener('resize', this.resize);

      if (this.isAutoResize) {
        const MutationObserver = window.MutationObserver
          || window.WebKitMutationObserver
          || window.MozMutationObserver;

        this.observerTimer = null;

        this.observer = new MutationObserver(() => {
          if (this.observerTimer) {
            clearTimeout(this.observerTimer);
          }

          this.observerTimer = setTimeout(() => {
            this.resize();
          }, 320);
        });

        this.observer.observe(this.els.wrapEl, {
          childList: true,
          subtree: true,
          attributes: true,
          // characterData: true,
          attributeFilter: ['class'],
        });
      }
    }


    /**
     * Description...
     * @private
     */
    unBindEvents() {
      this.els.wrapEl.removeEventListener('scroll', this.handleScroll);
      this.els.horizTrackContentEl.removeEventListener('click', this.handleHorizTrackContentClick);
      this.els.horizBarEl.removeEventListener('mousedown', this.handleBarScrollStart);
      this.els.horizBarEl.removeEventListener('touchstart', this.handleBarScrollTouchStart);
      this.els.vertBarEl.removeEventListener('mousedown', this.handleBarScrollStart);
      this.els.vertBarEl.removeEventListener('touchstart', this.handleBarScrollTouchStart);
      this.els.wrapEl.removeEventListener('mousedown', this.handleContentsDragStart);
      this.els.wrapEl.removeEventListener('dragstart', this.handleDragStart);
      window.removeEventListener('resize', this.resize);

      if (this.observerTimer) {
        clearTimeout(this.observerTimer);
        this.observerTimer = null;
      }

      if (this.observer) {
        this.observer.disconnect();
        this.observer = null;
      }
    }

    /**
     * Description...
     * @private
     */
    scrollBottom() {
      const curScrollTop = this.els.wrapEl.scrollTop;
      this.scrollTo(null, this.contentsMaxScrollTop - curScrollTop);
    }

    /**
     * Description...
     * @param {number} scrollLeft (optional) param description...
     * @param {number} scrollTop (optional) param description...
     * @param {boolean} isAbs (optional) param description...
     * @param {number} duration=300 (optional) param description...
     * @param {string} easing=bezierEasing(0.4, 0.0, 0.2, 1.0) (optional) param description...
     * @private
     */
    scrollTo(scrollLeft, scrollTop, isAbs, duration = 300, easing = bezierEasing(0.4, 0.0, 0.2, 1.0)) {
      const curScrollLeft = getNormalizedScrollLeft(this.els.wrapEl);
      const curScrollTop = this.els.wrapEl.scrollTop;

      if (!isAbs) {
        if (scrollLeft) {
          if (curScrollLeft + scrollLeft > this.contentsMaxScrollLeft) {
            scrollLeft = this.contentsMaxScrollLeft - curScrollLeft;
          }

          if (curScrollLeft + scrollLeft < 0) {
            scrollLeft = -curScrollLeft;
          }
        }

        if (scrollTop) {
          if (curScrollTop + scrollTop > this.contentsMaxScrollTop) {
            scrollTop = this.contentsMaxScrollTop - curScrollTop;
          }

          if (curScrollTop + scrollLeft < 0) {
            scrollTop = -curScrollTop;
          }
        }
      } else {
        if (scrollLeft) {
          if (scrollLeft > this.contentsMaxScrollLeft) {
            scrollLeft = this.contentsMaxScrollLeft;
          }

          if (scrollLeft < 0) {
            scrollLeft = 0;
          }

          scrollLeft = scrollLeft - curScrollLeft;
        }

        if (scrollTop) {
          if (scrollTop > this.contentsMaxScrollTop) {
            scrollTop = this.contentsMaxScrollTop;
          }

          if (scrollLeft < 0) {
            scrollTop = 0;
          }

          scrollTop = scrollTop - curScrollTop;
        }
      }

      const render = (p) => {
        if (scrollLeft) {
          this.scrollHoriz(curScrollLeft + (scrollLeft * p));
        }

        if (scrollTop) {
          this.scrollVert(curScrollTop + (scrollTop * p));
        }
      };

      if (duration > 0) {
        if (!this.isAnim) {
          this.animate(render, duration, easing);
        }
      } else {
        render(1);
      }
    }

    /**
     * Description...
     * @param {function} render (optional) param description...
     * @param {number} duration (optional) param description...
     * @param {string} easing (optional) param description...
     * @private
     */
    animate(render, duration, easing) {
      const start = Date.now();
      this.isAnim = true;
      this.isContentsDragging = false;
      this.isbarDragging = false;

      const animation = () => {
        const p = (Date.now() - start) / duration;

        if (p > 1) {
          render(1);
          this.isAnim = false;
        } else {
          requestAnimationFrame(animation);
          render(easing(p));
        }
      };

      animation();
    }
  }

  Scrollbar.instances = new WeakMap();
  window.sg.components.registerClass('scrollbar', Scrollbar);

  /**
   * a common scrollbar module used as window.sg.common.scrollbar
   * @module window/sg/common/scrollbar
   */
  const scrollbar = {
    /**
     * Description...
     * @func initAll
     * @static
     */
    initAll() {
      [...document.querySelectorAll('.scrollbar:not([data-auto-init="false"])')].forEach((el) => {
        if (!Scrollbar.instances.has(el)) {
          new Scrollbar(el);
        }
      });
    },
    /**
     * Description...
     * @func init
     * @param {HTMLElement} el (optional) param description...
     * @return {instance} (optional) return description...
     * @static
     */
    init(el) {
      let instance;
      if (!Scrollbar.instances.has(el)) {
        instance = new Scrollbar(el);
      } else {
        instance = Scrollbar.instances.get(el);
      }

      return instance;
    },
    /**
     * Description...
     * @func reInit
     * @param {HTMLElement} el (optional) param description...
     * @return {instance} (optional) return description...
     * @static
     */
    reInit(el) {
      let instance;
      if (!Scrollbar.instances.has(el)) {
        instance = new Scrollbar(el);
      } else {
        instance = Scrollbar.instances.get(el);
        instance.reInit();
      }

      return instance;
    },
    /**
     * Description...
     * @func scrollTo
     * @param {HTMLElement} el (optional) param description...
     * @param {number} scrollLeft (optional) param description...
     * @param {number} scrollTop (optional) param description...
     * @param {boolean} isAbs=false (optional) param description...
     * @static
     */
    scrollTo(el, scrollLeft, scrollTop, isAbs = false) {
      if (Scrollbar.instances.has(el)) {
        Scrollbar.instances.get(el).scrollTo(scrollLeft, scrollTop, isAbs);
      }
    },
    /**
     * Description...
     * @func scrollBottom
     * @param {HTMLElement} el (optional) param description...
     * @static
     */
    scrollBottom(el) {
      if (Scrollbar.instances.has(el)) {
        Scrollbar.instances.get(el).scrollBottom();
      }
    },
    /**
     * Description...
     * @func resize
     * @param {HTMLElement} el (optional) param description...
     * @static
     */
    resize(el) {
      if (Scrollbar.instances.has(el)) {
        Scrollbar.instances.get(el).resize();
      }
    },
    /**
     * Description...
     * @func destroy
     * @param {HTMLElement} el (optional) param description...
     * @static
     */
    destroy(el) {
      if (Scrollbar.instances.has(el)) {
        Scrollbar.instances.get(el).destroy();
      }
    },
  };

  window.sg.common.scrollbar = scrollbar;
  $q.ready(scrollbar.initAll);
})();

(() => {
  const $q = window.sg.common.$q;
  const BREAKPOINTS = window.sg.common.constants.BREAKPOINTS;
  const utils = window.sg.common.utils;
  const scrollbar = window.sg.common.scrollbar;

  const selector = {
    section: '.layer-popup',
    scrollPopup: '.layer-popup__contents.scrollbar',
    boxWrap: '.layer-popup__inner',
  };
  /**
   * Description...
   * @class
   * @author eunji85.kim
   */
  class LayerPopupMaxHeight {
    constructor(component) {
      this.ele = {
        window: $q(window),
        section: $q(component),
        scrollPopup: null,
        boxWrap: null,
      };

      this.setProperty();

      this.handler = {
        resize: this.resize.bind(this),
      };

      LayerPopupMaxHeight.instances.set(component, this);

      this.init();
    }
    
    /**
     * Description...
     * @private
     */
    setProperty() {
      this.ele.scrollPopup = this.ele.section.find(selector.scrollPopup);
      this.ele.boxWrap = this.ele.section.find(selector.boxWrap);
    }

    /**
     * Description...
     * @private
     */
    init() {
      if (this.ele.scrollPopup.target.length <= 0) {
        return;
      }

      this.bindEvents();
      this.resize();

      setTimeout(() => {
        this.resize();
      }, 500);
    }

    /**
     * Description...
     * @private
     */
    reInit() {
      this.setProperty();

      if (this.ele.scrollPopup.target.length <= 0) {
        return;
      }

      this.bindEvents();
      this.resize();

      setTimeout(() => {
        this.resize();
      }, 500);
    }

    /**
     * Description...
     * @private
     */
    resize() {
      this.setScrollHeight();
    }

    /**
     * Description...
     * @private
     */
    setScrollHeight() {
      const $heightEl = this.ele.scrollPopup.find('.scrollbar__wrap').eq(0);
      const nowHeight = $heightEl.target[0].scrollTop;
      let maxHeight = utils.getViewPort().height;
      
      $heightEl.css({
        maxHeight: '',
      });

      maxHeight -= this.ele.scrollPopup.target[0].offsetTop;//offset Top
      maxHeight -= this.ele.boxWrap.offset().bottom - this.ele.scrollPopup.offset().bottom; //offset Bottom
      if( this.ele.section.target[0].dataset.paddingCustom === undefined ){//offset box out padding
        maxHeight -= BREAKPOINTS.MOBILE < utils.getViewPort().width ? 60 : this.ele.boxWrap.target[0].offsetTop * 2;
      } else {
        maxHeight -= this.ele.boxWrap.target[0].offsetTop * 2;
      }

      if(maxHeight < 0){
        maxHeight = 0;
      }

      if ($heightEl.height() - 1 > Math.round(maxHeight)) {
        $heightEl.css({
          maxHeight: `${maxHeight}px`,
        });  
      }

      $heightEl.target[0].scrollTop = nowHeight;
      
      scrollbar.resize(this.ele.scrollPopup.target[0]);
    }

    /**
     * Description...
     * @private
     */
    bindEvents() {
      this.ele.window.off('resize', this.handler.resize).on('resize', this.handler.resize);
    }
  }

  LayerPopupMaxHeight.instances = new WeakMap();

  /**
   * a common layerPopupMaxHeight module used as window.sg.common.layerPopupMaxHeight
   * @module window/sg/common/layerPopupMaxHeight
   */
  const layerPopupMaxHeight = {
    /**
     * Description...
     * @func initAll
     * @static
     */
    initAll() {
      $q(selector.section).target.forEach((element) => {
        if (element.querySelectorAll(selector.scrollPopup).length > 0 && !LayerPopupMaxHeight.instances.has(element)) {
          new LayerPopupMaxHeight(element);
        } else {
          return null;
        }
      });
    },
    /**
     * Description...
     * @func init
     * @param {HTMLElement} element (optional) param description...
     * @static
     */
    init(element) {
      if (element.querySelectorAll(selector.scrollPopup).length > 0 && !LayerPopupMaxHeight.instances.has(element)) {
        [...element.querySelectorAll('.scrollbar')].forEach((el) => {
          scrollbar.init(el);
        });
        new LayerPopupMaxHeight(element);
      } else {
        return null;
      }
    },
    /**
     * Description...
     * @func reInit
     * @param {HTMLElement} element (optional) param description...
     * @static
     */
    reInit(element) {
      if (element.querySelectorAll(selector.scrollPopup).length > 0 && LayerPopupMaxHeight.instances.has(element)) {
        const instances =  LayerPopupMaxHeight.instances.get(element);
        instances.reInit();
      } else {
        return null;
      }
    },
    /**
     * Description...
     * @func setMax
     * @param {HTMLElement} element (optional) param description...
     * @static
     */
    setMax(element) {
      if (element.querySelectorAll(selector.scrollPopup).length > 0 && LayerPopupMaxHeight.instances.has(element)) {
        const instances =  LayerPopupMaxHeight.instances.get(element);
        instances.setScrollHeight();
      } else {
        return null;
      }
    },
  };

  window.sg.common.layerPopupMaxHeight = layerPopupMaxHeight;
})();

(() => {
  const $q = window.sg.common.$q;
  const Swiper = window.Swiper;
  const BREAKPOINTS = window.sg.common.constants.BREAKPOINTS;
  const utils = window.sg.common.utils;
  const lazyLoad = window.sg.common.lazyLoad;
  const removeAllEventListeners = window.sg.common.utils.removeAllEventListeners;

  // swiper api
  // https://swiperjs.com/api/
  //data-swiper-option='{
  //  "slidesPerView":"3",
  //  "grabCursor": "true",
  //  "pagination": true , false    custom option auto create pagination option
  //  "viewMode":"pc , mobile,      custom option pc => mobile view swiper off , pc view mobie swiper off
  //  "keepWrapper":"true , false   custom option delete class .swiper-wrapper option
  //  "followFinger":"true"
  //  "offSlideAccessibility": true,false    custom option default false , fuction slideAccessibility() off
  //  "offTxtAccessibility": true,false    custom option default false , apply tabindex setting only to focusElementNotxt
  //  "offTxtAccesibility": Same as "offTxtAccessibility"
  //  "realSlidesPerView": "2"    custom option
  // longSwipes: true,
  // resistance: false,
  // shortSwipes: false,
  // touchMoveStopPropagation: true,
  // centerInsufficientSlides: true,
  // touchReleaseOnEdges: false,
  // longSwipesRatio: 0.01,
  // nested: true,
  // resistance: false,

  // swiper manager object

  /**
   * a common swiperManager module used as window.sg.common.swiperManager
   * @module window/sg/common/swiperManager
   * @author geuni
   */
  const swiperManager = {
    /**
     * Description...
     * @func init
     * @static
     */
    init() {
      $q('.basic-swiper').target.forEach((element) => {
        if (CustomSwiper.instances.has(element)) {
          CustomSwiper.instances.get(element).swiper.reInit();
        } else {
          new CustomSwiper(element);
        }
      });
    },

    /**
     * reinit document .basic-swiper classname swiper
     * @func reInit
     * @static
     */
    reInit() {
      lazyLoad.reInit();
      $q('.basic-swiper').target.forEach((element) => {
        if (CustomSwiper.instances.has(element)) {
          CustomSwiper.instances.get(element).swiper.reInit();
        } else {
          new CustomSwiper(element);
        }
      });
    },

    /**
     * element changes reflected document .basic-swiper classname swiper
     * @func update
     * @static
     */
    update() {
      $q('.basic-swiper').target.forEach((element) => {
        if (CustomSwiper.instances.has(element)) {
          const swiper = CustomSwiper.instances.get(element).swiper;
          // image.initAll();

          swiper.slideResize();
          swiper.update();
        }
      });
    },

    /**
     * Description...
     * @func update
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @static
     */
    getSwiper(element) {
      if (CustomSwiper.instances.has(element)) {
        return CustomSwiper.instances.get(element).swiper.getSwiper();
      }
    },

    /**
     * Event will be callback when currently active slide is changed
     * @func slideChange
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @param {function} handler callback handler
     * @static
     */
    slideChange(element, handler) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideChange(handler);
      }
    },

    /**
     * Event will be callback after animation to other slide (next or previous).
     * @func slideChangeTransitionEnd
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @param {function} handler callback handler
     * @static
     */
    slideChangeTransitionEnd(element, handler) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideChangeTransitionEnd(handler);
      }
    },

    /**
     * reinit target swiper
     * @func slideReInit
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @static
     */
    slideReInit(element) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.reInit();
      }else {
        new CustomSwiper(element);
      }
    },

    /**
     * element changes reflected target swiper
     * @func slideUpdate
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @param {object} option target swiper elemnet ( swiper-container )
     * @static
     */
    slideUpdate(element, option) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideUpdate(option);
      }
    },


    /**
     * Description...
     * @func slideInit
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @param {object} option target swiper elemnet ( swiper-container )
     * @static
     */
    slideInit(element, option) {
      new CustomSwiper(element, option);
    },

    /**
     * Description...
     * @func slideRemove
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @static
     */
    slideRemove(element) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.remove();
      }
    },

    /**
     * Description...
     * @func slideInitEnd
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @param {function} handler (optional) param description...
     * @static
     */
    slideInitEnd(element, handler) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideInitEnd(handler);
      }
    },

    // slideAccessibility

    /**
     * Description...
     * @func slideSwiperDestory
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @static
     */
    slideSwiperDestory(element) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideSwiperDestory();
      }
    },

    /**
     * swiper autoplay stop
     * @func slideStop
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @static
     */
    slideStop(element) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideStop();
      }
    },

    /**
     * swiper autoplay start
     * @func slideStart
     * @param {HTMLElement} element target swiper elemnet ( swiper-container )
     * @static
     */
    slideStart(element) {
      if (CustomSwiper.instances.has(element)) {
        CustomSwiper.instances.get(element).swiper.slideStart();
      }
    },
  };

  /**
   * Description...
   * @class
   * @author geuni
   */
  class CustomSwiper {
    constructor(swiperEl, popt) {
      this.indicator = window.sg.common.indicator;

      this.selector = {
        imageMain: '.image > .image__main',
        swiperSlide: '.swiper-slide',
        swiperWrapper: '.swiper-wrapper',
        swiperButtonNext: '.swiper-button-next',
        swiperButtonPrev: '.swiper-button-prev',
        indicator: '.indicator',
        indicatorList: '.indicator__list',
        indicatorControls: '.indicator__controls',
        indicatorItem: '.indicator__item',
        hiddenButton: '.hiddenButton',
      };

      this.el = {
        componentEl: null,
        containerEl: null,
        indicatorEl: null,
        prevEl: null,
        nextEl: null,
        autoPlayBtnEl: null,
      };

      this.group = 0;

      this.el.containerEl = $q(swiperEl);

      const option = (this.el.containerEl.attr('data-swiper-option')) ? JSON.parse(this.el.containerEl.target[0].dataset.swiperOption) : {};

      this.el.componentEl = this.el.containerEl.closest(option.componentEl);

      // option setup
      let opt = {
        slidesPerView: 1,
        spaceBetween: 0,
        // touchStartPreventDefault: false,
        longSwipes: true,
        longSwipesRatio: 0.1,
        keepWrapper: true,
        offSlideAccessibility: false,
        offTxtAccesibility: false,
      };

      // preloadImages: false,
      opt = utils.extend(opt, option);
      opt.on = {};
      opt.threshold = 10;
      // opt.preventClicks = true;
      opt.init = false;
      // opt.spaceBetween = 10;
      opt.accessibility = true;

      if (popt) {
        opt = utils.extend(opt, popt);
      }

      if(opt.offTxtAccessibility !== undefined){
        opt.offTxtAccesibility = opt.offTxtAccessibility;
      }

      // freemode setup
      if (opt.freeMode) {
        opt.threshold = 0;
        opt.freeModeSticky = true;
        opt.freeModeMomentumRatio = 0.01;
        opt.centeredSlidesBounds = true;
        opt.touchStartPreventDefault = false;
        // opt.touchStartForcePreventDefault = false;
        // opt.touchMoveStopPropagation = false;
        // opt.touchReleaseOnEdges = false;
      }
      opt.passiveListeners = false;

      opt.a11y = false;
      // if (opt.loop && !opt.slidesPerGroup) {
      //   opt.loopedSlides = 0;
      //   opt.loopAdditionalSlides = 2;
      // }

      if (opt.autoplay) {
        opt.autoplay.disableOnInteraction = false;

        if (opt.autoplay.start === false) {
          opt.autoplay = false;
        }
      }

      // opt.autoplayDisableOnInteraction = false;
      // public variable
      this.$qwindow = $q(window);
      this.option = opt;
      this.autoPlayCheck = null;
      this.focusInCheck = null;
      this.clickCheck = false;
      this.activeSlide = 0;
      this.slideChangeTransitionEndHandler = null;
      this.slideInitEndHandler = null;
      this.slideChangeHandler = null;
      this.prevImageCheck = false;

      this.wrapperStr = '<div class="swiper-wrapper" role="listbox">';
      this.focusElementStr = 'a, button, .video, video, h1, h2, h3, h4, h5, h6, p';
      this.focusElementNotxt = 'a, button';
      this.focusClass = '.three-column-carousel__content, .swiper-slide-focus';
      // this.swiperStopEle = 'a, [tabindex="0"], .swiper-button-prev, .swiper-button-next, .swiper-pagination-bullet, .indicator__controls';
      this.swiperStopEle = '.swiper-wrapper';
      this.hiddenButton = '<button type="button" class="hidden hiddenButton" tabindex="-1">Stop automatic slide show</button>';

      this.textColorArr = [];
      this.textColorArr[0] = '.text-white';
      this.textColorArr[1] = '.text-black';

      this.bulletColorArr = [];
      this.bulletColorArr[0] = 'text-color--white';
      this.bulletColorArr[1] = 'text-color--black';

      this.sw = false;

      this.handler = {
        setImageCheck: () => {
          const checkImage = this.el.containerEl.find(this.selector.imageMain).eq(0);

          if (checkImage.height() <= 0 ) {
            this.el.containerEl.css({
              'min-height': '2px',
            });

            checkImage.on('load', this.handler.checkImageLoad);
          }
        },
        checkImageLoad: (evt) => {
          this.el.containerEl.css({
            'min-height': '',
          });

          this.slideResize();

          $q(evt.target).off('load', this.handler.checkImageLoad);
        },
        autoPlayHandler: () => {
          if (this.autoPlayCheck) {
            this.autoPlayCheck = false;
          } else {
            this.autoPlayCheck = true;
          }

          if (!this.autoPlayCheck) {
            this.sw.autoplay.stop();
            this.handler.autoPlayBtnSetup(true);
          } else {
            this.sw.autoplay.start();
            this.handler.autoPlayBtnSetup(false);
          }
        },
        autoPlayBtnSetup: (value) => {
          if (!this.el.autoPlayBtnEl.target.length) {
            return;
          }

          const str = this.el.autoPlayBtnEl.attr('an-la');
          if (value) {
            this.el.autoPlayBtnEl.attr('an-la',str.replace(':stop',':play'));
            this.el.autoPlayBtnEl.find('.hidden').innerHTML('play');
            if (this.el.indicatorEl){
              this.indicator.pause(this.el.indicatorEl);
              this.el.autoPlayBtnEl.addClass('indicator__controls--play');
              this.el.containerEl.find(this.selector.hiddenButton).text('Play automatic slide show');
            } else {
              this.el.autoPlayBtnEl.addClass('indicator__controls--play');
              this.el.containerEl.find(this.selector.hiddenButton).text('Play automatic slide show');
            }
          } else {
            this.el.autoPlayBtnEl.attr('an-la',str.replace(':play',':stop'));
            this.el.autoPlayBtnEl.find('.hidden').innerHTML('stop');
            if (this.el.indicatorEl) {
              this.indicator.play(this.el.indicatorEl);
              this.el.autoPlayBtnEl.removeClass('indicator__controls--play');
              this.el.containerEl.find(this.selector.hiddenButton).text('Stop automatic slide show');
            } else {
              this.el.autoPlayBtnEl.removeClass('indicator__controls--play');
              this.el.containerEl.find(this.selector.hiddenButton).text('Stop automatic slide show');
            }
          }
        },
        focusInHandler: (evt) => {
          evt.preventDefault();
          if (!this.sw.autoplay) {
            return;
          }

          if (!this.focusInCheck) {
            this.focusInCheck = true;
            this.autoPlayCheck = this.sw.autoplay.running;
            if (evt.type.toLowerCase() === 'focusin' || evt.type.toLowerCase() === 'mouseover') {
              this.handler.autoPlayBtnSetup(true);
            }

            this.sw.autoplay.stop();
          }
        },
        focusOutHandler: (evt) => {
          evt.preventDefault();
          if (!this.sw.autoplay) {
            return;
          }

          if (this.focusInCheck) {
            this.focusInCheck = false;

            if (this.autoPlayCheck) {
              this.clickCheck = false;
              this.sw.autoplay.start();
              this.handler.autoPlayBtnSetup(false);
            }
          }
        },

        renderIndicator: () => {
          if (this.el.indicatorEl) {
            const indicator = this.indicator.init(this.el.indicatorEl);
            if (indicator) {
              indicator.reInit();
            }

            if (this.el.componentEl.find(this.selector.indicatorItem).target.length) {
              this.indicator.move(this.el.indicatorEl, this.activeSlide);
            }
          }

          if (this.el.autoPlayBtnEl.target.length) {
            this.el.autoPlayBtnEl.find('.hidden').innerHTML('stop');
            removeAllEventListeners(this.el.autoPlayBtnEl.target[0], 'click');
            this.el.autoPlayBtnEl.removeClass('indicator__controls--play');

            const clickHandler = (event) => {
              if (!this.el.indicatorEl) {
                this.el.autoPlayBtnEl.toggleClass('indicator__controls--play');
              }
              event.preventDefault();

              if (this.focusInCheck && !this.clickCheck) {
                this.clickCheck = true;
                setTimeout(() => {
                  this.handler.autoPlayHandler(true);
                }, 100);
              }

              this.handler.autoPlayHandler();
            };

            this.el.autoPlayBtnEl.off('click').on('click',clickHandler);
            this.el.containerEl.find(this.selector.hiddenButton).off('click').on('click', clickHandler);
          }
        },
        paginationUpdateHandler: (swiper, paginationEl) => {
          const bulletActive = $q(paginationEl).find(`${this.selector.indicatorItem}.swiper-pagination-bullet-active`).target[0];
          const itemActive = $q(paginationEl).find(`${this.selector.indicatorItem}.indicator__item--active`).target[0];
          if (bulletActive !== itemActive && bulletActive) {
            const clickid = parseInt(bulletActive.getAttribute('data-type-clickid'),10);
            this.indicator.move(this.el.indicatorEl, clickid);
          }
        },
        paginationRenderHandler: () => {
          this.handler.renderIndicator();
          this.handler.setupBullet();
        },
        setupBullet: () => {
          this.headlineArr = [];

          this.el.containerEl.find('.swiper-slide:not(.swiper-slide-duplicate)').target.forEach((el) => {
            let headline = el.getAttribute('data-type-headline');
            if (!headline) {
              if(el.dataset.tagging){
                headline = JSON.parse(el.dataset.tagging)['an-tr'];
              } else {
                headline = el.getAttribute('an-tr');
              }
            }

            this.headlineArr.push(headline);
          });

          this.headlineArr = this.headlineArr.concat(this.headlineArr);

          $q(this.option.pagination.el).find('.swiper-pagination-bullet').target.forEach((element, idx) => {
            let eq = null;
            let nN = idx * this.group;
            if (this.group !== this.getNowPerView()) {
              nN = idx;
            }

            if (this.option.loop) {
              eq = this.el.containerEl.find(this.selector.swiperWrapper).find(`.swiper-slide[data-swiper-slide-index="${nN}"]`);
            } else {
              eq = $q(this.sw.slides[nN]);
            }

            const dot = $q(element);
            eq.target.forEach((ele) => {
              ele.setAttribute('aria-describedby', dot.attr('id'));
            });

            const taggingData = {};
            if (eq.target[0].dataset.tagging) {
              const anData = JSON.parse(eq.target[0].dataset.tagging);
              taggingData.anTr = anData['an-tr'];
              taggingData.anCa = anData['an-ca'];
              taggingData.anAc = anData['an-ac'];
              taggingData.anLa = anData['an-la'];
            } else {
              taggingData.anTr = eq.attr('an-tr');
              taggingData.anCa = eq.attr('an-ca');
              taggingData.anAc = eq.attr('an-ac');
              taggingData.anLa = eq.attr('an-la');
            }

            let headline = eq.attr('data-type-headline');
            if (!headline) {
              headline = taggingData.anTr;
            }

            dot.attr('an-tr', taggingData.anTr);
            dot.attr('an-ca', taggingData.anCa);
            dot.attr('an-ac', taggingData.anAc);
            dot.attr('an-la', taggingData.anLa);
            dot.attr('data-type-slide-index', idx);
            setTimeout(() => {
              dot.find('.hidden').innerHTML(`${headline}`);
            }, 0);
          });

          const total = this.getNowPerView();
          if (total > 1) {
            if (this.option.slidesPerGroup <= 1) {
              $q(this.option.pagination.el).find('.swiper-pagination-bullet').target.forEach((itemEl, idx) => {
                let text = '';

                for (let i = idx; i < idx + total; i++) {
                  if (i !== idx + total - 1) {
                    text += `${this.headlineArr[i]}, `;
                  } else {
                    text += `${this.headlineArr[i]}`;
                  }
                }

                $q(itemEl).find('.hidden').innerHTML(`${text}`);
              });
            } else {
              let end = 0;
              $q(this.option.pagination.el).find('.swiper-pagination-bullet').target.forEach((itemEl) => {
                let text = '';
                for (let i = end; i < end + total; i++) {
                  if (i !== end + total - 1) {
                    text += `${this.headlineArr[i]}, `;
                  } else {
                    text += `${this.headlineArr[i]}`;
                  }
                }
                end += total;

                $q(itemEl).find('.hidden').innerHTML(`${text}`);
              });
            }
          }
        },
        resize: () => {
          if (this.option.viewMode === 'pc') {
            this.resizePc();
          } else if (this.option.viewMode === 'mobile') {
            this.resizeMobile();
          } else {
            this.resize();
          }
        },
      };

      this.handler.setImageCheck();

      this.bindEvents();
      // method

      // swiper reinit
      this.reInit = () => {
        this.el.containerEl.find(this.selector.swiperSlide).removeClass('swiper-slide-active');

        this.remove();

        this.handler.setImageCheck();

        this.bindEvents();
      };

      CustomSwiper.instances.set(this.el.containerEl.target[0], {
        'swiper': this,
      });
    }

    /**
     * Description...
     */
    static createCount() {
      return this.count += 1;
    }

    customFocus() {
      // Accessibility code
      // const active = this.el.containerEl.find('.swiper-slide-active');
      // active.attr('tabindex',0).focus();
    }

    /**
     * Description...
     * @private
     */
    getSwiper() {
      return this.sw;
    }

    /**
     * Description...
     * @private
     */
    init() {
      if (this.sw !== false) {
        return;
      }

      this.activeSlide = 0;

      const slide = this.el.containerEl.find(this.selector.swiperSlide);
      this.el.autoPlayBtnEl = this.el.componentEl.find(this.selector.indicatorControls);
      this.el.indicatorEl = this.el.componentEl.find(this.selector.indicator).target[0];
      this.el.prevEl = this.el.componentEl.find(this.selector.swiperButtonPrev);
      this.el.nextEl = this.el.componentEl.find(this.selector.swiperButtonNext);

      if (this.getNowPerView() > slide.target.length) {
        this.el.prevEl.hide();
        this.el.nextEl.hide();
        return;
      }

      this.el.containerEl.find(this.selector.swiperSlide).target.forEach((ele, idx) => {
        if ($q(ele).hasClass('swiper-slide-active')) {
          this.activeSlide = idx;
        }
      });

      // wrapper create check
      if (this.el.containerEl.find(this.selector.swiperWrapper).target.length === 0) {
        const list = this.el.containerEl.find(this.selector.swiperSlide);

        this.slideAccessibility();

        const clone = list.clone();
        list.remove();

        const indicator = this.el.containerEl.find('.indicator');
        const wrapChildren = this.el.containerEl.children();

        if (wrapChildren.target.length === 0) {
          this.el.containerEl.append(this.wrapperStr);
        } else if (indicator.target.length && !this.el.containerEl.find(this.selector.swiperButtonPrev).target.length) {
          indicator.prepend(this.wrapperStr);
        } else {
          wrapChildren.eq(0).after(this.wrapperStr);
        }

        this.el.containerEl.find(this.selector.swiperWrapper).append(clone);

        window.sg.common.image.initAll();

        lazyLoad.initAll();
      }

      this.el.containerEl.find(this.selector.hiddenButton).off().remove();
      if (this.option.autoplay) {
        this.el.containerEl.target[0].insertAdjacentHTML('afterbegin', this.hiddenButton);
      }

      if (!this.option.navigation) {
        this.option.navigation = {};
        this.option.navigation.prevEl = this.el.prevEl.target[0];
        this.option.navigation.nextEl = this.el.nextEl.target[0];
      } else if ((typeof this.option.navigation.prevEl).toLowerCase() === 'string') {
        this.el.prevEl = this.el.componentEl.find(this.option.navigation.prevEl);
        this.el.nextEl  = this.el.componentEl.find(this.option.navigation.nextEl);
      }

      if (this.slideChangeHandler) {
        this.option.on.slideChange = () => {
          this.slideChangeHandler(this.sw, this.sw.realIndex);
        };
      }

      // if (this.option.pagination && this.el.containerEl.height() > 0) {
      if (this.option.pagination) {
        this.option.pagination = {};

        const indicatorList = this.el.componentEl.find(`${this.selector.indicatorList} > button`);
        indicatorList.remove();

        this.option.pagination.el = this.el.componentEl.find(this.selector.indicatorList).target[0];

        if (this.option.pagination.el.getAttribute('role') === 'list') { //indicator role="list"
          this.option.pagination.renderBullet = (index, classes) =>
            `<div class="div-for-accessibility" role="listitem"><button class="indicator__item ${classes}" data-type-clickid="${index}" id="swiper${CustomSwiper.createCount()}">` +
              '<span class="indicator__dot-wrap">' +
                '<span class="indicator__dot">' +
                  ' <span class="indicator__dot-inner"></span>' +
                '</span>' +
                '<span class="hidden">Indicator 10</span>' +
              '</span>' +
            '</button></div>';
        } else { //indicator role="tablist"
          this.option.pagination.renderBullet = (index, classes) =>
            `<button class="indicator__item ${classes}" role="tab" data-type-clickid="${index}" id="swiper${CustomSwiper.createCount()}">` +
              '<span class="indicator__dot-wrap">' +
                '<span class="indicator__dot">' +
                  ' <span class="indicator__dot-inner"></span>' +
                '</span>' +
                '<span class="hidden">Indicator 10</span>' +
              '</span>' +
            '</button>';
        }
      }

      const nowPerView = this.getNowPerView();
      this.group = this.option.slidesPerGroup;
      if (!this.group) {
        this.group = 1;
      }

      const customPerGroup = (nowPerView !== this.group && (typeof this.group).toLowerCase() === 'number' && nowPerView !== 'auto') ? true : false;
      const disabledArr = [];

      if (customPerGroup) {
        this.option.slidesPerGroup = 1;
        this.timer = null;
        this.option.on = {
          slideNextTransitionStart() {
            if ((this.realIndex - 1) % this.group === 0) {
              this.slideTo(this.activeIndex + (this.group - 1));
            }

            let endCheck = false;
            disabledArr.forEach((idx) => {
              if (this.realIndex === idx) {
                endCheck = true;
              }
            });

            if (endCheck) {
              this.slideNext();
            }

            if (this.slideChangeHandler) {
              if (this.timer) {
                clearTimeout(this.timer);
              }

              this.timer = setTimeout(() => {
                this.slideChangeHandler(this.sw, this.sw.realIndex);
              },200);
            }
          },
          slidePrevTransitionStart() {
            if ((this.realIndex + 1) % this.group === 0) {
              this.slideTo(this.activeIndex - (this.group - 1));
            }

            let endCheck = false;
            disabledArr.forEach((idx) => {
              if (this.realIndex === idx) {
                endCheck = true;
              }
            });

            if (endCheck) {
              this.slidePrev();
            }

            if (this.slideChangeHandler) {
              if (this.timer) {
                clearTimeout(this.timer);
              }

              this.timer = setTimeout(() => {
                this.slideChangeHandler(this.sw, this.sw.realIndex);
              }, 200);
            }
          },
        };
      } else {
        if (this.option.pagination) {
          this.option.pagination.clickable = true;
        }
      }

      if (this.option.pagination) {
        // this.option.on.slideChangeTransitionStart = () => {
        //   // Accessibility code
        //   if (this.el.containerEl.find('.swiper-pagination-bullet:focus').target.length > 0) {
        //     const act = this.el.containerEl.find('.swiper-pagination-bullet-active');
        //     act.focus();
        //     act.blur();
        //   }
        // };
      }

      if (this.option.autoHeight) {
        this.el.containerEl.find(this.selector.swiperWrapper).css({
          'transition': 'all ease-out',
          '-o-transition': 'all ease-out',
          '-ms-transition': 'all ease-out',
          '-moz-transition': 'all ease-out',
          '-webkit-transition': 'all ease-out',
        });

        this.option.on.touchStart = () => {
          this.slideResize();
        };
      }

      let touchCheck = false;
      if (this.option.freeMode) {
        this.option.on.touchEnd = () => {
          touchCheck = true;
        };
      }

      // transitionEnd setup
      this.option.on.slideChangeTransitionEnd = () => {
        if (this.slideChangeTransitionEndHandler) {
          this.slideChangeTransitionEndHandler(this.sw, this.sw.realIndex);
        }
        this.slideAccessibility();

        if (!touchCheck) {
          this.customFocus();
        }

        touchCheck = false;
      };

      // init swiper
      this.sw = new Swiper(this.el.containerEl.target[0], this.option);
      this.sw.init();

      // Accessibility
      if (!this.option.autoplay) {
        this.el.autoPlayBtnEl.hide();
      } else {
        this.el.autoPlayBtnEl.attr('an-tr', this.option.autoplay['an-tr']);
        this.el.autoPlayBtnEl.attr('an-ca', this.option.autoplay['an-ca']);
        this.el.autoPlayBtnEl.attr('an-ac', this.option.autoplay['an-ac']);
        this.el.autoPlayBtnEl.attr('an-la', this.option.autoplay['an-la']);

        if (!this.el.indicatorEl && this.el.autoPlayBtnEl) {
          this.handler.renderIndicator();
        }
      }

      if (this.option.pagination) {
        this.handler.setupBullet();

        if (customPerGroup) {
          let clickid = 0;

          const bullet = $q(this.option.pagination.el).find('.swiper-pagination-bullet');
          bullet.target.forEach((element, idx) => {
            if (idx % this.group === 0 || idx === bullet.target.length - 1) {
              element.setAttribute('data-type-group-index', idx);
              element.setAttribute('data-type-clickid', clickid);
              clickid++;
            } else {
              disabledArr.push(idx);
              element.setAttribute('disabled', 'false');
            }
          });

          this.el.componentEl.find(`${this.selector.indicatorItem}[disabled="false"]`).remove();

          this.el.componentEl.find(this.selector.indicatorItem).on('click', (evt) => {
            const clickid = parseInt($q(evt.target).closest(this.selector.indicatorItem).attr('data-type-group-index'), 10);
            this.sw.slideToLoop(clickid);
          });

          const total = parseInt(this.getNowPerView(), 0);
          $q(this.option.pagination.el).find('.swiper-pagination-bullet').target.forEach((itemEl, idx) => {
            let text = '';
            const c = parseInt(itemEl.getAttribute('data-type-slide-index'), 10);

            if (this.option.realSlidesPerView) {
              for (let i = c; i < c + total; i++) {
                text += ` ${this.headlineArr[i]}`;
              }

              $q(itemEl).find('.hidden').innerHTML(`Slide ${idx + 1}:${text}`);
            } else {
              for (let i = c; i < c + total; i++) {
                if (i !== c + total - 1) {
                  text += `${this.headlineArr[i]}, `;
                } else {
                  text += `${this.headlineArr[i]}`;
                }
              }

              $q(itemEl).find('.hidden').innerHTML(`${text}`);
            }
          });
        }

        if (this.option.pagination) {
          setTimeout(() => {
            if (this.sw.pagination) {
              if (this.sw.pagination.bullets) {
                this.handler.renderIndicator();
                this.sw.on('paginationUpdate', this.handler.paginationUpdateHandler);
                this.sw.on('paginationRender', this.handler.paginationRenderHandler);
              }
            }
          },100);
        }
      }

      if (this.option.autoplay) {
        this.autoPlayCheck = this.sw.autoplay.running;

        let focusE = null;
        if (this.el.componentEl.target.length) {
          focusE = this.el.componentEl.find(this.swiperStopEle);
        } else {
          focusE = this.el.containerEl;
        }

        this.focusInCheck = false;

        focusE.off('mouseover', this.handler.focusInHandler).on('mouseover', this.handler.focusInHandler);
        focusE.off('mouseleave', this.handler.focusOutHandler).on('mouseleave', this.handler.focusOutHandler);
        focusE.off('focusin', this.handler.focusInHandler).on('focusin', this.handler.focusInHandler);
        focusE.off('focusout', this.handler.focusOutHandler).on('focusout', (evt) => {
          setTimeout(() => {
            if ($q(document.activeElement).target[0] !== this.el.autoPlayBtnEl.target[0]) {
              this.handler.focusOutHandler(evt);
            }
          }, 300);
        });
      }

      // add swiper handler
      if (this.option.loop) {
        this.sw.slideToLoop(this.activeSlide, 0);
      } else {
        this.sw.slideTo(this.activeSlide, 0);

        if (this.el.indicatorEl) {
          if (this.el.autoPlayBtnEl.css('display') !== 'none') {
            this.sw.on('slideChange', () => {
              if (this.sw.isEnd && !this.el.autoPlayBtnEl.hasClass('indicator__controls--play')) {
                this.clickCheck = true;
                this.handler.autoPlayHandler();
              }
            });
          }
        }
      }

      this.slideAccessibility();

      this.el.nextEl.off('click').on('click', () => {
        if (this.sw.isEnd && !this.option.loop) {
          this.el.prevEl.focus();
        }
      });

      this.el.prevEl.off('click').on('click', () => {
        if (this.sw.isBeginning && !this.option.loop) {
          this.el.nextEl.focus();
        }
      });

      this.sw.on('slideChange', () => {
        lazyLoad.setLazyLoad();
      });

      this.sw.on('transitionEnd', () => {
        lazyLoad.setLazyLoad();
      });

      this.sw.on('init', () => {
        if (this.slideInitEndHandler) {
          this.slideInitEndHandler();
        }
      });
    }

    /**
     * Description...
     * @private
     */
    slideStart() {
      if (this.sw) {
        this.autoPlayCheck = true;
        this.sw.autoplay.start();
        this.handler.autoPlayBtnSetup(false);
      }
    }

    /**
     * Description...
     * @private
     */
    slideStop() {
      if(this.sw) {
        this.autoPlayCheck = false;
        this.sw.autoplay.stop();
        this.handler.autoPlayBtnSetup(true);
      }
    }

    /**
     * Description...
     * @private
     */
    getNowPerView() {
      let nowPoint = 0;
      const breakpoints = this.option.breakpoints;

      if (breakpoints) {
        Object.keys(breakpoints).forEach((key) => {
          const point = parseInt(key, 0);
          if (utils.getViewPort().width > point && nowPoint < point) {
            nowPoint = point;
          }
        });
      }

      let perView = nowPoint !== 0 ? breakpoints[nowPoint].slidesPerView : this.option.slidesPerView;
      if (this.option.realSlidesPerView) {
        perView = parseInt(this.option.realSlidesPerView, 0);
      }

      return perView;
    }

    /**
     * Accessibility
     * @private
     */
    slideAccessibility() {
      if (!this.sw) {
        return;
      }

      if (this.option.offSlideAccessibility) {
        return;
      }

      const nowPerView = this.getNowPerView();

      this.el.containerEl.find(this.focusClass).removeAttr('tabindex');

      const slides = [];
      for(let i = 0; i < this.sw.slides.length; i++){
        const slideEl = this.sw.slides[i];
        const slide = $q(slideEl);
        if (this.option.offTxtAccesibility) {
          slide.find(this.focusElementNotxt).attr('tabindex', '-1');
        } else {
          slide.find(this.focusElementStr).attr('tabindex', '-1');
        }
        slide.attr('aria-hidden', true);
        slides.push(slide);
      }

      if (nowPerView !== 'auto' && nowPerView > 1) {
        for (let i = this.sw.activeIndex; i < (this.sw.activeIndex + nowPerView); i++) {
          const eq = slides[i];
          if (eq) {
            eq.find(this.focusElementStr).removeAttr('tabindex');
            eq.attr('aria-hidden', false);

            if (eq.find(this.focusClass).target.length > 0) {
              eq.find(this.focusClass).attr('tabindex', '0');
            } else {
              eq.find(this.focusElementStr).target.forEach((el) => {
                if (this.option.offTxtAccesibility && (el.matches ? el.matches(this.focusElementNotxt) : el.msMatchesSelector(this.focusElementNotxt)) === false) {
                  el.removeAttribute('tabindex');
                } else {
                  el.setAttribute('tabindex','0');
                }
              });
            }
          }
        }
      }

      const active = this.el.containerEl.find('.swiper-slide-active');
      if (active.find(this.focusClass).target.length) {
        active.find(this.focusClass).attr('tabindex', '0');
      } else {
        active.find(this.focusElementStr).target.forEach((el) => {
          if (this.option.offTxtAccesibility && (el.matches ? el.matches(this.focusElementNotxt) : el.msMatchesSelector(this.focusElementNotxt)) === false) {
            el.removeAttribute('tabindex');
          } else {
            el.setAttribute('tabindex','0');
          }
        });
      }

      active.attr('aria-hidden', false);

      // pagination color
      if (this.option.pagination) {
        let check = true;
        this.textColorArr.forEach((color, idx) => {
          if (active.find(color).target.length) {
            this.bulletColorArr.forEach((color) => {
              this.el.containerEl.removeClass(color);
            });
            check = false;
            this.el.containerEl.addClass(this.bulletColorArr[idx]);
          }
        });

        if (check) {
          this.bulletColorArr.forEach((color) => {
            this.el.containerEl.removeClass(color);
          });
        }
      }
    }

    /**
     * Description...
     * @private
     */
    update() {
      if (!this.sw) {
        return;
      }

      const active = this.el.containerEl.find('.swiper-slide-active').index();
      if (!this.option.loop) {
        this.sw.activeIndex = active;
      }

      this.slideResize();

      this.sw.update();

      this.slideAccessibility();
    }

    /**
     * Description...
     * @param {function} handler (optional) param description...
     * @private
     */
    slideChange(handler) {
      this.slideChangeHandler = handler;
    }

    /**
     * Description...
     * @param {function} handler (optional) param description...
     * @private
     */
    slideChangeTransitionEnd(handler) {
      this.slideChangeTransitionEndHandler = handler;
    }

    /**
     * Description...
     * @param {function} handler (optional) param description...
     * @private
     */
    slideInitEnd(handler) {
      if (this.sw.initialized) {
        handler();
      }else{
        this.slideInitEndHandler = handler;
      }
    }

    /**
     * slide resize
     * @private
     */
    slideResize() {
      if (this.sw === false || !this.option.autoHeight) {
        return;
      }

      const wrapper = this.el.containerEl.find(this.selector.swiperWrapper);
      const list = wrapper.find(this.selector.swiperSlide);
      wrapper.css({
        'height': '',
      });

      list.css({
        'height': '',
      });

      list.target.forEach((element) => {
        const ele = $q(element);
        const eleHeight = ele.outerHeight();
        ele.css({
          'height': `${eleHeight}px`,
        });
      });

      const wrapperHeight = wrapper.find('.swiper-slide.swiper-slide-active').height();
      wrapper.css({
        'height': `${wrapperHeight}px`,
      });
    }

    /**
     * Description...
     * @private
     */
    remove() {
      if (this.sw === false) {
        return;
      }

      this.el.containerEl.find('.swiper-pagination-bullet').off();
      this.el.componentEl.find(this.selector.indicatorControls).off();
      // this.el.containerEl.find(this.swiperStopEle).off();

      const slide = this.el.containerEl.find(this.selector.swiperSlide);
      slide.find(this.focusElementStr).removeAttr('tabindex');
      slide.css({
        'width': '',
        'height': '',
        'visibility': '',
      });

      slide.removeAttr('aria-hidden');
      slide.removeAttr('aria-describedby');
      slide.removeClass('swiper-slide-prev');
      slide.removeClass('swiper-slide-next');

      if (!this.option.keepWrapper) {
        const list = slide.clone();
        this.el.containerEl.find(this.selector.swiperWrapper).remove();
        this.el.containerEl.append(list);
      }

      this.el.containerEl.find('.swiper-slide-duplicate').remove();

      this.sw.destroy();
      this.sw = false;
    }

    /**
     * Description...
     * @private
     */
    slideSwiperDestory() {
      this.sw.destroy();
      this.sw = false;
    }

    /**
     * Description...
     * @private
     */
    resizePc() {
      if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
        this.resize();
        this.init();
      } else {
        this.remove();
      }

      this.slideAccessibility();
    }

    /**
     * Description...
     * @private
     */
    resize() {
      this.el.containerEl.find(this.selector.swiperWrapper).css({
        'height': '',
      });
      this.el.containerEl.find(`${this.selector.swiperWrapper} ${this.selector.swiperSlide}`).css({
        'height': '',
      });

      this.slideResize();

      this.slideAccessibility();
    }

    /**
     * Description...
     * @private
     */
    resizeMobile() {
      if (BREAKPOINTS.MOBILE >= utils.getViewPort().width) {
        this.resize();

        this.init();
      } else {
        this.remove();
      }

      this.slideAccessibility();
    }

    /**
     * Description...
     * @private
     */
    bindEvents() {
      this.$qwindow.off('resize', this.handler.resize).on('resize', this.handler.resize);

      if (!this.option.viewMode) {
        this.init();
      }

      this.handler.resize();
    }

    /**
     * Description...
     * @private
     */
    slideUpdate(option) {
      if (option !== undefined) {
        this.option = utils.extend(this.option, option);
      }

      this.update();
    }
  }

  // create static count id
  CustomSwiper.count = 0;
  CustomSwiper.instances = new WeakMap();

  window.sg.common.swiperManager = swiperManager;

  $q.ready(swiperManager.init);

  $q.load(swiperManager.update);
})();

(() => {
  const contentFixedWidth = 'width=768';
  const contentDeviceWidth = 'width=device-width,initial-scale=1.0,minimum-scale=1.0';

  let timeout = 0;

  const triggerResizeEvent = () => {
    const resizeEvent = window.document.createEvent('UIEvents');
    resizeEvent.initUIEvent('resize', true, false, window, 0);
    window.dispatchEvent(resizeEvent);
  };

  const checkResize = (isFixed) => {
    if (isFixed) {
      if (timeout > 60 || window.innerWidth === 768) {
        triggerResizeEvent();
      } else {
        timeout++;
        requestAnimationFrame(() => checkResize(isFixed));
      }
    } else {
      if (timeout > 60 || window.innerWidth !== 768) {
        triggerResizeEvent();
      } else {
        timeout++;
        requestAnimationFrame(() => checkResize(isFixed));
      }
    }
  };

  const setResponsive = () => {
    const el = document.querySelector('meta[name="viewport"]');
    const content = el.getAttribute('content');

    if ((window.outerWidth < 768 && window.outerWidth > 534) ||
      (window.outerWidth > window.outerHeight &&
        (window.outerWidth >= 768 && window.innerWidth < 768)
      )) {
      if (content !== contentFixedWidth) {
        el.setAttribute('content', contentFixedWidth);
        timeout = 0;
        requestAnimationFrame(() => checkResize(true));
      }
    } else if (!(window.outerWidth > window.outerHeight &&
      content === contentFixedWidth)) {
      if (content !== contentDeviceWidth) {
        el.setAttribute('content', contentDeviceWidth);
        timeout = 0;
        requestAnimationFrame(() => checkResize(false));
      }
    }
  };

  const checkOuterWidth = (width) => {
    if (window.outerWidth !== width || timeout >= 120) {
      setResponsive();
    } else {
      timeout++;
      width = window.outerWidth;
      requestAnimationFrame(() => checkOuterWidth(width));
    }
  };

  window.addEventListener('resize', setResponsive);

  window.addEventListener('orientationchange', () => {
    timeout = 0;
    checkOuterWidth(window.outerWidth);
  });

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setResponsive);
  } else {
    setResponsive();
  }
})();

(() => {
  const $q = window.sg.common.$q;
  const closest = window.sg.common.utils.closest;

  class Icon {
    constructor(el, src) {
      this.el = el;
      this.src = src;

      if (!Array.isArray(this.src)) {
        this.src = [this.src];
      }

      this.init();
    }

    init() {
      this.src.forEach((src) => {
        this.loadSvgSprite(src);
      });

      this.setSvgs(this.el);
    }

    load(src) {
      if (src && this.src.indexOf(src) < 0) {
        this.src.push(src);
        this.loadSvgSprite(src);
      }
    }

    loadSvgSprite(src) {
      const xhr = new XMLHttpRequest();
      xhr.open('GET', src);
      xhr.send();

      const onReadyStateChange = () => {
        if (xhr.readyState === 4) {
          const tmpEl = document.createElement('div');
          tmpEl.innerHTML = xhr.responseText;
          const svg = tmpEl.querySelector('svg');

          if (svg) {
            svg.setAttribute('aria-hidden', 'true');
            svg.style.position = 'absolute';
            svg.style.width = '0';
            svg.style.height = '0';
            document.body.insertBefore(svg, document.body.firstChild);
          }
        }
      };

      xhr.onreadystatechange = onReadyStateChange;
      onReadyStateChange();
    }

    /**
     * set external svgs to internal svgs
     * @param {HTMLElement} el (optional) param description...
     * @private
     */
    setSvgs(el) {
      const uses = el.querySelectorAll('use');
      [...uses].forEach((use) => {
        const src = use.getAttribute('xlink:href') || use.getAttribute('href');
        const svg = closest(use, 'svg');

        if (src && svg) {
          const id = `#${src.split('#')[1]}`;
          use.setAttribute('xlink:href', id);
          use.setAttribute('href', id);
        }
      });
    }
  }

  Icon.instance = null;

  const svgSrc = '/etc.clientlibs/samsung/clientlibs/consumer/global/clientlib-common/resources/images/svg-sprite.svg';

  const icon = {
    init() {
      Icon.instance = new Icon(document, svgSrc);
    },
    load(src) {
      if (Icon.instance) {
        Icon.instance.load(src);
      }
    },
    setSvgs(el = document) {
      if (Icon.instance) {
        Icon.instance.setSvgs(el);
      }
    },
    redrawSvg(el) {
      const parentElement = el.parentElement;

      if (parentElement) {
        const index = [...parentElement.childNodes].indexOf(el);
        parentElement.removeChild(el);

        const divEl = document.createElement('div');
        divEl.appendChild(el);

        // eslint-disable-next-line no-self-assign
        divEl.innerHTML = divEl.innerHTML;
        const svgEl = divEl.firstChild;

        if (parentElement.childNodes[index]) {
          parentElement.insertBefore(svgEl, parentElement.childNodes[index]);
        } else {
          parentElement.appendChild(svgEl);
        }
      }
    },
    redrawSvgs(el = document) {
      const svgEls = el.querySelectorAll('svg');

      [...svgEls].forEach((svgEl) => {
        icon.redrawSvg(svgEl);
      });
    },
    redrawAbnormalSvgs(el = document) {
      const svgEls = el.querySelectorAll('svg');

      [...svgEls].forEach((svgEl) => {
        if (el.namespaceURI !== 'http://www.w3.org/2000/svg') {
          icon.redrawSvg(svgEl);
        }
      });
    },
    update(el = document) {
      icon.setSvgs(el);
      icon.redrawSvgs(el);
    },
    updateAbnormalSvgs(el = document) {
      icon.setSvgs(el);
      icon.redrawAbnormalSvgs(el);
    },
  };

  window.sg.common.icon = icon;
  $q.ready(icon.init);
})();

(() => {
  window.sg = window.sg || {};
  window.sg.authoring = window.sg.authoring || {};

  /**
   * a common raiseEvent module used as window.sg.common.raiseEvent
   * @module window/sg/common/raiseEvent
   * @author Jason
   */
  const raiseEvent = {
    /**
     * Description...
     * @func domContentLoaded
     * @return {boolean} (optional) return description...
     * @static
     */
    domContentLoaded() {
      const domContentLoadedEvent = document.createEvent('Event');
      domContentLoadedEvent.initEvent('DOMContentLoaded', true, true);
      return window.document.dispatchEvent(domContentLoadedEvent);
    },
  };

  window.sg.authoring.raiseEvent = raiseEvent;
})();

(() => {
  const $q = window.sg.common.$q;
  const KEY_CODE = window.sg.common.constants.KEY_CODE;
  const scrollbar = window.sg.common.scrollbar;

  class Dropdown {
    constructor(el, selectedIndex = -1) {
      this.els = {
        el: $q(el),
        selectEl: null,
        btnEl: null,
        btnTextEl: null,
        listWrapEl: null,
        listEl: null,
        itemEls: null,
        docEl: $q(document),
      };

      this.els.selectEl = this.els.el.find('select');
      this.els.selectEl.hide();

      this.options = [...this.els.selectEl.target[0].options];

      this.selectedIndex = selectedIndex;
      this.isOpen = false;
      this.isDisabled = false;
      this.itemMappedIndices = [];
      this.itemMappedIndicesExclDisabled = [];

      this.eventHandler = {
        docEl: {
          click: (e) => {
            e.preventDefault();
            if(e.target.hasClass('dropdown__option')) {
              return;
            } else {
              this.close();
            }
          },
        },
        el: {
          keydown: (e) => {
            if (this.isDisabled) {
              return;
            }

            switch(e.keyCode) {
            case KEY_CODE.TAB:
              this.els.el.removeClass('selected');
              break;
            case KEY_CODE.ENTER:
            case KEY_CODE.SPACE:
              if (this.selectedIndex === -1) {
                this.selectedIndex = 0;
                this.selectItem(this.selectedIndex);
              }

              this.keydown(e);
              break;
            case KEY_CODE.PAGE_UP:
            case KEY_CODE.HOME:
              this.selectedIndex = 0;
              this.selectItem(this.selectedIndex, e);
              break;
            case KEY_CODE.PAGE_DOWN:
            case KEY_CODE.END:
              this.selectedIndex = this.els.itemEls.target.length - 1;
              this.selectItem(this.selectedIndex, e);
              break;
            case KEY_CODE.LEFT:
            case KEY_CODE.UP:
              if (this.selectedIndex !== -1) {
                this.selectNext(-1, e);
              }
              break;
            case KEY_CODE.RIGHT:
            case KEY_CODE.DOWN:
              if (this.selectedIndex !== -1) {
                this.selectNext(1, e);
              } else {
                this.selectItem(0, e);
              }
              break;
            default:
              this.selectItem(this.getSelectedItemIndex(e.keyCode), e);
              break;
            }
          },
        },
        btnEl: {
          click: (e) => {
            e.preventDefault();
            e.stopPropagation();

            if (this.isDisabled) {
              return;
            }

            // this.els.btnEl.removeClass('data-in');
            this.els.el.toggleClass('selected');

            if (this.els.el.hasClass('selected')) {
              this.els.docEl.off('click', this.eventHandler.docEl.click);
              this.els.docEl.on('click', this.eventHandler.docEl.click);
              this.open();
            } else {
              this.close();
            }
          },
        },
        selectEl: {
          change: (e) => {
            this.selectedIndex = e.target.selectedIndex;
            this.els.btnTextEl.text(e.target.options[this.selectedIndex].text);
            this.select();
          },
        },
        itemEls: {
          click: (e) => {
            e.preventDefault();
            const itemEl = $q(e.target);

            if (itemEl.hasClass('disabled')) {
              return;
            }

            const index = itemEl.closest('li').index();
            this.change(index);

            // this.els.btnEl.addClass('data-in');
            this.close();
            this.els.btnEl.focus();
          },
        },
      };

      this.init();
    }

    init() {
      if (Dropdown.instances.has(this.els.el.target[0])) {
        return;
      }

      Dropdown.instances.set(this.els.el.target[0], this);

      this.setElements();
      this.bindEvents();
      this.update();
      if(this.selectedIndex > -1) {
        this.selectItem(this.selectedIndex);
      }
    }

    reInit(selectedIndex) {
      this.els.selectEl = this.els.el.find('select');
      this.els.btnEl = this.els.el.find('.dropdown__cta');
      this.els.listWrapEl = this.els.el.find('.dropdown__list-wrap');
      this.options = [...this.els.selectEl.target[0].options];

      this.removeElements();
      this.setElements();
      this.bindEvents();
      this.update();

      if(selectedIndex > -1) {
        this.selectItem(selectedIndex);
      }
    }

    removeElements() {
      this.els.btnEl.remove();
      this.els.listWrapEl.remove();
    }

    setElements() {
      const selectEl = this.els.selectEl.target[0];

      // eslint-disable-next-line dot-notation
      let defaultMessage = selectEl.dataset['defaultMessage'];
      if (!defaultMessage) {
        defaultMessage = selectEl.options[selectEl.selectedIndex].text;
      } else {
        selectEl.selectedIndex = -1;
      }

      this.selectedIndex = selectEl.selectedIndex;
      this.els.el.append(`<a class="dropdown__cta" title="${selectEl.title}" href="#" role="combobox" aria-haspopup="listbox" aria-expanded="false"><span>${defaultMessage}</span></a>`);
      this.els.btnEl = this.els.el.find('.dropdown__cta');
      this.els.btnTextEl = this.els.btnEl.find('span');
      this.els.el.append('<div class="dropdown__list-wrap scrollbar"></div>');
      this.els.listWrapEl = this.els.el.find('.dropdown__list-wrap');
      this.els.listWrapEl.append('<ul class="dropdown__option-list scrollbar__contents" role="listbox" tabindex="0">');
      this.els.listEl = this.els.listWrapEl.find('.dropdown__option-list');

      this.options.forEach((el) => {
        this.els.listEl.append(`<li class="dropdown__option"><a href="#" role="option"><span>${el.text}</span></a></li>`);
      });

      this.els.itemEls = this.els.listEl.find('li>a');
      scrollbar.init(this.els.listWrapEl.target[0]);
      this.select();
    }

    select() {
      this.els.itemEls.removeAttr('aria-selected');
      this.els.itemEls.removeClass('active');

      const selectedItem = this.els.itemEls.eq(this.selectedIndex);
      selectedItem.addClass('active');
      selectedItem.attr('aria-selected', true);
    }

    bindEvents() {
      this.els.btnEl.off('click').on('click', this.eventHandler.btnEl.click);
      this.els.itemEls.off('click').on('click', this.eventHandler.itemEls.click);
      this.els.selectEl.off('change').on('change', this.eventHandler.selectEl.change);
      this.els.el.off('keydown').on('keydown', this.eventHandler.el.keydown);
    }

    update() {
      if (this.els.el.hasClass('selected')) {
        this.els.el.removeClass('selected');
        this.els.btnEl.trigger('click');
      }

      this.isDisabled = this.els.el.hasClass('disabled');

      if (this.isDisabled) {
        this.els.btnEl.attr('tabindex', '-1');
        this.els.btnEl.attr('aria-disabled', 'true');
      } else {
        this.els.btnEl.removeAttr('tabindex');
        this.els.btnEl.attr('aria-disabled', 'false');
      }

      this.els.itemEls.removeClass('disabled');
      this.els.itemEls.removeAttr('tabindex');
      this.els.itemEls.attr('aria-disabled', 'false');

      this.itemMappedIndices = [];
      this.itemMappedIndicesExclDisabled = [];
      let mappingIndex = 0;

      this.options.forEach((option, index) => {
        this.itemMappedIndices.push(-1);
        if (option.disabled) {
          const itemEl = this.els.itemEls.eq(index);
          itemEl.addClass('disabled');
          itemEl.attr('tabindex', '-1');
          itemEl.attr('aria-disabled', 'true');
        } else {
          this.itemMappedIndices[index] = mappingIndex++;
          this.itemMappedIndicesExclDisabled.push(index);
        }
      });
    }

    open() {
      this.els.el.css({ 'z-index': 1 });

      if (this.els.selectEl.target[0].selectedIndex !== -1) {
        this.els.itemEls.eq(this.els.selectEl.target[0].selectedIndex).focus();
      }

      this.els.btnEl.attr('aria-expanded', true);
      this.isOpen = true;

      this.resize();
    }

    close(){
      this.els.el.css({ 'z-index': '' });
      this.els.el.removeAttr('z-index');
      this.els.el.removeClass('selected');
      this.isOpen = false;
      this.els.btnEl.attr('aria-expanded', false);
      this.els.docEl.off('click', this.eventHandler.docEl.click);
      this.els.btnEl.focus();
    }

    resize() {
      scrollbar.resize(this.els.listWrapEl.target[0]);
      // this.els.listEl.css({ 'height': null });
      // this.els.listEl.css({ 'height': `${this.els.listWrapEl.height()}px` });
    }

    change(index) {
      const selectEl = this.els.selectEl.target[0];
      if (selectEl.selectedIndex !== index) {
        selectEl.selectedIndex = index;
        this.selectedIndex = index;
        this.els.selectEl.trigger('change');
      }
    }

    keydown(e) {
      this.els.btnEl.trigger('click');
      // this.els.btnEl.addClass('data-in');
      e.preventDefault();
    }

    selectNext(next, e) {
      let actualIndex = -1;
      let index = -1;

      if (this.itemMappedIndices[this.selectedIndex] === -1) {
        index = 0;
      } else {
        index = this.itemMappedIndices[this.selectedIndex];
      }

      index += next;

      if (index < 0) {
        actualIndex = this.itemMappedIndicesExclDisabled[0];
      } else if (index > this.itemMappedIndicesExclDisabled.length - 1) {
        actualIndex = this.itemMappedIndicesExclDisabled[this.itemMappedIndicesExclDisabled.length - 1];
      } else {
        actualIndex = this.itemMappedIndicesExclDisabled[index];
      }

      if (actualIndex !== -1) {
        const itemEl = this.els.itemEls.target[actualIndex];
        itemEl.focus();
        this.change(actualIndex);
      }

      if (e) {
        e.preventDefault();
      }
    }

    selectItem(index, e) {
      if (index < 0) {
        return;
      }

      let actualIndex = -1;
      if (index === 0) {
        actualIndex = this.itemMappedIndicesExclDisabled[0];
      } else if (index === this.itemMappedIndices.length - 1) {
        actualIndex = this.itemMappedIndicesExclDisabled[this.itemMappedIndicesExclDisabled.length - 1];
      } else {
        if (this.itemMappedIndices[index] !== -1) {
          actualIndex = index;
        }
      }

      if (actualIndex !== -1) {
        const itemEl = this.els.itemEls.target[actualIndex];
        itemEl.focus();
        this.change(actualIndex);
      }

      if (e) {
        e.preventDefault();
      }
    }

    getSelectedItemIndex(code) {
      const engPattern =  /[A-Z]/;
      const charCode = code - 48 * Math.floor(code / 48);
      const char = String.fromCharCode((96 <= code) ? charCode : code);

      let isFirst = true;
      let firstMatchItemIndex = -1;
      const originIndex = this.selectedIndex;

      this.els.itemEls.target.forEach((el, index) => {
        const value = el.textContent.substring(0, 1).toUpperCase();
        const isDisabled = $q(el).hasClass('disabled');

        if (engPattern.test(value) && value === char && !isDisabled) {
          if (firstMatchItemIndex === -1) {
            firstMatchItemIndex = index;
          }
        }

        if (engPattern.test(value) && value === char && this.selectedIndex < index && isFirst && !isDisabled) {
          this.selectedIndex = index;
          isFirst = false;
        }
      });

      if (originIndex === this.selectedIndex && firstMatchItemIndex !== -1) {
        this.selectedIndex = firstMatchItemIndex;
      }

      return this.selectedIndex;
    }
  }

  Dropdown.instances = new WeakMap();

  const dropdown = {
    initAll() {
      $q('.dropdown').target.forEach((el) => {
        if (!Dropdown.instances.has(el)) {
          new Dropdown(el);
        }
      });
    },
    init(el) {
      if (!Dropdown.instances.has(el)) {
        new Dropdown(el);
      }
    },
    reInit(el, selectedIndex = -1) {
      if (!Dropdown.instances.has(el)) {
        new Dropdown(el, selectedIndex);
      } else {
        Dropdown.instances.get(el).reInit(selectedIndex);
      }
    },
  };

  window.sg.common.dropdown = dropdown;
  $q.ready(dropdown.initAll);
})();

(() => {
  const $q = window.sg.common.$q;
  const bezierEasing = window.BezierEasing;
  const lazyLoad = window.sg.common.lazyLoad;

  class Fab {
    constructor(el) {
      this.el = el;
      this.init();
    }

    init() {
      this.scrollPos = (document.body.scrollTop || document.documentElement.scrollTop);
      this.isAnim = false;
      this.duration = 600;
      this.easing = bezierEasing(0.4, 0.0, 0.2, 1.0);
      this.bindEvent();
    }

    bindEvent() {
      this.handleScroll = this.handleScroll.bind(this);
      window.addEventListener('scroll', this.handleScroll);

      this.scrollToTop = this.scrollToTop.bind(this);
      this.el.addEventListener('click', this.scrollToTop);
    }

    handleScroll() {
      const curScrollPos = (document.body.scrollTop || document.documentElement.scrollTop);

      if (curScrollPos >= 0 && curScrollPos !== this.scrollPos) {
        if (curScrollPos === 0 || curScrollPos > this.scrollPos || this.isAnim) {
          this.el.classList.remove('show');
        } else {
          this.el.classList.add('show');
        }
        this.scrollPos = curScrollPos;
      }
    }

    scrollToTop() {
      const curScrollPos = (document.body.scrollTop || document.documentElement.scrollTop);

      const render = (p) => {
        window.scrollTo(0, curScrollPos - curScrollPos * p);

        if (p === 1) {
          lazyLoad.setDisabled(false);
        }
      };

      if (!this.isAnim) {
        lazyLoad.setDisabled();
        this.animate(render);
      }
    }

    animate(render) {
      const start = Date.now();
      this.isAnim = true;

      const animation = () => {
        const p = (Date.now() - start) / this.duration;

        if (p > 1) {
          render(1);
          this.isAnim = false;
        } else {
          requestAnimationFrame(animation);
          render(this.easing(p));
        }
      };

      requestAnimationFrame(animation);
    }
  }

  Fab.instance = null;

  const fab = {
    init() {
      const el = document.querySelector('.fab');

      if (el && !Fab.instance) {
        Fab.instance = new Fab(el);
      }
    },
  };

  $q.ready(fab.init);
})();

(() => {
  const $q = window.sg.common.$q;

  class TextField {
    constructor(el) {
      this.els = {
        el,
        inputEl: el.querySelector('input, textArea'),
        clearButtonEl: el.querySelector('.icon'),
        assistiveMsgEl: el.querySelector('.assistive-message'),
        errorMsgEl: el.querySelector('.error-message'),
        successMsgEl: el.querySelector('.success-message'),
      };

      this.init();
    }

    init() {
      if (TextField.instances.has(this.els.el)) {
        return;
      }

      TextField.instances.set(this.els.el, this);

      this.bindEvents();
    }

    setAssistiveMessage(assistiveMessage) {
      this.els.assistiveMsgEl.innerText = assistiveMessage;
    }

    setErrorMessage(errorMessage) {
      this.els.errorMsgEl.innerText = errorMessage;
    }

    setSuccessMessage(successMessage) {
      this.els.errorMsgEl.innerText = successMessage;
    }

    setValue(value) {
      this.els.inputEl.value = value;
      if (this.els.inputEl !== document.activeElement) {
        if (value.replace(/^\s+$/, '') !== '') {
          this.els.el.classList.add('text-field--active');
        } else {
          this.els.el.classList.remove('text-field--active');
        }
      }
    }

    focusIn() {
      this.els.el.classList.add('text-field--focus');
    }

    focusOut(e) {
      this.els.el.classList.remove('text-field--focus');

      if (e.target.value.replace(/^\s+$/, '') !== '') {
        this.els.el.classList.add('text-field--active');
      } else {
        this.els.el.classList.remove('text-field--active');
      }
    }

    bindEvents() {
      this.focusIn = this.focusIn.bind(this);
      this.focusOut = this.focusOut.bind(this);
      this.els.inputEl.addEventListener('focus', this.focusIn);
      this.els.inputEl.addEventListener('blur', this.focusOut);
      
      if (this.els.clearButtonEl) {
        this.els.clearButtonEl.addEventListener('click', () => {
          this.els.inputEl.value = '';
          this.els.el.classList.remove('text-field--active');
        });
      }
    }
  }

  TextField.instances = new WeakMap();

  const textField = {
    initAll() {
      [...document.querySelectorAll('.text-field')].forEach((el) => {
        if (!TextField.instances.has(el)) {
          new TextField(el);
        }
      });
    },
    init(el) {
      return TextField.instances.has(el) ? TextField.instances.get(el) : new TextField(el);
    },
    setAssistiveMessage(el, message) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setAssistiveMessage(message);
      }
    },
    setErrorMessage(el, message) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setErrorMessage(message);
      }
    },
    setSuccessMessage(el, message) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setSuccessMessage(message);
      }
    },
    setValue(el, value) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setValue(value);
      }
    },
  };

  window.sg.common.textField = textField;
  $q.ready(() => textField.initAll());
})();

(() => {
  const $q = window.sg.common.$q;
  const { getCurrentDevice } = window.sg.common.utils;

  class TextField {
    constructor(el) {
      this.els = {
        el,
        inputWrapEl: null,
        hintTextEl: null,
        inputWrapOutlineEl: null,
        inputEl: null,
        textAreaEl: null,
        voiceInputBtnEl: null,
        deleteBtnEl: null,
        errorIconEl: null,
        openDownBtnEl: null,
        iconEls: [],
        textLengthEl: null,
        assistiveMsgEl: null,
        errorMsgEl: null,
        successMsgEl: null,
      };

      this.disabled = false;
      this.isNoTitle = false;
      this.isMultiLine = false;
      this.isMultiLineHint = false;
      this.isCheckTextLength = false;
      this.maxLength = 0;
      this.device = '';
      this.init();
    }

    init() {
      if (TextField.instances.has(this.els.el)) {
        return;
      }

      TextField.instances.set(this.els.el, this);

      this.setElements();
      this.bindEvents();
    }

    reInit() {
      this.unBindEvents();
      this.setElements();
      this.bindEvents();
    }

    destroy() {
      this.unBindEvents();

      if (TextField.instances.has(this.els.el)) {
        TextField.instances.delete(this.els.el);
      }

      this.els = null;
    }

    setElements() {
      this.els.inputEl = this.els.el.querySelector('.text-field-v2__input');
      this.els.textAreaEl = this.els.el.querySelector('.text-field-v2__input-multi-line');
      this.els.voiceInputBtnEl = this.els.el.querySelector('.text-field-v2__input-icon.voice-input');
      if (this.els.voiceInputBtnEl) {
        this.els.iconEls.push(this.els.voiceInputBtnEl);
      }

      this.els.deleteBtnEl = this.els.el.querySelector('.text-field-v2__input-icon.delete');
      if (this.els.deleteBtnEl) {
        this.els.iconEls.push(this.els.deleteBtnEl);
      }

      this.els.errorIconEl = this.els.el.querySelector('.text-field-v2__input-icon.error');
      if (this.els.errorIconEl) {
        this.els.iconEls.push(this.els.errorIconEl);
      }

      this.els.openDownBtnEl = this.els.el.querySelector('.text-field-v2__input-icon.open-down');
      if (this.els.openDownBtnEl) {
        this.els.iconEls.push(this.els.openDownBtnEl);
      }

      this.els.assistiveMsgEl = this.els.el.querySelector('.text-field-v2__text.assistive');
      this.els.errorMsgEl = this.els.el.querySelector('.text-field-v2__text.error');
      this.els.successMsgEl = this.els.el.querySelector('.text-field-v2__text.success');

      this.disabled = this.els.el.classList.contains('disabled');

      if (!this.els.inputEl && this.els.textAreaEl) {
        this.els.el.classList.add('multi-line');
        this.isMultiLine = true;
      }

      if (!this.els.iconEls.length && this.els.inputEl) {
        this.els.el.classList.add('no-icon');
      }


      this.isNoTitle = this.els.el.classList.contains('no-title');
      this.isMultiLineHint = this.els.el.hasAttribute('data-multi-line-hint');

      if (this.isMultiLineHint) {
        this.els.inputWrapEl = this.els.el.querySelector('.text-field-v2__input-wrap');
        this.els.hintTextEl = this.els.el.querySelector('.text-field-v2__hint');

        if (this.isMultiLine) {
          this.els.inputWrapOutlineEl = this.els.el.querySelector('.text-field-v2__input-wrap__outline');
        }

        this.setMultiLineHint();
      }

      this.isCheckTextLength = this.isMultiLine && this.els.el.hasAttribute('data-text-length');

      if (this.isCheckTextLength) {
        this.els.textLengthEl = this.els.el.querySelector('.text-field-v2__text.text-length');
        this.maxLength = this.els.textAreaEl.getAttribute('maxLength');
        this.setTextLength(this.els.textAreaEl.value);
      }

      this.checkActive();

      if (this.els.el.classList.contains('error')) {
        this.setState('error');
      } else if (this.els.el.classList.contains('success')) {
        this.setState('success');
      } else {
        this.setState('normal');
      }
    }

    setAccessibility(state) {
      let id;

      switch (state) {
      case 'error':
        if (this.els.errorMsgEl) {
          id = this.els.errorMsgEl.id;
        }

        break;
      case 'success':
        if (this.els.successMsgEl) {
          id = this.els.successMsgEl.id;
        }
        break;
      default:
        if (this.els.assistiveMsgEl) {
          id = this.els.assistiveMsgEl.id;
        }
      }

      if (this.els.textLengthEl) {
        id = id ? `${id} ${this.els.textLengthEl.id}` : this.els.textLengthEl.id;
      }

      if (this.els.inputEl) {
        id ? this.els.inputEl.setAttribute('aria-describedby', id)
          : this.els.inputEl.removeAttribute('aria-describedby');
      }

      if (this.els.textAreaEl) {
        id ? this.els.textAreaEl.setAttribute('aria-describedby', id)
          : this.els.textAreaEl.removeAttribute('aria-describedby');
      }
    }

    handleFocus() {
      this.els.el.classList.add('active');
      this.els.el.classList.add('focus');
    }

    handleBlur() {
      this.els.el.classList.remove('focus');
      this.checkActive();
    }

    handleInput(e) {
      if (e.target.value.replace(/^\s+$/, '') !== '') {
        if (this.els.deleteBtnEl) {
          this.els.el.classList.add('delete');
        }
      } else {
        this.els.el.classList.remove('delete');
        this.setState('normal');
      }

      this.setTextLength(e.target.value);
    }

    handleDeleteBtnClick() {
      this.els.inputEl.value = '';
      this.els.el.classList.remove('delete');
      this.setState('normal');
      this.els.inputEl.focus();
    }

    handleDeleteBtnKeypress(e) {
      if(e.keyCode === 13) {
        e.stopPropagation();
      }
    }

    checkActive() {
      let value = '';

      if (this.els.inputEl) {
        value = this.els.inputEl.value;
      }

      if (this.els.textAreaEl) {
        value = this.els.textAreaEl.value;
      }

      if (value.replace(/^\s+$/, '') !== '') {
        this.els.el.classList.add('active');
      } else {
        this.els.el.classList.remove('active');
      }
    }

    setTextLength(value) {
      if (this.isCheckTextLength) {
        this.els.textLengthEl.textContent = `${value.length}/${this.maxLength}`;
      }
    }

    bindEvents() {
      this.handleFocus = this.handleFocus.bind(this);
      this.handleBlur = this.handleBlur.bind(this);
      this.handleInput = this.handleInput.bind(this);

      if (this.els.inputEl) {
        this.els.inputEl.addEventListener('focus', this.handleFocus);
        this.els.inputEl.addEventListener('blur', this.handleBlur);
        this.els.inputEl.addEventListener('input', this.handleInput);
      }

      if (this.els.textAreaEl) {
        this.els.textAreaEl.addEventListener('focus', this.handleFocus);
        this.els.textAreaEl.addEventListener('blur', this.handleBlur);
        this.els.textAreaEl.addEventListener('input', this.handleInput);
      }

      if (this.els.deleteBtnEl) {
        this.handleDeleteBtnClick = this.handleDeleteBtnClick.bind(this);
        this.handleDeleteBtnKeypress = this.handleDeleteBtnKeypress.bind(this);

        this.els.deleteBtnEl.addEventListener('click', this.handleDeleteBtnClick);
        this.els.deleteBtnEl.addEventListener('keypress', this.handleDeleteBtnKeypress);
      }

      if (this.isMultiLineHint) {
        this.resize = this.resize.bind(this);
        window.addEventListener('resize', this.resize);
      }
    }

    unBindEvents() {
      if (this.els.inputEl) {
        this.els.inputEl.removeEventListener('focus', this.handleFocus);
        this.els.inputEl.removeEventListener('blur', this.handleBlur);
        this.els.inputEl.removeEventListener('input', this.handleInput);
      }

      if (this.els.textAreaEl) {
        this.els.textAreaEl.removeEventListener('input', this.handleInput);
        this.els.textAreaEl.removeEventListener('blur', this.handleBlur);
        this.els.textAreaEl.removeEventListener('input', this.handleInput);
      }

      if (this.els.deleteBtnEl) {
        this.els.deleteBtnEl.removeEventListener('click', this.handleDeleteBtnClick);
        this.els.deleteBtnEl.removeEventListener('keypress', this.handleDeleteBtnKeypress);
      }

      if (this.isMultiLineHint) {
        window.removeEventListener('resize', this.resize);
      }
    }

    setDisabled(disabled = true) {
      this.disabled = disabled;

      if (this.disabled) {
        this.els.el.classList.add('disabled');
        [...this.els.iconEls].forEach((el) => {
          if (el && el.tagName.toUpperCase() === 'BUTTON') {
            el.disabled = true;
          }
        });
      } else {
        this.els.el.classList.remove('disabled');
        [...this.els.iconEls].forEach((el) => {
          if (el && el.tagName.toUpperCase() === 'BUTTON') {
            el.disabled = false;
          }
        });
      }
    }

    setState(state) {
      switch (state) {
      case 'error':
        if (this.els.errorIconEl) {
          this.els.el.classList.remove('delete');
        }

        this.els.el.classList.remove('success');
        this.els.el.classList.add('error');
        break;
      case 'success':
        this.els.el.classList.remove('delete');
        this.els.el.classList.remove('error');
        this.els.el.classList.add('success');
        break;
      default:
        this.els.el.classList.remove('success');
        this.els.el.classList.remove('error');
      }

      this.setAccessibility(state);
    }

    setMsg(type, msg) {
      switch (type) {
      case 'error':
        if (this.els.errorMsgEl) {
          this.els.errorMsgEl.innerText = msg;
        }
        break;
      case 'success':
        if (this.els.successMsgEl) {
          this.els.successMsgEl.innerText = msg;
        }
        break;
      default:
        if (this.els.assistiveMsgEl) {
          this.els.assistiveMsgEl.innerText = msg;
        }
      }
    }

    setMultiLineHint() {
      if (this.device === 'mobile') {
        const mobileResolution = 360;
        const basePixel = (pixel) => pixel * mobileResolution / window.innerWidth;
        const vw = (pixel) => `${(pixel * 100 / mobileResolution).toFixed(2)}vw`;

        requestAnimationFrame(() => {
          if (this.isMultiLine) {
            if (!this.isNoTitle) {
              if (!this.els.el.querySelector('.text-field-v2__fake-label.title')) {
                this.els.el.insertAdjacentHTML('afterbegin',
                  `<p class="text-field-v2__fake-label title" aria-hidden="true">${this.els.hintTextEl.textContent}</p>`);
              }

              const labelTitleEl = this.els.el.querySelector('.text-field-v2__fake-label.title');
              const labelTitleHeight = labelTitleEl.getBoundingClientRect().height;

              const x = 14;
              const y = basePixel(labelTitleHeight) + 12;
              this.els.hintTextEl.style.transform = `translate(${vw(x)}, ${vw(y)})`;
            }
          } else {
            if (!this.isNoTitle) {
              if (!this.els.el.querySelector('.text-field-v2__fake-label.title')) {
                this.els.el.insertAdjacentHTML('afterbegin',
                  `<p class="text-field-v2__fake-label title" aria-hidden="true">${this.els.hintTextEl.textContent}</p>`);
              }

              const labelTitleEl = this.els.el.querySelector('.text-field-v2__fake-label.title');
              const labelTitleHeight = labelTitleEl.getBoundingClientRect().height;

              const y = basePixel(labelTitleHeight);
              this.els.hintTextEl.style.transform = `translate(0, ${vw(y)})`;
            }

            if (!this.els.inputWrapEl.querySelector('.text-field-v2__fake-label.input')) {
              this.els.inputWrapEl.insertAdjacentHTML('afterbegin',
                `<p class="text-field-v2__fake-label input" aria-hidden="true">${this.els.hintTextEl.textContent}</p>`);
            }

            const labelInputEl = this.els.el.querySelector('.text-field-v2__fake-label.input');
            const labelInputHeight = labelInputEl.getBoundingClientRect().height;
            this.els.inputEl.style.height = vw(basePixel(labelInputHeight));

            this.els.iconEls.forEach((el) => {
              el.style.bottom = vw(basePixel(labelInputHeight) / 2 - 6);
            });
          }
        });
      } else {
        const labelTitleEl = this.els.el.querySelector('.text-field-v2__fake-label.title');

        if (labelTitleEl) {
          labelTitleEl.remove();
        }

        const labelInputEl = this.els.el.querySelector('.text-field-v2__fake-label.input');

        if (labelInputEl) {
          labelInputEl.remove();
        }

        this.els.hintTextEl.style = '';

        if (this.els.inputEl) {
          this.els.inputEl.style = '';
        }

        this.els.iconEls.forEach((el) => {
          el.style = '';
        });
      }
    }

    resize() {
      const device = getCurrentDevice();
      if (this.device !== device) {
        this.device = device;
        this.setMultiLineHint();
      }
    }
  }

  TextField.instances = new WeakMap();
  window.sg.components.registerClass('textFieldv2', TextField);

  const textField = {
    initAll() {
      [...document.querySelectorAll('.text-field-v2:not([data-auto-init="false"])')].forEach((el) => {
        if (!TextField.instances.has(el)) {
          new TextField(el);
        }
      });
    },
    init(el) {
      if (!TextField.instances.has(el)) {
        new TextField(el);
      }
    },
    reInit(el) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).reInit();
      } else {
        new TextField(el);
      }
    },
    destroy(el) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).destroy();
      }
    },
    setDisabled(el, disabled = true) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setDisabled(disabled);
      }
    },
    // state = normal, error, success
    setState(el, state) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setState(state);
      }
    },
    // type = assistive, error, success
    setMsg(el, type, msg) {
      if (TextField.instances.has(el)) {
        TextField.instances.get(el).setMsg(type, msg);
      }
    },
  };

  window.sg.common.textFieldv2 = textField;

  $q.ready(textField.initAll);
})();

(() => {
  const $q = window.sg.common.$q;

  class Switch {
    constructor(el) {
      this.els = {
        el: $q(el),
        buttonEl: null,
      };

      this.on = false;

      this.init();
    }

    init() {
      if (Switch.instances.has(this.els.el.target[0])) {
        return;
      }

      Switch.instances.set(this.els.el.target[0], this);

      this.setElements();
      this.bindEvents();
    }

    reInit() {
      this.setElements();
      this.bindEvents();
    }

    setElements() {
      this.els.buttonEl = this.els.el.find('.switch-v2__button');
      this.els.textEl = this.els.el.find('.switch-v2__button-text');

      this.on = this.els.buttonEl.hasClass('on');

      this.els.el.addClass('initialized');
    }

    bindEvents() {
      this.els.buttonEl.off('click').on('click', () => {
        this.els.el.removeClass('initialized');

        if (this.els.buttonEl.hasClass('on')) {
          this.els.buttonEl.removeClass('on');
          this.on = false;
        } else {
          this.els.buttonEl.addClass('on');
          this.on = true;
        }
      });
    }
  }

  Switch.instances = new WeakMap();

  const switchButton = {
    initAll() {
      $q('.switch-v2').target.forEach((el) => {
        if (!Switch.instances.has(el)) {
          new Switch(el);
        }
      });
    },
    reInit(el) {
      if (Switch.instances.has(el)) {
        Switch.instances.get(el).reInit();
      } else {
        new Switch(el);
      }
    },
  };

  window.sg.common.switchv2 = switchButton;
  $q.ready(switchButton.initAll());
})();

(() => {
  const $q = window.sg.common.$q;
  const {
    getCurrentDevice,
    extend,
    closest,
    addEventListener,
    removeAllEventListeners,
    triggerEvent,
    isRtl,
    getNormalizedScrollLeft,
    setNormalizedScrollLeft,
  } = window.sg.common.utils;
  const bezierEasing = window.BezierEasing;

  class Indicator {
    constructor(el) {
      this.els = {
        el,
        wrap: null,
        controlEl: null,
        controlHiddenEl: null,
        indicatorListWrapEl: null,
        indicatorListEl: null,
        indicatorEls: [],
        indicatorDotEls: [],
        indicatorLineEls: [],
        indicatorPageEls: [],
        videoWrapEls: [],
        videoEls: [],
      };

      this.defaultOption = {
        type: 'label-indicator',
        play: false,
        control: false,
        autoRolling: false,
        infiniteRolling: false,
        indicators: [],
      };

      this.dotSizeSmall = 0.5;
      this.dotSizeMedium = 0.75;
      this.dotSizeLarge = 1;
      this.transitionDuration = 400;
      this.transitionTimer = null;

      this.init();
    }

    init() {
      this.initValues();
      this.setElements();
      this.bindEvents();

      if (!this.option.control && !this.option.play) {
        this.select(0);
      }

      if (Indicator.instances.has(this.els.el)) {
        return;
      }

      Indicator.instances.set(this.els.el, this);
    }

    reInit() {
      this.select(-1);
      this.unBindEvents();
      this.initValues();
      this.setElements();
      this.bindEvents();
      clearTimeout(this.transitionTimer);

      if (!this.option.control && !this.option.play) {
        this.select(0);
      }
    }

    destroy() {
      this.select(-1);
      this.unBindEvents();

      if (Indicator.instances.has(this.els.el)) {
        Indicator.instances.delete(this.els.el);
      }

      this.els = null;
    }

    initValues() {
      this.option = {};
      this.playing = false;
      this.selectedIndex = -1;
      this.elapseTime = 0;
      this.device = getCurrentDevice();
      this.type = '';
      this.translateX = 0;
      this.firstIndex = 0;
      this.lastIndex = 6;
      this.maxDotNum = 7;
      this.inTransition = false;
      this.control = 'stop';
      this.role = '';

      if (this.animReqId) {
        cancelAnimationFrame(this.animReqId);
        this.animReqId = null;
      }

      this.videosLoaded = [];
      this.isRtl = isRtl();
      this.isDotSrollable = !!this.els.el.hasAttribute('data-dot-scrollable');

      if (this.isDotSrollable) {
        this.isAnim = false;
        this.duration = 200;
        this.easing = bezierEasing(0.4, 0.0, 0.2, 1.0);
      }
    }

    setElements() {
      const wrapEl = closest(this.els.el, '.indicator-container');
      if (wrapEl) {
        this.els.wrap = wrapEl;
        [...this.els.wrap.querySelectorAll('.indicator-page')].forEach((el) => {
          if (!el.classList.contains('swiper-slide-duplicate')) {
            this.els.indicatorPageEls.push(el);
          }
        });
      } else {
        this.els.wrap = null;
      }

      this.els.controlEl = this.els.el.querySelector('.indicator__controls');
      this.els.controlHiddenEl = this.els.el.querySelector('.indicator__controls > .hidden');
      this.els.indicatorEls = this.els.el.querySelectorAll('.indicator__item');
      this.els.indicatorListWrapEl = this.els.el.querySelector('.indicator__list-wrap');
      this.els.indicatorListEl = this.els.el.querySelector('.indicator__list');
      this.els.indicatorDotEls = this.els.el.querySelectorAll('.indicator__dot-inner');
      this.els.indicatorLineEls = this.els.el.querySelectorAll('.indicator__label-line-filled');

      const option = JSON.parse(JSON.stringify(this.defaultOption));

      this.role = this.els.indicatorListEl.getAttribute('role');

      [...this.els.indicatorEls].forEach((el) => {
        if (this.role === 'tablist') {
          el.setAttribute('aria-selected', 'false');
        }
        // eslint-disable-next-line dot-notation
        option.indicators.push(parseInt(el.dataset['indicatorDelay']));
      });

      // eslint-disable-next-line dot-notation
      const data = JSON.parse(this.els.el.dataset['indicatorData']);
      this.option = extend(option, data);

      if (this.els.controlEl) {
        this.option.control = true;
      }

      if (this.option.autoRolling) {
        this.option.play = false;
      }

      this.setType();
      this.setDots();
    }

    setType() {
      if (getCurrentDevice() === 'desktop') {
        switch (this.option.type) {
        case 'dot-indicator':
          this.els.el.classList.remove('label-indicator');
          this.els.el.classList.add('dot-indicator');
          this.type = 'dot-indicator';
          break;
        case 'dot-indicator-mobile-only':
          this.els.el.classList.remove('label-indicator');
          this.els.el.classList.add('dot-indicator');
          this.els.el.classList.add('dot-indicator-mobile-only');
          this.type = 'dot-indicator';
          break;
        case 'label-indicator':
        default:
          this.els.el.classList.remove('dot-indicator');
          this.els.el.classList.remove('dot-indicator-mobile-only');
          this.els.el.classList.add('label-indicator');
          this.type = 'label-indicator';
        }
      } else {
        if (this.option.type === 'dot-indicator-mobile-only') {
          this.els.el.classList.add('dot-indicator-mobile-only');
        }

        this.els.el.classList.remove('label-indicator');
        this.els.el.classList.add('dot-indicator');
        this.type = 'dot-indicator';
      }

      if (this.type === 'dot-indicator' && this.option.indicators.length > this.maxDotNum) {
        this.els.indicatorListWrapEl.classList.add('dot-more');
      }
    }

    bindEvents() {
      [...this.els.indicatorEls].forEach((el, i) => {
        addEventListener(el, 'click', () => this.select(i));
        addEventListener(el, 'mouseenter', () => this.handleMouseEnter(i));
        addEventListener(el, 'mouseleave', () => this.handleMouseLeave(i));
        addEventListener(el, 'focusin', () => {
          this.handleMouseEnter(i);
          if (!this.isDotSrollable) {
            this.setDotsFocused(i);
          }
        });
        addEventListener(el, 'focusout', () => {
          this.handleMouseLeave(i);
        });
      });

      if (this.option.control) {
        addEventListener(this.els.controlEl, 'click', () => {
          this.handleControl();
        });
      }

      this.resize = this.resize.bind(this);
      window.addEventListener('resize', this.resize);
    }

    unBindEvents() {
      [...this.els.indicatorEls].forEach((el) => {
        removeAllEventListeners(el, 'click');
        removeAllEventListeners(el, 'mouseenter');
        removeAllEventListeners(el, 'mouseleave');
        removeAllEventListeners(el, 'focusin');
        removeAllEventListeners(el, 'focusout');
      });

      if (this.option.control) {
        removeAllEventListeners(this.els.controlEl, 'click');
      }

      window.removeEventListener('resize', this.resize);
    }

    resize() {
      const device = getCurrentDevice();
      if (this.device !== device) {
        this.device = device;
        this.setType();

        if (this.type === 'label-indicator') {
          this.els.indicatorListEl.style.transform = '';
          [...this.els.indicatorEls].forEach((el) => {
            el.removeAttribute('tabindex');
            el.removeAttribute('aria-hidden');
            el.style.visibility = '';
          });

          // if (!this.playing && this.selectedIndex !== -1) {
          //   this.els.indicatorLineEls[this.selectedIndex].style.transform = `scaleX(${this.elapseTime / this.option.indicators[this.selectedIndex]})`;
          // }

          // for (let i = 0; i < this.els.indicatorEls.length; i++) {
          //   this.els.indicatorEls[i].removeAttribute('tabindex');
          // }
        }

        this.select(this.selectedIndex, true);
      }

      this.setDots();
    }

    handleMouseEnter(index) {
      const el = this.els.indicatorEls[index];
      el.classList.add('indicator__item--hover');
      el.classList.remove('indicator__item--not-hover');
    }

    handleMouseLeave(index) {
      const el = this.els.indicatorEls[index];

      const hover = el.matches ? el.matches(':hover') : el.msMatchesSelector(':hover');
      const focus = el.matches ? el.matches(':focus') : el.msMatchesSelector(':focus');

      if (!hover && !focus) {
        el.classList.remove('indicator__item--hover');
        el.classList.add('indicator__item--not-hover');
      }
    }

    handleControl(state = null) {
      let control = '';
      if (state ? !this.playing && state === 'play' : !this.playing) {
        // this.option.autoRolling = true;
        this.control = 'play';
        this.selectedIndex > -1 ? this.play() : this.select(0);
        control = 'stop';
      } else if (state ? this.playing && state === 'pause' : this.playing) {
        // this.option.autoRolling = false;
        this.control = 'stop';
        this.pause();
        control = 'play';
      }

      if (control !== '') {
        if (this.option.control) {
          let tag = this.els.controlEl.getAttribute('an-la');

          if (tag) {
            tag = `${tag.substring(0, tag.length - 4)}${control}`;
            this.els.controlEl.setAttribute('an-la', tag);
          }

          if (!state) {
            triggerEvent(this.els.el, 'controlChange', { index: this.selectedIndex, playing: this.playing });
          }
        }
      }
    }

    select(selectingIndex, isDelayInit = false, reiterate = false) {
      if (!this.els.indicatorEls.length) {
        return; 
      }
      
      const selectedIndex = this.selectedIndex;
      if (selectedIndex !== selectingIndex || isDelayInit) {
        if (this.animReqId) {
          cancelAnimationFrame(this.animReqId);
          this.animReqId = null;
        }

        if (selectedIndex > -1) {
          if (this.els.indicatorEls[selectedIndex].classList.contains('indicator__item--active')) {
            this.els.indicatorEls[selectedIndex].classList.remove('indicator__item--active');
          }


          if (this.role === 'tablist') {
            this.els.indicatorEls[selectedIndex].setAttribute('aria-selected', 'false');
          } else {
            this.els.indicatorEls[selectedIndex].removeAttribute('title');
          }

          if (this.type === 'label-indicator' && this.els.indicatorLineEls[selectedIndex]) {
            this.els.indicatorLineEls[selectedIndex].style.transform = '';
          }
        }

        if (selectingIndex < 0) {
          if (this.option.control) {
            this.pause();
          }

          this.selectedIndex = selectingIndex;
          return;
        }

        this.selectedIndex = selectingIndex;

        if (!this.els.indicatorEls[this.selectedIndex].classList.contains('indicator__item--active')) {
          this.els.indicatorEls[this.selectedIndex].classList.add('indicator__item--active');
        }

        if (this.role === 'tablist') {
          this.els.indicatorEls[this.selectedIndex].setAttribute('aria-selected', 'true');
        } else {
          this.els.indicatorEls[this.selectedIndex].setAttribute('title', 'selected');
        }

        if (reiterate) {
          triggerEvent(this.els.el, 'indicatorReiterate');
        }

        triggerEvent(this.els.el, 'indicatorMove', this.selectedIndex);

        this.inTransition = true;

        const play = (transitionDuration = this.transitionDuration) => {
          this.transitionTimer = setTimeout(() => {
            this.elapseTime = 0;
            this.inTransition = false;

            if (this.selectedIndex === selectingIndex
              && (this.control === 'play' || (!this.option.autoRolling && this.option.play))) {
              this.play();
            }
          }, transitionDuration > 0 ? transitionDuration : 0);
        };

        let videoInitTimeout = 0;
        const setVideo = (el) => {
          const videoEl = this.els.videoEls[this.selectedIndex] ?
            this.els.videoEls[this.selectedIndex] :
            this.els.videoEls[this.selectedIndex] = el.querySelector('.indicator-background video');
          if (videoEl) {
            if (videoEl.readyState < 4 && !this.videosLoaded[this.selectedIndex]) {
              const start = Date.now();
              const canPlayThrough = () => {
                videoEl.removeEventListener('canplaythrough', canPlayThrough);
                videoEl.currentTime = 0;

                // eslint-disable-next-line dot-notation
                if (this.option.indicators[this.selectedIndex] === parseInt(this.els.indicatorEls[this.selectedIndex].dataset['indicatorDelay'])) {
                  this.option.indicators[this.selectedIndex] = videoEl.duration * 1000;
                }

                this.videosLoaded[this.selectedIndex] = true;
                play(this.transitionDuration - ((Date.now() - start) + (videoInitTimeout * 200)));
              };

              videoEl.addEventListener('canplaythrough', canPlayThrough);
            } else {
              videoEl.currentTime = 0;

              // eslint-disable-next-line dot-notation
              if (this.option.indicators[this.selectedIndex] === parseInt(this.els.indicatorEls[this.selectedIndex].dataset['indicatorDelay'])) {
                this.option.indicators[this.selectedIndex] = videoEl.duration * 1000;
              }

              this.videosLoaded[this.selectedIndex] = true;
              play();
            }
          } else {
            if (videoInitTimeout < 5) {
              setTimeout(() => {
                setVideo(el);
                videoInitTimeout++;
              }, 200);
            }
          }
        };

        if (this.els.indicatorPageEls[this.selectedIndex]) {
          const videoWrapEl = this.els.videoWrapEls[this.selectedIndex] ?
            this.els.videoWrapEls[this.selectedIndex] :
            this.els.videoWrapEls[this.selectedIndex] = this.els.indicatorPageEls[this.selectedIndex].querySelector('.indicator-background .video');
          if (videoWrapEl) {
            if (videoWrapEl.dataset.videoEmbed.toUpperCase() === 'TRUE' &&
              videoWrapEl.dataset.imageDefault.toUpperCase() === 'FALSE') {
              setVideo(videoWrapEl);
            } else {
              play();
            }
          } else {
            play();
          }
        } else {
          play();
        }

        if (selectedIndex > -1 && this.els.videoEls[selectedIndex]) {
          this.els.videoEls[selectedIndex].pause();
        }

        this.setDots();
      }
    }

    moveDots() {
      if (this.type === 'dot-indicator' && this.option.indicators.length > this.maxDotNum) {
        const translateX = this.els.indicatorEls[0].getBoundingClientRect().width +
          parseFloat(this.isRtl ? getComputedStyle(this.els.indicatorEls[0]).marginLeft : getComputedStyle(this.els.indicatorEls[0]).marginRight);
        let moveX = this.firstIndex * translateX;

        if (!this.isDotSrollable) {
          moveX = this.isRtl ? moveX : -moveX;
          this.els.indicatorListEl.style.transform = `translate3d(${moveX}px,0,0)`;
        } else {
          const curScrollLeft = getNormalizedScrollLeft(this.els.indicatorListEl);
          const maxScrollLeft = this.els.indicatorListEl.scrollWidth - Math.floor(this.els.indicatorListEl.getBoundingClientRect().width);

          if (moveX > maxScrollLeft) {
            moveX = maxScrollLeft;
          }

          if (this.isRtl) {
            moveX = maxScrollLeft - moveX - curScrollLeft;
          } else {
            moveX = moveX - curScrollLeft;
          }

          const render = (p) => {
            setNormalizedScrollLeft(this.els.indicatorListEl, curScrollLeft + moveX * p);
          };

          const animate = () => {
            if (!this.isAnim) {
              const start = Date.now();
              this.isAnim = true;

              const animation = () => {
                const p = (Date.now() - start) / this.duration;

                if (p > 1) {
                  render(1);
                  this.isAnim = false;
                } else {
                  requestAnimationFrame(animation);
                  render(this.easing(p));
                }
              };

              requestAnimationFrame(animation);
            }
          };

          if (Math.abs(moveX) > 0) {
            animate();
          }
        }
      }
    }

    setDotsFocused(index) {
      if (this.type === 'dot-indicator' && this.option.indicators.length > this.maxDotNum) {
        if (index > this.lastIndex) {
          this.firstIndex = index - 6;
          this.lastIndex = index;
          this.moveDots();
        } else if (index < this.firstIndex) {
          this.firstIndex = index;
          this.lastIndex = index + 6;
          this.moveDots();
        }
      }
    }

    setDots() {
      if (this.type === 'dot-indicator' && this.option.indicators.length > this.maxDotNum) {
        const selectedIndex = this.selectedIndex < 0 ? 0 : this.selectedIndex;

        if (selectedIndex > this.lastIndex) {
          this.firstIndex = selectedIndex - 6;
          this.lastIndex = selectedIndex;
        } else if (selectedIndex < this.firstIndex) {
          this.firstIndex = selectedIndex;
          this.lastIndex = selectedIndex + 6;
        }

        if (selectedIndex > this.lastIndex - 2) {
          const moveIndex = 2 - (this.lastIndex - selectedIndex);
          const remainIndex = this.option.indicators.length - this.lastIndex - 1;
          this.firstIndex += remainIndex >= moveIndex ? moveIndex : remainIndex;
          this.lastIndex += remainIndex >= moveIndex ? moveIndex : remainIndex;
        } else if (selectedIndex < this.firstIndex + 2) {
          const moveIndex = 2 - (selectedIndex - this.firstIndex);
          const remainIndex = this.firstIndex;
          this.firstIndex -= remainIndex >= moveIndex ? moveIndex : remainIndex;
          this.lastIndex -= remainIndex >= moveIndex ? moveIndex : remainIndex;
        }

        this.moveDots();

        for (let i = 0; i < this.els.indicatorEls.length; i++) {
          if (i < this.firstIndex || i > this.lastIndex) {
            this.els.indicatorDotEls[i].style.transform = `scale(${this.dotSizeSmall})`;
          }
        }

        this.els.indicatorDotEls[selectedIndex].style.transform = `scale(${this.dotSizeLarge})`;

        if (selectedIndex > this.lastIndex - 3) {
          for (let i = this.firstIndex + 2; i < selectedIndex; i++) {
            this.els.indicatorDotEls[i].style.transform = `scale(${this.dotSizeLarge})`;
          }

          if (this.firstIndex > 1) {
            this.els.indicatorDotEls[this.firstIndex].style.transform = `scale(${this.dotSizeSmall})`;
            this.els.indicatorDotEls[this.firstIndex + 1].style.transform = `scale(${this.dotSizeMedium})`;
          } else if (this.firstIndex > 0) {
            this.els.indicatorDotEls[this.firstIndex].style.transform = `scale(${this.dotSizeMedium})`;
          }

          if (this.els.indicatorDotEls[selectedIndex + 1]) {
            const size = parseFloat(this.els.indicatorDotEls[selectedIndex + 1].style.transform.replace(/[^\d.]/g, ''));
            if (this.dotSizeMedium >= size) {
              this.els.indicatorDotEls[selectedIndex + 1].style.transform = `scale(${this.dotSizeMedium})`;
            }
          }

          if (this.els.indicatorDotEls[selectedIndex + 2]) {
            const size = parseFloat(this.els.indicatorDotEls[selectedIndex + 2].style.transform.replace(/[^\d.]/g, ''));
            if (this.dotSizeSmall >= size) {
              this.els.indicatorDotEls[selectedIndex + 2].style.transform = `scale(${this.dotSizeSmall})`;
            }
          }
        }

        if (selectedIndex < this.firstIndex + 3) {
          for (let i = selectedIndex + 1; i < this.lastIndex - 1; i++) {
            this.els.indicatorDotEls[i].style.transform = `scale(${this.dotSizeLarge})`;
          }

          if (this.lastIndex < this.option.indicators.length - 2) {
            this.els.indicatorDotEls[this.lastIndex].style.transform = `scale(${this.dotSizeSmall})`;
            this.els.indicatorDotEls[this.lastIndex - 1].style.transform = `scale(${this.dotSizeMedium})`;
          } else if (this.lastIndex < this.option.indicators.length - 1) {
            this.els.indicatorDotEls[this.lastIndex].style.transform = `scale(${this.dotSizeMedium})`;
          }

          if (this.els.indicatorDotEls[selectedIndex - 1]) {
            const size = parseFloat(this.els.indicatorDotEls[selectedIndex - 1].style.transform.replace(/[^\d.]/g, ''));
            if (this.dotSizeMedium >= size) {
              this.els.indicatorDotEls[selectedIndex - 1].style.transform = `scale(${this.dotSizeMedium})`;
            }
          }

          if (this.els.indicatorDotEls[selectedIndex - 2]) {
            const size = parseFloat(this.els.indicatorDotEls[selectedIndex - 2].style.transform.replace(/[^\d.]/g, ''));
            if (this.dotSizeSmall >= size) {
              this.els.indicatorDotEls[selectedIndex - 2].style.transform = `scale(${this.dotSizeSmall})`;
            }
          }
        }
      }
    }

    setIndicatorDelay(index, delay) {
      this.option.indicators[index] = delay;
      // eslint-disable-next-line dot-notation
      // this.els.indicatorEls[index].dataset['indicatorDelay'] = this.option.indicators[index];
    }

    play() {
      if (!this.inTransition) {
        if (this.option.control) {
          this.els.controlEl.classList.remove('indicator__controls--play');
          this.els.controlHiddenEl.innerHTML = 'stop';
        }

        this.playing = true;

        if (this.els.videoEls[this.selectedIndex] && !this.els.videoEls[this.selectedIndex].ended) {
          this.els.videoEls[this.selectedIndex].play();
        }

        this.delay = this.option.indicators[this.selectedIndex] - this.elapseTime;

        if (this.delay > 0) {
          this.start = Date.now();
          this.animReqId = requestAnimationFrame(() => this.updateProgress(this.selectedIndex));
        }
      }
    }

    pause() {
      if (this.option.control) {
        this.els.controlEl.classList.add('indicator__controls--play');
        this.els.controlHiddenEl.innerHTML = 'play';
      }

      this.playing = false;

      if (this.els.videoEls[this.selectedIndex]) {
        // const el = this.els.videoEls[this.selectedIndex];
        // if (el.readyState < 3) {
        //   const handleCanplay = () => {
        //     el.removeEventListener('canplay', handleCanplay);
        //     el.pause();
        //   };
        //
        //   el.addEventListener('canplay', handleCanplay);
        // } else {
        //   el.pause();
        // }
        this.els.videoEls[this.selectedIndex].pause();
      }

      if (this.animReqId) {
        this.elapseTime += (Date.now() - this.start);
        cancelAnimationFrame(this.animReqId);
        this.animReqId = null;
      }
    }

    updateProgress(index) {
      if (this.selectedIndex !== index) {
        return;
      }

      const delta = Date.now() - this.start;

      if (delta >= this.delay) {
        triggerEvent(this.els.el, 'indicatorDelayEnd', { index: this.selectedIndex });

        if (this.option.autoRolling) {
          if (index === this.option.indicators.length - 1) {
            if (this.option.infiniteRolling) {
              this.select(0, false, true);
            } else {
              this.select(-1);
            }
          } else {
            this.select(index + 1);
          }
        }

        return;
      }

      if (this.type === 'label-indicator') {
        const elapsedTime = this.elapseTime + delta;
        let scaleX = elapsedTime / this.option.indicators[index];

        if (scaleX > 1) {
          scaleX = 100;
        }

        this.els.indicatorLineEls[index].style.transform = `scaleX(${scaleX})`;
      }

      this.animReqId = requestAnimationFrame(() => this.updateProgress(index));
    }
  }

  Indicator.instances = new WeakMap();
  if (window.sg.components.registerClass) {
    window.sg.components.registerClass('indicator', Indicator);
  }

  const indicator = {
    initAll() {
      [...document.querySelectorAll('.indicator:not([data-auto-init="false"])')].forEach((el) => {
        if (!Indicator.instances.has(el)) {
          new Indicator(el);
          // el.addEventListener('indicatorMove', (e) => console.log('indicatorMove', e.detail));
          // el.addEventListener('controlChange', (e) => console.log('controlChange', e.detail));
          // el.addEventListener('indicatorReiterate', (e) => console.log('indicatorReiterate'));
          // el.addEventListener('indicatorDelayEnd', (e) => console.log('indicatorDelayEnd', e.detail));
        }
      });
    },
    init(el) {
      return Indicator.instances.has(el) ? Indicator.instances.get(el) : new Indicator(el);
    },
    reInit(el) {
      if (Indicator.instances.has(el)) {
        Indicator.instances.get(el).reInit();
      } else {
        new Indicator(el);
      }
    },
    move(el, index, isDelayInit = false) {
      if (Indicator.instances.has(el)) {
        Indicator.instances.get(el).select(index, isDelayInit);
      }
    },
    play(el) {
      if (Indicator.instances.has(el)) {
        Indicator.instances.get(el).handleControl('play');
      }
    },
    pause(el) {
      if (Indicator.instances.has(el)) {
        Indicator.instances.get(el).handleControl('pause');
      }
    },
    setIndicatorDelay(el, index, delay) {
      if (Indicator.instances.has(el)) {
        Indicator.instances.get(el).setIndicatorDelay(index, delay);
      }
    },
  };

  window.sg.common.indicator = indicator;
  $q.ready(indicator.initAll);
})();

(() => {
  const $q = window.sg.common.$q;

  class FirstImage {
    constructor(el) {
      this.els = {
        el,
        mobileSourceEl: el.querySelector('source:nth-of-type(1)'),
        desktopSourceEl: el.querySelector('source:nth-of-type(2)'),
        desktopOverSourceEl: el.querySelector('source:nth-of-type(3)'),
        imgEl: el.querySelector('img'),
      };

      this.currentPlayingVideoEl = {};
      this.focusTargetEl = {};

      this.init();
    }

    init() {
      if (FirstImage.instances.get(this.els.el)) {
        return;
      }

      FirstImage.instances.set(this.els.el, this);

      if ((navigator.appName === 'Netscape' && navigator.userAgent.search('Trident') !== -1) || (navigator.userAgent.indexOf('msie') !== -1)) {
        this.setFirstImage();

        window.addEventListener('resize', () => {
          this.setFirstImage();
        });
      } else {
        if (this.els.imgEl.dataset.desktopAlt) {
          this.setResponsiveAlt();

          window.addEventListener('resize', () => {
            this.setResponsiveAlt();
          });
        }
      }
    }

    setFirstImage() {
      const targetDevice = this.getTargetDevice();

      if (this.els.imgEl.dataset.targetDevice !== targetDevice) {
        let targetSrc = '';
        let srcset;

        if (targetDevice === 'mobile') {
          srcset = this.els.mobileSourceEl.getAttribute('srcset').split(',');

          if (window.devicePixelRatio < 1.5 || srcset.length === 1) {
            targetSrc = srcset[0];
          } else {
            targetSrc = srcset[1];
          }
        } else if (targetDevice === 'desktop') {
          srcset = this.els.desktopSourceEl.getAttribute('srcset').split(',');

          if (window.devicePixelRatio < 1.5 || srcset.length === 1) {
            targetSrc = srcset[0];
          } else {
            targetSrc = srcset[1];
          }
        } else if (targetDevice === 'desktop-over') {
          srcset = this.els.desktopOverSourceEl.getAttribute('srcset').split(',');

          if (window.devicePixelRatio < 1.5 || srcset.length === 1) {
            targetSrc = srcset[0];
          } else {
            targetSrc = srcset[1];
          }
        }

        targetSrc = targetSrc.trim().split(' ')[0];

        if (targetSrc !== this.els.imgEl.src) {
          this.els.imgEl.src = targetSrc;
        }

        if (this.els.imgEl.dataset.desktopAlt) {
          if (targetDevice === 'mobile') {
            this.els.imgEl.setAttribute('alt', this.els.imgEl.dataset.mobileAlt);
          } else {
            this.els.imgEl.setAttribute('alt', this.els.imgEl.dataset.desktopAlt);
          }
        }

        this.els.imgEl.dataset.targetDevice = targetDevice;
      }
    }

    setResponsiveAlt() {
      const targetDevice = this.getTargetDevice();

      if (this.els.imgEl.dataset.targetDevice !== targetDevice) {
        if (targetDevice === 'mobile') {
          this.els.imgEl.setAttribute('alt', this.els.imgEl.dataset.mobileAlt);
        } else {
          this.els.imgEl.setAttribute('alt', this.els.imgEl.dataset.desktopAlt);
        }

        this.els.imgEl.dataset.targetDevice = targetDevice;
      }
    }

    getTargetDevice() {
      let doc = window;
      let pre = 'inner';

      if (!('innerWidth' in window)) {
        pre = 'client';
        doc = document.documentElement || document.body;
      }

      const viewPortWidth = doc[`${pre}Width`];

      if (viewPortWidth < 768) {
        return 'mobile';
      } else if (viewPortWidth >= 768 && viewPortWidth < 1366) {
        return 'desktop';
      } else {
        return 'desktop-over';
      }
    }
  }


  FirstImage.instances = new WeakMap();

  const firstImage = {
    initAll() {
      [...document.querySelectorAll('.first-image')].forEach((el) => {
        if (!FirstImage.instances.has(el)) {
          new FirstImage(el);
        }
      });
    },
  };

  window.sg.common.firstImage = firstImage;
  $q.ready(firstImage.initAll);
})();

(() => {
  const $q = window.sg.common.$q;
  const KEY_CODE = window.sg.common.constants.KEY_CODE;
  const scrollbar = window.sg.common.scrollbar;
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;
  const detectTransitionEndEvent = window.sg.common.utils.detectTransitionEndEvent;
  const closest = window.sg.common.utils.closest;
  const icon = window.sg.common.icon;

  class Menu  {
    constructor(el, index = -1) {
      this.els = {
        el: $q(el),
        selectEl: null,
        fieldEl: null,
        fieldTextEl: null,
        listWrapEl: null,
        listEl: null,
        scrollWrapEl: null,
        itemWrapEls: null,
        itemEls: null,
        textFiledErrorTextEl: null,
        docEl: $q(document),
        winEl: $q(window),
      };

      this.handler = {
        docEl: {
          click: (e) => {
            if (this.isDisabled) {
              return;
            }

            e.preventDefault();

            if (closest(e.target, '.menu') !== this.els.el.target[0]) {
              this.close();
            }
          },
        },
        el: {
          keydown: (e) => {
            if (this.isDisabled) {
              return;
            }

            switch(e.keyCode) {
            case KEY_CODE.TAB:
            case KEY_CODE.ESC:
              if (this.isOpen) {
                this.close();
              }
              break;
            case KEY_CODE.PAGE_UP:
            case KEY_CODE.HOME:
              this.index = 0;
              this.selectItem(this.index, e);
              break;
            case KEY_CODE.PAGE_DOWN:
            case KEY_CODE.END:
              this.index = this.els.itemEls.target.length - 1;
              this.selectItem(this.index, e);
              break;
            case KEY_CODE.LEFT:
            case KEY_CODE.UP:
              this.selectNext(-1, e);
              break;
            case KEY_CODE.RIGHT:
            case KEY_CODE.DOWN:
              this.selectNext(1, e);
              break;
            case KEY_CODE.ENTER:
            case KEY_CODE.SPACE:
              if (getCurrentDevice() === 'mobile') {
                if (e.target === this.els.selectEl.target[0]) {
                  if (this.index === -1) {
                    this.index = 0;
                    this.selectItem(this.index);
                  }
                }
              }
              break;
            default:
              this.selectItem(this.getSelectedItemIndex(e.keyCode), e);
              break;
            }
          },
        },
        fieldEl: {
          click: (e) => {
            e.preventDefault();

            if (this.isDisabled) {
              return;
            }

            if (this.isOpen) {
              this.close();
            } else {
              this.open();
            }
          },
        },
        selectEl: {
          change: (e) => {
            const optionEls = this.els.selectEl.find('option');

            optionEls.target.forEach((optionEl) => {
              optionEl.removeAttribute('selected');
            });

            this.index = e.target.selectedIndex;

            if (this.index > -1) {
              optionEls.target[this.index].setAttribute('selected', '');
            }

            this.els.fieldTextEl.text(e.target.options[this.index].text);
            this.select();

            if (this.els.fieldEl.target[0].dataset.ariaLabel) {
              const ariaLabel = `${e.target.options[this.index].text}: ${this.els.fieldEl.target[0].dataset.ariaLabel}`;
              this.els.fieldEl.target[0].setAttribute('aria-label', ariaLabel);
            }

            if (this.els.selectEl.target[0].dataset.selectAriaLabel) {
              const selectAriaLabel = `${e.target.options[this.index].text} ${this.els.selectEl.target[0].dataset.selectAriaLabel}`;
              this.els.selectEl.target[0].setAttribute('aria-label', selectAriaLabel);
            }

            if (e.target.dataset.useLink) {
              const selectedOptionEl = optionEls.target[this.index];
              const openAction = selectedOptionEl.dataset.openAction;
              const value = selectedOptionEl.value;

              if (openAction === 'current-window') {
                window.location.href = value;
              } else if (openAction === 'new-window') {
                window.open(value, '_blank');
              }
            }

            this.setState('normal');
          },
          click: () => {
            if (getCurrentDevice() === 'mobile') {
              if (this.isOpen) {
                this.close();
              } else {
                this.open();

                /*if (this.index === -1) {
                  this.index = 0;
                  this.selectItem(this.index);
                }*/
              }
            }
          },
          keyup: (e) => {
            if (this.isDisabled) {
              return;
            }

            if (getCurrentDevice() === 'mobile') {
              if (this.isOpen && e.keyCode === KEY_CODE.ESC) {
                this.close();
              }
            }
          },
        },
        itemWrapEls: {
          click: (e) => {
            e.preventDefault();
            const itemEl = $q(e.target);

            if (itemEl.hasClass('disabled')) {
              return;
            }

            const curIndex = itemEl.closest('li').index();
            this.change(curIndex);

            this.close();
          },
        },
        winEl: {
          resize: this.resize.bind(this),
        },
      };

      this.init();
      this.selectItem(index);
    }

    init() {
      if (Menu.instances.has(this.els.el.target[0])) {
        return;
      }

      Menu.instances.set(this.els.el.target[0], this);

      this.initValues();
      this.setElements();
      this.bindEvents();
      this.update();
    }

    reInit(index = -1) {
      this.els.listWrapEl.remove();
      this.initValues();
      this.setElements();
      this.bindEvents();
      this.update();
      this.selectItem(index);
    }

    initValues() {
      this.options = {};
      this.index = -1;
      this.isOpen = false;
      this.isDisabled = false;
      this.itemMappedIndices = [];
      this.itemMappedIndicesExclDisabled = [];
      this.maxHeight = 0;
      this.maxItemNum = 11;
      this.isAnim = true;

      this.device = getCurrentDevice();
      this.defaultOpenDir = '';
      this.openDir = '';

      this.focusedIndex = -1;
    }

    setElements() {
      this.els.selectEl = this.els.el.find('.menu__select');
      const selectEl = this.els.selectEl.target[0];
      const selectedOptionEl = this.els.selectEl.find('option[selected]');

      if (selectedOptionEl.target[0]) {
        selectEl.selectedIndex = selectedOptionEl.index();

        if(this.els.selectEl.target[0].dataset.selectAriaLabel) {
          const selectAriaLabel = `${selectedOptionEl.target[0].text} ${this.els.selectEl.target[0].dataset.selectAriaLabel}`;
          this.els.selectEl.target[0].setAttribute('aria-label', selectAriaLabel);
        }
      }

      // eslint-disable-next-line dot-notation
      let defaultMessage = selectEl.dataset['defaultMessage'];
      if (!defaultMessage && selectEl.options[selectEl.selectedIndex]) {
        defaultMessage = selectEl.options[selectEl.selectedIndex].text;
      } else {
        selectEl.selectedIndex = -1;
      }

      if (this.els.el.hasClass('menu--text-field') && !selectedOptionEl.target[0]) {
        defaultMessage = '';
        selectEl.selectedIndex = -1;
      }

      this.index = selectEl.selectedIndex;
      this.options = [...selectEl.options];

      if (this.index === -1) {
        this.options.forEach((el) => {
          el.removeAttribute('selected');
        });
      }

      this.els.fieldEl = this.els.el.find('.menu__select-field');
      this.els.fieldTextEl = this.els.fieldEl.find('.menu__select-field-text');
      this.els.fieldTextEl.text(defaultMessage);

      if (this.els.fieldEl.target[0].dataset.ariaLabel && defaultMessage !== '') {
        const ariaLabel = `${defaultMessage}: ${this.els.fieldEl.target[0].dataset.ariaLabel}`;
        this.els.fieldEl.target[0].setAttribute('aria-label', ariaLabel);
      }

      this.els.el.append('<div class="menu__list-wrap scrollbar"></div>');
      this.els.listWrapEl = this.els.el.find('.menu__list-wrap');
      this.els.listWrapEl.append('<ul class="menu__list scrollbar__contents" role="listbox">');

      this.els.listEl = this.els.listWrapEl.find('.menu__list');
      this.options.forEach((el) => {
        let tagsStr = '';
        let titleStr = '';

        ['an-tr', 'an-ca', 'an-ac', 'an-la'].forEach((tag) => {
          if (el.hasAttribute(tag)) {
            tagsStr += ` ${tag}="${el.getAttribute(tag).replace('"','')}" `;
          }
        });

        if (selectEl.dataset.useLink) {
          if (el.title && el.title !== '') {
            titleStr = ` title="${el.title}"`;
          }
        }

        this.els.listEl.append(`<li class="menu__list-option-wrap" role="presentation"${tagsStr}><button class="menu__list-option" aria-selected="false" role="option"${titleStr}><span class="menu__list-option-text">${el.text}</span><svg class="menu__list-option-icon" focusable="false"><use xlink:href="#done-bold" href="#done-bold"></use></svg></button></li>`);
      });

      this.els.itemWrapEls = this.els.listEl.find('.menu__list-option-wrap');
      this.els.itemEls = this.els.listEl.find('.menu__list-option');

      scrollbar.init(this.els.listWrapEl.target[0]);
      this.els.scrollWrapEl = this.els.listWrapEl.find('.scrollbar__wrap');
      this.els.scrollWrapEl.css({ 'max-height': 0 });
      this.els.listWrapEl.css({ 'visibility': 'hidden' });
      this.els.listWrapEl.attr('aria-hidden', true);

      this.els.textFiledErrorTextEl = this.els.el.find('.menu--text-field__error');

      if (this.els.el.attr('data-max-item-number')) {
        const maxItemNum = parseInt(this.els.el.attr('data-max-item-number'));

        if (maxItemNum) {
          this.maxItemNum = maxItemNum;
        }
      }

      if (this.els.el.attr('data-open-direction')) {
        const openDir = this.els.el.attr('data-open-direction');

        if (openDir) {
          this.defaultOpenDir = openDir;
        }
      }

      if (this.els.el.attr('data-animation')) {
        const isAnim = this.els.el.attr('data-animation');

        if (isAnim && isAnim.toLowerCase() === 'false') {
          this.isAnim = false;
        }
      }

      icon.update(this.els.el.target[0]);

      this.select(true);
    }

    select(init) {
      if (getCurrentDevice() === 'desktop') {
        if (this.isOpen) {
          const isFilled = this.els.el.hasClass('filled');
          const offset = this.els.el.offset();
          let posY = isFilled ? 0 : offset.height;

          if (this.openDir === 'up') {
            if (this.els.el.hasClass('menu--text-field')) {
              posY -= parseInt(this.els.el.css('padding-top'), 10);
            }

            posY = posY === 0 ? '0' : `${posY}px`;

            this.els.listWrapEl.css({
              'bottom': posY,
              'top': 'auto',
            });
          } else if (this.openDir === 'down') {
            if (this.els.el.hasClass('menu--text-field') && this.els.textFiledErrorTextEl.target.length) {
              posY -= this.els.textFiledErrorTextEl.offset().height.toFixed(2);
            }

            posY = posY === 0 ? '0' : `${posY}px`;

            this.els.listWrapEl.css({
              'bottom': 'auto',
              'top': posY,
            });
          }
        }

        this.els.el.removeClass('selected');
        this.els.itemEls.attr('aria-selected', 'false');
        this.els.itemWrapEls.removeClass('active');

        if (this.index > -1) {
          if (this.els.el.hasClass('menu--text-field')) {
            //this.els.el.removeClass('error');

            if (init) {
              this.els.el.addClass('init');
            } else {
              this.els.el.removeClass('init');
            }
          }

          this.els.el.addClass('selected');
          this.els.itemWrapEls.eq(this.index).addClass('active');
          this.els.itemEls.eq(this.index).attr('aria-selected', true);
        }
      } else {
        if (this.index > -1 && this.els.el.hasClass('menu--text-field')) {
          this.els.el.addClass('selected');
        }
      }
    }

    bindEvents() {
      this.els.fieldEl.off('click').on('click', this.handler.fieldEl.click);
      this.els.itemWrapEls.off('click').on('click', this.handler.itemWrapEls.click);
      this.els.selectEl.off('change').on('change', this.handler.selectEl.change);
      this.els.selectEl.off('click').on('click', this.handler.selectEl.click);
      this.els.selectEl.off('keyup').on('keyup', this.handler.selectEl.keyup);

      this.els.itemEls.off('focus').on('focus', (e) => {
        $q(e.target).closest('.menu__list-option-wrap').addClass('focus');
      });

      this.els.itemEls.off('blur').on('blur', (e) => {
        $q(e.target).closest('.menu__list-option-wrap').removeClass('focus');
      });

      this.els.selectEl.off('focus').on('focus', () => {
        this.els.el.addClass('focus');
      });

      this.els.selectEl.off('blur').on('blur', () => {
        this.els.el.removeClass('focus');
      });

      this.els.el.off('keydown').on('keydown', this.handler.el.keydown);
      this.els.winEl.off('resize', this.handler.winEl.resize).on('resize', this.handler.winEl.resize);

      if (this.els.el.hasClass('menu--text-field')) {
        this.els.fieldEl.off('focus').on('focus', () => {
          this.els.el.addClass('focus');
        });

        this.els.fieldEl.off('blur').on('blur', () => {
          this.els.el.removeClass('focus');
        });
      }
    }

    update() {
      if (this.isOpen) {
        this.close(false);
      }

      this.isDisabled = this.els.el.hasClass('disabled');

      if (this.isDisabled) {
        this.els.selectEl.attr('disabled', true);
        this.els.fieldEl.attr('disabled', true);
        // this.els.fieldEl.attr('tabindex', '-1');
      } else {
        this.els.selectEl.removeAttr('disabled');
        this.els.fieldEl.removeAttr('disabled');
        // this.els.fieldEl.removeAttr('tabindex');
      }

      this.els.itemWrapEls.removeClass('disabled');

      if (this.device === 'desktop') {
        this.els.selectEl.attr('tabindex', '-1');
        this.els.selectEl.attr('aria-hidden', true);
        this.els.fieldEl.removeAttr('tabindex');
        this.els.fieldEl.removeAttr('aria-hidden');
        // this.els.fieldEl.css( { 'pointer-events': '' });
      } else {
        this.els.selectEl.removeAttr('tabindex');
        this.els.selectEl.removeAttr('aria-hidden');
        this.els.fieldEl.attr('tabindex', '-1');
        this.els.fieldEl.attr('aria-hidden', true);
        this.els.fieldEl.removeAttr('aria-expanded');
        // this.els.fieldEl.css( { 'pointer-events': 'none' });
      }

      this.itemMappedIndices = [];
      this.itemMappedIndicesExclDisabled = [];
      let mappingIndex = 0;

      this.options.forEach((option, index) => {
        const itemWrapEl = this.els.itemWrapEls.eq(index);
        if (option.disabled) {
          if (getCurrentDevice() === 'desktop') {
            itemWrapEl.addClass('disabled');
            // itemWrapEl.attr('aria-hidden', 'true');
            // itemWrapEl.attr('tabindex', '-1');
          }

          this.itemMappedIndices[index] = -1;
        } else {
          // if (getCurrentDevice() === 'desktop') {
          //   itemWrapEl.attr('tabindex', '0');
          //   itemWrapEl.attr('aria-hidden', 'false');
          // }

          this.itemMappedIndices[index] = mappingIndex++;
          this.itemMappedIndicesExclDisabled.push(index);
        }
      });
    }

    open(anim = true) {
      if (!this.isAnim) {
        anim = false;
      }

      const callback = () => {
        this.els.docEl.on('click', this.handler.docEl.click);

        if (getCurrentDevice() === 'desktop') {
          if (this.els.selectEl.target[0].selectedIndex === -1) {
            this.focusedIndex = this.itemMappedIndicesExclDisabled[0];
          } else {
            this.focusedIndex = this.els.selectEl.target[0].selectedIndex;
          }

          requestAnimationFrame(() => {
            this.els.itemEls.eq(this.focusedIndex).focus();
            scrollbar.resize(this.els.listWrapEl.target[0]);
          });
        }
      };

      const open = () => {
        this.els.el.addClass('open');
        this.isOpen = true;

        if (getCurrentDevice() === 'desktop') {
          this.els.scrollWrapEl.css({ 'max-height': '' });

          const itemNum = this.els.itemWrapEls.target.length;
          this.maxHeight = 0;

          if (itemNum > this.maxItemNum) {
            for (let i = 0; i < this.maxItemNum; i++) {
              const el = this.els.itemWrapEls.eq(i);
              this.maxHeight += el.offset().height;
            }

            this.maxHeight += parseFloat(getComputedStyle(this.els.itemWrapEls.target[0]).marginTop)
              + parseFloat(getComputedStyle(this.els.itemWrapEls.target[itemNum - 1]).marginBottom);
          } else {
            this.maxHeight = this.els.scrollWrapEl.offset().height;
          }

          this.els.scrollWrapEl.css({ 'max-height': '0' });

          const isFilled = this.els.el.hasClass('filled');
          const offset = this.els.el.offset();
          const below = window.innerHeight - offset.bottom;
          const above = offset.top;
          const height = isFilled ? this.maxHeight - offset.height : this.maxHeight;
          let posY = isFilled ? 0 : offset.height;

          const setOpenDirUp = () => {
            if (this.els.el.hasClass('menu--text-field')) {
              posY -= parseInt(this.els.el.css('padding-top'), 10);
            }

            posY = posY === 0 ? '0' : `${posY}px`;

            this.openDir = 'up';
            this.els.listWrapEl.css({
              'bottom': posY,
              'top': 'auto',
            });
          };

          const setOpenDirDown = () => {
            if (this.els.el.hasClass('menu--text-field') && this.els.textFiledErrorTextEl.target.length) {
              posY -= this.els.textFiledErrorTextEl.offset().height.toFixed(2);
            }

            posY = posY === 0 ? '0' : `${posY}px`;

            this.openDir = 'down';
            this.els.listWrapEl.css({
              'bottom': 'auto',
              'top': posY,
            });
          };

          if (this.defaultOpenDir) {
            if (this.defaultOpenDir === 'up') {
              setOpenDirUp();
            } else {
              setOpenDirDown();
            }
          } else {
            if (height > below && height < above) {
              setOpenDirUp();
            } else {
              setOpenDirDown();
            }
          }

          if (anim) {
            this.els.scrollWrapEl.css({ 'transition': 'max-height .2s cubic-bezier(.4,0,.2,1)' });

            const transitionEndEvent = detectTransitionEndEvent(this.els.scrollWrapEl.target[0]);
            if (transitionEndEvent) {
              const transitionEnd = () => {
                callback();
                this.els.scrollWrapEl.off(transitionEndEvent, transitionEnd);
              };

              this.els.scrollWrapEl.on(transitionEndEvent, transitionEnd);
            } else {
              setTimeout(callback, 200);
            }
          } else {
            this.els.scrollWrapEl.css({ 'transition': '' });
            requestAnimationFrame(callback);
          }

          requestAnimationFrame(() => {
            this.els.fieldEl.attr('aria-expanded', true);
            this.els.listWrapEl.css({ 'visibility': 'visible' });
            this.els.listWrapEl.attr('aria-hidden', false);
            this.els.scrollWrapEl.css({ 'max-height': `${this.maxHeight}px` });
          });
        } else {
          callback();
        }
      };

      requestAnimationFrame(open);
    }

    close(anim = true){
      if (!this.isAnim) {
        anim = false;
      }

      const callback = () => {
        this.els.listWrapEl.css({ 'visibility': 'hidden' });
        this.els.listWrapEl.attr('aria-hidden', true);
      };

      const close = () => {
        this.els.docEl.off('click', this.handler.docEl.click);
        this.els.el.removeClass('open');
        this.isOpen = false;

        if (getCurrentDevice() === 'desktop') {
          if (anim) {
            this.els.scrollWrapEl.css({ 'transition': 'max-height .2s cubic-bezier(.4,0,.2,1)' });

            const transitionEndEvent = detectTransitionEndEvent(this.els.scrollWrapEl.target[0]);
            if (transitionEndEvent) {
              const transitionEnd = () => {
                callback();
                this.els.scrollWrapEl.off(transitionEndEvent, transitionEnd);
              };

              this.els.scrollWrapEl.on(transitionEndEvent, transitionEnd);
            } else {
              setTimeout(callback, 200);
            }
          } else {
            this.els.scrollWrapEl.css({ 'transition': '' });
            callback();
          }

          this.els.fieldEl.attr('aria-expanded', false);
          this.els.scrollWrapEl.css({ 'max-height': '0' });
          this.els.fieldEl.focus();
        } else {
          callback();
        }
      };

      requestAnimationFrame(close);
    }

    resize() {
      const device = getCurrentDevice();

      if (this.device !== device) {
        this.device = device;
        this.update();

        if (this.device === 'desktop') {
          this.selectItem(this.index);
        }
      }

      if (this.device === 'desktop' && this.isOpen) {
        this.close(false);
      }
    }

    change(index) {
      const selectEl = this.els.selectEl.target[0];
      if (selectEl.selectedIndex !== index) {
        selectEl.selectedIndex = index;
        this.index = index;
        this.els.selectEl.trigger('change');
      }
    }

    keydown(e) {
      this.els.fieldEl.trigger('click');
      e.preventDefault();
    }

    selectNext(next, e) {
      let actualIndex;

      this.focusedIndex = this.focusedIndex < 0 ?
        (this.index !== -1 ? this.itemMappedIndicesExclDisabled[0] : 0)
        : this.focusedIndex;
      let index = this.itemMappedIndices[this.focusedIndex];
      index += next;

      if (index < 0) {
        actualIndex = this.itemMappedIndicesExclDisabled[0];
      } else if (index > this.itemMappedIndicesExclDisabled.length - 1) {
        actualIndex = this.itemMappedIndicesExclDisabled[this.itemMappedIndicesExclDisabled.length - 1];
      } else {
        actualIndex = this.itemMappedIndicesExclDisabled[index];
      }

      if (actualIndex !== -1) {
        if (getCurrentDevice() === 'desktop') {
          const itemEl = this.els.itemEls.target[actualIndex];
          itemEl.focus();
        }

        this.focusedIndex = actualIndex;
      }

      if (e) {
        e.preventDefault();
      }
    }

    selectItem(index, e) {
      if (index < 0) {
        return;
      }

      let actualIndex = -1;
      if (index === 0) {
        actualIndex = this.itemMappedIndicesExclDisabled[0];
      } else if (index === this.itemMappedIndices.length - 1) {
        actualIndex = this.itemMappedIndicesExclDisabled[this.itemMappedIndicesExclDisabled.length - 1];
      } else {
        if (this.itemMappedIndices[index] !== -1) {
          actualIndex = index;
        }
      }

      if (actualIndex !== -1) {
        if (getCurrentDevice() === 'desktop') {
          const itemEl = this.els.itemEls.target[actualIndex];
          itemEl.focus();
        }

        this.change(actualIndex);
      }

      if (e) {
        e.preventDefault();
      }
    }

    getSelectedItemIndex(code) {
      const engPattern =  /[A-Z]/;
      const charCode = code - 48 * Math.floor(code / 48);
      const char = String.fromCharCode((96 <= code) ? charCode : code);

      let isFirst = true;
      let firstMatchItemIndex = -1;
      const originIndex = this.index;

      this.els.itemEls.target.forEach((el, index) => {
        const value = el.textContent.substring(0, 1).toUpperCase();
        const isDisabled = $q(el).closest('.menu__list-option-wrap').hasClass('disabled');

        if (engPattern.test(value) && value === char && !isDisabled) {
          if (firstMatchItemIndex === -1) {
            firstMatchItemIndex = index;
          }
        }

        if (engPattern.test(value) && value === char && this.index < index && isFirst && !isDisabled) {
          this.index = index;
          isFirst = false;
        }
      });

      if (originIndex === this.index && firstMatchItemIndex !== -1) {
        this.index = firstMatchItemIndex;
      }

      return this.index;
    }

    setState(state) {
      if (this.els.el.hasClass('menu--text-field')) {
        const requiredEl = this.els.el.find('.required');
        const id = this.els.textFiledErrorTextEl.target.length ? this.els.textFiledErrorTextEl.attr('id') : '';
        switch (state) {
        case 'error':
          this.els.el.addClass('error');
          if (id) {
            this.els.fieldEl.attr('aria-describedby', id);
            this.els.selectEl.attr('aria-labelledby',
              `${this.els.selectEl.attr('aria-labelledby')} ${id}`);

            if (requiredEl) {
              requiredEl.attr('aria-hidden', true);
            }
          }
          break;
        default:
          this.els.el.removeClass('error');
          this.els.fieldEl.removeAttr('aria-describedby');

          if (id) {
            this.els.selectEl.attr('aria-labelledby',
              this.els.selectEl.attr('aria-labelledby').replace(id, '').trim());
          }

          if (requiredEl) {
            requiredEl.removeAttr('aria-hidden');
          }
          break;
        }
      }
    }
  }

  Menu.instances = new WeakMap();
  window.sg.components.registerClass('menu', Menu);

  const menu = {
    initAll() {
      $q('.menu:not([data-auto-init="false"])').target.forEach((el) => {
        if (!Menu.instances.has(el)) {
          new Menu(el);
        }
      });
    },
    init(el) {
      if (!Menu.instances.has(el)) {
        new Menu(el);
      }
    },
    reInit(el, index = -1) {
      if (!Menu.instances.has(el)) {
        new Menu(el, index);
      } else {
        Menu.instances.get(el).reInit(index);
      }
    },
    // state = normal, error
    setState(el, state) {
      if (Menu.instances.has(el)) {
        Menu.instances.get(el).setState(state);
      }
    },
    selectItem(el, index = -1){
      if (Menu.instances.has(el)) {
        Menu.instances.get(el).selectItem(index);
      }
    },
  };

  window.sg.common.menu = menu;
  $q.ready(menu.initAll);
})();

(() => {
  const $q = window.sg.common.$q;
  const BREAKPOINTS = window.sg.common.constants.BREAKPOINTS;
  const utils = window.sg.common.utils;
  const icon = window.sg.common.icon;

  /**
  /  @author      : eunji park
  /  @discription : Add an 'unbind-option' class to the parent element when the element containing the Option Selector is loaded as display none
  /                 , 옵션셀렉터에서 값 선택 후 옵션셀렉터 전체를 새로 생성하고 reinit할 경우 active-slide 클래스를 새로 그리기 전의 위치와 동일하게 붙여야만 사용자가 선택한 위치 그대로 reinit됨 / active-slide 클래스를 붙이지 않고 reInit할 경우 checked된 칩 기준으로 자동 생성
  **/

  const selector = {
    section: '.option-selector__wrap',
  };
  
  class OptionSelector {
    constructor(component, checkedActive = null) {
      this.selector = {
        swiperSlide: '.option-selector__swiper-slide',
        swiperWrap: '.option-selector__swiper',
        swiperPrev: '.option-selector__button-prev',
        swiperNext: '.option-selector__button-next',
        btnDisabledCls: 'option-selector__button--disabled',
        capaContainer: '.option-selector__swiper-container',
        capaItemInner: '.option-selector__size',
        capaItemRadio: '.option-selector__size input',
        flotingBox: '.option-selector__floating-bar',
        moveWapper: '.option-selector__swiper-wrapper',
        optionRadio: 'input[type="radio"]',
        colorRadio: '.option-selector__color input',
        colorName: '.option-selector__color-name',
        tooltipCta: '.option-selector__color-name-text',
        tooltipWrap: '.option-selector__color-tooltip',
        closeCta: '.option-selector__color-tooltip-close',
        slideButtonList: '.option-selector__swiper-slide input',
        activeClass: 'is-show',
      };

      this.el = {
        window: $q(window),
        component: $q(component),
      };

      this.handler = {
        timeHandler: () => {
          this.el.moveWapper.css({
            'transition': 'none',
          });

          this.resize();

          if (this.resizeTimer) {
            clearTimeout(this.resizeTimer);
          }

          this.resizeTimer = setTimeout(() => {
            this.el.moveWapper.css({
              'transition': '',
            });
          }, 400);
        },
        changeCapacity: this.changeCapacity.bind(this),
        setHalfSlide: this.setHalfSlide.bind(this),
        changeColor: (event) => {
          const $wrap = $q(event.target).closest('.option-selector__color');
          const $hidden = $wrap.find('.hidden').target[0] || $wrap.find('.option-selector__color-code').target[0];
          const $name = $q(event.target).closest('.option-selector').find('.option-selector__color-name .color-name-text');
          const $colorName = $q(event.target).closest('.option-selector').find('.option-selector__color-name-text-in');
          if($hidden !== null && $name.target.length > 0){
            $name.innerHTML($hidden.innerText);
          }
          if($hidden !== null && $colorName.target.length > 0){
            $colorName.innerHTML($hidden.innerText);
          }
        },
        tooltipShow: this.tooltipShow.bind(this),
        tooltipKeyEvent: (event) => {
          if(event.keyCode === window.sg.common.constants.KEY_CODE.ENTER){
            this.showBoxEvent();
          }else if(event.keyCode === window.sg.common.constants.KEY_CODE.ESC){
            this.hideBoxEvent();
          }
        },
        changeColorName: (evt) => {
          const color = evt.target.parentNode.querySelector('.hidden') || null;
          if (this.el.component.parent().find('.option-selector__color-name button, span.option-selector__color-name-text').target.length > 0) {
            this.el.component.parent().find('.option-selector__color-name .option-selector__color-name-text-in').innerHTML(color.innerText);
            this.el.component.parent().find('.option-selector__color-name .option-selector__color-tooltip-text').innerHTML(color.innerText);
            this.tooltipShow();
          }
        },
        showBoxEvent: () => {
          this.showBoxEvent();
        },
        hideBoxEvent: (event) => {
          if(event.type === 'focusout'){
            requestAnimationFrame(()  => {
              if($q(document.activeElement).closest(this.el.colorName.target[0]).target.length === 0){
                this.hideBoxEvent();
              }
            });
          } else {
            this.hideBoxEvent();
          }
        },
      };

      this.moveLength = null;

      OptionSelector.instances.set(component, this);

      this.setElements();

      this.checkedActive = checkedActive;

      this.init();
    }

    setElements() {
      this.el.swiperPrev = this.el.component.find(this.selector.swiperPrev);
      this.el.swiperNext = this.el.component.find(this.selector.swiperNext);
      this.el.swiperSlide = this.el.component.find(this.selector.swiperSlide);
      this.el.moveWapper = this.el.component.find(this.selector.moveWapper);
      this.el.capaContainer = this.el.component.find(this.selector.capaContainer);
      this.el.capaItemInner = this.el.component.find(this.selector.capaItemInner);
      this.el.capaItemRadio = this.el.component.find(this.selector.capaItemRadio);
      this.el.capaItemRadioActive = this.el.component.find(`${this.selector.capaItemRadio}:checked`).closest(this.selector.swiperSlide);
      this.el.flotingBox = this.el.component.find(this.selector.flotingBox);
      this.el.optionRadio = this.el.component.find(this.selector.optionRadio);
      this.el.colorRadio = this.el.component.find(this.selector.colorRadio);

      this.desktopPerView = this.el.component.attr('data-desktop-view');
      this.mobilePerView = this.el.component.attr('data-mobile-view');
      this.maxCnt = Number(BREAKPOINTS.MOBILE < utils.getViewPort().width ? this.desktopPerView : this.mobilePerView);
      this.desktopFlg = false;
      this.mobileFlg = false;
      this.slideCnt = this.el.swiperSlide.target.length;
      this.lastCnt = (this.slideCnt <= this.maxCnt) ? 1 : this.slideCnt - this.maxCnt;
      this.activeCnt = (this.slideCnt <= this.maxCnt && this.el.moveWapper.target[0].scrollWidth - 8 > this.el.capaContainer.outerWidth() && this.el.capaItemRadioActive.index() === this.slideCnt - 1) ? this.lastCnt : 0;
      this.maxPos = this.el.moveWapper.target[0].scrollWidth - 8 <= this.el.capaContainer.outerWidth() ? 0 : this.el.moveWapper.target[0].scrollWidth - this.el.capaContainer.outerWidth();
      this.slideGradientWidth = this.el.component.find('.option-selector__button-prev').target.length === 0 ? 0 : parseInt(window.getComputedStyle(this.el.component.find('.option-selector__button-prev').target[0], ':after').getPropertyValue('width'));
      this.slideLength = (this.el.component.find(this.selector.swiperSlide).target.length === 0 ? 0 : this.el.component.find(this.selector.swiperSlide).target.length - 1);
      this.slidePadding = 0;
      
      this.el.colorName = this.el.component.parent('.option-selector').find(this.selector.colorName);
      this.el.tooltipCta = this.el.colorName.find(this.selector.tooltipCta);
      this.el.closeCta = this.el.colorName.find(this.selector.closeCta);
      this.el.tooltipWrap = this.el.colorName.find(this.selector.tooltipWrap);
      this.el.slideButtonList = this.el.component.find(this.selector.slideButtonList);


      this.timer = null;
      this.resizeTimer = null;
      this.activeCheck = false;
      this.initFlag = false;
      this.reInitFlag = false;
      this.rtlFlag = $q('body').css('direction') === 'rtl' ? true : false;
      this.direction = this.rtlFlag ? 1 : -1;
      this.startActiveIdx = null;
      this.isCapacity = this.el.component.target[0].classList.contains('option-selector__wrap--capacity');
      this.checkedActive = null;
      
      this.tooltipFlag = false;

      if (this.el.moveWapper.css('transform') !== 'none') {
        this.moveLength = Math.abs(Number(this.el.moveWapper.css('transform').match(/-?[\d\\.]+/g)[4]));
      } else {
        this.moveLength = 0;
      }

      this.el.swiperSlide.target.forEach((item, idx) => {
        if ($q(item).hasClass('active-slide')) {
          this.startActiveIdx = idx;
        }
      });

      if (this.rtlFlag) {
        this.calcPos = parseInt(this.el.moveWapper.css('margin-right'), 10) * -1;
      } else {
        this.calcPos = parseInt(this.el.moveWapper.css('margin-left'), 10) * -1;
      }

      this.hiddenText = this.el.tooltipCta.find('.hidden');
      if (this.hiddenText.target.length > 0) {
        this.globalText = JSON.parse(this.hiddenText.target[0].dataset.globalText);
      }else{
        this.globalText = null;
      }
    }

    init() {
      this.initFlag = true;
      this.bindEvents();
      this.optionSlide();
      this.resize(true);
      this.setHalfSlide();
    }

    reInit(checkedActive) {
      this.setElements();
      this.reInitFlag = true;
      this.checkedActive = checkedActive;
      this.init();
    }

    calcPadding() {
      if (this.el.component.find('.option-selector__color').target.length > 0) {
        this.slidePadding = parseInt(window.getComputedStyle(this.el.component.find('.option-selector__color').target[0]).getPropertyValue('padding-left'));
      }
      if (this.el.component.find('.option-selector__size').target.length > 0) {
        const getPadding = parseInt(window.getComputedStyle(this.el.component.find('.option-selector__size-label').target[0]).getPropertyValue('padding-left'));
        this.slidePadding = getPadding / 2;
      }
    }

    setBtnDisable() {
      this.el.capaItemRadioActive = this.el.component.find(`${this.selector.capaItemRadio}:checked`).closest(this.selector.swiperSlide);

      const slideWidth = this.el.swiperSlide.outerWidth();
      let slideWrapperWidth;

      if (this.el.component.hasClass('option-selector__wrap--wide')) {
        if (this.el.component.find('.option-selector__color').target.length > 0) {
          slideWrapperWidth = slideWidth * this.slideCnt - (this.slidePadding * 2);
        } else {
          slideWrapperWidth = slideWidth * this.slideCnt;
        }
      } else {
        slideWrapperWidth = slideWidth * this.slideCnt;
      }

      if (slideWrapperWidth > this.el.capaContainer.outerWidth() && this.maxPos !== 0) {
        this.el.swiperNext.show();
        this.el.swiperPrev.show();

        if (this.el.component.hasClass('option-selector__wrap--wide')) {
          this.el.component.removeClass('no-swiper-mode');
        }
        this.el.component.addClass('swiper-mode');

        if (this.moveLength > 0) {
          // when the active index is 0 or more
          this.el.swiperPrev.removeClass(this.selector.btnDisabledCls);
          this.el.swiperPrev.attr('aria-disabled', 'false');
          this.el.swiperPrev.attr('tabindex', '0');

          if (this.moveLength >= this.maxPos) {
            // last slide
            this.el.swiperNext.addClass(this.selector.btnDisabledCls);
            this.el.swiperNext.attr('aria-disabled', 'true');
            this.el.swiperNext.attr('tabindex', '-1');

            if (document.activeElement === this.el.swiperNext.target[0]) {
              if (this.el.swiperNext.hasClass('option-selector__button--disabled')) {
                this.el.swiperPrev.focus();
              }
            }
          } else {
            this.el.swiperNext.removeClass(this.selector.btnDisabledCls);
            this.el.swiperNext.attr('aria-disabled', 'false');
            this.el.swiperNext.attr('tabindex', '0');
          }
        } else {
          // when active index is 0
          this.el.swiperNext.removeClass(this.selector.btnDisabledCls);
          this.el.swiperNext.attr('aria-disabled', 'false');
          this.el.swiperNext.attr('tabindex', '0');

          this.el.swiperPrev.addClass(this.selector.btnDisabledCls);
          this.el.swiperPrev.attr('aria-disabled', 'true');
          this.el.swiperPrev.attr('tabindex', '-1');

          if (document.activeElement === this.el.swiperPrev.target[0]) {
            if (this.el.swiperPrev.hasClass('option-selector__button--disabled')) {
              this.el.swiperNext.focus();
            }
          }
        }
      } else {
        // slide not created
        this.el.component.removeClass('swiper-mode');
        if (this.el.component.hasClass('option-selector__wrap--wide')) {
          this.el.component.addClass('no-swiper-mode');
        }

        this.el.swiperNext.hide();
        this.el.swiperNext.attr('aria-disabled', 'true');
        this.el.swiperNext.attr('tabindex', '-1');

        this.el.swiperPrev.hide();
        this.el.swiperPrev.attr('aria-disabled', 'true');
        this.el.swiperPrev.attr('tabindex', '-1');
      }
    }

    setActiveCnt() {
      if (this.initFlag === true) {
        if (this.el.moveWapper.css('transform') === 'none') {
          this.activeCnt = this.el.component.find('input:checked').closest(this.selector.swiperSlide).index();
        } else {
          this.activeCnt = null;
        }
      }

      this.initFlag = false;
    }

    setSlidePos(flag = null) {
      if (!this.desktopPerView && !this.mobilePerView) {
        this.el.component.addClass('option-selector__wrap--wide');

        if (this.rtlFlag) {
          this.calcPos = parseInt(this.el.moveWapper.css('margin-right'), 10) * -1;
        } else {
          this.calcPos = parseInt(this.el.moveWapper.css('margin-left'), 10) * -1;
        }
        this.maxPos = this.el.moveWapper.target[0].scrollWidth - 8 <= this.el.capaContainer.outerWidth() ? 0 : this.el.moveWapper.target[0].scrollWidth - this.el.capaContainer.outerWidth() - (this.calcPos * 2);

        if (this.maxPos <= 0) {
          this.maxPos = 0;
          this.el.component.removeClass('swiper-mode');
          this.el.component.addClass('no-swiper-mode');
        }
      } else {
        this.calcPadding();
        this.maxPos = this.el.moveWapper.target[0].scrollWidth - 8 <= this.el.capaContainer.outerWidth() ? 0 : this.el.moveWapper.target[0].scrollWidth - this.el.capaContainer.outerWidth() - Math.floor(this.slidePadding / 2);
      }

      if (this.el.component.hasClass('swiper-mode')) {
        this.setSlideMove(flag);
      } else {
        this.el.moveWapper.css({
          'transform': '',
        });
      }
    }

    setSlideMove(resizeFlag = null) {
      const activeIdx = this.el.component.find('input:checked').closest(this.selector.swiperSlide).index();
      const slideWidth = this.el.component.find(this.selector.swiperSlide).outerWidth();
      this.slideGradientWidth = this.el.component.find('.option-selector__button-prev').target.length === 0 ? 0 : parseInt(window.getComputedStyle(this.el.component.find('.option-selector__button-prev').target[0], ':after').getPropertyValue('width'));
      this.calcPadding();

      if (!this.reInitFlag) {
        if (resizeFlag !== null) {
          if (this.activeCnt !== null) {
            if (activeIdx !== 0) {
              if (this.el.component.hasClass('option-selector__wrap--wide')) {
                this.moveLength = slideWidth * this.activeCnt > this.maxPos + this.slideGradientWidth ? this.maxPos : slideWidth * this.activeCnt - this.slideGradientWidth;
              } else {
                if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
                  this.moveLength = slideWidth * this.activeCnt > this.maxPos ? this.maxPos : slideWidth * this.activeCnt - this.slidePadding;
                } else {
                  if (this.el.component.hasClass('option-selector__wrap--color-chip')) {
                    this.moveLength = slideWidth * this.activeCnt > this.maxPos + this.slideGradientWidth ? this.maxPos : slideWidth * this.activeCnt;
                  }
                }
              }
            }
          } else {
            this.activeCnt = Math.ceil(this.moveLength / slideWidth);
          }
        } else {
          if (this.checkedActive || (this.el.moveWapper.css('transform') === 'none' && this.moveLength === 0 && activeIdx > 0)) {
            if (activeIdx !== 0) {
              if (this.el.component.hasClass('option-selector__wrap--wide')) {
                this.moveLength = slideWidth * activeIdx > this.maxPos + this.slideGradientWidth ? this.maxPos : slideWidth * activeIdx - this.slideGradientWidth;
              } else {
                if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
                  this.moveLength = slideWidth * activeIdx > this.maxPos ? this.maxPos : slideWidth * activeIdx - this.slidePadding;
                } else {
                  if (this.el.component.hasClass('option-selector__wrap--color-chip')) {
                    this.moveLength = slideWidth * activeIdx > this.maxPos + this.slideGradientWidth ? this.maxPos : slideWidth * activeIdx - this.slideGradientWidth + this.slidePadding;
                  }
                }
              }
            }
          }
        }
      }

      if (this.moveLength >= 0) {
        this.el.moveWapper.css({
          'transform': `translateX(${this.direction * this.moveLength}px)`,
        });
      }
      this.checkedActive = null;

      if (this.reInitFlag) {
        this.reInitFlag = false;
      }

      setTimeout(() => {
        this.setBtnDisable();
      }, 300);
    }

    setSwiperWidth() {
      this.el.component.target.forEach((item) => {
        const swiperWrap = $q(item);
        const itemArr = [];
        const itemSlide = swiperWrap.find(this.selector.swiperSlide);

        itemSlide.css({
          'width': '',
        });

        itemSlide.target.forEach((slideEl) => {
          itemArr.push($q(slideEl).width());
        });

        const spanWidth = Math.max.apply(null, itemArr);
        const perView = BREAKPOINTS.MOBILE < utils.getViewPort().width ? this.desktopPerView : this.mobilePerView;
        const parents = ['pf-product-compare', 'hubble-item-card__option-memory'];
        let setMargin = 16;

        const parentEl = swiperWrap.closest(`.${parents.join(',.')}`).target[0];
        if (parentEl !== undefined) {
          if (parentEl.classList.contains(parents[0])) {//pf-product-compare
            setMargin = BREAKPOINTS.MOBILE < utils.getViewPort().width ? 4 : 8;
          } else if (parentEl.classList.contains(parents[1])) {//hubble-item-card__option-memory
            setMargin = 0;
          }
        }

        itemSlide.css({
          'width': `${spanWidth}px`,
        });

        if (perView !== null) {
          if(itemSlide.target.length > perView ){
            swiperWrap.find(this.selector.swiperWrap).css({
              'width': `${swiperWrap.width() - 2}px`,
            });
          } else {
            swiperWrap.find(this.selector.swiperWrap).css({
              'width': `${(spanWidth * perView) + 2}px`,
            });
          }
          this.calcPadding();
        } else {
          const swiperModeCheck = spanWidth * this.slideCnt > this.el.capaContainer.outerWidth();
          if (swiperModeCheck) {
            this.el.component.addClass('swiper-mode');
          }
          this.el.component.addClass('option-selector__wrap--wide');
          swiperWrap.find(this.selector.swiperWrap).css({
            'width': 'auto',
          });
        }

        if (swiperWrap.find(this.selector.flotingBox).target.length !== 0) {
          swiperWrap.find(this.selector.flotingBox).css({
            'transition': 'none',
            'width': `${spanWidth - setMargin}px`,
          });
        }
      });
    }

    setHalfSlide(evt) {
      const $target = evt ? $q(evt.target) : $q(this.el.slideButtonList.target.filter((el) => el.checked));
      if (!$target.target.length) {
        return;
      }
      const eTarget = $target.closest(this.selector.swiperSlide);
      const currentIdx = eTarget.index();
      const slideMoveVal = this.el.swiperSlide.outerWidth() * currentIdx;
      
      if (this.el.component.hasClass('swiper-mode')) {
        this.activeCnt = currentIdx;
        
        if (this.el.component.hasClass('option-selector__wrap--wide')) {
          this.moveLength = slideMoveVal >= this.maxPos + this.slideGradientWidth ? this.maxPos : slideMoveVal - this.slideGradientWidth;
        } else {
          if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
            this.moveLength = slideMoveVal >= this.maxPos + this.slideGradientWidth ? this.maxPos : slideMoveVal - this.slidePadding;
          } else {
            if (this.el.component.hasClass('option-selector__wrap--color-chip')) {
              this.moveLength = slideMoveVal >= this.maxPos + this.slideGradientWidth ? this.maxPos : slideMoveVal - this.slideGradientWidth + this.slidePadding;
            } else {
              this.moveLength = slideMoveVal >= this.maxPos + this.slideGradientWidth ? this.maxPos : slideMoveVal;
            }
          }
        }
        
        
        if (currentIdx === 0) {
          this.moveLength = 0;
        }
        this.el.moveWapper.css({
          'transform': `translateX(${this.direction * this.moveLength}px)`,
        });
        this.setBtnDisable();

        this.el.moveWapper.find('.option-selector__color-name.active').removeClass('active');
        $target.closest(this.selector.swiperSlide).find('.option-selector__color-name').addClass('active');
      } else {
        this.el.swiperNext.hide();
        this.el.swiperNext.attr('aria-disabled', 'true');
        this.el.swiperNext.attr('tabindex', '-1');
        
        this.el.swiperPrev.hide();
        this.el.swiperPrev.attr('aria-disabled', 'true');
        this.el.swiperPrev.attr('tabindex', '-1');
      }
    }

    optionSlide() {
      this.el.swiperNext.target.forEach((btn) => {
        const $btn = $q(btn);
        const activeNext = () => {
          const slideWidth = this.el.swiperSlide.outerWidth();
          this.activeCnt = this.activeCnt + 1;


          if (this.moveLength >= this.el.moveWapper.target[0].scrollWidth - this.el.capaContainer.outerWidth()) {
            this.activeCnt = this.lastCnt;
          }

          if (this.el.component.hasClass('option-selector__wrap--wide')) {
            if (this.activeCnt === 1) {
              this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth - this.slideGradientWidth;
            } else {
              this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth;
            }
          } else {
            if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
              if (this.activeCnt === 1) {
                this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth - this.slidePadding;
              } else {
                this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth;
              }
            } else {
              if (this.el.component.hasClass('option-selector__wrap--color-chip')) {
                this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth;
              } else {
                if (this.activeCnt === 1) {
                  this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth + this.slidePadding;
                } else {
                  this.moveLength = this.moveLength + slideWidth > this.maxPos ? this.maxPos : this.moveLength + slideWidth;
                }
              }
            }
          }


          this.el.moveWapper.css({
            'transform': `translateX(${this.direction * this.moveLength}px)`,
          });

          this.setBtnDisable();
        };

        $btn.off('click').on('click', () => {
          activeNext();
        });
      });

      this.el.swiperPrev.target.forEach((btn) => {
        const $btn = $q(btn);
        const activePrev = () => {
          const slideWidth = this.el.swiperSlide.outerWidth();
          this.activeCnt = this.activeCnt - 1;

          if (this.activeCnt < 0) {
            this.activeCnt = 0;
          }

          const movePos = this.moveLength % slideWidth > 0 ? this.moveLength - Math.floor(this.moveLength / slideWidth) * slideWidth : slideWidth;

          if (this.el.component.hasClass('option-selector__wrap--wide')) {
            this.moveLength = this.moveLength - movePos <= 0 ? 0 : this.moveLength - movePos - this.slideGradientWidth;
          } else {
            if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
              this.moveLength = this.moveLength - movePos <= 0 ? 0 : this.moveLength - movePos - this.slidePadding;
            } else {
              if (this.el.component.hasClass('option-selector__wrap--color-chip')) {
                this.moveLength = this.moveLength - movePos <= 0 ? 0 : this.moveLength - movePos - this.slideGradientWidth + this.slidePadding;
              } else {
                this.moveLength = this.moveLength - movePos <= 0 ? 0 : this.moveLength - movePos;
              }
            }
          }

          this.el.moveWapper.css({
            'transform': `translateX(${this.direction * this.moveLength}px)`,
          });

          this.setBtnDisable();
        };

        $btn.off('click').on('click', () => {
          activePrev();
        });
      });
    }

    moveFloting($target) {
      if ($target.target.length <= 0) {
        return;
      }

      let setMargin = 0;

      if (this.el.flotingBox.closest('.pf-product-compare').target.length > 0) {
        setMargin = BREAKPOINTS.MOBILE < utils.getViewPort().width ? 2 : 4;
      } else {
        if (this.el.flotingBox.closest('.hubble-item-card__option-memory').target.length < 1) {
          setMargin = 7.5;
        }
      }

      this.el.flotingBox.css({
        'display': 'block',
        'transition': '',
        'left': `${$target.target[0].offsetLeft + setMargin}px`,
      });

      this.flotingActive = $target.closest(this.selector.swiperSlide);
    }

    resize(flag = null) {
      this.setSwiperWidth();

      this.moveFloting(this.el.component.find(`${this.selector.capaItemRadio}:checked`).closest(this.selector.swiperSlide));

      if (BREAKPOINTS.MOBILE < utils.getViewPort().width) {
        if (this.desktopFlg === false) {
          this.desktopFlg = true;
          this.mobileFlg = false;

          this.el.component.removeClass('no-swiper-mode');
          if (flag === true) {
            this.setActiveCnt();

            if (!this.reInitFlag) {
              this.setSlidePos();
              this.setBtnDisable();
            } else {
              this.setBtnDisable();
              this.setSlidePos();
            }
          } else {
            if (this.desktopPerView !== this.mobilePerView) {
              this.setActiveCnt();
              this.setBtnDisable();
            }
          }
        }
        this.setSlidePos(true);
      } else {
        if (this.mobileFlg === false) {
          this.mobileFlg = true;
          this.desktopFlg = false;

          this.el.component.removeClass('no-swiper-mode');
          if (flag === true) {
            this.setActiveCnt();

            if (!this.reInitFlag) {
              this.setSlidePos();
              this.setBtnDisable();
            } else {
              this.setBtnDisable();
              this.setSlidePos();
            }
          } else {
            if (this.desktopPerView !== this.mobilePerView) {
              this.setActiveCnt();
              this.setBtnDisable();
            }
          }
        }
        this.setSlidePos(true);
      }

      this.tooltipShow();
    }

    changeCapacity(event) {
      const activeItem = $q(event.currentTarget);
      this.el.component.find(`.option-selector__wrap--capacity ${this.selector.swiperSlide}.is-active`).removeClass('is-active');
      activeItem.closest(this.selector.swiperSlide).addClass('is-active');
      this.moveFloting(activeItem.closest(this.selector.swiperSlide));
    }

    tooltipShow() {
      if (this.el.tooltipCta.target.length === 0) {
        return;
      }
      
      const isEllipsis = this.el.tooltipCta.outerWidth() < this.el.tooltipCta.target[0].scrollWidth;
      const isBtnTag = this.el.tooltipCta.target[0].tagName.toLowerCase() === 'button';

      if (isEllipsis) {
        if (!this.tooltipFlag) {
          this.tooltipFlag = true;
          if(isBtnTag){
            this.el.tooltipCta.removeAttr('disabled');
          }else{
            this.el.tooltipCta.attr('tabindex', '0');
          }
        }
      } else {
        this.tooltipFlag = false;
        if(isBtnTag){
          this.el.tooltipCta.attr('disabled', '');
        }else{
          this.el.tooltipCta.removeAttr('tabindex');
        }
      }
    }

    showBoxEvent() {
      if (!this.tooltipFlag || this.el.colorName.hasClass(this.selector.activeClass)) {
        return;
      }

      this.el.colorName.addClass(this.selector.activeClass);
      if(this.globalText){
        this.hiddenText.text(this.globalText.Collapse);
        this.el.tooltipWrap.attr('aria-hidden', false);
      }
      this.hiddenText.attr('aria-hidden', false);
    }

    hideBoxEvent() {
      if(!this.el.colorName.hasClass(this.selector.activeClass)){
        return;
      }

      if (document.activeElement === this.el.closeCta.target[0]) {
        this.el.tooltipCta.focus();
      }

      this.el.colorName.removeClass(this.selector.activeClass);
      if(this.globalText){
        this.hiddenText.text(this.globalText.Expand);
        this.el.tooltipWrap.attr('aria-hidden', true);
      }
      this.hiddenText.attr('aria-hidden', true);
    }

    bindEvents() {
      this.el.window.off('resize', this.handler.timeHandler).on('resize', this.handler.timeHandler);

      this.el.optionRadio.off('change', this.handler.setHalfSlide).on('change', this.handler.setHalfSlide);
      this.el.optionRadio.off('focus', this.handler.setHalfSlide).on('focus', this.handler.setHalfSlide);

      this.el.capaItemRadio.off('change', this.handler.changeCapacity).on('change', this.handler.changeCapacity);

      this.el.colorRadio.off('change', this.handler.changeColor).on('change', this.handler.changeColor);

      if (this.el.colorName.target.length > 0) {
        this.el.slideButtonList.off('click',this.handler.changeColorName).on('click',this.handler.changeColorName);

        this.el.tooltipCta.off('mouseenter', this.handler.showBoxEvent).on('mouseenter', this.handler.showBoxEvent);
        this.el.colorName.off('mouseleave', this.handler.hideBoxEvent).on('mouseleave', this.handler.hideBoxEvent);

        this.el.tooltipCta.off('focus', this.handler.showBoxEvent).on('focus', this.handler.showBoxEvent);
        this.el.colorName.off('focusout', this.handler.hideBoxEvent).on('focusout', this.handler.hideBoxEvent);

        this.el.tooltipCta.off('click', this.handler.showBoxEvent).on('click', this.handler.showBoxEvent);
        this.el.closeCta.off('click', this.handler.hideBoxEvent).on('click', this.handler.hideBoxEvent);
        
        this.el.tooltipCta.off('keydown', this.handler.tooltipKeyEvent).on('keydown', this.handler.tooltipKeyEvent);
      }
    }
  }

  const init = () => {
    $q(selector.section).target.forEach((element) => {
      if (!$q(element).closest('.unbind-option').target.length) {
        if (!OptionSelector.instances.has(element)) {
          new OptionSelector(element);
        }
      }
    });
  };
  /**
   * @func reInit
   * @param {HTMLElement} wrapper option-selector__wrap의 부모
   * @param {HTMLElement} checkedActive true시 option-selector가 selected된 위치로 이동함
   */
  const reInit = (wrapper, checkedActive = null) => {
    let setComponent = $q(selector.section);

    if (wrapper !== undefined) {
      if (wrapper.hasClass('option-selector__wrap')) {
        setComponent = wrapper;
      } else {
        setComponent = wrapper.find(selector.section);
      }
    }

    setComponent.target.forEach((element) => {
      if (OptionSelector.instances.has(element)) {
        const Instances = OptionSelector.instances.get(element);
        Instances.reInit(checkedActive);
      } else {
        new OptionSelector(element, checkedActive);
      }

      icon.update(element);
    });
  };

  OptionSelector.instances = new WeakMap();

  $q.ready(init);

  window.sg.common.OptionSelector = {
    init,
    reInit,
  };
})();

(() => {
  const $q = window.sg.common.$q;
  const utils = window.sg.common.utils;
  const KEY_CODE = window.sg.common.constants.KEY_CODE;
  const swiperManager = window.sg.common.swiperManager;

  const selector = {
    section: '.option-selector-v2 .option-selector-v2__wrap',
  };

  class OptionSelectorV2 {
    constructor(componentEl) {
      this.dragging = false;
      this.motioning = false;
      this.keypress = false;
      this.isTouchEvent = false;
      this.percent = 0;
      this.timer = 0;
      this.containerPadding = 0;

      this.offset = {
        startX: 0,wrapperX: 0, x_origine: 0, y_origine: 0, x_new: 0, y_new: 0,
      };

      this.touchEvents = {};

      this.ele = {
        window: $q(window),
        document: $q(document),
        section: $q(componentEl),
        component: null,
        slideContainer: null,
        slideWrap: null,
        slideButtonList: null,
        slideList: null,
      };

      this.selector = {
        component: '.option-selector-v2__swiper',
        slideContainer: '.option-selector-v2__swiper-container',
        slideWrap: '.option-selector-v2__swiper-wrapper',
        slideButtonList: '.option-selector-v2__swiper-slide button',
        slideList: '.option-selector-v2__swiper-slide',
        slideSelected: '.option-selector-v2__swiper-slide .is-checked',

      };

      this.handler = {
        touchsupport: () => {
          const check = ('ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch || navigator.maxTouchPoints > 0 ||  window.navigator.msMaxTouchPoints > 0);
          return check;
        },

        heightLimit: () => {
          if (this.isTouchEvent) {
            return 10;
          } else {
            return 100;
          }
        },

        clickHandler: (evt) => {
          if (!this.dragging) {
            this.handler.slideTo($q(evt.target).closest('.option-selector-v2__swiper-slide'));
          }
          this.dragging = false;
        },

        slideTo: (el) => {
          const slideWrapOffset = this.ele.slideWrap.offset();
          const slideOffset = el.offset();

          let pos = slideWrapOffset.left - slideOffset.left;
          if (OptionSelectorV2.direction !== 'ltr') {
            pos = slideWrapOffset.right - slideOffset.right;
          }

          this.handler.setWrapperPos(pos, true);
        },

        eventClick: (event) => {
          event.preventDefault();
          if(event.preventDefault) {
            event.preventDefault(); //FF
          } else {
            event.returnValue = false; //IE`
          }
        },

        touchStart: (event) => {
          const touch = this.isTouchEvent ? event.touches[0] || event.changedTouches[0] : event;
          this.offset.x_new = 0;
          this.offset.y_new = 0;
          this.offset.x_origine = touch.pageX;
          this.offset.y_origine = touch.pageY;
          this.offset.wrapperX = this.offset.startX;
          // event.preventDefault();
          // event.stopPropagation();

          this.ele.slideWrap.on(this.touchEvents.touchMove , this.handler.touchMove);
          this.ele.document.on(this.touchEvents.touchMove , this.handler.touchMove);
          this.ele.document.on(this.touchEvents.touchEnd , this.handler.touchEnd);
          this.ele.document.on('mouseleave' , this.handler.touchEnd);

          const swiper = swiperManager.getSwiper(this.ele.slideContainer.closest('.swiper-container').target[0]);
          if (swiper) {
            swiper.allowTouchMove = false;
          }
        },

        touchMove: (event) => {
          const touch = this.isTouchEvent ? event.touches[0] || event.changedTouches[0] : event;
          this.offset.x_new = this.offset.x_origine - touch.pageX;
          this.offset.y_new = this.offset.y_origine - touch.pageY;

          event.preventDefault();

          if (Math.abs(this.offset.y_new) > this.handler.heightLimit()){
            this.handler.touchEnd();
            this.handler.eventClick(event);
            this.dragging = false;
          } else if ( this.offset.x_new !== 0){
            this.dragging = true;
            this.handler.setWrapperPos(this.offset.wrapperX - this.offset.x_new);
          }
        },

        touchEnd: () => {
          this.ele.slideWrap.off(this.touchEvents.touchMove, this.handler.touchMove);
          this.ele.document.off(this.touchEvents.touchMove , this.handler.touchMove);
          this.ele.document.off(this.touchEvents.touchEnd , this.handler.touchEnd);
          this.ele.document.off('mouseleave', this.handler.touchEnd);

          setTimeout(() => {
            this.dragging = false;
          }, 1);

          const swiper = swiperManager.getSwiper(this.ele.slideContainer.closest('.swiper-container').target[0]);
          if (swiper) {
            swiper.allowTouchMove = true;
          }
        },

        resetPos: () => {
          this.ele.slideWrap.css({
            'transform': '',
          });
        },

        changeHandler: (evt) => {
          this.ele.slideList.removeClass('is-checked');
          this.ele.slideList.find('.blind').remove();

          const slide = $q(evt.target).closest(this.selector.slideList);
          const color = evt.target.querySelector('.hidden') || null;
          slide.addClass('is-checked');
          slide.find('span').after(`<span class="blind">${this.globalText}</span>`);

          if (color !== null) {
            if (this.ele.section.closest('.option-selector-v2').find('.option-selector-v2__color-name > span').target.length > 0) {
              this.ele.section.closest('.option-selector-v2').find('.option-selector-v2__color-name > span').innerHTML(color.innerText);
            }
          }
        },

        keyDownHandler: (evt) => {
          if ((evt.keyCode === KEY_CODE.TAB)) {
            if (this.ele.component.hasClass('bindCheck')) {
              this.handler.clickHandler(evt);
            }
            // this.handler.changeHandler(evt);
          }
        },

        setWrapperPos: (pos, isMotion = false) => {
          if (isNaN(pos)) {
            return;
          }

          if (OptionSelectorV2.direction === 'ltr') {
            if (pos > 0 ) {
              pos = 0;
            } else if (this.ele.slideWrap.outerWidth() + pos <= this.ele.slideContainer.outerWidth() - this.containerPadding) {
              pos = this.ele.slideContainer.outerWidth() - this.containerPadding - this.ele.slideWrap.outerWidth();
            }
          } else {
            if (pos < 0) {
              pos = 0;
            } else if (this.ele.slideWrap.outerWidth() - pos <= this.ele.slideContainer.outerWidth() - this.containerPadding) {
              pos = (this.ele.slideContainer.outerWidth() - this.containerPadding - this.ele.slideWrap.outerWidth()) * -1;
            }
          }

          const posObj = {
            'transform': `translateX(${pos}px)`,
          };

          if (!isMotion) {
            posObj.transition = 'none';
          } else {
            posObj.transition = '';
          }

          this.ele.slideWrap.css(posObj);

          this.offset.startX = pos;
          let value = (Math.abs(pos) / (this.ele.slideContainer.outerWidth() - this.containerPadding - this.ele.slideWrap.outerWidth())) * 100;
          value = isNaN(value) ? 0 : value;
          this.percent = Math.abs(Math.floor(value));

          this.ele.component.removeClass('next');
          this.ele.component.removeClass('prev');

          if (this.percent <= 2) {
            this.ele.component.addClass('next');
          } else if(this.percent <= 98) {
            this.ele.component.addClass('prev');
            this.ele.component.addClass('next');
          } else {
            this.ele.component.addClass('prev');
          }
        },

        resize: () => {
          clearTimeout(this.timer);
          this.timer = setTimeout(() => {
            this.handler.timeResize();
          }, 10);
        },

        timeResize: () => {
          if (this.ele.slideContainer.width() < this.ele.slideWrap.width()) {
            if (!this.ele.component.hasClass('bindCheck')) {
              this.ele.component.addClass('bindCheck');

              this.ele.slideWrap.on(this.touchEvents.touchStart, this.handler.touchStart);
              this.ele.slideWrap.on(this.touchEvents.touchEnd, this.handler.touchEnd);

              this.ele.slideButtonList.on('click', this.handler.clickHandler);
              // this.ele.slideButtonList.on('keyup', this.handler.keyDownHandler);
            }
            this.containerPadding = parseInt(this.ele.slideContainer.css('padding-right'), 10) * 2;

            let pos = (this.ele.slideContainer.outerWidth() - this.containerPadding - this.ele.slideWrap.outerWidth()) * (this.percent / 100);
            if (OptionSelectorV2.direction !== 'ltr') {
              pos = pos * -1;
            }

            this.handler.setWrapperPos(pos);
          } else {
            this.ele.component.removeClass('bindCheck');
            this.ele.component.removeClass('next');
            this.ele.component.removeClass('prev');
            this.ele.component.addClass('option-selector-v2__swiper--min');

            this.ele.slideWrap.off(this.touchEvents.touchStart, this.handler.touchStart);
            this.ele.slideWrap.off(this.touchEvents.touchEnd, this.handler.touchEnd);

            this.ele.slideButtonList.off('click', this.handler.clickHandler);
            // this.ele.slideButtonList.off('keyup', this.handler.keyDownHandler);

            this.handler.resetPos();
          }
        },
      };

      this.startX = 0;

      this.globalText = null;

      OptionSelectorV2.instances.set(componentEl, this);

      this.init();
    }

    init() {
      this.setProperty();
      this.bindEvents();
    }

    scrollX() {
      const m = window.getComputedStyle(this.ele.slideWrap.target[0]).getPropertyValue('transform').match(/(-?[0-9\\.]+)/g);
      let wrapperX = 0;
      if (m) {
        wrapperX = parseInt(m[4], 10);
      }

      return wrapperX;
    }

    reInit() {
      this.isTouchEvent = this.handler.touchsupport();
      this.unBindEvents();

      this.setProperty();
      this.bindEvents();
    }

    setProperty() {
      if (utils.getDirection() === 'rtl') {
        OptionSelectorV2.direction = 'rtl';
      }

      this.ele.component = this.ele.section.find(this.selector.component);
      this.ele.slideWrap = this.ele.component.find(this.selector.slideWrap);
      this.ele.slideContainer = this.ele.component.find(this.selector.slideContainer);
      this.ele.slideButtonList = this.ele.component.find(this.selector.slideButtonList);
      this.ele.slideList = this.ele.component.find(this.selector.slideList);

      this.ele.component.removeClass('bindCheck');

      this.isTouchEvent = this.handler.touchsupport();
      this.touchEvents = {
        touchStart: this.isTouchEvent ? 'touchstart' : 'mousedown',
        touchMove: this.isTouchEvent ? 'touchmove' : 'mousemove',
        touchEnd: this.isTouchEvent ? 'touchend' : 'mouseup',
      };

      this.globalText = JSON.parse(this.ele.section.target[0].dataset.globalText).selected;

      this.startX = Math.abs(this.scrollX());
      if (this.startX > 0) {
        const value = (this.startX / (this.ele.slideContainer.outerWidth() - (parseInt(this.ele.slideContainer.css('padding-right'), 10) * 2) - this.ele.slideWrap.outerWidth())) * 100;
        this.percent = Math.abs(value);
      }
    }

    bindEvents() {
      this.ele.window.on('resize', this.handler.timeResize);
      this.ele.slideButtonList.on('click', this.handler.changeHandler);
      this.ele.slideButtonList.on('keyup', this.handler.keyDownHandler);
      this.handler.timeResize();

      const checked = this.ele.slideContainer.find('.is-checked button');
      if(this.startX === 0 && checked.target.length && this.ele.component.hasClass('bindCheck')) {
        this.handler.slideTo(checked);
      }
    }

    unBindEvents() {
      this.ele.window.off('resize', this.handler.timeResize);

      this.ele.slideButtonList.off('click', this.handler.clickHandler);
      this.ele.slideButtonList.off('keyup', this.handler.keyDownHandler);
      // this.ele.slideButtonList.off('keydown', this.handler.keyDownHandler);
      this.ele.slideButtonList.off('click', this.handler.changeHandler);

      this.ele.slideWrap.off(this.touchEvents.touchStart, this.handler.touchStart);
      this.ele.slideWrap.off(this.touchEvents.touchEnd, this.handler.touchEnd);
    }
  }

  OptionSelectorV2.direction = 'ltr';

  const init = () => {
    $q(selector.section).target.forEach((element) => {
      new OptionSelectorV2(element);
    });
  };

  const reInit = (ele) => {
    $q(ele).find(selector.section).target.forEach((element) => {
      if (OptionSelectorV2.instances.has(element)) {
        OptionSelectorV2.instances.get(element).reInit();
      } else {
        new OptionSelectorV2(element);
      }
    });
  };

  OptionSelectorV2.instances = new WeakMap();

  $q.ready(init);

  window.sg.common.optionSelectorV2 = {
    init,
    reInit,
  };
})();

(() => {
  const $q = window.sg.common.$q;
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;
  const video = window.sg.common.video;
  const triggerEvents = window.sg.common.utils.triggerEvent;
  const setMobileFocusLoop = window.sg.common.utils.setMobileFocusLoop;
  const removeMobileFocusLoop = window.sg.common.utils.removeMobileFocusLoop;

  class PopupVideo {
    constructor(el) {
      this.el = el;
      this.init();
    }

    setElements() {
      this.els = {
        el: this.el,
        videoWrapEl: this.el.querySelector('.popup-video__video-wrap'),
        currentVideoTitleEl: this.el.querySelector('.popup-video__current-video-title'),
        videoEls: this.el.querySelectorAll('.popup-video__video-wrap .video'),
        videoCloseButtonEl: this.el.querySelector('.popup-video__btn-video-close'),
        popupVideoLoopingStartEl: this.el.querySelector('.popup-video__looping--start'),
        popupVideoLoopingEndEl: this.el.querySelector('.popup-video__looping--end'),
      };

      this.currentPlayingVideoEl = {};
      this.focusTargetEl = {};
    }

    init() {
      if (PopupVideo.instances.get(this.el)) {
        return;
      }

      PopupVideo.instances.set(this.el, this);

      this.setElements();
      this.bindEvents();
    }

    reInit() {
      if (this.currentPlayingVideoEl instanceof Element) {
        this.close();
      }

      this.unBindEvents();
      this.setElements();
      this.bindEvents();
    }

    destroy() {
      this.unBindEvents();

      if (PopupVideo.instances.has(this.els.el)) {
        PopupVideo.instances.delete(this.els.el);
      }

      this.els = null;
    }

    setVideoSize() {
      if (this.els.videoWrapEl.classList.contains('popup-video__video-wrap--vertical')) {
        if (getCurrentDevice() === 'desktop') {
          this.els.videoWrapEl.style.height = `${window.innerHeight}px`;
          this.els.videoWrapEl.style.width = `${window.innerHeight * 9 / 16}px`;
        } else {
          if ((window.innerWidth * 0.9) < (window.innerHeight * 0.8 * 9 / 16)) {
            this.els.videoWrapEl.style.height = `${window.innerWidth * 0.9 * 16 / 9}px`;
            this.els.videoWrapEl.style.width = `${window.innerWidth * 0.9}px`;
          } else {
            this.els.videoWrapEl.style.height = `${window.innerHeight * 0.8}px`;
            this.els.videoWrapEl.style.width = `${window.innerHeight * 0.8 * 9 / 16}px`;
          }
        }
      } else {
        if (getCurrentDevice() === 'desktop') {
          if ((window.innerHeight * 0.9) < (window.innerWidth * 0.9 * 9 / 16)) {
            this.els.videoWrapEl.style.width = `${window.innerHeight * 0.9 * 16 / 9}px`;
            this.els.videoWrapEl.style.height = `${window.innerHeight * 0.9}px`;
          } else {
            this.els.videoWrapEl.style.width = `${window.innerWidth * 0.9}px`;
            this.els.videoWrapEl.style.height = `${window.innerWidth * 0.9 * 9 / 16}px`;
          }
        } else {
          this.els.videoWrapEl.style.width = `${window.innerWidth}px`;
          this.els.videoWrapEl.style.height = `${window.innerWidth * 9 / 16}px`;
        }
      }
    }

    setFocusToCloseButtonEl() {
      this.els.videoCloseButtonEl.focus();
    }

    setFocusToVideoTitleEl() {
      this.els.currentVideoTitleEl.focus();
    }

    bindEvents() {
      this.close = this.close.bind(this);
      this.setFocusToCloseButtonEl = this.setFocusToCloseButtonEl.bind(this);
      this.setFocusToVideoTitleEl = this.setFocusToVideoTitleEl.bind(this);
      this.setVideoSize = this.setVideoSize.bind(this);

      this.els.videoCloseButtonEl.addEventListener('click', this.close);
      this.els.popupVideoLoopingStartEl.addEventListener('focus', this.setFocusToCloseButtonEl);
      this.els.popupVideoLoopingEndEl.addEventListener('focus', this.setFocusToVideoTitleEl);
      window.addEventListener('resize', this.setVideoSize);
    }

    unBindEvents() {
      this.els.videoCloseButtonEl.removeEventListener('click', this.close);
      this.els.popupVideoLoopingStartEl.removeEventListener('focus', this.setFocusToCloseButtonEl);
      this.els.popupVideoLoopingEndEl.removeEventListener('focus', this.setFocusToVideoTitleEl);
      window.removeEventListener('resize', this.setVideoSize);
    }

    open(videoIndex = 0, target = null, displayMode = null) {
      if (displayMode === 'vertical') {
        this.els.videoWrapEl.classList.add('popup-video__video-wrap--vertical');
      } else {
        this.els.videoWrapEl.classList.remove('popup-video__video-wrap--vertical');
      }
      this.els.currentVideoTitleEl.innerText = JSON.parse(this.els.videoEls[videoIndex].dataset.videoData).title;
      document.body.style.overflow = 'hidden';
      this.els.el.classList.add('popup-video--show');
      this.els.videoCloseButtonEl.focus();
      this.els.videoEls[videoIndex].style.display = 'block';
      this.setVideoSize();
      video.init(this.els.videoEls[videoIndex]);

      this.currentPlayingVideoEl = this.els.videoEls[videoIndex];
      this.focusTargetEl = target;

      if (getCurrentDevice() === 'mobile') {
        setMobileFocusLoop(this.els.el);
      }

      setTimeout(() => {
        this.els.videoWrapEl.focus();
      }, 200);
    }

    close() {
      video.dispose(this.currentPlayingVideoEl);
      this.els.currentVideoTitleEl.innerText = '';
      this.currentPlayingVideoEl.removeAttribute('style');
      this.els.el.classList.remove('popup-video--show');
      document.body.removeAttribute('style');

      this.currentPlayingVideoEl = {};
      if (this.focusTargetEl instanceof Element) {
        this.focusTargetEl.focus();
      }

      if (getCurrentDevice() === 'mobile') {
        removeMobileFocusLoop();
      }

      triggerEvents(this.els.el, 'popupVideoClose');
    }
  }

  PopupVideo.instances = new WeakMap();

  const popupVideo = {
    initAll() {
      [...document.querySelectorAll('.popup-video')].forEach((el) => {
        if (!PopupVideo.instances.has(el)) {
          new PopupVideo(el);
        }
      });
    },
    init(el) {
      if (!PopupVideo.instances.has(el)) {
        new PopupVideo(el);
      }
    },
    reInit(el) {
      if (PopupVideo.instances.has(el)) {
        PopupVideo.instances.get(el).reInit();
      } else {
        new PopupVideo(el);
      }
    },
    destroy(el) {
      if (PopupVideo.instances.has(el)) {
        PopupVideo.instances.get(el).destroy();
      }
    },
    open(el, videoIndex, target, displayMode) {
      if (PopupVideo.instances.has(el)) {
        PopupVideo.instances.get(el).open(videoIndex, target, displayMode);
      } else {
        new PopupVideo(el).open(videoIndex, target, displayMode);
      }
    },
    close(el) {
      if (PopupVideo.instances.has(el)) {
        PopupVideo.instances.get(el).close();
      } else {
        new PopupVideo(el).close();
      }
    },
  };

  window.sg.common.popupVideo = popupVideo;
  $q.ready(popupVideo.initAll);
})();

(() => {
  const KEY_CODE = window.sg.common.constants.KEY_CODE;
  const popupUtils = {
    getFirstFocusableEl: window.sg.common.utils.getFirstFocusableEl,
    setFocusFirstFocusableEl: window.sg.common.utils.setFocusFirstFocusableEl,
    setMobileFocusLoop: window.sg.common.utils.setMobileFocusLoop,
    removeMobileFocusLoop: window.sg.common.utils.removeMobileFocusLoop,
    hideScroll: window.sg.common.utils.hiddenScroll,
    showScroll: window.sg.common.utils.visibleScroll,
    handlePopstate: {
      open: window.sg.common.utils.popupControl.open,
      close: window.sg.common.utils.popupControl.close,
    },
    showOverDimEls: window.sg.common.utils.showOverDimEls,
    hideOverDimEls: window.sg.common.utils.hideOverDimEls,
  };
  const { getMobileOS } = window.sg.common.utils;

  class Popup extends window.sg.components.Base {
    _init() {
      this.els = {
        el: this.el,
        closeEl: null,
        innerEl: null,
        scrollEls: null,
        childEl: null,
        actionsWrapEl: null,
      };

      this.id = null;
      this.isOpen = false;
      this.focusTargetEl = null;

      this._setElements();
      this._bindEvents();
    }

    _setElements() {
      this.els.closeEl = this.els.el.querySelector('.popup__close');
      this.els.innerEl = this.els.el.querySelector('.popup__inner');
      this.els.scrollEls = this.els.el.querySelectorAll('.scrollbar');
      this.els.childEl = this.els.el.querySelector('.popup__inner > [data-comp-name]');
      this.els.actionsWrapEl = this.els.el.querySelector('.popup__btn-wrap');

      this.id = this.els.el.getAttribute('id');
      this.child = this.getChild(this.els.childEl);
    }

    _bindEvents() {
      this.close = this.close.bind(this);
      this._handleKeydown = this._handleKeydown.bind(this);
      this._handleCloseKeydown = this._handleCloseKeydown.bind(this);
      this._handleActionClick = this._handleActionClick.bind(this);
      this._handleSetActions = this._handleSetActions.bind(this);

      this.els.closeEl.addEventListener('click', this.close);
      this.els.el.addEventListener('keydown', this._handleKeydown);
      this.els.closeEl.addEventListener('keydown', this._handleCloseKeydown);

      if (this.child) {
        this.child.listen('setButtons', this._handleSetActions);
      }

      if (this.els.actionsWrapEl) {
        this.els.actionsWrapEl.addEventListener('click', this._handleActionClick);
      }
    }

    _unBindEvents() {
      this.els.closeEl.removeEventListener('click', this.close);
      this.els.el.removeEventListener('keydown', this._handleKeydown);
      this.els.closeEl.removeEventListener('keydown', this._handleCloseKeydown);

      if (this.child) {
        this.child.unListen('setButtons', this._handleSetActions);
      }

      if (this.els.actionsWrapEl) {
        this.els.actionsWrapEl.removeEventListener('click', this._handleActionClick);
      }
    }

    open(focusTargetEl) {
      if (!this.isOpen) {
        this.focusTargetEl = focusTargetEl;
        this.el.style.display = 'flex';
        this.isOpen = true;

        popupUtils.handlePopstate.open(this.close);
        popupUtils.hideScroll();
        popupUtils.setMobileFocusLoop(this.el);
        popupUtils.hideOverDimEls();

        if (getMobileOS() === 'ios') {
          setTimeout(() => popupUtils.setFocusFirstFocusableEl(this.el), 200);
        } else {
          popupUtils.setFocusFirstFocusableEl(this.el);
        }

        const data = { id: this.id };
        this.emit('open', data);

        window.sg.common.lazyLoad.setLazyLoadManually(this.els.innerEl);
        Array.from(this.els.scrollEls).forEach((el) => {
          const scroll = this.getChild(el);
          scroll.resize();
        });

        this._handleControl('open', data);
      }
    }

    _handleControl(type, data) {
      if (this.child && this.child[type] && typeof this.child[type] === 'function') {
        this.child[type](data);
      }
    }

    _reInit() {
      this._unBindEvents();
      this._setElements();
      this._bindEvents();
    }

    _destroy() {
      this._unBindEvents();
    }

    close() {
      if (this.isOpen) {
        this.el.style.display = 'none';

        popupUtils.handlePopstate.close();
        popupUtils.showScroll();
        popupUtils.removeMobileFocusLoop();
        popupUtils.showOverDimEls();

        if (this.focusTargetEl && this.focusTargetEl instanceof Element) {
          const returnFocus = () => {
            this.focusTargetEl.focus();
            this.focusTargetEl = null;
          };

          if (getMobileOS() === 'ios') {
            setTimeout(returnFocus, 200);
          } else {
            returnFocus();
          }
        }

        this.isOpen = false;

        const data = { id: this.id };
        this.emit('close', { id: this.id }, true);
        this._handleControl('close', data);
      }
    }

    _handleKeydown(e) {
      if (e.shiftKey && KEY_CODE.TAB === e.keyCode) {
        const firstFocusableEl = popupUtils.getFirstFocusableEl(this.els.el);

        if (firstFocusableEl && e.target === firstFocusableEl) {
          e.preventDefault();
          this.els.closeEl.focus();
        }
      }
    }

    _handleCloseKeydown(e) {
      if (!e.shiftKey && KEY_CODE.TAB === e.keyCode) {
        e.preventDefault();
        popupUtils.setFocusFirstFocusableEl(this.els.el);
      }
    }

    _handleActionClick(e) {
      const action = e.target.dataset.action;

      if (action) {
        const data = { id: this.id, action };
        this.emit('action', data);
        this._handleControl('action', data);
      }
    }

    _handleSetActions(e) {
      e.stopPropagation();

      let actions = e.detail;

      if (!Array.isArray(actions)) {
        actions = [actions];
      }

      actions.forEach((action) => {
        const actionEl = this.els.actionsWrapEl.querySelector(`[data-action='${action.action}']`);

        if (actionEl) {
          if (action.state === 'enable') {
            actionEl.classList.remove('cta--disabled');
            actionEl.disabled = false;
          } else if (action.state === 'disable') {
            actionEl.classList.add('cta--disabled');
            actionEl.disabled = true;
          }

          if (e.detail.focus) {
            actionEl.focus();
          }
        }
      });
    }
  }

  window.sg.components.registerClass('popup', Popup);
})();

(() => {
  class Slider extends window.sg.components.Base {
    _init() {
      this.els = {
        el: this.el,
        containerEl: null,
        wrapperEl: null,
        slideEls: null,
        prevEl: null,
        nextEl: null,
        indicatorEl: null,
      };

      this.isCarousel = false;
      this.swiper = null;
      this.indicator = null;
      this.isLoop = false;

      this._setElements();
      this._setSwiper();
      this._bindEvents();
    }

    _setElements() {
      this.els.containerEl = this.els.el.querySelector('.slider__container');
      this.els.wrapperEl = this.els.el.querySelector('.slider__wrapper');
      this.els.slideEls = this.els.el.querySelectorAll('.slider__slide');
      this.els.prevEl = this.els.el.querySelector('.arrow-indicator--prev');
      this.els.nextEl = this.els.el.querySelector('.arrow-indicator--next');
      this.els.indicatorEl = this.els.el.querySelector('.indicator');
    }

    _setSwiper() {
      this.isCarousel = this.els.slideEls.length > 1;

      if (this.isCarousel) {
        this.isLoop = this.els.el.hasAttribute('data-loop');

        // eslint-disable-next-line no-undef
        this.swiper = new Swiper(this.els.containerEl, {
          loop: this.isLoop,
          navigation: {
            prevEl: this.els.prevEl,
            nextEl: this.els.nextEl,
          },
        });


        // to get duplicated slides
        this.els.slideEls = this.els.el.querySelectorAll('.slider__slide');

        this._setSwiperArrows();
        this._setAccessibility();
        this.indicator = this.getChild(this.els.indicatorEl);
      }
    }

    _bindEvents() {
      if (this.isCarousel) {
        this.swiper.on('slideChange', () => {
          this._setSwiperArrows();
          this._setAccessibility();
          this.indicator.select(this.swiper.realIndex);
          window.sg.common.lazyLoad.setLazyLoadManually(this.els.slideEls[this.swiper.activeIndex]);
        });

        this._handleIndicatorMove = this._handleIndicatorMove.bind(this);
        this.els.indicatorEl.addEventListener('indicatorMove', this._handleIndicatorMove);
      }
    }

    _unBindEvents() {
      if (this.isCarousel) {
        this.els.indicatorEl.removeEventListener('indicatorMove', this._handleIndicatorMove);
      }
    }

    _setSwiperArrows() {
      if (!this.isLoop) {
        if (this.swiper.isBeginning) {
          if (document.activeElement === this.els.prevEl) {
            this.els.nextEl.focus();
          }

          this.els.prevEl.style.display = 'none';
        } else {
          this.els.prevEl.style.display = '';
        }

        if (this.swiper.isEnd) {
          if (document.activeElement === this.els.nextEl) {
            this.els.prevEl.focus();
          }

          this.els.nextEl.style.display = 'none';
        } else {
          this.els.nextEl.style.display = '';
        }
      }
    }

    _setAccessibility() {
      const focusableSelectors = 'input, select, textarea, button, [href], [tabindex]:not([tabindex="-1"])';

      [...this.els.slideEls].forEach((slideEl, index) => {
        if (index === this.swiper.activeIndex) {
          slideEl.removeAttribute('aria-hidden');

          [...slideEl.querySelectorAll(focusableSelectors)].forEach((el) => {
            el.removeAttribute('tabindex');
            el.removeAttribute('aria-hidden');
          });
        } else {
          slideEl.setAttribute('aria-hidden', 'true');

          [...slideEl.querySelectorAll(focusableSelectors)].forEach((el) => {
            el.setAttribute('tabindex', '-1');
            el.setAttribute('aria-hidden', 'true');
          });
        }
      });
    }

    _handleIndicatorMove(e) {
      if (this.swiper && e.detail !== this.swiper.realIndex) {
        this.swiper.slideToLoop(e.detail);
      }
    }

    _reInit() {
      this._unBindEvents();
      if (this.swiper) {
        this.swiper.destroy();
      }

      this._setElements();
      this._setSwiper();
      this._bindEvents();
    }

    _destroy() {
      this._unBindEvents();
      this.swiper.destroy();
    }
  }

  window.sg.components.registerClass('slider', Slider);
})();

(() => {
  const $q = window.sg.common.$q;

  class SnackBar {
    constructor(el) {
      this.els = {
        el,
        linkActionEl: el.querySelector('.cta'),
      };

      this.init();
    }

    init() {
      if (SnackBar.instances.get(this.els.el)) {
        return;
      }

      SnackBar.instances.set(this.els.el, this);

      this.bindEvents();
    }

    bindEvents() {
      this.els.el.style.bottom = `${-this.els.el.getBoundingClientRect().height}px`;

      if (this.els.linkActionEl) {
        this.els.linkActionEl.setAttribute('tabindex', '-1');
      }
    }

    open() {
      this.els.el.removeAttribute('aria-hidden');
      if (this.els.linkActionEl) {
        this.els.linkActionEl.removeAttribute('tabindex');
      }
      this.els.el.classList.add('show');
      this.els.el.style.bottom = '24px';

      setTimeout(() => {
        this.els.el.style.transitionProperty = 'opacity';
        this.els.el.style.opacity = '0';
      }, 3500);

      setTimeout(() => {
        this.els.el.classList.remove('show');
        this.els.el.removeAttribute('style');
        this.els.el.setAttribute('aria-hidden', true);
        this.els.el.style.bottom = `${-this.els.el.getBoundingClientRect().height}px`;
        if (this.els.linkActionEl) {
          this.els.linkActionEl.setAttribute('tabindex', '-1');
        }
      }, 4000);
    }
  }

  SnackBar.instances = new WeakMap();

  const snackBar = {
    initAll() {
      [...document.querySelectorAll('.snack-bar')].forEach((el) => {
        if (!SnackBar.instances.has(el)) {
          new SnackBar(el);
        }
      });
    },
    show(el) {
      if (SnackBar.instances.has(el)) {
        SnackBar.instances.get(el).open();
      } else {
        new SnackBar(el).open();
      }
    },
  };

  window.sg.common.snackBar = snackBar;
  $q.ready(snackBar.initAll);
})();

(() => {
  const $q = window.sg.common.$q;
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;
  const getCurrentMediaType = window.sg.common.utils.getCurrentMediaType;
  const bezierEasing = window.BezierEasing;
  const triggerEvents = window.sg.common.utils.triggerEvent;
  const addEventListener = window.sg.common.utils.addEventListener;
  const removeAllEventListeners = window.sg.common.utils.removeAllEventListeners;
  const getNormalizedScrollLeft = window.sg.common.utils.getNormalizedScrollLeft;
  const setNormalizedScrollLeft = window.sg.common.utils.setNormalizedScrollLeft;
  const isRtl = window.sg.common.utils.isRtl;

  class Tab {
    constructor(el, index = 0) {
      this.els = {
        el,
        tabListEl: null,
        tabItemTitleEls: [],
        tabLeftArrowEl: null,
        tabRightArrowEl: null,
      };

      this.init(index);
    }

    init(index = 0) {
      if (Tab.instances.has(this.els.el)) {
        return;
      }

      Tab.instances.set(this.els.el, this);

      this.initValues();
      this.setElements();
      this.bindEvents();
      this.select(index, true);
    }

    reInit(index = 0) {
      this.unBindEvents();
      this.initValues();
      this.setElements();
      this.bindEvents();
      this.select(index);
    }

    destroy() {
      this.unBindEvents();

      if (Tab.instances.has(this.els.el)) {
        Tab.instances.delete(this.els.el);
      }

      this.els = null;
    }

    initValues() {
      this.index = -1;
      this.startX = 0;
      this.isContentsDragging = false;
      this.isAnim = false;
      this.diffX = 0;
      this.device = '';
      this.selectDisabled = false;
      this.isUseArrow = this.els.el.dataset.useArrow !== undefined;
      this.duration = 300;
      this.easing = bezierEasing(0.4, 0.0, 0.2, 1.0);
      this.isRtl = isRtl();
    }

    setElements() {
      this.els.tabListEl = this.els.el.querySelector('.tab__list');
      this.els.tabItemTitleEls = this.els.el.querySelectorAll('.tab__item-title');

      if (this.isUseArrow) {
        this.els.tabLeftArrowEl = this.els.el.querySelector('.tab__left-arrow');
        this.els.tabRightArrowEl = this.els.el.querySelector('.tab__right-arrow');

        if (this.isRtl) {
          const prevLabel = this.els.tabLeftArrowEl.getAttribute('aria-label');
          const nextLabel = this.els.tabRightArrowEl.getAttribute('aria-label');

          this.els.tabLeftArrowEl.setAttribute('aria-label', nextLabel);
          this.els.tabRightArrowEl.setAttribute('aria-label', prevLabel);
        }

        this.setArrow();
      }
    }

    select(index, isInit = false) {
      if (index !== this.index && !this.isAnim) {
        this.index = index;

        [...this.els.tabItemTitleEls].forEach((el) => {
          el.parentElement.classList.remove('tab__item--active');
          el.setAttribute('aria-selected', 'false');
          // el.removeAttribute('title');
        });

        this.els.tabItemTitleEls[index].parentElement.classList.add('tab__item--active');
        this.els.tabItemTitleEls[index].setAttribute('aria-selected', 'true');
        // this.els.tabItemEls[index].setAttribute('title', 'selected');

        isInit ? this.setPosition(index, false) : this.setPosition(index);

        if (!isInit) {
          triggerEvents(this.els.el, 'tabSelect', this.index);
        }
      }
    }

    selectTab(index) {
      if (!this.selectDisabled) {
        this.select(index);
        this.setPosition(index);
      }
    }

    setPosition(index, anim = true) {
      if (getCurrentDevice() === 'mobile') {
        const elRect = this.els.el.getBoundingClientRect();
        const tabItemRect = this.els.tabItemTitleEls[index].getBoundingClientRect();

        const duration = anim ? this.duration : 0;

        const spacing = this.getCurrentPixelSize(56);

        if (tabItemRect.right + spacing > elRect.right) {
          this.scrollTo(tabItemRect.right - elRect.right + spacing, duration);
        } else if (tabItemRect.left - spacing < elRect.left) {
          this.scrollTo(-((elRect.left - tabItemRect.left) + spacing), duration);
        }
      }
    }

    animate(render, duration, easing) {
      const start = Date.now();
      this.isAnim = true;
      this.isContentsDragging = false;

      const animation = () => {
        const p = (Date.now() - start) / duration;

        if (p > 1) {
          render(1);
          this.isAnim = false;
        } else {
          requestAnimationFrame(animation);
          render(easing(p));
        }
      };

      requestAnimationFrame(animation);
    }

    scrollTo(scrollLeft, duration = this.duration) {
      const curScrollLeft = getNormalizedScrollLeft(this.els.tabListEl);
      const contentsMaxScrollLeft = this.els.tabListEl.scrollWidth - this.els.el.getBoundingClientRect().width;
      if (curScrollLeft + scrollLeft > contentsMaxScrollLeft) {
        scrollLeft = contentsMaxScrollLeft - curScrollLeft;
      }

      if (curScrollLeft + scrollLeft < 0) {
        scrollLeft = -curScrollLeft;
      }

      const render = (p) => {
        setNormalizedScrollLeft(this.els.tabListEl, curScrollLeft + (scrollLeft * p));
      };

      if (duration > 0) {
        if (!this.isAnim) {
          this.animate(render, duration, this.easing);
        }
      } else {
        render(1);
      }
    }

    handleScroll() {
      this.setArrow();
    }

    getCurrentPixelSize(pixel) {
      const mediaType = getCurrentMediaType();
      const size = parseFloat(pixel);
      const isConvert = mediaType !== 'desktop-over';
      const resolution = mediaType.indexOf('mobile') > -1 ? 360 : 1440;

      if (!isNaN(size)) {
        return !isConvert ? pixel : parseFloat((pixel / resolution * window.innerWidth).toFixed(3));
      }
    }

    setArrow() {
      if (getCurrentDevice() === 'desktop' && this.isUseArrow) {
        const tolerance = 4;
        const contentsMaxScrollLeft = this.els.tabListEl.scrollWidth - this.els.el.getBoundingClientRect().width;
        const tabLeftWrapEl = this.els.tabLeftArrowEl.parentElement;
        const tabRightWrapEl = this.els.tabRightArrowEl.parentElement;
        const scrollLeft = getNormalizedScrollLeft(this.els.tabListEl);

        if (scrollLeft < tolerance) {
          tabLeftWrapEl.classList.add('disabled');
        } else {
          if (tabLeftWrapEl.classList.contains('disabled')) {
            tabLeftWrapEl.classList.remove('disabled');
          }
        }

        if (scrollLeft > contentsMaxScrollLeft - tolerance) {
          tabRightWrapEl.classList.add('disabled');
        } else {
          if (tabRightWrapEl.classList.contains('disabled')) {
            tabRightWrapEl.classList.remove('disabled');
          }
        }
      }
    }

    handleTabLeftArrowClick() {
      if (getCurrentDevice() === 'desktop' && this.isUseArrow) {
        const tabListElLeft = this.els.el.getBoundingClientRect().left + this.getCurrentPixelSize(56);
        let targetTabItemIndex = -1;

        for (let i = 0; i < this.els.tabItemTitleEls.length; i++) {
          const tabItemElLeft = this.els.tabItemTitleEls[i].parentElement.getBoundingClientRect().left;
          if (!this.isRtl) {
            if (tabItemElLeft + 4 > tabListElLeft) {
              targetTabItemIndex = i - 1;
              break;
            }
          } else {
            if (tabItemElLeft + 4 < tabListElLeft) {
              targetTabItemIndex = i;
              break;
            }
          }
        }

        this.scrollTo(this.els.tabItemTitleEls[targetTabItemIndex].parentElement.getBoundingClientRect().left - tabListElLeft);
      }
    }

    handleTabRightArrowClick() {
      if (getCurrentDevice() === 'desktop' && this.isUseArrow) {
        const tabListElRight = this.els.el.getBoundingClientRect().right - this.getCurrentPixelSize(56);
        let targetTabItemIndex = -1;

        for (let i = 0; i < this.els.tabItemTitleEls.length; i++) {
          const tabItemElRight = this.els.tabItemTitleEls[i].parentElement.getBoundingClientRect().right;

          if (!this.isRtl) {
            if (tabItemElRight - 4 > tabListElRight) {
              targetTabItemIndex = i;
              break;
            }
          } else {
            if (tabItemElRight - 4 < tabListElRight) {
              targetTabItemIndex = i - 1;
              break;
            }
          }
        }

        this.scrollTo(this.els.tabItemTitleEls[targetTabItemIndex].parentElement.getBoundingClientRect().right - tabListElRight);
      }
    }

    bindEvents() {
      [...this.els.tabItemTitleEls].forEach((el, i) => {
        addEventListener(el, 'click', () => {
          if (!this.selectDisabled) {
            this.select(i);
          }
        });
      });

      this.handleContentsDragStart = this.handleContentsDragStart.bind(this);
      this.handleContentsDrag = this.handleContentsDrag.bind(this);
      this.handleContentsDragEnd = this.handleContentsDragEnd.bind(this);

      this.els.el.addEventListener('mousedown', this.handleContentsDragStart);

      this.handleScroll = this.handleScroll.bind(this);
      this.handleTabLeftArrowClick = this.handleTabLeftArrowClick.bind(this);
      this.handleTabRightArrowClick = this.handleTabRightArrowClick.bind(this);

      if (this.isUseArrow) {
        this.els.tabListEl.addEventListener('scroll', this.handleScroll);
        this.els.tabLeftArrowEl.addEventListener('click', this.handleTabLeftArrowClick);
        this.els.tabRightArrowEl.addEventListener('click', this.handleTabRightArrowClick);
      }

      this.resize = this.resize.bind(this);
      window.addEventListener('resize', this.resize);
    }

    unBindEvents() {
      [...this.els.tabItemTitleEls].forEach((el) => {
        removeAllEventListeners(el, 'click');
      });

      this.els.el.removeEventListener('mousedown', this.handleContentsDragStart);

      if (this.isUseArrow) {
        this.els.tabListEl.removeEventListener('scroll', this.handleScroll);
        this.els.tabLeftArrowEl.removeEventListener('click', this.handleTabLeftArrowClick);
        this.els.tabRightArrowEl.removeEventListener('click', this.handleTabRightArrowClick);
      }

      window.removeEventListener('resize', this.resize);
    }

    resize() {
      const device = getCurrentDevice();
      if (this.device !== device) {
        this.device = device;
        this.setPosition(this.index);
      }
      this.setArrow();
    }

    handleContentsDragStart(e) {
      if (getCurrentDevice() === 'mobile' || (getCurrentDevice() === 'desktop' && this.isUseArrow)) {
        this.startX = e.clientX + getNormalizedScrollLeft(this.els.tabListEl);
        this.isContentsDragging = true;
        this.diffX = 0;

        document.addEventListener('mousemove', this.handleContentsDrag);
        document.addEventListener('mouseup', this.handleContentsDragEnd);
      }
    }

    handleContentsDrag(e) {
      if (!this.isAnim && this.isContentsDragging) {
        this.diffX = this.startX - (e.clientX + getNormalizedScrollLeft(this.els.tabListEl));
        let scrollLeft = getNormalizedScrollLeft(this.els.tabListEl) + this.diffX;
        const contentsMaxScrollLeft = this.els.tabListEl.scrollWidth - this.els.el.getBoundingClientRect().width;

        if (scrollLeft < 0) {
          scrollLeft = 0;
        } else if (scrollLeft > contentsMaxScrollLeft) {
          scrollLeft = contentsMaxScrollLeft;
        }

        setNormalizedScrollLeft(this.els.tabListEl, scrollLeft);
      }
    }

    handleContentsDragEnd() {
      this.isContentsDragging = false;
      document.removeEventListener('mousemove', this.handleContentsDrag);
      document.removeEventListener('mouseup', this.handleContentsDragEnd);
    }

    setSelectDisabled(disabled) {
      this.selectDisabled = disabled;
    }
  }

  Tab.instances = new WeakMap();

  const tab = {
    initAll() {
      const tabEls = [...document.querySelectorAll('.tab')];
      const staticTabEls = [...document.querySelectorAll('.static-content .tab')];

      for (let i = 0; i < tabEls.length; i++) {
        const tabEl = tabEls[i];
        let isDuplicate = false;

        for (let j = 0; j < staticTabEls.length; j++) {
          const staticTabEl = staticTabEls[j];
          if (tabEl === staticTabEl) {
            isDuplicate = true;
            break;
          }
        }

        if (!isDuplicate) {
          if (!Tab.instances.has(tabEl)) {
            new Tab(tabEl);
          }
        }
      }
    },
    init(el, index) {
      let instance;

      if (Tab.instances.has(el)) {
        instance = Tab.instances.get(el);
        instance.reInit(index);
      } else {
        instance = new Tab(el, index);
      }

      return instance;
    },
    reInit(el, index) {
      if (Tab.instances.has(el)) {
        Tab.instances.get(el).reInit(index);
      } else {
        new Tab(el, index);
      }
    },
    selectTab(el, index) {
      if (Tab.instances.has(el)) {
        Tab.instances.get(el).selectTab(index);
      }
    },
    setSelectDisabled(el, disabled) {
      if (Tab.instances.has(el)) {
        Tab.instances.get(el).setSelectDisabled(disabled);
      }
    },
    destroy(el) {
      if (Tab.instances.has(el)) {
        Tab.instances.get(el).destroy();
      }
    },
  };

  window.sg.common.tab = tab;
  $q.ready(tab.initAll);
})();

(() => {
  const utils = window.sg.common.utils;
  const constants = window.sg.common.constants;

  const $q = window.sg.common.$q;
  const selector = { 
    component: '.pd-wishlist-cta',
    active: 'pd-wishlist-cta--on',
    closeBtn: '.wishlist-popup__close',
  };

  const ele = {
    component: null,
    window: $q(window),
  };
  
  const focusCheck = {
    start: null,
    close: null,
    closefocus: null,
  };

  const handler = {
    clickBtn: (event) => {
      openWishlistPop($q(event.currentTarget));
    },
    hideBoxEvent: (event) => {
      if (event.keyCode === window.sg.common.constants.KEY_CODE.ESC) {
        const wishIcon = event.currentTarget || event.target;
        hideBox(wishIcon);
      } else if (event.keyCode === window.sg.common.constants.KEY_CODE.ENTER) {
        const wishIcon = event.currentTarget || event.target;
        showBox(wishIcon);
      }
    },
    hideBoxHover: (event) => {
      if (event.keyCode === window.sg.common.constants.KEY_CODE.ESC) {
        const wishIcon = document.querySelector('.pd-wishlist-cta:hover');
        if(wishIcon !== null){
          hideBox(wishIcon);
        }
      }
    },
    showBoxEvent: (event) => {
      const wishIcon = event.currentTarget || event.target;
      showBox(wishIcon);
    },
    focusLockPop: (event) => {
      if (event.keyCode === constants.KEY_CODE.TAB) {
        if (focusCheck.close === document.activeElement && event.shiftKey === false) {
          event.preventDefault();
          focusCheck.start.focus();
        } else if (focusCheck.start === document.activeElement && event.shiftKey === true) {
          event.preventDefault();
          focusCheck.close.focus();
        }
      }
    },
  };

  function hideBox(wishIcon){
    const text = wishIcon.getAttribute('aria-label');
    if (text !== null) {
      wishIcon.setAttribute('data-old-labeltxt',text);
    }
    wishIcon.removeAttribute('aria-label');
  }

  function showBox(wishIcon) {
    const text = wishIcon.getAttribute('data-old-labeltxt');
    if (text !== null) {
      wishIcon.setAttribute('aria-label',text);
    }
    wishIcon.removeAttribute('data-old-labeltxt');
  }

  function openWishlistPop($btn) {
    const $popup = $q($btn.attr('data-div-id') || '');
    if ($popup.target.length <= 0) {
      return;
    }

    const $close = $popup.find(selector.closeBtn);


    focusCheck.start = $popup.target[0];
    focusCheck.close = $close.target[0];
    focusCheck.closefocus = $btn;

    $popup.show();

    ele.window.off('keydown', handler.focusLockPop).on('keydown', handler.focusLockPop);

    utils.hiddenScroll();

    $popup.focus();

    $close.off('click', closeWishlistPop).on('click', closeWishlistPop);
  }

  function closeWishlistPop(closeBtn = null) {
    $q(focusCheck.start || '.wishlist-popup').hide();

    ele.window.off('keydown', handler.focusLockPop);

    utils.visibleScroll();
    
    if (closeBtn instanceof Element) {
      closeBtn.focus();
    } else {
      focusCheck.closefocus.focus();
    }

    focusCheck.start = null;
    focusCheck.close = null;
    focusCheck.closefocus = null;
  }

  function bindEvents() {
    ele.window.off('keydown', handler.hideBoxHover).on('keydown', handler.hideBoxHover);
    ele.component.off('click', handler.clickBtn).on('click', handler.clickBtn);
    ele.component.target.forEach((element) => {
      const $element = $q(element);
      $element.on('keydown',handler.hideBoxEvent);
      $element.on('click',handler.showBoxEvent);
      $element.on('blur',handler.showBoxEvent);
      $element.on('mouseleave',handler.showBoxEvent);

      if (element.classList.contains('pd-wishlist-cta--on')) {
        if (element.hasAttribute('data-product-name') === true) {
          element.setAttribute('aria-label',`${element.getAttribute('data-added-text')} : ${element.getAttribute('data-product-name')}`);
        } else {
          element.setAttribute('aria-label', element.getAttribute('data-added-text'));
        }
      } else {
        if (element.hasAttribute('data-product-name') === true) {
          element.setAttribute('aria-label',`${element.getAttribute('data-add-text')} : ${element.getAttribute('data-product-name')}`);
        } else {
          element.setAttribute('aria-label', element.getAttribute('data-add-text'));
        }
      }
    });
  }

  function init() {
    ele.component = $q(selector.component);
    bindEvents();
  }
  
  function reInit() {
    ele.component = $q(selector.component);
    bindEvents();
  }

  window.sg.components.wishlistIcon = { 
    reInit,
    closeWishlistPop,
  };
  
  $q.ready(init);
})();

(() => {
  const $q = window.sg.common.$q;
  let gnbSearchElements = {};
  let focusTargetEl = false;

  function getElements() {
    gnbSearchElements = {
      gnbSearch: document.querySelector('.gnb-search'),
      gnbSearchForm: document.querySelector('.gnb-search__form'),
      gnbSearchInput: document.querySelector('.gnb-search__input'),
      gnbSearchPlaceholder: document.querySelector('.gnb-search__placeholder'),
      gnbSearchInputCancelButton: document.querySelector('.gnb-search__input-btn--cancel'),
      gnbSearchResultWrap: document.querySelector('.gnb-search__result-wrap'),
      gnbSearchHistory: document.querySelector('.gnb-search__history'),
      gnbSearchHistoryClearButton: document.querySelector('.gnb-search__btn--history-clear'),
      gnbSearchSuggested: document.querySelector('.gnb-search__suggested'),
      gnbSearchRelated: document.querySelector('.gnb-search__related'),
      gnbSearchMatched: document.querySelector('.gnb-search__matched'),
      gnbSearchQuickLink: document.querySelector('.gnb-search__quick-link'),
      gnbSearchPopularKeyword: document.querySelector('.gnb-search__popular-keyword'),
      gnbSearchNoSuggestions: document.querySelector('.gnb-search__no-suggestions'),
      gnbSearchInputCloseButton: document.querySelector('.gnb-search__input-btn--close'),
      gnbSearchCloseBtn: document.querySelector('.gnb-search__btn--close'),
      gnbSearchLoopingStartEl: document.querySelector('.gnb-search__looping--start'),
      gnbSearchLoopingEndEl: document.querySelector('.gnb-search__looping--end'),
    };
  }


  function init() {
    getElements();

    if (!gnbSearchElements.gnbSearch) {
      return;
    }

    bindEvents();
    changeResultWrapMaxHeight();
  }

  function replaceExceptionCharacter(searchText) {
    // eslint-disable-next-line no-useless-escape
    const regExp = /[\{\}\[\]/?,;:|\)*~`!^_<>@\#$%&\\\=\(\'\"]/gi;
    return searchText.replace(regExp, '');
  }

  function bindEvents() {
    gnbSearchElements.gnbSearchForm.addEventListener('submit', () => {
      gnbSearchElements.gnbSearchInput.value = replaceExceptionCharacter(gnbSearchElements.gnbSearchInput.value);
      gnbSearchElements.gnbSearchInput.focus();
    });

    gnbSearchElements.gnbSearchInputCancelButton.addEventListener('click', () => {
      searchInputClear();
    });

    gnbSearchElements.gnbSearchHistoryClearButton.addEventListener('click', () => {
      gnbSearchElements.gnbSearchInput.focus();
    });

    gnbSearchElements.gnbSearchInputCloseButton.addEventListener('click', () => {
      close();
    });

    gnbSearchElements.gnbSearchCloseBtn.addEventListener('click', () => {
      close();
    });

    gnbSearchElements.gnbSearchLoopingStartEl.addEventListener('focus', () => {
      if (window.sg.common.utils.getCurrentDevice() === 'desktop') {
        gnbSearchElements.gnbSearchCloseBtn.focus();
      } else if (window.sg.common.utils.getCurrentDevice() === 'mobile') {
        gnbSearchElements.gnbSearchInputCloseButton.focus();
      }
    });

    gnbSearchElements.gnbSearchLoopingEndEl.addEventListener('focus', () => {
      if (window.sg.common.utils.getCurrentDevice() === 'desktop') {
        gnbSearchElements.gnbSearchInput.focus();
      } else if (window.sg.common.utils.getCurrentDevice() === 'mobile') {
        gnbSearchElements.gnbSearchInputCloseButton.focus();
      }
    });

    window.addEventListener('resize', () => {
      changeResultWrapMaxHeight();
    });
  }

  function changeResultWrapMaxHeight() {
    gnbSearchElements.gnbSearchResultWrap.style.maxHeight = `${window.innerHeight - gnbSearchElements.gnbSearchForm.getBoundingClientRect().bottom}px`;
  }

  function searchInputClear() {
    gnbSearchElements.gnbSearchInput.value = '';
    gnbSearchElements.gnbSearchInputCancelButton.classList.remove('gnb-search__input-btn--cancel--show');
    gnbSearchElements.gnbSearchPlaceholder.classList.remove('gnb-search__placeholder--hide');
    if (gnbSearchElements.gnbSearchHistory) {
    gnbSearchElements.gnbSearchHistory.classList.add('gnb-search__history--hide');
    }
    if (gnbSearchElements.gnbSearchSuggested) {
    gnbSearchElements.gnbSearchSuggested.classList.add('gnb-search__suggested--hide');
    }
    if (gnbSearchElements.gnbSearchRelated) {
    gnbSearchElements.gnbSearchRelated.classList.add('gnb-search__related--hide');
    }
    if (gnbSearchElements.gnbSearchMatched) {
    gnbSearchElements.gnbSearchMatched.classList.add('gnb-search__matched--hide');
    }
    if (gnbSearchElements.gnbSearchQuickLink) {
      gnbSearchElements.gnbSearchQuickLink.classList.add('gnb-search__quick-link--hide');
    }
    if (gnbSearchElements.gnbSearchPopularKeyword) {
      gnbSearchElements.gnbSearchPopularKeyword.classList.add('gnb-search__popular-keyword--hide');
    }
    if (gnbSearchElements.gnbSearchNoSuggestions) {
    gnbSearchElements.gnbSearchNoSuggestions.classList.add('gnb-search__no-suggestions--hide');
  }
    gnbSearchElements.gnbSearchInput.focus();
  }

  function close() {
    searchInputClear();
    gnbSearchElements.gnbSearch.removeAttribute('style');
    document.body.removeAttribute('style');
    window.sg.common.utils.removeMobileFocusLoop();

    if (focusTargetEl) {
      focusTargetEl.focus();
  }
  }

  function reInit() {
    changeResultWrapMaxHeight();
  }

  function show(targetEl = false) {
    focusTargetEl = targetEl;

    gnbSearchElements.gnbSearch.style.display = 'block';
    document.body.style.overflow = 'hidden';
    window.sg.common.utils.setMobileFocusLoop(gnbSearchElements.gnbSearch);
    gnbSearchElements.gnbSearchInput.focus();
  }

  window.sg.components.gnbSearch = { init, reInit, show };

  $q.ready(() => init());
})();

(function ($) {
    "use strict";

    var gnbSearch = $("section.gnb-search");

    if (!gnbSearch) {
        return;
    }

    var siteCode = $("#siteCode").val();
    var b2bFlag = ($("#b2bFlag").val() === 'Y');
    var _DEFAULT_SEARCH_STAGE = "qa";
    var searchParm = "searchvalue";
    var scene7domain = $("#scene7domain").val();
    var searchURL = $("#sc_gnb_searchURL").val();
    var placeholder = $('#sc_gnb_placeholder').val();
    var searchKeyword = $.cookies.getSearchKeyword();
    var quicklinks = [];
    var popularKeywords = [];
    var suggestUrl = "/search/suggest/v6";
    var contentSourceArr = ["Products"];
	var isPopularKeywordSearched = false;

    if (b2bFlag) {
        suggestUrl = "/business/v6/search/suggest";
        contentSourceArr.push("BizProducts");
        contentSourceArr.push("B2cProducts");
    }

    if (siteCode === "us") {
        searchURL += "/searchMain";
    }

    Granite.I18n.setLocale($("#language").val());

    var apiConfig = {
        domain: null,
        stage: _DEFAULT_SEARCH_STAGE
    };

    var _displayYN = {
        suggest: 'Y',
        related: 'Y'
    };

    var gnbSearchEl = {
        gnbSearchForm: gnbSearch.find(".gnb-search__form"),
        gnbSearchInputWrap: gnbSearch.find(".gnb-search__input-wrap"),
        gnbSearchInput: gnbSearch.find(".gnb-search__input"),
        gnbSearchPlaceholder: gnbSearch.find(".gnb-search__placeholder"),
        gnbSearchInputCancelButton: gnbSearch.find(".gnb-search__input-btn--cancel"),
        gnbSearchInputSubmitButton: gnbSearch.find(".gnb-search__input-btn--search"),
        gnbSearchResultWrap: gnbSearch.find(".gnb-search__result-wrap"),
        gnbSearchHistory: gnbSearch.find(".gnb-search__history"),
        gnbSearchHistoryClearButton: gnbSearch.find(".gnb-search__btn--history-clear"),
        gnbSearchQuicklink: gnbSearch.find(".gnb-search__quick-link"),
        gnbPopularKeyword: gnbSearch.find(".gnb-search__popular-keyword"),
        gnbSearchRelated: gnbSearch.find(".gnb-search__related"),
        gnbSearchNoSuggestions: gnbSearch.find(".gnb-search__no-suggestions"),
        gnbSearchChipWrap: gnbSearch.find(".gnb-search__chip-wrap"),
        gnbSearchCloseBtn: gnbSearch.find(".gnb-search__btn--close"),
    };

    function _hideAll() {
        gnbSearchEl.gnbSearchQuicklink.addClass("gnb-search__quick-link--hide");
        gnbSearchEl.gnbSearchHistory.addClass("gnb-search__history--hide");
        gnbSearchEl.gnbSearchRelated.addClass("gnb-search__related--hide");
        gnbSearchEl.gnbSearchNoSuggestions.addClass("gnb-search__no-suggestions--hide");
        gnbSearchEl.gnbPopularKeyword.addClass("gnb-search__popular-keyword--hide");
    }
    function _showHistory() {
		_showQuicklink();
        setSearchHistory();
        gnbSearchEl.gnbSearchHistory.removeClass("gnb-search__history--hide");
    }

    function _showPopularKeyword() {
		_showQuicklink();
		if (popularKeywords.length > 0){
	        gnbSearchEl.gnbPopularKeyword.removeClass("gnb-search__popular-keyword--hide");
		}
    }
    function _showQuicklink() {
		if (0 < quicklinks.length) {
	    	if (siteCode !== "us") {
	            gnbSearchEl.gnbSearchQuicklink.removeClass("gnb-search__quick-link--hide");
	        }
		}
    }

    function _showNoSuggest() {
		_showQuicklink();
        gnbSearchEl.gnbSearchNoSuggestions.removeClass("gnb-search__no-suggestions--hide");
    }

    function _showReusltContent() {
		_showQuicklink();
        gnbSearchEl.gnbSearchRelated.removeClass("gnb-search__related--hide");
    }

    function _showReuslt() {
        gnbSearchEl.gnbSearchResultWrap.removeClass("gnb-search__result-wrap--hide");
        gnbSearchEl.gnbSearchChipWrap.addClass("gnb-search__chip-wrap--hide");
    }

    function _showChip() {
        gnbSearchEl.gnbSearchResultWrap.addClass("gnb-search__result-wrap--hide");
        gnbSearchEl.gnbSearchChipWrap.removeClass("gnb-search__chip-wrap--hide");
    }

    function stripTags(s) {
        if (s != null) {
            s = s.split('<').join('').split('>').join('').split('&lt').join('').split('&gt').join('');
        }
        return s;
    }

    function exceptionCharacter(s) {
        var regExp = /[\{\}\[\]?,;:|\)*~`!^_<>@\#$%&\\\=\(\'\"]/gi;
        if (regExp.test(s)) {
            s = s.replace(regExp, "");
        }
        return s;
    }

    function highlight(s, q) {
        if (s != null) {
            s = s.split(q).join('<b>' + q + '</b>');
        }
        return s;
    }

    function _getLinkTitle(s) {
        if (s != null) {
            s = s.split('"').join('&quot;').split('<b>').join('').split('</b>').join('');
        }
        return s;
    }

    function getTitleTags(s) {
        s = _getLinkTitle(s);
        return Granite.I18n.get('search.comp.queryInput.searchButton');
    }

    function validateUrl(url) {
        var result = url;
        if (url.lastIndexOf('/') === url.length - 1) {
            result = url.substr(0, url.length - 1);
        }
        return result;
    }

    function addScene7(img) {
        var reg = /(?:\/\/)([\/a-z0-9-%#?&=\w])+(\.[a-z0-9]{2,4}(\?[\/a-z0-9-%#?&=\w]+)*)*/gi

        if (!reg.test(img)) {
            img = scene7domain + img;
        }
        return img;
    }

	function setSearchHistory() {
        if (0 < searchKeyword.length) {
            var template = "";
            $.each(searchKeyword, function (idx) {
                template += '<li class="gnb-search__result-item" role="listitem">';
                template += '<a href="javascript:;" an-tr="nv00_gnb-search history-search" an-ca="search" an-ac="search layer" an-la="search history:' + exceptionCharacter(searchKeyword[idx]) + '">';
                template += searchKeyword[idx];
                template += '</a>';
                template += '</li>';
            });
            gnbSearchEl.gnbSearchHistory.find("ul").html(template);
        }
    }
    function searchPopularKeyword(thisObj) {
		
    	if (siteCode !== "us" && !isPopularKeywordSearched) {
			isPopularKeywordSearched = true;
            
            var parm = {
                siteCd: siteCode,
                stage: apiConfig.stage,
                searchValue: ''
            };

            $.ajax({
                type: "GET",
                crossDomain: true,
                data: parm,
                dataType: "json",
                jsonCallback: "samsungcallback",
                url: validateUrl(apiConfig.domain) + suggestUrl,
                error: function () {
                },
                success: function (data) {
                    var resData = data.response.resultData;
                    if (resData && resData.common) {
                        if (resData.common.suggestedKeywords) {
                            var popularKeyword = resData.common.suggestedKeywords;
                            var template = "";
                            $.each(popularKeyword, function (idx) {
				                var q = popularKeyword[idx];
				                if (popularKeywords.indexOf(q) < 0) {
					                popularKeywords.push(q);
					            }
				                if (idx < 4) {
				                    template += '<li class="gnb-search__result-item" role="listitem">' +
				                                    '<a href="' + searchURL + encodeURIComponent(stripTags(q)) + '" title="' + getTitleTags(q) +
				                                        '" an-tr="nv00_gnb-popular keywords-search" an-ca="search" an-ac="search layer" an-la="popular keywords:' + q + '">' +
				                                        q +
				                                    '</a>' +
				                                '</li>';
                            	}
				            });
				            gnbSearchEl.gnbPopularKeyword.find("ul").html(template);
                        }
                    }
                },
				complete: function () {
					setInputTagging("");
					window.sg.components.gnbSearch.show(thisObj);
                }
            });
        }
    }

    function _drawRelatedSearch(relatedKeywords, q) {
        var template = '';

        if (0 < relatedKeywords.length) {
            for (var i = 0; i < relatedKeywords.length; i++) {
                var relatedKey = relatedKeywords[i] || "";
                if (i < 4) {
                    template += '<li class="gnb-search__result-item" role="listitem">' +
                                    '<a href="' + searchURL + encodeURIComponent(stripTags(relatedKey)) + '" title="' + getTitleTags(relatedKey) +
                                        '" an-tr="nv00_gnb-suggested searches-search" an-ca="search" an-ac="search layer" an-la="suggested searches:' + _getLinkTitle(relatedKey).toLowerCase() + '">' +
                                        highlight(relatedKey, q) +
                                    '</a>' +
                                '</li>';
                }
            }
            gnbSearchEl.gnbSearchRelated.find("ul").html(template);
            gnbSearchEl.gnbSearchRelated.removeClass("gnb-search__related--hide");

            return 'Y';
        } else {
            gnbSearchEl.gnbSearchRelated.addClass("gnb-search__related--hide");
            return 'N';
        }
    }

    function drawResult(resData) {
        var relatedShow = 'N';

        if (siteCode !== "us") {
            if (_displayYN.related === 'Y' && resData.common.relatedKeywords) {
                relatedShow = _drawRelatedSearch(resData.common.relatedKeywords, resData.q);
            }
        } else if (resData.Suggestions && resData.Suggestions.Suggestion) {
            if (_displayYN.related === 'Y') {
                relatedShow = _drawRelatedSearch(resData.Suggestions.Suggestion, resData.q);
            }
        }
        _showReusltContent();

        if (relatedShow === 'N') {
            gnbSearchEl.gnbSearchRelated.addClass("gnb-search__related--hide");
        }

        if (relatedShow === 'N') {
            _showNoSuggest();
        }
    }

    // /search/suggest/v6 호출
    function searchForKeyword(q) {
        if (siteCode === "us") {
            searchForKeywordInUs(q);
    	} else {
            var parm = {
                siteCd: siteCode,
                stage: apiConfig.stage,
                searchValue: q
            };

            $.ajax({
                type: "GET",
                crossDomain: true,
                data: parm,
                dataType: "json",
                jsonCallback: "samsungcallback",
                url: validateUrl(apiConfig.domain) + suggestUrl,
                error: function () {
                    _showNoSuggest();
                },
                success: function (data) {
					_hideAll();
                    var resData = data.response.resultData;

                    resData.q = q; // = resData.common.searchValue = resData.common.originSearchValue

                    if (resData && resData.common.searchCount > 0) {
                        drawResult(resData);
                    } else {
                        _showNoSuggest();
                    }
                }
            });
        }
    }

    //us용
    function searchForKeywordInUs(q) {
        var parm = {
            searchTerm: q
        };

        $.ajax({
            type: "GET",
            data: parm,
            url: validateUrl(apiConfig.domain),
            error: function () {
                _showNoSuggest();
            },
            success: function (data) {
				_hideAll();
                data.q = q;
                if (typeof data.Recommend === "object") {
                    drawResult(data);
                } else {
                    _showNoSuggest();
                }
            }
        });
    }

    function setSearchCookies(value) {
        var date = new Date();
        date.setTime(date.getTime() + 1000 * 60 * 60 * 24 * 84);
        $.cookies.setSearchKeyword(decodeURIComponent(value), date);
    }

    function setInputTagging(q) {
        gnbSearchEl.gnbSearchInput.attr("an-la", "search bar:keyword submit:" + q);
    }

    function _init() {
        apiConfig.domain = $.trim($("#esapiSearchDomain").val());
        if (siteCode === "us") {
            searchParm = "listType=g&searchTerm";
            apiConfig.domain = "/us/search/global/es/typeahead";

            if (b2bFlag) {
                apiConfig.domain = "/us/api/es_search_business/business/typeahead.json";
            }
        }
        apiConfig.stage = $.trim($("#apiStageInfo").val());

        gnbSearchEl.gnbSearchQuicklink.find('li').each(function () {
            var keyword = $.trim($(this).text());

            if (quicklinks.indexOf(keyword) < 0) {
                quicklinks.push(keyword);
            }
        });

        if (searchURL.indexOf('.html') > -1) {
            searchURL += '?' + searchParm + '=';
        } else {
            searchURL += '/?' + searchParm + '=';
        }

        // COMP6FE-1595: [EPP] SEUK O2O Store용 바코드 스캐너 개발
        // EPP O2O store인 경우 바코드 스캔 icon 노출
        if('Y' === $('#eppFlag').val() && window.sg.epp && window.sg.epp.common && window.sg.epp.common.isPosStore){
        	$(".gnb-search__search-wrap .gnb-search__input-wrap").addClass("gnb-search__input-wrap__barcode--show");

        	// 바코드 스캐너 html, js 가져오기
            var scannerUrl = location.pathname.substr(0, location.pathname.indexOf(window.sg.epp.common.companyCode)) + window.sg.epp.common.companyCode;
            if (location.pathname.indexOf(".html") > 0 ) {
            	scannerUrl = scannerUrl + ".scanner.html";
            } else {
            	scannerUrl =  scannerUrl + ".scanner/";
            }

            $.ajax({
				url : scannerUrl,
				success : function(data) {
					$("section.gnb-search").append(data);
				},
				error : function(e){
					console.log(e);
				}
			});
        }
    }

    gnbSearch.on("focus", ".gnb-search__input", function () {
        var q = stripTags($.trim($(this).val()));
        searchKeyword = $.cookies.getSearchKeyword();
		_hideAll();

        if (q && q.length > 0) {
            searchForKeyword(q);
        } else {
            if (0 < searchKeyword.length) {
                _showHistory();
            } else {
                // Popular Keyword
                _showPopularKeyword();
            }
        }
        if ((siteCode !== "us") || (q && q.length > 0)) {
            _showReuslt();
        }
        window.sg.components.gnbSearch.reInit();

    	if ( 'Y' === $('#eppFlag').val() ){
    		$('.gnb-search__result-wrap').addClass('gnb-search__result-wrap--hide');
    	}
    });

    gnbSearch.on("click", ".gnb-search__contents", function (e) {
        if ($(".gnb-search__search-wrap").has(e.target).length === 0) {
            _showChip();
        }
    });

    gnbSearch.on("click", ".gnb-search__input-btn--cancel", function () {
        _showChip();
    });

    gnbSearch.on("input", ".gnb-search__input", function () {
    	if ( 'Y' === $('#eppFlag').val() ){
    		$('.gnb-search__result-wrap').removeClass('gnb-search__result-wrap--hide');
    	}
        var q = $(this).val();
        $(this).val(exceptionCharacter(q));
        q = $.trim(q);
        searchKeyword = $.cookies.getSearchKeyword();
        setInputTagging(q);
		_hideAll();

        if (q && q.length > 0) {
            if (siteCode === "us") {
                _showReuslt();
            }
            gnbSearchEl.gnbSearchPlaceholder.addClass("gnb-search__placeholder--hide");
            gnbSearchEl.gnbSearchInputCancelButton.addClass("gnb-search__input-btn--cancel--show");
            searchForKeyword(q);
        } else {
            gnbSearchEl.gnbSearchPlaceholder.removeClass("gnb-search__placeholder--hide");
            gnbSearchEl.gnbSearchInputCancelButton.removeClass("gnb-search__input-btn--cancel--show");
            if (0 < searchKeyword.length) {
                _showHistory();
            } else {
                _showPopularKeyword();
            }

            gnbSearchEl.gnbSearchRelated.find("ul").empty();
        }
    });

    //_bindRelatedSearchEvent, _bindSuggestEvent TODO quick-link add cookie ??
    gnbSearch.on("click", ".gnb-search__related a, .gnb-search__quick-link a", function () {
        var value = $(this).text();
        setSearchCookies(value);
    });

    //_bindHistoryEvent
    gnbSearch.on("click", ".gnb-search__history a", function () {
        var value = stripTags($(this).html());
        window.location.href = searchURL + encodeURIComponent(value);
    });

    gnbSearch.on("click", ".gnb-search__btn--history-clear", function () {
        _hideAll();
        _showQuicklink();
        _showPopularKeyword();
        $.cookies.clearSearchKeyword();
        searchKeyword = [];

    });

    gnbSearch.on("click", ".gnb-search__input-btn--search", function (e) {
        e.preventDefault();

        var q = stripTags($.trim(gnbSearchEl.gnbSearchInput.val()));
        if (!q) q = placeholder;

        if (q) {
            setSearchCookies(q);
            window.location.href = searchURL + encodeURIComponent(q);
            window.gmap = null;
        }
    });

    // barcode icon click event
    gnbSearch.on("click", ".gnb-search__input-btn--scan-barcode", function (e) {
        e.preventDefault();

        // COMP6FE-1595: [EPP] SEUK O2O Store용 바코드 스캐너 개발
        if('Y' === $('#eppFlag').val() ) {
        	// 스캐너 활성화
        	let c_event = new CustomEvent("scanner.enabled");
            document.dispatchEvent(c_event);

            window.sg.components.barcodeScannerPopup.showPopup(this);
        }
    });

    $(document).on("click", ".gnb-search__chip", function () {
        var value = $(this).text();

        setSearchCookies(value);
        window.location.href = searchURL + value;
    });

    $(document).on("click", ".gnb__search-btn-js", function () {
		if(siteCode !== "us" && !isPopularKeywordSearched){
			searchPopularKeyword(this);
		}else{
	        setInputTagging("");
	        window.sg.components.gnbSearch.show(this);
		}
    });
    
    $(document).on('click', '.shop-with-expert-search', function(e) {
        e.preventDefault();
            var chatUrl = 'https://www.samsung.com/us/expert-chat/?search_instant';
        if ($(window).width() < 768) {
        window.open (chatUrl, 'newwindow');
        } else {
            window.open (chatUrl, 'newwindow', 'height=700, width=440, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no');
        }
    });

    $(function () {
        if (searchURL && searchURL !== "") {
            _init();
        }
    });

})(window.jQuery);

/**
 * GNB Util 내부 스크립트 Jquery 오류로 인한 위치 변경
 */

 var SITE_CD = "";
 if ($("#siteCode").val() !== '' && $("#siteCode").val() !== undefined) {
	 SITE_CD = $("#siteCode").val();
 } else {
	 SITE_CD = 'sec';
 }
 
 var USE_ESTORE = true;
 
 var DOMAIN = "";
 if ($("#domain").val() !== '' && $("#domain").val() !== undefined) {
	 DOMAIN = $("#domain").val();
 } else {
	 DOMAIN = 'www.samsung.com';
 }
 
 var STORE_DOMAIN = '';
 
 if($("#useStore").val() === 'N') {
	 USE_ESTORE = false;
 }
 
 if ($("#storeDomain").val() !== '') {
	 STORE_DOMAIN = $("#storeDomain").val();
 } else {
	 STORE_DOMAIN = location.protocol+'shop.samsung.com';
 }
 
 // Store API 호출 시 사용하는 SiteCode
 const STORE_SITE_CODE = $('#store_sitecode').val();
 // [P6 B2B] b2b 여부 체크
 const IS_B2B = $('#b2bFlag').val() === "Y" ? true : false;
 //[EPP] EPP 관련 변수 추가
 const IS_EPP = checkEppSite();
 let EPP_COMPANYCODE = "";
 if(window.sg!= null && window.sg.epp != null && window.sg.epp.common != null){
	EPP_COMPANYCODE = window.sg.epp.common.companyCode;
 }

 var SEC_LOCAL_URL_CHECKMEMBERSTATE = 'http://local.sec.samsung.com/comLocal/checkMemberStateAjax.do';
 var SEC_LOCAL_URL_SIGNIN = 'http://local.sec.samsung.com/comLocal/loginCheck.do';
 
 var login_user_info = {};
 
 $("#signInForm input[name=domain]").val(DOMAIN);
 $("#joinForm input[name=domain]").val(DOMAIN);
 $("#findAccountForm input[name=domain]").val(DOMAIN);

(function($, win) {
	 'use strict';
 
	 $(function(){
		 $('.layer_popup .close, .layer_popup .icon-close-x, .layer_popup .alert-ok-button').click(function(){
			 if( $(this).data('popup') === 'close' ){
				 $('.accesseFocusTarget').trigger('focus');
			 }
 
			 $('.layer_popup').hide();
			 $('.lightbox-skrim').hide();
 
			 return false;
		 });
	 });
})(jQuery, window);
/*!************************************************
 * jquery.cookies.2.2.0.min.js Cookie Util
 **************************************************/
/**
 * 쿠키 데이터
 */
$.cookies.data = {
	// Cookie Name
	'SEARCH_NAME' : 'sk',
	'ACCESSORY_SEARCH_NAME' : 'ask',
	'NAVIGATION_NAME' : 'nh',
	'PRIVATECODE_NAME' : 'pv',
	'COMPARELIST_NAME' : 'cl',
	'WISHLIST_NAME' : 'wl',
	'INSTORE_PRIVATECODE_NAME' : 'ipv',
	'STORE_REGION_NUM' : "cnregionnum",
	'STORE_REGION_CODE' : "cnregion",
	'STORE_REGION_NAME' : "cnregionname",
	'STORE_CITY_NUM' : "cncitynamenum",
	'STORE_CITY_CODE' : "cncity",
	'STORE_CITY_NAME' : "cncityname",
	// Cookie Value Max Length
	'SEARCH_MAX_SIZE' : 4,
	'PRIVATECODE_MAX_SIZE' : 5,
	'WISHLIST_MAX_SIZE' : 6,
	'STORE_REGION_MAX_SIZE' : 1,
	'STORE_CITY_MAX_SIZE' : 1
};

var CONTENT = "/content/samsung";

/**
 * 쿠키의 Default Option return
 */
$.cookies.getDefaultOption = function(expires, path) {
	// expires 값이 없을 경우 default 1일
	if(!expires || !(expires instanceof Date)) {
		expires = new Date();
		expires.setTime(expires.getTime() + 1000*60*60*24);
	}
	// path 값이 없을 경우 '/'
	if (!path) {
		path = '/';
	} else if (window.location.pathname.indexOf(CONTENT) > -1) {
		path = CONTENT + path;
	}
	// SITE CODE 별로 저장
	var defaultOptions = {
		expiresAt: expires,
		path: path,
		domain: '.samsung.com',
		secure: false
	};
	
	return defaultOptions;
};

/**************************************************
 * WishList - START
 **************************************************/

/**
 * 위시리스트 제품 저장
 * @param id, expires
 */
$.cookies.setWishList = function(id, expires) {
	var cookieNm = this.data.WISHLIST_NAME;
	var cookieVal = this.get(cookieNm);

	if(!cookieVal) {
		cookieVal = [id];
	} else {
		if($.inArray(id, cookieVal) >= 0) {
			return;
		}
		if(cookieVal.length >= this.data.WISHLIST_MAX_SIZE) {
			cookieVal.splice(0,1);
		}
		cookieVal.push(id);
	}
	this.set(cookieNm, cookieVal, this.getDefaultOption(expires));
};

/**
 * 위시리스트 제품 수 조회
 * @returns int 제품 수
 */
$.cookies.getWishListCnt = function() {
	var cookieVal = this.get(this.data.WISHLIST_NAME);
	return (cookieVal && $.isArray(cookieVal) ? cookieVal.length : 0);
};

/**
 * 위시리스트 제품 조회
 * @returns Array 위시리스트 저장된 제품ID 리스트
 */
$.cookies.getWishList = function() {
	var cookieVal = this.get(this.data.WISHLIST_NAME);
	return (cookieVal && $.isArray(cookieVal) ? cookieVal : []);
};

/**
 * 위시리스트 제품 존재 여부
 * @param id
 * @returns boolean 제품 존재 여부
 */
$.cookies.isAddedWishList = function(id) {
	var cookieNm = this.data.WISHLIST_NAME;
	var cookieVal = this.get(cookieNm);

	if(cookieVal && $.isArray(cookieVal)) {
		for(var i=0,iSize=cookieVal.length ; i < iSize ; i++) {
			if(cookieVal[i] === id) {
				return true;
			}
		}
	}
	return false;
};

/**
 * 위시리스트 제품 삭제
 * @param id
 * @returns boolean 삭제성공여부
 */
$.cookies.deleteWishProduct = function(id, expires) {
	var cookieNm = this.data.WISHLIST_NAME;
	var cookieVal = this.get(cookieNm);

	if(cookieVal && $.isArray(cookieVal)) {
		var num = $.inArray(id, cookieVal);
		if(num >= 0) {
			cookieVal.splice(num, 1);
			if(cookieVal.length <= 0) {
				this.del(cookieNm, this.getDefaultOption(expires));
			} else {
				this.set(cookieNm, cookieVal, this.getDefaultOption(expires));
			}
			return true;
		}
	}
	return false;
};

/**
 * 위시리스트 제품 전체 삭제
 * @returns boolean 삭제성공여부
 */
$.cookies.deleteWishList = function(expires) {
	this.del(this.data.WISHLIST_NAME, this.getDefaultOption(expires));
};

/**************************************************
 * WishList - END
 **************************************************/


/**
 * SITE CODE 변경 시 현재 SITE CODE의 모든 쿠키 내용 제거
 */
try {
	if(!$.cookies.get('cookie_country') || '' === $.cookies.get('cookie_country')) {
		$.cookies.set('cookie_country', SITE_CD, $.cookies.getDefaultOption());
	} else if(SITE_CD !== $.cookies.get('cookie_country')) {
		var deleteOption = $.cookies.getDefaultOption();
		$.cookies.del($.cookies.data.NAVIGATION_NAME, deleteOption);
		$.cookies.del($.cookies.data.PRIVATECODE_NAME, deleteOption);
		$.cookies.del($.cookies.data.COMPARELIST_NAME, deleteOption);
		$.cookies.del($.cookies.data.WISHLIST_NAME, deleteOption);
		$.cookies.del($.cookies.data.INSTORE_PRIVATECODE_NAME, deleteOption);
		$.cookies.set('cookie_country', SITE_CD, $.cookies.getDefaultOption());
	}
} catch (e) {}
var ss = $;

(function ($) {

	ss.EstoreIfQueue = {

		// Estore API 호출 시 큐에 담을 것인지 바로 호출 할 것인지 판단
		setQueue : function(callbackFunction) {
			// 토큰 값이 있을 경우 로그인 되었다고 판단
			var token = $.cookies.get("iPlanetDirectoryPro", {domain : ".samsung.com"});
			var snsSessionId = $.cookies.get("snsSessionId", {domain : ".samsung.com"});

			// 토큰 값이 있고 ESTORE 연계 사이트일 경우에 큐에 쌓아둠
			if (token || snsSessionId) {
				if (USE_ESTORE) {
					if (this.getIsSignReady()) {
						this.callFunction(callbackFunction, arguments);
					} else {
						this.queue.push(arguments);
					}
				} else {
					this.callFunction(callbackFunction, arguments);
				}
			} else {
				this.callFunction(callbackFunction, arguments);
			}
		},

		// 함수 실행
		callFunction : function(callbackFunction, args) {
			if (callbackFunction && typeof (callbackFunction) == "function") {
				var params = [];

				for (var i = 1; i < args.length; i++) {
					params.push(args[i]);
				}
				callbackFunction.apply(null, params);
			}
		},

		// 로그인 판단 시점 set
		setIsSignReady : function(result) {
			this.isSignReady = result;

			if (result === true || result === 'true') {
				for (var i = 0; i < this.queue.length; i++) {
					if (this.queue[i].length)
						this.callFunction(this.queue[i][0], this.queue[i]);
				}
			}
		},

		// 로그인 판단 시점 get
		getIsSignReady : function() {
			return this.isSignReady;
		},

		// set properties
		setProperties : function() {
			this.isSignReady = false;
			this.queue = [];

		},

		// initialize
		init : function() {
			this.setProperties();
		}

	};

	ss.EstoreIfQueue.init();

} (jQuery));

/*!************************************************
 * E-Store Interface 관련 공통 Util
 * 인터페이스명세서(NG_to_Store)_20140226-v.3.0 적용
 **************************************************/
//var jQuery1910499421933433041_1385598221584 = function(data){ };
var estore = (function(){

	/**
	 * JSON 을 URL Parameter 로 변경
	 */
	var jsonToStringParameter = function( jsonParam ) {
		var strParam = '?';
		var idx = 0;
		var value;
		for( var key in jsonParam ) {
			if( idx != 0 ){
				strParam += '&';
			}
			value = jsonParam[key];
			if( $.isArray(value) ) {
				$.each(value, function(idx, data){
					strParam += key + '=' + data;
					if( idx < value.length-1 ) strParam += '&';
				});
			} else {
				strParam += key + '=' + value;
			}
			idx++;
		}
		return strParam;
	};

	/**
	 * ESTORE ERROR MESSAGE Alert Show
	 */
	var errorMsgShow = function( message ) {
		
		//sec 레이어 팝업이 안뜨는 문제 때문에 주석 2016-11-23 lsh0032.lee@partner.samsung.com 
		/*
	    var body = $('.ss_samsung');
	    var isWow = body.hasClass('pdp_wow') || body.hasClass('instore') || body.hasClass('business') ? true : false;
		if(isWow && SITE_CD == 'sec'){
			alert(message);
			return;
		}

 
		if (SITE_CD == 'sec') {
			if ($('#dummy-popup-container').text().length > 0 && !isWow ) {
				alert(message);
				return;
			}
		}
		*/

		var $layer = $('#popup_alert');
		$layer.find('.msg-text').html( message );

		if(SITE_CD === 'sec'){
			$layer.find('.pop-btn').find('.button').text("확인");
		}

		$(".layer_popup").hide();
		$layer.parent().show();
		if(SITE_CD === 'sec'){
			$('.lightbox-skrim').show();
		}else{
			$('.lightbox-skrim').hide();
		}
		var l = parseInt(($('body').width() - $layer.width())/2);
		var t = parseInt( $(window).scrollTop() + (($(window).height()-$layer.height())/2) );
		if($(window).height()<$layer.height()){
			t = $(window).scrollTop() + 10;
		}

		$layer.css({ "top":t+"px", "left":l+"px"});
		//web accessibility
		$("#popup_alert .popup_wrap .pop-btn").find('a').focus();
	};

	/*************************
	 * ajax call
	 *************************/
	var send = function( service, param, returnCallback ) {
		var currLoc = location.href;
		var isConsumer = false;
		if(currLoc.indexOf('/consumer') > -1 ) {
			isConsumer = true;
		}
		var hybrisApiJson = $("#hybrisApiJson").val();
		//new-hybris
		var isNewHybris = ($('#shopIntegrationFlag').val() === 'Hybris-new')?true:false;
		
		
		var shopSiteCd = '';
		if(SITE_CD == "ae" || SITE_CD=="ae_ar"){
			let dotcom_multistore = $.cookies.get("dotcom_multistore") ? $.cookies.get("dotcom_multistore").toString() : '';
			shopSiteCd = !fnIsNull(dotcom_multistore) ? dotcom_multistore : SITE_CD;
		} else if(SITE_CD == "levant"){
	    	shopSiteCd = "jo";
	    } else if(SITE_CD == "levant_ar"){
	    	shopSiteCd = "jo_ar";
	    } else if(SITE_CD == "n_africa"){
	    	shopSiteCd = "ma";
	    }
		// [Epp] epp store api 처리
		if(IS_EPP && shopSiteCd != ''){
			shopSiteCd = EPP_COMPANYCODE;
		}

		const storeSiteCodeWithEpp = IS_EPP ? EPP_COMPANYCODE : STORE_SITE_CODE;
		const siteCodeWithEpp = IS_EPP ? EPP_COMPANYCODE : SITE_CD;
		// [Epp] epp store api 처리
		
		
		var url = '';
		
		//VTEX 국가 add cart 분기 로직 
		if(service === "addCart"){
			if((SITE_CD==="ar" && !IS_EPP)|| SITE_CD==="br"){
				var storeurl= STORE_DOMAIN + "/" + SITE_CD + "/getServicesProduct"+( param ? jsonToStringParameter(param) : '' );
				window.location.href = storeurl;
			}else if( SITE_CD==="py"){
				var storeurl;
				storeurl= STORE_DOMAIN + "/getServicesProduct"+( param ? jsonToStringParameter(param) : '' );
				window.location.href = storeurl;
			}
		}
		
		//new-hybris
		if(((isNewHybris && SITE_CD =='uk') || IS_B2B) && service === "getCartCount"){ //20210402 SEBN old hybris 적용
			url = STORE_DOMAIN + '/tokocommercewebservices/v2/' + storeSiteCodeWithEpp + "/minicart/totalProducts";			
		} else if( (SITE_CD === 'ar' || SITE_CD === 'br') && service === "getCartCount" ){
			url = STORE_DOMAIN + '/' + SITE_CD + '/_v/private/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
		} else if(SITE_CD === 'py'){
			if(service === "getCartCount") {
				url = STORE_DOMAIN + '/_v/private/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
			} else if(service === "getRealTimeProductSimpleInfo") {
				url = STORE_DOMAIN + '/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
			} else {
				url = STORE_DOMAIN + '/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
			}
		} else if(shopSiteCd != ''){
			url = STORE_DOMAIN + '/' + shopSiteCd + '/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
		} else {			
			//new-hybris
			if((isNewHybris && SITE_CD !='uk') || IS_B2B){ 
				var storeWebDomain = $("#storeWebDomain").val();
				url =  storeWebDomain + '/' + siteCodeWithEpp + '/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
				if(IS_B2B){
					url =  storeWebDomain + '/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
				}
			}else
				url = STORE_DOMAIN + '/' + storeSiteCodeWithEpp + '/ng/p4v1/' + service + ( param ? jsonToStringParameter(param) : '' );
		}
		//new-hybris
		if((isNewHybris || IS_B2B) && service === "getCartCount"){
			if(url != ''){
				$.ajax({
					url: url,
					type: 'GET',
					dataType : 'json',
					crossDomain : true,
					xhrFields: {
						withCredentials: true
					},
					success: function (data) {
						if( $.isFunction(returnCallback) ) {
							returnCallback( data );
						}
					}
				});
			}
		} else if(service === "getRealTimeProductSimpleInfo" && isConsumer && SITE_CD !== 'br' && hybrisApiJson !== "Y"){
			$.ajax({
				url: url,
				type: 'GET',
				dataType : 'jsonp',
				jsonpCallback : 'jQuery1910499421933433041_1385598221584',
				jsonp : 'callback',
				success: function (data) {
					// 쿠키/세션간 사용자 정보가 일치하지 않을 경우
					if( '2100' === data.resultCode || 2100 === data.resultCode) {

						//store 세션없음. 로그아웃처리
						if( param && param.hasOwnProperty('returnUrl') && '' !== param.returnUrl ) {
							$.Auth.signOut( param.returnUrl );
						} else {
							$.Auth.signOut();
						}
						// cn 사이트일 경우 코드값이 2000 ~ 3000번 일때만 경고창 노출
					} else if(SITE_CD === "cn" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if(SITE_CD === "sec" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								'2002' !== data.resultCode && 2002 !== data.resultCode && // 판매불가상품 2015.04.17
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if( SITE_CD !== "cn" && SITE_CD !== "sec" && 
							'0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
															9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
							// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
							'2110' !== data.resultCode && 2110 !== data.resultCode ) {
						errorMsgShow( data.resultMessage );
					}
					// return callback
					if( $.isFunction(returnCallback) ) {
						returnCallback( data );
					}
				},
				error:function(jqXHR, textStatus, errorThrown){
					//console.log("e");
				}
			});
		} else if (service === "getRealTimeProductSimpleInfo" && SITE_CD === 'sec'){
			$.ajax({
				url: url,
				type: 'GET',
				dataType : 'jsonp',
				jsonpCallback : 'jQuery1910499421933433041_1385598221584',
				jsonp : 'callback',
				timeout : 10000,
				success: function (data) {
					// 쿠키/세션간 사용자 정보가 일치하지 않을 경우
					if( '2100' === data.resultCode || 2100 === data.resultCode ) {
						//store 세션없음. 로그아웃처리
						if( param && param.hasOwnProperty('returnUrl') && '' !== param.returnUrl ) {
							$.Auth.signOut( param.returnUrl );
						} else {
							$.Auth.signOut();
						}
						// cn 사이트일 경우 코드값이 2000 ~ 3000번 일때만 경고창 노출
					} else if(SITE_CD === "cn" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if(SITE_CD === "sec" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								'2002' !== data.resultCode && 2002 !== data.resultCode && // 판매불가상품 2015.04.17
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
									//에러 메시지의 내용 변화 (정확하게 아래의 문구가 맞아 떨어질 때 메시지 조작) dong_won.lee
									if (data.resultMessage.indexOf('구매 한도를 초과하여 구매가 불가능합니다.<br />')!==-1) {
										data.resultMessage =  '구매 한도' + data.resultMessage.split('구매 한도')[1].replace('<br />','\n');
									}
						errorMsgShow( data.resultMessage );
					} else if( SITE_CD !== "cn" && SITE_CD !== "sec" && 
							'0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
															9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
							// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
							'2110' !== data.resultCode && 2110 !== data.resultCode ) {
						errorMsgShow( data.resultMessage );
					}
					// return callback
					if( $.isFunction(returnCallback) ) {
						returnCallback( data );
					}
				},
				error:function(jqXHR, textStatus, errorThrown){
					//errorMsgShow( ESTORE_FAULT_MSG ); // e-store 작업 관련 
					//returnCallback();
					if (SITE_CD === 'au' || SITE_CD === 'nz' || SITE_CD === 'sec') { // 금주 DB 작업 영향 국가만 
						if (window.location.pathname === '/' + SITE_CD + '/wishlist') {      // wishlist 페이지에서 에러처리 
							//errorMsgShow( ESTORE_FAULT_MSG ); // e-store 작업 관련 
							returnCallback();
						}
					}
					//한총 타임아웃 시 미판매 문구 노출 (20180510)
                    if(SITE_CD === 'sec'&& errorThrown === 'timeout' && $("#product-detail-current-modelcode").val()){
                        $('#BT_shop .BT_txt').html('해당 상품을 판매 준비하고 있습니다. 구매 가능 여부는<br />가까운 매장이나 삼성전자 공식 판매처에 문의하시기 바랍니다.');
                        $('#BT_shop').show();						
                        $('#BT_shop .product-details__link.s-cta-retailer.js-cta-buy-sec').hide(); 		//상품보유매장 찾기는 숨김 
                        $('#BT_shop .BT_help').hide();      		//툴팁 링크 가림 
                        $('#BT_shop .BT_help-content').hide();	//툴팁의 내용 가림
                        $('#BT_shop .BT_txt').show();			//판매준비 또는 판매종료 상품으로 구매가능여부는<br />삼성전자 공식판매처에 문의하시기 바랍니다. 표시 
                        $('#find-store-shopmain').show();        //매장찾기 표시
                        $('#store-reservation').hide();
                    }
					//console.log("e");
				}
			});
		} else if(service === "getRealTimeProductSimpleInfo" && isConsumer && hybrisApiJson === "Y"){
			$.ajax({
				url: url,
				type: 'GET',
				dataType : 'json',
				xhrFields: { withCredentials: true },
				contentType : "application/x-www-form-urlencoded",
				crossDomain : true,
				success: function (data) {
					// 쿠키/세션간 사용자 정보가 일치하지 않을 경우
					if( '2100' === data.resultCode || 2100 === data.resultCode ) {

						//store 세션없음. 로그아웃처리
						if( param && param.hasOwnProperty('returnUrl') && '' !== param.returnUrl ) {
							$.Auth.signOut( param.returnUrl );
						} else {
							$.Auth.signOut();
						}
						// cn 사이트일 경우 코드값이 2000 ~ 3000번 일때만 경고창 노출
					} else if(SITE_CD === "cn" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001!== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if(SITE_CD === "sec" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								'2002' !== data.resultCode && 2002 !== data.resultCode && // 판매불가상품 2015.04.17
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if( SITE_CD !== "cn" && SITE_CD !== "sec" && 
							'0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
															9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
							// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
							'2110' !== data.resultCode && 2110 !== data.resultCode ) {
						errorMsgShow( data.resultMessage );
					}
					// return callback
					if( $.isFunction(returnCallback) ) {
						returnCallback( data );
					}
				},
				error:function(jqXHR, textStatus, errorThrown){
					//console.log("e");
				}
			});
		} else if(service !== "getRealTimeProductSimpleInfo" && !isConsumer && hybrisApiJson === "Y"){
			$.ajax({
				url: url,
				type: 'GET',
				dataType : 'json',
				xhrFields: { withCredentials: true },
				contentType : "application/x-www-form-urlencoded",
				crossDomain : true,
				success: function (data) {
					// 쿠키/세션간 사용자 정보가 일치하지 않을 경우
					if( '2100' === data.resultCode || 2100 === data.resultCode ) {
						//store 세션없음. 로그아웃처리
						if( param && param.hasOwnProperty('returnUrl') && '' !== param.returnUrl ) {
							$.Auth.signOut( param.returnUrl );
						} else {
							$.Auth.signOut();
						}
						// cn 사이트일 경우 코드값이 2000 ~ 3000번 일때만 경고창 노출
					} else if(SITE_CD === "cn" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if(SITE_CD === "sec" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								'2002' !== data.resultCode && 2002 !== data.resultCode && // 판매불가상품 2015.04.17
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
									//에러 메시지의 내용 변화 (정확하게 아래의 문구가 맞아 떨어질 때 메시지 조작) dong_won.lee
									if (data.resultMessage.indexOf('구매 한도를 초과하여 구매가 불가능합니다.<br />')!==-1) {
										data.resultMessage =  '구매 한도' + data.resultMessage.split('구매 한도')[1].replace('<br />','\n');
									}
						errorMsgShow( data.resultMessage );
					} else if( SITE_CD !== "cn" && SITE_CD !== "sec" && 
							'0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
															9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
							// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
							'2110' !== data.resultCode && 2110 !== data.resultCode ) {
						errorMsgShow( data.resultMessage );
					}
					// return callback
					if( $.isFunction(returnCallback) ) {
						returnCallback( data );
					}
				},
				error:function(jqXHR, textStatus, errorThrown){
					//errorMsgShow( ESTORE_FAULT_MSG ); // e-store 작업 관련 
					//returnCallback();
					if (SITE_CD === 'au' || SITE_CD === 'nz' || SITE_CD === 'sec') { // 금주 DB 작업 영향 국가만 
						if (window.location.pathname === '/' + SITE_CD + '/wishlist') {      // wishlist 페이지에서 에러처리 
							//errorMsgShow( ESTORE_FAULT_MSG ); // e-store 작업 관련 
							returnCallback();
						}
					}
					//console.log("e");
				}
			});
		} else {
			$.ajax({
				url: url,
				type: 'GET',
				dataType : 'jsonp',
				jsonp : 'callback',
				success: function (data) {
					// 쿠키/세션간 사용자 정보가 일치하지 않을 경우
					if( '2100' === data.resultCode ) {
						//store 세션없음. 로그아웃처리
						if( param && param.hasOwnProperty('returnUrl') && '' !== param.returnUrl ) {
							$.Auth.signOut( param.returnUrl );
						} else {
							$.Auth.signOut();
						}
						// cn 사이트일 경우 코드값이 2000 ~ 3000번 일때만 경고창 노출
					} else if(SITE_CD === "cn" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
						errorMsgShow( data.resultMessage );
					} else if(SITE_CD === "sec" && 
							 '0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
							 								9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
								// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
								'2110' !== data.resultCode && 2110 !== data.resultCode &&
								'2002' !== data.resultCode && 2002 !== data.resultCode && // 판매불가상품 2015.04.17
								(data.resultCode.length === 4 && ('2' === data.resultCode.charAt(0) || '3' === data.resultCode.charAt(0)))){
									//에러 메시지의 내용 변화 (정확하게 아래의 문구가 맞아 떨어질 때 메시지 조작) dong_won.lee
									if (data.resultMessage.indexOf('구매 한도를 초과하여 구매가 불가능합니다.<br />')!==-1) {
										data.resultMessage =  '구매 한도' + data.resultMessage.split('구매 한도')[1].replace('<br />','\n');
									}
						errorMsgShow( data.resultMessage );
					} else if( SITE_CD !== "cn" && SITE_CD !== "sec" && 
							'0000' !== data.resultCode && '9000' !== data.resultCode && '9001' !== data.resultCode && '9002' !== data.resultCode &&
															9000 !== data.resultCode && 9001 !== data.resultCode && 9002 !== data.resultCode &&
							// 2014.05.08. 로그인 중일 때 호출하게 되면 '2110' 반환
							'2110' !== data.resultCode && 2110 !== data.resultCode ) {
						errorMsgShow( data.resultMessage );
					}
					// return callback
					if( $.isFunction(returnCallback) ) {
						returnCallback( data );
					}
				},
				error:function(jqXHR, textStatus, errorThrown){
					//errorMsgShow( ESTORE_FAULT_MSG ); // e-store 작업 관련 
					//returnCallback();
					if (SITE_CD === 'au' || SITE_CD === 'nz' || SITE_CD === 'sec') { // 금주 DB 작업 영향 국가만 
						if (window.location.pathname === '/' + SITE_CD + '/wishlist') {      // wishlist 페이지에서 에러처리 
							//errorMsgShow( ESTORE_FAULT_MSG ); // e-store 작업 관련 
							returnCallback();
						}
					}
					//console.log("e");
				}
			});
		}
	};

	/*************************
	 * public network service
	 *************************/
	var estoreConstructor = function(){};

	/**
	 * buyNow(isBuyNowCartActive) 쿠키 생성
	 * @param callback function
	 */
	estoreConstructor.prototype.makeBuyNowCookie = function( returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'makeBuyNowCookie', null, returnCallback);
	};

	/**
	 * 장바구니 상품 추가
	 * @param
	 * {
	 * 		productCode : 상품코드 [필수],
	 * 		quantity : 수량,
	 * 		returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addCart = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'addCart', param, returnCallback);
	};

	/**
	 * Cart 건수 조회
	 * @param callback function
	 */
	estoreConstructor.prototype.getCartCount = function( returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getCartCount', null, returnCallback);
	};

	/**
	 * 실시간 상품 정보 조회(가격, 재고, 주문 Min/Max 수량, Promotion 여부)
	 * @param
	 * {
	 * 		 productCode : 상품코드 [필수],
	 * 		 guid : 글로벌유저아이디
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getRealTimeProductSimpleInfo = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getRealTimeProductSimpleInfo', param, returnCallback);
	};

	/**
	 * 리스트용 실시간 상품 정보 조회
	 * @param
	 * {
	 * 		 guid : 글로벌유저아이디,
	 * 		 productCode (Array<string>) : 상품 모델코드 배열
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getRealTimeProductListInfo = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getRealTimeProductListInfo', param, returnCallback);
	};

	/**
	 * 위시리스트 추가
	 * @param
	 * {
	 * 		 productCode : 상품코드
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addWishListItem = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'addWishListItem', param, returnCallback);
	};

	/**
	 * 위시리스트 추가(queue에 담을 필요 없는 경우-로그인 직후 cookie에 있는 wishlist 저장 시)
	 * @param
	 * {
	 * 		 productCode : 상품코드
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addWishListItemForce = function( param, returnCallback ) {
		send('addWishListItem', param, returnCallback);
	};

	/**
	 * 위시리스트 삭제
	 * @param
	 * {
	 * 		productCode : 상품코드,
	 * 		returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.delWishListItem = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'delWishListItem', param, returnCallback);
	};

	/**
	 * 위시리스트 가져오기
	 * @param
	 * {
	 * 		 page (int) : 페이지번호[default:0],
	 * 		 pageSize (int) : 페이지사이즈[default:5],
	 * 		 returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getWishList = function( param, returnCallback ) {
		// defaultParam setting
		var defaultParam = {
			page : 1,
			pageSize : 5
		};
		if( param && !$.isFunction(param) ) defaultParam = $.extend( defaultParam, param );
		$.EstoreIfQueue.setQueue(send, 'getWishList', defaultParam, returnCallback);
	};

	/**
	 * Store Login
	 * @param callback function
	 */
	estoreConstructor.prototype.login = function( returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'login', null, returnCallback);
	};

	/**
	 * Store Logout
	 * @param
	 * {
	 * 		 returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.logout = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'logout', param, returnCallback);
	};

	/**
	 * 위시리스트용 실시간 상품 정보 조회
	 * @param
	 * {
	 * 		 guid : 글로벌유저아이디,
	 * 		 productCode (Array<string>) : 상품 모델코드 배열,
	 * 		 returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getRealTimeWishProductListInfo = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getRealTimeWishProductListInfo', param, returnCallback);
	};

	/**
	 * 비회원 주문정보 존재여부 조회
	 * @param
	 * {
	 * 		 orderCode : 주문코드 [필수],
	 * 		 email : 주문자이메일 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getGuestOrderExistYn = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getGuestOrderExistYn', param, returnCallback);
	};

	/**
	 * SNS Login 사용자 정보 조회
	 * @param
	 * {
	 * 		 snsSessionId : SNS Session ID [필수],
	 * 		 returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getSnsUserInfo = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getSnsUserInfo', param, returnCallback);
	};

	/**
	 * Store 개인정보보호정책 동의
	 * @param
	 * {
	 * 		 receiveEmail : 메일수신여부 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.setAgreeStorePolicy = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'setAgreeStorePolicy', param, returnCallback);
	};

	/**
	 * Store Session 체크
	 * @param
	 * {
	 * 		 returnUrl : 세션 종료시 redirect URL
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getSessionCheck = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getSessionCheck', param, returnCallback);
	};

	/**
	 * Estore Category목록 가져오기
	 * @param callback function
	 */
	estoreConstructor.prototype.getEstoreCategoryList = function( returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getEstoreCategoryList', null, returnCallback);
	};

	/**
	 * 스토어 사용자 정보
	 * @param
	 * {
	 * 		storeSessionId : SNS Session ID [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getCurrentUserInfo = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getCurrentUserInfo', param, returnCallback);
	};

	/**
	 * 장바구니 상품 추가
	 * @param
	 * {
	 * 		productCode : 상품코드 [필수],
	 * 		quantity : 수량
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.buyNow = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'buyNow', param, returnCallback);
	};

	/**
	 * 리뷰 조회
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		pageNum : List 시작 페이지 [필수],
	 * 		rowNum : List 개수 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		sort : 정렬타입 [옵션],
	 * 		userListYn : Y일 경우 사용자가 입력한 Review를 같이 보여줌 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getReviews = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getReviewList', param, returnCallback);
	};

	/**
	 * 나의 리뷰 조회
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품 코드 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getMyReview = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getMyReview', param, returnCallback);
	};

	/**
	 * 나의 리뷰 등록
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		rating : Review 평가 [필수],
	 * 		headline : Review 제목 [필수],
	 * 		comment : Review 내용 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addReview = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'addReview', param, returnCallback);
	};

	/**
	 * 나의 리뷰 수정
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		reviewId : Review ID [필수],
	 * 		headline : Review 제목 [필수],
	 * 		comment : Review 내용 [필수],
	 * 		rating : Review 평가 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.updateReview = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'updateReview', param, returnCallback);
	};

	/**
	 * 나의 리뷰 삭제
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		reviewId : Review ID [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.deleteReview = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'deleteReview', param, returnCallback);
	};

	/**
	 * 리뷰 추천
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		reviewId : Review ID [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addReviewHelpful = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'setReviewHelpful', param, returnCallback);
	};

	/**
	 * 리뷰 추천 등록
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		reviewId : Review ID [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addReviewHelpful = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'setReviewHelpful', param, returnCallback);
	};

	/**
	 * 리뷰 비추천 등록
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		reviewId : Review ID [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addReviewUnHelpful = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'setReviewUnHelpful', param, returnCallback);
	};

	/**
	 * 전문가 리뷰 조회
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		page : 페이지 번호 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addReviewAbuse = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'setReviewAbuse', param, returnCallback);
	};

	/**
	 * 리뷰신고
	 * @param
	 * {
	 * 		siteCode : 국가코드 [필수],
	 * 		productCode : 상품코드 [필수],
	 * 		review ID : Review ID [필수],
	 * 		issueDescription : Abuse comment [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getExpertReviewList = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getExpertReviewList', param, returnCallback);
	};

	/**
	 * 대물상품 중국의 성 조회( 성 코드, 성 이름 )
	 * @param
	 * {
	 * 
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getProductDetailRegion = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getProductDetailRegion', param, returnCallback);
	};

	/**
	 * 대물상품 중국의 시 조회( 시 코드, 시 이름 )
	 * @param
	 * {
	 * 		 region : 지역코드 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getProductDetailCity = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getProductDetailCity', param, returnCallback);
	};

	/**
	 * 개통폰 예상금액 조회
	 * @param
	 * {
	 *       productCode   : 상품 코드 [옵션]
	 *       makerx           : 통신사 사업자 코드 [옵션]
	 *       charge             : 요금제 [옵션]
	 *       contract          : 약정기간 [옵션]
	 *       jointype           : 가입유형 [옵션]
	 *       monthly          : 단말기할부기간 [옵션]
	 *       subside            : 추가할인 [옵션]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.showProductOpenphoneOption = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'showProductOpenphoneOption', param, returnCallback);
	};

	/**
	 * 미리계산기 금액 조회
	 * @param
	 * {
	 *  productCodePost  : 상품코드 [필수]
	 *  quantity                : 수량 [옵션]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.preCalc = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'preCalc', param, returnCallback);
	};

	/**
	 * 미리계산기 재계산 금액 조회
	 * @param
	 * {
	 *  cartCode 					 : 주문 번호	[필수]
	 *  qty            				     : 수량 [필수]
	 *  voucherCode              : 바우처, 이벤트 코드 [필수]
	 *  releaseYn             		 : 쿠폰 철회 여부 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.preCalcApply = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'preCalcApply', param, returnCallback);
	};

	/**
	 * 매장픽업 상품 조회
	 * @param
	 * {
	 *  searchall 					 : 전체 검색 여부	 [옵션]
	 *  addr            				 : 주소 [옵션]
	 *  page                            : 페이지 번호 [옵션]
	 *  productCode              	: 상품 코드 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.stores = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'stores', param, returnCallback);
	};

	/**
	 * 상품평 사용자 정보 조회
	 * @param
	 * {
	 *  productCode              	: 상품 코드 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.getReviewStatus = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'getReviewStatus', param, returnCallback);
	};

	/**
	 * 상품의 experience 정보 조회수 증가
	 * @param
	 * {
	 *  id              			: Exeperience 아이디 [필수]
	 *  baseModelCode              	: 상품 베이스 모델 코드 [필수]
	 * }
	 * @param callback function
	 */
	estoreConstructor.prototype.addViewCount = function( param, returnCallback ) {
		$.EstoreIfQueue.setQueue(send, 'addViewCount', param, returnCallback);
	};

	return new estoreConstructor();

})();

(() => {
  const $q = window.sg.common.$q;
  const utils = window.sg.common.utils;
  const KEY_CODE = window.sg.common.constants.KEY_CODE;
  const lazyLoad = window.sg.common.lazyLoad;

  // aem 에서 세팅하는 값에 대한 테스트용 코드로 실 적용시 아래 코드 제거 필요
  // const siteCode = '';

  const selector = {
    section: '.gnb',
  };

  const el = {
    window: null,
    component: null,
  };

  class Gnb {
    constructor(component) {
      this.selector = {
        gnbMenuWrap: '.gnb__menu-wrap',
        depth1: '.gnb__depth1',
        depth1Menu: '.gnb__depth1-menu',
        depth1Link: '.gnb__depth1-link',
        depth2: '.gnb__depth2',
        depth2Wrap: '.gnb__depth2-wrap',
        depth2Inner: '.gnb__depth2-inner',
        depth2Menu: '.gnb__depth2-menu',
        depth2Link: '.gnb__depth2-link',
        depth2Close: '.gnb__depth2-close',
        depth3Wrap: '.gnb__depth3-wrap',
        depth3Inner: '.gnb__depth3-inner',
        depth3Menu: '.gnb__depth3-menu',
        depth3Link: '.gnb__depth3-link',
        featureContainer: '.gnb__feature-container',
        loginBtn: '.gnb__logout-btn, .gnb__login-btn',
        loginLayer: '.gnb__login-layer',
        cartBtn: '.gnb__cart-btn',
        layerOpenBtn: '.js-layer-open',
        layerCloseBtn: '.layer-popup__close, .gnb-js-layer-close',
        layerWrap: '.layer-popup',
        layerDim: '.layer-popup-dim',
        hasDepthMenu: 'has-depth-menu',
        gnbDim: '.gnb__dimmed',
        countryBtn: '.gnb__country-cta',
        countryLayer: '.gnb__country-layer',
        countrySelect: '.gnb__country-select',
        searchBtn: '.gnb__search-btn',
        desktopUtilLink: '.gnb__login-layer .gnb__utility-link',
        gnbNavi: '.gnb__nav',
      };

      this.mobileSelector = {
        gnbContainer: '.gnb__depth1-container',
        gnbMenuBtn: '.gnb__menu-btn',
        gnbMenuClose: '.gnb__menu-close',
        gnbDepthBack: '.gnb__depth-back',
        utilLink: '.gnb__utility-mobile .gnb__utility-link',
      };

      this.el = {
        body: null,
        window: null,
        component: $q(component),
      };

      this.mobileEl = {
        gnbMenuBtn: null,
      };

      this.handler = {
        resize: this.resize.bind(this),
        desktopEsc: this.desktopEsc.bind(this),
      };

      this.stateRtl = $q('body').css('direction') === 'rtl';
      this.isB2B = document.getElementById('b2bFlag') !== null && document.getElementById('b2bFlag').value === 'Y' ? true : false;

      Gnb.instances.set(component, this);

      this.setElement();

      this.init();
    }

    setElement() {
      this.el.body = $q('body');
      this.el.window = $q(window);
      this.el.depth1 = this.el.component.find(this.selector.depth1);
      this.el.gnbMenuWrap = this.el.component.find(this.selector.gnbMenuWrap);
      this.el.depth1Menu = this.el.component.find(this.selector.depth1Menu);
      this.el.depth1Link = this.el.component.find(this.selector.depth1Link);
      this.el.depth2Wrap = this.el.component.find(this.selector.depth2Wrap);
      this.el.depth2Inner = this.el.component.find(this.selector.depth2Inner);
      this.el.depth2Menu = this.el.component.find(this.selector.depth2Menu);
      this.el.depth2Link = this.el.component.find(this.selector.depth2Link);
      this.el.depth2Close = this.el.component.find(this.selector.depth2Close);
      this.el.depth3Wrap = this.el.component.find(this.selector.depth3Wrap);
      this.el.loginBtn = this.el.component.find(this.selector.loginBtn);
      this.el.loginLayer = this.el.component.find(this.selector.loginLayer);
      this.el.cartBtn = this.el.component.find(this.selector.cartBtn);
      this.el.layerOpenBtn = this.el.component.find(this.selector.layerOpenBtn);
      this.el.layerCloseBtn = this.el.component.find(this.selector.layerCloseBtn);
      this.el.layerDim = this.el.component.find(this.selector.layerDim);
      this.el.gnbDim = this.el.component.find(this.selector.gnbDim);
      this.el.depth1First = this.el.depth1Menu.eq(0).find(this.selector.depth1Link);
      this.el.featureContainer = this.el.component.find(this.selector.featureContainer);
      this.el.countryBtn = this.el.component.find(this.selector.countryBtn);
      this.el.countryLayer = this.el.component.find(this.selector.countryLayer);
      this.el.countrySelect = this.el.countryLayer.find(this.selector.countrySelect);
      this.el.searchBtn = this.el.countryLayer.find(this.selector.searchBtn);
      this.el.desktopUtilLink = this.el.component.find(this.selector.desktopUtilLink);
      this.el.gnbNavi = this.el.component.find(this.selector.gnbNavi);

      this.mobileEl.gnbContainer = this.el.component.find(this.mobileSelector.gnbContainer);
      this.mobileEl.gnbMenuBtn = this.el.component.find(this.mobileSelector.gnbMenuBtn);
      this.mobileEl.gnbMenuClose = this.el.component.find(this.mobileSelector.gnbMenuClose);
      this.mobileEl.gnbDepthBack = this.el.component.find(this.mobileSelector.gnbDepthBack);
      this.mobileEl.utilLink = this.el.component.find(this.mobileSelector.utilLink);

      this.breakpoint = 1279;
      this.viewPortSize = 1440;

      this.depth2Flag = false; // whether gnb is open and closed
      this.desktopFlag = false;
      this.mobileFlag = false;
      this.dimShowFlag = null;
      this.dimHideFlag = null;
      this.loginFlag = null;
      this.dimEventFlag = false;
      this.animateTime = null;
      this.subOpenFlag = false;
      this.countryFlag = null;

      this.el.component.find('[data-live-time]').target.forEach((el) => {
        let isLive = false;
        
        JSON.parse(el.dataset.liveTime).some((dates) => {
          const timeStatus = utils.getTimeStatus(dates.start,dates.end);
          if (timeStatus === 'live') {
            isLive = true;
            return true;
          } else {
            return false;
          }
        });

        if (isLive) {
          el.classList.add('badge-live');
        } else {
          el.classList.remove('badge-live');
        }
      });
    }

    init() {
      this.bindEvents();
    }

    reInit() {
      this.setElement();

      this.bindEvents();
    }

    resize() {
      if (this.breakpoint < utils.getViewPort().width) {
        if (this.desktopFlag === false) {
          this.desktopFlag = true;
          this.mobileFlag = false;

          this.el.gnbMenuWrap.css({
            'transition': 'none',
          });

          this.deactiveMobileGnb();

          this.resetGnb();

          this.unbindEvents();

          this.bindEvents();

          setTimeout(() => {
            this.el.gnbMenuWrap.css({
              'transition': '',
            });
          }, 50);
        }
      } else {
        if (this.mobileFlag === false) {
          this.desktopFlag = false;
          this.mobileFlag = true;

          this.el.gnbMenuWrap.css({
            'transition': 'none',
          });

          this.deactiveGnb();

          this.deactiveSnb();

          this.resetGnb();

          this.unbindEvents();

          this.bindEvents();

          setTimeout(() => {
            this.el.gnbMenuWrap.css({
              'transition': '',
            });
          }, 50);
        }
      }
    }

    // desktop handler
    toggleGnb(activeItem) {
      if (!activeItem.parent().hasClass('active')) {
        this.deactiveGnb(activeItem);

        if (activeItem.closest('.gnb__depth1-menu').hasClass('has-depth-menu')) {
          this.activeGnb(activeItem);
        }
      }
    }

    deactiveGnb(activeItem) {
      const isActiveParent = activeItem !== undefined ? !activeItem.parent().hasClass(this.selector.hasDepthMenu) : false;
      this.subOpenFlag = false;

      if (this.dimShowFlag !== null) {
        clearTimeout(this.dimShowFlag);

        this.dimShowFlag = null;
      }

      if (this.animateTime !== null) {
        clearTimeout(this.animateTime);

        this.animateTime = null;
      }

      this.el.depth1Link.target.forEach((item) => {
        const $item = $q(item).parent();
        const $itemInner = $item.find(this.selector.depth2Inner);
        const $itemInnerList = $itemInner.find(this.selector.depth2);
        const $itemClose = $item.find(this.selector.depth2Close);

        const removeInnerCls = () => {
          $itemInner.removeAttr('style');
          $itemInner.removeClass('active');

          $item.find(this.selector.depth2Wrap).css({
            'visibility': 'hidden',
          });

          $item.find(this.selector.depth2Menu).removeClass('active');

          if ($itemClose.css('visibility') === 'visible') {
            $itemClose.css({
              'visibility': 'hidden',
            });
          }
        };

        const removeCls = () => {
          $item.removeClass('active');
        };

        const fadeClose = () => {
          $itemClose.finish().animate({
            'opacity': 0,
          }, 400, 'cubic-bezier(.4,0,.2,1)', () => {
            $itemClose.css({
              'visibility': 'hidden',
            });
          });
        };

        if ($item.hasClass('active')) {
          $itemInnerList.removeClass('active');
          $item.find(this.selector.depth1Link).removeClass('active');
          this.el.gnbMenuWrap.removeClass('active');

          this.el.depth1Link.attr('aria-expanded', false);

          if (isActiveParent) {
            this.setHeight($itemInner, 0, 'animate', removeInnerCls);

            fadeClose();

            removeCls();

            if (this.el.gnbDim.hasClass('open')) {
              this.el.gnbDim.removeClass('open');

              //reader focus loop : remove
              this.el.component.find(`${this.selector.depth2Inner}[aria-hidden="false"]`).attr('aria-hidden','true');
              window.sg.common.utils.removeMobileFocusLoop();

              this.dimHideFlag = setTimeout(() => {
                this.el.gnbDim.hide();
              }, 600);
            } else if (!this.el.gnbDim.hasClass('open') && this.el.gnbDim.css('display') === 'block') {
              this.el.gnbDim.hide();
              removeInnerCls();
            }

            this.depth2Flag = false;
          } else {
            removeInnerCls();

            fadeClose();

            removeCls();

            setTimeout(() => {
              this.setHeight($itemInner, 0, 'css');
            },30);
          }
        }
      });

      $q(`${this.selector.depth2Link} > svg.icon--next`).css({
        'transition-delay': '.2s, .2s',
      });

      this.dimEventFlag = false;
    }

    activeGnb(activeItem) {
      if (this.dimHideFlag !== null) {
        clearTimeout(this.dimHideFlag);

        this.dimHideFlag = null;
      }

      const $item = activeItem.parent();
      const $itemInner = $item.find(this.selector.depth2Inner);
      const $itemInnerList = $itemInner.find(this.selector.depth2);
      let $firstActiveSnb = null;

      if (this.openFlag === false) {
        $q('.gnb__depth2-link > svg.icon').css({
          'transition-delay': '.2s, .2s',
        });
      }

      if ($item.find(this.selector.depth2Menu).target.length > 0 && $item.find(`${this.selector.depth2Menu}:not(.gnb-api--mobile-only)`).target.length < 1) {
        $firstActiveSnb = $item.find(this.selector.depth2Menu).eq(0).find(this.selector.depth2Link);
      } else {
        $firstActiveSnb = $item.find(`${this.selector.depth2Menu}:not(.gnb-api--mobile-only)`).eq(0).find(this.selector.depth2Link);
      }

      this.activeSnb($firstActiveSnb);

      this.el.depth2Close.target.forEach((close) => {
        const $close = $q(close);

        if ($close.css('opacity') === '0' && $close.css('visibility') === 'visible') {
          $close.css({
            'visibility': 'hidden',
          });
        }
      });

      activeItem.addClass('active');
      $item.addClass('active');
      $itemInner.addClass('active');
      $itemInnerList.addClass('active');

      $item.find(this.selector.depth2Close).finish().css({
        'visibility': 'visible',
      });

      $item.find(this.selector.depth2Close).animate({
        'opacity': 1,
      }, 400, 'cubic-bezier(.4,0,.2,1)');

      this.el.gnbMenuWrap.addClass('active');
      activeItem.attr('aria-expanded', true);

      $item.find(this.selector.depth2Wrap).css({
        'visibility': 'visible',
      });

      $q(`${this.selector.depth2Link} > svg.icon--next`).css({
        'transition-delay': '',
      });

      lazyLoad.setLazyLoadManually($item.target[0]);

      if (!this.el.gnbDim.hasClass('open')) {
        //reader focus loop : set
        if ($q('[data-aria-hidden]').target.length <= 0 ) {
          window.sg.common.utils.setMobileFocusLoop(this.el.component.target[0]);
        }

        this.el.gnbDim.show();

        this.dimShowFlag = setTimeout(() => {
          this.el.gnbDim.addClass('open');
        }, 50);
      }

      this.depth2Flag = true;
    }

    deactiveSnb() {
      this.el.depth2Link.target.forEach((item) => {
        const $item = $q(item).parent();

        if ($item.hasClass('active')) {
          $item.removeClass('active');

          if($item.hasClass('has-depth-menu')){
            this.el.depth2Link.attr('aria-expanded', false);
          }
        }
        if(siteCode === 'us' && !this.isB2B) {
          $item.closest(this.selector.depth2Wrap).addClass('one-col');
          $item.closest(this.selector.depth2Wrap).removeClass('all');
          $q('.gnb__feature-container').removeClass('active');
          $q('.gnb__feature-container').target.forEach((el) => {
            el.innerHTML = '';
          });
        }
      });
    }

    activeSnb(activeItem) {
      let innerHeight = 672;
      const $item = activeItem.parent();
      const $itemInner = $item.closest(this.selector.depth2Inner);
      const $itemLink = $item.find(this.selector.depth2Link);
      const $itemInnerList = $item.find(this.selector.depth3Wrap);
      const $depth2Menu = activeItem.closest(this.selector.depth2Inner).find(this.selector.depth2Menu);

      this.deactiveSnb();

      if (!$item.hasClass('active')) {
        $item.addClass('active');
        
        //reader focus loop : set
        this.el.component.find(`${this.selector.depth2Inner}[aria-hidden="false"]`).attr('aria-hidden','true');
        $itemInner.attr('aria-hidden','false');

        //this.el.depth2Link.attr('aria-expanded', true);
        if($item.hasClass('has-depth-menu')){
          $itemLink.attr('aria-expanded', true);
        }

        siteCode === 'us' && !this.isB2B && $item.closest(this.selector.depth2Wrap).removeClass('one-col');
        siteCode === 'us' && !this.isB2B && $item.closest(this.selector.depth2Wrap).addClass('all');

        const addHeight = activeItem.closest(this.selector.depth2Inner).find('.gnb__depth2-title-wrap').outerHeight() + 24;
        const depth2Height = $depth2Menu.parent().outerHeight() + addHeight;
        const depth3Height = $itemInnerList.target.length ? ($itemInnerList.outerHeight() + 6) + addHeight : 0;

        if (depth2Height > depth3Height) {
          innerHeight = depth2Height > innerHeight ? depth2Height : innerHeight;
        } else {
          innerHeight = depth3Height > innerHeight ? depth3Height : innerHeight;
        }

        if (this.depth2Flag === false || this.subOpenFlag === true) {
          this.setHeight($itemInner, innerHeight, 'animate');

          this.animateTime = setTimeout(() => {
            this.dimEventFlag = true;
          }, 500);
        } else {
          this.setHeight($itemInner, innerHeight, 'css');
          this.dimEventFlag = true;
        }

        if(siteCode === 'us' && !this.isB2B) {
          this.activeDepth2Img(activeItem);
        }
      }
    }
    
    activeDepth2Img($item, isMobile) {
      !isMobile && $item.closest(this.selector.depth2Inner).find('.gnb__feature-container').addClass('active');
      const subTitle = $item.closest(this.selector.depth2Inner).find('.gnb__depth2-title-text').target[0].textContent || '';
      const element = document.createElement('div');
      element.setAttribute('class', 'hybrid-class');
      const taggingStringModify = (string) => {
        let result = string || '';
        // eslint-disable-next-line
        result = result.replace(/\+/gi, 'plus').replace(/\&/gi, 'and').replace(/\$/gi, 'dollar').replace(/\%/gi, 'percentage').replace(/\"/gi, 'inches');
        // eslint-disable-next-line
        result = result.replace(/\||\-|\~|\,|\.|\!|\?|\@|\=|\#|\*|\'/gi, '');
        return result.toLowerCase();
      };
      element.innerHTML = $item.attr('data-flyout-img') ? `
      <div class="glide">
        <div class="glide__track" data-glide-el="track">
          <ul class="glide__slides">
            <li class="glide__slide">
              <a class="gnb__feature-container-link" href="${$item.attr('data-flyout-url')}" an-tr="nv00_gnb--cta-feature" an-ca="navigation" an-ac="gnb" an-la="feature image:${taggingStringModify(subTitle)}: ${taggingStringModify($item.target[0].text)}:${taggingStringModify($item.attr('data-flyout-text'))}" data-link_cat="navigation" data-link_id="${$item.target[0].text}" data-link_meta="link_name:${$item.target[0].text}" data-link_position="navigation>gnb>${subTitle}>${$item.target[0].text}" data-event_name="select_${$item.target[0].text}_click">
            <div class="image">
              <img class="image__main image--loaded" src="${$item.attr('data-flyout-img')}"/>
            </div>
            <div class="gnb__feature-container-contents">
              <p class="gnb__feature-container-description ${$item.attr('data-flyout-theme')}">${$item.attr('data-flyout-text')}</p>
              <span class="cta cta--contained hidden cta--black">${$item.target[0].text}</span>
            </div>
          </a>
            </li>
          </ul>
        </div>
      </div>` : '';
      if(isMobile) {
        const imgContainer = document.querySelector('.gnb__depth2-menu.has-depth-menu.open .gnb__depth3 .hybrid-class');
        if(!imgContainer) {
          document.querySelector('.gnb__depth2-menu.has-depth-menu.open .gnb__depth3').appendChild(element);
        }
      } else {
        if(document.querySelector('.gnb__feature-container.active')) {
          document.querySelector('.gnb__feature-container.active').innerHTML = '';
          document.querySelector('.gnb__feature-container.active').appendChild(element);
        }
      }

      lazyLoad.setLazyLoad();
      // const sliders = document.querySelectorAll('.glide')
      // sliders.forEach(item => {
      //   new Glide(item, {autoplay: 3000}).mount();
      // })
    }

    setHeight(itemInner, innerHeight, type, callback) {
      let setInnerHeight = 0;

      if (innerHeight !== 0) {
        setInnerHeight = `${innerHeight}px`;
      }

      if (type === 'css') {
        itemInner.css({
          'transition': 'none',
          'height': setInnerHeight,
        });
      } else {
        itemInner.css({
          'transition': '',
        });

        itemInner.stop().animate({
          'height': setInnerHeight,
        }, 500, 'Cubic-bezier (0.4, 0, 0.2, 1)', callback);
      }
    }

    deactiveLoginMenu() {
      this.el.loginLayer.removeClass('active');

      this.el.loginBtn.attr('aria-expanded', false);
      this.loginFlag = null;
    }

    activeLoginMenu() {
      lazyLoad.setLazyLoadManually(this.el.component.find('.gnb__user-image').target[0]);

      this.el.loginLayer.addClass('active');
      this.el.loginBtn.attr('aria-expanded', true);
    }

    deactiveCountry() {
      this.el.countryBtn.removeClass('active');
      this.el.countryLayer.removeClass('active');
      this.el.countryBtn.attr('aria-expanded', false);

      this.countryFlag = null;
    }

    activeCountry() {
      lazyLoad.setLazyLoadManually(this.el.countryLayer.target[0]);

      this.el.countryBtn.addClass('active');
      this.el.countryLayer.addClass('active');
      this.el.countryBtn.attr('aria-expanded', true);
    }

    // mobile handler
    moveActiveMenu() {
      const activeMenu = [];

      this.el.depth1Menu.target.forEach((firstItem) => {
        const $firstItem = $q(firstItem);

        if ($firstItem.hasClass('active-first')) {
          activeMenu.push($firstItem.find(this.selector.depth1Link));

          $firstItem.find(this.selector.depth2Menu).target.forEach((secondItem) => {
            const $secondItem = $q(secondItem);

            if ($secondItem.hasClass('active-second')) {
              activeMenu.push($secondItem.find(this.selector.depth2Link));
            }
          });
        }
      });

      if (activeMenu.length > 0) {
        this.activeMobileFirstMenu(activeMenu[0], activeMenu[1]);
      }
    }

    activeMobileGnb() {
      // S : IE bug
      this.el.component.css({
        'position': 'fixed',
        'width': '100%',
      });

      $q('#content').css({
        'padding-top': '56px',
      });
      // E : IE bug

      this.el.gnbMenuWrap.addClass('open');
      this.el.depth1.addClass('open');
      this.mobileEl.gnbDepthBack.attr('tabindex', '-1');
      this.mobileEl.gnbMenuBtn.attr('aria-expanded', true);

      if (this.el.component.hasClass('js-mobile-open')) {
        this.moveActiveMenu();
      }

      //reader focus loop : set
      window.sg.common.utils.setMobileFocusLoop(this.el.gnbMenuWrap.target[0]);

      utils.hiddenScroll();
    }

    deactiveMobileGnb(closeFlag) {
      this.mobileEl.gnbContainer.removeClass('slide');
      this.el.gnbMenuWrap.removeClass('open');
      this.el.depth1.removeClass('open');
      this.mobileEl.gnbMenuBtn.attr('aria-expanded', false);

      // S : IE bug
      this.el.component.css({
        'position': '',
        'width': '',
      });

      $q('#content').css({
        'padding-top': '',
      });
      // E : IE bug

      this.el.depth1Menu.target.forEach((menu, idx) => {
        const $menu = $q(menu);

        if ($menu.hasClass('open')) {
          this.activeFirst = idx;

          $menu.removeClass('open');
          $menu.find(this.selector.depth2Wrap).hide();
          $menu.find(this.selector.depth2Wrap).removeClass('open');

          $menu.find(this.selector.depth2Menu).target.forEach((a, index) => {
            const $a = $q(a);

            if ($a.hasClass('open')) {
              this.activeSecond = index;

              $a.removeClass('open');
            }
          });
        }
      });

      this.el.depth1Link.removeAttr('tabindex');
      this.mobileEl.utilLink.removeAttr('tabindex');

      utils.visibleScroll();

      if (closeFlag) {
        this.mobileEl.gnbMenuBtn.focus();
      }
      
      //reader focus loop : remove
      window.sg.common.utils.removeMobileFocusLoop();
    }

    activeMobileFirstMenu(item, callback) {
      const $item = item.parent();

      this.mobileEl.gnbDepthBack.removeAttr('tabindex');

      if ($item.hasClass(this.selector.hasDepthMenu)) {
        $item.addClass('open');
        this.mobileEl.gnbContainer.addClass('slide');

        $item.find(this.selector.depth2Wrap).css({
          'display': 'block',
        });

        this.el.depth2Menu.target.forEach((menu) => {
          const $menu = $q(menu);

          if ($menu.hasClass(this.selector.hasDepthMenu)) {
            let activeHeight = $menu.find(this.selector.depth3Inner).height();
            if(siteCode === 'us' && !this.isB2B && $menu.find('.hybrid-class .gnb__feature-container-link').target.length === 0) {
              activeHeight += 400;
            }
            $menu.find(this.selector.depth3Inner).attr('data-height', activeHeight);

            if (!$menu.hasClass('open')) {
              $menu.find(this.selector.depth3Wrap).css({
                'height': '0',
              });
            }
          }
        });

        $item.find(this.selector.depth2Wrap).addClass('open');

        this.el.depth1Link.attr('tabindex', '-1');
        this.mobileEl.utilLink.attr('tabindex', '-1');
        this.el.depth1Link.attr('aria-expanded', true);

        $item.find(this.selector.depth2Inner).scrollTop(0);

        //reader focus loop : set
        window.sg.common.utils.removeMobileFocusLoop();
        window.sg.common.utils.setMobileFocusLoop($item.find(this.selector.depth2Wrap).target[0]);
      }

      if (callback !== undefined) {
        setTimeout(() => {
          this.activeMobileSecondMenu(callback);
        }, 600);
      }

      lazyLoad.setLazyLoadManually($item.target[0]);
    }

    activeMobileSecondMenu(item) {
      const $activeItem = item.parent();
      const $dropdownCta = $activeItem.find('.icon--dropdown');
      const $itemLink = $activeItem.find(this.selector.depth2Link);

      if ($dropdownCta.target.length > 0) {
        const scrollPos = $activeItem.index() * 56;

        if (!$activeItem.hasClass('open')) {
          let $closeDepth = null;

          this.el.depth2Menu.target.forEach((element) => {
            const $element = $q(element);

            if ($element.hasClass('open')) {
              $closeDepth = $element.find(this.selector.depth3Wrap);

              $closeDepth.css({
                'transition-duration': '.2s',
                'visibility': 'hidden',
                'height': '0',
              });

              $element.removeClass('open');
            }
          });

          $activeItem.addClass('open');
          $itemLink.attr('aria-expanded', true);
          if(siteCode === 'us' && !this.isB2B) {
            this.activeDepth2Img(item, true);
          }
          if ($activeItem.hasClass(this.selector.hasDepthMenu)) {
            const innerHeight = parseInt($activeItem.find(this.selector.depth3Inner).attr('data-height'));

            $activeItem.find(this.selector.depth3Wrap).css({
              'visibility': 'visible',
              'height': `${innerHeight + 17}px`,
            });

            setTimeout(() => {
              if ($closeDepth !== null) {
                $closeDepth.css({
                  'transition-duration': '',
                });

                $closeDepth = null;
              }

              $activeItem.closest(this.selector.depth2Inner).moveScroll(scrollPos, 100);
            }, 200);
          }
        } else {
          if ($activeItem.hasClass(this.selector.hasDepthMenu)) {
            $activeItem.find(this.selector.depth3Wrap).css({
              'height': '0',
            });

            setTimeout(() => {
              $activeItem.closest(this.selector.depth2Inner).moveScroll(0, 100);
            }, 200);

            setTimeout(() => {
              $activeItem.find(this.selector.depth3Wrap).css({
                'visibility': 'hidden',
              });
            }, 300);
          }

          $activeItem.removeClass('open');
          $itemLink.attr('aria-expanded', false);
        }
      }
    }

    backDepthMobile() {
      let activeIdx = 0;

      this.el.depth1Link.removeAttr('tabindex');
      this.mobileEl.utilLink.removeAttr('tabindex');
      this.el.depth1Link.attr('aria-expanded', false);

      this.el.depth1Menu.target.forEach((menu, idx) => {
        const $menu = $q(menu);

        if ($menu.hasClass('open')) {
          activeIdx = idx;
          this.mobileEl.gnbContainer.removeClass('slide');

          $menu.removeClass('open');
          $menu.find(this.selector.depth2Link).removeClass('open');
          $menu.find(this.selector.depth2Menu).removeClass('open');
          $menu.find(this.selector.depth2Wrap).removeClass('open');
          $menu.find(this.selector.depth2Inner).scrollTop(0);

          setTimeout(() => {
            $menu.find(this.selector.depth2Wrap).css({
              'display': 'none',
            });
          }, 200);

          $menu.find(this.selector.depth3Wrap).target.forEach((item) => {
            const $item = $q(item);

            $item.css({
              'height': '',
            });
          });
        }
      });

      this.el.depth1Menu.eq(activeIdx).find(this.selector.depth1Link).focus();

      this.mobileEl.gnbContainer.trigger('scroll');
      
      //reader focus loop : set
      window.sg.common.utils.removeMobileFocusLoop();
      window.sg.common.utils.setMobileFocusLoop(this.el.gnbMenuWrap.target[0]);
    }

    setFocusFoward(e) {
      let activeNum = false;

      if (e.keyCode === KEY_CODE.TAB && e.shiftKey === false) {
        this.el.depth1Menu.target.forEach((item) => {
          const $item = $q(item);

          if ($item.hasClass('open')) {
            $item.find(this.mobileSelector.gnbDepthBack).focus();
            activeNum = true;
          }
        });

        if (activeNum === false) {
          this.el.depth1First.focus();
        }
      }

      e.preventDefault();
    }

    setFocusReverse(e) {
      if (e.keyCode === KEY_CODE.TAB && e.shiftKey === true) {
        this.mobileEl.gnbMenuClose.focus();

        e.preventDefault();
      }
    }

    setCloseFocus(e) {
      let activeNum = false;

      if (e.keyCode === KEY_CODE.TAB && e.shiftKey === false) {
        this.el.depth1Menu.target.forEach((item) => {
          const $item = $q(item);

          if ($item.hasClass('open')) {
            $item.find(this.mobileSelector.gnbDepthBack).focus();
            activeNum = true;
          }
        });

        if (activeNum === false) {
          this.el.depth1First.focus();
        }

        e.preventDefault();
      } else if (e.keyCode === KEY_CODE.ENTER) {
        this.deactiveMobileGnb(true);

        e.preventDefault();
      }
    }

    // common handler
    openPopup(item) {
      const layerId = item.dataset.divId;
      const $activePopup = $q(`${layerId}`);

      if ($activePopup.css('display') === 'none') {
        this.el.layerDim.show();

        $activePopup.attr('tabindex', '0');
        $activePopup.show();
        $activePopup.focus();
        $activePopup.setLayerFocus('.layer-popup__inner', '.layer-popup__close');
      } else {
        this.closePopup();
      }
    }

    closePopup(item) {
      const $unactivePopup = $q(item.closest(this.selector.layerWrap));
      const layerId = $unactivePopup.attr('id');

      this.el.layerDim.hide();

      $unactivePopup.hide();
      $unactivePopup.removeAttr('tabindex');
      $unactivePopup.offLayerFocus();

      this.el.layerOpenBtn.target.forEach((element) => {
        if (element.dataset.divId === `#${layerId}`) {
          element.focus();
        }
      });
    }

    desktopEsc(event){
      if (event.keyCode === KEY_CODE.ESC) {
        const $onDepth1 = $q(document.activeElement).closest('.gnb__depth1-menu, .gnb__login, .gnb__logout, .gnb__country');
        requestAnimationFrame(() => {
          const $openMenu = this.el.component.find('.gnb__depth1-menu.active');
          if ($openMenu.target.length > 0) {
            this.deactiveGnb($openMenu);
          }
          if (this.el.component.find('.gnb__login-layer.active').target.length > 0) {
            this.deactiveLoginMenu();
          }
          if (this.el.component.find('.gnb__country-cta.active').target.length > 0) {
            this.deactiveCountry();
          }
          if($onDepth1.target.length > 0){
            $onDepth1.find('a, button').focus();
          }
        });
      }
    }

    unbindEvents() {
      this.el.depth1Link.off('mouseenter');
      this.el.depth1Link.off('keydown');
      this.el.depth1Link.off('click');
      this.el.depth2Close.off('click');
      this.el.depth2Link.off('mouseenter');
      this.el.depth2Link.off('keydown');
      this.el.depth2Link.off('focus');
      this.el.depth2Link.off('click');
      this.el.loginBtn.off('focus');
      this.el.loginBtn.off('mouseenter');
      this.el.loginBtn.off('mouseleave');
      this.el.loginBtn.off('keydown');
      this.el.loginLayer.off('mouseenter');
      this.el.loginLayer.off('mouseleave');
      this.el.countryBtn.off('focus');
      this.el.countryBtn.off('mouseenter');
      this.el.countryBtn.off('mouseleave');
      this.el.countryBtn.off('keydown');
      this.el.countryLayer.off('mouseenter');
      this.el.countryLayer.off('mouseleave');
      this.el.gnbDim.off('mouseenter');
      this.el.gnbNavi.off('mouseleave');
      this.el.countrySelect.eq(this.el.countrySelect.target.length - 1).off('keydown');
      this.el.desktopUtilLink.eq(this.el.desktopUtilLink.target.length - 1).off('keydown');

      this.mobileEl.gnbMenuBtn.off('click');
      this.mobileEl.gnbMenuClose.off('click');
      this.mobileEl.gnbMenuClose.off('keydown');
      this.mobileEl.gnbDepthBack.off('click');
      this.mobileEl.gnbDepthBack.off('keydown');
      this.el.depth1First.off('keydown');
      this.el.featureContainer.off('keydown');
      this.el.component.find('.gnb__depth1-container').off('focusin',this.scrollToCenterFocus);
      this.el.window.off('keydown',this.handler.desktopEsc);
    }

    resetGnb() {
      this.el.depth2Wrap.removeAttr('style');

      this.el.depth3Wrap.css({
        'visibility': '',
        'height': '',
      });

      this.el.depth2Close.css({
        'visibility': 'hidden',
      });

      this.el.gnbDim.removeClass('open');
      this.el.gnbDim.hide();

      setTimeout(() => {
        this.el.depth2Inner.removeAttr('style');
      }, 500);
    }

    matches(el, selector) {
      return el.matches ? el.matches(selector) : el.msMatchesSelector(selector);
    }

    focusToArrow(event) {
      let code = '';
      if (event.keyCode === KEY_CODE.UP) {
        code = 'up';
      } else if (event.keyCode === KEY_CODE.RIGHT) {
        code = 'right';
      } else if (event.keyCode === KEY_CODE.DOWN) {
        code = 'down';
      } else if (event.keyCode === KEY_CODE.LEFT) {
        code = 'left';
      } else {
        return;
      }

      const $target = $q(event.target);
      const depth1sel = '.gnb__depth1-link';
      const depth2sel = '.gnb__depth2-title-link, .gnb__depth2-link';
      const depth3sel = '.gnb__depth3-link';
      const isPcsize = this.breakpoint < utils.getViewPort().width;
      let btnGroup = null;

      let siblings = [];
      if (this.matches(event.target, depth3sel)) {
        btnGroup = 3;
        if (isPcsize) {
          siblings = $target.closest('.gnb__depth3-wrap').find(depth3sel).target;
        } else {
          siblings = $target.closest('.gnb__depth2-inner').find(`${depth2sel}, .gnb__depth2-menu.open .gnb__depth3-link`).target;
        }
      } else if (this.matches(event.target, depth2sel)) {
        btnGroup = 2;
        if (isPcsize) {
          siblings = $target.closest('.gnb__depth2-wrap').find(depth2sel).target;
        } else {
          siblings = $target.closest('.gnb__depth2-inner').find(`${depth2sel}, .gnb__depth2-menu.open .gnb__depth3-link`).target;
        }
      } else if (this.matches(event.target, (depth1sel))) {
        btnGroup = 1;
        siblings = $target.closest('.gnb__nav').find(depth1sel).target;
      }

      siblings = siblings.filter((el) => el.getClientRects().length > 0); // filter visible

      if (siblings.length === 0) {
        return;
      }

      //arrow key action
      let goFocus = null;
      if (btnGroup === 1) {
        if (isPcsize) {
          if(this.stateRtl){
            if (code === 'right') {
              goFocus = siblings[siblings.indexOf(event.target) - 1];
            } else if (code === 'left') {
              goFocus = siblings[siblings.indexOf(event.target) + 1];
            }
          }else{
            if (code === 'right') {
              goFocus = siblings[siblings.indexOf(event.target) + 1];
            } else if (code === 'left') {
              goFocus = siblings[siblings.indexOf(event.target) - 1];
            }
          }
          if (code === 'down') {
            const $innerMenu = $q(event.target.parentNode).find('.gnb__depth2-inner');
            if ($innerMenu.target.length > 0) {
              if (event.target.getAttribute('aria-expanded') === 'true') {
                this.deactiveGnb();
              }
              this.activeGnb($target);
              goFocus = $innerMenu.find(depth2sel).target[0];
            }
          }
        } else {
          if (code === 'up') {
            goFocus = siblings[siblings.indexOf(event.target) - 1];
          } else if (code === 'down') {
            goFocus = siblings[siblings.indexOf(event.target) + 1];
          }
        }
      } else if (btnGroup === 2) {
        if (isPcsize) {
          if (code === (this.stateRtl ? 'left' : 'right')) {
            goFocus = $q(event.target.parentNode).find('.gnb__depth3-wrap .gnb__depth3-link').target.filter((el) => el.getClientRects().length > 0)[0];
          } else if (code === 'up') {
            const idx = siblings.indexOf(event.target);
            if (idx !== 0) { // when first menu, move 1depth
              goFocus = siblings[siblings.indexOf(event.target) - 1];
            } else {
              goFocus = $target.closest('.gnb__depth1-menu').find('.gnb__depth1-link').target[0];
              this.deactiveGnb($q(goFocus.parentNode));
              this.resetGnb();
            }
          } else if (code === 'down') {
            goFocus = siblings[siblings.indexOf(event.target) + 1];
          }
        } else {
          if (code === 'up') {
            goFocus = siblings[siblings.indexOf(event.target) - 1];
          } else if (code === 'down') {
            goFocus = siblings[siblings.indexOf(event.target) + 1];
          }
        }
      } else if (btnGroup === 3) {
        if (isPcsize) {
          if (code === (this.stateRtl ? 'right' : 'left')) {
            goFocus = $target.closest('.gnb__depth2-menu').find('.gnb__depth2-link').target[0];
          } else if (code === 'up') {
            goFocus = siblings[siblings.indexOf(event.target) - 1];
          } else if (code === 'down') {
            goFocus = siblings[siblings.indexOf(event.target) + 1];
          }
        } else {
          if (code === 'up') {
            goFocus = siblings[siblings.indexOf(event.target) - 1];
          } else if (code === 'down') {
            goFocus = siblings[siblings.indexOf(event.target) + 1];
          }
        }
      }

      if (goFocus !== null && goFocus !== undefined) {
        event.preventDefault();
        goFocus.focus();
      }
    }

    focusLoopDesktop(event) {
      requestAnimationFrame(() => {
        const desktopDimOpen = this.el.gnbDim.hasClass('open');
        if (desktopDimOpen && $q(document.activeElement).closest(this.el.gnbNavi.target[0]).target.length === 0) {
          if (event.shiftKey) {
            const $lastLink = this.el.component.find('.gnb__utility > li > a, .gnb__utility > li > button');
            $lastLink.eq($lastLink.target.length - 1).focus();
          } else {
            this.el.component.find('.gnb__logo').focus();
          }
        }
      });
    }

    bindEvents() {
      if (this.breakpoint < utils.getViewPort().width) {
        this.desktopEvents();
      } else {
        this.mobileEvents();
      }

      this.el.window.off('resize', this.handler.resize).on('resize', this.handler.resize);

      // open layer popup
      this.el.layerOpenBtn.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          this.openPopup(item);
        });
      });

      // close layer popup
      this.el.layerCloseBtn.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          this.closePopup(item);
        });
      });

      //if open gnbMenu, focus loop
      this.el.component.find('.gnb__nav').off('keydown').on('keydown', (event) => {
        if (event.keyCode === KEY_CODE.TAB) {
          this.focusLoopDesktop(event);
        } else {
          this.focusToArrow(event);
        }
      });
    }

    scrollToCenterFocus(event){
      requestAnimationFrame(() => {
        const txtBtnSelector = '.gnb__depth1-link, .gnb__depth2-title-link, .gnb__depth2-link,.gnb__depth3-link, .gnb__utility-mobile a, .gnb__utility-mobile button';
        const isTxtBtn = event.target.matches ? event.target.matches(txtBtnSelector) : event.target.msMatchesSelector(txtBtnSelector);
        if(isTxtBtn !== true){
          return;
        }

        const scrollEl = $q(event.target).closest('.gnb__depth2-inner, .gnb__depth1-container').target[0];
        const elBox = event.target.getBoundingClientRect();
        const goScroll = scrollEl.scrollTop + elBox.top - (utils.getViewPort().height / 2) + (elBox.height / 2);
        scrollEl.scrollTop = Math.max(0, goScroll);
      });
    }

    mobileEvents() {
      // gnb active
      this.mobileEl.gnbMenuBtn.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          lazyLoad.setLazyLoadManually(this.el.component.find('.gnb__utility-mobile .gnb__user-name').target[0]);

          if (this.el.gnbMenuWrap.hasClass('use-country-selector')) {
            lazyLoad.setLazyLoadManually(this.el.component.find('.gnb__country-mobile').target[0]);
          }

          this.activeMobileGnb();
          this.mobileEl.gnbMenuClose.focus();
        });
      });

      // gnb close
      this.mobileEl.gnbMenuClose.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          this.deactiveMobileGnb(true);
        });

        $item.off('keydown').on('keydown', (event) => {
          this.setCloseFocus(event);
        });
      });

      this.el.depth1Link.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          this.activeMobileFirstMenu($item);

          setTimeout(() => {
            $item.parent().find('.gnb__depth-back').focus();
          }, 500);
        });
      });

      this.mobileEl.gnbDepthBack.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          this.backDepthMobile();
        });

        $item.off('keydown').on('keydown', (event) => {
          this.setFocusReverse(event);
        });
      });

      this.el.depth2Link.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          const isOpen = item.parentNode.classList.contains('open');
          this.activeMobileSecondMenu($item);

          if (isOpen === false) {
            const $focusLink = $q(item.parentNode).find('.gnb__depth3-wrap .gnb__depth3-link');
            $focusLink.eq(0).focus();
          }
        });
      });

      this.el.depth1First.off('keydown').on('keydown', (event) => {
        this.setFocusReverse(event);
      });

      this.el.component.find('.gnb__depth1-container').off('focusin',this.scrollToCenterFocus).on('focusin',this.scrollToCenterFocus);
    }

    desktopEvents() {
      lazyLoad.setLazyLoadManually(this.el.loginBtn.target[0]);

      if (this.el.gnbMenuWrap.hasClass('use-country-selector')) {
        lazyLoad.setLazyLoadManually(this.el.countryBtn.target[0]);
      }

      // gnb active
      this.el.depth1Link.target.forEach((item) => {
        const $item = $q(item);

        $item.off('mouseenter').on('mouseenter', () => {
          this.toggleGnb($item);
        });

        $item.off('keydown').on('keydown', (event) => {
          if (event.keyCode === KEY_CODE.ENTER) {
            this.toggleGnb($item);

            if ($item.parent().hasClass('has-depth-menu')) {
              event.preventDefault();
            }

            const subfocus = $q(event.target.parentNode).find('.gnb__depth2-title-link, .gnb__depth2-link').target.filter((el) => el.getClientRects().length > 0);
            if (subfocus[0] !== undefined) {
              subfocus[0].focus();
            }
          }
        });
      });

      // gnb close
      this.el.depth2Close.target.forEach((item) => {
        const $item = $q(item);

        $item.off('click').on('click', () => {
          const $goFocus = this.el.component.find('.gnb__depth1-link.active');
          this.deactiveGnb($item);
          $goFocus.focus();
        });
      });

      this.el.gnbDim.off('mouseenter').on('mouseenter', () => {
        if (this.dimEventFlag === true) {
          this.deactiveGnb(this.el.gnbDim);
        }
      });

      this.el.gnbNavi.off('mouseleave').on('mouseleave', () => {
        if (this.breakpoint < utils.getViewPort().width && this.el.gnbDim.target[0].style.display === 'block') {
          this.deactiveGnb(this.el.gnbDim);
        }
      });


      // 2depth active
      this.el.depth2Link.target.forEach((item) => {
        const $item = $q(item);

        if(siteCode !== 'us' || this.isB2B) {
          $item.off('mouseenter').on('mouseenter', () => {
            this.subOpenFlag = true;

            this.activeSnb($item);
          });

          $item.off('focus').on('focus', () => {
            this.subOpenFlag = true;

            this.activeSnb($item);
          });

          $item.off('click').on('click', (event) => {
            if ($item.parent().hasClass('has-depth-menu')) {
              event.preventDefault();
            }
          });
        } else {
          $item.find('.gnb__depth2-link-text, .icon--next').off('mouseenter').on('mouseenter', () => {
            this.subOpenFlag = true;
            this.activeSnb($item);
            this.activeDepth2Img($item);
          });
          $item.find('.gnb__depth2-link-text, .icon--next').off('focus').on('focus', () => {
            this.subOpenFlag = true;
            this.activeSnb($item);
            this.activeDepth2Img($item);
          });
          $item.find('.gnb__depth2-link-text, .icon--next').off('click').on('click', (event) => {
            if ($item.parent().hasClass('has-depth-menu')) {
              event.preventDefault();
            }
          });
        }
      });

      // login area active
      this.el.loginBtn.target.forEach((item) => {
        const $item = $q(item);

        $item.off('focus').on('focus', () => {
          this.activeLoginMenu();
        });

        $item.off('mouseenter').on('mouseenter', () => {
          if (this.loginFlag === null) {
            this.activeLoginMenu();
          } else {
            clearTimeout(this.loginFlag);

            this.loginFlag = null;
          }
        });

        $item.off('mouseleave').on('mouseleave', () => {
          if (this.loginFlag !== null) {
            clearTimeout(this.loginFlag);

            this.loginFlag = null;
          }

          this.loginFlag = setTimeout(() => {
            this.deactiveLoginMenu();
          }, 200);
        });

        $item.off('keydown').on('keydown', (event) => {
          if (event.keyCode === KEY_CODE.TAB && event.shiftKey === true) {
            this.deactiveLoginMenu();
          }
        });
      });

      this.el.gnbMenuWrap.find('.gnb__utility .gnb__utility-menu').target.forEach((utilePop) => {
        const $utilePopLink = $q(utilePop).find('.gnb__utility-link');
        $utilePopLink.eq($utilePopLink.target.length - 1).off('keydown').on('keydown', (event) => {
          if (event.keyCode === KEY_CODE.TAB && event.shiftKey === false) {
            this.deactiveLoginMenu();
          }
        });
      });

      this.el.loginLayer.target.forEach((item) => {
        const $item = $q(item);

        $item.off('mouseenter').on('mouseenter', () => {
          if (this.loginFlag !== null) {
            clearTimeout(this.loginFlag);
          }
        });

        $item.off('mouseleave').on('mouseleave', () => {
          if (this.loginFlag !== null) {
            clearTimeout(this.loginFlag);
          }

          this.loginFlag = setTimeout(() => {
            this.deactiveLoginMenu();
          }, 200);
        });
      });

      // country area active
      this.el.countryBtn.target.forEach((item) => {
        const $item = $q(item);

        $item.off('focus').on('focus', () => {
          this.activeCountry();
        });

        $item.off('mouseenter').on('mouseenter', () => {
          if (this.countryFlag === null) {
            this.activeCountry();
          } else {
            clearTimeout(this.countryFlag);

            this.countryFlag = null;
          }
        });

        $item.off('mouseleave').on('mouseleave', () => {
          if (this.countryFlag !== null) {
            clearTimeout(this.countryFlag);

            this.countryFlag = null;
          }

          this.countryFlag = setTimeout(() => {
            this.deactiveCountry();
          }, 200);
        });

        $item.off('keydown').on('keydown', (event) => {
          if (event.keyCode === KEY_CODE.TAB && event.shiftKey === true) {
            this.deactiveCountry();
          }
        });
      });

      this.el.countryLayer.target.forEach((item) => {
        const $item = $q(item);

        $item.off('mouseenter').on('mouseenter', () => {
          if (this.countryFlag !== null) {
            clearTimeout(this.countryFlag);
          }
        });

        $item.off('mouseleave').on('mouseleave', () => {
          if (this.countryFlag !== null) {
            clearTimeout(this.countryFlag);
          }

          this.countryFlag = setTimeout(() => {
            this.deactiveCountry();
          }, 200);
        });
      });

      this.el.countrySelect.eq(this.el.countrySelect.target.length - 1).off('keydown').on('keydown', (event) => {
        if (event.keyCode === KEY_CODE.TAB && event.shiftKey === false) {
          this.deactiveCountry();
        }
      });

      this.el.window.off('keydown',this.handler.desktopEsc).on('keydown',this.handler.desktopEsc);
    }
  }

  const init = () => {
    el.component = $q(selector.section);

    if (!el.component.target.length) {
      return;
    }

    el.component.target.forEach((element) => {
      if (!Gnb.instances.has(element)) {
        new Gnb(element);
      }
    });
  };

  const reInit = () => {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      el.component = $q(selector.section);

      el.component.target.forEach((element) => {
        if (Gnb.instances.has(element)) {
          const instances = Gnb.instances.get(element);
          instances.reInit();
        } else {
          new Gnb(element);
        }
      });
    }
  };

  Gnb.instances = new WeakMap();

  if(siteCode !== 'us'){
    $q.ready(init);
  }

  window.sg.components.gnb = {
    init,
    reInit,
  };
})();

var ss = $;
var reservationUserData = null;
// Store Login callback function
function nextGenLoginResult(data){
}

(function ($) {

	ss.Sign = function () {
		var browser = navigator.userAgent;
		
		// in 국가 MyGalaxy App 접근 판단
		var inMyGalaxyAppflag = "N";
		if (SITE_CD === "in"){
			if ( browser.indexOf("MyGalaxy") > -1 || browser.indexOf("SamsungShopSDK") > -1 ){
				inMyGalaxyAppflag = "Y";
			}
		}
		
		Granite.I18n.setLocale($('#language').val());
		
		var runmodeInfo = $('#runmodeInfo').val();
		
		var policyCheckSite = SITE_CD === "es" ? true : false;
		var receiveEmailChecked = false;

		var userData = null;
		var estoreLive = true;

		var returnURL = "";
		var loginLinkURL = $("#loginLinkURL").val();
		var logoutURL = $("#logoutURL").val();
		
		var $cartCountEl = $('.gnb-cart-count');
		var $userNameElForPC = $('.gnb__utility').find('.gnb__user-name');
		var $userNameElForMobile = $('.gnb__utility-mobile').find('.gnb__user-name');

		var $beforeLoginContext = $('.before-login-context');
		var $afterLoginContext = $('.after-login-context');
		

		var scene7domain = $('#scene7domain').val();
		
		var guid = $.cookies.get("guid",{domain:".samsung.com"});
		var flpe = $.cookies.get("flpe", {domain : ".samsung.com"});
		var jsonflpe = {};
		if(flpe && guid) {
			// CryptoJS 암호화 하는 부분
			const keyone = "cedc6238tqcf1t4f0vl7g50mc70d6a5a";
			var parsekeyone = CryptoJS.enc.Utf8.parse(keyone); // 키는 utf8로 파싱 1회 수행
			
			// 1차 키와 guid를 암호화하여 2차 키를 생성한다 
			var enkeyone = CryptoJS.AES.encrypt(guid, parsekeyone,{
				mode: CryptoJS.mode.ECB,
				padding: CryptoJS.pad.Pkcs7
			});
			
			// CryptoJS 복호화 하는 부분
			const keytwo = (enkeyone+keyone).substring(0, 32); // 2차 키 길이를 AES256에 사용되는 32Byte로 조절하기 위하여 추가로 덧붙여서 자름 
			var parsekeytwo = CryptoJS.enc.Utf8.parse(keytwo); // 키는 utf8로 파싱 1회 수행

			// 쿠키에 암호화하여 전달된 값을 2차 키로 복호화한다.
			var dekeytwo = CryptoJS.AES.decrypt(flpe, parsekeytwo,{
				mode: CryptoJS.mode.ECB,
				padding: CryptoJS.pad.Pkcs7
			});
			var deflpe = CryptoJS.enc.Utf8.stringify(dekeytwo);
			
			// 복호화된 개인정보를 url 디코딩하고서 json포멧으로 저장 
			jsonflpe = JSON.parse(decodeURIComponent(deflpe));
		}
		
		var firstName = jsonflpe.firstName ? jsonflpe.firstName : $.cookies.get("firstName");
		var lastName = jsonflpe.lastName ? jsonflpe.lastName : $.cookies.get("lastName");
		var profilePicture = jsonflpe.picturePath ? jsonflpe.picturePath : $.cookies.get("mVal11", {domain : ".samsung.com"});
		if(profilePicture != null && profilePicture != ''){
			profilePicture = decodeURI(profilePicture.toString());
		}
		
		/* + 비스토어 로그인 */
		var isLoginWithNoStore = $("#isLoginWithNoStore").val(); 
		isLoginWithNoStore = (isLoginWithNoStore === "Y") ? true : false;

		/* 20180528 신규 샵 통합 국가 common property :: S */
		var myAccountUrl = $("#gnbMyAccountUrl").val();
		var isNewHybris = $("#shopIntegrationFlag").val() === "Hybris-new" ? true : false;		//new-hybris
		var gnbUsApiUse = $('#shopIntegrationFlag').val() === "GPv2" ? true : false;
		var newShopCountryYN = (gnbUsApiUse || isNewHybris|| $("#shopIntegrationFlag").val() === "Hybris-intg")?"Y":"";
		var countryIsoCode = $("#countryIsoCode").val();
		var storeWebDomain = $("#storeWebDomain").val();										//new-hybris
		/* 20180528 신규 샵 통합 국가 common property :: E */

		// VTEX 국가 ar/cl/co/mx/pe 국가 스토어 SSO 연계 제거 -- 2021.06.24
		var isVtexStore = false;
		if (SITE_CD === "ar" || SITE_CD === "co" || SITE_CD === "py" || SITE_CD === "mx") {
			// 스토어 호출하지 않고 로그인 완료처리하기 위함
			isVtexStore = true;
		}

		/* 20180808 US Cart Count :: S */
		if(gnbUsApiUse){
			var usCartCount = $.cookies.get("s_ecom_sc_cnt", {domain : ".samsung.com"});
			
			if(usCartCount != null && usCartCount !== ""){
				$cartCountEl.html('<span class="hidden">' + $("#productCountText").val() + ' : </span>' + usCartCount);
				if(usCartCount === 0){
					$cartCountEl.hide();
				}else {
					$cartCountEl.show();
				}
			}
		}
		/* 20180808 US Cart Count :: E */
		
		/* 20190219 US GPv2 api 호출 시  헤더 추가 관련 변수 : S*/
		var multiLanguageYN = $("#multiLanguageYn").val(),
		hreflang = $("#localLang").val();
		if(hreflang != null){
			hreflang = hreflang.toLowerCase();
		}
		/* 20190219 US GPv2 api 호출 시  헤더 추가 관련 변수 : E*/
		

		/* us 국가 로그인 후 dsprocess 호출 용 도메인 : S */
		var serverType = $("#serverType").val();
		var usSSOApiDomain = "https://sso-stg.us.samsung.com/sso";
		if(serverType === "prod"){
			usSSOApiDomain = "https://sso-us.samsung.com/sso";
		}
		/* us 국가 로그인 후 dsprocess 호출 용 도메인 : E */
		
		// 2018.11.30 us shop 정책동의 spec 변경
		var consentsId = new Array();
		
		var userLoginBtn = ".loginBtn";
		var userLogoutBtn = ".logoutBtn";
		
		var hybrisApiJson = $("#hybrisApiJson").val(); //common에 설정이 되어 있는 경우(Y)는 json타입 아닌 경우는 기존 처럼 jsonp

		var $showLayer = null;
		var $loginLayerPopup = null;

		var $joinForm = null;
		var $findAccountForm = null;
		var $signInForm = null;
		var $signOutForm = null;
		
		var $signInBtn = null;
		var $signUpBtn = null;
		var $findAccountBtn = null;
		var $signToggleArrow = null;
		var $loginLeaveBtn = null;
		
		var $privacyCheck1 = null;
		var $privacyCheck2 = null;
		var $errorPrivacy = null;

		var $idInput = null;
		var $pwInput = null;
		var $rememberCheck = null;
		var $rememberCheckLabel = null;
		var $errorIdText = null;
		var $errorPwText = null;

		var $loginCloseBtn = null;

		var $dimContainer = null;

		/* 팝업 */
		var $privacyPopup = null;
		var $preferencePopup = null;
		var $confirmPopup = null;

		var $privacyBtn = null;
		var $preferenceCheckBtn = null;
		var $privacyCloseBtn = null;
		
		var $loginValidateYnForGPv2 = $('#loginValidateYnForGPv2'); 

		// 로그인 창을 띄운 개체(팝업 닫기 시 포커스를 주기 위함)
		var closeReturnFocusElem = null;

		var updateProfileUrl = $("#updateProfileURL").val();
		// 공통 제공을 위한 object
		ss.Auth = {};

		//date format setting
		Date.prototype.format = function(f) {
			if (!this.valueOf()){
				return " ";
			}
			var d = this;

			return f.replace(/(yyyy|MM|dd|HH|mm|ss)/gi, function($1) {
				switch ($1) {
					case "yyyy": return d.getFullYear();
					case "MM": return (d.getMonth() + 1).zf(2);
					case "dd": return d.getDate().zf(2);
					case "HH": return d.getHours().zf(2);
					case "mm": return d.getMinutes().zf(2);
					case "ss": return d.getSeconds().zf(2);
					default: return $1;
				}
			});
		};

		String.prototype.string = function(len){var s = '', i = 0; while (i++ < len) { s += this; } return s;};
		String.prototype.zf = function(len){return "0".string(len - this.length) + this;};
		Number.prototype.zf = function(len){return this.toString().zf(len);};
		String.prototype.escapeHtml = function(){ 
			return this.replace(/</g, "&lt;").replace(/\"/g, "&quot;").replace(/>/g, "&gt;").replace(/\'/g, "&#039;"); 
		}; 


		let isUSB2bLogin = function() {
			return $.cookies.get("b2b_prof_fname", {domain:".samsung.com"});
		}
		function b2bUsLoginToggle(){
			if(siteCode === 'us' && IS_B2B && isUSB2bLogin()) {
				$beforeLoginContext.hide();
				$afterLoginContext.show();
				$userNameElForPC.hide();
				$userNameElForMobile.hide();
			}else if(siteCode === 'us' && IS_B2B && !isUSB2bLogin()){
				$beforeLoginContext.show();
				$afterLoginContext.hide();
			} 
		}
		// String 파라미터를 오브젝트로 변환
		// SNS 로그인 시 스토어에서 보내주는 파라미터를 읽기 위함
		function getQueryParams(qs) {
			qs = qs.split("+").join(" ");

			var params = {}, tokens,
				re = /[?&]?([^=]+)=([^&]*)/g;

			while (tokens = re.exec(qs)) {
				params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
			}

			return params;
		}

		// 스토어 로그인 요청 쿠키 삭제
		function deleteLoginRequestCookie() {
			$.cookies.del("estoreLoginRequesting");
			$.cookies.del("estoreLoginRequesting", {domain:".samsung.com"});

		}

		function deleteUSCookie() {
			$.cookies.del("prof_id", {path:'/', domain:'.samsung.com'});
			$.cookies.del("prof_lname", {path:'/', domain:'.samsung.com'});
			$.cookies.del("prof_bpno", {path:'/', domain:'.samsung.com'});
			$.cookies.del("prof_bpno_s", {path:'/', domain:'.samsung.com'});
			$.cookies.del("rew_enr", {path:'/', domain:'.samsung.com'});
			$.cookies.del("prof_fname", {path:'/', domain:'.samsung.com'});
			$.cookies.del("tppid", {path:'/', domain:'.samsung.com'});
			$.cookies.del("tmktid", {path:'/', domain:'.samsung.com'});
			$.cookies.del("tmktname", {path:'/', domain:'.samsung.com'});
			$.cookies.del("tlgimg", {path:'/', domain:'.samsung.com'});
			$.cookies.del("taccessrtype", {path:'/', domain:'.samsung.com'});
			$.cookies.del("remoteId", {path:'/', domain:'.samsung.com'});
			$.cookies.del("tsgmt", {path:'/', domain:'.samsung.com'});
			$.cookies.del("epp_verified", {path:'/', domain:'.samsung.com'});
			$.cookies.del("store_id", {path:'/', domain:'.samsung.com'});
		}
		
		// 2014.02.21 로그아웃 시 쿠키만 삭제
		function deleteSignCookie() {
			$.cookies.del("snsSessionId");
			$.cookies.del("snsSessionId", {path:'/', domain:'.samsung.com'});
			$.cookies.del("isStoreLogedIn");
			$.cookies.del("sa_em");
			$.cookies.del("sa_em", {path:'/', domain:'.samsung.com'});
			$.cookies.del("eVar67");
			$.cookies.del("eVar67", {path:'/', domain:'.samsung.com'});
			$.cookies.del("lastName",{domain:".samsung.com"});
			$.cookies.del("firstName",{domain:".samsung.com"});
			$.cookies.del("guid",{domain:".samsung.com"});
			$.cookies.del("ReD",{domain:".samsung.com"});
			$.cookies.del("directCallFl",{expires: null, domain : ".samsung.com"});
			$.cookies.del("directCallFlv2",{expires: null, domain : ".samsung.com"});
			$.cookies.del("returnURL",{domain:".samsung.com"});
			$.cookies.del("mVal10",{domain:".samsung.com"});
			$.cookies.del("mVal11",{domain:".samsung.com"});
			$.cookies.del("flpe",{domain:".samsung.com"});

			// 2021.04.12 B2B 로그인 추가
			if(IS_B2B){
				const issmbcookiePath = '/'+SITE_CD +'/';
				$.cookies.del("emailId",{domain:".samsung.com"});
				$.cookies.del("emailAddr",{domain:".samsung.com"});
				$.cookies.del("phone",{domain:".samsung.com"});
				$.cookies.del("userAccount",{domain:".samsung.com"});
				$.cookies.del("dotcomReturnURL",{domain:".samsung.com"});
				$.cookies.del("isSMBRegisteredUserYN",{path:issmbcookiePath,domain:".samsung.com"});
			}

			deleteLoginRequestCookie();
			deleteUSCookie();
            // 초기화
            login_user_info = {};
		}

		/* AU store 6.0 : dotcom taken SA logout */
		function deleteSACookie() {
			$.cookies.del("xsdcxyn");
			$.cookies.del("xsdcxyn", {path:'/', domain:'.samsung.com'});
			$.cookies.del("xsdcbxyn");
			$.cookies.del("xsdcbxyn", {path:'/', domain:'.samsung.com'});
			$.cookies.del("iPlanetDirectoryPro");
			$.cookies.del("iPlanetDirectoryPro", {path:'/', domain:'.samsung.com'});
			$.cookies.del("iPlanetDirectoryProOptVal");
			$.cookies.del("iPlanetDirectoryProOptVal", {path:'/', domain:'.samsung.com'});
		}

		// 로그아웃 요청
		function signOut() {
			deleteSignCookie();
			deleteSACookie();

			userData = null;

			// AU Hybris 6.0  // DE Hybris 6.0  // FR Hybris 6.0
			if(USE_ESTORE || isLoginWithNoStore){ /* + 비스토어 로그인 */
				setMyMenu(false);
			}

			return false;
		}
		
		var imagePreset = function(presetStr, imgUrl){
	    	var preset = "?$"+presetStr;
	    	var tempImgUrl = imgUrl.toLowerCase();

	        if (tempImgUrl.indexOf(".jpg") > -1) {
	        	preset += "_JPG$";
	        } else if (tempImgUrl.indexOf(".jpeg") > -1) {
	        	preset += "_JPG$";
	        } else if (tempImgUrl.indexOf(".png") > -1) {
	        	preset += "_PNG$";
	        } else if (tempImgUrl.indexOf(".gif") > -1) {
	        	preset += "_GIF$";
	        } else {
	        	preset += "_PNG$";
	        }
	    	 
	        return preset;
	    	
	    };

		function setUserName(userNameTxt, isLogin, isOtpLogin) {

			var $userImageElForPC = $userNameElForPC.find('.gnb__user-image');
			var $userImageElForMo = $userNameElForMobile.find('.gnb__user-image');
			var $useImageEl = $('.js-gnb-afterlogin-image');
			var $nonUseImageEl = $('.js-gnb-afterlogin-no-image');
			
//			profilePicture = "https://stg-account.samsung.com/membership/assets/images/layout/profile-icon-1.png";
			
			if(profilePicture!='' && profilePicture != null && isLogin){
				var profilePicturePreview = profilePicture + imagePreset("LazyLoad_Home",profilePicture);
				var profilePictureMain = profilePicture;
				$useImageEl.find('.image__preview').attr("data-src", profilePicturePreview);
				$useImageEl.find('.image__main').attr("data-src", profilePictureMain);
				
				$useImageEl.show();
				$nonUseImageEl.remove();
				
			} else {
				$useImageEl.remove();
			}
			
			var tmpUserImageHtmlForPC = 
				'<span class="gnb__user-image">'+
					$userImageElForPC.html()+
				'</span>';
			var tmpUserImageHtmlForMo = 
				'<span class="gnb__user-image">'+
					$userImageElForMo.html()+
				'</span>';
			
			if(isOtpLogin){
				var profileLinkUrl = "/"+SITE_CD+"/web/mypage/profile-settings";

				$userNameElForPC.attr("href", profileLinkUrl);
				$userNameElForMobile.attr("href", profileLinkUrl);
			}
			
			$userNameElForPC.html(userNameTxt+tmpUserImageHtmlForPC);
			$userNameElForMobile.html(userNameTxt+tmpUserImageHtmlForMo);
			
			window.sg.components.gnb.reInit();
			window.sg.common.lazyLoad.setLazyLoadManually($useImageEl[0]);
		}

		// Hybris 6.0
		function setMyMenu(isLogedIn){
			if(firstName == null || lastName == null){
				setUserName("",false);
			}else{
				if(SITE_CD === "vn"){
					setUserName(lastName,false);
				}else{
					setUserName(firstName,false);
				}
			}
		}
		
		// to HEX func
		function toHex(str) {
			var result = '';
			for (var i=0; i<str.length; i++) {
			  result += str.charCodeAt(i).toString(16);
			}
			return result;
		}

		// Find Account
		function findAccount() {
			returnURL = window.location.href;

			$("#findReturnURL", $findAccountForm).val(returnURL);
			$("#findGoBackURL", $findAccountForm).val(returnURL);
			
			//20200319 :: _satellite 임시 주석처리 
//			_satellite.setVar('account','account:find sign in info');
//			_satellite.track('account');

			$findAccountForm.submit();

			return false;
		}

		// 회원 가입 -> 미사용
		function signUp() {
			returnURL = "http://" + window.location.host + "/" + SITE_CD + "/";

			// Omniture
			//20200319 :: _satellite 임시 주석처리 
//			_satellite.setVar('account','account:sign up');
//			_satellite.track('account');

			$("#joinReturnURL", $joinForm).val(returnURL);
			$("#joinGoBackURL", $joinForm).val(returnURL);

			var registCheckUrl = $("#joinRegistURL", $joinForm).val();
			var domainTemp = "";
			var winPort = window.location.port;
			// port가 없거나 80, 8080 일 경우에는 https://로 호출
			if(winPort == null || winPort === "" || winPort === "80" || winPort === "8080"){
				domainTemp = "https://" + window.location.host;
			}else{
				domainTemp = "http://" + window.location.host;
			}
			
			if(registCheckUrl.indexOf(window.location.hostname) < 0){
				var registFullUrl = domainTemp + registCheckUrl;
				$("#joinRegistURL", $joinForm).val(registFullUrl);
			}
			var emailCheckUrl = $("#joinEmailActivationURL", $joinForm).val();
			if(emailCheckUrl.indexOf(window.location.hostname) < 0){
				var emailFullUrl = window.location.protocol + "//" + window.location.host + emailCheckUrl;
				$("#joinEmailActivationURL", $joinForm).val(emailFullUrl);
			}

			$joinForm.submit();

			return false;
		}

		// input elements 초기화
		function inputInit(isFirstUrl) {
			$idInput.val("");
			$pwInput.val("");
			$rememberCheck.attr("checked", false);
			$rememberCheckLabel.removeClass();

			$errorIdText.hide();
			$errorPwText.hide();

			if (isFirstUrl) {

				// 최초 로딩시 snsiframe 삽입 dong_won.lee
				if ("snsIframe".indexOf($('div.connect_wrap >div.sns-wrap > iframe').attr('id')) == -1) {
					$('div.connect_wrap >div.sns-wrap').append('<iframe src="" id="snsIframe" width="100%" height="40" frameborder="0" scrolling="no"></iframe>');
				}
//				var goUrl = returnURL.indexOf("http://") < 0 ? "http://" + DOMAIN + returnURL : returnURL;
			}
		}

		// 쿠키에 ID 저장
		function setRememberId(value, expiredays) {
			var today = new Date();
			today.setDate(today.getDate() + expiredays);
			document.cookie = "_common_saveEmail=" + encodeURIComponent(value) + "; path=/; domain=.samsung.com; expires=" + today.toGMTString() + ";";
		}

		// 쿠키에 저장된 ID 가져오기
		function getRememberId() {
			// userid 쿠키에서 id 값을 가져온다.
			var cook = document.cookie + ";";
			var idx = cook.indexOf("_common_saveEmail", 0);
			var val = "";
			var begin, end;

			if (idx != -1) {
				cook = cook.substring(idx, cook.length);
				begin = cook.indexOf("=", 0) + 1;
				end = cook.indexOf(";", begin);
				val = decodeURIComponent(cook.substring(begin, end));
			}

			// 가져온 쿠키값이 있으면
			if (val !== "") {
				// id setting
				$idInput.next().css({ 'visibility' : 'hidden' });
				$idInput.val(val);
				// checkbox check
				$rememberCheck.attr('checked', 'checked');
				$rememberCheck.prop('checked', true);
				$rememberCheck.next().addClass($rememberCheck.next().attr("data-acc-onclass"));
			}
		}
		
		// 로그인 태깅용 함수 호출 - directCallFlv2 == N인 경우만
		function callGAdirect() {
			if($.cookies.get("directCallFlv2") === "N"){//쿠키 없을때만 호출
				//20200319 :: _satellite 임시 주석처리 
				//_satellite.setVar('GUID', $.cookies.get("guid", {domain : ".samsung.com"}));
				
				// AA Direct call 호출
				//20200319 :: _satellite 임시 주석처리 
//				_satellite.track('login');

				//GA Direct call 호출
				if(typeof dataLayer != "undefined" && typeof dataLayer == "object"){
					dataLayer.push({
					    'event' : 'login',
					    'eventNonInteraction' : true

					});
				}
				$.cookies.set("directCallFlv2", "Y", {expires: null, domain : ".samsung.com"});
			}
		}

		// sign 버튼 텍스트 처리
		function setSignButtonText(isLogedIn){
			if(siteCode === 'us' && IS_B2B) return;
			if (isLogedIn) {
				// user 정보 가져온 후 text 셋팅
				ss.Auth.getUserProfile(function(userData){
					if(userData != null && userData !== ""){
						if(SITE_CD === "vn") {
							setUserName(userData.lastName, true);
						}else{
							setUserName(userData.firstName + " " + userData.lastName, true);
						}
					}else{
						setUserName("", true);
					}
				});
				$beforeLoginContext.hide();
				$afterLoginContext.show();
		    } else {
		    	$beforeLoginContext.show();
				$afterLoginContext.hide();
			}
		}

		// wishlist 동기화 - 로그인 시에 쿠키에 쌓아뒀던 wishlist 를 사용자 정보에 넣어줘야함
		// addWishlist가 완료 되어야 제대로 getWishlist를 할 수 있음
		function syncWishlist() {
			var wishlist = $.cookies.getWishList();
			var wishlistIndex = 0;

			function addWishListCallback(data) {

				if (wishlistIndex < wishlist.length) {
					estore.addWishListItemForce({ 'productCode' : wishlist[wishlistIndex] }, addWishListCallback);

					wishlistIndex++;
				} else {
					$.cookies.deleteWishList();

					// sign complete
					if ($.EstoreIfQueue)
						$.EstoreIfQueue.setIsSignReady(true);
				}

			}

			if (wishlist.length > 0) {
				addWishListCallback();
			} else {
				// sign complete
				if ($.EstoreIfQueue)
					$.EstoreIfQueue.setIsSignReady(true);
			}
		}

		// 레이어 팝업 닫기
		function closeLayer() {
			$(".gnb-layer_popup-js").hide();
			$dimContainer.hide();
		}

		// 레이어 팝업 띄우기
		// param : noAccessType - 자격 제한 타입
		function popupLayer(noAccessType) {

			// 자격 제한 타입이면 일반 메시지 팝업
			if (noAccessType) {
				var title = LOGIN.msg.errorTitleText; // 메시지 팝업의 title text
				var description = ""; // 메시지 팝업의 description text

				switch (noAccessType) {
					case "DW": // 임의 탈퇴
					case "AW": // 직권 탈퇴
					case "WP": // 탈퇴 처리중
						description = LOGIN.msg.errorText1;
						break;
					case "BA": // 자격 정지
						description = LOGIN.msg.errorText2;
						break;
					case "UK": // UnKnown
						description = LOGIN.msg.errorText3;
						break;
					case "ES": // estore shutdown
						description = LOGIN.msg.errorText4;
						break;
					default :
						break;
				}

				$showLayer = $confirmPopup;

				// 팝업 레이어 태그 삽입 dong_won.lee
				if ("pop-tit".indexOf($('#confirmPopup >div> div.popup_wrap').find('h2').attr('class')) == -1) {
					$confirmPopup.append('<h2 class="pop-tit">');
					$confirmPopup.append('<p class="msg-text tc">');
				}

				$(".pop-tit", $confirmPopup).text(title);
				$(".msg-text", $confirmPopup).text(description);
			}

			// 다른 레이어 팝업 hide
//			ss.Popover.hideActive(ss.Popover.activePopover);

			$(".gnb-layer_popup-js").hide();


			if(gnbUsApiUse && SITE_CD !== "in"){
				$("#privacy-terms").parent().find(".check_text").empty();
				$("#privacy-terms2").parent().find(".check_text").remove();
				$("#privacy-terms2").parent().find(".check_txt").remove();

				var consentsData1,consentsData2;
				if(consentsId.length > 0){
					consentsData1 = consentsId[0].data.content;
					if(consentsId[1] != null){
						consentsData2 = consentsId[1].data.content;
						consentsData2 = consentsData2.replace("check_text", "checkbox-radio__label-text check_text")
					}
				}

				$("#privacy-terms").parent().find(".check_text").append(consentsData1);
				if(consentsData2 != null){
					$("#privacy-terms2").parent().append(consentsData2);
				}

			}

			if ($showLayer && $showLayer.length > 0) {
				$dimContainer.show();
				$showLayer.show();

//				document.getElementById($showLayer.children("div").attr("id")).popAlign();
			}
		}

		// US 정책 동의 업데이트
		function updateUsAgreePolicy(data){
			var setAgreeUsPolicyUrl = "";
			var jwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
			
			if(gnbUsApiUse){
				setAgreeUsPolicyUrl = STORE_DOMAIN + "/v4/identity/preferences";
			}
			
			var putData = data;
			if(SITE_CD === "in") {
				putData = JSON.stringify(data);
			}
			
			$.ajax({
				headers: {
					"Cache-Control": "no-cache",
					"Content-Type": "application/json",
					"Access-Control-Allow-Origin" : "*",
					"x-ecom-app-id" : "identity-store",
					"x-ecom-jwt" : jwtToken
				},
				url: setAgreeUsPolicyUrl,
				type: "PUT",
				dataType : "json",
				data: putData,
//				async: false,
				xhrFields : {
					withCredentials: true
				},
				beforeSend : function(xhr){
					if(multiLanguageYN === "Y"){
						xhr.setRequestHeader("x-ecom-locale", hreflang);
					}
				},
				success: function (data) {
						closeLayer();
						
						if (inMyGalaxyAppflag === "Y"){
							$showLayer = null; // in이면서 user-agent 정보중에 MyGalaxy 또는 SamsungShopSDK 라는 string이 있는 경우 팝업을 띄우지 않음
						} else {
							$showLayer = $preferencePopup;
						}
						
						popupLayer();
				},
				error:function(jqXHR, textStatus, errorThrown){
					console.error(textStatus);
				}
			});
			

		}

		// 정책 동의 업데이트
		function updateAgreePolicy() {
			var  setAgreeStorePolicyUrl = "";
			var guid = $.cookies.get("guid",{domain:".samsung.com"});
			if(IS_B2B){
				setAgreeStorePolicyUrl = storeWebDomain + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
			}else if(SITE_CD === "au" || SITE_CD === "latin" || SITE_CD === "tw" || SITE_CD === "ru" || SITE_CD === "ae" || SITE_CD === "ae_ar" || SITE_CD === "jp"
				|| SITE_CD === "vn" || SITE_CD === "th" || SITE_CD === "sa" || SITE_CD === "sa_en" || SITE_CD === "nz" 
				|| SITE_CD === "ca" || SITE_CD === "ca_fr" || SITE_CD === "se" || SITE_CD === "dk" || SITE_CD === "fi" || SITE_CD === "no" || SITE_CD === "at" 
				|| SITE_CD === "my" || SITE_CD === "pt" || SITE_CD === "sg" || SITE_CD == "eg" || SITE_CD == "za" || SITE_CD == "hk" || SITE_CD == "hk_en" || SITE_CD == "hu"
				|| SITE_CD === "pk" || SITE_CD == "ch" || SITE_CD == "ch_fr" || SITE_CD == "il") {							 
				// AU Hybris 6.0 // DE Hybris 6.0 // LATIN Hybris 6.0 // TW Hybris 6.0 // UK Hybris 6.0 // RU Hybris 6.0 // AE Hybris 6.0 // AE_AR Hybris 6.0 // VN Hybris 6.0 // TH Hybris 6.0 // SA Hybris 6.0 // SA_EN Hybris 6.0 // NZ Hybris 6.0 // FR Hybris 6.0 // NL Hybris 6.0 // BE Hybris 6.0 // BE_FR Hybris 6.0 // SE,DK,FI,NO,AT,MY,SK,CZ Shop Integration Hybris 6.0
				setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + STORE_SITE_CODE + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
			}else if(isNewHybris) {
				//new hybris전환 국가인경우 
				setAgreeStorePolicyUrl = storeWebDomain + "/" + STORE_SITE_CODE + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
			}else if(SITE_CD === "es" || SITE_CD === "it"){
				if(STORE_DOMAIN.indexOf("https://") > -1){
					// Hybris 6.0
					setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + STORE_SITE_CODE + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
				}else{
					// Hybris 5.0
					setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + STORE_SITE_CODE + "/ng/p4v1/setAgreeStorePolicy?receiveEmail=" + receiveEmailChecked;
				}
			} else if(SITE_CD === "levant"){
	        	setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + "jo" + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
	        } else if(SITE_CD === "levant_ar"){
	        	setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + "jo_ar" + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
			} else if(SITE_CD === "n_africa"){
	        	setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + "ma" + "/ng/p4v1/agreeStorePolicy?receiveEmail=" + receiveEmailChecked;
			} else { 
				setAgreeStorePolicyUrl = STORE_DOMAIN + "/" + STORE_SITE_CODE + "/ng/p4v1/setAgreeStorePolicy?receiveEmail=" + receiveEmailChecked;
			}

			if(hybrisApiJson) {		// jsonp -> json 으로 분기
				$.ajax({
					url: setAgreeStorePolicyUrl,
					type: "GET",
					data : {
						"ssoID" : guid
					},
					dataType : "json",
					xhrFields: { withCredentials: true },
					contentType : "application/x-www-form-urlencoded",
					crossDomain : true,
					beforeSend: function () {},
					success: function (data) {
						closeLayer();
	
						if (data.resultCode === "0000") {	
							if (inMyGalaxyAppflag === "Y"){
								$showLayer = null; // in이면서 user-agent 정보중에 MyGalaxy 또는 SamsungShopSDK 라는 string이 있는 경우 팝업을 띄우지 않음
							} else {
								$showLayer = $preferencePopup;
							}
	
							popupLayer();
						}
					},
					error:function(jqXHR, textStatus, errorThrown){
						console.error(textStatus);
					}
				});
			} else {
				$.ajax({
					url: setAgreeStorePolicyUrl,
					type: "GET",
					dataType : "jsonp",
					data : {
						"ssoID" : guid
					},
					jsonp : "callback",
					beforeSend: function () {},
					success: function (data) {
						closeLayer();

						if (data.resultCode === "0000") {

							if (inMyGalaxyAppflag === "Y"){
								$showLayer = null; // in이면서 user-agent 정보중에 MyGalaxy 또는 SamsungShopSDK 라는 string이 있는 경우 팝업을 띄우지 않음
							} else {
								$showLayer = $preferencePopup;
							}

							popupLayer();
						}
					},
					error:function(jqXHR, textStatus, errorThrown){
						console.error(textStatus);
					}
				});
			}
		}

		/**
		 * US 로그인 체크
		 */
		ss.Auth.checkSignInUs = function(){

			// 토큰 값이 있을 경우 로그인 되었다고 판단
			var xsdcxyn = $.cookies.get("xsdcxyn", {domain : ".samsung.com"});
			var jwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
			var guid = $.cookies.get("guid",{domain:".samsung.com"});
			
			var reDCheckFn = function(){
				$.ajax({
					url: "/aemapi/v6/data-login/callSALogin."+siteCode+".json",
					type: "GET",
					dataType : "json",
					success: function (data) {
						if(data.statusCode===200){
							if(data.redCookieChk === "N"){
								deleteSignCookie();
								deleteSACookie();
								
								saSignInGate();
							} else {
								if ( !$.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"}) ) {
									deleteSignCookie();
									deleteSACookie();

									saSignInGate();
								}else{
	                                location.reload(true);
								}
							}
						} else {
							deleteSignCookie();
							deleteSACookie();

							saSignInGate();
						}
						
					},
					error:function(jqXHR, textStatus, errorThrown){
						console.error(textStatus);
                       	// 스토어에서 로그인 실패면 로그아웃 처리
						deleteSignCookie();
						deleteSACookie();

						saSignInGate();
					}
				});
					
			};
		
			if ( jwtToken ) { 
				// jwt validate 체크
				var validateParamObj = {"jwt": jwtToken};
				var isUSEppGuestUser = false; 
				//us 국가 만 있음
				if(siteCode==="us"){
					var epp_verified = $.cookies.get("epp_verified",{domain:".samsung.com"});
					
					var tmktid = $.cookies.get("tmktid",{domain:".samsung.com"});
					var validateStoreId = $.cookies.get("store_id", {domain:".samsung.com"});
					
					if(epp_verified != null){
						epp_verified = epp_verified.toString();
						if(epp_verified=="true" && tmktid != null && tmktid != ''){
							validateParamObj["store_id"] = tmktid.toString();
						} else if(validateStoreId != null && validateStoreId != ""){
							validateParamObj["store_id"] = validateStoreId.toString();
						}
					}
					
					// [US] epp guest user 체크
					$.ajax({
			    		headers: {
					         "Cache-Control": "no-cache",
					         "Content-Type": "application/json",
					         "Access-Control-Allow-Origin" : "*"
			    		},
					    url: STORE_DOMAIN + "/v1/sso/jwt/details",
		    			type: "POST",
		    			async: false,
			    		dataType : "json",
			    		data: JSON.stringify ({"jwt": jwtToken}),
						xhrFields : {
							withCredentials: true
						},
					    success: function (data) {
					    	if(data != null && data !== "" && data.login_type != null && (data.login_type === "guest_epp_store"|| data.login_type === "referral_url")){
					    		isUSEppGuestUser = true;
					    		$.cookies.set("isUSGuestUser", "Y");
					    	 } else {
					    		$.cookies.set("isUSGuestUser", "N");
					    	 }
					     }
			    	 });
				}
				if(!isUSEppGuestUser){
					$.ajax({
						headers: {
						      "Cache-Control": "no-cache",
						      "Content-Type": "application/json",
						      "Access-Control-Allow-Origin" : "*"
				        },
						url: STORE_DOMAIN + "/v1/sso/user/validate",
						type: "POST",
						dataType : "json",
						data: JSON.stringify (validateParamObj),
//							async: false,
						xhrFields : {
							withCredentials: true
						},
						beforeSend : function(xhr){
							if(multiLanguageYN === "Y"){
								xhr.setRequestHeader("x-ecom-locale", hreflang);
							}
						},
						success: function (data) {
							
							if ( data.statusCode !== 200 && data.statusCode !== "200" ) {
//								$.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
								reDCheckFn();
							} else if ( data.user_info.firstname != null && data.user_info.firstname !== "" ) {
					    		$beforeLoginContext.hide();
								$afterLoginContext.show();
								
								if(fnIsNull(guid)){ // otp login user
									setUserName(data.user_info.firstname + " " + data.user_info.lastname,true, true);
								} else {
									setUserName(data.user_info.firstname + " " + data.user_info.lastname,true);
								}
							}
						},
						error:function(jqXHR, textStatus, errorThrown){
							console.error(textStatus);
//							$.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
							reDCheckFn();
						}
					});
				} else {
					saSignInGate();
				}
			} else {
		    	// sa login 일 경우 jwt cookie 가 유효 하지 않으면 cookie 재발급
			    if(xsdcxyn){
			    	reDCheckFn();
		    	} else {
					saSignInGate();
		    	}
		    }
		};
		/**
		 * 로그인 체크
		 * param : callback 로그인 체크 후 호출 될 함수
		 * param : validate 쿠키 값이 있는지만 체크할 지, 쿠키 값이 유효한 것인지 까지 체크할지 여부 (true / false)
		 * 			true 일 경우 스토어 or SA로 유효한지 체크
		 * param : popupLogin 로그인이 안되있으면 로그인 팝업 띄울지 여부 (true / false)
		 */
		ss.Auth.checkSignIn = function(callback, validate, popupLogin) {

		// Account V03 버젼 반영 2018/12/06
			var isLogedIn = false;
			if(!IS_B2B || (loginLinkURL != null && loginLinkURL != '' && IS_B2B)){ // [B2B] Login Icon 만 존재하는 사이트의 경우 미로그인 처리

			//var token = $.cookies.get("iPlanetDirectoryPro", {domain : ".samsung.com"});
			var xsdcxyn = $.cookies.get("xsdcxyn", {domain : ".samsung.com"});
			var guid = $.cookies.get("guid",{domain:".samsung.com"});
			
			// 2021.04.12 B2B 로그인 추가
			var xsdcbxyn = $.cookies.get("xsdcbxyn", {domain : ".samsung.com"});
			var snsToken = $.cookies.get("snsSessionId", {domain : ".samsung.com"});
			
			
			// 토큰 값이 있을 경우에만 로그인 체크
			// 2021.04.12 B2B 로그인 추가
			if ((!IS_B2B && xsdcxyn) || (IS_B2B && (xsdcbxyn || snsToken))) {
				if (validate) {
					// 스토어 연계 사이트
					if (USE_ESTORE && !isVtexStore) {
						var sessionCheckUrl = "";
						var storeDomainTemp = STORE_DOMAIN.split("/")[2];
						//new-hybris
						if(isNewHybris || IS_B2B) storeDomainTemp = storeWebDomain.split("/")[2];
						
						if(SITE_CD === "au" || SITE_CD === "latin" || SITE_CD === "tw" || SITE_CD === "ru" || SITE_CD === "ae" || SITE_CD === "ae_ar" || SITE_CD === "jp"
							|| SITE_CD === "vn" || SITE_CD === "th" || SITE_CD === "sa" || SITE_CD === "sa_en" || SITE_CD === "nz" || SITE_CD === "uk"
							|| SITE_CD === "ca" || SITE_CD === "ca_fr" || SITE_CD === "se" || SITE_CD === "dk" || SITE_CD === "fi" || SITE_CD === "no" || SITE_CD === "at"
							|| SITE_CD === "my" || SITE_CD === "es" || SITE_CD === "it" || SITE_CD === "pt" || SITE_CD === "sg" || SITE_CD == "eg" || SITE_CD == "za"
							|| SITE_CD == "hk" || SITE_CD == "hk_en" || SITE_CD == "hu" || SITE_CD == "pk" || SITE_CD == "ch" || SITE_CD == "ch_fr" || SITE_CD == "il"
							|| isNewHybris || IS_B2B) {					//new-hybris
							// AU, DE, LATIN, TW, UK, RU, AE, AE_AR, VN, TH, SA, SA_EN, NZ, FR, NL, BE, BE_FR, SE, DK, FI, NO, AT, MY, SK, CZ, ES, IT Shop Integration Hybris 6.0
							sessionCheckUrl = "https://" + storeDomainTemp + "/" + SITE_CD + "/ng/p4v1/sessionCheck";
							if(IS_B2B){
								sessionCheckUrl = storeWebDomain + "/ng/p4v1/sessionCheck";
							}
						} else if(SITE_CD === "levant"){
				        	sessionCheckUrl = "https://" + storeDomainTemp + "/" + "jo" + "/ng/p4v1/sessionCheck";
				        } else if(SITE_CD === "levant_ar"){
				        	sessionCheckUrl = "https://" + storeDomainTemp + "/" + "jo_ar" + "/ng/p4v1/sessionCheck";
						} else if(SITE_CD === "n_africa"){
				        	sessionCheckUrl = "https://" + storeDomainTemp + "/" + "ma" + "/ng/p4v1/sessionCheck";
					    } else {
							sessionCheckUrl = "https://" + storeDomainTemp + "/" + SITE_CD + "/ng/p4v1/getSessionCheck";
						}

						if(hybrisApiJson){		// jsonp -> json 으로 분기
							$.ajax({
								url : sessionCheckUrl,
								type : "GET",
								data : {
									"ssoID" : guid
								},
								dataType : "json",
								xhrFields: { withCredentials: true },
								contentType : "application/x-www-form-urlencoded",
								crossDomain : true,
								success : function(data) {
									if (callback && typeof (callback) == "function") {
										var isLogedIn = data.resultCode === "0000" ? true : false;
										
										// 스토어에서 로그인 실패면 로그아웃 처리
										if (isLogedIn == false) {
											signOut();
	
											if (popupLogin){
												saSignInGate();
											}
										}
										callback(isLogedIn);
									}
								},
								error : function(jqXHR, textStatus, errorThrown) {}
							});
						} else {
							$.ajax({
								url : sessionCheckUrl,
								type : "GET",
								dataType : "jsonp",
								data : {
									"ssoID" : guid
								},
								jsonp : "callback",
								success : function(data) {
									if (callback && typeof (callback) == "function") {
										var isLogedIn = data.resultCode === "0000" ? true : false;
										
										// 스토어에서 로그인 실패면 로그아웃 처리
										if (isLogedIn == false) {
											signOut();
	
											if (popupLogin){
												saSignInGate();
											}
										}
										callback(isLogedIn);
									}
								},
								error : function(jqXHR, textStatus, errorThrown) {}
							});
						}
					} else {
						// 스토어를 안쓰는 사이트
						/* validate 불필요하여 제외처리
						$.ajax({
							url : "/aemapi/v6/data-login/checkLogin",
							type : "POST",
							dataType : "json",
							data : {
								"siteCode" : SITE_CD
							},
							success: function(data){
								if (callback && typeof(callback) == "function") {
									isLogedIn = data.result;

									if (isLogedIn == false) {
										signOut();
									}

									callback(isLogedIn);

									if (popupLogin && !isLogedIn){
										saSignInGate();
									}
								}
							},
							error : function() {
								signOut();

								callback(false);

								if (popupLogin){
									saSignInGate();
								}
							}
						});
						*/
					}	// end USE_STORE
				} else {
					// 쿠키 있는지만 체크 하기 때문에 
					isLogedIn = true;

					if (callback && typeof(callback) == "function") {
						callback(isLogedIn);
					}
				}	// end validate
			} else {
				if (callback && typeof(callback) == "function") {
					callback(isLogedIn);

//					if (popupLogin && !isLogedIn){
					if (popupLogin){
						saSignInGate();
					}
				}
				setSignButtonText(false);
			}	// xsdcxyn
			}
			return isLogedIn;
		};

		
		function saSignInGate() {
			// Account V03 버젼 반영 2018/12/06
			if(!IS_B2B || (loginLinkURL != null && loginLinkURL != '' && IS_B2B) ){ // [P6 B2B] loginLinkURL 이 없는 경우 오류 수정
			$("#signInForm").attr("action",loginLinkURL);

			returnURL = window.location.href;
			
			var registCheckUrl = $("#redirect_uri", $signInForm).val();
			var domainTemp = "";
			var winPort = window.location.port;
			// port가 없거나 80, 8080 일 경우에는 https://로 호출
			if(winPort == null || winPort === "" || winPort === "80" || winPort === "8080"){
				domainTemp = "https://" + window.location.host;
			}else{
				domainTemp = "http://" + window.location.host;
			}
			
			if(registCheckUrl.indexOf(window.location.hostname) < 0){
				var registFullUrl = domainTemp + registCheckUrl;
				$("#redirect_uri", $signInForm).val(registFullUrl);
			}
			var glbState = "GLB" + Math.random().toString(36).substr(2,11);
			$.cookies.set("glbState", glbState, {domain : ".samsung.com"});
			
			$("#response_type", $signInForm).val("code");
			$("#countryCode", $signInForm).val($("#countryCode", $signInForm).val());
			$("#redirect_uri", $signInForm).val($("#redirect_uri", $signInForm).val());
			$("#signInState", $signInForm).val(glbState);
			$("#signInGoBackURL", $signInForm).val(returnURL);
			$('.goBackURL').val(returnURL);
			$("#scope", $signInForm).val("");

			var client_idCheck = $("#loginAccountServiceId").val();
			if(client_idCheck){
				var client_id = client_idCheck;
				$("#client_id", $signInForm).val(client_id);
			}
			var languageCodeCheck = $("#languageCode").val();
			var countryCodeCheck = $("#countryCode").val()
			if(languageCodeCheck && countryCodeCheck){
				var locale = languageCodeCheck + "_" + countryCodeCheck;
				$("#locale", $signInForm).val(locale);
			}

			$.cookies.set("returnURL", returnURL, {domain : ".samsung.com"});
			if(IS_B2B){ // 2021.04.12 B2B 로그인 추가
				$.cookies.set("dotcomReturnURL", returnURL, {domain : ".samsung.com"});
			}
			$signInForm.submit();
			
			var rememberChecked = $rememberCheck.is(":checked");

			if (rememberChecked) {
				setRememberId($.trim($idInput.val()), 7);
			} else {
				setRememberId(null, -1);
			}

			returnURL = undefined;
			}
		};

		ss.Auth.callSaSignInGate = function() {
			saSignInGate();
		};
		
		/**
		 * 유저 정보 가져오기
		 * param : callback 유저 정보 가져온 후 호출 될 함수
		 */
		ss.Auth.getUserProfile = function(callback) {
			if (!userData) {
				var xsdcxyn = $.cookies.get("xsdcxyn", { domain : ".samsung.com" });
				var snsToken = $.cookies.get("snsSessionId", { domain : ".samsung.com" });
				//2021.04.12 B2B 로그인 추가
				var xsdcbxyn = $.cookies.get("xsdcbxyn", { domain : ".samsung.com" });

				if ( (!IS_B2B && !xsdcxyn && snsToken) || (IS_B2B && !xsdcbxyn && snsToken) ) {
					// snsToken 만 있을 경우

					if(hybrisApiJson){		// jsonp -> json 으로 분기
						$.ajax({
							url : STORE_DOMAIN + "/" + STORE_SITE_CODE + "/ng/p4v1/getSnsUserInfo?snsSessionId=" + snsToken,
							type : 'GET',
							dataType : "json",
							xhrFields: { withCredentials: true },
							contentType : "application/x-www-form-urlencoded",
							crossDomain : true,
							beforeSend : function() {
							},
							success : function(data) {
								if (data) {
									var givenName = data.givenName;
									var familyName = data.familyName;
									
									userData = {
										"firstName"	: givenName,
										"lastName" : familyName
									};
								} else {
									userData = null;
								}
	
								if (callback && typeof (callback) == "function") {
									callback(userData);
								}
							},
							error : function(jqXHR, textStatus, errorThrown) {
								console.error(textStatus);
							}
						});
					} else {
						$.ajax({
							url : STORE_DOMAIN + "/" + STORE_SITE_CODE + "/ng/p4v1/getSnsUserInfo?snsSessionId=" + snsToken,
							type : 'GET',
							dataType : "jsonp",
							jsonp : "callback",
							beforeSend : function() {
							},
							success : function(data) {
								if (data) {
									var givenName = data.givenName;
									var familyName = data.familyName;
									
									userData = {
										"firstName"	: givenName,
										"lastName" : familyName
									};
								} else {
									userData = null;
								}

								if (callback && typeof (callback) == "function") {
									callback(userData);
								}
							},
							error : function(jqXHR, textStatus, errorThrown) {
								console.error(textStatus);
							}
						});
					}
				} else if(xsdcxyn && !IS_B2B) {  // V03 로그인 되었다면,, 
					setUserName(firstName + " " + lastName,true);	
									
					userData = {
						"firstName"	: firstName,
						"lastName" : lastName
					};
					
					reservationUserData = {
							"firstName" : firstName,
							"lastName" : lastName
					};
				} else if(xsdcbxyn && IS_B2B){ // 2021.04.12 B2B 로그인 추가
					var emailId = $.cookies.get("emailId",{domain:".samsung.com"});
					
					setUserName(firstName + " " + lastName,true);
					
					userData = {
						"firstName"	: firstName,
						"lastName" : lastName,
						"emailId" : emailId
					};
				} else {
					function getUserInfo() {
						console.log("get user profile Success");
						
						if(firstName != null || lastName != null) {
							
							userData = {
									"firstName"	: firstName,
									"lastName" : lastName
								};
							
							reservationUserData = {
									"firstName" : firstName,
									"lastName" : lastName
								};
							// 2021.04.12 B2B 로그인 추가
							if(IS_B2B){
								var emailId = $.cookies.get("emailId",{domain:".samsung.com"});
								var emailAddrText = $.cookies.get("emailAddrText",{domain:".samsung.com"});
								var phone = $.cookies.get("phone",{domain:".samsung.com"});
								var userAccount = $.cookies.get("userAccount",{domain:".samsung.com"});
								userData = {
									"firstName"	: firstName,
									"lastName" : lastName,
									"emailId" : emailId
								};
							
								reservationUserData = {
									"firstName" : firstName,
									"lastName" : lastName,
									"emailAddr" : emailAddrText,
									"phone" : phone,
									"userAccount" : userAccount
								};
							}
							
							// AU Hybris 6.0 // DE Hybris 6.0 // FR Hybris 6.0
							if(USE_ESTORE || isLoginWithNoStore){ /* + 비스토어 로그인 */
								if(SITE_CD === "vn"){
									setUserName(lastName,true);
								}else{
									setUserName(firstName + " " + lastName,true);
								}
							}
						} else {
							userData = null;
							// AU Hybris 6.0 // DE Hybris 6.0 // FR Hybris 6.0
							if(USE_ESTORE || isLoginWithNoStore){ /* + 비스토어 로그인 */
								setUserName("",true);
							}
						}
						
						// 왜 호출하는 거지??
						if (callback && typeof (callback) == "function") {
							callback(userData);
						}
					}

					// 2014.03.23 - ESTORE 연계 사이트일 경우 스토어 로그인이 완료 된 후 SA에 요청
					if($("#useLogin").val() === "Y"){
						if (USE_ESTORE) {
							ss.EstoreIfQueue.setQueue(getUserInfo);
						} else {
							getUserInfo();
						}
					}
				}
			} else {
				if (callback && typeof (callback) == "function") {
					callback(userData);
				}
			}
		};
		
		function saSignOutGate() {
			// Account V03 버젼 반영 2018/12/06
			$("#signOutForm").attr("action",logoutURL);

			returnURL = window.location.href;
			if($("#tempTitle").val() 
					&& ("page-my-samsung" === $("#tempTitle").val() || "page-my-products" === $("#tempTitle").val() || "page-my-rewards" === $("#tempTitle").val() || "page-my-referrals" === $("#tempTitle").val() 
							|| "page-new-my-page" === $("#tempTitle").val() || "page-new-my-products" === $("#tempTitle").val() || "page-new-my-repair" === $("#tempTitle").val() )) {
				// My Samsung Page에서 로그아웃하는 경우 ReturnUrl를 Home로 지정
				returnURL = window.location.protocol + "//" + window.location.host + '/'+SITE_CD +'/';
			}
			$.cookies.set("returnURL", returnURL, {domain : ".samsung.com"});
			if(IS_B2B){ // 2021.04.12 B2B 로그인 추가
				$.cookies.set("dotcomReturnURL", returnURL, {domain : ".samsung.com"});
				const siteCookiePath = '/'+SITE_CD+'/';
				$.cookies.del("useTaxExPriceYN", {path:siteCookiePath, domain :".samsung.com"});
				
				const smbCookiePaths = $.cookies.get("useSMBCookiePaths");
				$.cookies.del("useSMBCookiePaths", {path:'/', domain :".samsung.com"});

				if(smbCookiePaths != null){
					const pathList = smbCookiePaths.split(";");
					for(const path in pathList){
						if(pathList[path] != '' && pathList[path] != null){
							$.cookies.del("isSMBRegisteredUserYN", {path:pathList[path], domain : ".samsung.com"});
						}
					}
				} else {
					$.cookies.del("isSMBRegisteredUserYN", {path:siteCookiePath, domain : ".samsung.com"});
				}
			}
			
			var signOutURL = $("#signOutURL", $signOutForm).val();
			var domainTemp = "";
			var winPort = window.location.port;
			// port가 없거나 80, 8080 일 경우에는 https://로 호출
			if(winPort == null || winPort === "" || winPort === "80" || winPort === "8080"){
				domainTemp = "https://" + window.location.host;
			}else{
				domainTemp = "http://" + window.location.host;
			}
			
			if(signOutURL.indexOf(window.location.hostname) < 0){
				var signOutFullUrl = domainTemp + signOutURL;
				$("#signOutURL", $signOutForm).val(signOutFullUrl);
			}
			
			var glbState = "GLB" + Math.random().toString(36).substr(2,11);
			$.cookies.set("glbState", glbState, {domain : ".samsung.com"});
			$("#signOutState", $signOutForm).val(glbState);

			var client_idCheck = $("#loginAccountServiceId").val();
			if(client_idCheck){
				var client_id = client_idCheck;
				$("#client_id", $signOutForm).val(client_id);
			}

			$signOutForm.submit();

			//deleteSACookie();
			returnURL = undefined;
		};
		
		ss.Auth.signOutUs = function(goUrl){
			if (!goUrl){
				returnURL = window.location.href;
			} else {
				returnURL = goUrl;
			}
			returnURL = returnURL.escapeHtml();
			
			//deleteSignCookie();
			
			var jwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain : ".samsung.com"});

			if(jwtToken){
				$.ajax({
					headers: {
						"Cache-Control": "no-cache",
						"Content-Type": "application/json",
						"Access-Control-Allow-Origin" : "*"
					},
					url: STORE_DOMAIN + "/v1/sso/user/logout",
					type: "GET",
					dataType : "json",
					xhrFields: { withCredentials: true },
 					crossDomain: true,
 					async : false,
					beforeSend : function(xhr){
						if(multiLanguageYN === "Y"){
							xhr.setRequestHeader("x-ecom-locale", hreflang);
						}
						if(siteCode==="us"){
							xhr.setRequestHeader("x-ecom-jwt", jwtToken);
						}
					},
					success: function (data) {
						if (data.statusCode === 200 || data.statusCode === "200") {
							if(siteCode==="us"){
								$.ajax({
									headers: {
										"Cache-Control": "no-cache",
										"Content-Type": "application/json",
										"Access-Control-Request-Headers": "access-control-allow-origin",
										"Access-Control-Allow-Origin" : "*"
									},
									url: usSSOApiDomain + "/apiservices/logout",
									type: "GET",
									dataType : "jsonp",
									async : false,
									crossDomain: true,
									xhrFields: { withCredentials: true },
									success: function (data) {
										window.location.replace("/" + SITE_CD);
									},error: function(jqXHR, textStatus, errorThrown){
										console.error(textStatus);
										$.cookies.del("jwt_"+countryIsoCode, {domain : ".samsung.com"});
										window.location.replace("/" + SITE_CD);
									}
								});
							} else {
								window.location.replace("/" + SITE_CD);
							}
						}else{
							$.cookies.del("jwt_"+countryIsoCode, {domain : ".samsung.com"});
						}
					},
					error:function(jqXHR, textStatus, errorThrown){
						console.error(textStatus);
						$.cookies.del("jwt_"+countryIsoCode, {domain : ".samsung.com"});
						window.location.replace("/" + SITE_CD);
					},
					complete : function() {
						saSignOutGate();
				    }
				});
				
				$beforeLoginContext.show();
				$afterLoginContext.hide();
				
				setUserName("", false);
			}else{
				location.href = returnURL;
			}
			
			returnURL = undefined;
		};
		
		// logout for b2b us
		ss.Auth.signOutUsB2b = function(){
			var qs=window.location.search?window.location.search.substring(1).replace(/(.*)\/$/gi,'$1').split('&'):'',queries={};
			if(qs){for(var i=0;i<qs.length;i++){var tq=qs[i].split(/=(.+)/);queries[tq[0]]=tq[1];}}
			var buildApiUrl=function(){
				var dom=(document.location.host.indexOf('www.samsung.com')>-1 || (queries.env && queries.env==='prod'))?'https://ecom.us.samsung.com':'https://us.ecom-stg.samsung.com';
				return dom;
			};
			let apiUrl=buildApiUrl();
			$('html').css('cursor', 'wait');
			$.ajax({
				url: apiUrl+'/v2/sso/user/logout',
				contentType: 'application/x-www-form-urlencoded; charset=utf-8',
				type: 'GET',
				xhrFields: {
				  withCredentials: true
				},
				success: function(){
				  $.cookies.del("jwt_USA_SMB", {domain:".samsung.com"});
				  $.cookies.del("jwt", {domain:".samsung.com"});
				  $.cookies.del("b2b_prof_fname", {domain:".samsung.com"});
				  $.cookies.del("b2b_prof_lname", {domain:".samsung.com"});
				  $.cookies.del("tlgimg", {domain:".samsung.com"});
				},
				complete: function(){
				  $('html').css('cursor', 'inherit');
				  b2bUsLoginToggle();
				}
			  })
		}

		// 스토어 쪽에서 에러코드 반환시 로그아웃 처리
		// 2014.02.21 무조건 스토어에 로그아웃 요청
		//new-hybris
		ss.Auth.signOut = function(goUrl){
			if (!goUrl){
				returnURL = window.location.href;
			} else {
				returnURL = goUrl;
			}

			returnURL = returnURL.escapeHtml();
			
			//deleteSignCookie();
			// 2021.04.14 B2B 로그아웃 로직 추가
			if ((USE_ESTORE || isLoginWithNoStore || isVtexStore || IS_B2B) && estoreLive) { /* + 비스토어 로그인 */
				// AU Hybris 6.0 // DE Hybris 6.0 // LATIN Hybris 6.0 // TW Hybris 6.0 // UK Hybris 6.0 // RU Hybris 6.0 // AE Hybris 6.0 // AE_AR Hybris 6.0 // VN Hybris 6.0 // TH Hybris 6.0 // SA Hybris 6.0 // SA_EN Hybris 6.0 // NZ Hybris 6.0 // FR Hybris 6.0 // NL Hybris 6.0 // BE Hybris 6.0 // BE_FR Hybris 6.0 // SE,DK,FI,NO,AT,MY,SK,CZ Shop Integration Hybris 6.0
				//PE login
				if (SITE_CD === "au" || SITE_CD === "latin" || SITE_CD === "tw" || SITE_CD === "ru" || SITE_CD === "ae" || SITE_CD === "ae_ar" || SITE_CD === "jp"
					|| SITE_CD === "vn" || SITE_CD === "th" || SITE_CD === "sa" || SITE_CD === "sa_en" || SITE_CD === "nz" || SITE_CD === "uk"
					|| isLoginWithNoStore /* + 비스토어 로그인 */ || isVtexStore || SITE_CD === "ca" || SITE_CD === "ca_fr" || SITE_CD === "se" || SITE_CD === "dk" || SITE_CD === "fi" || SITE_CD === "no" || SITE_CD === "at" 
					|| SITE_CD === "my" || ((SITE_CD === "es" || SITE_CD === "it") && STORE_DOMAIN.indexOf("https://") > -1) || SITE_CD === "pt" || SITE_CD === "sg" || SITE_CD == "za" || SITE_CD == "hk" || SITE_CD == "hk_en" || SITE_CD == "hu" || SITE_CD == "eg"
					|| SITE_CD == "levant" || SITE_CD == "levant_ar" || SITE_CD == "n_africa" || SITE_CD == "pk" || SITE_CD == "ch" || SITE_CD == "ch_fr" || SITE_CD == "il"
					|| isNewHybris || IS_B2B){ 			//isNewHybris 추가					
					saSignOutGate();
					setMyMenu(false);
				}else{
					location.href = STORE_DOMAIN + "/" + SITE_CD + "/ng/logout?goUrl=" + encodeURIComponent(returnURL);
				}
				
			} else {
				location.href = returnURL;
			}

			returnURL = undefined;
			userData = null;
		};

		/**
		 * cart element set 
		 * cart count 가 변경 된 후 cart element 를 셋팅 해준다
		 * 
		 * param : count 가 표시 되면 true, count 가 0 이면 false
		 * 
		 */
		ss.Auth.setCartEl = function(useCartCount){

			//[EPP] UK O2O Store 일때 빈 cart 아이콘 클릭 시 cart 페이지로 이동
			let isEPPPosStore = false;
			if(IS_EPP){
				if(window.sg!= null && window.sg.epp != null && window.sg.epp.common != null){
					isEPPPosStore = window.sg.epp.common.isPosStore;
				}
			}
			
			var $cartIconEl = $('.js-global-cart-btn');
			if(useCartCount || isEPPPosStore){
				$cartIconEl.each(function(){
					if($(this).hasClass('.js-has-carturl')){
						$(this).attr("an-tr", "nv00_gnb--cart-depth1");
					}
					
				});
				$cartIconEl.removeClass("js-layer-open");
				$cartIconEl.removeAttr("data-div-id");
				
				var thisCartUrl = $cartIconEl.data("cart-url");
				$cartIconEl.attr("href", thisCartUrl);
			} else {
				$cartIconEl.addClass("js-layer-open");
				$cartIconEl.attr("data-div-id", "#layerEmptyCart");
				$cartIconEl.attr("an-tr", "nv00_gnb--text-depth1");
				$cartIconEl.attr("href", "javascript:;");
			}
			window.sg.components.gnb.reInit();
		};
		
		// Cart Count 호출
		ss.Auth.getGlobalCartCount = function(callback) {
			if (!USE_ESTORE || $.cookies.get("estoreLoginRequesting", {	domain : ".samsung.com"	}) === "Y") {
				return;
			}

			// Set Cart Count
			function setGlobalCartCount(result) {
				var useCartCount = false;
				var resultCartCount = 0;
				if((isNewHybris && SITE_CD =='uk') || IS_B2B){		//20210402  SEBN old Hybris 사용 20210408 id/ph 동일 //new-hybris
					if (result){
						result = parseInt(result);
						if(!isNaN(result) && result > 0){
							resultCartCount = result > 99 ? 99 : result; 
							useCartCount = true;
						} else {
							useCartCount = false;
						}
					} else {
						useCartCount = false;
					}
				} else {
					if (result) {
					if (result.resultCode === '0000') {
						resultCartCount = parseInt(result.cartCount) > 99 ? 99 : parseInt(result.cartCount); 
						if(resultCartCount > 0){
							useCartCount = true;
						}
					} else {
						useCartCount = false;
					}
				} else {
						useCartCount = false;
					}
				}

				if(useCartCount){
					$cartCountEl.html('<span class="hidden">' + $("#productCountText").val() + ' : </span>' + resultCartCount);
					$cartCountEl.show();
				} else {
					$cartCountEl.html('<span class="hidden">' + $("#productCountText").val() + ' : </span>0');
					$cartCountEl.hide();
				}
				
				ss.Auth.setCartEl(useCartCount);

				if (callback && typeof (callback) == "function") {
					callback(result);
				}
			}
			function getCartCountFn(isLogedIn) {
				if (isLogedIn) {
					estore.getCartCount(setGlobalCartCount);
				} else {
					//[EPP] epp 사이트일 경우 b2c의 everAddCart쿠키 삭제 
					if(IS_EPP){
						ss.cookies.del("everAddCart", {path:'/'+siteCode, domain:'.samsung.com'});
					}
					var addCartCookie = ss.cookies.get("everAddCart", { domain : ".samsung.com" });

					// AU Hybris 6.0 // DE Hybris 6.0 // LATIN Hybris 6.0 // TW Hybris 6.0 // UK Hybris 6.0 // RU Hybris 6.0 // AE Hybris 6.0 // AE_AR Hybris 6.0 // VN Hybris 6.0 // TH Hybris 6.0 // SA Hybris 6.0 // SA_EN Hybris 6.0 // NZ Hybris 6.0 // FR Hybris 6.0 // NL Hybris 6.0 // BE Hybris 6.0 // BE_FR Hybris 6.0 // SEC Hybris 6.0
					/*if (SITE_CD == "sec" || SITE_CD == "br" || SITE_CD == "au" || SITE_CD == "de" || SITE_CD == "latin" || SITE_CD == "tw" || SITE_CD == "uk" || SITE_CD == "ru" || SITE_CD == "ae" || SITE_CD == "ae_ar" || SITE_CD === "jp" || SITE_CD == "vn" || SITE_CD == "th" || SITE_CD == "sa" || SITE_CD == "sa_en" || SITE_CD == "nz" || SITE_CD == "fr" || SITE_CD == "nl" || SITE_CD == "be" || SITE_CD == "be_fr" || ((SITE_CD == "es" || SITE_CD == "it") && STORE_DOMAIN.indexOf("https://") > -1)) {
						addCartCookie = "Y";
					}*/
					if (SITE_CD === "br" || SITE_CD === "ar" || SITE_CD === "mx" || SITE_CD === "co" || SITE_CD === "py") {
						addCartCookie = "Y";
					}
					// addCartCookie 스토어 쿠키 미발급시 로직 보강 dong_won.lee
					// 스토어부하에 따라서 everAddCart 쿠키 없을시에 무조건 N 처리 - 20180829
					if(SITE_CD === 'sec'){
						if(addCartCookie === undefined || addCartCookie === null) addCartCookie = "N"; 
					}
					if (addCartCookie === "Y") {
						estore.getCartCount(setGlobalCartCount);
					} else {
						$cartCountEl.html('<span class="hidden">' + $("#productCountText").val() + ' : </span>0');
						$cartCountEl.hide();

						ss.Auth.setCartEl(false);
					}
				}
			}

			// 비로그인 시에 everAddCart cookie 값이 있을 경우에만 호출
			// 2021.04.12 B2B 로그인 추가 ( B2B cart count 미사용)
			// [EPP] epp cartCount 로직 추가
			if(IS_EPP){
				if(window.sg.epp.common.isLogged){
					getCartCountFn(true);
				} else {
					getCartCountFn(false);
				}
			} else {
				ss.Auth.checkSignIn(getCartCountFn);
			}
		};

		ss.Auth.setReturnURL = function(returnURL) {
			if (!returnURL)
				returnURL = window.location.href;
		};

		// 엘리먼트 등록
		function setElement() {
			$joinForm = $("#joinForm"); // 회원가입 폼
			$findAccountForm = $("#findAccountForm"); // find account 폼
			$signInForm = $("#signInForm"); // SA 로그인호출 폼
			$signOutForm = $("#signOutForm"); // SA 로그아웃호출 폼

			$loginLayerPopup = $("#loginLayerPopup"); // layer 팝업

			$idInput = $("#email"); // ID input
			$pwInput = $("#password"); // PW input
			$rememberCheck = $("#save-mail"); // ID 기억 체크박스
			$rememberCheckLabel = $("label[for='save-mail']"); // ID 기억 체크박스 Label

			$errorIdText = $("#errorId"); // ID error message
			$errorPwText = $("#errorPw"); // PW error message

			$signInBtn = $("input[type='submit'].sign-in__btn-submit"); // 로그인 버튼
			$signUpBtn = $(".sign-in__btn-submit__black"); // 회원가입 버튼
			$findAccountBtn = $(".sign-in__form-forgot-password a"); // Find Account 버튼

			$signToggleArrow = $('#signToggleArrow'); // social sign in? 토글 버튼

			$loginCloseBtn = $("#loginLayerPopup .login-close-btn"); // 닫기 버튼
			$loginLeaveBtn = $(".login-leave-btn"); // 닫기 버튼(클릭 시 로그아웃)

			$dimContainer = $(".layer-popup-dim--gnb"); // dim container

			/* 팝업 */
			$privacyPopup = $("#layerPrivacy"); // privacyPopup
			if(gnbUsApiUse){
				$privacyPopup = $("#layerPrivacyGPV2");
			}
			$preferencePopup = $("#layerPreference"); // preferencePopup
			$confirmPopup = $("#confirmPopup"); // confirmPopup

			$privacyBtn = $("#privacyBtn", $privacyPopup); // privacy popup YES button
			$privacyCheck1 = $("#privacy-terms", $privacyPopup); // privacy popup check1
			$privacyCheck2 = $("#privacy-terms2", $privacyPopup); // privacy popup check2
			$errorPrivacy = $("#errorPrivacy", $privacyPopup); // privacy popup error text
			
			$preferenceCheckBtn = $("#preferenceCheckBtn", $preferencePopup); // preference popup OK button
			$privacyCloseBtn = $("#privacyCloseBtn"); // privacy popup 닫기 버튼

			/* iframe */
			// $storeLoginIframe = $("#storeLoginIframe"); // storeLoginIframe
		}

		// 이벤트 등록
		function setEvent() {
			// 로그인 버튼 클릭
			$signInBtn.click(function() {
				signIn();
			});

			// 회원가입 버튼 클릭
			$signUpBtn.click(function() {
				signUp();
			});

			// find account 버튼 클릭
			$findAccountBtn.click(function() {
				findAccount();
			});

			// 닫기 버튼 클릭
			$loginCloseBtn.click(function() {
				if ($(this).closest('#loginLayerPopup').is(':visible')) {
					$('body').removeClass('gb-login-open');
					$('#loginLayerPopup .popAlign').trigger('clickoutside', 'touchstartoutside');
				}
			});

			// 닫기 버튼 클릭(로그아웃)
			$loginLeaveBtn.click(function() {
				if(SITE_CD === "es"){
					ss.Auth.signOut();
				}
				closeLayer();
				return false;
			});
			// 정책 동의 X 버튼 내용 추가(추가) :: 확인 후 제거 필요
//			$("#popup_privacy").find('button').on('click', function(){
//			  $("#layerPrivacy").attr('style', 'display:none');
//			  $("#dimContainer").html(''); 
//			})
//			
//			$("#popup_privacy").find('a.button.login-leave-btn').on('click', function(){
//			  $("#layerPrivacy").attr('style', 'display:none');
//			  $("#dimContainer").html(''); 
//			})
//			

			// Log-In 버튼 클릭
			$(document).on("click",	userLoginBtn, function(event) {
				event.preventDefault();

				if(SITE_CD === "br"){
					window.location.href = $(this).data("linkinfo");
				}else if(siteCode === 'us' && IS_B2B){
					window.location.href = $(this).data("linkinfo");
				}else if(SITE_CD === "in"){
					// To-Be : https://도메인 /in/web/login?redirect_uri={이전 방문 페이지주소}
					var returnURL = window.location.href;
					var domainTemp = window.location.protocol + "//" + window.location.host +"/in/web/login?redirect_uri="+ returnURL;
					window.location.href = domainTemp;
				}else if(gnbUsApiUse){
					ss.Auth.checkSignInUs();
				}else{
					// 로그인 체크
					ss.Auth.checkSignIn(callback);
				}
			});

			// 사용자 sign out button 클릭
			$(document).on("click",	userLogoutBtn, function(event) {
	            event.preventDefault();

				if(siteCode === 'us' && IS_B2B){
					ss.Auth.signOutUsB2b();
					return;
				}

				var _self = this;
				var url = $(_self).attr("data-return-url"); // 버튼에 명시된 return url
				if(gnbUsApiUse && !IS_B2B){
					if(runmodeInfo==="dev"){
						returnURL = window.location.protocol + "//" + window.location.host + '/content/samsung/'+ SITE_CD +'.html';
						if(IS_B2B){
							returnURL = window.location.protocol + "//" + window.location.host + '/content/samsung/'+ SITE_CD +'/business.html';
						}
					} else if(runmodeInfo==="qa"){
						returnURL = window.location.protocol + "//" + window.location.host + '/'+SITE_CD +'.html';
						if(IS_B2B){
							returnURL = window.location.protocol + "//" + window.location.host + '/'+ SITE_CD +'/business.html';
						}
					} else if(runmodeInfo==="live"){
						returnURL = window.location.protocol + "//" + window.location.host + '/'+SITE_CD +'/';
						if(IS_B2B){
							returnURL = window.location.protocol + "//" + window.location.host + '/'+ SITE_CD +'/business/';
						}
					}
					
					ss.Auth.signOutUs();
				} else {
//					if(SITE_CD !== "ca" && SITE_CD !== "ca_fr"){
						if (url != null && url !== "") {
							returnURL = url;
						} else {
							if(runmodeInfo==="dev"){
								returnURL = window.location.protocol + "//" + window.location.host + '/content/samsung/'+ SITE_CD +'.html';
								if(IS_B2B){
									returnURL = window.location.protocol + "//" + window.location.host + '/content/samsung/'+ SITE_CD +'/business.html';
								}
							} else if(runmodeInfo==="qa"){
								returnURL = window.location.protocol + "//" + window.location.host + '/'+SITE_CD +'.html';
								if(IS_B2B){
									returnURL = window.location.protocol + "//" + window.location.host + '/'+ SITE_CD +'/business.html';
								}
							} else if(runmodeInfo==="live"){
								returnURL = window.location.protocol + "//" + window.location.host + '/'+SITE_CD +'/';
								if(IS_B2B){
									returnURL = window.location.protocol + "//" + window.location.host + '/'+ SITE_CD +'/business/';
								}
							}
						}
//					}else{//for ca, ca_fr
//						window.location.href = $(this).attr("href");
//					}
	
					// 로그인 체크
					ss.Auth.checkSignIn(callback);
				}
				return false;
			});

			// 로그인 체크(checkSignIn) 중 호출
			// param : isLogedIn - 로그인 유효성 체크 후 결과
			function callback(isLogedIn) {
				// 로그인 안되어있는 경우
				if(!isLogedIn){
					saSignInGate();
				// 로그인 되어있는 경우
				}else{
					ss.Auth.signOut(returnURL);
				}
			}

			// My Samsung Button Click
			/*
			$(document).on("click",	mySamsungBtn, function(event) {
				// My Samsung 추후 변경 예정
				_satellite.setVar('account', 'my samsung:shopping support:my info');
				_satellite.track('account');

				window.location.href = "https://store.samsung.com/"+SITE_CD+"/ng/my-samsung/my-summary";
			});
			*/

			// input text focus in(id / password)
			$(".sign_input").focusin(function() {
				switch ($(this).attr("id")) {
				case $idInput.attr("id"):
					$errorIdText.hide();
					break;
				case $pwInput.attr("id"):
					$errorPwText.hide();
					break;
				default :
					break;
				}

			});

			// input text keypress (id / password)
			$(".sign-in__form-text").unbind('keydown').bind('keydown', function(e) {

				if (e.keyCode === "13") {
					e.preventDefault();

					switch ($(this).attr("id")) {
					case $idInput.attr("id"):
					case $pwInput.attr("id"):
						signIn();
						break;
					default :
						break;
					}
				}

			});

			$rememberCheck.focusin(function(e) {
				e.preventDefault();

				$rememberCheckLabel.addClass("fs-boarder");
			});

			$rememberCheck.focusout(function(e) {
				e.preventDefault();

				$rememberCheckLabel.removeClass();
			});

			// privacy popup YES button click
			$privacyBtn.click(function() {
				var privacyChecked = $privacyCheck1.is(":checked");
				var consentsIdData1, consentsIdData2;

				if (!privacyChecked) {
					$errorPrivacy.show();
					return false;
				}

				// omniture - 계정등록 완료 후 최초로그인시 팝업에서 proceed 클릭 시
				//20200319 :: _satellite 임시 주석처리 
//				_satellite.setVar('account','account:email verification');
//				_satellite.track('account');

				receiveEmailChecked = $privacyCheck2.is(":checked");

				if(consentsId.length > 0){
					consentsIdData1 = consentsId[0].id;
					if(consentsId[1] != null){
						consentsIdData2 = consentsId[1].id;
					}
				}
				
				if (!policyCheckSite) {
					if(gnbUsApiUse){
						// 2018.11.30 us shop 정책동의 변경
						var data = "";
						var accept_1 = $privacyCheck1.is(":checked") ? true : false;
						var accept_2 = (consentsIdData2 != null) ? ($privacyCheck2.is(":checked") ? true : false) : false;
						
						if ( SITE_CD === "in" ) {
							data = {
								"terms_and_conditions": {
									"is_accepted": accept_1
								},
								"email_consent": accept_2
							};	
						} else {
							data = '{"consents": {"'+consentsIdData1+'" : {"is_accepted" : '+accept_1+'}';
							if(consentsIdData2 != null){
								data += ',"'+consentsIdData2+'" : {"is_accepted" : '+accept_2+'}';
							}
							data += '}}';
						}
						return updateUsAgreePolicy(data);
					}else {
						return updateAgreePolicy();
					}
				} else {
					// cookie set
					$.cookies.set('shopPrivacyPolicyAgreeYN', 'Y', {
						domain : ".samsung.com"
					});
					return init();
				}
			});

			// privacy policy checkbox change
			$privacyCheck1.change(function() {
				$errorPrivacy.hide();
			});

			// preference popup OK button click
			$preferenceCheckBtn.click(function() {
				if(newShopCountryYN === "Y"){
					if(gnbUsApiUse){
						// US Profile Url
						$("#accountModifyForm").attr("target", "");
						$("#accountModifyForm").submit();
					}else{
					window.location.href = myAccountUrl;
					}
				}else{
					if(updateProfileUrl != null && updateProfileUrl !== ""){
						if(SITE_CD === "ca" || SITE_CD === "ca_fr"){
							var prof_id = $.cookies.get("prof_id", {domain : ".samsung.com"});
							var prof_country = $.cookies.get("prof_country", {domain : ".samsung.com"});
							
							//https://support-ca.samsung.com/seca/myaccount/ap/premodify/go?prof_id=a66c80da93091c360a437bfb5c71e70d99bab76b031d9b580067d4966d972fc2&lang=ca&page=myaccount
							window.location.href = "https://support-ca.samsung.com/seca/myaccount/ap/premodify/go?prof_id=" + prof_id + "&lang=" + prof_country + "&page=myaccount"
						}else{
							window.location.href = STORE_DOMAIN + updateProfileUrl;
						}
					}else if(IS_B2B){
						window.location.href = storeWebDomain + "/ng/my-samsung/updatemyprofile";
					}else{
						window.location.href = STORE_DOMAIN + "/" + SITE_CD + "/ng/my-samsung/updatemyprofile";
					}
				}
			});

			$privacyCloseBtn.click(function() {
				if ($(this).closest('#layerPreference').is(':visible')) {
					$(this).closest('#layerPreference').hide();
					$dimContainer.hide();
				}
			});

			$signToggleArrow.click(function() {
				$('.icon-down-arrow', $loginLayerPopup).toggleClass('icon-up-arrow');
			});
		}

		function isShopApp() {
			if (typeof window !== 'undefined')
			{
				return (!!(window.EcommAndroidClient || window.flutter_inappwebview));
			}
			return false;
		}

		//[EPP] setUserName, cartcount, 로그인/로그아웃 버튼 처리 
		function initEpp(){
			if(window.sg.epp == null){
				window.sg.epp = {};
				window.sg.epp.common = {};
			}

			const isEppLogged = window.sg.epp.common.isLogged;
			const eppJwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});

			function setEppCartCount(){
				if(gnbUsApiUse){
					var headers = {
							"Cache-Control" : "no-cache",
							"Content-Type" : "application/json",
							"Access-Control-Allow-Origin" : "*"
					};
					
					if( siteCode === 'in' ){
						if (window && window.EcommAndroidClient) { 
							headers['x-ecom-app-id'] ="samsung-mobile-app";
						}
						/*
						if(isShopApp()) {
							headers['x-ecom-app-id'] = "samsung-mobile-app";
						}
						*/
						if (isShopApp()) {
							var ua = navigator.userAgent && navigator.userAgent.toLowerCase();
							var xEcomAppId;
							if (ua.indexOf('android') > -1)
							{
								xEcomAppId = 'samsung-mobile-app'; //for android we will send "samsung-mobile-app"
							}
							else
							{
								xEcomAppId = 'samsung-mobile-app-ios'; //for ios we will send "samsung-mobile-app-ios"     
							}
							headers['x-ecom-app-id'] = xEcomAppId;
						}
					}
					
					$.ajax({
						headers: headers,
						url: STORE_DOMAIN + "/v4/shopping-carts/",
						type: "POST",
						data: JSON.stringify ({}),
						dataType : "json",
						xhrFields : {
							withCredentials: true
						},
						beforeSend : function(xhr){
							/* jwtToken 있으면  헤더값 추가 */
							if(eppJwtToken != null && eppJwtToken != ""){
								xhr.setRequestHeader("x-ecom-jwt", eppJwtToken);
							}
						},
						success: function(){
							var usCartCount = $.cookies.get("s_ecom_sc_cnt", {domain : ".samsung.com"});
							if(usCartCount != null && usCartCount !== ""){
								if(usCartCount === 0){
									$cartCountEl.hide();
								}else {
									$cartCountEl.show();
								}
								$cartCountEl.html('<span class="hidden">' + $("#productCountText").val() + ' : </span>' + usCartCount);
							}
						}
					});
				} else {
					ss.Auth.getGlobalCartCount();
				}
			};
			
			//Partner Bar Exit  버튼 클릭 이벤트
			$('.js-epp-partner-bar-exit').on("click", function(){
				window.sg.epp.common.signOut(true);
			});

			if(isEppLogged){
				if(!window.sg.epp.common.isExternalSSO && firstName && lastName) {
					setUserName(firstName + " "+lastName, true, false);
				} else {
					setUserName(window.sg.epp.common.tempUserName, true, false);
				}
				setEppCartCount();
				$beforeLoginContext.hide();
				$afterLoginContext.show();

				$(document).on("click",	userLogoutBtn, function(event) {
					event.preventDefault();
	
					window.sg.epp.common.signOut();
				});

			} else {
				$beforeLoginContext.show();
				$afterLoginContext.hide();
				
				setEppCartCount();

				$(document).on("click", userLoginBtn, function(event) {
					event.preventDefault();
					window.sg.epp.common.signIn();
				});
			}
		};

		function initUs(xsdcxyn) {
			if(xsdcxyn){
				// sa login
				jwtTokenInit(xsdcxyn);
			}else{
				// otp login
				jwtTokenInit();
			}
		};
		
		function checkUsPreferences( jwtToken ) {
			// 2018.11.30 us shop 정책동의 spec 변경
			var isAccepted = true, apiUrl;

			if(SITE_CD !== "in") {
				apiUrl = STORE_DOMAIN + "/v4/identity/preferences?display_context=pre_purchase";
			}else{
				apiUrl = STORE_DOMAIN + "/v4/identity/preferences";
			}

			$.ajax({
				headers: {
					"Cache-Control": "no-cache",
					"Content-Type": "application/json",
					"Access-Control-Allow-Origin" : "*",
					"x-ecom-app-id" : "identity-store",
					"x-ecom-jwt" : jwtToken
					},
					url: apiUrl,
					type: "GET",
					dataType : "json",
					cache : true,
					xhrFields : {
						withCredentials: true
					},
					beforeSend : function(xhr){
						if(multiLanguageYN === "Y"){
							xhr.setRequestHeader("x-ecom-locale", hreflang);
						}
						
					},
					success: function (data) {
						if(data != null && data !== ""){
							if(SITE_CD === "pl"){ // pl 스토어 정책 동의 팝업 제거
								isAccepted = true;
							}else if(SITE_CD === "in"){
								if(data.terms_and_conditions.is_accepted !== true){
									isAccepted = false;
								}
							}else{
								if(data.consents != null && data.consents !== ""){
									consentsId = new Array(data.consents.length);
									for(var i = 0; i < data.consents.length; i++){
										var tempConsents = data.consents[i];
										consentsId[i] = tempConsents;
										if(tempConsents.data.is_required === true && tempConsents.is_accepted !== true){
											isAccepted = false;
										}
									}
								}
							}
							if(isAccepted === false){
								closeLayer();
								
								if (inMyGalaxyAppflag === "Y" || SITE_CD === "de"){
									$showLayer = null; // in이면서 user-agent 정보중에 MyGalaxy 또는 SamsungShopSDK 라는 string이 있는 경우 팝업을 띄우지 않음
								} else {
									$showLayer = $privacyPopup;
								}
								
								popupLayer();
							}
						}
					},
					error:function(jqXHR, textStatus, errorThrown){
						console.error(textStatus);
					}
			});
		}

function jwtTokenInit(xsdcxyn){
			
			var jwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
			var failLogin = function(){
				//20200319 :: _satellite 임시 주석처리 
//				_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "28");
//				_satellite.track("account");

				deleteSignCookie();
				deleteSACookie();
				
				$loginValidateYnForGPv2.val("N");
			};
			
			var getSAInfo = function(newJwtToken){
				// 새로 발급 받은 jwt cookie 유효성 체크
				var validateParamObj = {"jwt": newJwtToken};
				//us 국가 만 있음
				if(siteCode==="us"){
					var epp_verified = $.cookies.get("epp_verified",{domain:".samsung.com"});
					
					var tmktid = $.cookies.get("tmktid",{domain:".samsung.com"});
					var validateStoreId = $.cookies.get("store_id", {domain:".samsung.com"});
					
					if(epp_verified != null){
						epp_verified = epp_verified.toString();
						if(epp_verified=="true" && tmktid != null && tmktid != ''){
							validateParamObj["store_id"] = tmktid.toString();
						} else if(validateStoreId != null && validateStoreId != ""){
							validateParamObj["store_id"] = validateStoreId.toString();
						}
					}
					
					
				}
				var isJwtDetailsUse = false;

				$.ajax({
					headers: {
					"Cache-Control": "no-cache",
					"Content-Type": "application/json",
					"Access-Control-Allow-Origin" : "*"
					},
					url: STORE_DOMAIN + "/v1/sso/user/validate",
	    			type: "POST",
		    		dataType : "json",
			    	data: JSON.stringify (validateParamObj),
//					    async: false,
					xhrFields : {
						withCredentials: true
					},
					beforeSend : function(xhr){
						if(multiLanguageYN === "Y"){
							xhr.setRequestHeader("x-ecom-locale", hreflang);
						}
					},
				    success: function (data) {
					    if ( data.statusCode === 200 || data.statusCode === "200" ) {
					    	var validaJwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
					    	$loginValidateYnForGPv2.val("Y");
					    	
							var initSignin = function() {
							  if ($.cookies.get('remoteId')) {
							      // user logged in
							      if ($.cookies.get('tppid') && $.cookies.get('tmktname')) {
							          // user is epp user
							          var tlgImg = $.cookies.get('tlgimg');
							          if(tlgImg) {
							            var eppIcon = $('<img src="' + tlgImg + '">');
							            $('.epp-bar-logo').append(eppIcon);
							          }
							          var eppStoreName = $.cookies.get('tmktname') + ' Store';
							          $('.epp-bar-username').text(eppStoreName);
							          if ($.cookies.get('tppid') === '16568500') {
							              $('.gnb__utility-link.sea').removeClass('hidden');
							          }
							        $(".epp-bar-wrap").show();
							      }
							  } else {
							    if ($.cookies.get("tppid")) {
							      var mkt=$.cookies.get("remoteId");
							      var timg=$.cookies.get("tlgimg");
							      var tname=$.cookies.get("tmktname");
							      if($.cookies.get("remoteId")){
							        var uname=$.cookies.get("prof_fname")&&$.cookies.get("prof_fname")?$.cookies.get("prof_fname"):$.cookies.get("tmktname");
							        $(".epp-bar-logo img").remove();
							        if(timg) {
							            $(".epp-bar-logo").append('<img src="'+timg+'"/>');
							        }
							        if(uname!="null"){
							          $(".epp-bar-msg").html('Welcome to the <div class="epp-bar-username">'+tname+' Store'+'.</div> Please enjoy our special offers for you');
							        }else{
							          $(".epp-bar-msg").html('Welcome <div class="epp-bar-username">'+tname+'!</div> Please <div class="epp-bar-username"><a href="#" id="openLogin">login</a></div> to enjoy our special offers for you');
							        }
							        $(".epp-bar-wrap").slideDown();

							      }else if($.cookies.get("remoteId") && $.cookies.get("tmktid")==="4145500" && $.cookies.get("tppid")==="17593200"){
							          $(".epp-bar-logo img").remove();
							          if(timg) {
							            $(".epp-bar-logo").append('<img src="'+timg+'"/>');
							          }
							          $(".epp-bar-msg").html("Welcome to Samsung's Friends and Family Store! Enjoy special pricing. Please <div class='epp-bar-username'><a href='#' id='openLogin' style='font-size:12px;'>login/signup</a></div> to make a purchase.");
							          $(".epp-bar-wrap").slideDown();
							      }else{
							        $(".epp-bar-logo img").remove();
							        if(timg) {
							            $(".epp-bar-logo").append('<img src="'+timg+'"/>');
							        }
							        $(".epp-bar-msg").html('Welcome to the <div class="epp-bar-username" style="color:#1428a0;">'+tname+' Store'+"!</div> Please <div class='epp-bar-username' style='color:#1428a0;'><a href='#' id='openLogin' style='color:#1428a0;'>login</a></div> to enjoy our special pricing.");

							        $(".epp-bar-wrap").slideDown();
							      }
							    }else{
							      $(".epp-bar-wrap").hide();
							    }
							  }
							}
							// check if it is US pages
							if(window.location.href.indexOf('/us/')> -1) {
								initSignin();
							}
							
							var headers = {
									"Cache-Control" : "no-cache",
									"Content-Type" : "application/json",
									"Access-Control-Allow-Origin" : "*",
									"x-ecom-jwt" : validaJwtToken
							};
							
							if( siteCode === 'in' ){
								if (window && window.EcommAndroidClient) { 
									headers['x-ecom-app-id'] ="samsung-mobile-app";
								}
								/*
								if(isShopApp()) {
									headers['x-ecom-app-id'] = "samsung-mobile-app";
								}
								*/
								if (isShopApp()) {
									var ua = navigator.userAgent && navigator.userAgent.toLowerCase();
									var xEcomAppId;
									if (ua.indexOf('android') > -1)
									{
										xEcomAppId = 'samsung-mobile-app'; //for android we will send "samsung-mobile-app"
									}
									else
									{
										xEcomAppId = 'samsung-mobile-app-ios'; //for ios we will send "samsung-mobile-app-ios"     
									}
									headers['x-ecom-app-id'] = xEcomAppId;
								}
							}
							
					    	$.ajax({
				    		headers: headers,
						    url: STORE_DOMAIN + "/v4/shopping-carts/",
			    			type: "POST",
				    		dataType : "json",
                            data: JSON.stringify ({}),
//							    async: false,
							xhrFields : {
								withCredentials: true
							},
							beforeSend : function(xhr){
								if(multiLanguageYN === "Y"){
									xhr.setRequestHeader("x-ecom-locale", hreflang);
								}
							},
							success: function(){
								var usCartCount = $.cookies.get("s_ecom_sc_cnt", {domain : ".samsung.com"});
								if(usCartCount != null && usCartCount !== ""){
									if(usCartCount === 0){
										$cartCountEl.hide();
									}else {
										$cartCountEl.show();
									}
									$cartCountEl.html('<span class="hidden">' + $("#productCountText").val() + ' : </span>' + usCartCount);
								}
							}
					    	});
					    	if ( data.user_info.firstname != null && data.user_info.firstname !== "" ) {
					    		$beforeLoginContext.hide();
								$afterLoginContext.show();

								setUserName(data.user_info.firstname + " " + data.user_info.lastname,true);
						    }else{
						    	$.ajax({
						    		headers: {
								         "Cache-Control": "no-cache",
								         "Content-Type": "application/json",
								         "Access-Control-Allow-Origin" : "*"
						    		},
								    url: STORE_DOMAIN + "/v1/sso/jwt/details",
					    			type: "POST",
						    		dataType : "json",
							    	data: JSON.stringify ({"jwt": validaJwtToken}),
//									    async: false,
									xhrFields : {
										withCredentials: true
									},
									beforeSend : function(xhr){
										if(multiLanguageYN === "Y"){
											xhr.setRequestHeader("x-ecom-locale", hreflang);
										}
									},
								    success: function (data) {
								    	if(data != null && data !== ""){
								    		if ( data.user_info.firstname != null && data.user_info.firstname !== "" ) {
								    			$beforeLoginContext.hide();
  												$afterLoginContext.show();
  												setUserName(data.user_info.firstname + " " + data.user_info.lastname,true);
										    }else{
										    	$beforeLoginContext.hide();
  												$afterLoginContext.show();
  												setUserName("User",true);
										    }
											isJwtDetailsUse = true;
											login_user_info.user_info = data.user_info;
                                            login_user_info.login_type = data.login_type;
                                            login_user_info.user_identity = data.user_identity;
								    	 }
								     }
						    	 });
						    }
							//in인경우 detail user info 
                            if(siteCode === "in" && !isJwtDetailsUse){
                                $.ajax({
                                    headers: {
                                         "Cache-Control": "no-cache",
                                         "Content-Type": "application/json",
                                         "Access-Control-Allow-Origin" : "*"
                                    },
                                    url: STORE_DOMAIN + "/v1/sso/jwt/details",
                                    type: "POST",
                                    dataType : "json",
                                    data: JSON.stringify ({"jwt": valideJwtToken}),
								  //async: false,
                                    xhrFields : {
                                        withCredentials: true
                                    },
                                    beforeSend : function(xhr){
                                        if(multiLanguageYN === "Y"){
                                            xhr.setRequestHeader("x-ecom-locale", hreflang);
                                        }
                                    },
                                    success: function (data) {
                                        if(data != null && data !== ""){
                                            login_user_info.user_info = data.user_info;
                                            login_user_info.login_type = data.login_type;
                                            login_user_info.user_identity = data.user_identity;
								    	 }
								     }
						    	 });
						    }
						    // 정책동의 여부 체크
					    	// 2018.11.30 us shop 정책동의 spec 변경
					    	checkUsPreferences( newJwtToken );
					    } else {
					    	$.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
					    	// hide US EPP when invalid;
					    	$('.epp-bar-wrap').hide();
					    	failLogin();
					    }
				    },
				    error:function(jqXHR, textStatus, errorThrown){
				    	console.error(textStatus);
					    $.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
					    failLogin();
				    }
			    });
			};
			var reDCheck = function(){
				$.ajax({
					url: "/aemapi/v6/data-login/callSALogin."+siteCode+".json",
					type: "GET",
					dataType : "json",
					success: function (data) {

						var newJwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
						
				    	// 로그인 태깅용 함수 호출 - directCallFlv2 == N인 경우만
						callGAdirect();
						if(data.statusCode===200 && data.redCookieChk==="Y"){
							if ( newJwtToken ) {
								getSAInfo(newJwtToken);
  							} else {
							    failLogin();			
  							}
						} else if (data.redCookieChk === "N" && xsdcxyn){
							deleteSignCookie();
							deleteSACookie();
							
		                	saSignInGate();
		                } else {
		                	failLogin();
		                }
						
					},
					error:function(jqXHR, textStatus, errorThrown){
						console.error(textStatus);
					    failLogin();
					}
				});
			};
			
			if (jwtToken) {
				var validateParamObj = {"jwt": jwtToken};
				//us 국가 만 있음
				var isUSEppGuestUser = false;
                var isJwtDetailsUse = false;
				if(siteCode==="us"){
					var epp_verified = $.cookies.get("epp_verified",{domain:".samsung.com"});
					
					var tmktid = $.cookies.get("tmktid",{domain:".samsung.com"});
					var validateStoreId = $.cookies.get("store_id", {domain:".samsung.com"});
					
					if(epp_verified != null){
						epp_verified = epp_verified.toString();
						if(epp_verified=="true" && tmktid != null && tmktid != ''){
							validateParamObj["store_id"] = tmktid.toString();
						} else if(validateStoreId != null && validateStoreId != ""){
							validateParamObj["store_id"] = validateStoreId.toString();
						}
					}
					
					// [US] epp guest user 체크
					$.ajax({
			    		headers: {
					         "Cache-Control": "no-cache",
					         "Content-Type": "application/json",
					         "Access-Control-Allow-Origin" : "*"
			    		},
					    url: STORE_DOMAIN + "/v1/sso/jwt/details",
		    			type: "POST",
		    			async: false,
			    		dataType : "json",
			    		data: JSON.stringify ({"jwt": jwtToken}),
						xhrFields : {
							withCredentials: true
						},
					    success: function (data) {
					    	if(data != null && data !== "" && data.login_type != null && (data.login_type === "guest_epp_store"|| data.login_type === "referral_url")){
					    		isUSEppGuestUser = true;
					    		$.cookies.set("isUSGuestUser", "Y");
					    		$.cookies.del("snsSessionId");
					    		$.cookies.del("snsSessionId", {path:'/', domain:'.samsung.com'});
					    		$.cookies.del("isStoreLogedIn");
					    		$.cookies.del("sa_em");
					    		$.cookies.del("sa_em", {path:'/', domain:'.samsung.com'});
					    		$.cookies.del("eVar67");
					    		$.cookies.del("eVar67", {path:'/', domain:'.samsung.com'});
					    		$.cookies.del("lastName",{domain:".samsung.com"});
					    		$.cookies.del("firstName",{domain:".samsung.com"});
					    		$.cookies.del("guid",{domain:".samsung.com"});
					    		$.cookies.del("ReD",{domain:".samsung.com"});
					    		$.cookies.del("directCallFl",{expires: null, domain : ".samsung.com"});
					    		$.cookies.del("directCallFlv2",{expires: null, domain : ".samsung.com"});
					    		$.cookies.del("returnURL",{domain:".samsung.com"});
					    		$.cookies.del("mVal10",{domain:".samsung.com"});
					    		$.cookies.del("mVal11",{domain:".samsung.com"});
					    		$.cookies.del("flpe",{domain:".samsung.com"});

					    		deleteLoginRequestCookie();
					    		deleteSACookie();
					    		
					    		$loginValidateYnForGPv2.val("N");
					    	 } else {
					    		$.cookies.set("isUSGuestUser", "N");
					    	 }
					     }
			    	 });
				}
				if(!isUSEppGuestUser){
					// jwt cookie 가 있으면 유효성 체크
				    $.ajax({
					    headers: {
					          "Cache-Control": "no-cache",
					          "Content-Type": "application/json",
					          "Access-Control-Allow-Origin" : "*"
			            },
					    url: STORE_DOMAIN + "/v1/sso/user/validate",
		    			type: "POST",
			    		dataType : "json",
				    	data: JSON.stringify (validateParamObj),
//					    async: false,
						xhrFields : {
							withCredentials: true
						},
						beforeSend : function(xhr){
							if(multiLanguageYN === "Y"){
								xhr.setRequestHeader("x-ecom-locale", hreflang);
							}
						},
					    success: function (data) {
						    if ( data.statusCode === 200 || data.statusCode === "200" ) {
						    	var valideJwtToken = $.cookies.get("jwt_"+countryIsoCode, {domain:".samsung.com"});
						    	$loginValidateYnForGPv2.val("Y");
						    	// 로그인 태깅용 함수 호출 - directCallFlv2 == N인 경우만
								callGAdirect();
						    	
						    	if ( data.user_info.firstname != null && data.user_info.firstname !== "" ) {
						    		$beforeLoginContext.hide();
									$afterLoginContext.show();
									
									var guid = $.cookies.get("guid",{domain:".samsung.com"});
									if(fnIsNull(guid)){ // otp login user
										setUserName(data.user_info.firstname + " " + data.user_info.lastname,true, true);
									} else {
										setUserName(data.user_info.firstname + " " + data.user_info.lastname,true);
									}
							    }else{
							    	$.ajax({
							    		headers: {
									         "Cache-Control": "no-cache",
									         "Content-Type": "application/json",
									         "Access-Control-Allow-Origin" : "*"
							    		},
									    url: STORE_DOMAIN + "/v1/sso/jwt/details",
						    			type: "POST",
							    		dataType : "json",
								    	data: JSON.stringify ({"jwt": valideJwtToken}),
//									    async: false,
										xhrFields : {
											withCredentials: true
										},
										beforeSend : function(xhr){
											if(multiLanguageYN === "Y"){
												xhr.setRequestHeader("x-ecom-locale", hreflang);
											}
										},
									    success: function (data) {
									    	if(data != null && data !== ""){
									    		if ( data.user_info.firstname != null && data.user_info.firstname !== "" ) {
									    			$beforeLoginContext.hide();
	  												$afterLoginContext.show();
	  												setUserName(data.user_info.firstname + " " + data.user_info.lastname,true, true);
											    }else{
											    	$beforeLoginContext.hide();
	  												$afterLoginContext.show();
	  												setUserName("User",true, true);
											    }
												isJwtDetailsUse = true;
                                                login_user_info.user_info = data.user_info;
                                                login_user_info.login_type = data.login_type;
                                                login_user_info.user_identity = data.user_identity;
									    	 }
									     }
							    	 });
							    }
                                //in인경우 detail user info 
                                if(siteCode === "in" && !isJwtDetailsUse){
                                    $.ajax({
                                        headers: {
                                             "Cache-Control": "no-cache",
                                             "Content-Type": "application/json",
                                             "Access-Control-Allow-Origin" : "*"
                                        },
                                        url: STORE_DOMAIN + "/v1/sso/jwt/details",
                                        type: "POST",
                                        dataType : "json",
                                        data: JSON.stringify ({"jwt": valideJwtToken}),
//                                      async: false,
                                        xhrFields : {
                                            withCredentials: true
                                        },
                                        beforeSend : function(xhr){
                                            if(multiLanguageYN === "Y"){
                                                xhr.setRequestHeader("x-ecom-locale", hreflang);
                                            }
                                        },
                                        success: function (data) {
                                            if(data != null && data !== ""){
                                                login_user_info.user_info = data.user_info;
                                                login_user_info.login_type = data.login_type;
                                                login_user_info.user_identity = data.user_identity;
									    	 }
									     }
							    	 });
							    }
						    	// 정책동의 여부 체크
						    	// 2018.11.30 us shop 정책동의 spec 변경
						    	checkUsPreferences( jwtToken );
						    }else{
//						    	$.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});

						    	reDCheck();
						    }
					    },
					    error:function(jqXHR, textStatus, errorThrown){
						    console.error(textStatus);
						    console.log(jqXHR);
						    
						    //2019.10.10 epp jwt 토큰 쿠키 삭제 방지 로직 추가
						    if(jqXHR.responseJSON == undefined || jqXHR.responseJSON.error !== "StoreIdNotPresent"){
//							    $.cookies.del("jwt_"+countryIsoCode, {domain:".samsung.com"});
						    	reDCheck();
						    } else {
						    	$loginValidateYnForGPv2.val("N");
						    }
					    }
				    });
				}
		    } else {
		    	// sa login 일 경우 jwt cookie 가 유효 하지 않으면 cookie 재발급
 		    	if(xsdcxyn){
			    	reDCheck();
		    	} else {
		    		$loginValidateYnForGPv2.val("N");
		    	}
		    }
		    
		}
		
		// 초기화
		//new-hybris
		function init() {
			var useLogin = (!IS_B2B || (IS_B2B && $("#useLogin").val() == "Y" && loginLinkURL != null && loginLinkURL != '')) ? true : false;
			// 토큰 값이 있을 경우 로그인 되었다고 판단해서 아이콘의 text 변경
			//var token = $.cookies.get("iPlanetDirectoryPro", {domain : ".samsung.com"});
			var snsSessionId = $.cookies.get("snsSessionId", {domain : ".samsung.com"});
			var xsdcxyn = $.cookies.get("xsdcxyn", {domain : ".samsung.com"});
			// 2021.04.12 B2B 로그인 추가
			var xsdcbxyn = $.cookies.get("xsdcbxyn", {domain : ".samsung.com"});
			
			
			// estoreLoginRequesting 쿠키 값이 있으면 로그인 요청
			var estoreLoginRequesting = $.cookies.get("estoreLoginRequesting", {domain : ".samsung.com"}) === "Y" ? true : false;
			
			// 쿠키에 저장된 ID 가져오기
			getRememberId();
			
			// 로그인 태깅용 함수 호출 - directCallFlv2 == N인 경우만
			callGAdirect();
			
			// mx, co mobile 페이지 이슈로 먼저 초기화 수행(임시)
			$beforeLoginContext.show();
			$afterLoginContext.hide();

			// 닷컴에서 로그인처리된 경우(YG) => 로그인아이콘 및 이름 표시
			// 2021.04.12 B2B 로그인 추가
			if(useLogin){
			if ((!IS_B2B && (xsdcxyn === "YG" || xsdcxyn === "YH") && firstName && lastName) || (IS_B2B && xsdcbxyn && firstName && lastName)) {
				if (USE_ESTORE && !isVtexStore) {
					var exceptionReferrerDomain = false;

					if (!estoreLoginRequesting) {
						var exceptionDomains = [".samsung.com"];

						for (var i = 0; i < exceptionDomains.length; i++) {
							if (document.referrer.indexOf(exceptionDomains[i]) > -1) {
								exceptionReferrerDomain = true;
								break;
							}
						}

						// ex) www.samsung.com/uk 로 접속 시 home으로 리다이렉팅 되어서 이전 페이지가 samsung.com 페이지가 되기 때문에 이 경우에 예외 처리
						if (exceptionReferrerDomain) {
							var dotcomSites = ["www.samsung.com", "dev.samsung.com", "p4.samsung.com", "stgweb4.samsung.com", "ptcweb4.samsung.com", "local.dev.my.eu.samsung.com", "dev.my.eu.samsung.com", "stg.my.eu.samsung.com", "my.eu.samsung.com","www.eumysamsung.com","stg-account.samsung.com","account.samsung.com", "local.sec.samsung.com", "dev-aem.samsung.com", "stg-aem.samsung.com", "itg-aem.samsung.com", "aem.samsung.com", "org-aem.samsung.com", "qaweb.samsung.com", "org-qaweb.samsung.com", "org-ap.samsung.com","org-eu.samsung.com", "org-aem-eu.samsung.com", "aem-eu.samsung.com", "org-qashop.samsung.com", "qashop.samsung.com", "pre-qa.samsung.com", "pre-qa2.samsung.com", "p6-pre-qa.samsung.com", "p6-pre-qa2.samsung.com"];
							var refererPage = document.referrer.replace(/http(s)?:\/\//, "");
							var indexPage = "";
							for (var j = 0; j < dotcomSites.length; j++) {
								if (SITE_CD === "es" || SITE_CD === "latin" || SITE_CD === "tw" || SITE_CD === "ru" || SITE_CD === "ae" || SITE_CD === "ae_ar" || SITE_CD === "jp" || SITE_CD === "uk"
									|| SITE_CD === "vn" || SITE_CD === "th" || SITE_CD === "sa" || SITE_CD === "sa_en" || SITE_CD === "nz" || SITE_CD === "it"
									|| SITE_CD === "au" || SITE_CD === "cn" || SITE_CD === "ca" || SITE_CD === "ca_fr" || SITE_CD === "se" || SITE_CD === "dk" || SITE_CD === "fi" || SITE_CD === "no" || SITE_CD === "at" 
									|| SITE_CD === "my" || SITE_CD === "pt" || SITE_CD === "sg" || SITE_CD == "eg" || SITE_CD == "levant" || SITE_CD == "levant_ar" || SITE_CD == "za" || SITE_CD == "hk" || SITE_CD == "hk_en" || SITE_CD == "hu"
									|| SITE_CD == "n_africa" || SITE_CD == "pk" || SITE_CD == "ch" || SITE_CD == "ch_fr" || SITE_CD == "il"
									|| isNewHybris || IS_B2B) {					//new-hybris
									if(dotcomSites[j] === "account.samsung.com" || dotcomSites[j] === "stg-account.samsung.com"){
										indexPage = dotcomSites[j] + "/";
									}else{
										indexPage = dotcomSites[j] + "/" + SITE_CD + "/";
									}

									if (refererPage.indexOf(indexPage) > -1 && $.cookies.get("isStoreLogedIn") !== "Y") {
										exceptionReferrerDomain = false;
										break;
									}
								} else {
									indexPage = dotcomSites[j] + "/" + SITE_CD + "/";

									if (indexPage.indexOf(refererPage) > -1 && $.cookies.get("isStoreLogedIn") !== "Y") {
										exceptionReferrerDomain = false;
										break;
									}
								}
							}
						}
					}

					// 외부에서 접속 시 스토어 로그인 요청
					if (!exceptionReferrerDomain) {
						// Store Login 후 콜백 함수
						nextGenLoginResult = function(data) {

							// 자격 제한 유저
							if (data.resultCode !== "0000") {
								// blacklist 일 경우
								if (data.resultCode === "903" || data.resultCode === 903) {
									popupLayer("BA");
								} else {
									if (data.customerStatus)
										popupLayer(data.customerStatus);
									else
										popupLayer("UK");
								}

								// estoreLoginRequesting 쿠키 삭제
								deleteLoginRequestCookie();

								return;
							}

							// 처음 접속 유저
							// AU, DE, LATIN, TW, UK, RU, AE, AE_AR, VN, TH, SA, SA_EN, NZ, FR, NL, BE, BE_FR, SE,DK,FI,NO,AT,MY,SK,CZ Shop Integration Hybris 6.0
							if ((!data.hasAddInfo && (SITE_CD === "au" || SITE_CD === "latin" || SITE_CD === "tw" || SITE_CD === "ru" 
								|| SITE_CD === "ae" || SITE_CD === "ae_ar" || SITE_CD === "jp" || SITE_CD === "vn" || SITE_CD === "th" || SITE_CD === "sa" || SITE_CD === "sa_en" || SITE_CD === "nz"
								|| SITE_CD === "ca" || SITE_CD === "ca_fr" || SITE_CD === "uk"
								|| SITE_CD === "se" || SITE_CD === "dk" || SITE_CD === "fi" || SITE_CD === "no" || SITE_CD === "at" || SITE_CD === "my"
								|| SITE_CD === "pt" || SITE_CD === "sg" || SITE_CD == "eg" || SITE_CD == "levant" || SITE_CD == "levant_ar" || SITE_CD == "za" || SITE_CD == "hk" || SITE_CD == "hk_en" || SITE_CD == "hu"
								|| SITE_CD == "n_africa" || SITE_CD == "pk" || SITE_CD == "ch" || SITE_CD == "ch_fr" || SITE_CD == "il"
								|| isNewHybris || IS_B2B								//new-hybris
								|| ((SITE_CD === "es" || SITE_CD === "it") && STORE_DOMAIN.indexOf("https://") > -1))) || (!data.hasAddInfo && SITE_CD !== "cn")) {
								if (policyCheckSite) {
									// 2014.06.13 스페인 요청으로 스토어 로그인 요청하기전 정책 동의 프로세스 변경
									updateAgreePolicy();
								} else {
									if (inMyGalaxyAppflag === "Y" || SITE_CD === "de"){
										$showLayer = null; // in이면서 user-agent 정보중에 MyGalaxy 또는 SamsungShopSDK 라는 string이 있는 경우 팝업을 띄우지 않음
									} else {
										$showLayer = $privacyPopup;
									}
									popupLayer();
								}
							}

							setSignButtonText(true);

							// 해당 쿠키가 있으면 getCartCount 호출
							if ($.cookies.get("estoreLoginRequesting", {domain : ".samsung.com"}) === "Y") {
								// estoreLoginRequesting 쿠키 삭제
								deleteLoginRequestCookie();

								ss.Auth.getGlobalCartCount();
							}

							// wishlist 동기화
							syncWishlist();

							// index 페이지로 들어왔을 경우 store 로그인이 되어 있는지 판단 하기 위한 쿠키
							$.cookies.set("isStoreLogedIn", "Y");
						};

						// 스토어 로그인 요청 중을 나타내는 쿠키 생성
						$.cookies.set("estoreLoginRequesting", "Y", {domain : ".samsung.com"});
						
						var storeDomainTemp = "";
						var sessionCheckUrl = "";
						storeDomainTemp = STORE_DOMAIN.split("/")[2];
						//new-hybris
						if(isNewHybris || IS_B2B) storeDomainTemp = storeWebDomain.split("/")[2];
						sessionCheckUrl = "https://" + storeDomainTemp + "/" + SITE_CD + "/ng/p4v1/sessionCheck";

						if(IS_B2B){
							sessionCheckUrl = storeWebDomain + "/ng/p4v1/sessionCheck";
						}

						if(SITE_CD == "levant"){
							sessionCheckUrl = "https://" + storeDomainTemp + "/" + "jo" + "/ng/p4v1/sessionCheck";
						} else if(SITE_CD == "levant_ar"){
							sessionCheckUrl = "https://" + storeDomainTemp + "/" + "jo_ar" + "/ng/p4v1/sessionCheck";
						} else if(SITE_CD == "n_africa"){
							sessionCheckUrl = "https://" + storeDomainTemp + "/" + "ma" + "/ng/p4v1/sessionCheck";
						}
							
						if(hybrisApiJson){		// jsonp -> json 으로 분기
							try {
								$.ajax({
									url: sessionCheckUrl,
									type: "GET",
									data : {
										"ssoID" : guid
									},
									dataType : "json",
									xhrFields: { withCredentials: true },
									contentType : "application/x-www-form-urlencoded",
									crossDomain : true,
									success: function (data) {
										var isLogedIn = data.resultCode === "0000" ? true : false;
																				
										if (!isLogedIn) { // 스토어로그인 안되어 있을때
											//20200319 :: _satellite 임시 주석처리 
//											_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "28");
//											_satellite.track("account");

											ss.Auth.signOut();
										} else { // 스토어로그인 되어 있을때
											nextGenLoginResult(data);
										}
									},
									error:function(jqXHR, textStatus, errorThrown){
										//20200319 :: _satellite 임시 주석처리 
//										_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "29");
//										_satellite.track("account");

										estoreLive = false;
										}
								});

								if (!estoreLive) {
									ss.Auth.signOut();
								}
							} catch (e) {
								//20200319 :: _satellite 임시 주석처리 
//								_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "29");
//								_satellite.track("account");

								estoreLive = false;
							}
						}else if(SITE_CD === "es" || SITE_CD === "latin" || SITE_CD === "tw" || SITE_CD === "ru" || SITE_CD === "ae" || SITE_CD === "ae_ar" || SITE_CD === "jp"
							|| SITE_CD === "vn" || SITE_CD === "th" || SITE_CD === "sa" || SITE_CD === "sa_en" || SITE_CD === "nz" || SITE_CD === "it" || SITE_CD === "au" 
							|| SITE_CD === "se" || SITE_CD === "dk" || SITE_CD === "fi" || SITE_CD === "no" || SITE_CD === "at" || SITE_CD === "uk"
							|| SITE_CD === "my" || SITE_CD === "pt" || SITE_CD === "sg" || SITE_CD === "us" || SITE_CD === "eg" || SITE_CD == "levant" || SITE_CD == "levant_ar" || SITE_CD == "za" || SITE_CD == "hk" || SITE_CD == "hk_en" || SITE_CD == "hu"
							|| SITE_CD == "n_africa" || SITE_CD == "pk" || SITE_CD == "ch" || SITE_CD == "ch_fr" || SITE_CD == "il"
							|| isNewHybris || IS_B2B) {			//new-hybris
							// ES, DE, LATIN, TW, UK, RU, AE, AE_AR, VN, TH, SA, SA_EN, NZ, IT, FR, NL, AU, BE, BE_FR, SE, DK, FI, NO, AT, MY, SK, CZ Shop Integration Hybris 6.0
							try {
								$.ajax({
									url: sessionCheckUrl,
									type: "GET",
									dataType : "jsonp",
									data : {
										"ssoID" : guid
									},
									jsonp : "callback",
									success: function (data) {
										var isLogedIn = data.resultCode === "0000" ? true : false;
										
										if(SITE_CD === "latin") {
											isLogedIn = true;
											data.hasAddInfo = true;
										}
																				
										if (!isLogedIn) { // 스토어로그인 안되어 있을때
											//20200319 :: _satellite 임시 주석처리 
//											_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "28");
//											_satellite.track("account");

											ss.Auth.signOut();
										} else { // 스토어로그인 되어 있을때
											nextGenLoginResult(data);
										}
									},
									error:function(jqXHR, textStatus, errorThrown){
										//20200319 :: _satellite 임시 주석처리 
//										_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "29");
//										_satellite.track("account");

										estoreLive = false;
										}
								});

								if (!estoreLive) {
									ss.Auth.signOut();
								}
							} catch (e) {
								//20200319 :: _satellite 임시 주석처리 
//								_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm") + "29");
//								_satellite.track("account");

								estoreLive = false;
							}
						} else if(SITE_CD === "cn"){
							$("body").append("<iframe id='storeLoginIframe' src='" + STORE_DOMAIN + "/" + SITE_CD + "/ng/p4v1/login' style='display:block;width:0px;height:0px;border:none;'></iframe>");

							// 스토어 서버 살아 있는지 체크
							$("#storeLoginIframe").load(function() {
								$("#storeLoginIframe").unbind("load");

								try {
									var storeLoginIframcContentWindow = document.getElementById("storeLoginIframe").contentWindow;
									storeLoginIframcContentWindow.postMessage("","*");
									var timeCount = 0;
									storeDomainTemp = STORE_DOMAIN.split("/")[2];

									$.ajax({
										url: "https://" + storeDomainTemp + "/" + SITE_CD + "/ng/p4v1/getSessionCheck",
										type: "GET",
										dataType : "jsonp",
										jsonp : "callback",
										success: function (data) {
											var isLogedIn = data.resultCode === "0000" ? true : false;
											var loginF = "N";
											timeCount ++;

											if (!isLogedIn) { // 스토어로그인 안되어 있을때
												//20200319 :: _satellite 임시 주석처리 
//												_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm")+"|case1");
//												_satellite.track("account");

												setTimeout((function(data) {
													return function() {
														Time(data);
													};
												})(data) , 6000);

												function Time(data) {
													timeCount ++;

													$.ajax({
														url: "https://" + storeDomainTemp + "/" + SITE_CD + "/ng/p4v1/getSessionCheck",
														type: "GET",
														dataType : "jsonp",
														jsonp : "callback",
														success: function (data) {
															var isLogedIn = data.resultCode === "0000" ? true : false;
																loginF = "N";
																if (!isLogedIn) { // 스토어로그인 안되어 있을때
																	//20200319 :: _satellite 임시 주석처리 
//																	_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm")+"|case2");
//																	_satellite.track("account");

																	if(timeCount = 1 && loginF === "Y"){
																		loginF = "N";

																		setTimeout((function(data) {
																			timeCount = 2;
																			return function() {
																				Time(data);
																			};
																		})(data) , 5000);
																	}else if(loginF === "N"){
																		ss.Auth.signOut();
																	}else{
																		ss.Auth.signOut();
																	}
																} else { // 스토어로그인 되어 있을때
																	timeCount = 0;
																	nextGenLoginResult(data);
																}
														},
														error:function(jqXHR, textStatus, errorThrown){
															//20200319 :: _satellite 임시 주석처리 
//															_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm")+"|case3");
//															_satellite.track("account");

															estoreLive = false;
														}
													});
												}
											} else { // 스토어로그인 되어 있을때
												timeCount = 0;
												nextGenLoginResult(data);
											}
										},
										error:function(jqXHR, textStatus, errorThrown){
//											_satellite.setVar("account","login:samsung account|fail:" + new Date().format("yyyyMMddHHmm")+"|case3");
//											_satellite.track("account");
											
											estoreLive = false;
										}
									});

									if (!estoreLive) {
										ss.Auth.signOut();
									}
								} catch (e) {
									estoreLive = false;
									ss.Auth.signOut();
								}
							});
						}
					// end !exceptionReferrerDomain
					} else {
						if(SITE_CD === "es"){
							closeLayer();
						}
						setSignButtonText(true);

						// sign complete
						if ($.EstoreIfQueue)
							$.EstoreIfQueue.setIsSignReady(true);
					}
				// end USE_ESTORE
				} else { // if(isLoginWithNoStore || isVtexStore)
					setSignButtonText(true);
				}
			// end check token
			} else if(xsdcxyn && !IS_B2B) {// YG 아닌 다른 사이트 로그인된 상태에서는 SignInGate 호출
//				if(SITE_CD === "br" || SITE_CD === "ca" || SITE_CD === "ca_fr"){ // 독자적인 로그인 보유국
				if(SITE_CD === "br"){ // 독자적인 로그인 보유국
					returnURL = window.location.href;
					//$.cookies.del("xsdcxyn");
					//$.cookies.del("xsdcxyn", {path:'/', domain:'.samsung.com'});
					deleteSACookie();
					$.cookies.set("returnURL", returnURL, {domain : ".samsung.com"});
					
//					if(SITE_CD === "ca") {
//						window.location.href = "https://www.samsung.com/ca/samsungaccount/?gohome=Y";
//					} else if (SITE_CD === "ca_fr") {
//						window.location.href = "https://www.samsung.com/ca_fr/samsungaccount/?gohome=Y";
//					} else {
						window.location.href = loginLinkURL;
//					}
				}else {
					saSignInGate();
				}
			} else if(xsdcbxyn && IS_B2B){ // [B2B] YGB 아닌 다른 사이트 로그인된 상태에서는 SignInGate 호출
		        saSignInGate();
			} else if (snsSessionId) {
				setSignButtonText(true);

				// wishlist 동기화
				if (USE_ESTORE)
					syncWishlist();
			} // end check snsSessionId

			/**
			 * [B2B] SMB check cookie 생성 :: S 
			 * 
			 * isSMBRegisterdUserYN : SMB USER Check Cookie
			 * goSMBREgisterYN : PF / PD / Offer 에서 register user 버튼 클릭 여부 ( Y 일 경우 > smb user 가 아니면 register 페이지로 이동 )
			 * useSMBCookiePaths : isSMBRegisterUserYN 쿠키를 셋팅한 path 리스트 > 로그아웃 시 쿠키 제거를 위해 사용함 
			 * 
			*/
			if(IS_B2B && xsdcbxyn && guid != null && $("#shopIntegrationFlag").val() === "true"){
				const isSMBRegisteredUserYN = $.cookies.get("isSMBRegisteredUserYN");
				const goSMBRegisterYN = $.cookies.get("goSMBRegisterYN");
				const smbRegisterUrl = $.cookies.get("smbRegisterUrl");

				let useSMBCookiePaths = $.cookies.get("useSMBCookiePaths");
				if(useSMBCookiePaths == null){
					useSMBCookiePaths = '';
				}

				$.cookies.del("goSMBRegisterYN", {path:'/', domain:'.samsung.com'});
				$.cookies.del("smbRegisterUrl", {path:'/', domain:'.samsung.com'});

				if(!isSMBRegisteredUserYN || goSMBRegisterYN =='Y'){
					const getCustomerUrl = STORE_DOMAIN+ "/tokocommercewebservices/v2/"+STORE_SITE_CODE+"/users/current/getCustomer"
	
					$.ajax({
						url: getCustomerUrl,
						type: "GET",
						dataType : "json",
						async: false,
						xhrFields: { withCredentials: true },
						crossDomain: true,
						beforeSend: function () {},
						success: function (data) {
							if(data != null && data.customer != null ){
								const customerDataJson = data.customer;
								const isSMBUser = customerDataJson.isSMBRegisteredUser;
								const smbCookiePath = '/' + SITE_CD + '/';
								if(isSMBUser==true){
									$.cookies.set("isSMBRegisteredUserYN", "Y", {path : smbCookiePath, domain : ".samsung.com"});
									useSMBCookiePaths += smbCookiePath + ';';
								} else {
									if(goSMBRegisterYN == 'Y'){
										document.location.href = smbRegisterUrl;
									} else {
										$.cookies.set("isSMBRegisteredUserYN", "N", {path : smbCookiePath, domain : ".samsung.com"});
										useSMBCookiePaths += smbCookiePath + ';';
									}
								}
								
								$.cookies.set("useSMBCookiePaths", useSMBCookiePaths, {path : '/', domain : ".samsung.com"}); // 로그아웃시 쿠키 제거
	
							}
						},
						error:function(req){
							if(req.status=='401'){  
								ss.Auth.signOut();
							}
						}
					});
				}
				
			}
			/*[B2B] SMB check cookie 생성 :: E */
			if($.cookies.get("isSMBRegisteredUserYN") =='Y'){
				$('li.js-smb-user-only-menu').show();
			} else {
				$('li.js-smb-user-only-menu').remove();
			}

			}

			
			// getCartCount 호출
			ss.Auth.getGlobalCartCount();

			// AU Hybris 6.0 // DE Hybris 6.0 // FR Hybris 6.0
//			if(USE_ESTORE){
//				setMyMenu(true);
//			}

			var query = getQueryParams(document.location.search);

			// 자격 제한 유저
			if (query.customerStatus != null || query.isblock != null) {
				// blacklist 일 경우
				if (query.isblock && query.isblock === "true") {
					popupLayer("BA");
				} else {
					if (data.customerStatus)
						popupLayer(data.customerStatus);
					else
						popupLayer("UK");
				}
			}
		}

		// 2014.06.13 스페인 요청으로 스토어 로그인 요청하기전 정책 동의 프로세스 변경
		function policyCheck() {
			// 토큰 값이 있을 경우 로그인 되었다고 판단해서 아이콘의 text 변경
			//var token = $.cookies.get("iPlanetDirectoryPro", {domain:".samsung.com"});
			var xsdcxyn = $.cookies.get("xsdcxyn", {domain : ".samsung.com"});
			var guid = $.cookies.get("guid",{domain:".samsung.com"});
			// 2021.04.12 B2B 로그인 추가
			var xsdcbxyn = $.cookies.get("xsdcbxyn", {domain : ".samsung.com"});
			
			if ( gnbUsApiUse && !IS_B2B) {
				// 토큰 값이 있을 경우에만 로그인 체크
				if(xsdcxyn){
					initUs(xsdcxyn);
				}else{
					initUs();
				}
			} else {
				if (((xsdcxyn && !IS_B2B) || (xsdcbxyn && IS_B2B)) && policyCheckSite) {
					var storeUrl = STORE_DOMAIN + "/" + STORE_SITE_CODE;
					if(IS_B2B){
						storeUrl = storeWebDomain;
					}

					$.ajax({
						url: storeUrl + "/ng/p4v1/getGuidCheckInfo",
						type: "GET",
						dataType : "jsonp",
						data : {
							"ssoID" : guid
						},
						jsonp : "callback",
						beforeSend: function () {},
						success: function (data) {
							if (data.resultCode === "0000") {
								// 처음 접속 유저
								if (data.resultValue === "N") {
									closeLayer();
	
									if (inMyGalaxyAppflag === "Y" || SITE_CD === "de"){
										$showLayer = null; // in이면서 user-agent 정보중에 MyGalaxy 또는 SamsungShopSDK 라는 string이 있는 경우 팝업을 띄우지 않음
									} else {
										$showLayer = $privacyPopup;
									}
									
									popupLayer();
								} else {
									init();
								}
							} else {
								ss.Auth.signOut();
							}
						},
						error:function(jqXHR, textStatus, errorThrown){
							console.error(textStatus);
						}
					});
				} else {
					init();
				}
			}
		}
		setElement();
		if(!IS_EPP){
			setEvent();
			policyCheck();
			b2bUsLoginToggle();
		} else {
			initEpp();
		}


	};

} (jQuery));

new ss.Sign();

(() => {
  window.AEMapp = window.AEMapp || {};
  window.AEMapp.eppStore = window.AEMapp.eppStore || {};

  window.AEMapp.eppStore.isRealEppUser = () => {
    var jwt_usa = $.cookies.get('jwt_USA');
    var tmktId = $.cookies.get('tmktid');
    var accessType = $.cookies.get('taccessrtype') || '';
    return !!jwt_usa && !!tmktId && ~accessType.toLowerCase().indexOf('email');
  };

  window.AEMapp.eppStore.isUnverifiedEppUser = () => {
    var tmktId = $.cookies.get('tmktid');
    var accessType = $.cookies.get('taccessrtype') || '';
    var jwt_usa = $.cookies.get('jwt_USA');
    return !!jwt_usa && !!tmktId && accessType.toLowerCase().indexOf('email') == -1;
  };

  window.AEMapp.eppStore.setEppStoreCookie = (apiResponse) => {
    var store = apiResponse && apiResponse.store_info;
    var cookieOption = {path: '/', domain: '.samsung.com'};
    $.cookies.set('jwt_USA', apiResponse.jwt, cookieOption);
    $.cookies.set('epp_verified', apiResponse.epp_verified, cookieOption);
    $.cookies.set('tmktname', store.store_disp_name, cookieOption);
    $.cookies.set('tmktid', store.store_id, cookieOption);
    $.cookies.set('tlgimg', store.image_logo_url, cookieOption);
    $.cookies.set('tppid', store.legacy_plan_id, cookieOption);
    $.cookies.set('tsgmt', store.store_segment, cookieOption);
  };

  window.AEMapp.eppStore.clearEppStoreCookie = () => {
    var cookieOption = {path: '/', domain: '.samsung.com'};
    $.cookies.del('tmktname', cookieOption);
    $.cookies.del('tmktid', cookieOption);
    $.cookies.del('tlgimg', cookieOption);
    $.cookies.del('tppid', cookieOption);
    $.cookies.del('tsgmt', cookieOption);
    $.cookies.del('epp_verified', cookieOption);
    //$.cookies.del('jwt_USA');
  }

  window.AEMapp.eppStore.getEcomURL = () => {
    var url = 'https://www.samsung.com/us/api/ecom';
    if (~window.location.href.indexOf('stgwwwus')) url = 'https://us.ecom-qa.samsung.com';
    if (~window.location.href.indexOf('stgwebus')) url = 'https://us.ecom-stg.samsung.com';
    return url;
  }

  window.AEMapp.eppStore.getEppStore = function() {
    return new Promise((resolve, reject) => {
      $.ajax({
        url: '/us/smg/content/samsung/content-library/prepurchase/eppdiscount/epp-discount.json',
        method: 'GET',
        success: function(res) {
          resolve(res);
        },
        error: function(err) {
          resolve({"eppDiscounts":[{"storeId":"4789741110","label":"Education Discounts"},{"storeId":"654345","label":"First Responders Discounts"},{"storeId":"4789760945","label":"Government Discounts"},{"storeId":"3485000","label":"Workplace Discounts"},{"storeId":"4789760940","label":"Military Discounts"}]});
        }
      })
    });
  }

  window.AEMapp.eppStore.exitStore = () => {
    if ($.cookies.get('jwt_USA')) {
      $.ajax({
        url: window.AEMapp.eppStore.getEcomURL() + '/v1/sso/user/private-store/exit-store',
        method: 'GET',
        headers: {
          'x-ecom-jwt': $.cookies.get('jwt_USA')
        },
        success: function(res) {
          if (res && res.jwt) {
            $.cookies.set('jwt_USA', res.jwt, {path: '/', domain: '.samsung.com'});
          } else {
            $.cookies.del('jwt_USA', {path: '/', domain: '.samsung.com'});
          }
        },
        fail: function() {
          $.cookies.del('jwt_USA', {path: '/', domain: '.samsung.com'});
        }
      })  
    }
    window.AEMapp.eppStore.clearEppStoreCookie();
  }

  window.AEMapp.eppStore.updateGNBCartSaving = () => {
    function calcCartSaving(ltms, total) {
      _.each(ltms, function(ltm) {
        var qty = ltm.quantity;
        var saving = (ltm.line_item_cost.unit_list_price * 100 - ltm.line_item_cost.unit_price * 100) / 100;
        total = (100 * saving * 1000 * qty / 1000 + 100 * total) / 100;
        if (ltm.line_items && Object.keys(ltm.line_items).length > 0) {
          total = calcCartSaving(ltm.line_items, total);
        }
      });
      return total;
    }

    if (($.cookies.get('remoteId') || $.cookies.get('xsdcxyn')) && $.cookies.get('tppid') && $.cookies.get('s_ecom_sc_cnt') >= 1) {
      $.ajax({ 
        type: 'POST', 
        url: window.AEMapp.eppStore.getEcomURL() + '/v4/shopping-carts/fetch-cart', 
        headers: {
          'x-ecom-jwt': $.cookies.get('jwt_USA'),
          'x-ecom-app-id': 'temp'
        },
        contentType: 'application/json',
        data:  JSON.stringify({}),
        xhrFields: {
          withCredentials: true,
          crossDomain: true,
        }
      }).then((res) => {
        var cartSavings = calcCartSaving(res.line_items, 0);
        if (cartSavings) {
          if ($('.epp-bar-save').length > 0) {
            $('.epp-bar-save').html('You will save <b>$' + cartSavings.toFixed(2) + '</b> on this purchase.')
          } else {
            $('.epp-bar-msg').after('<span class="epp-bar-save">You will save <b>$' + cartSavings.toFixed(2) + '</b> on this purchase.</span>')
          }
        }
      })
    } else {
      $('.epp-bar-save').remove();
    }
  }

  window.AEMapp.eppStore.updateEppGNB = (programName, pageTrack) => {
    var offerMap = {
      'education': '/us/shop/discount-program/education/',
      'first responder': '/us/shop/discount-program/first-responders/',
      'government': '/us/shop/discount-program/government/',
      'employee': '/us/shop/discount-program/workplace/',
      'military': '/us/shop/discount-program/military/',
    };
    var segment = $.cookies.get('tsgmt') || '';
    var offerUrl = offerMap[segment.toLowerCase()] || '/us/shop/discount-program/';

    var gnb = $('.epp-bar-wrap');
    gnb.show();

    gnb.addClass('gnb-edited');
    var msg = gnb.find('.epp-bar-msg');
    msg.empty();
    var benfit = gnb.find('.benfit-wrap');
    benfit.empty();
    var logo = gnb.find('.epp-bar-logo');
    logo.empty();
    if ($.cookies.get('tlgimg')) {
      logo.append('<img src=' + $.cookies.get('tlgimg') + ' />');
    }
    if ($.cookies.get('remoteId') || $.cookies.get('xsdcxyn')) {
      msg.append('Welcome to the <div class="epp-bar-username">' + programName + ' Store!</div> Please enjoy our special offers for you.');
    } else {
      msg.append('Welcome to the <div class="epp-bar-username">' + programName + ' Store!</div> Please <a href="#" class="epp-login">login</a> to access your special pricing.');
    }  
    benfit.append('<a class="benfit-wrap__offers" href="' + offerUrl + '">SPECIAL OFFERS</a><span class="benfit-wrap__gap"></span><a class="benfit-wrap__exit">EXIT STORE</a>');
    gnb.find('.epp-login').click((e) => {
      e.preventDefault();
      $('.gnb__utility-link.loginBtn').trigger('click');
    });
    benfit.find('.benfit-wrap__exit').click(() => {
      window.AEMapp.eppStore.exitStore()
      $(document).trigger('exit__store');
    });
    if (($.cookies.get('remoteId') || $.cookies.get('xsdcxyn')) && $.cookies.get('tppid') && $.cookies.get('s_ecom_sc_cnt') >= 1) {
      window.AEMapp.eppStore.updateGNBCartSaving();
    }
    // tagging
    var exit = gnb.find('.benfit-wrap__exit');
    exit.attr('an-tr', `epp discount-${pageTrack}-text-link`);
    exit.attr('an-ca', 'content click');
    exit.attr('an-ac', 'feature');
    exit.attr('an-la', 'epp:bar:exit store');
    var offer = gnb.find('.benfit-wrap__offers');
    offer.attr('an-tr', `epp discount-${pageTrack}-text-link`);
    offer.attr('an-ca', 'content click');
    offer.attr('an-ac', 'feature');
    offer.attr('an-la', 'epp:bar:special offer');
  }

  if (siteCode==="us") {
    if ($.cookies.get("tmktid") || $.cookies.get("tppid")) {
      var mkt = $.cookies.get("xsdcxyn") || $.cookies.get("remoteId");
      var timg = $.cookies.get("tlgimg");
      var tname = $.cookies.get("tmktname");
      if (window.AEMapp && window.AEMapp.eppStore && window.AEMapp.eppStore.isUnverifiedEppUser()) {
        window.AEMapp.eppStore.updateEppGNB(tname, window.digitalData && window.digitalData.page && window.digitalData.page.pageInfo && window.digitalData.page.pageInfo.pageTrack || '');
      } else {
        if ($.cookies.get("xsdcxyn") || $.cookies.get("remoteId")) {
        	var guid = $.cookies.get("guid",{domain:".samsung.com"});
			var flpe = $.cookies.get("flpe", {domain : ".samsung.com"});
			var jsonflpe = {};
			if(flpe && guid) {
				// CryptoJS 암호화 하는 부분
				const keyone = "cedc6238tqcf1t4f0vl7g50mc70d6a5a";
				var parsekeyone = CryptoJS.enc.Utf8.parse(keyone); // 키는 utf8로 파싱 1회 수행
				
				// 1차 키와 guid를 암호화하여 2차 키를 생성한다 
				var enkeyone = CryptoJS.AES.encrypt(guid, parsekeyone,{
					mode: CryptoJS.mode.ECB,
					padding: CryptoJS.pad.Pkcs7
				});
				
				// CryptoJS 복호화 하는 부분
				const keytwo = (enkeyone+keyone).substring(0, 32); // 2차 키 길이를 AES256에 사용되는 32Byte로 조절하기 위하여 추가로 덧붙여서 자름 
				var parsekeytwo = CryptoJS.enc.Utf8.parse(keytwo); // 키는 utf8로 파싱 1회 수행

				// 쿠키에 암호화하여 전달된 값을 2차 키로 복호화한다.
				var dekeytwo = CryptoJS.AES.decrypt(flpe, parsekeytwo,{
					mode: CryptoJS.mode.ECB,
					padding: CryptoJS.pad.Pkcs7
				});
				var deflpe = CryptoJS.enc.Utf8.stringify(dekeytwo);
				
				// 복호화된 개인정보를 url 디코딩하고서 json포멧으로 저장 
				jsonflpe = JSON.parse(decodeURIComponent(deflpe));
			}

			var firstName = jsonflpe.firstName;
        	
          var uname = firstName ? firstName : $.cookies.get("tmktname");
          $(".epp-bar-logo img").remove();
          if(timg) {
            $(".epp-bar-logo").append('<img src="'+timg+'"/>');
          }
          if (uname != "null") {
            $(".epp-bar-msg").html('Welcome to the <div class="epp-bar-username">'+tname+' Store'+'.</div> Please enjoy our special offers for you');
          } else {
            $(".epp-bar-msg").html('Welcome <div class="epp-bar-username">'+tname+'!</div> Please <a href="#" id="openLogin" style="color:#1428a0;font-weight: bold">login</a> to enjoy our special offers for you');
          }
          $(".epp-bar-wrap").slideDown();
        } else if (($.cookies.get("xsdcxyn") || $.cookies.get("remoteId")) && $.cookies.get("tmktid")==="4145500" && $.cookies.get("tppid")==="17593200"){
          $(".epp-bar-logo img").remove();
          if(timg) {
            $(".epp-bar-logo").append('<img src="'+timg+'"/>');
          }
          $(".epp-bar-msg").html("Welcome to Samsung's Friends and Family Store! Enjoy special pricing. Please <a href='#' id='openLogin' style='font-size:12px;font-weight: bold'>login/signup</a> to make a purchase.");
          $(".epp-bar-wrap").slideDown();
        } else {
          $(".epp-bar-logo img").remove();
          if(timg) {
            $(".epp-bar-logo").append('<img src="'+timg+'"/>');
          }
          $(".epp-bar-msg").html('Welcome to the <div class="epp-bar-username" style="color:#1428a0;">'+tname+' Store'+"!</div> Please <a href='#' id='openLogin' style='color:#1428a0;font-weight: bold'>login</a> to enjoy our special pricing.");
          $("#openLogin").click(function(e){e.preventDefault();$('.gnb-login').trigger('click')});
          $(".epp-bar-wrap").slideDown();
        }
        window.AEMapp && window.AEMapp.eppStore && window.AEMapp.eppStore.updateGNBCartSaving();
      } 
    } else {
      $(".epp-bar-wrap").hide();
    }
  }
})();
(function (win, $) {

	var gnbFn = function(){
		var typeCodeForGNB = $("#typeCodeForGNB").val();
		var groupCodeForGNB = $("#groupCodeForGNB").val();
		var $gnbMenuBtn = $(".js-gnb-menu-btn");
		
		if(!fnIsNull(typeCodeForGNB) || !fnIsNull(groupCodeForGNB)){
			
			var $depth2menu = $(".gnb__depth2-menu").filter("[data-type-code='"+typeCodeForGNB+"']");
			if(fnIsNull($depth2menu)){
				$depth2menu = $(".gnb__depth2-menu").filter("[data-group-code='"+groupCodeForGNB+"']");
			}
			
			if(!fnIsNull($depth2menu)){
				$depth2menu.each(function(idx){
					if(idx === 0){
						var $depth1menu = $depth2menu.closest(".gnb__depth1-menu");
						$depth1menu.addClass("active-first");
						$depth2menu.addClass("active-second");
					}
				});
			}
		}
	};
	
	$(function() {
		gnbFn();
	});
	
	// Site Error Page (Home Link Event)
	$("div.s-page-error div.s-page-error__wrap a.s-link-text").on("click", function(){
		if(location.pathname.indexOf("/" + $("#siteCode").val() + "/multistore/") > -1) {
			// EPP 경로롤 접근하여 오류가 발생된 경우, Home Link 클릭시 해당 Store Home 으로 이동 
			var paths = location.pathname.substring(location.pathname.indexOf("/" + $("#siteCode").val() + "/multistore/"), location.pathname.length).split("/");
			if(paths.length > 4 && paths[4]) {
				$(this).attr("href", "/" + $("#siteCode").val() + "/multistore/" + paths[3]);
			}
		}
		return;
	});
}(window, $));

/**
 * GNB AE, AE_AR, KW, OMAN 멀티도메인 컨트롤용 스크립트
 */

var cookieCode = "";
var selectedCode = "";

function setCookie(name, value, day) {
	var date = new Date();
	date.setTime(date.getTime() + day * 60 * 60 * 24 * 1000);
	document.cookie = name + '=' + value + ';expires=' + date.toUTCString() + ';path=/';
}
function getCookie(name) {
	var value = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
	return value? value[2] : null;
}

function ajaxStore(siteCode){

	var storeURL = "https://shop.samsung.com/"+siteCode+"/ng/p4v1/getEstoreCategoryListJsonP";

	$.ajax({
		url: storeURL,
		type: 'GET',
		dataType : 'jsonp',
		success: function (data) {
			if(data.resultCode == "0000"){
				var shopLayerHtml = createHTML(data.categoryData);

				$(".shopLayer").html("");
				$(".shopLayer").html(shopLayerHtml);

				window.sg.components.gnb.reInit();
			}
			
		},error: function (xhr) {
			console.log(xhr);
		}
	});
}

function createHTML(data){
	
	var resultHTML = '';
	for(var i=0; i<data.length; i++){
		var subCategoryList = data[i].subCategoryList;
		if(!fnIsNull(data[i].enCategoryName)){
			data[i].enCategoryName = data[i].enCategoryName.toLowerCase();
		}
		if(subCategoryList.length > 0){
			resultHTML += 	
				'<li class="gnb__depth2-menu has-depth-menu" role="presentation">'+
					'<a class="gnb__depth2-link" href="javascript:void(0)" role="menuitem"'+
						'an-tr="nv00_gnb--hover-depth2" an-ca="navigation" an-ac="gnb" an-la="shop:'+data[i].enCategoryName+'">'+
						'<span class="gnb__depth2-link-text">'+
							data[i].categoryName+
						'</span>'+
						'<svg class="icon icon--next" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" focusable="false">'+
							'<path d="M31.828 16.306l3.457-3.612L72.172 48 35.285 83.306l-3.457-3.612L64.941 48z"></path>'+
						'</svg>'+
						'<svg class="icon icon--dropdown" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" focusable="false">'+
							'<path d="M48 73.254L11.651 36.361l5.698-5.614L48 61.855l30.651-31.108 5.698 5.614z"></path>'+
						'</svg>'+
					'</a>'+
					'<div class="gnb__depth3-wrap">'+
						'<div class="gnb__depth3-inner">'+
							'<ul class="gnb__depth3" role="menu" data-sly-list.lv2model="${lv1model.level2List}">';
			for(var j=0; j<subCategoryList.length; j++){
				if(!fnIsNull(subCategoryList[j].enSubCategoryName)){
					subCategoryList[j].enSubCategoryName = subCategoryList[j].enSubCategoryName.toLowerCase();
				}
				resultHTML +=				
								'<li class="gnb__depth3-menu" role="presentation">'+
									'<a class="gnb__depth3-link" href="'+subCategoryList[j].url+'" role="menuitem"'+
										'an-tr="nv00_gnb--text-depth3" an-ca="navigation" an-ac="gnb" an-la="shop:'+data[i].enCategoryName+':'+subCategoryList[j].enSubCategoryName+'">'+
										'<span class="gnb__depth3-link-text">'+
											subCategoryList[j].subCategoryName+
										'</span>'+
									'</a>'+
								'</li>';
			}
			resultHTML +=				
							'</ul>'+
						'</div>'+
					'</div>'+
				'</li>';
		} else {
			resultHTML += 	
				'<li class="gnb__depth2-menu" role="presentation">'+
					'<a class="gnb__depth2-link" href="'+data[i].url+'" role="menuitem"'+
						'an-tr="nv00_gnb--click-depth2" an-ca="navigation" an-ac="gnb" an-la="shop:'+data[i].enCategoryName+'">'+
						'<span class="gnb__depth2-link-text">'+
							data[i].categoryName+
						'</span>'+
					'</a>'+
				'</li>';
		}
	}
	
	return resultHTML;
}

(function($, win) {
	'use strict';

	var $gnbCountryArea = $('.gnb__country');
	var $gnbCountrySelect = $gnbCountryArea.find('a.gnb__country-select');
	var $mobildGNBCountrySelect = $('.gnb__country-mobile').find('.gnb__country-select');
	var $mobildGNBCountrySelectOption = $mobildGNBCountrySelect.find('option');
	
	$gnbCountrySelect.click(function(e){
		//selected된 값 가져오기
		e.preventDefault();

		//쿠키 세팅
		$gnbCountrySelect.removeClass("is-selected");
		$(this).addClass("is-selected");
		var selectCode = $(this).attr("data-code");
			//쿠키 세팅
		if(cookieCode.indexOf("_ar")<0){
			//setCookie("dotcom_home", selectCode, 7);
			setCookie("dotcom_multistore", selectCode, 7);
		}else{
			var siteCodeRTL = selectCode+"_ar";
			//setCookie("dotcom_home", siteCodeRTL, 7);
			setCookie("dotcom_multistore", siteCodeRTL, 7);
		}
		
		location.reload(true);
	});
	
	$mobildGNBCountrySelect.change(function(e){
		e.preventDefault();
		
		var selectCode = $(this).val();
		//쿠키 세팅
		if(cookieCode.indexOf("_ar")<0){
			//setCookie("dotcom_home", selectCode, 7);
			setCookie("dotcom_multistore", selectCode, 7);
		}else{
			var siteCodeRTL = selectCode+"_ar";
			//setCookie("dotcom_home", siteCodeRTL, 7);
			setCookie("dotcom_multistore", siteCodeRTL, 7);
		}
		
		location.reload(true);
	});
	
	$(function(){
		// storeDomain 쿠키
		cookieCode = getCookie("dotcom_home");
		selectedCode = getCookie("dotcom_multistore");
		
		if(SITE_CD === "ae" || SITE_CD === "ae_ar"){
			if(selectedCode === "" || selectedCode == null || cookieCode !== SITE_CD){
				setCookie("dotcom_home", SITE_CD, 7);
				setCookie("dotcom_multistore", SITE_CD, 7);
				cookieCode = SITE_CD;
				selectedCode = SITE_CD;
			}

			if(selectedCode != SITE_CD){
				$gnbCountrySelect.removeClass("is-selected");
				var src = "";
				var text = "";
				$gnbCountrySelect.each(function(){
					var code = $(this).attr("data-code");
					if(selectedCode.indexOf(code)>-1){
						$(this).addClass("is-selected");
						
						src = $(this).find(".image__main").attr("data-src");
						text = $(this).find("span").text();
						$(".gnb__country-current .image__preview").attr("data-src", src+"?$LazyLoad_Home_PNG$");
						$(".gnb__country-current .image__preview").attr("src", src+"?$LazyLoad_Home_PNG$");
						$(".gnb__country-current .image__main").attr("data-src", src);
						$(".gnb__country-current .image__main").attr("src", src);
						$(".gnb__country-current > span").text(text);
					}
				});

				$mobildGNBCountrySelectOption.removeAttr("selected");
				$mobildGNBCountrySelectOption.each(function(e){
					if($(this).val()==selectedCode){
						$(this).attr("selected", true);
					}
				});
				
				ajaxStore(selectedCode);
			}
		}
	});
})(jQuery, window);
$(function(){
let isB2B = ($("#b2bFlag").val() === "Y");
  function init() {
    var jsonUrl =window.location.href.indexOf('www.samsung.com') > -1? '/us/smg/content/samsung/content-library/gnb/gnb-header/json/pub/gnb-header-menu.json': '/etc.clientlibs/samsung/clientlibs/consumer/global/clientlib-common/resources/json/gnb-header-menu.json';
    $.ajax({
      url: jsonUrl,
      dataType : 'json'
    }).then(function(json) {
      if(json && json.menuOptions && json.menuOptions.length > 0) {
        $('.gnb__depth2-title-wrap, .gnb__depth2, .gnb__feature-container').remove();
        $('.gnb').addClass('isHybrid');
        // var isHybrid = $.cookies.get('hybrid')? true: false;
        var taggingStringModify = function(string) {
          var result = string || '';
          result = result.replace(/\+/gi, 'plus').replace(/\&/gi, 'and').replace(/\$/gi, 'dollar').replace(/\%/gi, 'percentage').replace(/\"/gi, 'inches');
          result = result.replace(/\||\-|\~|\,|\.|\!|\?|\@|\=|\#|\*|\'/gi, '');
          return result.toLowerCase();
        };
        $('.gnb__depth1-menu').each(function(index, ele){
          //each 
          $(ele).find('.gnb__depth2-wrap').addClass('isHybrid one-col');
          $(ele).find('.gnb__depth2-wrap .gnb__depth-back').append('<span class="gnb__depth1-name"></span>');
          if($(ele).hasClass('has-depth-menu')) {
            // var dropDownInfo = _.filter(json.menuOptions, function(l1Ele) {
            //   return l1Ele.nodeId === $(ele).data('nodeid');
            // })[0];
            var dropDownInfo = json.menuOptions[index];
            if(!dropDownInfo) return;


             var t1Title = '';
             if(dropDownInfo.titleTaburl) {
              t1Title = '<a class="gnb__depth2-title-link" href="' + dropDownInfo.titleTaburl + '">' + (dropDownInfo.titleTabHeadline? dropDownInfo.titleTabHeadline: '') + '</a>';
             } else {
                t1Title = '<span class="gnb__depth2-title-text">' + (dropDownInfo.titleTabHeadline? dropDownInfo.titleTabHeadline: '') + '</span>';
             }
            // title wrap for title text
            var titleWrap = '<div class="gnb__depth2-title-wrap"><strong class="gnb__depth2-title">' + t1Title + '</strong></div>';

            //image wrap

            var hybridFlyOutClass= 'cta--contained hidden';
            var utagFlag = 'hybrid-accordion';
            var imageWrap = dropDownInfo.foImg?'<div class="gnb__feature-container"> <a class="gnb__feature-container-link" an-tr="nv00_gnb--cta-feature" an-ca="navigation" an-la="feature image:' + (dropDownInfo.titleTabHeadline? taggingStringModify(dropDownInfo.titleTabHeadline): '') + ':' + (dropDownInfo.fiHeadline? taggingStringModify(dropDownInfo.fiHeadline): '') + ':' + (dropDownInfo.fiCtaText? taggingStringModify(dropDownInfo.fiCtaText): '') + '" an-ac="gnb" data-link_cat="navigation ' + utagFlag +'" data-link_id="' + dropDownInfo.fiHeadline +'" data-link_meta="link_name:' + dropDownInfo.fiHeadline + '" data-link_position="navigation>gnb>' + dropDownInfo.titleTabHeadline + '" data-event_name="select_' + dropDownInfo.titleTabHeadline +'_click" href="' + (dropDownInfo.foLinkUrl? dropDownInfo.foLinkUrl: 'javascript:void(0);') + '"><div class="image"> <img class="image__main responsive-img lazy-load image__main" data-src="' + dropDownInfo.foImg + '" data-mobile-src="' + dropDownInfo.foImg + '" alt="' + (dropDownInfo.foImgAlt? dropDownInfo.foImgAlt: '') + '"></div><div class="gnb__feature-container-contents"><p class="gnb__feature-container-description">' + (dropDownInfo.fiHeadline? dropDownInfo.fiHeadline: '') + '</p> <span class="cta ' + hybridFlyOutClass + ' cta--black">' + (dropDownInfo.fiCtaText? dropDownInfo.fiCtaText: '') + '</span></div></a></div>': '';
            var depth2Wrap = '';
            // ul depth 2 start
            if(dropDownInfo.children) {
              var hybridClass= 'isHybrid';
              depth2Wrap += '<ul class="gnb__depth2 ' + hybridClass +  '" role="menu">';
            $.each(dropDownInfo.children, function(idx, l2Ele) {
              var hasL3 = l2Ele.children? 'has-depth-menu': '';
              var l2Target = l2Ele.linkTarget == 'B'? '_blank': '_self';
              var l2LinkUrl = l2Ele.linkUrl? l2Ele.linkUrl: 'javascript:void(0);';
              var l2FlyoutObj = l2Ele.flyOutSections? l2Ele.flyOutSections[0].flyOutImage? l2Ele.flyOutSections : undefined: undefined;
              var l2FlyoutTheme = l2FlyoutObj? l2FlyoutObj[0].flyOutBlackTextTheme? '': 'text-color--white': '';
              var openNewWindowIcon = l2Ele.linkTarget == 'B'? '<svg class="icon" id="outlink-bold" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96"> <path d="M81.436 14.564v54.285h-8V28.221L18.22 83.436l-5.656-5.656L67.78 22.563l-40.629.001v-8z"></path> </svg>': '';
              var l2IconLabel = l2Ele.displayIconLabel ? '<span class="badge-icon badge-icon--label badge-icon--bg-color-blue">' + l2Ele.displayIconLabel + '</span>' : '';

              var flyoutString = l2FlyoutObj? 'data-flyout-url="' + l2FlyoutObj[0].flyOutLink + '" data-flyout-text="' + l2FlyoutObj[0].flyOutTitle + '" data-flyout-img="' + l2FlyoutObj[0].flyOutImage + '" data-flyout-theme="' + l2FlyoutTheme + '"': 'data-flyout-url="' + (dropDownInfo.foLinkUrl || '') + '" data-flyout-text="' + (dropDownInfo.fiHeadline || '') + '" data-flyout-img="' + (dropDownInfo.foImg || '') + '"';

              var l2Wrapper = '<li class="gnb__depth2-menu ' + hasL3 + '" role="presentation">';

              var l2DropDownCtaDesk = hasL3? '<svg class="icon icon--next" id="next-regular" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96"><path d="M31.828 16.306l3.457-3.612L72.172 48 35.285 83.306l-3.457-3.612L64.941 48z"></path></svg>': '';

              l2Wrapper += '<a class="gnb__depth2-link" an-tr="nv00_gnb--text-depth2" an-ca="navigation" an-ac="gnb" an-la="' + (dropDownInfo.titleTabHeadline? taggingStringModify(dropDownInfo.titleTabHeadline): '') + ':' + taggingStringModify(l2Ele.displayName) + '" target="' +  l2Target + '" href="' + l2LinkUrl + '" role="menuitem" ' + flyoutString + '><span class="gnb__depth2-link-text">' + l2Ele.displayName + openNewWindowIcon + l2IconLabel + '</span>' + l2DropDownCtaDesk + '</a>';


              var l2DropDownCtaMobile = hasL3? '<a class="gnb__depth2-dropdown-cta" href="javascript:void(0)"><span class="hidden">Open Menu</span><svg class="icon icon--dropdown" id="open-down-bold" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96"><path d="M48 73.254L11.651 36.361l5.698-5.614L48 61.855l30.651-31.108 5.698 5.614z"></path></svg></a>': '';
              l2Wrapper += l2DropDownCtaMobile;

              if(hasL3) {
                l2Wrapper += '<div class="gnb__depth3-wrap "><div class="gnb__depth3-inner"><ul class="gnb__depth3" role="menu">';
                $.each(l2Ele.children, function(idx, l3Ele) {
                  var l3Target = !l3LinkImg && l3Ele.linkTarget == 'B'? '_blank': '_self';
                  var l3LinkUrl = l3Ele.linkUrl;
                  var l3LinkImg = l3Ele.fimageL3url? l3Ele.fimageL3url.replace(/ /g,"%20"): '';
                  var noImgClass = l3LinkImg? '': 'no-img'; 
                  var openNewWindowIcon = l3Ele.linkTarget == 'B'? '<svg class="icon" id="outlink-bold" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96"> <path d="M81.436 14.564v54.285h-8V28.221L18.22 83.436l-5.656-5.656L67.78 22.563l-40.629.001v-8z"></path> </svg>': '';
                  var l3IconLabel = l3Ele.displayIconLabel ? '<span class="badge-icon badge-icon--label badge-icon--bg-color-blue">' + l3Ele.displayIconLabel + '</span>' : '';
                  var hybridImg = l3LinkImg?'<img class="lazy-load image__main" data-src="'+ l3LinkImg + '" >': '';
                  var hybridImgClass= 'isHybrid ';
                  var l3EleStr = '<li class="gnb__depth3-menu" role="presentation"><a an-tr="nv00_gnb--text-depth3" an-ca="navigation" an-ac="gnb" an-la="' + (dropDownInfo.titleTabHeadline? taggingStringModify(dropDownInfo.titleTabHeadline): '') + ':' + taggingStringModify(l2Ele.displayName) + ':' + taggingStringModify(l3Ele.displayName) + '" class="gnb__depth3-link ' + hybridImgClass + '" href="' + l3Ele.linkUrl + '" target="' + l3Target + '"  role="menuitem"><div class="gnb__depth3-link-text ' + hybridImgClass + noImgClass +'">'+ hybridImg + l3Ele.displayName + openNewWindowIcon  + l3IconLabel +'</div></a></li>';
                  l2Wrapper += l3EleStr;
                });
                var l2LinkShopAllUrl = l2Ele.shopAllLinkUrl;
                var l2LinkShopAllDt = l2Ele.shopAllLinkTextDesktop;
                var l2LinkShopAllMb = l2Ele.shopAllLinkTextMobile? l2Ele.shopAllLinkTextMobile: l2Ele.shopAllLinkTextDesktop;

                var shopAllLink = l2LinkShopAllUrl? '<li class="gnb__depth3-menu" role="presentation"><a class="gnb__depth3-link isHybrid shop-all" href="' + l2LinkShopAllUrl + '" target="_self" role="menuitem" an-tr="nv00_gnb--text-depth3" an-ca="navigation" an-ac="gnb" an-la="' + (dropDownInfo.titleTabHeadline? taggingStringModify(dropDownInfo.titleTabHeadline): '') + ':' + taggingStringModify(l2Ele.displayName) + ':' + taggingStringModify(l2LinkShopAllDt) + '"><div class="gnb__depth3-link-text isHybrid shop-all">' + l2LinkShopAllDt + '<svg class="icon icon--next" id="next-regular" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" style="width: 20px;"><path d="M31.828 16.306l3.457-3.612L72.172 48 35.285 83.306l-3.457-3.612L64.941 48z"></path></svg></div></a></li>': '';
                l2Wrapper += shopAllLink;
                l2Wrapper+= '</ul></div></div>'
              }
              // close l2 wrapper
              l2Wrapper += '</li>';
              depth2Wrap += l2Wrapper;
            });
            depth2Wrap += '</ul>';
            }
            $(titleWrap + depth2Wrap + imageWrap).appendTo($(ele).find('.gnb__depth2-inner'));
          }

        });
        window.sg.components.gnb.init();
        window.sg.common.lazyLoad.initAll();
        if(document.cookie.indexOf('xsdcxyn') > -1) {
            setTimeout(function() {
              window.sg.components.gnb.reInit();
            }, window.innerWidth > 768? 2000: 3000);
        }
        // var utagFlag = 'hybrid-accordion';
        // $('.gnb').on('click', '.gnb__depth3-link', function(e) {
        //   var l1text = $('.gnb__depth1-menu.open .gnb__depth1-link-text').text() || $('.gnb__depth1-menu.active .gnb__depth1-link-text').text();
        //   var l2text = $('.gnb__depth2-menu.active .gnb__depth2-link-text').text();
        //   var l3text = $(this).find('.gnb__depth3-link-text').text();

        //   window.utag && window.utag.link({
        //     'link_cat':'navigation ' + utagFlag, 
        //     'link_id': l1text + ':' + l2text + ':' + l3text, 
        //     'link_meta': 'link_name:' + l3text, 
        //     'link_position': 'navigation>gnb>' + l1text + '>' + l2text,
        //     'event_name': 'select_' + l3text + '_click'
        //   });
        // });
        // $('.gnb').on('click', '.gnb__depth2-link', function(e) {
        //   var l1text = $('.gnb__depth1-menu.open .gnb__depth1-link-text').text() || $('.gnb__depth1-menu.active .gnb__depth1-link-text').text();
        //   var l2text = $(this).find('.gnb__depth2-link-text').text();

        //   window.utag && window.utag.link({
        //     'link_cat':'navigation ' + utagFlag , 
        //     'link_id': l1text + ':' + l2text, 
        //     'link_meta': 'link_name:' + l2text, 
        //     'link_position': 'navigation>gnb>' + l1text,
        //     'event_name': 'select_' + l2text + '_open'
        //   });
        // });
        // $('.gnb').on('click', '.gnb__menu-btn', function(e) {
        //   window.utag && window.utag.link({
        //     'link_cat':'navigation ' + utagFlag , 
        //     'link_id': 'mobile hamburger menu', 
        //     'link_meta': 'link_name: hamburger menu', 
        //     'link_position': 'navigation>gnb>hamburger menu',
        //     'event_name': 'select_hamburger menu_click'
        //   });
        // });
        $('.gnb').on('click', '.gnb__depth2-dropdown-cta', function(e) {
          $(this).siblings('.gnb__depth2-link').find('.gnb__depth2-link-text').click();
        });

        $(document).trigger("GNBInitialized");
      } else {
        console.log('gnb json is invalid');
        window.sg.components.gnb.init();
      }
    }).fail(function(error) {
      console.log('error', error);
      window.sg.components.gnb.init();
    });
  }

  if(siteCode==='us' && !isB2B) {
    init();
  }

});


function getNextApiDomain() {
//	var nextGenDomain = STORE_DOMAIN;
//	var protocal_ = getProtocal();
//	var domain_ = protocal_ + "://" + nextGenDomain;
	var domain_ = STORE_DOMAIN;
	var port = "";

	return domain_;
}

// Update Cart Count
function updateTotalCartCount(cnt) {
	var pattern = /^[0-9]+$/;
	if(!pattern.test(cnt)){	cnt = 0; }
	if(cnt > 99){ cnt = 99; }
	$('.gnb-cart-count').html('<span class="hidden">' + $("#productCountText").val() + ' : </span>' + cnt);
	if(cnt > 0){
		$('.gnb-cart-count').show();
		ss.Auth.setCartEl(true);
	} else {
		$('.gnb-cart-count').hide();
		ss.Auth.setCartEl(false);
	}
}

// Hide minicart
function hideMiniCart() {
	navigation.miniCartHide();
}

// View Popup Layer
function nextViewPopup(v) {
	var obj=$("#"+v.split("#")[1]);

	$(".layer_popup, .layer_popup_ng").hide();
	obj.parent().show();

	$(".lightbox-skrim").show();
	var layer = document.getElementById(obj.attr("id"));

	setTimeout(function(){layer.popAlign();}, 100);

	return false;
}

// Hide Popup Layer
function hidePopup() {
	$(".layer_popup, .layer_popup_ng").hide();
	$(".lightbox-skrim").hide();
	return false;
}

// Show Gloval Error Message
function viewGlovalMessagePopup(message) {
	var obj = $("#gloval_message_popup");
	obj.find(".msg-text").text(message);
	obj.find(".button").attr('tabindex','1');
	obj.find(".button").attr('data-focus-id','shop-popover-ok');
	obj.find(".button").attr('data-tab-next','shop-popover-close');
	obj.find('.icon-close-x').attr('data-tab-next','shop-popover-ok');
	obj.attr('data-tab-next','nav-cart-link');

	obj.find(".button").focus();

	nextViewPopup("#"+obj.attr("id"));
	obj.find(".button").focus();
	obj.find(".pop-btn>.button").click(function(){
		hidePopup();
		$('.cartbutton.item').focus();

		return false;
	});
}

function getProtocal() {
	var url = document.location.href;
	var protocal = url.split("://")[0];
	return protocal;
}

(() => {
  const $q = window.sg.common.$q;
  const utils = window.sg.common.utils;
  const selector = {
    section: '.gnb',
  };

  class GnbTagging {
    constructor(element) {
      this.selector = {
        gnbMenu: '.gnb__depth1-menu.has-depth-menu .gnb__depth1-link, .gnb__depth2-menu.has-depth-menu .gnb__depth2-link',
      };

      this.el = {
        window: $q(window),
        component: $q(element),
      };

      this.handler = {
        resize: this.resize.bind(this),
      };

      GnbTagging.instances.set(element, this);

      this.setElements();

      this.init();
    }

    setElements() {
      this.el.gnbMenu = this.el.component.find(this.selector.gnbMenu);
      
      this.breakpoint = 1279;
      this.desktopFlag = false;
      this.mobileFlag = false;
    }
    
    init() {
      this.bindEvents();

      this.resize();
    }

    reInit() {
      this.setElements();

      this.bindEvents();

      this.resize();
    }

    removeTagging() {
      this.el.gnbMenu.removeAttr('an-tr');
      this.el.gnbMenu.removeAttr('an-la');
      this.el.gnbMenu.removeAttr('an-ca');
      this.el.gnbMenu.removeAttr('an-ac');
    }

    setTagging() {
      this.el.gnbMenu.target.forEach((item) => {
        const $item = $q(item);
        const engName = item.dataset.engname !== undefined ? item.dataset.engname : '';
        const clickName = $item.hasClass('gnb__depth1-link') ? 'nv00_gnb--click-depth1' : 'nv00_gnb--click-depth2';

        $item.attr('an-tr', clickName);
        $item.attr('an-la', engName);
        $item.attr('an-ca', 'navigation');
        $item.attr('an-ac', 'gnb');
      });
    }

    resize() {
      if (this.breakpoint < utils.getViewPort().width) {
        if (this.desktopFlag === false) {
          this.desktopFlag = true;
          this.mobileFlag = false;

          this.removeTagging();
        }
      } else {
        if (this.mobileFlag === false) {
          this.mobileFlag = true;
          this.desktopFlag = false;

          this.setTagging();
        }
      }
    }

    bindEvents() {
      this.el.window.off('resize', this.handler.resize).on('resize', this.handler.resize);
    }
  }

  GnbTagging.instances = new WeakMap();

  const init = () => {
    $q(selector.section).target.forEach((element) => {
      if (!GnbTagging.instances.has(element)) {
        new GnbTagging(element);
      }
    });
  };

  const reInit = () => {
    $q(selector.section).target.forEach((element) => {
      if (GnbTagging.instances.has(element)) {
        GnbTagging.instances.get(element).reInit();
      } else {
        new GnbTagging(element);
      }
    });
  };

  $q.ready(init);

  window.sg.components.gnbTagging = {
    init,
    reInit,
  };
})();

(() => {
  const $q = window.sg.common.$q;
  const libs = window.sg.common.libs;
  const BREAKPOINTS = window.sg.common.constants.BREAKPOINTS;
  const utils = window.sg.common.utils;
  
  const selector = { section: '.footer' };

  class Footer {
    constructor(component) {
      this.selector = {
        section: selector.section,
        category: '.footer-category__anchor',
        categoryActive: 'footer-category__anchor--active',
        categoryList: '.footer-category__list-wrap',
        categoryItem: '.footer-column__item',
        language: '.footer-language__anchor',
        languagePanel: '.footer-language__panel .footer-language__content',
        languageActive: 'footer-language__anchor--active',
        languageTopTarget: '.footer-copyright-align',
        topBtn: '.footer-back-to-top__cta',
      };

      this.ele = {
        window: $q(window),
        section: $q(component),
        wrap2list: [],
      };

      this.setProperty();

      this.isPCmode = BREAKPOINTS.MOBILE < utils.getViewPort().width;

      this.handler = {
        resize: this.resize.bind(this),
        focusLock: this.focusLock.bind(this),
        outClick: this.outClick.bind(this),
        clickLanguage: () => {
          if (this.ele.language.hasClass(this.selector.languageActive)) {
            this.closeLanguage();
          } else {
            this.openLanguage();
          }
        },
      };

      Footer.instances.set(component, this);

      this.init();
    }

    setProperty() {
      this.ele.topBtn = this.ele.section.find(this.selector.topBtn).eq(0);

      const $categoryActive = this.ele.section.find(`.${this.selector.categoryActive}`);
      this.ele.categoryActive = $categoryActive.target.length <= 0 ? null : $categoryActive;
      this.ele.category = this.ele.section.find(this.selector.category);

      this.ele.language = this.ele.section.find(this.selector.language);
      this.ele.languagePanel = this.ele.section.find(this.selector.languagePanel);
      this.ele.languageTopTarget = this.ele.section.find(this.selector.languageTopTarget);

      this.ele.wrap2list = [];
      this.ele.section.find(this.selector.categoryList).target.forEach((wrap) => {
        const lists = wrap.querySelectorAll('.footer-category__list');
        if (lists.length > 1) {
          this.ele.wrap2list.push([...lists]);
        }
      });
    }

    focusLock(event) {
      if (event.keyCode === libs.keyCode.TAB_KEY) {
        setTimeout((() => {
          const isOut = $q(document.activeElement).closest(this.selector.languagePanel).target.length <= 0;
          if (isOut) {
            if(utils.getCurrentDevice() === 'desktop'){
              this.closeLanguage(document.activeElement);
            }else{
              if(event.shiftKey){
                const $links = this.ele.languagePanel.eq(0).find('a');
                $links.target[$links.target.length - 1].focus();
              }else{
                this.ele.languagePanel.eq(0).find('.footer-language__close').focus();
              }
            }
          }
        }).bind(this), 30);
      }
    }

    outClick(event) {
      let isOut = null;
      if(event.type === 'touchend'){
        isOut = $q(event.target || event.touches[0].target).closest(this.ele.languagePanel.target[0]).target.length <= 0;
      }else{
        isOut = $q(event.target).closest(this.ele.languagePanel.target[0]).target.length <= 0;
      }

      if (isOut || event.target === document.documentElement) {
        this.closeLanguage();
      }
    }
    
    init() {
      this.setLengthTop();

      this.bindEvents();

      const $previews = this.ele.section.find('.image__preview');
      if($previews.target.length > 0){
        $previews.eq($previews.target.length - 1).on('load', () => {
          this.setLengthTop();
        });
      }
    }

    reInit() {
      this.setProperty();
      
      this.bindEvents();
      
      this.resize();
    }

    resize() {
      this.isPCmode = BREAKPOINTS.MOBILE < utils.getViewPort().width;
      
      this.setLengthTop();

      if (this.isPCmode) {
        if (this.ele.categoryActive !== null) {
          this.closeCategory(this.ele.categoryActive, true);
        }

        if (this.ele.language.hasClass(this.selector.languageActive)) {
          this.closeLanguage(false);
        }
        this.ele.category.removeAttr('aria-expanded');
      } else {        
        this.ele.category.attr('aria-expanded', false);
      }
    }

    bindEvents() {
      this.ele.topBtn.off('click').on('click', this.moveScroll.bind(this));

      this.ele.category.off('click').on('click', (event) => {
        const $btn = $q(event.currentTarget);
        if ($btn.hasClass(this.selector.categoryActive)) {
          this.closeCategory($btn);
        } else {
          this.openCategory($btn);
        }
      });

      this.ele.language.off('click').on('click', this.handler.clickLanguage);

      this.ele.languagePanel.find('.footer-language__close').off('click').on('click', () => {
        this.closeLanguage();
      });

      this.ele.window.off('resize', this.handler.resize).on('resize', this.handler.resize);
    }

    moveScroll() {
      utils.scrollTo(0);
    }

    openLanguage() {
      if (!this.isPCmode) {
        utils.hiddenScroll();
      }
      const isMo = utils.getCurrentDevice() === 'mobile';
      this.ele.language.addClass(this.selector.languageActive);
      this.ele.language.attr('aria-expanded',true);
      if(isMo){
        window.sg.common.utils.setMobileFocusLoop(this.ele.languagePanel.target[0]);
      }
      const goFocus = isMo ? this.ele.languagePanel.eq(0).find('.footer-language__close').target[0] : this.ele.languagePanel.eq(1).find('a').target[0];
      goFocus.blur();
      setTimeout(() => {
        goFocus.focus();
        this.ele.window.off('keydown', this.handler.focusLock).on('keydown', this.handler.focusLock);
        this.ele.window.off('click', this.handler.outClick).on('click', this.handler.outClick);
        this.ele.window.off('touchend', this.handler.outClick).on('touchend', this.handler.outClick);
      }, 30);
    }

    closeLanguage(focusEl = null) {
      utils.visibleScroll();

      this.ele.language.attr('aria-expanded',false);
      if(utils.getCurrentDevice() === 'mobile'){
        window.sg.common.utils.removeMobileFocusLoop();
      }
      this.ele.window.off('keydown', this.handler.focusLock);
      this.ele.window.off('click', this.handler.outClick);
      this.ele.window.off('touchend', this.handler.outClick);

      setTimeout(() => {
        this.ele.language.removeClass(this.selector.languageActive);
        if(focusEl === null){
          this.ele.language.target.forEach((btn) => {
            if ($q(btn).closest('.footer-language').css('display') !== 'none') {
              btn.focus();
            }
          });
        }
      }, 30);
    }

    openCategory($active) {
      if (this.ele.categoryActive !== null) {
        this.ele.categoryActive.removeClass(this.selector.categoryActive);
        $active.addClass(this.selector.categoryActive);
        
        const btnData = $active.closest(this.selector.categoryItem).target[0].getBoundingClientRect();
        if (btnData.top < $active.height() * -1) {
          const top = document.body.scrollTop || document.documentElement.scrollTop;
          const left = document.body.scrollLeft || document.documentElement.scrollLeft;
          
          window.scrollTo(left, top + btnData.top);
        }

        this.ele.categoryActive.addClass(this.selector.categoryActive);
        $active.removeClass(this.selector.categoryActive);

        this.closeCategory(this.ele.categoryActive);
      }

      $active.addClass(this.selector.categoryActive);
      $active.attr('aria-expanded', true);
      $active.parent().find(this.selector.categoryList).slideDown(500);
      const i18nCloseText = $active.find('.hidden').target[0].dataset.i18nClose;
      $active.find('.hidden').target[0].innerHTML = i18nCloseText;

      this.ele.categoryActive = $active;
    }

    closeCategory($activeOld, noMotion = false) {
      const $list = $activeOld.parent().find(this.selector.categoryList);
      const i18nOpenText = $activeOld.find('.hidden').target[0].dataset.i18nOpen;
      if(noMotion){
        $activeOld.removeClass(this.selector.categoryActive);
        $activeOld.find('.hidden').target[0].innerHTML = i18nOpenText;
      }else{
        const clearStyle = $list.isAnimate();
        $list.stop().slideUp(500, () => {
          $activeOld.removeClass(this.selector.categoryActive);
          $activeOld.find('.hidden').target[0].innerHTML = i18nOpenText;

          if (clearStyle) {
            $list.css({
              height: '',
              display: '',
              overflow: '',
            });
          }
        });
      }
      $activeOld.attr('aria-expanded', false);

      this.ele.categoryActive = null;
    }

    setLengthTop() {
      // this.ele.language.css({
      //   top: '',
      // });

      // if (this.isPCmode) {
      //   return;
      // }
      
      // const boxLenguate = this.ele.language.target[0].getBoundingClientRect();
      // const boxTarget = this.ele.languageTopTarget.target[0].getBoundingClientRect();

      // const top = (boxLenguate.top - boxTarget.bottom) * -1;
      // this.ele.language.css({
      //   top: `${top}px`,
      // });
    }
  }

  function init() {
    $q(selector.section).target.forEach((element) => {
      if (!Footer.instances.has(element)) {
        new Footer(element);
      }
    });
  }
  
  function reInit() {
    $q(selector.section).target.forEach((element) => {
      if (Footer.instances.has(element)) {
        const instances =  Footer.instances.get(element);
        instances.reInit();
      }
    });
  }

  Footer.instances = new WeakMap();

  window.sg.components.footer = { reInit };

  $q.ready(init);
})();

(() => {
  const $q = window.sg.common.$q;
  const menu = window.sg.common.menu;
  const getCurrentDevice = window.sg.common.utils.getCurrentDevice;

  class CookieBar {
    constructor(el) {
      this.els = {
        el,
        cookieBarShopBanner: el.querySelector('.cookie-bar__app-banner'),
        cookieBarShopBannerCloseButton: el.querySelector('.cookie-bar__shop-app-close'),
        cookieBarMainArea: el.querySelector('.cookie-bar__wrap'),
        cookieBarDesc: el.querySelector('.cookie-bar__desc'),
        cookieBarDescReadMoreButton: el.querySelector('.cookie-bar__desc-read-more-btn'),
        settingButton: el.querySelector('.cookie-bar__setting'),
        settingConditionWrap: el.querySelector('.cookie-bar__setting-condition-wrap'),
        cookieBarMainCloseButton: el.querySelector('.cookie-bar__main-close'),
      };

      this.isShowSettingConditionWrap = false;
      this.isShowCookieBarDescFull = false;
      this.isMobileShopBanner = false;
      this.isMainArea = false;

      this.init();
    }

    init() {
      if (CookieBar.instances.get(this.els.el)) {
        return;
      }

      CookieBar.instances.set(this.els.el, this);

      this.bindEvents();

      this.checkCookieBarDescHeight();
      this.checkCookieBarCloseStatus();
    }

    reInitMobileAppBar() {
      this.checkCookieBarCloseStatus();
    }

    bindEvents() {
      this.els.cookieBarMainCloseButton.addEventListener('click', this.closeMain.bind(this));

      if (this.els.cookieBarShopBannerCloseButton) {
        this.els.cookieBarShopBannerCloseButton.addEventListener('click', this.closeBanner.bind(this));
      }

      if (this.els.settingButton) {
        this.els.settingButton.addEventListener('click', () => {
          if (this.isShowSettingConditionWrap) {
            this.els.settingConditionWrap.removeAttribute('style');
            this.isShowSettingConditionWrap = false;
          } else {
            this.els.settingConditionWrap.style.display = 'block';
            this.isShowSettingConditionWrap = true;
          }
        });
      }

      this.els.cookieBarDescReadMoreButton.addEventListener('click', () => {
        this.els.cookieBarDesc.classList.remove('cookie-bar__desc--ellipsis');
        this.els.cookieBarDescReadMoreButton.style.display = 'none';
        this.isShowCookieBarDescFull = true;
      });

      window.addEventListener('resize', () => {
        this.checkCookieBarDescHeight();
        this.checkCookieBarCloseStatus();
      });
    }

    checkCookieBarDescHeight() {
      if (getCurrentDevice() === 'mobile') {
        if (!this.isShowCookieBarDescFull) {
          const height = parseFloat(window.getComputedStyle(this.els.cookieBarDesc).height);
          const lineHeight = parseFloat(window.getComputedStyle(this.els.cookieBarDesc).lineHeight);

          if (height > (lineHeight * 2)) {
            this.els.cookieBarDesc.classList.add('cookie-bar__desc--ellipsis');
            this.els.cookieBarDescReadMoreButton.style.display = 'block';
          }
        }
      } else {
        this.els.cookieBarDesc.classList.remove('cookie-bar__desc--ellipsis');
        this.els.cookieBarDescReadMoreButton.style.display = 'none';
      }
    }

    checkCookieBarCloseStatus() {
      if(this.isMobileShopBanner && !this.isMainArea) {
        if (getCurrentDevice() === 'mobile') {
          this.els.el.style.display = 'block';
        } else {
          this.els.el.style.display = 'none';
        }
      }
    }

    closeBanner() {
      this.els.cookieBarShopBanner.classList.remove('cookie-bar__app-banner--visible');
      this.isMobileShopBanner = false;

      if(!this.isMainArea) this.els.el.style.display = 'none';
    }

    showBanner() {
      this.els.cookieBarShopBanner.classList.remove('cookie-bar--hidden');
      this.isMobileShopBanner = true;
    }

    closeMain() {
      this.els.cookieBarMainArea.classList.add('cookie-bar--hidden');
      this.isMainArea = false;

      if(!this.isMobileShopBanner) {
        this.els.el.style.display = 'none';
      } else {
        this.checkCookieBarCloseStatus();
      }
    }

    showMain() {
      this.els.cookieBarMainArea.classList.remove('cookie-bar--hidden');
      this.isMainArea = true;
    }
  }

  CookieBar.instances = new WeakMap();

  const cookieBar = {
    init() {
      $q('.cookie-bar').target.forEach((el) => {
        if (!CookieBar.instances.has(el)) {
          new CookieBar(el);
        }
      });
    },
    reInit() {
      $q('.cookie-bar').find('.menu').target.forEach((dn) => {
        menu.reInit(dn);
      });
    },
    showCookieBar() {
      CookieBar.instances.get(document.querySelector('.cookie-bar')).isMainArea = true;
      CookieBar.instances.get(document.querySelector('.cookie-bar')).showMain();
      CookieBar.instances.get(document.querySelector('.cookie-bar')).els.el.style.display = 'block';
      CookieBar.instances.get(document.querySelector('.cookie-bar')).checkCookieBarDescHeight();
    },
    showMobileAppBanner() {
      this.showCookieBar();
      CookieBar.instances.get(document.querySelector('.cookie-bar')).els.cookieBarMainArea.classList.add('cookie-bar--hidden');
      CookieBar.instances.get(document.querySelector('.cookie-bar')).isMainArea = false;
      CookieBar.instances.get(document.querySelector('.cookie-bar')).els.cookieBarShopBanner.classList.add('cookie-bar__app-banner--visible');
      CookieBar.instances.get(document.querySelector('.cookie-bar')).isMobileShopBanner = true;
      CookieBar.instances.get(document.querySelector('.cookie-bar')).reInitMobileAppBar();
    },
  };

  window.sg.components.cookieBar = cookieBar;

  $q.ready(cookieBar.init);
})();

/*!
 * samsung.com GEO Cannibalization
 * src : /samsungp5/components/common/cm-g-gnb-201807/clientlibs/devjs/main1.gnb1.smg.global.cookieGeo.js
 * 
 * @version 1.0.0
 * @since 2018.06.26
 */
;(function(win, $){
	'use strict';
	
	var countryData = [
		{ "site_code": "CA_FR", "global": {"country_name": "Canada", "lang": "French"}, "local": {"country_name": "Canada", "lang": "Français"}, "country_codes": ["ca"] },
		{ "site_code": "CA", "global": {"country_name": "Canada", "lang": "English"}, "local": {"country_name": "Canada", "lang": "English"}, "country_codes": ["ca"] },
		{ "site_code": "MX", "global": {"country_name": "Mexico", "lang": "Spanish"}, "local": {"country_name": "México", "lang": "Españo"}, "country_codes": ["mx"] },
		{ "site_code": "BR", "global": {"country_name": "Brazil", "lang": "Portuguese"}, "local": {"country_name": "Brasil", "lang": "Português"}, "country_codes": ["br"] },
		{ "site_code": "LATIN", "global": {"country_name": "Latin America", "lang": "Spanish"}, "local": {"country_name": "Latin", "lang": "Español"}, "country_codes": ["gt", "ni", "do", "bo", "ec", "sv", "cr", "pa", "hn"] },
		{ "site_code": "LATIN_EN", "global": {"country_name": "Latin America", "lang": "English"}, "local": {"country_name": "Latin", "lang": "English"}, "country_codes": ["gy", "gp", "mq", "bb", "bm", "bz", "lc", "sr", "aw", "ht", "ag", "jm", "ky", "tt"] }, 
		{ "site_code": "CO", "global": {"country_name": "Colombia", "lang": "Spanish"}, "local": {"country_name": "Colombia", "lang": "Español"}, "country_codes": ["co"] }, 
		{ "site_code": "AR", "global": {"country_name": "Argentina", "lang": "Spanish"}, "local": {"country_name": "Argentina", "lang": "Español"}, "country_codes": ["ar"] },
		{ "site_code": "UY", "global": {"country_name": "Uruguay", "lang": "Spanish"}, "local": {"country_name": "Uruguay", "lang": "Español"}, "country_codes": ["uy"] },
		{ "site_code": "PY", "global": {"country_name": "Paraguay", "lang": "Spanish"}, "local": {"country_name": "Paraguay", "lang": "Español"}, "country_codes": ["py"] },
		{ "site_code": "CL", "global": {"country_name": "Chile", "lang": "Spanish"}, "local": {"country_name": "Chile", "lang": "Español"}, "country_codes": ["cl"] },
		{ "site_code": "PE", "global": {"country_name": "Peru", "lang": "Spanish"}, "local": {"country_name": "Perú ", "lang": "Español"}, "country_codes": ["pe"] },
		{ "site_code": "SG", "global": {"country_name": "Singapore", "lang": "English"}, "local": {"country_name": "Singapore", "lang": "English"}, "country_codes": ["sg"] },
		{ "site_code": "AU", "global": {"country_name": "Australia", "lang": "English"}, "local": {"country_name": "Australia", "lang": "English"}, "country_codes": ["au"] },
		{ "site_code": "NZ", "global": {"country_name": "New Zealand", "lang": "English"}, "local": {"country_name": "New Zealand", "lang": "English"}, "country_codes": ["nz"] },
		{ "site_code": "ID", "global": {"country_name": "Indonesia", "lang": "Indonesian"}, "local": {"country_name": "Indonesia", "lang": "Bahasa Indonesia"}, "country_codes": ["id"] },
		{ "site_code": "TH", "global": {"country_name": "Thailand", "lang": "Thai"}, "local": {"country_name": "ประเทศไทย", "lang": "ไทย"}, "country_codes": ["th"] },
		{ "site_code": "VN", "global": {"country_name": "Vietnam", "lang": "Vietnamese"}, "local": {"country_name": "Việt Nam", "lang": "Tiếng Việt"}, "country_codes": ["vn"] },
		{ "site_code": "MY", "global": {"country_name": "Malaysia", "lang": "English"}, "local": {"country_name": "Malaysia", "lang": "English"}, "country_codes": ["my"] },
		{ "site_code": "MM", "global": {"country_name": "Myanmar", "lang": "Burmese"}, "local": {"country_name": "Myanmar", "lang": "Burmese"}, "country_codes": ["mm"] },
		{ "site_code": "JP", "global": {"country_name": "Japan", "lang": "Japanese"}, "local": {"country_name": "日本", "lang": "日本語"}, "country_codes": ["jp"] },
		{ "site_code": "IN", "global": {"country_name": "India", "lang": "English"}, "local": {"country_name": "India", "lang": "English"}, "country_codes": ["in", "np", "bd", "lk"] },
		{ "site_code": "UK", "global": {"country_name": "United Kingdom", "lang": "English"}, "local": {"country_name": "United Kingdom", "lang": "English"}, "country_codes": ["gb", "uk"] },
		{ "site_code": "IE", "global": {"country_name": "Ireland", "lang": "English"}, "local": {"country_name": "Ireland", "lang": "English"}, "country_codes": ["ie"] },
		{ "site_code": "IT", "global": {"country_name": "Italy", "lang": "Italian"}, "local": {"country_name": "Italia", "lang": "Italiano"}, "country_codes": ["it", "mt"] },
		{ "site_code": "ES", "global": {"country_name": "Spain", "lang": "Spanish"}, "local": {"country_name": "Espana", "lang": "Espanol"}, "country_codes": ["es"] },
		{ "site_code": "HU", "global": {"country_name": "Hungary", "lang": "Hungarian"}, "local": {"country_name": "Magyarország", "lang": "Magyar"}, "country_codes": ["hu"] },
		{ "site_code": "DE", "global": {"country_name": "Germany", "lang": "German"}, "local": {"country_name": "Deutschland", "lang": "Deutsch"}, "country_codes": ["de"] },
		{ "site_code": "SE", "global": {"country_name": "Sweden", "lang": "Swedish"}, "local": {"country_name": "Sverige", "lang": "Svenska"}, "country_codes": ["se"] },
		{ "site_code": "DK", "global": {"country_name": "Denmark", "lang": "Danish"}, "local": {"country_name": "Danmark", "lang": "Dansk"}, "country_codes": ["dk"] },
		{ "site_code": "FI", "global": {"country_name": "Finland", "lang": "Finnish"}, "local": {"country_name": "Suomi", "lang": "Suomi"}, "country_codes": ["fi"] },
		{ "site_code": "NO", "global": {"country_name": "Norway", "lang": "Norwegian"}, "local": {"country_name": "Norge", "lang": "Norsk"}, "country_codes": ["no"] },
		{ "site_code": "FR", "global": {"country_name": "France", "lang": "French"}, "local": {"country_name": "France", "lang": "Français"}, "country_codes": ["fr"] },
		{ "site_code": "PT", "global": {"country_name": "Portugal", "lang": "Portuguese"}, "local": {"country_name": "Portugal", "lang": "Português"}, "country_codes": ["pt"] },
		{ "site_code": "PL", "global": {"country_name": "Poland", "lang": "Polish"}, "local": {"country_name": "Polska", "lang": "Polski"}, "country_codes": ["pl"] },
		{ "site_code": "GR", "global": {"country_name": "Greece", "lang": "Greek"}, "local": {"country_name": "Ελλάδα", "lang": "Ελληνικά"}, "country_codes": ["gr"] },
		{ "site_code": "CZ", "global": {"country_name": "Czech", "lang": "Czech"}, "local": {"country_name": "Česká republika", "lang": "Čeština"}, "country_codes": ["cz"] },
		{ "site_code": "SK", "global": {"country_name": "Slovakia", "lang": "Slovakian"}, "local": {"country_name": "Slovensko", "lang": "Slovenčina"}, "country_codes": ["sk"] },
		{ "site_code": "RO", "global": {"country_name": "Romania", "lang": "Romanian"}, "local": {"country_name": "Romania", "lang": "Romanian"}, "country_codes": ["ro"] },
		{ "site_code": "BG", "global": {"country_name": "Bulgaria", "lang": "Bulgarian"}, "local": {"country_name": "България", "lang": "Български"}, "country_codes": ["bg"] },
		{ "site_code": "AT", "global": {"country_name": "Austria", "lang": "German"}, "local": {"country_name": "Österreich", "lang": "Deutsch"}, "country_codes": ["at"] },
		{ "site_code": "CH", "global": {"country_name": "Switzerland", "lang": "German"}, "local": {"country_name": "Schweiz", "lang": "Deutsch"}, "country_codes": ["ch"] },
		{ "site_code": "CH_FR", "global": {"country_name": "Switzerland", "lang": "French"}, "local": {"country_name": "Suisse", "lang": "Francaise"}, "country_codes": ["ch"] },
		{ "site_code": "BE", "global": {"country_name": "Belgium", "lang": "Dutch"}, "local": {"country_name": "België", "lang": "Nederlands"}, "country_codes": ["be"] },
		{ "site_code": "BE_FR", "global": {"country_name": "Belgium", "lang": "French"}, "local": {"country_name": "Belgium", "lang": "French"}, "country_codes": ["lu"] },
		{ "site_code": "NL", "global": {"country_name": "Netherlands", "lang": "Dutch"}, "local": {"country_name": "Nederland", "lang": "Nederlands"}, "country_codes": ["nl"] },
		{ "site_code": "LV", "global": {"country_name": "Latvia", "lang": "Latvian"}, "local": {"country_name": "Latvija", "lang": "Latviešu"}, "country_codes": ["lv"] },
		{ "site_code": "LT", "global": {"country_name": "Lithuania", "lang": "Lithuanian"}, "local": {"country_name": "Lietuva", "lang": "Lietuvių"}, "country_codes": ["lt"] },
		{ "site_code": "EE", "global": {"country_name": "Estonia", "lang": "Estonian"}, "local": {"country_name": "Eesti", "lang": "Eesti"}, "country_codes": ["ee"] },
		{ "site_code": "RS", "global": {"country_name": "Serbia", "lang": "Serbian"}, "local": {"country_name": "Cрбија", "lang": "Cрпски"}, "country_codes": ["rs"] },
		{ "site_code": "HR", "global": {"country_name": "Croatia", "lang": "Croatian"}, "local": {"country_name": "Hrvatska", "lang": "Hrvatski"}, "country_codes": ["hr"] },
		{ "site_code": "SI", "global": {"country_name": "Slovenia", "lang": "Slovenijan"}, "local": {"country_name": "Slovenija", "lang": "Slovenščina"}, "country_codes": ["sl"] },
		{ "site_code": "AL", "global": {"country_name": "Albania", "lang": "Albania"}, "local": {"country_name": "Shqipëri", "lang": "Shqi"}, "country_codes": ["al"] },
		{ "site_code": "RU", "global": {"country_name": "Russia", "lang": "Russian"}, "local": {"country_name": "Россия", "lang": "Русский"}, "country_codes": ["ru"] },
		{ "site_code": "UA", "global": {"country_name": "Ukraine", "lang": "Ukrainian"}, "local": {"country_name": "Україна", "lang": "Українська"}, "country_codes": ["ua"] },
		{ "site_code": "UA_RU", "global": {"country_name": "Ukraine", "lang": "Russian"}, "local": {"country_name": "Украина", "lang": "Pусский"}, "country_codes": ["ua"] },
		{ "site_code": "KZ_RU", "global": {"country_name": "Kazakhstan", "lang": "Russian"}, "local": {"country_name": "Казахстан", "lang": "Pусский"}, "country_codes": ["kz"] },
		{ "site_code": "KZ_KZ", "global": {"country_name": "Kazakhstan", "lang": "Kazakh"}, "local": {"country_name": "Қазақстан", "lang": "Қазақша"}, "country_codes": ["kz"] },
		{ "site_code": "UZ_RU", "global": {"country_name": "Uzbekistan", "lang": "Russian"}, "local": {"country_name": "Узбекистан", "lang": "Русский"}, "country_codes": ["uz"] },
		{ "site_code": "UZ_UZ", "global": {"country_name": "Uzbekistan", "lang": "Uzbek"}, "local": {"country_name": "O'zbekiston", "lang": "O'zbek"}, "country_codes": ["uz"] },
		{ "site_code": "AE", "global": {"country_name": "UAE", "lang": "English"}, "local": {"country_name": "UAE", "lang": "English"}, "country_codes": ["bh", "ae", "ye", "om", "qa", "kw"] },
		{ "site_code": "AE_AR", "global": {"country_name": "UAE", "lang": "Arabic"}, "local": {"country_name": "الإمارات ", "lang": "العربية"}, "country_codes": ["ae"] },
		{ "site_code": "IL", "global": {"country_name": "Israel", "lang": "Hebrew"}, "local": {"country_name": "ישראל", "lang": "עברית"}, "country_codes": ["il"] },
		{ "site_code": "SA", "global": {"country_name": "Saudi Arabia", "lang": "Arabic"}, "local": {"country_name": "المملكة العربية السعودية", "lang": "عربي"}, "country_codes": ["sa", "ly"] },
		{ "site_code": "SA_EN", "global": {"country_name": "Saudi Arabia", "lang": "English"}, "local": {"country_name": "Saudi Arabia", "lang": "English"}, "country_codes": ["sa"] },
		{ "site_code": "TR", "global": {"country_name": "Turkey", "lang": "Turkish"}, "local": {"country_name": "Türkiye", "lang": "Türkçe"}, "country_codes": ["tr"] },
		{ "site_code": "IRAN", "global": {"country_name": "Iran", "lang": "Persian"}, "local": {"country_name": "ایران", "lang": "فارسي"}, "country_codes": ["lr"] },
		{ "site_code": "LEVANT", "global": {"country_name": "Levant", "lang": "English"}, "local": {"country_name": "Levant", "lang": "English"}, "country_codes": ["lb", "jo", "iq", "ps"] },
		{ "site_code": "LEVANT_AR", "global": {"country_name": "Levant", "lang": "Arabic"}, "local": {"country_name": "Levant", "lang": "Arabic"}, "country_codes": ["lb", "jo", "iq", "ps"] },
		{ "site_code": "PK", "global": {"country_name": "Pakistan", "lang": "English"}, "local": {"country_name": "Pakistan", "lang": "English"}, "country_codes": ["pk", "af"] },
		{ "site_code": "EG", "global": {"country_name": "Egypt", "lang": "Arabic"}, "local": {"country_name": "البلد مصر", "lang": "العربية"}, "country_codes": ["eg", "so", "er"] },
		{ "site_code": "LB", "global": {"country_name": "Lebanon", "lang": "Lebanon"}, "local": {"country_name": "Lebanon", "lang": "English"}, "country_codes": ["lb"] },
		{ "site_code": "N_AFRICA", "global": {"country_name": "Africa", "lang": "French"}, "local": {"country_name": "Maroc", "lang": "Français"}, "country_codes": ["ma", "dz", "tn"] },
		{ "site_code": "AFRICA_EN", "global": {"country_name": "Africa Pan", "lang": "English"}, "local": {"country_name": "Africa", "lang": "English"}, "country_codes": ["gh", "gm", "na", "ng", "lr", "mw", "bw", "sz", "sl", "et", "ug", "zm", "zw", "ke", "tz"] },
		{ "site_code": "AFRICA_FR", "global": {"country_name": "Africa Pan", "lang": "French"}, "local": {"country_name": "Afrique", "lang": "Français"}, "country_codes": ["ga", "gn", "ne", "rw", "re", "mg", "yt", "ml", "mu", "mr", "bj", "bi", "bf", "sn", "sc", "cf", "dj", "td", "cm", "km", "ci", "cg", "cd", "tg"] },
		{ "site_code": "AFRICA_PT", "global": {"country_name": "Africa Pan", "lang": "Portuguese"}, "local": {"country_name": "África", "lang": "Português"}, "country_codes": ["gw", "mz", "ao", "cv"] },
		{ "site_code": "ZA", "global": {"country_name": "South Africa", "lang": "English"}, "local": {"country_name": "South Africa", "lang": "English"}, "country_codes": ["za"] },
		{ "site_code": "US", "global": {"country_name": "USA", "lang": "English"}, "local": {"country_name": "USA", "lang": "English"}, "country_codes": ["us"] },
		{ "site_code": "CN", "global": {"country_name": "China", "lang": "Chinese"}, "local": {"country_name": "中国", "lang": "中文"}, "country_codes": ["cn"] },
		{ "site_code": "HK", "global": {"country_name": "Hong Kong", "lang": "Chinese"}, "local": {"country_name": "香港", "lang": "繁體中文"}, "country_codes": ["hk"] },
		{ "site_code": "HK_EN", "global": {"country_name": "Hong Kong", "lang": "English"}, "local": {"country_name": "Hong Kong", "lang": "English"}, "country_codes": ["hk"] },
		{ "site_code": "TW", "global": {"country_name": "Taiwan", "lang": "Chinese"}, "local": {"country_name": "台灣", "lang": "繁體中文"}, "country_codes": ["tw"] },
		{ "site_code": "SEC", "global": {"country_name": "Korea", "lang": "Korean"}, "local": {"country_name": "대한민국", "lang": "한국어"}, "country_codes": ["kr"] },
		{ "site_code": "PH", "global": {"country_name": "Philippines", "lang": "English"}, "local": {"country_name": "Philippines", "lang": "English"}, "country_codes": ["ph"] },
		{ "site_code": "VE", "global": {"country_name": "Venezuela", "lang": "English"}, "local": {"country_name": "Venezuela", "lang": "English"}, "country_codes": ["sg", "ve"] }
	];	
	
	if('undefined' === typeof win.smg) {
		win.smg = {};
	}

	if('undefined' === typeof win.smg.aem) {
		win.smg.aem = {};
	}

	if('undefined' === typeof win.smg.aem.common) {
		win.smg.aem.common = {};
	}

	var cookieGeoNew = (function(){
		var SITE_CD = $('#siteCode').val();
		var defParams = {
			closeBtn: '.cookie-bar__close',
			akkoordBtn: '#akkoord_btn',
			cookieAcceptBtn: '.cta--contained',
			geoSelectWrap: '.cookie-bar__select',
			visitBtnsWrap: '.cookie-bar__select-ctas .menu__select',
			geoMsgCookieWrap: '.cookie-bar__msg-wrap',
			typeManage: '.cookie-bar--type-manage',
			paramsCookie: {
				commonaccepted: 'cookiesaccepted',
				accepted: 'cookiesaccepted-geo',
				acceptedCountries: 'cookiesaccepted-countries',
				banneraccepted : 'cookiesaccepted_banner',
				countryCodes: 'country_codes',
				siteCode: 'site_cd',
			}
		};

		return {
			init: function(container ,args){
				if($('.cookie-bar').length < 1){
					return;
				}
				// in 국가 MyGalaxy App 접근 판단
				var inMyGalaxyAppflag = "N";
				var browser = navigator.userAgent;
				if (SITE_CD === "in"){
					if ( browser.indexOf("MyGalaxy") > -1 || browser.indexOf("SamsungShopSDK") > -1 ){
						inMyGalaxyAppflag = "Y";
					}
					if("Y" === inMyGalaxyAppflag){
						$('.cookie-bar').remove();
						return;
					}
					var isIOS = navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
					//ios인 경우는 showMobileAppBanner()을 호출 하지 않음. 
					if(!isIOS) {
						window.sg.components.cookieBar.showMobileAppBanner();
					}
					
				}
				
				if(!(this.$container = container).length || this.$container.data('initialized')) {
					return;	
				}
				if(!SITE_CD) return;

				this.options = def(defParams, (args || {}));

				this.assignedHTMLElements();
				this.initProperties();

				if(this.isAcceptedGeo() || this.isLocalLanguageSite()){
					this.$geoSelectWrap.remove();
				}

				if(this.isAcceptedCountries()) {
					this.$geoMsgCookieWrap.remove();
				}

				if(this.isAcceptedBanner()){
					this.removebannerInner();
				}
				
				this.setCountryInfo();
				
				if((this.isAcceptedGeo() || this.isLocalLanguageSite() || (this.visitCountryCode === '') || !this.currentCountrySiteInfo[0]) && this.isAcceptedCountries() && (this.$bannerInner === null ||  ( this.$bannerInner !== null && this.$bannerInner.length === 0 )) ){  
					return;
				}
				
				this.bindEvents();
				this.append();

				this.$container.attr('data-initialized',true);
				window.sg.components.cookieBar.showCookieBar();
			},

			assignedHTMLElements: function(){
				var $container = this.$container,
					options = this.options;
				this.$visitBtnsWrap = $container.find(options.visitBtnsWrap);
				this.$cookieGeoClose = $container.find(options.closeBtn);
				this.$akkoordBtn = $container.find(options.akkoordBtn);
				this.$cookieAcceptBtn = $container.find(options.cookieAcceptBtn);
				this.$geoSelectWrap =  $container.find(options.geoSelectWrap);
				this.$selectListToggleBtn =  $container.find(options.selectListToggleBtn);
				this.$geoMsgCookieWrap = $container.find(options.geoMsgCookieWrap);
				this.$bannerClose = $('.cookie-bar__shop-app-close');
				this.$bannerInner = $('.cookie-bar__app-banner');
			},

			initProperties: function(){
				var paramsCookie = this.options.paramsCookie;

				this.testSiteCd = this.getParam(paramsCookie.siteCode);
				this.currentSiteCode = SITE_CD.toLowerCase();

				if(this.testSiteCd){
					this.visitCountryCode = this.testSiteCd;
				}else{
					this.visitCountryCode = cookies.getCookie(paramsCookie.countryCodes).toLowerCase();
				}
				
				this.currentCountrySiteInfo = [];
				this.visitCountrySiteInfo = [];
				this.selectedSiteCode = '';
				
				this.acceptedCountries = [];

				if(cookies.getCookie(paramsCookie.acceptedCountries)) {
					this.acceptedCountries = cookies.getCookie(paramsCookie.acceptedCountries).split(',')
				}
			},

			// currentSiteCode  : url sitecd
			// visitCountryCode : user location (cookie value) / test setting url?site_cd={sitecd}
			isLocalLanguageSite: function(){
				return this.currentSiteCode === this.visitCountryCode;
			},

			isSameSiteGroup: function(){
				var visitCountrySiteInfo = this.visitCountrySiteInfo;
				var currentCountrySiteInfo = this.currentCountrySiteInfo[0];
				var isGroup = false;

				if(currentCountrySiteInfo) {
					$.each(currentCountrySiteInfo.country_codes, function(index, element){
						var coutry_code = element;
						$.each(visitCountrySiteInfo, function(index, element){
							if($.inArray(coutry_code,element.country_codes) >= 0) isGroup = true;
						});
					});
				}

				return isGroup;
			},

			setCountryInfo: function(){ 
				$.each(countryData, $.proxy(function(index, element){
					var countryCodes = element.country_codes,
						countrySiteCode = element.site_code.toLowerCase(),
						countySiteInfo = element;

					$.each(countryCodes, $.proxy(function(index, countryCode){
						if(countrySiteCode === this.currentSiteCode){
							this.currentCountrySiteInfo.push(countySiteInfo);
						}
						if(countryCode === this.visitCountryCode){
							this.visitCountrySiteInfo.push(countySiteInfo);
						}
					}, this));
				}, this));
			},

			append: function(){
				var visitCountrySiteInfo = this.visitCountrySiteInfo;
				var countrySiteInfo = this.currentCountrySiteInfo[0];

				if(!visitCountrySiteInfo.length || !countrySiteInfo){
					this.$geoSelectWrap.remove();
					return;
				}

				var visitBtnsListHtml = '';
				var dataDefaultMessage = '';
				var count = 0;
				if(!this.isSameSiteGroup()) {
					count++;
					visitBtnsListHtml +='<option value="'+count+'" site_cd="' + countrySiteInfo.site_code.toLowerCase()+'" title="Visit '+ countrySiteInfo.local.country_name +'/'+ countrySiteInfo.local.lang +' site">'+countrySiteInfo.local.country_name +' / '+ countrySiteInfo.local.lang +'</option>';
					dataDefaultMessage =countrySiteInfo.local.country_name +' / '+ countrySiteInfo.local.lang;
				}

				$.each(visitCountrySiteInfo, $.proxy(function(index, element){
					count++;
					visitBtnsListHtml +='<option value="'+count+'" site_cd="' + element.site_code.toLowerCase()+'" title="Visit '+ element.local.country_name +'/'+ element.local.lang +' site">'+ element.local.country_name +' / '+ element.local.lang +'</option>';
					
					if(dataDefaultMessage === ''){
						dataDefaultMessage =element.local.country_name +' / '+ element.local.lang;
					}
				}, this));
				this.$visitBtnsWrap.attr('data-default-message',dataDefaultMessage);
				this.$visitBtnsWrap.html(visitBtnsListHtml);
				window.sg.components.cookieBar.reInit();
			},

			bindEvents: function(){
				this.$visitBtnsWrap.on('change', $.proxy(this.onSelectBtnsClick, this));
				this.$cookieGeoClose.on('click', $.proxy(this.onCloseBtnClick, this));
				this.$akkoordBtn.on('click', $.proxy(this.onAkkoordBtnClick, this));
				this.$cookieAcceptBtn.on('click', $.proxy(this.onAcceptClick, this));
				this.$bannerClose.on('click', $.proxy(this.onBaanerCloseBtnClick, this));
			},
			
			isTypeManage: function() {
				return this.$container.is(this.options.typeManage);
			},

			onCloseBtnClick : function() {
				if(!this.isTypeManage()) {
					this.setCookieAccept();
					this.setCookieGeo();
				}
			},

			onAkkoordBtnClick : function() {
				if(!this.isTypeManage()) {
					this.setCookieAccept();
					this.setCookieGeo();
					$(".cookie-bar").hide();
				}
			},
			setCookieAccept : function() {
				var paramsCookie = this.options.paramsCookie;

				if ($.inArray(this.currentSiteCode,this.acceptedCountries) < 0) {
					this.acceptedCountries.push(this.currentSiteCode);
				}

				cookies.setCookie(paramsCookie.acceptedCountries, this.acceptedCountries, 90);
				cookies.setCookie(paramsCookie.commonaccepted, 'true', 90);
			},

			setCookieGeo : function() {
				var paramsCookie = this.options.paramsCookie;
				cookies.setCookie(paramsCookie.accepted, 'true', 90);
				cookies.setCookie(paramsCookie.commonaccepted, 'true', 90);
			},
			setBannerCookie : function() {
				var paramsCookie = this.options.paramsCookie;
				cookies.setCookie(paramsCookie.banneraccepted, 'true', 90);
			},
			onAcceptClick : function() {
				this.setCookieAccept();
				if(!this.isTypeManage()) {
					this.$geoMsgCookieWrap.remove();
				}else{
					this.setCookieGeo();
					$(".cookie-bar").hide();
				}
			},

			onSelectBtnsClick: function (e) {
				var paramsCookie = this.options.paramsCookie;

				this.selectedSiteCode = $(".cookie-bar__select-ctas .menu__select option:selected").attr("site_cd");
				this.setParamsCookie(paramsCookie.siteCode, this.selectedSiteCode, 999);

				this.setCookieGeo();
				if(!this.isTypeManage()) {
					this.setCookieAccept();
				}
			},
			onBaanerCloseBtnClick : function() {
				this.setBannerCookie();
			},
			isAcceptedGeo : function() {
				return !! cookies.getCookie(this.options.paramsCookie.accepted);
			},
			isAcceptedBanner : function() {
				return !! cookies.getCookie(this.options.paramsCookie.banneraccepted);
			},
			isAcceptedCountries : function() {
				if($.inArray(this.currentSiteCode,this.acceptedCountries) < 0) {
					return false;
				} else {
					return true;
				}
			},
			removebannerInner :function() {
				if (this.$bannerInner !== null){
					this.$bannerInner.remove();
					this.$bannerInner = null;
				}
			},
			setParamsCookie : function (cookieName, cookieValue, expireDate) {
				var today = new Date(),
					moveURL = window.location.protocol + "//" + window.location.host + "/" + this.selectedSiteCode;

				today.setDate(today.getDate() + parseInt(expireDate));
				document.cookie = cookieName + "=" + escape(cookieValue) + "; path=/; expires=" + today.toGMTString() + ";";
				window.location.href = moveURL;
			},

			getParam : function (key) {
				var paramap = {};

				document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g, function () {
					function decode(s) {
						return decodeURIComponent(s.split("+").join(" "));
					}
		 
					paramap[decode(arguments[1])] = decode(arguments[2]);
				});
		 
				return paramap[key];
			}
		};
	})();

	$(function(){
		cookieGeoNew.init($('.cookie-bar__wrap'));
	});
})(window, jQuery);
(() => {
  const $q = window.sg.common.$q;
  const selector = {
    section: '.notice',
  };
  
  class Notice {
    constructor(component) {
      this.selector = {
        section: selector.section,
        btn: '.notice__toggle-btn',
        hidden: '.notice__toggle-btn .hidden',
        content: '.notice__inner',
        nomarl: '.notice__column notice__column--collapsed',
        expend: '.notice__column notice__column--expanded',
        close: '.notice__close',
      };
      
      this.timer = null;
      this.ele = {
        window: $q(window),
        section: $q(component),
        btn: null,
        content: null,
        nomarl: null,
        expand: null,
        close: null,
      };

      this.toggleType = this.ele.section.hasClass('notice--toggle');

      this.handler = {
        resize: () => {
          if (this.toggleType) {
            this.ele.section.css({
              'height': '',
            });

            if (this.timer) {
              clearTimeout(this.timer);
            }
            setTimeout(() => {
              this.setHeight();
            }, 400);
          }
        },
        clickClose: (evt) => {
          evt.preventDefault();
          this.ele.section.hide();
          this.ele.window.trigger('resize');
        },
      };

      this.init();

      Notice.instances.set(component, this);
    }
    
    setProperty() {
      this.ele.btn = this.ele.section.find(this.selector.btn);

      if (this.toggleType) {
        this.ele.hidden = this.ele.section.find(this.selector.hidden);
        this.ele.content = this.ele.section.find(this.selector.content);
        this.ele.pdBanner = this.ele.section.find(this.selector.pdBanner);
        this.ele.nomarl = this.ele.section.find(this.selector.nomarl);
        this.ele.expand = this.ele.section.find(this.selector.expend);
      } else {
        this.ele.close = this.ele.section.find(this.selector.close);
      }
    }

    init() {
      this.setProperty();
      this.bindEvents();
    }

    reInit() {
      this.setProperty();
      this.bindEvents();
    }

    setHeight() {
      this.ele.section.css({
        'height': `${this.ele.content.outerHeight()}px`,
      });
    }

    bindEvents() {
      if (this.toggleType) {
        this.ele.btn.off('click').on('click', () => {
          if (this.ele.section.hasClass('is-expanded')) {
            this.closeBanner();
          } else {
            this.openBanner();
          }
        });
        this.setHeight();
      } else {
        this.ele.close.off('click').on('click', this.handler.clickClose);
      }
      this.ele.window.off('resize', this.handler.resize).on('resize', this.handler.resize);
    }

    openBanner() {
      this.ele.section.addClass('is-expanded');
      this.ele.section.attr('aria-expanded', true);
      this.ele.nomarl.hide();
      this.ele.expand.show();
      this.ele.hidden.innerHTML('Click to Collapse');
      this.setHeight();
    }

    closeBanner() {
      this.ele.section.removeClass('is-expanded');
      this.ele.section.attr('aria-expanded', false);
      this.ele.nomarl.show();
      this.ele.expand.hide();
      this.ele.hidden.innerHTML('Click to Expand');
      this.setHeight();
    }
  }

  function init() {
    $q(selector.section).target.forEach((element) => {
      if (!Notice.instances.has(element)) {
        new Notice(element);
      }
    });
  }
  
  function reInit() {
    $q(selector.section).target.forEach((element) => {
      if (Notice.instances.has(element)) {
        const instances =  Notice.instances.get(element);
        instances.reInit();
      } else {
        new Notice(element);
      }
    });
  }

  function closeBanner(motion = true) {
    $q(selector.section).target.forEach((element) => {
      if (Notice.instances.has(element)) {
        const instances =  Notice.instances.get(element);
        instances.closeBanner(motion);
      }
    });
  }

  Notice.instances = new WeakMap();

  window.sg.components.notice = { 
    init,
    reInit,
    closeBanner,
  };

  $q.ready(init);
})();


