(()=>{var e={22485:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},17249:(e,t,i)=>{"use strict";i.d(t,{oc:()=>m,go:()=>o,ag:()=>h});var n=i(25617),a=(i(71756),i(59538),i(31781),i(59496)),s=i(22485),r=i.n(s);let o=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});var l=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}(l||{}),d=function(e){return e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other",e}(d||{});let c={};const u=e=>"ar"===e?"ar-u-nu-latn":e;class m{constructor(){(0,n.Z)(this,"_relativeTimeFormat",null),(0,n.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=o.en,this._urlLocale=o.en}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));let i=this._dateTimeFormats.get(t);return void 0===i&&(i=new Intl.DateTimeFormat(u(this._locale),e),this._dateTimeFormats.set(t,i)),i}getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat(this._locale)),this._relativeTimeFormat}getDictionary(){return this._dictionary}setDictionary(e){this._dictionary=e}setLocale(e){this._locale=e,this._dateTimeFormats.clear(),this._relativeTimeFormat=null}setUrlLocale(e){this._urlLocale=e}getLocale(){return this._locale}getUrlLocale(){return this._urlLocale}getSmartlingLocale(){const e=this._locale;return r()[e]||e}toLocaleLowerCase(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}toLocaleUpperCase(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}get(e){const t=e in this._dictionary?this._dictionary[e]:e;let i="";for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];if("string"!=typeof t){const e=s[0],n=((e,t)=>{try{return(c[e]||(c[e]=new Intl.PluralRules(e))).select(t)}catch{return d.OTHER}})(this._locale,parseInt(e,10)),a=t[n];void 0!==a?i=a:t.other&&(i=t.other)}else i=t;if(/%\d%/.test(i)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const o={},l={};s.forEach(((e,t)=>{const i="object"!=typeof e||null===e||(0,a.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[n,s]of i)(0,a.isValidElement)(s)?l[n]=s:void 0!==s&&(o[n]=s)})),i=i.replace(_(Object.keys(o)),((e,t)=>{const i=t.slice(1,-1),n=o[i];return"number"==typeof n?this.formatNumber(n):n}));const u=Object.keys(l);return u.length?(0,a.createElement)(a.Fragment,null,i.split(_(u)).map(((e,t)=>{if(t%2){var i;const t=e.slice(1,-1),n=l[t];return(0,a.cloneElement)(n,{key:null!==(i=n.key)&&void 0!==i?i:t})}return e})).filter((e=>""!==e))):i}getSeparator(){switch(this._locale){case o.ar:return l.AR;case o.fa:return l.FA;default:return l.EN}}formatNumber(e,t){return e.toLocaleString(u(this._locale),t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(t).format(e)}formatRelativeDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=new Date(Date.now());e=new Date(e);const n=this.getRelativeTimeFormat(),a=e.getTime()-i.getTime(),s=Math.abs(a)<2592e6;if(null!==n&&s){const{weeks:e,days:t,hours:i,minutes:s,seconds:o}=(r=a,{seconds:Math.round(r/1e3),minutes:Math.round(r/1e3/60),hours:Math.round(r/1e3/60/60),days:Math.round(r/1e3/60/60/24),weeks:Math.round(r/1e3/60/60/24/7)});return Math.abs(t)>=7?n.format(e,"weeks"):Math.abs(i)>=24?n.format(t,"days"):Math.abs(s)>=60?n.format(i,"hours"):Math.abs(o)>=60?n.format(s,"minutes"):n.format(o,"seconds")}var r;return this.formatDate(e,t)}__resetForTests(){this._dictionary={},this._locale=o.en,c={}}}function _(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const h=new m},15785:(e,t,i)=>{"use strict";i.d(t,{D1:()=>s,Le:()=>kt,_8:()=>At,OU:()=>o,J_:()=>r,rU:()=>n,KG:()=>St,zq:()=>ft,MD:()=>Ct});i(59538),i(71756);var n,a,s,r,o,l,d=i(83668),c=i(53497),u=(i(70238),i(45880),i(31781),i(74772)),m=i(51492);!function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAY="play",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.MEDIA_RATECHANGE="ratechange",e.MEDIA_RESIZE="resize",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_STALLED="stalled",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.FRAGMENT_APPENDED="fragment_appended",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LIST_PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAY="play",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_SEEKING="seeking",e.PLAYER_FRAGMENT_FETCHED="fragment_fetched",e.PLAYER_FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.PLAYER_VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.PLAYER_VIDEO_RESIZED="resize",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(n||(n={})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(a||(a={})),function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(s||(s={})),function(e){e.SUCCESS="RESULT_SUCCESS",e.INVALID="RESULT_INVALID",e.FORBIDDEN="RESULT_FORBIDDEN",e.OUT_OF_BOUNDS="RESULT_OUT_OF_BOUNDS",e.NO_LIST="RESULT_NO_LIST",e.NO_TRACK="RESULT_NO_TRACK",e.LIST_END="RESULT_LIST_END",e.INVALID_TRACK="RESULT_INVALID_TRACK",e.CANCELLED="CANCELLED",e.NO_TRACK_PLAYER="NO_TRACK_PLAYER"}(r||(r={})),function(e){e.MP3="MP3",e.MP4="MP4",e.MP4_DUAL="MP4_DUAL",e.MP4_CBCS="MP4_CBCS",e.MP4_FLAC="MP4_FLAC",e.MANIFEST_ID="MANIFEST_ID"}(o||(o={})),function(e){e.FRAGMENT_FETCHED="fragment_fetched",e.FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.VIDEO_PROFILE_CHANGED="video_profile",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded"}(l||(l={}));class _ extends Error{constructor(e,t){super(t),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.code=e,this.message=t,this.name="PlaybackError"}static fatal(e,t){const i=new _(e,t);return i.unrecoverable=!0,i}}class h extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.STORAGE_ERROR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"File Error";super(t),this.canPlayNext=!0,this.debug={},this.code=e,this.message=t,this.name="FileError"}}i(30848),i(59346),i(45060),i(60252),i(37193),i(12041),i(31266),i(36507),i(55553),i(6127),i(86554),i(60178);var p=i(28848);class v extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.EME_ERROR_UNKNOWN,t=arguments.length>1?arguments[1]:void 0;super(t),this.status=-1,this.licenseServer="",this.shouldRefreshEndpoint=!1,this.unrecoverable=!1,this.debug={},this.code=e,this.message=t,this.name="EMEError"}static fatal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.EME_ERROR_UNKNOWN;const t=new v(e,arguments.length>1?arguments[1]:void 0);return t.unrecoverable=!0,t}}class k extends Error{constructor(e,t){super(t),this.name="CappingError",this.message=t,this.code=e}}function g(e){const t=document.createEvent("Event");t.initEvent("encrypted",!1,!1),t.initDataType="cenc",t.initData=e.initData,t.fromPolyfill=!0,this.dispatchEvent(t)}class E extends u.B{constructor(e){super(n.KEY_SESSION_MESSAGE,null),this.messageType="license-request",this.message=e}}class S extends u.vp{constructor(e){super(),this._nativeKeySession=null,this._lastUpdateDeferred=(0,p.$)(),this._lastGenerateDeferred=(0,p.$)(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){const e=this._nativeKeySession;e&&(e.addEventListener(n.MS_KEY_ADDED,this._onKeyAdded),e.addEventListener(n.MS_KEY_ERROR,this._onKeyError),e.addEventListener(n.MS_KEY_MESSAGE,this._onKeyMessage))}_detach(){const e=this._nativeKeySession;e&&(e.removeEventListener(n.MS_KEY_ADDED,this._onKeyAdded),e.removeEventListener(n.MS_KEY_ERROR,this._onKeyError),e.removeEventListener(n.MS_KEY_MESSAGE,this._onKeyMessage))}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new E(e.message.buffer)),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null))}_onKeyAdded(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null),this.emit(n.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error;this._lastGenerateDeferred&&(this._lastGenerateDeferred.reject(e),this._lastGenerateDeferred=null),this._lastUpdateDeferred&&(this._lastUpdateDeferred.reject(e),this._lastUpdateDeferred=null),this.emit(n.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return new Promise(((e,i)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=e,this._lastGenerateDeferred.reject=i),this._nativeKeySession=this._nativeMediaKeys.createSession("audio/mp4",new Uint8Array(t),null),this._attach()}))}update(e){return new Promise(((t,i)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=t,this._lastGenerateDeferred.reject=i),this._nativeKeySession&&this._nativeKeySession.update(new Uint8Array(e))}))}close(){return new Promise((e=>{this._nativeKeySession&&this._nativeKeySession.close(),this._detach(),e(!0)}))}}class y{constructor(e){this._lastBoundSetter=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new MSMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.msSetMediaKeys(this._nativeMediaKeys),void t();const i=()=>{e.removeEventListener(n.MEDIA_LOADEDMETADATA,i),this._lastBoundSetter=null,e.msSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=i,e.addEventListener(n.MEDIA_LOADEDMETADATA,i),e.addEventListener(n.MS_NEEDKEY,g),t()}))}detach(e){this._lastBoundSetter&&(e.removeEventListener(n.MS_NEEDKEY,g),e.removeEventListener(n.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(){return Promise.reject(new v(s.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){return new S(this._nativeMediaKeys)}}function f(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class N{constructor(e,t){if(this._configuration=null,this.keySystem=e,!this._checkConfig(t))throw new v(s.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){var t,i;const n=this.keySystem;for(const a of e){const e={initDataTypes:a.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:a.label};let s;if(a.audioCapabilities&&a.audioCapabilities.length&&e.audioCapabilities){s=!1;for(const i of a.audioCapabilities){const a=null===(t=i.contentType)||void 0===t?void 0:t.split(";")[0];MSMediaKeys.isTypeSupported(n,a)&&(e.audioCapabilities.push(i),s=!0)}}if(a.videoCapabilities&&a.videoCapabilities.length&&e.videoCapabilities){s=!1;for(const t of a.videoCapabilities){const a=null===(i=t.contentType)||void 0===i?void 0:i.split(";")[0];MSMediaKeys.isTypeSupported(n,a)&&(e.videoCapabilities.push(t),s=!0)}}if(s)return this._configuration=e,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new y(this.keySystem))}))}}const T=c.P.forTag("eme_polyfill.v0_1b");class R extends u.vp{constructor(e,t,i){super(),this._mediaElement=null,this._lastUpdateDeferred=null,this._lastGenerateResolver=null,this.sessionId=null,this._keySystem=e,this._mediaElement=t,this._prefix=i,this.addEventListener=this.addListener,this.removeEventListener=this.removeListener}_addPrefix(e){return this._prefix?this._prefix+e.replace(/\b[a-z]/,(function(e){return e.toUpperCase()})):e}generateComplete(e){this.emitEvent(new E(e)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null)}updateComplete(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this.emit(n.KEY_SESSION_STATUSES_CHANGE,null)}handleErrorEvent(e){const t=new v(s.EME_MEDIA_KEY_SESSION_V0_1B_ERROR,"MediaKeySession v0.1b Error");t.debug.errorCode=e.errorCode,t.debug.systemCode=e.systemCode,!e.sessionId&&this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):e.sessionId&&this._lastUpdateDeferred?(this._lastUpdateDeferred.reject(t),this._lastUpdateDeferred=null):this.emit(n.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return this._mediaElement?new Promise(((e,i)=>{this._lastGenerateResolver={resolve:e,reject:i};try{this._mediaElement[this._addPrefix("generateKeyRequest")](this._keySystem,new Uint8Array(t))}catch(n){i(n),this._lastGenerateResolver=null}})):Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."))}update(e){if(!this._mediaElement)return Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."));if(this._lastUpdateDeferred){const t=this.update.bind(this,e);return this._lastUpdateDeferred.promise.then(t,t)}const t=(0,p.$)();this._lastUpdateDeferred=t;try{this._mediaElement[this._addPrefix("addKey")](this._keySystem,new Uint8Array(e),null,this.sessionId)}catch(i){t.reject(i),this._lastUpdateDeferred=null}return t.promise}close(){if(this.sessionId&&this._mediaElement)try{this._mediaElement[this._addPrefix("cancelKeyRequest")](this._keySystem,this.sessionId)}catch(e){T.warn("Could not close keysession",e)}return Promise.resolve(!0)}}class A{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._mediaElement=null,this._waitingForSessionIds=[],this._sessionMap={},this.shouldRefreshPerTrack=!0,this._keySystem=e,this._prefix=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}attach(e){this._mediaElement=e;const t=this._prefix;e.addEventListener(t+n.V0_1B_NEEDKEY,g);const i=e.addEventListener.bind(e);i(t+n.V0_1B_KEY_ADDED,this._onKeyAdded),i(t+n.V0_1B_KEY_ERROR,this._onKeyError),i(t+n.V0_1B_KEY_MESSAGE,this._onKeyMessage)}detach(e){this._mediaElement=null;const t=this._prefix;e.removeEventListener(t+n.V0_1B_NEEDKEY,g);const i=e.removeEventListener.bind(e);i(t+n.V0_1B_KEY_ADDED,this._onKeyAdded),i(t+n.V0_1B_KEY_ERROR,this._onKeyError),i(t+n.V0_1B_KEY_MESSAGE,this._onKeyMessage)}_getSession(e){const t=this._sessionMap[e];if(t)return t;const i=this._waitingForSessionIds.shift();return i?(i.sessionId=e,this._sessionMap[e]=i,i):null}_onKeyMessage(e){const t=this._getSession(e.sessionId);t?t.generateComplete(e.message):T.warn("Got keymessage without session.")}_onKeyAdded(e){const t=this._getSession(e.sessionId);t?t.updateComplete():T.warn("Got keyadded without session.")}_onKeyError(e){const t=this._getSession(e.sessionId);t?t.handleErrorEvent(e):T.warn("Got keyerror without session.")}setServerCertificate(){return Promise.reject(new v(s.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){const e=new R(this._keySystem,this._mediaElement,this._prefix);return this._waitingForSessionIds.push(e),e}}function b(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class C{constructor(e,t,i){if(this._configuration=null,this.keySystem=e,this._prefix=i,!this._checkConfig(t))throw new v(s.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){var t,i;const n=this.keySystem,a=document.createElement("video");for(const s of e){const e={initDataTypes:s.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:s.label};let r=!1;if(s.audioCapabilities&&s.audioCapabilities.length&&e.audioCapabilities){r=!1;for(const i of s.audioCapabilities){const s=null===(t=i.contentType)||void 0===t?void 0:t.split(";")[0];s&&a.canPlayType(s,n)&&(e.audioCapabilities.push(i),r=!0)}}if(s.videoCapabilities&&s.videoCapabilities.length&&e.videoCapabilities){r=!1;for(const t of s.videoCapabilities){const s=null===(i=t.contentType)||void 0===i?void 0:i.split(";")[0];s&&a.canPlayType(s,n)&&(e.videoCapabilities.push(t),r=!0)}}if(r)return this._configuration=e,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new A(this.keySystem,this._prefix))}))}}function I(e){navigator.requestMediaKeySystemAccess=function(t,i){return new Promise((n=>{n(new C(t,i,e))}))};const t=HTMLMediaElement.prototype;delete t.mediaKeys,t.setMediaKeys=b}const L=c.P.forTag("eme_polyfill.safari");class P extends u.vp{constructor(e,t){super(),this._attached=!1,this._nativeKeySession=null,this._lastGenerateResolver=(0,p.$)(),this._lastUpdateResolver=(0,p.$)(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._serverCertificate=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){if(this._attached)return;const e=this._nativeKeySession;e?(e.addEventListener(n.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.addEventListener(n.WEBKIT_KEY_ADDED,this._onKeyAdded),e.addEventListener(n.WEBKIT_KEY_ERROR,this._onKeyError)):L.warn("Tried to attach with no WebKitMediaKeySession")}_detach(){if(!this._attached)return;const e=this._nativeKeySession;e?(e.removeEventListener(n.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.removeEventListener(n.WEBKIT_KEY_ADDED,this._onKeyAdded),e.removeEventListener(n.WEBKIT_KEY_ERROR,this._onKeyError)):L.warn("Tried to detach with no WebKitMediaKeySession")}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new E(e.message.buffer)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null))}_onKeyAdded(){this._lastUpdateResolver&&(this._lastUpdateResolver.resolve(!0),this._lastUpdateResolver=null),this.emit(n.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error,t=new v(s.EME_MEDIA_KEY_SESSION_SAFARI_ERROR,e&&e.message||"MediaKeySession Safari Error");e&&(t.debug.errorCode=e.code,t.debug.systemCode=e.systemCode),this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):this._lastUpdateResolver&&(this._lastUpdateResolver.reject(t),this._lastUpdateResolver=null)}_rebuildInitData(e){const t=new Uint8Array(e);if(new DataView(t.buffer).getUint32(0,!0)+4!==t.byteLength)throw new v(s.EME_INIT_DATA_MALFORMED,"Malformed init data");const i=function(e){const t=Math.floor(e.byteLength/2),i=new Uint16Array(t),n=new DataView(e.buffer);for(let a=0;a<t;a++)i[a]=n.getUint16(2*a,!0);return String.fromCharCode.apply(null,i)}(t.slice(4)),n=i.match(/^skd:\/\/([0-9a-fA-F]+)/);if(!(null==n?void 0:n[1]))throw new v(s.EME_INIT_DATA_MALFORMED,"Invalid content ID");const a=n[1],r=new Uint8Array(function(e){const t=new Uint8Array(2*e.length),i=new DataView(t.buffer),n=e.split("");for(let a=0,s=n.length;a<s;a++){const e=n[a].charCodeAt(0);i.setUint16(2*a,e,!0)}return t.buffer}(a)),o=this._serverCertificate,l=new Uint8Array(t.byteLength+4+r.byteLength+4+o.byteLength);let d=0;l.set(t,d),d+=t.byteLength;const c=new DataView(l.buffer);return c.setUint32(d,r.byteLength,!0),d+=4,l.set(r,d),d+=r.byteLength,c.setUint32(d,o.byteLength,!0),d+=4,l.set(o,d),l}generateRequest(e,t){return new Promise(((e,i)=>{this._lastGenerateResolver={resolve:e,reject:i};try{const e=this._rebuildInitData(t);this._nativeKeySession=this._nativeMediaKeys.createSession("video/mp4",new Uint8Array(e),null),this._attach()}catch(n){this._lastGenerateResolver=null,i(n)}}))}update(e){const t=(0,p.$)();if(this._lastUpdateResolver=t,!this._nativeKeySession)return L.warn("Tried to update with no WebKitMediaKeySession"),t.promise;try{this._nativeKeySession.update(new Uint8Array(e))}catch(i){t.reject(i)}return t.promise}close(){return new Promise((e=>{this._detach(),e(!0)}))}}class D{constructor(e){this._lastBoundSetter=null,this._serverCertificate=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new WebKitMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.webkitSetMediaKeys(this._nativeMediaKeys),void t();const i=()=>{e.removeEventListener(n.MEDIA_LOADEDMETADATA,i),this._lastBoundSetter=null,e.webkitSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=i,e.addEventListener(n.MEDIA_LOADEDMETADATA,i),e.addEventListener(n.WEBKIT_NEEDKEY,g),t()}))}detach(e){e.removeEventListener(n.WEBKIT_NEEDKEY,g),this._lastBoundSetter&&(e.removeEventListener(n.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(e){return this._serverCertificate=new Uint8Array(e),Promise.resolve(!0)}createSession(){if(!this._serverCertificate)throw new v(s.EME_INVALID_STATE_ERROR,"The server certificate is not available");return new P(this._nativeMediaKeys,this._serverCertificate)}}class O{constructor(e,t){this.keySystem=e;const i=this._checkConfig(t);if(!i)throw new v(s.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations");this._configuration=i}_checkConfig(e){const t=this.keySystem;let i=!1;for(const n of e){const e={initDataTypes:n.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"]};if(n.audioCapabilities)for(const a of n.audioCapabilities){if(!a.contentType)continue;const n=a.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,n)&&(e.audioCapabilities.push(a),i=!0)}if(n.videoCapabilities)for(const a of n.videoCapabilities){if(!a.contentType)continue;const n=a.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,n)&&(e.videoCapabilities.push(a),i=!0)}if(i)return e}return null}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new D(this.keySystem))}))}}function F(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e?e.attach(this):Promise.resolve()}const w=c.P.forTag("eme_polyfills.tester");function x(){return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.requestMediaKeySystemAccess)&&"undefined"==typeof WebKitMediaKeys&&"undefined"!=typeof MediaKeySystemAccess&&(null===MediaKeySystemAccess||void 0===MediaKeySystemAccess?void 0:MediaKeySystemAccess.prototype.getConfiguration)?(w.log("Using native EME implementation."),"native"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.webkitGenerateKeyRequest)?(w.log('Detected "webkit" Prefixed EME v0.1b. Polyfilling.'),I("webkit"),"v0.1b-webkit"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.generateKeyRequest)?(w.log("Detected Unprefixed EME v0.1b. Polyfilling."),I(),"v0.1b"):"undefined"!=typeof MSMediaKeys?(w.log("Detected MS IE EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((i=>{i(new N(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=f}(),"ms-ie"):"function"==typeof WebKitMediaKeys?(w.log("Detected Safari EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((i=>{i(new O(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=F}(),"safari"):(w.warn("Detected no EME APIs."),null)}const M={[a.WIDEVINE]:{commonName:"widevine",licenseServer:"https://@webgate/widevine-license",withCertificate:!0,pssh_field:{audio:"pssh_widevine",video:"encryption_data"}},[a.PLAYREADY]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[a.PLAYREADY_HARDWARE]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[a.FAIRPLAY]:{commonName:"fairplay",licenseServer:"https://@webgate/fairplay-license",withCertificate:!0,pssh_field:{audio:"pssh_fairplay",video:"asset_id"}},[a.INVALID_SPOTIFY_KEY]:{commonName:"spotify-invalid",licenseServer:"https://@webgate",withCertificate:!1,pssh_field:{audio:"pssh_invalid",video:"encryption_data"}}},U=[{label:"video-sw-decode",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_DECODE"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:""},{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:""},{contentType:'video/webm; codecs="vp8"',robustness:""},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:""},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:""}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}];function j(e,t){var i,n;for(const a of e){const e={audioCapabilities:[],videoCapabilities:[]};let s,r=!1;if(null===(i=a.audioCapabilities)||void 0===i?void 0:i.length){r=!1;for(const i of a.audioCapabilities)s=i.contentType,s&&t(s)&&(e.audioCapabilities.push(i),r=!0)}if(null===(n=a.videoCapabilities)||void 0===n?void 0:n.length){r=!1;for(const i of a.videoCapabilities)s=i.contentType,s&&t(s)&&(e.videoCapabilities.push(i),r=!0)}if(r)return e}return null}const B=/([^;]+)(?:;\s?codecs="(.*)")?/;function G(e){var t;const[,i="unknown",n="unknown"]=null!==(t=e.match(B))&&void 0!==t?t:[];return{mimeType:i,codec:n,contentType:e}}const V=/([^;]+)(?:;\s?codecs="(.*)")?/,Y=c.P.forTag("playback.eme_manager"),K={EMPTY:"-no-robustness",SW_CRYPTO:"-sw-crypto",SW_DECODE:"-sw-decode",HW_CRYPTO:"-hw-crypto",HW_DECODE:"-hw-decode",HW_ALL:"-hw-all"};function H(e,t){var i;const n=[],a=new RegExp(`codecs="(${t.join("|")})"`);for(const s of e)a.test(null!==(i=s.contentType)&&void 0!==i?i:"")||n.push(s);return n.length?n:null}function W(e,t){let{audio:i,video:n}=t;var a,s,r,o;if(!(null==i?void 0:i.length)&&!(null==n?void 0:n.length))return e;let{audioCapabilities:l,videoCapabilities:d}=e;return(null==i?void 0:i.length)&&(null===(a=e.audioCapabilities)||void 0===a?void 0:a.length)&&(l=null!==(s=H(e.audioCapabilities,i))&&void 0!==s?s:void 0,!l)||(null==n?void 0:n.length)&&(null===(r=e.videoCapabilities)||void 0===r?void 0:r.length)&&(d=null!==(o=H(e.videoCapabilities,n))&&void 0!==o?o:void 0,!d)?null:Object.assign(Object.assign({},e),{audioCapabilities:l,videoCapabilities:d})}class q extends u.vp{constructor(e){var t;super(),this._unauthServerCertificateBase="",this._disallowCodecs={},this._keySystemDeferred=(0,p.$)(),this._configuration=(0,p.$)(),this._keySystemSettings=null,this._keySessions=[],this._configs=[],this._pendingCertificateRequest=null,this._certificate=null,this._transport=e.transport,this._emeImpl=e.emeImpl,this._noServerCertificate=!!e.noServerCertificate,this._precacheServerCertificate=null===(t=e.precacheServerCertificate)||void 0===t||t,this._unauthServerCertificateBase=e.unauthServerCertificateBase||"https://spclient.wg.spotify.com",this._configFilter=function(e){const t=["--ensure-no-match--"];if(null==e?void 0:e.length){let i=e.length;for(;i--;){const n=e[i];n&&K.hasOwnProperty(n)&&t.push(K[n])}}return new RegExp(`(${t.join("|")})$`)}(e.disallowRobustnessValues||[]),this._disallowCodecs=e.disallowCodecs,this._preferredKeySystems=e.preferredKeySystems||[a.WIDEVINE,a.PLAYREADY,a.PLAYREADY_HARDWARE,a.FAIRPLAY]}static create(e){return new Promise((t=>{const i=x();if(!i)throw v.fatal(s.EME_API_NOT_SUPPORTED,"Platform does not support navigator.requestMediaKeySystemAccess");t(new q(Object.assign(Object.assign({},e),{emeImpl:i})).init())}))}_prepareConfiguration(e){const t=e.getConfiguration();Y.info("KeySystem configured as ",t.label),t.audioCapabilities&&t.audioCapabilities.length||this._appendProbableMediaCapabilities(e.keySystem,t);const i={keySystem:e.keySystem,keySystemImpl:this._emeImpl,audioFormats:this._parseCapabilities(t.audioCapabilities),videoFormats:this._parseCapabilities(t.videoCapabilities)};return this._keySystemSettings=M[e.keySystem],this._configuration.resolve(i),i}_parseCapabilities(e){var t;if(!e)return[];const i=[];for(const n of e){if(!(null==n?void 0:n.contentType))continue;const[,e,a]=null!==(t=n.contentType.match(V))&&void 0!==t?t:[];e&&i.push({contentType:n.contentType,mimeType:e,codec:null!=a?a:""})}return i}_appendProbableMediaCapabilities(e,t){const i=j(this._configs,(t=>(-1===t.indexOf("webm")||e!==a.PLAYREADY&&e!==a.PLAYREADY_HARDWARE)&&!!MediaSource.isTypeSupported(t)));i&&(t.audioCapabilities=i.audioCapabilities,t.videoCapabilities=i.videoCapabilities)}_trySetServerCertificate(e,t){const i=this._certificate;return(i&&i.expiry>Date.now()?Promise.resolve(i):this._requestServerCertificate(e)).then((e=>t.setServerCertificate(e.contents))).then((()=>this)).catch((e=>(Y.warn("Error from setting server certificate",e),this)))}_cacheServerCertificate(e){let t="";switch(e){case a.FAIRPLAY:t="fairplay";break;case a.WIDEVINE:t="widevine";break;default:return Promise.resolve(this)}return this._requestServerCertificate(`${this._unauthServerCertificateBase}/${t}-license`,!1).then((()=>this),(e=>(Y.warn("Cannot precache server certificate",e),this)))}_requestServerCertificate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._pendingCertificateRequest)return this._pendingCertificateRequest;return this._transport.request(`${e}/v1/application-certificate`,{authorize:t,responseType:"arraybuffer",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()===t.SERVER_ERROR}}).then((e=>{var t;if(!e.body)throw new TypeError("Response body is invalid");this._pendingCertificateRequest=null;let i=3600;const n=null===(t=e.headers)||void 0===t?void 0:t.get("cache-control");if(n){const e=n.match(/(?:^|,|\s)max-age=(\d+)(?:,|$)/);e&&e[1]&&(i=1e3*parseInt(e[1],10))}return this._certificate={expiry:Date.now()+(i-600),contents:e.body},this._certificate}))}_extractPlayReadyChallenge(e,t){var i;let a=null;const r=new Uint16Array(e),o=String.fromCharCode.apply(null,r);if(-1===o.indexOf("PlayReadyKeyMessage"))return Y.info("Using unextracted PlayReady message."),e;const l=(new DOMParser).parseFromString(o,"application/xml"),d=l.getElementsByTagName("Challenge")[0],c=null===(i=null==d?void 0:d.childNodes[0])||void 0===i?void 0:i.nodeValue;if(c)try{a=atob(c);const e=l.getElementsByTagName("name"),t=l.getElementsByTagName("value");if(e.length!==t.length)throw new v(s.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")}catch(u){this.emit(n.EME_LICENSE_REQUEST_ERROR,{playId:t,error:u}),a=null}else this.emit(n.EME_LICENSE_REQUEST_ERROR,{playId:t,error:new v(s.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")});return a}_onMessage(e,t){e.timeMap.generate.end=Date.now();let i="message"in t?t.message:null;const n="messageType"in t?t.messageType:void 0;if(Y.info("Got EME message event with type",n),i&&e.keySystem===a.PLAYREADY&&(i=this._extractPlayReadyChallenge(i,e.playId)),!i)return void Y.info("Ignoring message event: no valid request payload");if(!e.licenseServer)return void Y.info("Ignoring message event: no licenseServer url");e.timeMap.request.start=Date.now();let s=e.licenseServer;e.keySystem===a.FAIRPLAY&&(s=`${s}${-1!==s.indexOf("?")?"&":"?"}assetId=hex`),this._transport.request(s,{method:"POST",payload:i,responseType:"arraybuffer",retry:{condition:(e,t)=>400!==e.status&&402!==e.status&&403!==e.status&&(!e.body||e.getStatusFamily()!==t.SUCCESS)}}).then(this._handleLicenseResponse.bind(this,e))}_handleLicenseResponse(e,t){const i=t=>{t.playId=e.playId,e.licenseServer&&(t.licenseServer=e.licenseServer),this.emit(n.EME_LICENSE_REQUEST_ERROR,{playId:e.playId,error:t})};let a,r;if(e.timeMap.request.end=Date.now(),200!==t.status){try{if(t.body){const e=new Uint8Array(t.body),i=String.fromCharCode.apply(String,e);r=JSON.parse(i).errorMsg}}catch(o){}402===t.status?this.emit(n.EME_LICENSE_REQUEST_CAPPED,{playId:e.playId,error:new k(s.CAPPING_USER_IS_CAPPED,"User is capped.")}):400===t.status&&"widevine error"===r?(a=v.fatal(s.EME_LICENSE_REQUEST_WIDEVINE_ERROR,"Widevine license server failed to parse request."),a.status=t.status,a.shouldRefreshEndpoint=!0,i(a)):(a=new v(s.EME_LICENSE_REQUEST_FAILED_WITH_STATUS,`License request failed (${r||"unknown"})`),a.status=t.status,a.shouldRefreshEndpoint=400===t.status||403===t.status,i(a))}else{if(!t.body)return a=new v(s.EME_LICENSE_REQUEST_EMPTY_RESPONSE,"Empty license response body"),a.status=t.status,void i(a);try{e.timeMap.update.start=Date.now(),e.keySession.update(t.body).catch((e=>{i(new v(s.EME_LICENSE_UPDATE_FAILED,e.message||"License update failed."))})),Y.info("KeySession updated.")}catch(l){const{message:e}=l;i(new v(s.EME_LICENSE_UPDATE_FAILED,e||"License update failed."))}}}_selectKeySystem(e){const t=this._preferredKeySystems;for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n&&n in e)return e[n]}return null}_testMediaKeys(e){return new Promise((t=>{t(e.createMediaKeys())})).then((t=>{if(!t)return Promise.reject(v.fatal(s.EME_MEDIA_KEYS_NOT_SUPPORTED,"Cannot create MediaKeys from KeySystemAccess"));e.keySystem===a.FAIRPLAY&&t.setServerCertificate(new ArrayBuffer(0));try{if(!t.createSession())throw new Error("")}catch(i){const{message:e}=i;return Promise.reject(v.fatal(s.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED,e||"Cannot create MediaKeySession from KeySystemAccess"))}return Promise.resolve(e)}),(e=>(Y.error(e.name),Promise.reject(v.fatal(s.EME_MEDIA_KEYS_NOT_SUPPORTED,e.message||"Unknown error")))))}_saveSession(e){this._keySessions.push(e)}destroySessions(){const e=[],t=this._keySessions;for(const a of t)try{const t=a.keySession;if(!t)continue;a.onMessageListener&&t.removeEventListener(n.KEY_SESSION_MESSAGE,a.onMessageListener),a.onKeyStatusChangeListener&&t.removeEventListener(n.KEY_SESSION_STATUSES_CHANGE,a.onKeyStatusChangeListener);const i=Promise.resolve(t.close()).catch((e=>{Y.warn("Failed to close KeySession",e)}));e.push(i),a.keySession=null,a.onMessageListener=null,a.onKeyStatusChangeListener=null,Y.info("Closed KeySession")}catch(i){Y.warn("Failed to close KeySession",i)}return this._keySessions=[],Promise.all(e)}init(){const e=this._keySystemDeferred,t={},i=[],n=[];for(let a of U)if(!a.label||!this._configFilter.test(a.label)){if(this._disallowCodecs){const e=W(a,this._disallowCodecs);if(!e)continue;a=e}n.push(a)}this._configs=n;for(const s in a){if(!Object.prototype.hasOwnProperty.call(a,s))continue;const e=s;i.push(navigator.requestMediaKeySystemAccess(a[e],n).then((e=>{t[e.keySystem]=e})).catch((()=>{})))}return Promise.all(i).then(this._selectKeySystem.bind(this,t)).then((e=>e?this._testMediaKeys(e):Promise.reject(new v(s.EME_NO_SUPPORTED_KEYSYSTEM,"No supported keysystem was found.")))).then((t=>(this._prepareConfiguration(t),e.resolve(t),this._precacheServerCertificate?this._cacheServerCertificate(t.keySystem):this))).catch((t=>{const i=t.code||s.EME_NO_SUPPORTED_KEYSYSTEM,n=t.message||"No supported keysystem";return e.reject(v.fatal(i,n)),e.promise.then((()=>this))}))}createMediaKeys(e){return this._keySystemDeferred.promise.then((e=>e.createMediaKeys())).then((t=>Promise.all([e.setMediaKeys(t),t]))).then((t=>{let[i,n]=t;if(!e.mediaKeys)throw new v(s.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED,"Failed to set MediaKeys on HTMLMediaElement");return this._configuration.promise.then((()=>{const e=this._keySystemSettings;return e&&!this._noServerCertificate&&e.withCertificate?this._trySetServerCertificate(e.licenseServer,n):this}))}))}removeMediaKeys(e){return Promise.resolve(e.setMediaKeys(null)).then((()=>this))}getKeySystemInfo(){return this._configuration.promise}getKeySystemImpl(){return this._emeImpl}createSessionWithParams(e){return new Promise(((t,i)=>{Y.info("Creating KeySession",e.keySystem);const a=e.mediaKeys.createSession(),r={generate:{start:0,end:0},request:{start:0,end:0},update:{start:0,end:0}},o=this._keySystemSettings&&this._keySystemSettings.licenseServer||void 0,l=this._onMessage.bind(this,{keySystem:e.keySystem,keySession:a,licenseServer:e.licenseServer||o,playId:e.playId,timeMap:r});a.addEventListener(n.KEY_SESSION_MESSAGE,l);const d=()=>{Y.info("KeyStatus change"),r.update.end=Date.now(),t({elapsed:{generate:Math.max(r.generate.end-r.generate.start,0),request:Math.max(r.request.end-r.request.start,0),update:Math.max(r.update.end-r.update.start,0)}})};return a.addEventListener(n.KEY_SESSION_STATUSES_CHANGE,d),this._saveSession({keySession:a,onMessageListener:l,onKeyStatusChangeListener:d}),Y.info("Generating KeySession request",e.keySystem),r.generate.start=Date.now(),Promise.resolve(a.generateRequest(e.initDataType,e.initData.buffer)).catch((e=>{if(!e)return;let t;switch(e.name){case"NotSupportedError":t=s.EME_NOT_SUPPORTED_ERROR;break;case"InvalidStateError":t=s.EME_INVALID_STATE_ERROR;break;default:t=s.EME_UNKNOWN_ERROR}i(new v(t,e.message||"Unknown error message."))}))}))}}class Q extends Error{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(t),this.code=e,this.message=t,this.status=i,this.debug=n,this.name="FragmentError"}}var $=i(21050);class z{constructor(e){var t;if(this._fallbackURLs=[],this._fragments=[],this._loaded=!1,this._mediaType="audio",this._noAuth=!1,this._resolvedURLs=[],this._segmentLength=0,this._duration=0,!e.fileId&&!e.resolvedURL)throw new TypeError("Missing: provide either fileId or resolvedURL");this._abrManager=e.abrManager,this._mediator=e.mediator,this._disableCache=e.disableCache,this._fileId=e.fileId,this._format=e.format,this._isAd=e.isAd||!1,this._keySystem=e.keySystem,this._keySystemSettings=M[this._keySystem],this._licenseEndpoint=e.licenseEndpoint,this._logData=e.logData||{displayTrack:"",playbackId:""},this._resolver=e.resolver,this._resolvedURL=e.resolvedURL,this._noAuth=null!==(t=e.noAuth)&&void 0!==t&&t,this._transport=e.transport,this._uri=e.uri,this._audioGainDb=e.audioGain}_parsePSSHBox(e){const t=$.D.decode(e),i=new Uint8Array(t.length);for(let n=0,a=t.length;n<a;n++)i[n]=t.charCodeAt(n);return i}_parseAssetID(e){const t=$.D.decode(e),i=new Array(t.length);for(let n=0,a=t.length;n<a;n++){const e=t.charCodeAt(n).toString(16);i[n]=1===e.length?`0${e}`:e}return i.join("")}getCalculatedDuration(){return this._duration}getFileId(){return this._fileId}getFormat(){return this._format||""}getAudioGain(){return this._audioGainDb}getFragmentLength(){return this._segmentLength}canLowerBitrate(){return!1}getInitFragment(){return this._initFragment}getInitParams(){const e={keySystem:this._keySystem,initDataType:this._protection,initData:this._psshBox,licenseServer:null};return Promise.resolve(e)}getKeySystem(){return this._keySystem}getLicenseEndpoint(){return this._licenseEndpoint}getLogData(){return this._logData||{}}getMediaType(){return this._mediaType}getResolvedURL(){return this._resolvedURL}getResolvedURLs(){return this._resolvedURLs}getHLSURL(){throw new h(s.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.")}releaseHLSURL(){}getURI(){return this._uri}isAd(){return this._isAd}isProtected(){return!!this._protection&&!!this._psshBox}setLogData(e){return this._logData=e,this}toLogJSON(){return{uri:this._uri,fileId:this._fileId,format:this._format||"",resolved_url:this._resolvedURL}}}const Z="application/vnd.apple.mpegurl";function X(e){var t;const i=function(e){return e.map((e=>{if(e.byteEnd&&void 0!==e.byteStart){let t=""+(1+e.byteEnd-e.byteStart);return t+=`@${e.byteStart}`,`#EXTINF:${e.duration},\n#EXT-X-BYTERANGE:${t}\n${e.url}`}return`#EXTINF:${e.duration},\n${e.url}`})).join("\n")}(e.segments),n=e.assetID?`#EXT-X-KEY:METHOD=SAMPLE-AES,URI="skd://${e.assetID}",KEYFORMATVERSIONS="1",KEYFORMAT="com.apple.streamingkeydelivery"`:"";let a=e.map?`#EXT-X-MAP:URI="${e.map.url}"`:"";return(null===(t=e.map)||void 0===t?void 0:t.byteEnd)&&void 0!==e.map.byteStart&&(a+=`,BYTERANGE="${1+e.map.byteEnd}@${e.map.byteStart}"`),`#EXTM3U\n#EXT-X-VERSION:6\n#EXT-X-TARGETDURATION:${Math.floor(e.targetDuration)}\n#EXT-X-MEDIA-SEQUENCE:0\n#EXT-X-PLAYLIST-TYPE:VOD\n${a?`${n}\n${a}`:n}\n${i}\n#EXT-X-ENDLIST`}function J(e){return`data:application/vnd.apple.mpegurl;base64,${btoa(e)}`}function ee(e){const t=new Blob([e],{type:Z});return URL.createObjectURL(t)}function te(e){return ee(X(e))}function ie(e){return J(X(e))}const ne=/avc1\.(([0-9a-f]{2})[0-9a-f]{2}([0-9a-f]{2}))/,ae="4d";function se(e,t){const i=e.toLowerCase().match(ne),n=t.toLowerCase().match(ne);if(!i||!n)return!1;const[,a,s,r]=i,[,o,l,d]=n;return a===o||s===ae&&l===ae&&parseInt(r,16)>=parseInt(d,16)}function re(e,t){return e.sort(((e,i)=>"video_bitrate"in e&&"video_bitrate"in i?t?e.video_resolution===i.video_resolution?e.video_bitrate-i.video_bitrate:e.video_resolution-i.video_resolution:e.video_bitrate-i.video_bitrate:e.max_bitrate-i.max_bitrate))}function oe(e,t){return void 0!==t&&Array.isArray(e.encryption_indices)&&-1===e.encryption_indices.indexOf(t)}function le(e,t){if(!t)return!1;return t(Object.assign({mimeType:e.mime_type},function(e){return"video_codec"in e}(e)?{type:"video",codec:e.video_codec,bitrate:e.video_bitrate,height:e.video_height,width:e.video_width,resolution:e.video_resolution}:{type:"audio",codec:e.audio_codec,bitrate:e.audio_bitrate}))}function de(e){return"audio_codec"in e?e.audio_codec:e.video_codec}function ce(e){const{codec:t,formats:i,profiles:n,encryptionIndex:s,disallowProfile:r,preferredKeySystem:o,preferredVideoResolution:l,allowMixedAVC1Codecs:d}=e;for(const c of i){const e=[];let i="spotify/unknown-mimetype",u="unknown-codec";for(const l of n){const n=de(l);!(t in l)||oe(l,s)||o===a.FAIRPLAY&&"ts"!==l.file_type||le(l,r)||(o!==a.FAIRPLAY||"ts"!==l.file_type?"unknown-codec"!==u||l.mime_type!==c.mimeType||n!==c.codec&&!se(c.codec,n)?l.mime_type===i&&(n===u||d&&se(u,n))&&(e.push(l),l.__effective_codec=u):(i=c.mimeType,u=d?c.codec:n,e.push(l),l.__effective_codec=c.codec):e.push(l))}if(e.length)return re(e,l)}return[]}const ue=c.P.forTag("playback.video_content");function me(e){if(!e)return"";const t=e.__effective_codec||("audio_codec"in e?e.audio_codec:e.video_codec);return`${e.mime_type};codecs="${t}"`}const _e={method:"GET",responseType:"arraybuffer",timing:!0,retry:{condition:(e,t)=>{if(0===e.status)return!0;const i=e.getStatusFamily();return i===t.CONNECTION_ERROR||i===t.SERVER_ERROR}}};class he extends z{constructor(e){super(e),this._assetId="",this._endTime=0,this._videoFormats=[],this._audioFormats=[],this._subtitleLanguages=[],this._videoProfile=null,this._videoProfiles=[],this._audioProfile=null,this._audioProfiles=[],this._baseURL="",this._initTemplate="",this._segmentTemplate="",this._subtitleTemplate="",this._initSegments={},this._hlsURLs=[],this._allowMixedAVC1Codecs=!1,this._initTemplate="",this._isAd=e.isAd||!1,this._mediaType="video",this._resolver=e.resolver,this._videoFormats=e.videoFormats,this._audioFormats=e.audioFormats,this._disallowProfile=e.disallowProfile,this._videoResolution=e.videoResolution,this._allowMixedAVC1Codecs=!!e.allowMixedAVC1Codecs,this._keySystem===a.FAIRPLAY&&this._audioFormats.unshift({mimeType:"audio/mp2t",codec:"mp4a.40.2"}),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new he(e)}_isQualityMatched(e,t,i){var n,a,s,r;if(this._videoResolution){const t=null!==(n=this._videoResolution.max)&&void 0!==n?n:9007199254740991,r=null!==(a=this._videoResolution.min)&&void 0!==a?a:0;if(i){const i=null!==(s=this._videoResolution.start)&&void 0!==s?s:t;return e.video_resolution<=i}return e.video_resolution>=r&&e.video_resolution<=t}const o=null!==(r=null==t?void 0:t.audio_bitrate)&&void 0!==r?r:0,l=this._abrManager.getBandwidthEstimate();return e.video_bitrate+o<2*l-1e5}_updateVariants(e){var t;const i=this._audioProfiles[0];this._audioProfile=null!=i?i:null;const n=this._videoProfiles,a=this._videoProfile;let s=null,r=n.length;if(r){for(;r--;){const t=n[r];if(t&&this._isQualityMatched(t,i,!!e)){s=t;break}}s||(s=n[0]),this._videoProfile=s,(null==a?void 0:a.id)!==s.id&&(ue.log(`Video profile changed. ID ${s.id} (${s.video_codec}), Bitrate ${s.video_bitrate}, ${s.video_width}x${s.video_height}`),null===(t=this._mediator)||void 0===t||t.emit(l.VIDEO_PROFILE_CHANGED,{profile:{type:"video",mimeType:s.mime_type,codec:s.video_codec,bitrate:s.video_bitrate,height:s.video_height,width:s.video_width,resolution:s.video_resolution}}))}}_constructFragmentURL(e,t,i){if(!t&&!i)throw new Error("Both audioProfile and videoProfile is null");return e.init?this._resolver.getInitSegmentURLs(this._baseURL,this._initTemplate,t,i):this._resolver.getSegmentURLs(this._baseURL,this._segmentTemplate,e.timeStart,t,i)}_fetchBufferData(e,t,i,n){return this._transport.request(e,Object.assign(Object.assign({},_e),{metadata:{timeStart:Date.now(),fragment:t,profile:i,loggingURL:n}})).then(this._parseFragmentResponse)}_fetchInitSegmentBuffers(e,t){const i=this._initFragment;if(!i)return Promise.reject(new h(s.FILE_NOT_RESOLVED,"Cannot fetch Init Segment buffers: File not resolved."));let n;try{n=this._constructFragmentURL(i,e,t)}catch(l){return Promise.reject(l)}const a=this._initSegments;let r=Promise.resolve(null);if(e){const t=a[e.id];(null==t?void 0:t.buffer.byteLength)?r=Promise.resolve(t):(null==n?void 0:n.audio)&&(r=this._fetchBufferData(n.audio,i,e,n.audioLogging).then((t=>(a[e.id]=t,t))))}let o=Promise.resolve(null);if(t){const e=a[t.id];(null==e?void 0:e.buffer.byteLength)?o=Promise.resolve(e):(null==n?void 0:n.video)&&(o=this._fetchBufferData(n.video,i,t,n.videoLogging).then((e=>(a[t.id]=e,e))))}return Promise.all([r,o]).then((e=>{let[t,i]=e;return{audio:t,video:i}}))}_fetchBufferForFragment(e,t,i){let n;try{n=this._constructFragmentURL(e,t,i)}catch(a){return Promise.reject(a)}return Promise.all([this._fetchInitSegmentBuffers(t,i),!e.init&&n.audio?this._fetchBufferData(n.audio,e,t,n.audioLogging):null,!e.init&&n.video?this._fetchBufferData(n.video,e,i,n.videoLogging):null]).then((t=>{let[i,n,a]=t;var s,r;let o;return e.init?o={audio:null!==(s=i.audio)&&void 0!==s?s:void 0,video:null!==(r=i.video)&&void 0!==r?r:void 0}:(o={audio:null!=n?n:void 0,video:null!=a?a:void 0},e.cacheBufferSet&&(e.bufferSet=o),o.audio&&(null==i?void 0:i.audio)&&(o.audio.initBuffer=i.audio.buffer),o.video&&(null==i?void 0:i.video)&&(o.video.initBuffer=i.video.buffer)),o})).catch((e=>Promise.reject(e)))}_parseFragmentResponse(e){var t,i,n,a;const{fragment:r,profile:o,timeStart:d,loggingURL:c}=e.metadata,u=me(o),m=function(e){return e?"audio_bitrate"in e?e.audio_bitrate:e.video_bitrate:0}(o),_="video_resolution"in o?o.video_resolution:void 0,h=`${r.timeStart}-${r.timeEnd}`,p="video_resolution"in o?"video":"audio";switch(e.status){case 0:{const e=new Q(s.FRAGMENT_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:h,mimetype:u,resolution:_,bitrate:m});return null===(t=this._mediator)||void 0===t||t.emit(l.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:p,url:c,start_time:d,init:r.init,error:e}),Promise.reject(e)}case 200:case 206:{const t=e.body;if(!(null==t?void 0:t.byteLength)){const t=new Q(s.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:h,mimetype:u,resolution:_,bitrate:m});return null===(i=this._mediator)||void 0===i||i.emit(l.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:p,url:c,start_time:d,init:r.init,error:t}),Promise.reject(t)}const a=t.byteLength;this._abrManager.sample(a,Date.now()-d),this._updateVariants();const v=8e3*a/e.timing.completed;return null===(n=this._mediator)||void 0===n||n.emit(l.FRAGMENT_FETCHED,{media_type:"video",segment_type:p,url:c,init:r.init,byte_length:a,start_time:d,end_time:Date.now(),resolution:_,bandwidth:v}),Promise.resolve({profileId:`${this._fileId}-${o.id}`,bufferURL:c,byteStart:0,byteEnd:a-1,buffer:t,mimetype:u,resolution:_,bitrate:m,bandwidth:v})}}const v=new Q(s.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:h,mimetype:u,resolution:_,bitrate:m});return null===(a=this._mediator)||void 0===a||a.emit(l.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:p,url:c,init:r.init,start_time:d,error:v}),Promise.reject(v)}_getHLSURLForProfile(e){const t=this._duration,i=this._segmentLength,n=this._segmentTemplate,a=[];for(let r=0;r<t;r+=i){const s=r+i>t?t-r:i,o=n.replace("{{profile_id}}",e.id.toString(10)).replace("{{segment_timestamp}}",r.toString(10)).replace("{{file_type}}",e.file_type);a.push({duration:s,url:`${this._baseURL}${o}`})}const s=("undefined"==typeof MediaSource?te:ie)({assetID:this._assetId,targetDuration:i,segments:a});return this._hlsURLs.push(s),s}_calculateFragments(e){this._duration=e.end_time_millis/1e3;const t=this._segmentLength;this._initFragment={init:!0,cacheBufferSet:!1,timeStart:-1,timeEnd:-1,byteRanges:{}};for(let i=0;i<this._duration;i+=t)this._fragments.push({cacheBufferSet:!i&&!this._disableCache,timeStart:i,timeEnd:i+t,byteRanges:{}})}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._updateVariants()}getCurrentBitrate(){var e,t;return null!==(t=null===(e=this._videoProfile)||void 0===e?void 0:e.video_bitrate)&&void 0!==t?t:0}getBufferForFragment(e){var t,i;if(!e)return Promise.reject(new TypeError("No fragment provided"));const n=this._audioProfile,a=this._videoProfile,s=null===(i=null===(t=e.bufferSet)||void 0===t?void 0:t.video)||void 0===i?void 0:i.resolution;return e.bufferSet&&(!a||s&&s>=a.video_resolution)?Promise.resolve(e.bufferSet):this._fetchBufferForFragment(e,null!=n?n:void 0,null!=a?a:void 0)}clearCachedBuffers(){this._initFragment&&(this._initSegments={}),this._fragments.forEach((e=>{e.bufferSet=null}))}getDuration(){return this._endTime}getFragmentAfterTime(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[1];for(const i of this._fragments)if(i.timeStart>e)return i;return null}getFragmentForTime(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[0];for(const i of this._fragments)if(i.timeStart<=e&&i.timeEnd>=e)return i;return null}getSubtitleLanguages(){return this._subtitleLanguages}getSubtitles(){return this._subtitleLanguages.map((e=>({lang:e,url:this._subtitleTemplate.replace("{{language_code}}",e)})))}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resolveLatency:0,manifestLatency:0};if(this._loaded)return e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this);if(!this._fileId)throw new TypeError("Missing: provide either fileId or resolvedURL");const t=Date.now();return this._resolver.getManifest(this._fileId,this._noAuth).then((i=>{var n,a,r;let o;e.resolveLatency=0,e.manifestLatency=Date.now()-t;const d=i.contents[0];if(!d)return o=new h(s.FILE_MALFORMED_SEEKTABLE,"Malformed seektable: no contents."),o.track=this.toLogJSON(),Promise.reject(o);this._resolvedURLs=i.base_urls.slice();const[c,...u]=i.base_urls;let m;if(c&&(this._baseURL=c,this._fallbackURLs=u),this._resolvedURL=this._baseURL,this._initTemplate=i.initialization_template,this._segmentTemplate=i.segment_template,this._segmentLength=d.segment_length,null===(n=d.encryption_infos)||void 0===n?void 0:n.length){const e=d.encryption_infos,t=this._keySystemSettings.commonName;let i;for(let n=0,a=e.length;n<a;n++){const a=e[n];if(a&&a.key_system===t){m=n,i=a[this._keySystemSettings.pssh_field.video];break}}if(!i)return o=new h(s.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),o.track=this.toLogJSON(),Promise.reject(o);switch(this._keySystemSettings.commonName){case"widevine":case"playready":this._protection="cenc";try{this._psshBox=this._parsePSSHBox(i)}catch(_){return o=new h(s.FILE_MALFORMED_PSSH,"Invalid PSSH value."),o.track=this.toLogJSON(),Promise.reject(o)}break;case"fairplay":this._protection="hls",this._psshBox=new Uint8Array([]);try{this._assetId=this._parseAssetID(i)}catch(_){return o=new h(s.FILE_MALFORMED_PSSH,"Invalid PSSH value."),o.track=this.toLogJSON(),Promise.reject(o)}break;default:return o=new h(s.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),o.track=this.toLogJSON(),Promise.reject(o)}}return this._endTime=i.end_time_millis,this._videoProfiles=ce({codec:"video_codec",formats:this._videoFormats,profiles:d.profiles,encryptionIndex:m,disallowProfile:this._disallowProfile,preferredKeySystem:this._keySystem,preferredVideoResolution:this._videoResolution,allowMixedAVC1Codecs:this._allowMixedAVC1Codecs}),this._audioProfiles=ce({codec:"audio_codec",formats:this._audioFormats,profiles:d.profiles,encryptionIndex:m,preferredKeySystem:this._keySystem}),this._updateVariants(!0),this._calculateFragments(i),this._subtitleLanguages=i.subtitle_language_codes||[],null===(a=this._mediator)||void 0===a||a.emit(l.SUBTITLE_LANGUAGES_LOADED,{languages:this._subtitleLanguages}),(null===(r=i.subtitle_base_urls)||void 0===r?void 0:r.length)&&i.subtitle_template?this._subtitleTemplate=`${i.subtitle_base_urls[0]}${i.subtitle_template}`:(ue.info("No subtitles available"),this._subtitleTemplate=""),this}))}adaptToBandwidth(){return this._updateVariants(),Promise.resolve(!0)}getPlayableCodecs(){var e,t;return[me(null!==(e=this._videoProfile)&&void 0!==e?e:void 0),me(null!==(t=this._audioProfile)&&void 0!==t?t:void 0)].filter((e=>!!e))}getAudioProfile(){return this._audioProfile}getVideoProfile(){return this._videoProfile}getVideoProfiles(){return this._videoProfiles}getHLSURL(){if(!this._resolvedURL)throw new h(s.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");this.releaseHLSURL();const e=[],t=this._audioProfiles[0];t&&e.push(`#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",LANGUAGE="eng",NAME="English",AUTOSELECT=YES,URI="${this._getHLSURLForProfile(t)}"`);for(const a of this._videoProfiles)e.push(`#EXT-X-STREAM-INF:BANDWIDTH=${a.max_bitrate},RESOLUTION=${a.video_width}x${a.video_height},CODECS="${(null==t?void 0:t.audio_codec)?`mp4a.40.2, ${a.video_codec}`:a.video_codec}"${(null==t?void 0:t.audio_codec)?',AUDIO="audio"':""}\n${this._getHLSURLForProfile(a)}`);const i=`#EXTM3U\n${e.join("\n")}`,n=("undefined"==typeof MediaSource?ee:J)(i);return this._hlsURLs.push(n),n}releaseHLSURL(){for(const e of this._hlsURLs)URL.revokeObjectURL(e);this._hlsURLs=[]}canLowerBitrate(){var e;const t=this._videoProfiles[0];return(null===(e=this._videoProfile)||void 0===e?void 0:e.id)!==(null==t?void 0:t.id)}}var pe;!function(e){e[e.MP3_256=3]="MP3_256",e[e.MP3_320=4]="MP3_320",e[e.MP3_160=5]="MP3_160",e[e.MP3_96=6]="MP3_96",e[e.MP4_128=10]="MP4_128",e[e.MP4_256=11]="MP4_256",e[e.MP4_128_DUAL=12]="MP4_128_DUAL",e[e.MP4_256_DUAL=13]="MP4_256_DUAL",e[e.MP4_128_CBCS=14]="MP4_128_CBCS",e[e.MP4_256_CBCS=15]="MP4_256_CBCS",e[e.MP4_FLAC=17]="MP4_FLAC"}(pe||(pe={}));const ve={[pe.MP3_256]:"audio/mp3",[pe.MP3_320]:"audio/mp3",[pe.MP3_160]:"audio/mp3",[pe.MP3_96]:"audio/mp3",[pe.MP4_128]:'audio/mp4; codecs="mp4a.40.2"',[pe.MP4_256]:'audio/mp4; codecs="mp4a.40.2"',[pe.MP4_128_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[pe.MP4_256_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[pe.MP4_128_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[pe.MP4_256_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[pe.MP4_FLAC]:'audio/mp4; codecs="flac"'};class ke extends z{constructor(e){if(super(e),this._lastResolveTimestamp=0,this._profileId=`${Date.now()}`,this._initBufferPromise=null,this._lastFetchedBuffer=null,this._hlsURL=null,this._bypassResolve=!!this._resolvedURL,this._emitWarning=e.emitWarning||function(){},this._mediaType="audio",this._noManifest=!!e.noManifest,this._preloadedManifest=e.preloadedManifest,this._resolver=e.resolver,this._segmentLength=0,this._fileFormat=e.fileFormat,this._fileFormat)this._audioCodec=ve[this._fileFormat];else switch(this._format){case o.MP3:this._audioCodec=ve[pe.MP3_160];break;case o.MP4:case o.MP4_DUAL:case o.MP4_CBCS:this._audioCodec=ve[pe.MP4_128];break;default:throw new TypeError(`Unknown audio format ${this._format}`)}this._fileId&&(this._profileId=this._fileId),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new ke(e)}_parseFragmentResponse(e){const{requestURL:t,fragment:i,byteRangeHeader:n,expectedLength:a}=e.metadata,r=`${i.timeStart}-${i.timeEnd}`;switch(e.status){case 0:{if(e.offline)return Promise.reject(new Q(s.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:r,byte_range:n}));const a=new Q(s.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0);let o=!1;return this._resolvedURL!==t?o=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(o=!0,this._resolvedURL=this._fallbackURLs.shift()),a.debug.has_fallback=o,o?(this._emitWarning(a,this.toLogJSON()),this.getBufferForFragment(i)):Promise.reject(a)}case 200:case 206:{const o=e.body;if(!o)return Promise.reject(new Q(s.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:r,byte_range:n}));if(o.byteLength!==a)return Promise.reject(new Q(s.FRAGMENT_REQUEST_UNEXPECTED_LENGTH,"Received buffer of unexpected length.",e.status,{time_range:r,byte_range:n,received_length:o.byteLength,expected_length:a}));const l={audio:{profileId:this._profileId,bufferURL:t,byteStart:i.byteRanges.audio.start,byteEnd:i.byteRanges.audio.end,buffer:o,mimetype:this._audioCodec,bandwidth:8e3*o.byteLength/e.timing.completed}};if(i.cacheBufferSet&&o&&o.byteLength){i.bufferSet=l;const e=i.sliceInto;if(null==e?void 0:e.length)for(const t of e){const e=t.fragment;(null==e?void 0:e.cacheBufferSet)&&(e.bufferSet={audio:Object.assign(Object.assign({},l.audio),{buffer:o.slice(t.start,t.end),byteStart:e.byteRanges.audio.start,byteEnd:e.byteRanges.audio.end})})}}return this._abrManager.sample(o.byteLength,e.timing.completed),Promise.resolve(l)}case 403:return this.resolve().then((()=>this.getBufferForFragment(i)));default:{let a=!1;return this._resolvedURL!==t?a=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(a=!0,this._resolvedURL=this._fallbackURLs.shift()),a?this.getBufferForFragment(i):Promise.reject(new Q(s.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:r,byte_range:n}))}}}_getInitBuffer(){var e,t;if(!this._initFragment)throw new h(s.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return(null===(t=null===(e=this._initFragment.bufferSet)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.buffer.byteLength)?Promise.resolve(this._initFragment.bufferSet.audio.buffer):(this._initBufferPromise||(this._initBufferPromise=this.getBufferForFragment(this._initFragment).then((e=>{var t;if(!(null===(t=e.audio)||void 0===t?void 0:t.buffer.byteLength))throw new Error("Empty initialization segment buffer");return e.audio.buffer}))),this._initBufferPromise)}_calculateFragments(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const i=e.segments,n=e.timescale,a=i.length,s=new Array(a);let r=0,o=0;for(let l=0,d=a;l<d;l++){const e=i[l];if(!(null==e?void 0:e.length))continue;const[a,d]=e,c=d/n,u={init:!1,cacheBufferSet:!l&&!this._disableCache,timeStart:r,timeEnd:r+c,byteRanges:{audio:{start:t,end:t+(a-1)}}};s[l]=u,t+=a,o+=d,r+=c,Math.floor(c)>this._segmentLength&&(this._segmentLength=Math.floor(c))}s[s.length-1].isLastFragment=!0,this._fragments=s,this._duration=o/n}_calculateFragmentsV1(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const i=e.references,n=e.timescale,a=i.length,s=new Array(a);let r=0,o=0;for(let l=0,d=a;l<d;l++){const e=i[l];if(!e)continue;const a=e.duration/n,d={init:!1,cacheBufferSet:!l&&!this._disableCache,timeStart:o,timeEnd:o+a,byteRanges:{audio:{start:t,end:t+(e.size-1)}}};s[l]=d,t+=e.size,r+=e.duration,o+=a,Math.floor(a)>this._segmentLength&&(this._segmentLength=Math.floor(a))}s[s.length-1].isLastFragment=!0,this._fragments=s,this._duration=r/n}_getManifest(e){if(this._noManifest)return e&&(e.manifestLatency=0),Promise.resolve(null);if(this._preloadedManifest)return e&&(e.manifestLatency=0),Promise.resolve(this._preloadedManifest);if(!this._fileId)throw new TypeError("Missing: fileId");const t=Date.now();return this._resolver.getManifest(this._fileId).then((function(i){return e&&(e.manifestLatency=Date.now()-t),i}))}getHLSURL(){var e,t;const i=this._resolvedURL,n=this._initFragment;if(!i||!n)throw new h(s.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");this.releaseHLSURL();const a={url:i,byteStart:null===(e=n.byteRanges.audio)||void 0===e?void 0:e.start,byteEnd:null===(t=n.byteRanges.audio)||void 0===t?void 0:t.end},r=this._fragments.map((e=>{var t,n;return{url:i,duration:e.timeEnd-e.timeStart,byteStart:null===(t=e.byteRanges.audio)||void 0===t?void 0:t.start,byteEnd:null===(n=e.byteRanges.audio)||void 0===n?void 0:n.end}})),o="undefined"==typeof MediaSource?te:ie;return this._hlsURL=o({assetID:this._fileId,targetDuration:10,map:a,segments:r}),this._hlsURL}releaseHLSURL(){this._hlsURL&&URL.revokeObjectURL(this._hlsURL),this._hlsURL=null}clearCachedBuffers(){this._headFragment&&delete this._headFragment,this._initFragment&&(this._initFragment.bufferSet=null),this._fragments[0]&&(this._fragments[0].bufferSet=null),this._lastFetchedBuffer=null}getPlayableCodecs(){return[this._audioCodec]}getFirstFragment(){var e;return null!==(e=this._fragments[0])&&void 0!==e?e:null}getHeadFragment(){const e=this._initFragment,t=this._fragments[0];if(!(null==e?void 0:e.byteRanges.audio)||!(null==t?void 0:t.byteRanges.audio))throw new h(s.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return this._headFragment||(this._headFragment={init:!0,cacheBufferSet:!0,timeStart:0,timeEnd:0,byteRanges:{audio:{start:e.byteRanges.audio.start,end:t.byteRanges.audio.end}},sliceInto:[{fragment:e,start:0,end:t.byteRanges.audio.start},{fragment:t,start:t.byteRanges.audio.start,end:void 0}]}),this._headFragment}getFragmentAfterTime(e){var t,i;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(i=this._fragments[1])&&void 0!==i?i:null;for(const n of this._fragments)if(n.timeStart>e)return n;return null}getFragmentForTime(e){var t,i;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(i=this._fragments[0])&&void 0!==i?i:null;for(const n of this._fragments)if(n.timeStart<=e&&n.timeEnd>=e)return n;return null}getBufferForFragment(e){var t;if(!e)return Promise.reject(new Error("FIXME: error type?"));if((null===(t=this._lastFetchedBuffer)||void 0===t?void 0:t.fragment)===e)return Promise.resolve(this._lastFetchedBuffer.bufferSet);if(e.bufferSet)return Promise.resolve(e.bufferSet);if(!this._resolvedURL)return Promise.reject(new h(s.FILE_NOT_RESOLVED,"Cannot fetch buffer: No resolved URL"));const i=e.byteRanges.audio,n=`${i.start}-${i.end}`,a=i.end+1-i.start,r=this._resolvedURL,o=e.init?Promise.resolve(null):this._getInitBuffer();return Promise.all([o,this._transport.request(r,{method:"GET",responseType:"arraybuffer",headers:{Range:`bytes=${n}`},timing:!0,metadata:{requestURL:r,fragment:e,byteRangeHeader:n,expectedLength:a},retry:{condition:(e,t)=>{if(0===e.status)return e.offline;const i=e.getStatusFamily();return i===t.CONNECTION_ERROR||i===t.SERVER_ERROR||!(i!==t.SUCCESS||!e.body)&&e.body.byteLength!==a}}}).then(this._parseFragmentResponse)]).then((t=>{let[i,n]=t;return i&&n.audio&&(n.audio.initBuffer=i),this._lastFetchedBuffer={fragment:e,bufferSet:n},n}))}resolve(e){const t=this._fileId;if(this._bypassResolve)return e&&(e.resolveLatency=0),Promise.resolve({uri:this._resolvedURL,uris:[],protection:this._preloadedManifest||!this._noManifest?"cenc":void 0});if(!t)throw new TypeError("Missing: fileId is required to resolve content URL");clearTimeout(this._lastResolveToken);const i=()=>(this._lastResolveTimestamp=Date.now(),this._resolver.getCDNURL(t,this._fileFormat).then((t=>(e&&(e.resolveLatency=Date.now()-this._lastResolveTimestamp),t)))),n=Date.now()-this._lastResolveTimestamp;let a;return a=n<1001?new Promise(((e,t)=>{this._lastResolveToken=setTimeout((()=>{i().then(e,t)}),1001-n)})):i(),a.then((e=>{this._resolvedURLs=[];for(const t of e.uris){const e=t.split("?")[0];this._resolvedURLs.push(e)}return this._fallbackURLs=e.uris,this._resolvedURL=this._fallbackURLs.shift(),e})).catch((e=>(e&&(e.track=this.toLogJSON()),Promise.reject(e))))}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resolveLatency:0,manifestLatency:0};return this._loaded?(e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this)):Promise.all([this.resolve(e),this._getManifest(e)]).then((e=>{let[t,i]=e;var n;if(this._loaded=!0,!t.protection||!i)return this;if(this._keySystem===a.INVALID_SPOTIFY_KEY)return this._protection=i.protection||"cenc",this._psshBox=new Uint8Array(0),this;let r;const o=this._keySystemSettings.pssh_field.audio;let l=function(e,t){return t.hasOwnProperty(e)}(o,i)?`${i[o]}`:null;if(!l&&"pssh_widevine"===o&&"pssh"in i&&(l=null!==(n=i.pssh)&&void 0!==n?n:null),!l)return r=new h(s.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),r.track=this.toLogJSON(),Promise.reject(r);if(this._protection=i.protection||"cenc",this._psshBox=this._parsePSSHBox(l),"segments"in i&&i.segments)this._calculateFragments(i);else{if(!("references"in i)||!i.references)return r=new h(s.FILE_MALFORMED_SEEKTABLE,"Malformed seektable."),r.track=this.toLogJSON(),Promise.reject(r);this._calculateFragmentsV1(i)}return this}))}adaptToBandwidth(){return Promise.resolve(!1)}}class ge{constructor(e){if(this._estimate=0,this._totalWeight=0,e<0)throw new TypeError("Halflife must be set to a positive value.");this._weightingDecrease=Math.exp(Math.log(.5)/e)}sample(e,t){const i=Math.pow(this._weightingDecrease,e),n=t*(1-i)+i*this._estimate;isNaN(n)||(this._estimate=n,this._totalWeight+=t)}getEstimate(){return this._estimate/1-Math.pow(this._weightingDecrease,this._totalWeight)}}class Ee{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e5;this._totalBytes=0,this._overrideBitrate=0,this._currentBandwidth=e,this._short=new ge(2),this._long=new ge(5),this._init()}_init(){if("undefined"==typeof navigator)return;const e=navigator;e.connection&&e.connection.downlink&&(this._currentBandwidth=1e6*e.connection.downlink,this._onConnectionChange=this._onConnectionChange.bind(this),e.connection.addEventListener("change",this._onConnectionChange))}_onConnectionChange(e){const t=e.target.downlink||0;this._setBandwidth(t)}_setBandwidth(e){this._currentBandwidth=1e6*e}getBandwidthEstimate(){if(this._overrideBitrate)return this._overrideBitrate;if(this._totalBytes<128e3)return this._currentBandwidth;const e=this._short.getEstimate(),t=this._long.getEstimate();return Math.min(e,t)}sample(e,t){if(e<16e3)return;const i=t/1e3,n=8*e/i;this._totalBytes+=e,this._short.sample(i,n),this._long.sample(i,n)}overrideBitrate(e){this._overrideBitrate=e<=0?0:e}}var Se;!function(e){e.SHOWING="showing",e.HIDDEN="hidden"}(Se||(Se={}));const ye=Array.prototype.slice,fe="function"==typeof Array.from?e=>Array.from(e):e=>ye.call(e);function Ne(e,t){const i=fe(e.getElementsByTagName(t));for(const n of i)e.removeChild(n)}function Te(e){const t=e;return{id:t.id,text:t.text}}const Re="visible",Ae="hidden",be=/^[A-Za-z]{2,4}([_-][A-Za-z]{4})?([_-]([A-Za-z]{2}|[0-9]{3}))?$/;class Ce extends u.vp{constructor(e){super(),this._isVisible=!1,this._player=null,this._crossOrigin=null,this._currentVideoContent=null,this._unsubscribers=[],this._displayedCues=[],this._deactivateListeners=!1,this._activeLanguage=void 0,this._preferredLanguage=e.language.toLowerCase(),e.deactivateListeners&&(this._deactivateListeners=!0),this._onEnter=this._onEnter.bind(this),this._onExit=this._onExit.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this.setPlayer(e.player)}_subscribeToCueEvents(e){var t;const{track:i}=e;if(!i)throw new Error("No track");if(i.mode=this._isVisible?Se.SHOWING:Se.HIDDEN,null===(t=i.cues)||void 0===t?void 0:t.length){this._displayedCues=i.activeCues?Array.from(i.activeCues):[],this._emitDisplayedCues();for(let e=0;e<i.cues.length;e++){const t=i.cues[e];t&&(t.addEventListener("enter",this._onEnter),t.addEventListener("exit",this._onExit),this._unsubscribers.push((()=>{t.removeEventListener("enter",this._onEnter),t.removeEventListener("exit",this._onExit)})))}}else{const t=()=>{this._subscribeToCueEvents(e),e.removeEventListener("load",t)};e.addEventListener("load",t)}}_unsubscribeFromCueEvents(){this._unsubscribers.forEach((e=>e())),this._unsubscribers=[]}_onEnter(e){const t=e.target;this._displayedCues.indexOf(t)>-1||(this._displayedCues.push(t),this._emitDisplayedCues())}_onExit(e){const t=e.target,i=this._displayedCues.indexOf(t);i>-1&&(this._displayedCues.splice(i,1),this._emitDisplayedCues())}_emitDisplayedCues(){this.emit(n.PLAYER_DISPLAYED_CUES_CHANGED,{cues:this._displayedCues.map(Te)})}_updateVisibleState(){var e,t;if(!this._player)return;const i=this.getActiveLanguage();Array.from(null!==(t=null===(e=this._player)||void 0===e?void 0:e.querySelectorAll("track"))&&void 0!==t?t:[]).forEach((e=>{e.style.visibility=this._isVisible?Re:Ae}));const n=this._player.textTracks;for(let a=0,s=n.length;a<s;a++){const e=n[a];e&&(e.mode=this._isVisible&&e.language.toLowerCase()===i?Se.SHOWING:Se.HIDDEN)}}_updateTextTracks(){const e=this._player;e&&(e.readyState>=1?this._onLoadedMetadata():this._currentVideoContent&&e.addEventListener(n.MEDIA_LOADEDMETADATA,this._onLoadedMetadata))}_onLoadedMetadata(){const e=this._player;if(!e)return;if(Ne(e,"track"),!this._currentVideoContent)return;e.crossOrigin="anonymous";const t=this._updateActiveLanguage();for(const{lang:i,url:n}of this._currentVideoContent.getSubtitles()){const a=i.toLowerCase()===t,s=document.createElement("track");s.label=`${i} subtitles`,s.kind="subtitles",s.srclang=i,s.src=n,s.default=a,s.style.visibility=this._isVisible?Re:Ae,e.appendChild(s),a&&!this._deactivateListeners&&this._subscribeToCueEvents(s)}}_updateActiveLanguage(){if(!this._player||!this._currentVideoContent)return void(this._activeLanguage=void 0);const e=this._currentVideoContent.getSubtitleLanguages(),t=this._preferredLanguage.split("-")[0];let i=null;for(const n of e){const e=n.toLowerCase();if(e===this._preferredLanguage)return this._activeLanguage=e,this._activeLanguage;e.split("-")[0]===t&&null===i&&(i=e)}return this._activeLanguage=null!=i?i:"en-us",this._activeLanguage}getActiveLanguage(){if(this._player&&this._currentVideoContent)return this._activeLanguage}setVideoContent(e){this._unsubscribeFromCueEvents(),this._displayedCues=[],this._currentVideoContent=e,e||this.clear(),this._updateTextTracks()}setPlayer(e){var t;const i="VIDEO"===(null==e?void 0:e.tagName)?e:null;this._player!==i&&this.clear(),this._player=i||null,this._crossOrigin=null!==(t=null==i?void 0:i.crossOrigin)&&void 0!==t?t:null,this._updateTextTracks()}getAvailableLanguages(){var e,t;return null!==(t=null===(e=this._currentVideoContent)||void 0===e?void 0:e.getSubtitleLanguages())&&void 0!==t?t:[]}setLanguage(e){if(!e.length)throw new TypeError("Argument `code` must be a non-empty string. Hide subtitles using `hideSubtitles()`.");if(!be.test(e))throw new TypeError("Argument `code` must be a valid BCP 47 formatted language code");this._preferredLanguage=e.toLowerCase(),this._updateTextTracks()}hide(){this._isVisible=!1,this._updateVisibleState()}show(){this._isVisible=!0,this._updateVisibleState()}deactivateListeners(){if(this._deactivateListeners)return;this._player&&(this._deactivateListeners=!0,this._unsubscribeFromCueEvents())}activateListeners(){this._deactivateListeners&&(this._deactivateListeners=!1,this._updateTextTracks())}areListenersActivated(){return!this._deactivateListeners}clear(){const e=this._player;e&&(this._unsubscribeFromCueEvents(),this._currentVideoContent=null,this._displayedCues=[],Ne(e,"track"),e.removeEventListener(n.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.crossOrigin=this._crossOrigin)}visible(){return this._isVisible}}class Ie{constructor(e){this.bandwidthEstimator=e.bandwidthEstimator}static create(e){return new Ie(e)}getSample(e,t){var i,n;const a=this.bandwidthEstimator.getBandwidthEstimate(),s=function(e,t){const i=e.length;for(let n=0;n<i;n++)if(e.start(n)<=t&&t<=e.end(n))return 1e3*(e.end(n)-t);return 0}(e.buffered,e.currentTime);if(t instanceof ke){const e=null===(n=null===(i=t.getFirstFragment())||void 0===i?void 0:i.bufferSet)||void 0===n?void 0:n.audio,r=null==e?void 0:e.bitrate;return{bandwidth:a,bufferAvailability:s,audio:{contentType:null==e?void 0:e.mimetype,bitrate:r}}}const r=t.getAudioProfile(),o=t.getVideoProfile(),l=t.getVideoProfiles(),d="getVideoPlaybackQuality"in e?e.getVideoPlaybackQuality():{creationTime:void 0,droppedVideoFrames:void 0,totalVideoFrames:void 0};return{bandwidth:a,bufferAvailability:s,video:{creationTime:d.creationTime,droppedVideoFrames:d.droppedVideoFrames,totalVideoFrames:d.totalVideoFrames,bitrate:null==o?void 0:o.video_bitrate,availableBitrates:l.map((e=>e.video_bitrate)),height:null==o?void 0:o.video_height,width:null==o?void 0:o.video_width,resolution:null==o?void 0:o.video_resolution,contentType:me(null!=o?o:void 0)},audio:{bitrate:null==r?void 0:r.audio_bitrate,contentType:me(null!=r?r:void 0)}}}}const Le=c.P.forTag("playback.audio_processor");class Pe{constructor(e){this._audioContext=null,this._mediaElementSource=null,this._gainNode=null,this._nodes=[],(null==e?void 0:e.disable)?Le.info("AudioProcessor disabled"):(this._audioContext=(null==e?void 0:e.audioContext)||("undefined"!=typeof AudioContext?new AudioContext:null),this._audioContext?(this._gainNode=this._audioContext.createGain(),this._buildNodePipeline(null==e?void 0:e.nodes)):Le.warn("The AudioContext API is not supported. Any future operation related to `AudioProcessor` will be skipped."))}static create(e){return new Pe(e)}_setMediaElementSource(e){var t;this._audioContext&&(this._mediaElementSource&&(Le.info("Disconnecting previous media element source"),this._mediaElementSource.disconnect()),Le.info("Creating new media element source"),this._mediaElementSource=this._audioContext.createMediaElementSource(e)||null,this._mediaElementSource.connect(null!==(t=this._nodes[0])&&void 0!==t?t:this._audioContext.destination))}_buildNodePipeline(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t;if(!this._audioContext)return;Le.info("Disconnecting previous nodes");const i=this._nodes;for(const s of i)s.disconnect();const n=[this._gainNode,...e];let a=null;for(const s of n)a&&a.connect(s),a=s;null===(t=n[n.length-1])||void 0===t||t.connect(this._audioContext.destination),Le.info("Node pipeline built"),this._nodes=n}setPlayer(e){var t;e&&((null===(t=this._mediaElementSource)||void 0===t?void 0:t.mediaElement)!==e?this._setMediaElementSource(e):Le.info("The new player is the same as the current player"))}setAudioGain(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this._gainNode)return Le.info("The default gain node is not available"),!1;const t=Math.pow(10,e/20);return this._gainNode.gain.value=t,Le.info("Main gain set to",t),!0}getAudioContext(){return this._audioContext}resume(){return this._audioContext&&"running"!==this._audioContext.state?this._audioContext.resume():Promise.resolve()}suspend(){return this._audioContext&&"suspended"!==this._audioContext.state?this._audioContext.suspend():Promise.resolve()}destroy(){var e;this._audioContext&&(null===(e=this._mediaElementSource)||void 0===e||e.connect(this._audioContext.destination)),this._nodes=[],this._audioContext=null,this._gainNode=null,this._mediaElementSource=null,Le.info("The AudioProcessor is destroyed")}}const De=c.P.forTag("playback.media_source_manager");function Oe(e){if(!e)return"";const t=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const n=e[i]?`="${e[i]}"`:"";t.push(`${i}${n}`)}return t.length?`; ${t.join("; ")}`:""}class Fe extends u.vp{constructor(e){super(),this._mediaSource=null,this._sourceBuffers={},this._currentInitSegments={},this._updateQueue=[],this._codecs=[],this._playId=0,this._lastBufferClearTime=Date.now(),this._customSourceBufferParams="";const{codecs:t,customSourceBufferParams:i,disableBufferAbort:n}=e;this._codecs=t,this._customSourceBufferParams=Oe(i),this._disableBufferAbort=!!n,this._onSourceOpen=this._onSourceOpen.bind(this),this._onSourceClose=this._onSourceClose.bind(this),this.dequeueUpdates=this.dequeueUpdates.bind(this),e.noInit||this._init()}static create(e){return new Fe(e)}_init(){this._mediaSource=new MediaSource,this._mediaSource.addEventListener(n.MEDIA_SOURCE_OPEN,this._onSourceOpen),this._mediaSource.addEventListener(n.MEDIA_SOURCE_CLOSE,this._onSourceClose),this._sourceBuffers={},this._currentInitSegments={}}_onSourceOpen(){var e;De.info("MediaSource opened.");const t=this._mediaSource;if(0===(null===(e=null==t?void 0:t.sourceBuffers)||void 0===e?void 0:e.length)&&"open"===(null==t?void 0:t.readyState)){De.info("Creating source buffers for codecs",this._codecs);for(const e of this._codecs){const i=t.addSourceBuffer(e+this._customSourceBufferParams);i.addEventListener(n.SOURCE_BUFFER_UPDATE_END,this.dequeueUpdates),this._sourceBuffers[e]=i}}this.dequeueUpdates(),this.emit(n.BUFFER_SOURCE_OPEN,null)}_onSourceClose(){De.info("MediaSource closed."),this._destroySourceBuffers(),this.emit(n.BUFFER_SOURCE_CLOSE,null)}_destroySourceBuffers(){const e=this._mediaSource;if(!e)return;const t=e.sourceBuffers;if(t.length)for(let n=0,a=t.length;n<a;n++){const a=t[n];if(a){a.removeEventListener("updateend",this.dequeueUpdates);try{e.removeSourceBuffer(a),De.info("Removed source buffer")}catch(i){De.warn("Failed to remove sourcebuffer",i)}}}this._sourceBuffers={},this._currentInitSegments={}}_endUpdate(e){var t;this._isUpdating()?this._updateQueue.push(e):"open"===(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState)&&(this._mediaSource.endOfStream(),e.resolve&&e.resolve(!0))}_durationUpdate(e){this._isUpdating()?this._updateQueue.push(e):(this._mediaSource&&(this._mediaSource.duration=e.duration),e.resolve&&e.resolve(!0))}_isUpdating(){if(!this._mediaSource)return!1;const e=this._mediaSource.sourceBuffers;for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i&&i.updating)return!0}return!1}_appendUpdate(e){var t,i;const a=this._sourceBuffers[e.codec];if(!a||a.updating)return void this._updateQueue.push(e);let s=e.buffer;if(e.fragment.init&&this._currentInitSegments[e.codec]===e.profileId)return null===(t=e.resolve)||void 0===t||t.call(e,!0),void Promise.resolve().then(this.dequeueUpdates);if(e.initBuffer&&e.buffer&&this._currentInitSegments[e.codec]!==e.profileId){const t=new Uint8Array(e.initBuffer.byteLength+e.buffer.byteLength);t.set(new Uint8Array(e.initBuffer),0),t.set(new Uint8Array(e.buffer),e.initBuffer.byteLength),s=t.buffer}try{a.appendBuffer(s)}catch(o){let t=!1;return"QuotaExceededError"===o.name?(De.warn("Failed to append buffer: exceeded quota."),t=!0,this.emitSync(n.BUFFER_QUOTA_EXCEEDED,null)):De.warn("Failed to append buffer",o),void new Promise((e=>{t?setTimeout(e,500):e()})).then((()=>{this.emitSync(n.FRAGMENT_APPENDED,e.fragment),this.dequeueUpdates()})).then((()=>{e.init&&this._updateQueue.push(e)}))}this.emitSync(n.FRAGMENT_APPENDED,e.fragment);const r=s.byteLength>e.buffer.byteLength;(e.fragment.init||r)&&(this._currentInitSegments[e.codec]=e.profileId),null===(i=e.resolve)||void 0===i||i.call(e,!0),r?De.info(`Injected combined init segment and playable segment (${e.codec}, ${e.profileId})`):e.init&&De.info(`Injected individual init segment (${e.codec}, ${e.profileId})`)}_abortUpdate(e){var t;"fragment"in e&&this.emitSync(n.FRAGMENT_APPENDED,e.fragment),null===(t=e.resolve)||void 0===t||t.call(e,!1),Promise.resolve().then(this.dequeueUpdates)}dequeueUpdates(){const e=this._updateQueue.shift();e&&this.tryUpdate(e)}tryUpdate(e){if(e.playId!==this._playId)return De.info("Try update dropped: playId has changed"),void this._abortUpdate(e);if(e.timestamp<this._lastBufferClearTime)return De.info("Try update dropped: update is older than the last clear"),void this._abortUpdate(e);const t=this._mediaSource;t&&"open"!==t.readyState&&"ended"!==t.readyState?this._updateQueue.push(e):"end"===e.type?this._endUpdate(e):"duration"===e.type?this._durationUpdate(e):"append"===e.type&&this._appendUpdate(e)}appendBufferData(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();const a=[];if(e.audio){const s=(0,p.$)();this.tryUpdate({playId:i,timestamp:n,fragment:t,type:"append",profileId:e.audio.profileId,buffer:e.audio.buffer,initBuffer:e.audio.initBuffer,codec:e.audio.mimetype,init:!!t.init,resolve:s.resolve}),a.push(s.promise)}if(e.video){const s=(0,p.$)();this.tryUpdate({playId:i,timestamp:n,fragment:t,type:"append",profileId:e.video.profileId,buffer:e.video.buffer,initBuffer:e.video.initBuffer,codec:e.video.mimetype,init:!!t.init,resolve:s.resolve}),a.push(s.promise)}return Promise.all(a)}endOfStream(){this._mediaSource&&"ended"!==this._mediaSource.readyState&&this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"end"})}abort(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._lastBufferClearTime=Date.now(),this._disableBufferAbort)return void De.info("MediaSource abort skipped; action disabled.");const t=this._mediaSource;if(t){const n=t.sourceBuffers;for(let a=0,s=n.length;a<s;a++){const s=n[a];if("open"===t.readyState&&s)try{s.abort();const t=s.buffered;if(e&&t.length){const e=t.start(0),i=t.end(t.length-1);s.remove(e,i),De.info("Cleared buffer range",e,i)}}catch(i){De.warn("MediaSourceManager.clear failed.",i)}}}this._currentInitSegments={}}destroy(){const e=this._mediaSource;e&&(De.info("Source destroyed"),e.removeEventListener("sourceopen",this._onSourceOpen),e.removeEventListener("sourceclose",this._onSourceClose),this._destroySourceBuffers(),this._mediaSource=null)}recreate(e){this.abort(),this.destroy(),this._codecs=e.codecs,e.customSourceBufferParams&&(this._customSourceBufferParams=Oe(e.customSourceBufferParams)),this._init()}setDuration(e){return new Promise((t=>{this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"duration",duration:e,resolve:t})}))}getMediaSource(){return this._mediaSource}setPlayId(e){this._playId=e}getPlayId(){return this._playId}}const we=c.P.forTag("playback.content_buffer");var xe;function Me(){}!function(e){e[e.AUDIO=10]="AUDIO",e[e.VIDEO=20]="VIDEO"}(xe||(xe={}));class Ue extends u.vp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this._appendingFragments=[],this._tracker=e;const{customSourceBufferParams:a,noInit:s,disableBufferAbort:r}=i;this._mediaSourceManager=Fe.create({codecs:t,noInit:s,customSourceBufferParams:a,disableBufferAbort:r}),this._removeAppendingFragment=this._removeAppendingFragment.bind(this),this._mediaSourceManager.on(n.FRAGMENT_APPENDED,(e=>{let{data:t}=e;return this._removeAppendingFragment(t)})),this.proxyEmitAll(this._mediaSourceManager,{[n.BUFFER_SOURCE_OPEN]:n.BUFFER_SOURCE_OPEN,[n.BUFFER_SOURCE_CLOSE]:n.BUFFER_SOURCE_CLOSE,[n.BUFFER_QUOTA_EXCEEDED]:n.BUFFER_QUOTA_EXCEEDED})}static create(e){return new Ue(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}_trackBufferingProgress(e){e.audio&&e.audio.buffer&&this._tracker.trackBytesDownloaded(e.audio.buffer.byteLength),e.video&&e.video.buffer&&this._tracker.trackBytesDownloaded(e.video.buffer.byteLength)}_checkStalling(e,t,i){var a,s;const r=t.byteRanges.video?t.byteRanges.video.start:null!==(s=null===(a=t.byteRanges.audio)||void 0===a?void 0:a.start)&&void 0!==s?s:-1;var o;e>9e3&&this.emit(n.BUFFER_STALLED,{byteStart:r,timeStart:(o=t.timeStart,Math.ceil(1e3*o)),stallAmount:e-9e3,didTimeout:i})}_removeAppendingFragment(e){if(!e)return;const t=this._appendingFragments,i=t.indexOf(e);-1!==i&&t.splice(i,1)}dequeueUpdates(){this._mediaSourceManager.dequeueUpdates()}appendFragment(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(-1!==this._appendingFragments.indexOf(t))return Promise.resolve([]);this._appendingFragments.push(t),this.emit(n.BUFFERING_START,null);const a=Date.now(),s=this._mediaSourceManager.getPlayId(),r=e.toLogJSON();return e.getBufferForFragment(t).then((e=>{var r,o,l,d,c,u;return this._trackBufferingProgress(e),s!==this._mediaSourceManager.getPlayId()?(we.info("Append fragment dropped: playId has changed."),[]):(i||this._checkStalling(Date.now()-a,t,!1),null!==(null===(r=e.audio)||void 0===r?void 0:r.bandwidth)&&this._tracker.trackBufferURL((null===(o=e.audio)||void 0===o?void 0:o.bufferURL)||"",{bandwidth:(null===(l=e.audio)||void 0===l?void 0:l.bandwidth)||0}),null!==(null===(d=e.video)||void 0===d?void 0:d.bandwidth)&&this._tracker.trackBufferURL((null===(c=e.video)||void 0===c?void 0:c.bufferURL)||"",{bandwidth:(null===(u=e.video)||void 0===u?void 0:u.bandwidth)||0}),this.emit(n.BUFFERING_END,null),this._mediaSourceManager.appendBufferData(e,t,s,a))})).catch((e=>(this._removeAppendingFragment(t),i||this._checkStalling(Date.now()-a,t,!0),this.emit(n.BUFFER_APPEND_ERROR,{error:e,canPlayNext:!0,track:r}),Promise.reject(e))))}abort(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._appendingFragments=[],this._mediaSourceManager.abort(e)}getMediaSource(){return this._mediaSourceManager.getMediaSource()}destroy(){this._mediaSourceManager.destroy()}progress(e,t,i){const n=this._mediaSourceManager.getMediaSource();if(!n)return;const a="video"===e.getMediaType()?xe.VIDEO:xe.AUDIO;if("open"===n.readyState||"ended"===n.readyState){let s;const r=function(e,t){var i;const n=null===(i=e.sourceBuffers[e.sourceBuffers.length-1])||void 0===i?void 0:i.buffered;if(n){let e,i;for(let a=0;a<n.length;a++)if(e=n.start(a),i=n.end(a),e<=t&&t<=i)return{start:e,end:i}}return null}(n,i);if(r){if(i+a>n.duration)return void("open"===n.readyState&&this._mediaSourceManager.endOfStream());const o=e.getFragmentLength();Math.ceil(i/o)>Math.floor(r.end/o)&&(s=e.getFragmentForTime(i),s&&this.appendFragment(e,s,t).catch(Me));const l=Math.floor(r.end-i);if(l>a)return;const d=Math.min(e.getFragmentLength(),a-l);if(d<1)return;const c=Math.floor(r.end+d);s=e.getFragmentForTime(c),s?this.appendFragment(e,s,t).catch(Me):this._mediaSourceManager.endOfStream()}else if(s=e.getFragmentForTime(i),s){if(this.appendFragment(e,s,t).catch(Me),s.timeEnd<i+5){const i=e.getFragmentAfterTime(s.timeStart);i?this.appendFragment(e,i,t).catch(Me):this._mediaSourceManager.endOfStream()}}else this._mediaSourceManager.endOfStream()}}recreate(e){this._appendingFragments=[],this._mediaSourceManager.recreate({codecs:e})}setDuration(e){return this._mediaSourceManager.setDuration(e)}setPlayId(e){this._mediaSourceManager.setPlayId(e)}}const je=c.P.forTag("playback.player"),Be=/^blob:/,Ge={[o.MP4]:!0,[o.MP4_DUAL]:!0,[o.MP4_CBCS]:!0,[o.MP4_FLAC]:!0,[o.MP3]:!1,[o.MANIFEST_ID]:!1};function Ve(e){return Math.ceil(1e3*e)}function Ye(e){return e/1e3}function Ke(e){return document.createElement(e)}class He extends u.vp{constructor(e){super(),this._cubicVolume=!1,this._player=null,this._emeManager=null,this._mediator=new u.vp,this._currentContent=null,this._upcomingContent=null,this._preloadingTracks={},this._playId=0,this._loaded=!1,this._licenseRequested=!1,this._playerActivated=!1,this._pauseToken=0,this._syntheticEndedToken=0,this._activeCodecs=[],this._playerVolume=1,this._playerSpeed=1,this._fatalOnNextError=!1,this._canPreloadEmitted=!1,this._lastTimeUpdatePostion=0,this._buffering=!1,this._preferredBitrate=0,this._disableLicensePrefetch=!1,this._allowMixedAVC1Codecs=!1,this._disableBufferingBeforeLicense=!1,this._audioResolver=e.audioResolver,this._clearBufferOnSeek=!!e.clearBufferOnSeek,this._createPlayer=e.createPlayer||Ke,this._cubicVolume=e.cubicVolume,this._disableCache=!!e.disableCache,this._licenseURLResolver=e.licenseURLResolver,this._newBufferPerTrack=!!e.newBufferPerTrack,this._newElementPerTrack=!!e.newElementPerTrack,this._newMediaKeysPerTrack=!!e.newMediaKeysPerTrack,this._rebufferOnQuotaExceeded=!!e.rebufferOnQuotaExceeded,this._disableLicensePrefetch=!!e.disableLicensePrefetch,this._synthesizeEnded=!!e.synthesizeEnded,this._tracker=e.tracker,this._transport=e.transport,this._videoPlayerContainer=e.videoPlayerContainer,this._audioPlayerContainer=e.audioPlayerContainer,this._allowMixedAVC1Codecs=e.allowMixedAVC1Codecs,this._videoResolver=e.videoResolver,this._abrManager=new Ee,this._emeManager=e.disallowProtectedTracks?null:e.emeManager||null,this._disallowProfile=e.disallowProfile,this._disableBufferingBeforeLicense=!!e.disableBufferingBeforeLicense,this._cache=new m.z6(e.trackCacheSize||2),this._subtitleManager=new Ce({language:e.preferredSubtitleLanguage||navigator.language,player:this._player}),this._videoResolution=e.videoResolution,je.info("Setting Player track cache to:",e.trackCacheSize||2),this._bufferManager=Ue.create(this._tracker,void 0,{disableBufferAbort:!!e.disableBufferAbort,reinjectInitsOnAbort:!!e.reinjectInitsOnAbort,noInit:!0,customSourceBufferParams:e.customSourceBufferParams}),this._statistics=Ie.create({bandwidthEstimator:this._abrManager}),this._audioProcessor=Pe.create(e.audioProcessorOptions),this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onPlay=this._onPlay.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onPause=this._onPause.bind(this),this._onSeeking=this._onSeeking.bind(this),this._onEncrypted=this._onEncrypted.bind(this),this._onEnded=this._onEnded.bind(this),this._onError=this._onError.bind(this),this._onRequiresDuration=this._onRequiresDuration.bind(this),this._onQuotaExceeded=this._onQuotaExceeded.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this._onWaiting=this._onWaiting.bind(this),this._onFragmentFetched=this._onFragmentFetched.bind(this),this._onProfileChanged=this._onProfileChanged.bind(this),this._onPlayedThresholdReached=this._onPlayedThresholdReached.bind(this),this._onSyntheticEnded=this._onSyntheticEnded.bind(this),this._onLicenseRequestCapped=this._onLicenseRequestCapped.bind(this),this._onLicenseRequestError=this._onLicenseRequestError.bind(this),this._onNavigatorOffline=this._onNavigatorOffline.bind(this),this._onBufferError=this._onBufferError.bind(this),this._emitWarning=this._emitWarning.bind(this),this._handleLoadingComplete=this._handleLoadingComplete.bind(this),this._onRateChange=this._onRateChange.bind(this),this._onVideoResize=this._onVideoResize.bind(this),this._setAudioGain=this._setAudioGain.bind(this),this._init()}static create(e){const t=Object.assign({},e);return e.disallowProtectedTracks?He.createWithOptions(t):q.create({transport:e.transport,disallowRobustnessValues:e.disallowRobustnessValues,disallowCodecs:e.disallowCodecs,noServerCertificate:e.noServerCertificate,precacheServerCertificate:e.precacheServerCertificate,unauthServerCertificateBase:e.unauthServerCertificateBase,preferredKeySystems:e.preferredKeySystems}).then((e=>{t.emeManager=e;const i=new He(t);return t.preinitMediaElement?i._preinitMediaElement():i})).catch((i=>{if(e.enableWithoutEME)return He.createWithOptions(t);throw i}))}static createWithOptions(e){return new Promise((t=>{const i=new He(e);t(e.preinitMediaElement?i._preinitMediaElement():i)}))}_init(){this._disableCache&&je.info("Cache disabled."),this._transport.on(this._transport.EVENT_CONNECTION_OFFLINE,this._onNavigatorOffline),this.proxyEmitAllSync(this._tracker,{[n.TRACKER_TRACKING_DATA_CREATED]:n.PLAYER_TRACKING_DATA_CREATED,[n.TRACKER_TRACKING_DATA_FINALIZED]:n.PLAYER_TRACKING_DATA_FINALIZED,[n.TRACKER_PLAYBACK_START]:n.PLAYER_PLAYBACK_START}),this._tracker.on(n.TRACKER_PLAYED_THRESHOLD_REACHED,this._onPlayedThresholdReached),this._emeManager&&this._emeManager.addListeners({[n.EME_LICENSE_REQUEST_CAPPED]:this._onLicenseRequestCapped,[n.EME_LICENSE_REQUEST_ERROR]:this._onLicenseRequestError}),this._bufferManager.addListeners({[n.BUFFER_APPEND_ERROR]:this._onBufferError,[n.BUFFER_QUOTA_EXCEEDED]:this._onQuotaExceeded}),this.proxyEmitAll(this._bufferManager,{[n.BUFFER_STALLED]:n.PLAYER_BUFFER_STALLED}),this._mediator.addListeners({[l.FRAGMENT_FETCHED]:this._onFragmentFetched,[l.VIDEO_PROFILE_CHANGED]:this._onProfileChanged}),this.proxyEmitAll(this._mediator,{[l.FRAGMENT_FETCH_ERROR]:n.PLAYER_FRAGMENT_FETCH_ERROR,[l.SUBTITLE_LANGUAGES_LOADED]:n.PLAYER_SUBTITLE_LANGUAGES_LOADED}),this.proxyEmitSync(this._subtitleManager,n.PLAYER_DISPLAYED_CUES_CHANGED,n.PLAYER_DISPLAYED_CUES_CHANGED),this.proxyEmitAll(this._videoResolver,{[n.VIDEO_MANIFEST_RESOLVED]:n.PLAYER_VIDEO_MANIFEST_RESOLVED,[n.VIDEO_MANIFEST_RESOLVE_FAILED]:n.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED})}_onRateChange(){this._player&&(this._tracker.trackSpeedChanged(this._player.playbackRate),this.emit(n.PLAYER_PLAYBACK_SPEED_CHANGED,{playback_speed:this._player.playbackRate}))}_onLicenseRequestError(e){if(e.data.playId!==this._playId)return;const t=this._currentContent;if(!t)return;const i=e.data.error;i.shouldRefreshEndpoint&&this._licenseURLResolver.remove(t.getKeySystem(),t.getMediaType()),this._emitError(i,!i.unrecoverable,t.toLogJSON())}_onFragmentFetched(e){const{data:t}=e;this._tracker.trackFragment(t),this.emit(n.PLAYER_FRAGMENT_FETCHED,t)}_onProfileChanged(e){const{data:t}=e;this._tracker.trackProfileChanged(t.profile),this.emit(n.PLAYER_VIDEO_PROFILE_CHANGED,t)}_onLicenseRequestCapped(e){if(e.data.playId!==this._playId)return;this._currentContent&&(this.pause(),this.emit(n.PLAYER_CAPPED,null))}_shouldNextErrorBeFatal(){const e=this._currentContent;if(!e)return!1;if(e.isAd()||!e.isProtected())return!1;if(!this._player)return!1;const t=this._player.error;if(!(t&&t instanceof MediaError))return this._fatalOnNextError=!1,!1;switch(t.code){case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:case MediaError.MEDIA_ERR_DECODE:return!0;default:return!1}}_onNavigatorOffline(){this._tracker.trackNavigatorOffline()}_onBufferError(e){this._emitError(e.data.error,e.data.canPlayNext,e.data.track)}_addPlayerEvents(e){e.addEventListener(n.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.addEventListener(n.MEDIA_PLAY,this._onPlay),e.addEventListener(n.MEDIA_PLAYING,this._onPlaying),e.addEventListener(n.MEDIA_PAUSE,this._onPause),e.addEventListener(n.MEDIA_SEEKING,this._onSeeking),e.addEventListener(n.MEDIA_ENCRYPTED,this._onEncrypted),e.addEventListener(n.MEDIA_ENDED,this._onEnded),e.addEventListener(n.MEDIA_ERROR,this._onError),e.addEventListener(n.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.addEventListener(n.MEDIA_DURATIONCHANGE,this._onDurationChange),e.addEventListener(n.MEDIA_WAITING,this._onWaiting),e.addEventListener(n.MEDIA_CANPLAY,this._onCanPlay),e.addEventListener(n.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.addEventListener(n.MEDIA_RATECHANGE,this._onRateChange),e.addEventListener(n.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration),e.addEventListener(n.MEDIA_RESIZE,this._onVideoResize)}_removePlayerEvents(e){e.removeEventListener(n.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.removeEventListener(n.MEDIA_PLAY,this._onPlay),e.removeEventListener(n.MEDIA_PLAYING,this._onPlaying),e.removeEventListener(n.MEDIA_PAUSE,this._onPause),e.removeEventListener(n.MEDIA_SEEKING,this._onSeeking),e.removeEventListener(n.MEDIA_ENCRYPTED,this._onEncrypted),e.removeEventListener(n.MEDIA_ENDED,this._onEnded),e.removeEventListener(n.MEDIA_ERROR,this._onError),e.removeEventListener(n.MEDIA_WAITING,this._onWaiting),e.removeEventListener(n.MEDIA_CANPLAY,this._onCanPlay),e.removeEventListener(n.MEDIA_RATECHANGE,this._onRateChange),e.removeEventListener(n.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.removeEventListener(n.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.removeEventListener(n.MEDIA_DURATIONCHANGE,this._onDurationChange),e.removeEventListener(n.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration),e.removeEventListener(n.MEDIA_RESIZE,this._onVideoResize)}_recreateMediaElement(e,t,i,a){if(t!==this._playId)return je.info("Recreate player dropped: playId has changed."),Promise.resolve(!1);const s=this._player;if(s){if(!this._newElementPerTrack&&("AUDIO"!==s.tagName||"video"!==i)){let t=!0;for(const i of e)if('audio/mp2t;codecs="mp4a.40.2"'!==i&&!s.canPlayType(i)){t=!1;break}if(t)return je.info("Reusing media element."),e.join(",")===this._activeCodecs.join(",")&&!this._newBufferPerTrack||a||(je.info("Recreating buffer."),this._bufferManager.recreate(e),this._activeCodecs=e),Promise.resolve(!0)}this._removePlayerEvents(s),s.pause(),this._emeManager&&this._emeManager.removeMediaKeys(s).catch((function(e){je.warn("Failed to remove media keys.",e)})),this._player=null;const t=this._getContainerElement(this._videoPlayerContainer);t&&s.parentNode===t&&(t.removeChild(s),this.emit(n.PLAYER_VIDEO_ELEMENT_REMOVED,null));const r=this._getContainerElement(this._audioPlayerContainer);r&&s.parentNode===r&&r.removeChild(s)}je.info("Creating new media element.");const r=this._createPlayer(i),o=this._playerVolume;return r.volume=this._cubicVolume?o*o*o:o,r.autoplay=!1,r.loop=!1,"playsInline"in r&&(r.playsInline=!0),this._player=r,this._subtitleManager.setPlayer(r),this._playerActivated=!1,this._addPlayerEvents(r),a||this._bufferManager.recreate(e),this._activeCodecs=e,Promise.resolve(!0)}_getContainerElement(e){return"string"==typeof e?document.querySelector(e):e||null}_onVideoResize(){if(!(this._player instanceof HTMLVideoElement))return;const{videoWidth:e,videoHeight:t}=this._player;this.emit(n.PLAYER_VIDEO_RESIZED,{width:e,height:t})}_onDurationChange(){const e=this._playId,t=()=>{if(!this._player)return;if(e!==this._playId)return void je.info("Duration changed drop: playId has changed.");const t=Ve(this._player.duration),i=Ve(this._player.currentTime);this._tracker.setActualDuration(t),this.emit(n.PLAYER_DURATION_CHANGED,{timestamp:Date.now(),position:i,duration:t})};this._loaded?t():this.once(n.PLAYER_LOAD,t)}_onPlay(){var e;if(!this._player||!this._currentContent)return;const t=Ve(this._player.currentTime);this._tracker.trackPlay(t,this._player.playbackRate),this.emit(n.PLAYER_PLAY,{timestamp:Date.now(),position:t,logData:null!==(e=this._currentContent.getLogData())&&void 0!==e?e:null})}_onPlaying(){if(!this._player)return;this._playerActivated=!0;const e=this._currentContent,t=Ve(this._player.currentTime);this._tracker.trackPlaying(t),this.emit(n.PLAYER_PLAYING,{timestamp:Date.now(),position:t,logData:e?e.getLogData():null})}_onPause(){if(!this._player)return;const e=Ve(this._player.currentTime);this._tracker.trackPaused(e);const t=this._currentContent?this._currentContent.getLogData():null;this._pauseToken=setTimeout((()=>{clearTimeout(this._syntheticEndedToken),this.emit(n.PLAYER_PAUSED,{position:e,logData:t})}),10)}_onSeeking(){this.emit(n.PLAYER_SEEKING,null),this._bufferManager.abort(this._clearBufferOnSeek),this._lastTimeUpdatePostion=0,this._onTimeUpdate()}_onRequiresDuration(){this._currentContent&&this._currentContent.isProtected()&&this._player&&(this._player.duration=this._currentContent.getCalculatedDuration())}_onQuotaExceeded(){this._player&&this._rebufferOnQuotaExceeded&&(je.info("Exceeded quota: rebuffering current track."),this._bufferManager.abort(!0),this._player.currentTime=this._player.currentTime,this._onTimeUpdate())}_onEncrypted(e){je.info("Got Encrypted event");this._currentContent&&this.emitSync(n.INTERNAL_ENCRYPTED,{initData:e.initData,fromPolyfill:!!e.fromPolyfill})}_onEnded(){!this._currentContent||this._synthesizeEnded&&this._currentContent.isProtected()||(je.info("Native ended emitted."),this._emitEnded())}_onSyntheticEnded(){this._synthesizeEnded&&this._currentContent&&this._currentContent.isProtected()&&(je.info("Synthetic ended emitted."),this._emitEnded())}_onError(){if(!this._player)return;const e=this._player.error;let t,i=!1;const n=this._currentContent;let a,r,o,l=!1;n&&(i=n.isProtected(),t=n.toLogJSON(),l=n.isAd(),n.clearCachedBuffers());let d=!0;const c=!n||l||!this._fatalOnNextError,u=e&&e.msExtendedCode?`0x${(e.msExtendedCode>>>0).toString(16).toUpperCase()}`:null,m=`data:${(null==t?void 0:t.fileId)||"unknown"}`;if(e instanceof MediaError){switch(e.code){case MediaError.MEDIA_ERR_ABORTED:a=s.MEDIA_ABORTED,r="Media aborted.";break;case MediaError.MEDIA_ERR_NETWORK:a=s.MEDIA_NETWORK_ERROR,r="Network error.";break;case MediaError.MEDIA_ERR_DECODE:a=s.MEDIA_DECODING_ERROR,r="Media decoding error.",d=c;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:a=s.MEDIA_NOT_SUPPORTED,r="Media not supported.",d=c;break;default:a=s.PLAYER_MEDIA_ERROR,r="Media error.",o=!0}r+=` (${e.message||u||m||e.toString()})`}else a=s.PLAYER_PLAYBACK_ERROR,r="Error message undefined",o=!0;this._bufferManager.abort(!0);const h=new _(a,r);d||(h.unrecoverable=!0),h.listPlayerIgnore=l,h.debug.src_url=m,h.debug.protected=i,h.debug.extendedCode=u,h.debug.rawExCode=e&&e.msExtendedCode||null,o&&e&&(h.debug.nativeCode=e.code||null,h.debug.errorData=e),this._emitError(h,d,t)}_onLoadedMetadata(){this.emitSync(n.INTERNAL_PLAYER_LOADED_METADATA,null)}_onCanPlay(){this._buffering=!1,this.emitSync(n.INTERNAL_PLAYER_CANPLAY,null),this.emit(n.PLAYER_FIRST_BYTES,null)}_onCanPlayThrough(){this.emitSync(n.INTERNAL_PLAYER_CANPLAYTHROUGH,null)}_onWaiting(){clearTimeout(this._syntheticEndedToken);const e=this._player;if(!e||!this._currentContent)return;const t=e.seeking;this._buffering=!0;const i=this._currentContent.canLowerBitrate(),a=this._tracker;this.emit(n.PLAYER_BUFFERING_START,Object.assign({position:Ve(e.currentTime),msPlayed:this._tracker.getMSPlayed(),canLowerBitrate:i,seeking:t},a.getStallsInformation())),this._getBufferingLatency().then((s=>{t||this._tracker.trackMsStalled(s),this.emit(n.PLAYER_BUFFERING_END,Object.assign({position:Ve(e.currentTime),msPlayed:this._tracker.getMSPlayed(),canLowerBitrate:i,msStalled:s,seeking:t},a.getStallsInformation()))}))}_onPlayedThresholdReached(e){this._currentContent&&this._player&&this.emit(n.PLAYER_PLAYED_THRESHOLD_REACHED,{played:e.data.played,threshold:e.data.threshold,position:Ve(this._player.currentTime)})}_emitEnded(){this._currentContent&&"video"===this._currentContent.getMediaType()&&this.emit(n.PLAYER_ENDED_VIDEO,null),clearTimeout(this._pauseToken),this.emit(n.PLAYER_ENDED,null)}_emitError(e,t,i){je.error("Player Error",e,i,t),this._tracker.setHadError(!0),!this._disableCache&&i&&i.fileId&&this._cache.remove(i.fileId),this.emit(n.PLAYER_ERROR,{playId:this._playId,error:e,track:i,canPlayNext:t,position:this._player?Ve(this._player.currentTime):0})}_emitWarning(e,t){je.error("Player Warning",e,t,!0),this._tracker.trackWarning(),this.emit(n.PLAYER_WARNING,{playId:this._playId,error:e,track:t,canPlayNext:!0,position:this._player?Ve(this._player.currentTime):0})}_prepareMediaElement(e,t){return t===this._playId&&this._upcomingContent?this._recreateMediaElement(this._upcomingContent.getPlayableCodecs(),t,this._upcomingContent.getMediaType(),this._upcomingContent.getKeySystem()===a.FAIRPLAY).then((i=>{var n;if(!i||t!==this._playId)return je.info("Loading content dropped after recreate: playId has changed."),Promise.resolve(!1);this._player.playbackRate=(null===(n=this._loadingOptions)||void 0===n?void 0:n.useDefaultPlaybackSpeed)?1:this._playerSpeed;const a=this._player;return"VIDEO"===(null==a?void 0:a.tagName)&&(e.poster?a.poster=e.poster:a.removeAttribute("poster")),a&&this._upcomingContent&&this._upcomingContent.isProtected()&&this._emeManager&&(!a.mediaKeys||a.mediaKeys.shouldRefreshPerTrack||this._newMediaKeysPerTrack)?(je.info("Creating media keys"),this._emeManager.createMediaKeys(a).then((()=>!0)).catch((e=>(e.unrecoverable=!0,this._emitError(e,!1,this._upcomingContent?this._upcomingContent.toLogJSON():void 0),Promise.reject(e))))):Promise.resolve(!0)})):(je.info("Loading content dropped: playId has changed."),Promise.resolve(!1))}_handleLoadingComplete(e){const t=this._currentContent&&this._currentContent.getMediaType(),i=this._getContainerElement("video"===t?this._videoPlayerContainer:this._audioPlayerContainer);return i&&this._player&&this._player.parentNode!==i&&(i.appendChild(this._player),"video"===t&&this.emit(n.PLAYER_VIDEO_ELEMENT_APPENDED,null)),this._upcomingContent=null,e}_handleLoadingError(e,t,i,a){if(this._upcomingContent=null,i!==this._playId)return Promise.resolve(!1);if(this._tracker.trackLoadFailed(),this.emit(n.PLAYER_LOADING_FAILED,{uri:e,logData:t.logData}),a){const i=a.track||{uri:e,fileId:t.fileId,format:t.format,deviceId:t.logData.deviceId};this._emitError(a,"StorageError"!==a.name||!!a.canPlayNext,i)}return Promise.reject(a)}_handleLoadedMetadata(e,t,i){if(e!==this._playId)return void je.info("LoadedMetadata operations dropped: playId has changed.");this._loaded=!0;const a=this._player;if(!a)return;this._bufferManager.dequeueUpdates();const s=i.position>a.duration?0:i.position;this._lastTimeUpdatePostion=0,(isNaN(a.currentTime)||a.currentTime<s)&&(je.info("Resetting initial position after metadata."),a.currentTime=s),this._tracker.trackLoadDone(Ve(a.currentTime)),this.emitSync(n.PLAYER_LOAD,{autoplay:i.autoplay,position:Ve(s),logData:t}),Promise.resolve().then((()=>{this._onTimeUpdate()}));let r=()=>{a.currentTime<s&&(je.info("Resetting initial position after playable."),a.currentTime=s)};i.autoplay&&!a.error&&(r=()=>{if(a.currentTime<s&&(je.info("Resetting initial position after playable."),a.currentTime=s),this._playId!==e)return void je.info("Play trigger dropped; different playId");new Promise((e=>e(this._player&&this._player.play()))).catch((e=>{if(e){if("NotSupportedError"===e.name)return Promise.reject(e);if("NotAllowedError"===e.name)return this.emit(n.PLAYER_AUTOPLAY_FAILED,null),Promise.reject(e)}return this._player?this._player.play():Promise.resolve()})).catch((()=>{this._onPause()}))}),a.readyState>2?(je.info("Ready to play, triggering play."),r()):(je.info("Waiting to be playable."),this.once(n.INTERNAL_PLAYER_CANPLAY,r))}_handleCanPlayThrough(e){e===this._playId?this._tracker.trackCanPlayThrough():je.info("CanPlayThrough operations dropped: playId has changed.")}_loadContent(e,t){if(t!==this._playId||!this._upcomingContent)return je.info("Loading content dropped: playId has changed."),Promise.resolve(!1);if(!this._player)throw new _(s.PLAYER_INVALID_INTERNAL_STATE,"Cannot load content without an HTMLMediaElement");this._canPreloadEmitted=!1;const i=this._upcomingContent;this._upcomingContent=null,this._currentContent=i,this._setAudioGain(i),this._subtitleManager.setVideoContent(i instanceof he?i:null);const r=e.callback;r&&this.once(n.PLAYER_LOAD,(()=>{this._playId&&t===this._playId?r():je.info("Load content event dropped: playId has changed.")})),this.once(n.INTERNAL_PLAYER_LOADED_METADATA,this._handleLoadedMetadata.bind(this,t,this._currentContent.getLogData(),e)),this.once(n.INTERNAL_PLAYER_CANPLAYTHROUGH,this._handleCanPlayThrough.bind(this,t));let o=e.position;const l=i.getCalculatedDuration();l&&o>l&&(o=e.position=0);try{this._player.currentTime=o}catch(c){je.warn("Cannot set initial position before loading.",c)}const d=i.isProtected();return this._tracker.setProtected(d),i.getKeySystem()===a.FAIRPLAY?i instanceof ke&&!d?Promise.resolve(this._loadUnprotectedTrack()):Promise.resolve(this._loadHLSProtectedTrack(e,t)):i instanceof he?this._loadVideoTrack(e,t):d?this._loadProtectedTrack(e,t):Promise.resolve(this._loadUnprotectedTrack())}_getBufferingLatency(){return new Promise((e=>{if(!this._player)return void e(0);const t=Date.now();this._player.addEventListener("canplaythrough",(function i(){this.removeEventListener("canplaythrough",i),e(Date.now()-t)}))}))}_loadVideoTrack(e,t){if(!(this._player&&this._currentContent&&this._currentContent instanceof he))return Promise.resolve(!1);const i=this._currentContent;je.info("_loadVideoTrack");const a=()=>{this._currentContent&&this._currentContent.isProtected()&&this._requestLicense(t).then((()=>{this._playId===t&&(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}))};this._disableLicensePrefetch?this.once(n.INTERNAL_ENCRYPTED,a):this._bufferManager.once(n.BUFFER_SOURCE_OPEN,a);const r=this.getMediaSource();if(!r)throw new _(s.PLAYER_INVALID_INTERNAL_STATE,"No media source.");this._player.src=URL.createObjectURL(r);const o=i.getVideoProfile(),l=i.getAudioProfile();return l||o?(this._tracker.trackVideoLoadStart({bitrate:null==o?void 0:o.video_bitrate,audioProfile:null!=l?l:void 0,videoProfile:null!=o?o:void 0}),this._tracker.trackBufferLoadStart(),this._bufferManager.setDuration(i.getCalculatedDuration()).then((()=>this._bufferManager.appendFragment(i,i.getInitFragment()))).then(this._onAppendedHeadSegment(t))):Promise.resolve(!1)}_loadHLSProtectedTrack(e,t){if(je.info("Load HLS Protected Track"),!this._player||!this._currentContent)return!1;const i=this._currentContent.getResolvedURL();if(!i)throw new h(s.FILE_NOT_RESOLVED,"Cannot load HLS protected track: File not resolved.");const a=e=>{e.data.fromPolyfill&&(this.removeListener(n.INTERNAL_ENCRYPTED,a),this._requestLicense(t,{initData:e.data.initData}))};this.on(n.INTERNAL_ENCRYPTED,a);const r=this._currentContent;if(r instanceof he){const e=r.getVideoProfile(),t=r.getAudioProfile();this._tracker.trackVideoLoadStart({bitrate:null==e?void 0:e.video_bitrate,audioProfile:null!=t?t:void 0,videoProfile:null!=e?e:void 0})}this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(i,{bandwidth:0});const o=document.createElement("source");return o.src=this._currentContent.getHLSURL(),o.type=Z,this._player.appendChild(o),this._player.load(),!0}_loadUnprotectedTrack(){if(!this._player||!this._currentContent)return!1;const e=this._currentContent.getResolvedURL();return!!e&&(je.info("_loadUnprotectedTrack",this._currentContent.getURI()),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(e,{bandwidth:0}),this._player.src=e,this._player.load(),!0)}_onAppendedHeadSegment(e){return()=>e===this._playId&&(this._player&&this._player.spload&&this._player.spload(),je.info("Head segment appended."),!0)}_loadProtectedTrack(e,t){if(!(this._currentContent&&this._player&&this._currentContent instanceof ke))return Promise.resolve(!1);const i=this._currentContent;je.info("_loadProtectedTrack",i.getURI());const a=()=>this._requestLicense(t).then((()=>{this._playId===t&&(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}));this._disableLicensePrefetch?this.once(n.INTERNAL_ENCRYPTED,a):this._bufferManager.once(n.BUFFER_SOURCE_OPEN,a);const r=this.getMediaSource();if(!r)throw new _(s.PLAYER_INVALID_INTERNAL_STATE,"No media source.");this._player.src=URL.createObjectURL(r),this._tracker.trackBufferLoadStart();const o=i.getFragmentForTime(e.position);let l=null;return o===i.getFirstFragment()?(je.info("Appending combined init and playable fragment."),l=this._bufferManager.appendFragment(i,i.getHeadFragment())):(je.info("Appending split init and playable fragment."),l=this._bufferManager.appendFragment(i,o)),l.then(this._onAppendedHeadSegment(t)).then((()=>Promise.resolve(t===this._playId)))}_requestLicense(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this._playId){const e="Request license dropped: playId has changed.";return je.info(e),Promise.resolve(!1)}if(!this._player||!this._currentContent||!this._emeManager)return Promise.resolve(!1);const i=Date.now(),a=this._player.mediaKeys,s=this._currentContent,r=s.getFileId(),o=s.getLogData(),l=s.toLogJSON(),d=s.getKeySystem(),c=s.getLicenseEndpoint();let u;if(c)u=Promise.resolve(c);else{if(!r)return Promise.reject(new TypeError("Missing: fileId or licenseEndpoint"));u=this._licenseURLResolver.get(d,s.getMediaType()).then((e=>e.replace(/\{contentId\}/,r)))}const m=this._emeManager,_=this._tracker;return _.setKeySystem(d),_.setKeySystemImpl(m.getKeySystemImpl()),Promise.all([u,s.getInitParams()]).then((n=>{let[s,r]=n;_.setLicenseSessionLatency(Date.now()-i);const o=r.initDataType,l=t.initData||r.initData;if(a&&l&&o){const t=Object.assign(Object.assign({},r),{playId:e,initData:l,mediaKeys:a,licenseServer:s,initDataType:o});return m.createSessionWithParams(t)}return Promise.resolve(!1)})).then((t=>{if(e!==this._playId)return je.info("License tracking dropped: playId has changed."),Promise.resolve(!1);"boolean"!=typeof t&&"elapsed"in t&&(_.setLicenseGenerationLatency(t.elapsed.generate),_.setLicenseRequestLatency(t.elapsed.request),_.setLicenseUpdateLatency(t.elapsed.update));const a=Date.now()-i;return _.setKeyLatency(a),this.emit(n.PLAYER_KEY_RECEIVED,{requestTime:a,logData:o}),je.info("License updated."),Promise.resolve(!0)})).catch((t=>{if(!t||e!==this._playId)return Promise.resolve(!1);const i=!t||!("canPlayNext"in t)||t.canPlayNext;return this._emitError(t,i,l),Promise.reject(t)}))}_onTimeUpdate(){var e;if(!this._loaded||!(null===(e=this._player)||void 0===e?void 0:e.readyState)||!this._currentContent)return;const t=this._currentContent,i=this._player.seeking,s=this._player.currentTime,r="video"===t.getMediaType();if(t.isProtected()&&this._disableBufferingBeforeLicense&&!this._licenseRequested)return void je.log("Dropping time update event: buffering before license disabled.");if(!i&&this._lastTimeUpdatePostion&&this._lastTimeUpdatePostion===s)return void je.warn("Dropping duplicate time update.");this._lastTimeUpdatePostion=i?0:s,t.getKeySystem()!==a.FAIRPLAY&&(r||t.isProtected())&&this._bufferManager.progress(t,i,s);const o=this._player.duration,l=Ve(s),d=t.getLogData();i?(this._tracker.trackPositionChanged(l),this.emit(n.PLAYER_POSITION_CHANGED,{position:l,logData:d})):(this._tracker.trackProgress(l,"getCurrentBitrate"in t?t.getCurrentBitrate():0),this.emit(n.PLAYER_PROGRESS,{timestamp:Date.now(),position:l,played:this._tracker.getMSPlayed(),interval:500,logData:d})),!this._canPreloadEmitted&&o-s<=10?(this._canPreloadEmitted=!0,this.emit(n.PLAYER_CAN_PRELOAD,null)):this._canPreloadEmitted=!1,clearTimeout(this._syntheticEndedToken),this._synthesizeEnded&&t.isProtected()&&this._isPlaying()&&(this._syntheticEndedToken=setTimeout(this._onSyntheticEnded,Ve(o-s)))}_isPlaying(){return!!this._player&&!this._player.paused}_createAudioContent(e,t){const i={manifestLatency:0,resolveLatency:0};return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:a.INVALID_SPOTIFY_KEY})).then((n=>ke.create({abrManager:this._abrManager,mediator:this._mediator,keySystem:n.keySystem,licenseEndpoint:t.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:e,fileId:t.fileId,fileFormat:t.fileFormat,format:t.format,isAd:t.isAd,resolvedURL:t.resolvedURL,noManifest:t.noManifest,preloadedManifest:t.preloadedManifest,logData:t.logData,disableCache:this._disableCache,emitWarning:this._emitWarning,audioGain:t.audioGain}).load(i))).then((e=>{const n=this._tracker;return n.setResolveLatency(i.resolveLatency),n.setManifestLatency(i.manifestLatency),e.isProtected()&&t.fileId&&!this._disableCache&&this._cache.set(t.fileId,e),e}))}_createVideoContent(e,t){const i={manifestLatency:0,resolveLatency:0},n=t.fileId;return(this._emeManager?this._emeManager.getKeySystemInfo():this.getMediaConfig().then((e=>({keySystem:a.INVALID_SPOTIFY_KEY,audioFormats:e.formatsInfo.audio,videoFormats:e.formatsInfo.video})))).then((a=>he.create({uri:e,abrManager:this._abrManager,mediator:this._mediator,resolver:this._videoResolver,keySystem:a.keySystem,licenseEndpoint:t.licenseEndpoint,fileId:n,noAuth:t.noAuth,format:o.MANIFEST_ID,isAd:t.isAd,transport:this._transport,videoFormats:a.videoFormats,videoResolution:this._videoResolution,audioFormats:a.audioFormats,disableCache:this._disableCache,disallowProfile:this._disallowProfile,allowMixedAVC1Codecs:this._allowMixedAVC1Codecs,audioGain:t.audioGain}).load(i))).then((e=>{const t=this._tracker;return t.setResolveLatency(i.resolveLatency),t.setManifestLatency(i.manifestLatency),e.isProtected()&&n&&!this._disableCache&&this._cache.set(n,e),e}))}_preinitMediaElement(){return this._player||!this._emeManager?Promise.resolve(this):this._emeManager.getKeySystemInfo().then((e=>{var t,i;const n=[];return(null===(t=e.audioFormats)||void 0===t?void 0:t[0])&&n.push(e.audioFormats[0].contentType),(null===(i=e.videoFormats)||void 0===i?void 0:i[0])&&n.push(e.videoFormats[0].contentType),!!n.length&&this._recreateMediaElement(n,this._playId,n.length>1?"video":"audio",e.keySystem!==a.FAIRPLAY)})).then((()=>this),(e=>(je.warn("Cannot precreate media element:",null==e?void 0:e.message),this)))}_setAudioGain(e){var t;null===(t=this._audioProcessor)||void 0===t||t.setAudioGain(e.getAudioGain())}getCodecInfo(){return{audiocodec:"mp3",bitrate:160}}getMediaSource(){return this._bufferManager.getMediaSource()}load(e,t,i){var a;const r=function(e,t){return t&&t.hasOwnProperty(e)}(t.uriProperty,e)?t.uriProperty:"uri",o=e[r];if(je.info("load",o),!o)return Promise.reject(new _(s.PLAYER_CANNOT_FIND_PLAYABLE_URI,"Cannot find a playable URI."));if(!e.logData)return Promise.reject(new Error("Invalid track: logging info not specified"));this.stop(e.logData,e.mediaType),this._loaded=!1,this._licenseRequested=!1,this._buffering=!0,this._currentContent=null,this._subtitleManager.setVideoContent(null);const l=++this._playId,d=this._tracker;let c;d.trackLoadStart(o,e.fileId,l.toString(),e.logData,e.metadata),this.emit(n.PLAYER_BEFORE_LOAD,{track:e,options:t,logData:e.logData,uri:o,timestamp:Date.now()}),this._bufferManager.setPlayId(l),this._loadingOptions={position:Ye(t.position||0),autoplay:!("autoplay"in t)||t.autoplay,poster:e.poster,useDefaultPlaybackSpeed:!!(null===(a=e.options)||void 0===a?void 0:a.useDefaultPlaybackSpeed),callback:i},d.setPlayIntended(this._loadingOptions.autoplay),d.setPlayedThreshold(t.playedThreshold);const u=this._cache,m="video"===e.mediaType?this._createVideoContent.bind(this,o,e):this._createAudioContent.bind(this,o,e,l);if(e.fileId){const t=e.fileId,i=this._preloadingTracks[t],n=this._disableCache?null:u.get(t);i?(je.info("Waiting for preloading track.",t),c=i.then((e=>(je.info("Preloading succeeded.",t),d.setResolveLatency(e.resolveLatency),d.setManifestLatency(e.manifestLatency),u.get(t))),(()=>(je.info("Preloading failed, creating new track",t),m())))):n?(je.info("Using cached track.",t,n),d.setMemoryCached(!0),c=Promise.resolve(n)):(je.info("Creating new track from fileId",t),c=m())}else je.info("Creating new track without fileId",e.resolvedURL),c=m();return c.then((t=>t.isProtected()&&!this._emeManager?Promise.reject(new _(s.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported")):(t.setLogData(e.logData),d.setCalculatedDuration(Ve(t.getCalculatedDuration())),this._upcomingContent=t,Promise.resolve()))).then(this._prepareMediaElement.bind(this,this._loadingOptions,l)).then((()=>{this._audioProcessor.setPlayer(this._player)})).then(this._loadContent.bind(this,this._loadingOptions,l)).then(this._handleLoadingComplete,this._handleLoadingError.bind(this,o,e,l))}preload(e){const t=!this._disableCache,i=e.uri,a=e.fileId,s=this._cache;if(!t||!a||!this._emeManager)return Promise.resolve(null);const r="video"===e.mediaType;if(!(Ge[e.format]&&!r)||s.get(a))return Promise.resolve(null);const o=this._preloadingTracks,l=o[a];if(l)return l;je.info("Preloading track",a);const d={manifestLatency:0,resolveLatency:0},c=this._emeManager.getKeySystemInfo().then((t=>ke.create({abrManager:this._abrManager,keySystem:t.keySystem,licenseEndpoint:e.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:i,fileId:a,format:e.format,fileFormat:e.fileFormat,isAd:e.isAd,resolvedURL:e.resolvedURL,noManifest:e.noManifest,preloadedManifest:e.preloadedManifest,logData:e.logData,disableCache:this._disableCache,emitWarning:this._emitWarning,audioGain:e.audioGain}).load(d))).then((t=>Promise.all([t,"MP4_CBCS"!==e.format?t.getBufferForFragment(t.getHeadFragment()):null]))).then((e=>{let[t]=e;return s.set(a,t),delete o[a],je.info("Cached",a),d})).catch((e=>(delete o[a],je.warn("Preloading error",e),this.emit(n.PLAYER_PRELOADING_ERROR,{error:e,track:e.track||null,canPlayNext:!("canPlayNext"in e)||e.canPlayNext,preloading:!0}),Promise.reject(e))));return o[a]=c,c}togglePlay(){return this._isPlaying()?this.pause():this.resume()}setSubtitleLanguage(e){this._subtitleManager.setLanguage(e)}getSubtitleLanguages(){return this._subtitleManager.getAvailableLanguages()}getActiveSubtitleLanguage(){return this._subtitleManager.getActiveLanguage()}deactivateCueEvents(){this._subtitleManager.deactivateListeners()}activateCueEvents(){this._subtitleManager.activateListeners()}setVolume(e,t){if(!this.emitSync(n.PLAYER_BEFORE_VOLUME_CHANGE,{volume:e,options:t}).defaultPrevented){if(e<0||e>1)throw new _(s.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE,"Volume should be in range [0, 1]");this._playerVolume=e,this._player&&(this._player.volume=this._cubicVolume?e*e*e:e)}}getVolume(){return this._playerVolume}getPlayerState(){var e,t,i;const n=this._player,a=this._currentContent,s={src:(null==n?void 0:n.src)?`data:${(null==a?void 0:a.getFileId())||"unknown"}`:void 0,height:(null==n?void 0:n.clientWidth)||0,width:(null==n?void 0:n.clientHeight)||0},r={};if(a){const[e,t]=a.getPlayableCodecs();r.audio_format=e,r.video_format=t,a instanceof he&&n instanceof HTMLVideoElement&&(r.video_height=n.videoHeight,r.video_width=n.videoWidth,s.poster=n.poster)}return{playing:null!==(e=!(null==n?void 0:n.paused))&&void 0!==e&&e,position:n?Ve(n.currentTime):0,duration:n?Ve(n.duration):0,volume:null!==(t=this._playerVolume)&&void 0!==t?t:1,playback_speed:null!==(i=null==n?void 0:n.playbackRate)&&void 0!==i?i:0,buffering:this._buffering,media_type:(null==a?void 0:a.getMediaType())||null,media_info:r,player_element:s}}getPlayerPosition(){return this._player?Ve(this._player.currentTime):0}seek(e){if(!this._player)return;const t=this._playId,i=()=>{if(!this._player||t!==this._playId)return void je.info("Seek dropped: playId has changed.");let i=Ye(e);i<0?i=0:i>=this._player.duration&&(i=this._player.duration),this._player.currentTime=i};this._loaded?i():this.once(n.PLAYER_LOAD,i),this._getBufferingLatency().then((e=>{this._tracker.trackSeekRebuffering(e)}))}pause(){return new Promise((e=>{this._player&&this._isPlaying()?e(this._player&&this._player.pause()):e()}))}resume(){return this._audioProcessor.resume().then((()=>{this._player&&!this._isPlaying()&&Promise.resolve(this._player.play())}))}stop(e,t){var i;const a=[],s=e||{};this.emit(n.PLAYER_BEFORE_STOP,{timestamp:Date.now(),logData:s}),this._tracker.trackStopped(this._player?Ve(this._player.currentTime):-1,e,this.getStatistics()||void 0),this._bufferManager.abort(!0),this._emeManager&&a.push(this._emeManager.destroySessions());const r=this._player;if(r){this._subtitleManager.clear(),this._fatalOnNextError=this._shouldNextErrorBeFatal(),this._fatalOnNextError&&je.warn("MediaError detected: next immediate media error will be fatal.");const e=r.src;if(e)Be.test(e)&&URL.revokeObjectURL(e),r.removeAttribute("src");else{const e=fe(r.getElementsByTagName("source"));je.info(`HTMLSourceElements to removed: ${e.length}`);for(const t of e)r.removeChild(t);je.info("Releasing HLS URLs"),null===(i=this._currentContent)||void 0===i||i.releaseHLSURL()}r.load()}if(this._currentContent&&this._disableCache&&this._currentContent.clearCachedBuffers(),r&&this._currentContent&&"video"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._videoPlayerContainer);e&&r.parentNode===e&&(this._newElementPerTrack||"video"!==t)&&(this._subtitleManager.setPlayer(null),e.removeChild(r),this.emit(n.PLAYER_VIDEO_ELEMENT_REMOVED,null))}else if(r&&this._currentContent&&"audio"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._audioPlayerContainer);e&&r.parentNode===e&&(this._newElementPerTrack||"audio"!==t)&&e.removeChild(r)}return this.emit(n.PLAYER_STOPPED,null),Promise.all(a).then((()=>!0))}hideSubtitles(){this._subtitleManager.hide()}showSubtitles(){this._subtitleManager.show()}areSubtitlesShown(){return this._subtitleManager.visible()}getKeySystemInfo(){return this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve(null)}getVideoVariants(){if(!(this._currentContent&&this._currentContent instanceof he))return[];const e=[],t=this._currentContent.getVideoProfiles();for(const i of t)e.push({width:i.video_width,height:i.video_height,bitrate:i.video_bitrate});return e}setPreferredBitrate(e){return"number"!=typeof e?Promise.resolve(r.INVALID):(this._preferredBitrate=e,this._currentContent&&"video"===this._currentContent.getMediaType()&&e>0&&this._bufferManager.abort(!0),this._abrManager.overrideBitrate(e),Promise.resolve(r.SUCCESS))}getCurrentBandwidth(){return this._abrManager.getBandwidthEstimate()}setBackgrounded(e){this._abrManager.overrideBitrate(e?1e-32:this._preferredBitrate)}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._currentContent instanceof he&&this._currentContent.setVideoResolution(this._videoResolution)}activateElement(){return this._playerActivated||!this._player||this._player.src?(this._audioProcessor.resume(),!1):(this._audioProcessor.resume().then((()=>{var e;return null===(e=this._player)||void 0===e?void 0:e.load()})),this._playerActivated=!0,!0)}getMediaConfig(){return void 0===this._mediaConfig?function(e,t){const i=t||Ke("video"),n=e=>{i.canPlayType("audio/mp3")&&(e.formats.audio.push("audio/mp3"),e.formatsInfo.audio.push({mimeType:"audio/mp3",codec:"mp3",contentType:'audio/mp3; codecs="mp3"'}),e.supports.unprotected_audio=!0)};if(e)return e.getKeySystemInfo().then((e=>{const{audioFormats:t,videoFormats:i}=e,a={supports:{protected_audio:!!t.length,unprotected_audio:!0,protected_video:!!i.length,unprotected_video:!0},formats:{audio:t.map((e=>e.contentType)),video:i.map((e=>e.contentType))},formatsInfo:{audio:[...t],video:[...i]}};return a.keysystem=e.keySystem,a.keysystem_impl=e.keySystemImpl,n(a),a}));const a="undefined"!=typeof window&&window.MediaSource?e=>MediaSource.isTypeSupported(e):e=>"probably"===i.canPlayType(e)||"probably"===i.canPlayType(e.split(";")[0]),s=j([U[0]],a),r=[],o=[],l=[],d=[];if(s){const{audioCapabilities:e,videoCapabilities:t}=s;for(const i of e)r.push(i.contentType),l.push(G(i.contentType));for(const i of t)o.push(i.contentType),d.push(G(i.contentType))}const c={supports:{protected_audio:!1,unprotected_audio:!!r.length,protected_video:!1,unprotected_video:!!o.length},formats:{audio:r,video:o},formatsInfo:{audio:l,video:d}};return n(c),Promise.resolve(c)}(this._emeManager,this._player).then((e=>(this._mediaConfig=e,this._mediaConfig))):Promise.resolve(this._mediaConfig)}setPlaybackSpeed(e){var t;return!(!isFinite(e)||e<=0)&&(!(null===(t=this._loadingOptions)||void 0===t?void 0:t.useDefaultPlaybackSpeed)&&(this._playerSpeed=null!=e?e:1,this._player&&(this._player.playbackRate=this._playerSpeed,this._tracker.trackSpeedChanged(this._playerSpeed)),!0))}getStatistics(){return this._player&&this._currentContent?this._statistics.getSample(this._player,this._currentContent):null}getAudioProcessor(){return this._audioProcessor}}var We=i(5579);class qe extends Error{constructor(e,t){super(t),this.debug={},this.name="LoggingError",this.message=t,this.code=e}}const Qe="7.21.2-8cb7697",$e="7.21.2",ze=c.P.forTag("playback.logger");class Ze extends u.vp{constructor(e){super(),this._currentTrackingData=null,this._sequenceId=0,this._sequenceSessionStorage={},this._sessionId="0",this._transport=e.transport,this._logSender=e.logSender,this._player=e.player,this._init()}static create(e){return new Ze(e)}_init(){const e=this._player;e.on(n.PLAYER_LOAD,this._onPlayerLoad.bind(this)),e.on(n.PLAYER_ERROR,this._onError.bind(this,!1)),e.on(n.PLAYER_WARNING,this._onError.bind(this,!0)),e.on(n.PLAYER_PRELOADING_ERROR,this._onError.bind(this,!1)),e.on(n.PLAYER_TRACKING_DATA_CREATED,this._onTrackingDataCreated.bind(this)),e.on(n.PLAYER_TRACKING_DATA_FINALIZED,this._onTrackingDataFinalized.bind(this)),e.on(n.PLAYER_PLAYBACK_START,this._onPlaybackStart.bind(this))}_emitError(e,t){this.emit(n.LOGGER_ERROR,{error:e,trackingData:t})}_onError(e,t){var i,n,a;const r=t.data,o=this._currentTrackingData;if(!o||o.noLog)return;const l=r.error,d=null!==(i=null==l?void 0:l.debug)&&void 0!==i?i:{};d.position="position"in r?r.position:0;const c={track:r.track||{},debug:d,preloading:"preloading"in r&&!!r.preloading,session_id:this._sessionId,playback_id:o.playbackId||null,player_play_id:"playId"in r?r.playId:null,http_status_code:null!==(n=null==l?void 0:l.status)&&void 0!==n?n:null,license_server:null!==(a=null==l?void 0:l.licenseServer)&&void 0!==a?a:null};this._logError(l.code||s.UNKNOWN,l,c,o,e)}_onPlayerLoad(e){const t=e.data.logData;if(t)if(t.impressionURLs)for(const i of t.impressionURLs)this._logImpression(i);else t.impressionURL&&this._logImpression(t.impressionURL)}_onPlaybackStart(e){const t=e.data.trackingData;t.noLog||t.noStats||this._logPlaybackStart(t)}_onTrackingDataCreated(e){const t=e.data.trackingData;t.noLog?this._currentTrackingData=null:(this._currentTrackingData=t,this._setSessionId(),t.noTSV||this._setSequenceId())}_setSessionId(){this._sessionId=this._transport.getInitTime().toString()}_setSequenceId(){this._sessionId&&(this._sequenceId=this._getSequenceId(this._sessionId))}_onTrackingDataFinalized(e){const t=e.data.trackingData;if(t.noLog)return;const i=this._sessionId!==this._transport.getInitTime().toString();if(i&&this._setSessionId(),t.playbackId&&!t.noTSV){if(i&&this._setSequenceId(),!t.playIntended&&!t.played)return void this._rollbackSequenceId(this._sessionId);this._logTrackStreamVerification(t)}t.noStats||this._logPlaybackStats(t)}_logTrackStreamVerification(e){const t={play_track:e.currentTrackUri,playback_id:e.playbackId,ms_played:e.msPlayed,ms_nominal_played:e.msNominalPlayed,session_id:this._sessionId,sequence_id:this._sequenceId,next_playback_id:e.nextPlaybackId};ze.debug("Logged TrackStreamVerification",t),this._logSender.logTrackStreamVerification(t).catch((i=>{const n=new qe(s.TSV_SENDING_FAILED,i.message||"Unknown reason.");this._logError(n.code,i,t,e,!1),this._emitError(n,e)}))}_logPlaybackStats(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,internal_play_id:e.internalPlayId,memory_cached:e.memoryCached,persistent_cached:e.persistentCached,audio_format:e.audiocodec||"",video_format:e.videocodec||"",manifest_id:e.fileId,protected:!1,key_system:e.keySystem,key_system_impl:e.keySystemImpl,urls_json:JSON.stringify(e.urls),start_time:e.loadTime,end_time:e.stopTime,external_start_time:e.externalLoadTime,ms_play_latency:e.msPlayLatency,ms_init_latency:e.msInitLatency,ms_head_latency:e.msHeadLatency,ms_manifest_latency:e.msManifestLatency,ms_resolve_latency:e.msResolveLatency,ms_license_session_latency:e.msLicenseSessionLatency,ms_license_generation_latency:e.msLicenseGenerationLatency,ms_license_request_latency:e.msLicenseRequestLatency,ms_license_update_latency:e.msLicenseUpdateLatency,ms_played:e.msPlayed,ms_nominal_played:e.msNominalPlayed,ms_file_duration:e.msFileDuration,ms_actual_duration:e.msActualDuration,ms_metadata_duration:e.msMetadataDuration,ms_start_position:e.startPosition,ms_end_position:e.position,ms_seek_rebuffer:e.msSeekRebuffering,ms_seek_rebuffer_longest:e.maxMsSeekRebuffering,ms_stall_rebuffer:e.msStalled,ms_stall_rebuffer_longest:e.maxMsStalled,n_stalls:e.nStalls,n_rendition_upgrade:e.nRenditionUpgrade,n_rendition_downgrade:e.nRenditionDowngrade,bps_bandwidth_max:e.bpsBandwidthMax,bps_bandwidth_min:e.bpsBandwidthMin,bps_bandwidth_avg:e.bpsBandwidthAvg,n_seekback:e.nSeeksBackward,n_seekforward:e.nSeeksForward,start_bitrate:e.startBitrate||e.bitrate||0,audio_quality:e.audioQuality,time_weighted_bitrate:e.timeWeightedBitrate,reason_start:e.reasonStart,reason_end:e.reasonEnd,initially_paused:!e.playIntended,had_error:e.hadError,n_warnings:e.nWarnings,n_navigator_offline:e.nOffline,session_id:this._sessionId,sequence_id:this._sequenceId,client_id:e.clientId,correlation_id:e.correlationId,n_dropped_video_frames:e.droppedVideoFrames,n_total_video_frames:e.totalVideoFrames,resolution_max:e.maxResolution||0,resolution_min:e.minResolution||0};ze.info("Logging PlaybackStats"),this._logSender.logJSSDKPlaybackStats(t).catch((i=>{const n=new qe(s.PLAYBACK_STATS_SENDING_FAILED,i.message||"Unknown reason.");this._logError(n.code,i,t,e,!1),this._emitError(n,e)}))}_logPlaybackStart(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,session_id:this._sessionId,ms_start_position:e.startPosition,initially_paused:!e.playIntended,client_id:e.clientId,correlation_id:e.correlationId};ze.info("Logging PlaybackStart"),this._logSender.logJSSDKPlaybackStart(t).catch((i=>{const n=new qe(s.PLAYBACK_START_SENDING_FAILED,i.message||"Unknown reason.");this._logError(n.code,i,t,e,!1),this._emitError(n,e)}))}_getSequenceId(e){let t=this._sequenceSessionStorage[e];return t||(t=0),t+1>=9007199254740991&&(t=0),this._sequenceSessionStorage[e]=t+1,t}_rollbackSequenceId(e){const t=this._sequenceSessionStorage[e];t&&(this._sequenceSessionStorage[e]=Math.max(t-1,0))}_logImpression(e){this._transport.request(e,{forget:!0}).catch((function(e){ze.warn("Unable to send impression request",e)}))}_logError(e,t,i,n,a){let s="";t&&(s=t.stack||"",s||(s=t.toString()));const r={source:"playback",source_version:Qe||We.eV.UNKNOWN,type:e||We.eV.UNKNOWN,message:t&&t.message||We.eV.EMPTY,stack:JSON.stringify(s),json_data:JSON.stringify(i||{}),json_data_version:"1.0.0",client_id:n.clientId,correlation_id:n.correlationId};a?this._logSender.logJSSDKWarning(r).catch((e=>ze.warn("Failed to log warning",r,e))):this._logSender.logJSSDKError(r).catch((e=>ze.warn("Failed to log error",r,e)))}}class Xe extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.STORAGE_ERROR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Storage Error";super(t),this.status=-1,this.fileId="",this.debug={},this.canPlayNext=!0,this.code=e,this.message=t,this.name="StorageError"}}const Je=c.P.forTag("playback.storage_resolve");class et{constructor(e){this._transport=e}_parseResponse(e,t){var i;let n;if(200!==t.status)return n=new Xe(s.STORAGE_FAILED_WITH_STATUS,`Storage Resolve responded with ${t.status}`),n.status=t.status,n.fileId=e,Promise.reject(n);const a=t.body;if(!(null===(i=null==a?void 0:a.cdnurl)||void 0===i?void 0:i.length))return n=new Xe(s.STORAGE_RETURNED_NO_TRACKS,`Storage Resolve returned no tracks for fileId ${e}`),n.fileId=e,Promise.reject(n);const r={uri:a.cdnurl[0],uris:a.cdnurl,protection:"cenc"};return Promise.resolve(r)}getCDNURL(e,t){Je.info("Requesting CDN URL for ",e);const i="files/audio/interactive",n=`@webgate/storage-resolve/${t?`v2/${i}/${t}/${e}`:`${i}/${e}`}?version=10000000&product=9&platform=39&alt=json`;return this._transport.request(n,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then(this._parseResponse.bind(this,e))}getManifest(e){const t=`https://seektables.scdn.co/seektable/${e}.json`;return Je.info("Requesting JSON manifest for ",e),this._transport.request(t,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then((t=>{let i;return 200!==t.status?(i=new Xe(s.STORAGE_TRACK_MANIFEST_FAILED,`Track manifest request failed with status code ${t.status}`),i.debug.file_id=e,i.status=t.status,Promise.reject(i)):t.body?t.body:(i=new Xe(s.STORAGE_TRACK_MANIFEST_EMPTY,"Received empty manifest."),i.debug.file_id=e,i.status=t.status,Promise.reject(i))}))}}i(99975);class tt extends Error{constructor(e,t){super(t),this.debug={},this.name="TrackingError",this.message=t,this.code=e}}class it{constructor(){this._version="1.0.0",this._map={}}clear(){this._map={}}track(e,t){let i=this._map[e];i||(i={url:e,segments:0,bandwidths:[],totalBandwidth:0},this._map[e]=i),i.segments+=1,i.bandwidths.push(t.bandwidth),i.totalBandwidth+=t.bandwidth}toJSON(){const e=[];for(const t in this._map){if(!this._map[t])continue;const i=this._map[t];i&&e.push({url:t,segments:i.segments,avg_bw:parseFloat((i.totalBandwidth/i.bandwidths.length).toFixed(7))})}return{version:this._version,urls:e}}}class nt{constructor(){this._bitrates={},this._isFinalized=!1,this._needsEndSegment=!1,this._segments=[],this._cdnURLTracker=new it,this._currentSpeed=1,this.audiocodec=null,this.bitrate=0,this.audioQuality=void 0,this.bufferLoadStartTime=0,this.urls={},this.currentTrackUri="",this.displayTrack="",this.externalLoadTime=0,this.fileId="",this.gaiaDevId="none",this.hadError=!1,this.internalPlayId="",this.isProtected=!1,this.keySystem="",this.keySystemImpl="",this.lastPlayPosition=-1,this.loadTime=0,this.localTimeMs=-1,this.maxContinuous=0,this.maxMsSeekRebuffering=0,this.maxMsStalled=0,this.memoryCached=!1,this.msActualDuration=0,this.msMetadataDuration=0,this.msFileDuration=0,this.msHeadLatency=0,this.msInitLatency=0,this.msKeyLatency=0,this.msLicenseGenerationLatency=0,this.msLicenseRequestLatency=0,this.msLicenseSessionLatency=0,this.msLicenseUpdateLatency=0,this.msManifestLatency=0,this.msPlayed=0,this.msNominalPlayed=0,this.msPlayedUnion=0,this.msPlayLatency=0,this.msResolveLatency=0,this.msSeekRebuffering=0,this.msSeeksBackward=0,this.msSeeksForward=0,this.nextPlaybackId="",this.nOffline=0,this.noLog=!1,this.noTSV=!1,this.noStats=!1,this.nWarnings=0,this.msStalled=0,this.nSeeksBackward=0,this.nSeeksForward=0,this.nSpeedChanges=!1,this.nStalls=0,this.nRenditionUpgrade=0,this.nRenditionDowngrade=0,this.bpsBandwidthMax=0,this.bpsBandwidthMin=0,this.bpsBandwidthAvg=0,this.totalBandwidth=0,this.lastBitrate=0,this.persistentCached=!1,this.playbackId="",this.playContext="",this.played=!1,this.position=0,this.reasonEnd="unknown",this.reasonStart="unknown",this.referrer="unknown",this.referrerVendor="unknown",this.referrerVersion="unknown",this.sourceEnd="unknown",this.sourceStart="unknown",this.startPosition=0,this.stopTime=0,this.streamingRule="none",this.timeWeightedBitrate=0,this.totalBytes=0,this.playIntended=!1,this.videocodec=null,this.clientId="unknown",this.correlationId="unknown",this.droppedVideoFrames=0,this.totalVideoFrames=0,this.maxResolution=0,this.minResolution=0}static create(){return new nt}_calculateUnion(){const e=this._segments.slice(0);let t=0,i=0,n=0,a=0,s=0,r=0,o=this.maxContinuous;for(;s<e.length;s++)s%2!=0&&void 0!==e[s-1]&&"start"===e[s-1].type&&(r=e[s].time-e[s-1].time,o=r>o?r:o);for(this.maxContinuous=o,e.sort(((e,t)=>e.time-t.time));a<e.length;a++)"start"===e[a].type&&(0===i&&(n=a),++i),"end"===e[a].type&&(--i,0===i&&(t+=e[a].time-e[n].time));return t}_calculateWeightedBitrate(e){const t=this._bitrates;let i=0;for(const n in t)n&&t.hasOwnProperty(n)&&e>0&&(i+=parseInt(n,10)*t[n]/e);return Math.round(i)}registerVideoVariant(e){const t=e.bitrate;t&&(this._bitrates[t]=this._bitrates[t]||0,this.startBitrate||(this.startBitrate=t)),e.audioProfile&&(this.audiocodec=e.audioProfile.audio_codec),e.videoProfile&&(this.videocodec=e.videoProfile.video_codec,this.lastBitrate=e.videoProfile.video_bitrate,this.minResolution=e.videoProfile.video_resolution,this.maxResolution=e.videoProfile.video_resolution)}addStartSegment(){this._segments.push({type:"start",time:this.position}),this._needsEndSegment=!0}addEndSegment(){this._needsEndSegment&&(this._segments.push({type:"end",time:this.position}),this._needsEndSegment=!1)}addMSPlayed(e){if(e){if(e<0)throw new TypeError(`Cannot add negative msPlayed value: ${e}`);this.msPlayed+=e/this._currentSpeed,this.msNominalPlayed+=e}}addSpeedChange(e){this.nSpeedChanges=!0,this._currentSpeed=e}trackBitrate(e,t){const i=e||"dummy";this._bitrates[i]=this._bitrates[i]||0,this._bitrates[i]+=t}trackBufferURL(e,t){this._cdnURLTracker.track(e,t)}finalize(){if(this._isFinalized)throw new tt(s.TRACK_DATA_ALREADY_FINALIZED,"TrackData already finalized.");this.msPlayedUnion=this._calculateUnion(),this.nSeeksBackward||this.nSeeksForward||this.nSpeedChanges||(this.msNominalPlayed=this.maxContinuous=this.msPlayedUnion,this.msPlayed=this.msNominalPlayed/this._currentSpeed,this.nSpeedChanges=!1);const e=this.msPlayed;return this.timeWeightedBitrate=this._calculateWeightedBitrate(e),this.startBitrate||(this.startBitrate=this.bitrate),this.urls=this._cdnURLTracker.toJSON(),this._isFinalized=!0,!0}getURLsJSON(){var e,t;return null!==(t=null===(e=this._cdnURLTracker.toJSON().urls)||void 0===e?void 0:e.map((e=>{let{url:t}=e;return t})))&&void 0!==t?t:[]}getPlaybackStats(){let e;switch(this.keySystem){case a.WIDEVINE:e="widevine";break;case a.PLAYREADY:case a.PLAYREADY_HARDWARE:e="playready";break;default:e="none"}return{ms_total_est:this.msActualDuration,ms_metadata_duration:this.msMetadataDuration,ms_manifest_latency:this.msManifestLatency,ms_latency:this.msPlayLatency,start_offset_ms:this.startPosition,ms_initial_buffering:this.msPlayLatency,ms_seek_rebuffering:this.msSeekRebuffering,ms_stalled:this.msStalled,max_ms_seek_rebuffering:this.maxMsSeekRebuffering,max_ms_stalled:this.maxMsStalled,n_stalls:this.nStalls,n_rendition_upgrade:this.nRenditionUpgrade,n_rendition_downgrade:this.nRenditionDowngrade,bps_bandwidth_max:this.bpsBandwidthMax,bps_bandwidth_min:this.bpsBandwidthMin,bps_bandwidth_avg:this.bpsBandwidthAvg,audiocodec:this.audiocodec?this.audiocodec.toLowerCase():void 0,videocodec:this.videocodec?this.videocodec.toLowerCase():void 0,start_bitrate:this.startBitrate||this.bitrate||void 0,full_screen:void 0,time_weighted_bitrate:this.timeWeightedBitrate,buffering_percentage:void 0,prefetched_bytes:void 0,prefetched_bytes_loaded:void 0,prefetched_initial_bitrate:void 0,key_system:e,ms_key_latency:this.msKeyLatency,total_bytes:this.totalBytes,local_time_ms:this.localTimeMs,ms_played_background:void 0,n_dropped_video_frames:this.droppedVideoFrames,n_total_video_frames:this.totalVideoFrames,resolution_max:this.maxResolution,resolution_min:this.minResolution}}isFinalized(){return this._isFinalized}}const at=c.P.forTag("playback.tracker");class st extends u.vp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._playedThreshold=31e3,this._playedThresholdReached=!1,this._trackingData=null,this._playedThreshold=e.playerThreshold||31e3}static create(e){return new st(e)}_checkPlayedThreshold(){const e=this._trackingData;!e||!this._playedThreshold||this._playedThresholdReached||e.msPlayed<this._playedThreshold||(this._playedThresholdReached=!0,this.emit(n.TRACKER_PLAYED_THRESHOLD_REACHED,{played:e&&e.msPlayed||0,threshold:this._playedThreshold}))}getMSPlayed(){return this._trackingData?this._trackingData.msPlayed:0}getStallsInformation(){return this._trackingData?{nStalls:this._trackingData.nStalls,msTotalStalled:this._trackingData.msStalled}:{nStalls:0,msTotalStalled:0}}trackLoadStart(e,t,i,a,s){const r=nt.create();this._trackingData=r,this._playedThresholdReached=!1,r.fileId=null!=t?t:"",r.currentTrackUri=e,r.loadTime=Date.now(),r.internalPlayId=i,r.externalLoadTime=a.externalLoadTime||0,r.displayTrack=a.displayTrack||"",r.playbackId=a.playbackId||"",r.playContext=a.playContext||"",r.reasonStart=a.reason||"unknown",r.sourceStart=a.source||"unknown",r.clientId=a.clientId||"",r.correlationId=a.correlationId||"";const o=a.referrer||{};r.referrer=void 0!==o.name?o.name:"unknown",r.referrerVersion=void 0!==o.version?o.version:"unknown",r.referrerVendor=void 0!==o.vendor?o.vendor:"unknown";const l=a.format||{};l.codec&&(r.audiocodec=l.codec.toLowerCase()),l.bitrate&&(r.bitrate=l.bitrate),l.audioQuality&&(r.audioQuality=l.audioQuality),r.gaiaDevId=a.deviceId||"none",r.noLog=a.noLog||!1,r.noTSV=a.noTSV||!1,r.noStats=a.noStats||!1,r.contentMetadata=s,"number"==typeof(null==s?void 0:s.displayDuration)&&(r.msMetadataDuration=s.displayDuration),this.emit(n.TRACKER_TRACKING_DATA_CREATED,{trackingData:r})}trackBufferLoadStart(){const e=this._trackingData;e&&(e.bufferLoadStartTime=Date.now())}trackBytesDownloaded(e){const t=this._trackingData;t&&(t.totalBytes+=e)}trackLoadDone(e){const t=this._trackingData;if(!t)return;const i=Date.now();t.msInitLatency=i-t.bufferLoadStartTime,t.localTimeMs=i,t.position=e,t.addStartSegment()}trackPlay(e,t){const i=this._trackingData;i&&(i.played||this.emit(n.TRACKER_PLAYBACK_START,{trackingData:i}),i.played=!0,i.position=e,i.startPosition=e,i.addSpeedChange(t||1))}trackCanPlayThrough(){const e=this._trackingData;if(!e||e.msPlayLatency)return;const t=Date.now();e.msPlayLatency=t-e.loadTime,e.msHeadLatency=t-e.bufferLoadStartTime}trackBufferURL(e,t){const i=this._trackingData;i&&i.trackBufferURL(e,t)}trackNavigatorOffline(){const e=this._trackingData;e&&(e.nOffline+=1)}trackSeekRebuffering(e){const t=this._trackingData;t&&(e>t.maxMsSeekRebuffering&&(t.maxMsSeekRebuffering=e),t.msSeekRebuffering+=e)}trackMsStalled(e){const t=this._trackingData;t&&(e>t.maxMsStalled&&(t.maxMsStalled=e),t.msStalled+=e,t.nStalls++)}trackLoadFailed(){const e=this._trackingData;e&&(e.msPlayLatency=Date.now()-e.loadTime,e.position=0,e.addStartSegment())}trackStopped(e,t,i){var a,s,r,o;const l=this._trackingData;if(!l||l.isFinalized())return;const d=Date.now();if(l.stopTime=d,l.lastPlayPosition>=0&&e>=0&&l.lastPlayPosition<e){const t=e-l.lastPlayPosition;l.addMSPlayed(t)}l.addEndSegment(),l.sourceEnd=t.source||"unknown",l.reasonEnd=t.reason||"unknown",l.nextPlaybackId=t.playbackId||"",l.droppedVideoFrames=null!==(s=null===(a=null==i?void 0:i.video)||void 0===a?void 0:a.droppedVideoFrames)&&void 0!==s?s:0,l.totalVideoFrames=null!==(o=null===(r=null==i?void 0:i.video)||void 0===r?void 0:r.totalVideoFrames)&&void 0!==o?o:0,l.finalize(),at.info("Tracker data finalized.");const c=l.getPlaybackStats();this.emit(n.TRACKER_TRACKING_DATA_FINALIZED,{trackingData:l,playbackStats:c})}trackPositionChanged(e){const t=this._trackingData;if(!t)return;const i=t.position;e!==i&&(t.addEndSegment(),e>i?(t.nSeeksForward++,t.msSeeksForward+=e-i):e<i&&(t.nSeeksBackward++,t.msSeeksBackward+=i-e),t.position=e,t.lastPlayPosition=-1,t.addStartSegment())}trackPlaying(e){const t=this._trackingData;if(t){if(t.lastPlayPosition>=0&&t.lastPlayPosition<e){const i=e-t.lastPlayPosition;t.addMSPlayed(i)}t.position=e,t.lastPlayPosition=e}}trackPaused(e){const t=this._trackingData;if(t){if(t.lastPlayPosition>=0&&t.lastPlayPosition<e){const i=e-t.lastPlayPosition;t.addMSPlayed(i)}t.position=e,t.lastPlayPosition=e}}trackProgress(e,t){const i=this._trackingData;if(!(null==i?void 0:i.played))return;let n=0;if(i.lastPlayPosition>=0){if(n=e-i.lastPlayPosition,n<0)return void at.warn("Skipping msPlayed calculation: late progress event.");i.addMSPlayed(n)}this._checkPlayedThreshold(),i.position=e,i.lastPlayPosition=e,t&&i.trackBitrate(t,n)}trackSpeedChanged(e){const t=this._trackingData;t&&t.addSpeedChange(e)}trackVideoLoadStart(e){const t=this._trackingData;t&&t.registerVideoVariant(e)}trackWarning(){const e=this._trackingData;e&&e.nWarnings++}trackOffline(){const e=this._trackingData;e&&e.nOffline++}setActualDuration(e){const t=this._trackingData;t&&(t.msActualDuration=e)}setKeySystem(e){const t=this._trackingData;t&&(t.keySystem=e)}setKeySystemImpl(e){const t=this._trackingData;t&&(t.keySystemImpl=e)}setManifestLatency(e){const t=this._trackingData;t&&(t.msManifestLatency=e)}setPlayIntended(e){const t=this._trackingData;t&&(t.playIntended=e)}setKeyLatency(e){const t=this._trackingData;t&&(t.msKeyLatency=e)}setMemoryCached(e){const t=this._trackingData;t&&(t.memoryCached=e)}setPersistentCached(e){const t=this._trackingData;t&&(t.persistentCached=e)}setProtected(e){const t=this._trackingData;t&&(t.isProtected=e)}setHadError(e){const t=this._trackingData;t&&(t.hadError=e)}setLicenseSessionLatency(e){const t=this._trackingData;t&&(t.msLicenseSessionLatency=e)}setLicenseGenerationLatency(e){const t=this._trackingData;t&&(t.msLicenseGenerationLatency=e)}setLicenseRequestLatency(e){const t=this._trackingData;t&&(t.msLicenseRequestLatency=e)}setLicenseUpdateLatency(e){const t=this._trackingData;t&&(t.msLicenseUpdateLatency=e)}setResolveLatency(e){const t=this._trackingData;t&&(t.msResolveLatency=e)}setCalculatedDuration(e){const t=this._trackingData;t&&(t.msFileDuration=e)}setPlayedThreshold(e){this._playedThreshold=e}trackFragment(e){const t=this._trackingData;if(!t)return;const{bandwidth:i,resolution:n}=e;n&&((n<t.minResolution||!t.minResolution)&&(t.minResolution=n),n>t.maxResolution&&(t.maxResolution=n)),(i<t.bpsBandwidthMin||!t.bpsBandwidthMin)&&(t.bpsBandwidthMin=i),i>t.bpsBandwidthMax&&(t.bpsBandwidthMax=i),t.bpsBandwidthAvg=t.bpsBandwidthAvg?(t.bpsBandwidthAvg+i)/2:i}trackProfileChanged(e){const t=this._trackingData;if(!t)return;const{bitrate:i}=e;i<t.lastBitrate&&t.nRenditionDowngrade++,i>t.lastBitrate&&t.nRenditionUpgrade++,t.lastBitrate=i}}class rt extends u.vp{constructor(e){super(),this._transport=e,this._parseManifestResponse=this._parseManifestResponse.bind(this)}static create(e){return new rt(e)}_parseManifestResponse(e){var t;const i=e.metadata.startTime;if(200!==e.status){const t=new Xe(s.STORAGE_VIDEO_MANIFEST_FAILED,`Video manifest request failed with status ${e.status}`);return t.status=e.status,this.emit(n.VIDEO_MANIFEST_RESOLVE_FAILED,{url:e.url,error:t,start_time:i}),Promise.reject(t)}const a=e.body,r=null===(t=e.headers)||void 0===t?void 0:t.get("content-length");return this.emit(n.VIDEO_MANIFEST_RESOLVED,{url:e.url,manifest_size:r?parseInt(r,10):JSON.stringify(a).length,start_time:i,end_time:Date.now()}),Promise.resolve(a)}getInitSegmentURLs(e,t,i,n){let a="";i&&(a=e+t.replace("{{profile_id}}",i.id.toString(10)).replace("{{file_type}}",i.file_type));let s="";return n&&(s=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type)),{audio:a,video:s,audioLogging:a,videoLogging:s}}getSegmentURLs(e,t,i,n,a){let s="";n&&(s=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type));let r="";return a&&(r=e+t.replace("{{profile_id}}",a.id.toString(10)).replace("{{file_type}}",a.file_type)),{audio:s.replace("{{segment_timestamp}}",i.toString()),video:r.replace("{{segment_timestamp}}",i.toString()),audioLogging:s,videoLogging:r}}getManifest(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=`${t?"@webgate/manifests/v8/unauth/json/sources":"@webgate/manifests/v7/json/sources"}/${e}/options/supports_drm`;return this._transport.request(i,{authorize:!t,responseType:"json",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS},metadata:{startTime:Date.now()}}).then(this._parseManifestResponse)}}class ot extends Error{constructor(e,t){super(),this.status=-1,this.debug={},this.canPlayNext=!0,this.unrecoverable=!1,this.name="LicenseError",this.code=e,this.message=t}static fatal(e,t){const i=new ot(e,t);return i.unrecoverable=!0,i.canPlayNext=!1,i}}class lt{constructor(e){this._sdk={name:"",version:""},this._securityLevel=null,this._urls={},e.sdk&&(this._sdk=e.sdk),e.securityLevel&&(this._securityLevel=e.securityLevel),this._transport=e.transport,this._useTestLicenseServer=!!e.useTestLicenseServer,this._transport.on(this._transport.EVENT_CONNECTION_ID,(()=>{this._urls={}}))}get(e,t){const i=`${e}:${t}`,n=this._urls[i];if(n&&n.expires>Date.now()+6e4)return Promise.resolve(n.uri);const a=this._useTestLicenseServer?"&use_test_license_server=true":"",r=`@webgate/melody/v1/license_url?keysystem=${e}&mediatype=${t}&sdk_name=${this._sdk.name}&sdk_version=${this._sdk.version}${a}`;return this._transport.request(r,{responseType:"json",retry:{condition:(e,t)=>{const i=e.getStatusFamily();return i===t.SERVER_ERROR||i===t.CONNECTION_ERROR}}}).then((e=>{const t=e.body;if(t&&200===e.status)return t.expires*=1e3,t.uri=`@webgate/${t.uri}`,this._securityLevel&&(t.uri+=[-1!==t.uri.indexOf("?")?"&":"?","sl=",this._securityLevel].join("")),this._urls[i]=t,t.uri;let n;return n=t?400===e.status&&t&&"deprecated-version"===t.code?ot.fatal(s.LICENSE_RESOLVER_DEPRECATED_VERSION,"This version of the SDK is no longer supported. Please upgrade"):new ot(s.LICENSE_RESOLVER_CANT_RESOLVE_URL,`License URL endpoint responded with status ${e.status}`):ot.fatal(s.LICENSE_RESOLVE_INVALID_RESPONSE,"License URL endpoint responded with invalid response"),n.status=e.status,Promise.reject(n)}))}remove(e,t){this._urls[`${e}:${t}`]=null}}class dt{constructor(e){this._melodyLogger=new We.Hx(e)}logTrackStreamVerification(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"track_stream_verification",message:e},{batch:!0})}logJSSDKPlaybackStats(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_playback_stats",message:e},{batch:!0})}logJSSDKPlaybackStart(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_playback_start",message:e},{batch:!0})}logJSSDKError(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_error",message:e},{batch:!0})}logJSSDKWarning(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_warning",message:e},{batch:!0})}}var ct;!function(e){e[e.ABORTED=101]="ABORTED",e[e.NETWORK=102]="NETWORK",e[e.MEDIA_DECODING=103]="MEDIA_DECODING",e[e.SRC_NOT_SUPPORTED=104]="SRC_NOT_SUPPORTED",e[e.EME=105]="EME",e[e.GENERIC=100]="GENERIC"}(ct||(ct={}));const ut={[s.MEDIA_ABORTED]:ct.ABORTED,[s.MEDIA_DECODING_ERROR]:ct.MEDIA_DECODING,[s.MEDIA_NOT_SUPPORTED]:ct.SRC_NOT_SUPPORTED,[s.MEDIA_NETWORK_ERROR]:ct.NETWORK};function mt(e){let t=ut[e];return/_REQUEST_|_RESPONSE$/.test(e)?t=ct.NETWORK:t||(t=/^EME_/.test(e)?ct.EME:ct.GENERIC),t}function _t(e){var t;const i=e.match(/^https?:\/\/([^\/]+@)?([^\/?#]+)/);return null!==(t=null==i?void 0:i[2])&&void 0!==t?t:""}var ht;!function(e){e.READY="playerready",e.VIDEO_CHANGE="videochange",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMEUPDATE="timeupdate",e.SEEKING="seeking",e.SEEKED="seeked",e.ERROR="error",e.ENDED="ended",e.RENDITION_CHANGE="renditionchange",e.REQUEST_COMPLETED="requestcompleted",e.REQUEST_FAILED="requestfailed",e.REQUEST_CANCELED="requestcanceled"}(ht||(ht={}));const pt={player_is_paused:!0,player_width:0,player_height:0,video_source_height:0,video_source_width:0,player_is_fullscreen:void 0,player_autoplay_on:void 0,player_preload_on:void 0,video_source_url:void 0,video_source_mime_type:void 0,video_source_duration:void 0,video_poster_url:void 0,player_language_code:void 0};class vt{constructor(e){this._playerId=`spotify-playback-${Date.now()}`,this._currentContentInfo=null,this._readyDeferred=(0,p.$)(),this._isMuxInitialized=!1,this._muxInitData=null,this._player=e.player,this._mux=e.mux,this._getPlayheadTime=this._getPlayheadTime.bind(this),this._getStateData=this._getStateData.bind(this),this._init(e)}static create(e){return new vt(e)}_init(e){Promise.all([Promise.resolve(e.deviceInfo)]).then((t=>{let[i]=t;var a;this._muxInitData={data:Object.assign({env_key:e.envKey||"2qbjhhcl4u87btjbo7dh8vi2n",player_name:null!==(a=null==i?void 0:i.platform_name)&&void 0!==a?a:null==i?void 0:i.platform,player_version:null==i?void 0:i.version,viewer_device_manufacturer:null==i?void 0:i.brand,viewer_device_category:null==i?void 0:i.type,viewer_device_name:null==i?void 0:i.model,player_software_name:e.sdk||"spotify-playback",player_software_version:e.sdkVersion||$e,player_mux_plugin_name:"spotify-playback-mux-reporter",player_mux_plugin_version:$e},e.muxCustomDimensions),getPlayheadTime:this._getPlayheadTime,getStateData:this._getStateData},this._player.addListeners({[n.PLAYER_BEFORE_LOAD]:this._onBeforeLoad.bind(this),[n.PLAYER_PLAY]:this._onPlay.bind(this),[n.PLAYER_PLAYING]:this._onPlaying.bind(this),[n.PLAYER_PAUSED]:this._onPause.bind(this),[n.PLAYER_PROGRESS]:this._onProgress.bind(this),[n.PLAYER_SEEKING]:this._onSeeking.bind(this),[n.PLAYER_POSITION_CHANGED]:this._onPositionChanged.bind(this),[n.PLAYER_ERROR]:this._onError.bind(this),[n.PLAYER_ENDED]:this._onEnded.bind(this),[n.PLAYER_DURATION_CHANGED]:this._onDurationChanged.bind(this),[n.PLAYER_VIDEO_RESIZED]:this._onVideoResized.bind(this),[n.PLAYER_VIDEO_PROFILE_CHANGED]:this._onVideoProfileChanged.bind(this),[n.PLAYER_FRAGMENT_FETCHED]:this._onFragmentFetched.bind(this),[n.PLAYER_FRAGMENT_FETCH_ERROR]:this._onFragmentFetchError.bind(this),[n.PLAYER_VIDEO_MANIFEST_RESOLVED]:this._onVideoManifestResolved.bind(this),[n.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED]:this._onVideoManifestResolveFailed.bind(this)})})).then(this._readyDeferred.resolve,this._readyDeferred.reject)}_getPlayheadTime(){return this._player.getPlayerPosition()}_getStateData(){return this._currentContentInfo?Object.assign(Object.assign({},this._currentContentInfo.stateData),{player_language_code:this._player.getActiveSubtitleLanguage()}):null}_onDurationChanged(e){this._currentContentInfo&&(this._currentContentInfo.stateData.video_source_duration=e.data.duration)}_onVideoResized(e){this._currentContentInfo&&(this._currentContentInfo.stateData.player_width=e.data.width,this._currentContentInfo.stateData.player_height=e.data.height)}_onBeforeLoad(e){const{track:t,options:i,logData:n}=e.data,a=!!this._currentContentInfo;if("video"!==t.mediaType||(null==n?void 0:n.noLog)||(null==n?void 0:n.noMuxEvents))return a&&this._mux.emit(this._playerId,ht.VIDEO_CHANGE,{}),void(this._currentContentInfo=null);const s={video_id:t.fileId,video_title:(null==n?void 0:n.displayTitle)||void 0,video_series:(null==n?void 0:n.displayGroup)||void 0,video_duration:(null==n?void 0:n.displayDuration)||void 0},r=Object.assign({},pt);this._currentContentInfo={track:t,options:i,videoData:s,stateData:r},!this._isMuxInitialized&&this._muxInitData?(this._mux.init(this._playerId,this._muxInitData),this._mux.emit(this._playerId,ht.READY),this._isMuxInitialized=!0):a&&this._mux.emit(this._playerId,ht.VIDEO_CHANGE,s)}_onPlay(){var e,t;if(!this._currentContentInfo)return;const i=this._currentContentInfo.stateData,n=this._player.getPlayerState(),a=n.media_info,s=(null===(t=null===(e=this._currentContentInfo)||void 0===e?void 0:e.options)||void 0===t?void 0:t.autoplay)||!1,{width:r,height:o,src:l,poster:d}=n.player_element;i.player_is_paused=!n.playing,i.player_width=r||0,i.player_height=o||0,i.video_source_height=a.video_height||0,i.video_source_width=a.video_width||0,i.player_autoplay_on=s,i.video_source_url=l,i.video_source_mime_type=a.video_format,i.video_source_duration=n.duration,i.video_poster_url=d,this._mux.emit(this._playerId,ht.PLAY,this._currentContentInfo.videoData)}_onPlaying(){this._currentContentInfo&&(this._currentContentInfo.stateData.player_is_paused=!1,this._mux.emit(this._playerId,ht.PLAYING))}_onPause(){this._currentContentInfo&&(this._currentContentInfo.stateData.player_is_paused=!0,this._mux.emit(this._playerId,ht.PAUSE))}_onProgress(e){this._currentContentInfo&&this._mux.emit(this._playerId,ht.TIMEUPDATE,{player_playhead_time:e.data.position})}_onSeeking(){this._currentContentInfo&&this._mux.emit(this._playerId,ht.SEEKING)}_onPositionChanged(){this._currentContentInfo&&this._mux.emit(this._playerId,ht.SEEKED)}_onError(e){var t,i;const n=null===(i=null===(t=e.data)||void 0===t?void 0:t.error)||void 0===i?void 0:i.code;this._currentContentInfo&&n&&this._mux.emit(this._playerId,ht.ERROR,{player_error_code:mt(n),player_error_message:n})}_onEnded(){this._currentContentInfo&&this._mux.emit(this._playerId,ht.ENDED)}_onVideoProfileChanged(e){if(!this._currentContentInfo)return;const t=e.data.profile,i=this._currentContentInfo.stateData;i.video_source_height=t.height||0,i.video_source_width=t.width||0,i.video_source_mime_type=t.mimeType,this._mux.emit(this._playerId,ht.RENDITION_CHANGE,{video_source_bitrate:t.bitrate,video_source_width:t.width,video_source_height:t.height})}_onFragmentFetched(e){const t=e.data;if(!this._currentContentInfo&&"video"!==t.media_type)return;const i=`${t.segment_type}${t.init?"_init":""}`;this._mux.emit(this._playerId,ht.REQUEST_COMPLETED,{request_type:i,request_hostname:_t(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.byte_length})}_onFragmentFetchError(e){const t=e.data;if(!this._currentContentInfo&&"video"!==t.media_type)return;const i=`${t.segment_type}${t.init?"_init":""}`;this._mux.emit(this._playerId,ht.REQUEST_FAILED,{request_type:i,request_hostname:_t(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}_onVideoManifestResolved(e){const t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,ht.REQUEST_COMPLETED,{request_type:"manifest",request_hostname:_t(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.manifest_size})}_onVideoManifestResolveFailed(e){const t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,ht.REQUEST_FAILED,{request_type:"manifest",request_hostname:_t(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}ready(){return this._readyDeferred.promise}}var kt,gt,Et,St,yt,ft,Nt;!function(e){e.NULL_VALUE="NULL_VALUE",e.LIST_START="LIST_START",e.LIST_END="LIST_END",e.FORBIDDEN="FORBIDDEN",e.IGNORE="IGNORE",e.PAUSE="PAUSE"}(kt||(kt={})),function(e){e.MP4_AUDIO="audio/mp4",e.MP4_VIDEO="video/mp4",e.MTS_VIDEO="video/mp2t",e.WEBM_AUDIO="audio/webm",e.WEBM_VIDEO="video/webm"}(gt||(gt={})),function(e){e.AAC_LC="mp4a.40.2",e.FLAC="flac",e.OPUS="opus",e.VP9="vp9",e.VP8="vp8",e.H264_31="avc1.4d401f"}(Et||(Et={})),function(e){e.APPLOAD="appload",e.BACK_BUTTON="backbtn",e.CLICK_ROW="clickrow",e.CLICK_SIDE="clickside",e.END_PLAY="endplay",e.FORWARD_BUTTON="fwdbtn",e.LOGOUT="logout",e.PLAY_BUTTON="playbtn",e.POPUP="popup",e.REMOTE="remote",e.TRACK_DONE="trackdone",e.TRACK_ERROR="trackerror",e.UNKNOWN="unknown",e.URI_OPEN="uriopen",e.CAPPED="capped",e.SEEK="seek"}(St||(St={})),function(e){e.UNKNOWN="UNKNOWN",e.DEFAULT="DEFAULT",e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.VERY_HIGH="VERY_HIGH",e.HIFI="HIFI"}(yt||(yt={})),function(e){e.NONE="NONE",e.CONTEXT="CONTEXT",e.TRACK="TRACK"}(ft||(ft={})),function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(Nt||(Nt={}));class Tt extends Error{constructor(e,t){super(),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.name="PlaybackError",this.code=e,this.message=t}static fatal(e,t){const i=new Tt(e,t);return i.unrecoverable=!0,i}}function Rt(e){return"uri"in e}class At extends u.vp{constructor(e){if(super(),this._trackPlayerPromise=(0,p.$)(),this._maxListErrors=5,this._uid=0,this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this._listPlayCount=0,this._listErrorCount=0,this._shuffled=!1,this._repeatMode=ft.NONE,this._currentSeqId=0,!e.trackPlayer)throw new TypeError("Argument `options.trackPlayerManager` not found.");e.maxListErrors&&(this._maxListErrors=e.maxListErrors),this._setListOptions=this._setListOptions.bind(this),this._replaceCurrentList=this._replaceCurrentList.bind(this),this._handleCapped=this._handleCapped.bind(this),this._handlePlaying=this._handlePlaying.bind(this),this._handlePaused=this._handlePaused.bind(this),this._handleEnded=this._handleEnded.bind(this),this._handleCanPreload=this._handleCanPreload.bind(this),this._handleError=this._handleError.bind(this),this._handlePositionChanged=this._handlePositionChanged.bind(this),this._handleDurationChanged=this._handleDurationChanged.bind(this),this._handleTimeout=this._handleTimeout.bind(this),this._handlePlayerInitError=this._handlePlayerInitError.bind(this),this._handleProgress=this._handleProgress.bind(this),this._handlePlayedThresholdReached=this._handlePlayedThresholdReached.bind(this),this._handleBeforeLoad=this._handleBeforeLoad.bind(this),this._init(e.trackPlayer)}static create(e){return new At(e)}_init(e){this._trackPlayerPromise.promise.catch((()=>{})),Promise.resolve(e).then((e=>{this._attachPlayerEvents(e),this._trackPlayerPromise.resolve(e)})).catch(this._handlePlayerInitError)}_attachPlayerEvents(e){e.addListeners({[n.PLAYER_CAN_PRELOAD]:this._handleCanPreload,[n.PLAYER_CAPPED]:this._handleCapped,[n.PLAYER_ENDED]:this._handleEnded,[n.PLAYER_ERROR]:this._handleError,[n.PLAYER_PAUSED]:this._handlePaused,[n.PLAYER_PLAYING]:this._handlePlaying,[n.PLAYER_TIMEOUT]:this._handleTimeout,[n.PLAYER_POSITION_CHANGED]:this._handlePositionChanged,[n.PLAYER_DURATION_CHANGED]:this._handleDurationChanged,[n.PLAYER_PROGRESS]:this._handleProgress,[n.PLAYER_BEFORE_LOAD]:this._handleBeforeLoad,[n.PLAYER_PLAYED_THRESHOLD_REACHED]:this._handlePlayedThresholdReached}),this.proxyEmitAllSync(e,{[n.PLAYER_BEFORE_VOLUME_CHANGE]:n.LIST_PLAYER_BEFORE_VOLUME_CHANGE,[n.PLAYER_LOAD]:n.LIST_PLAYER_PLAYER_LOAD}),this.proxyEmitAll(e,{[n.PLAYER_AUTOPLAY_FAILED]:n.LIST_PLAYER_AUTOPLAY_FAILED,[n.PLAYER_TRACKING_DATA_CREATED]:n.LIST_PLAYER_TRACKING_DATA_CREATED,[n.PLAYER_TRACKING_DATA_FINALIZED]:n.LIST_PLAYER_TRACKING_DATA_FINALIZED,[n.PLAYER_BUFFER_STALLED]:n.LIST_PLAYER_BUFFER_STALLED,[n.PLAYER_BUFFERING_START]:n.LIST_PLAYER_BUFFERING_START,[n.PLAYER_BUFFERING_END]:n.LIST_PLAYER_BUFFERING_END,[n.PLAYER_VIDEO_ELEMENT_APPENDED]:n.LIST_PLAYER_VIDEO_ELEMENT_APPENDED,[n.PLAYER_VIDEO_ELEMENT_REMOVED]:n.LIST_PLAYER_VIDEO_ELEMENT_REMOVED,[n.PLAYER_DISPLAYED_CUES_CHANGED]:n.LIST_PLAYER_DISPLAYED_CUES_CHANGED,[n.LIST_PLAYER_VIDEO_PROFILE_CHANGED]:n.PLAYER_VIDEO_PROFILE_CHANGED,[n.LIST_PLAYER_PLAYBACK_SPEED_CHANGED]:n.PLAYER_PLAYBACK_SPEED_CHANGED,[n.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED]:n.PLAYER_SUBTITLE_LANGUAGES_LOADED})}_translatePosition(e){var t,i,n;return null!==(n=null===(i=null===(t=this._loadedList)||void 0===t?void 0:t.translatePosition)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:e}_translateDuration(e){var t,i,n;return null!==(n=null===(i=null===(t=this._loadedList)||void 0===t?void 0:t.translateDuration)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:e}_handleProgress(e){const{data:t}=e;this.emit(n.LIST_PLAYER_PROGRESS,Object.assign(Object.assign({},t),{position:this._translatePosition(t.position)}))}_handleBeforeLoad(e){const{data:t}=e;this.emit(n.LIST_PLAYER_BEFORE_PLAYER_LOAD,Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},t.options),{position:this._translatePosition(t.options.position)})}))}_handlePlayerInitError(e){this._trackPlayerPromise.reject(new Tt(s.LIST_PLAYER_NO_TRACK_PLAYER,e.message||"Track player promise was rejected."))}_handleCapped(){const e=this._currentTrack;e&&this.emit(n.LIST_PLAYER_CAPPED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList})}_handlePlaying(e){const t=this._currentTrack;t&&this.emit(n.LIST_PLAYER_PLAYING,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handlePaused(e){const t=this._currentTrack;t&&this.emit(n.LIST_PLAYER_PAUSED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleCanPreload(){this._preloadUpcomingTrack().catch((()=>{}))}_handleEnded(){const e=this._currentTrack;e&&(this.emit(n.LIST_PLAYER_TRACK_ENDED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(St.TRACK_DONE))}_handleTimeout(){const e=this._currentTrack;e&&(this.emit(n.LIST_PLAYER_TRACK_TIMEOUT,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(St.TRACK_ERROR))}_handlePositionChanged(e){const t=this._currentTrack;t&&this.emit(n.LIST_PLAYER_POSITION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleDurationChanged(e){const t=this._currentTrack;t&&this.emit(n.LIST_PLAYER_DURATION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position),duration:this._translateDuration(e.data.duration)})}_handlePlayedThresholdReached(e){const t=this._currentTrack;t&&this.emit(n.LIST_PLAYER_PLAYED_THRESHOLD_REACHED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,threshold:e.data.threshold,position:this._translatePosition(e.data.position)})}_handleError(e){const t=this._currentTrack,i=e.data;if(!t)return;i.position=this._translatePosition(e.data.position),this.emit(n.LIST_PLAYER_ERROR,i),this.emitSync(n.LIST_PLAYER_ERROR_SYNC,i);const a=!!i.error&&i.error.listPlayerIgnore;a||this._listErrorCount++,i.canPlayNext&&(a||this._listErrorCount<=this._maxListErrors?this.next(St.TRACK_ERROR):this.emit(n.LIST_PLAYER_MAX_LIST_ERRORS_REACHED,{count:this._listErrorCount,threshold:this._maxListErrors}))}_handleTrackLoaded(e){this.emitSync(n.LIST_PLAYER_TRACK_LOADED,e)}_incrementSeqId(){return this._currentSeqId>=9007199254740991?this._currentSeqId=0:this._currentSeqId+=1,this._currentSeqId}_getTrackPlayer(){return this._trackPlayerPromise.promise}_setListIndex(e,t){const i=t.index&&-1!==t.index?t.index:0;return Promise.all([e,t,e.startAt(i)])}_setListOptions(e){let[t,i,n]=e;return Promise.all([t.setShuffle(!!this._shuffled),t.setRepeatMode(this._repeatMode)]).then((()=>[t,i]))}_replaceCurrentList(e){let[t,i]=e;return this.emitSync(n.LIST_PLAYER_BEFORE_LIST_CHANGE,{newList:t,newOptions:i,oldList:this._loadedList,oldOptions:this._loadedOptions}),this._loadedList=t,this._loadedOptions=i,this._listPlayCount=0,this._listErrorCount=0,this.emit(n.LIST_PLAYER_LIST_CHANGED,{list:t,options:i}),r.SUCCESS}_preloadTrack(e){return this._getTrackPlayer().then((t=>(t.preload(e).catch((()=>{})),r.SUCCESS)))}_changeTrack(e,t,i){if(this._currentSeqId!==i)return Promise.resolve(r.CANCELLED);this.emitSync(n.LIST_PLAYER_BEFORE_TRACK_LOAD,{list:this._loadedList,newTrack:e,oldTrack:this._currentTrack}),this._uid++;const a=++this._listPlayCount,s=this._loadedOptions;let o=!0,l=0,d=3e4;s&&(1===a?(o=!s.paused,l=s.initialPosition||s.position||0):l=s.position||0);const c=t===St.TRACK_DONE;if(e.options){const t=e.options;void 0!==t.paused&&(o=!t.paused),void 0!==t.position&&(l=t.position),void 0!==t.playedThreshold&&(d=t.playedThreshold)}this._currentTrack=e,this._currentTrackOptions={reason:t,paused:!o,position:l,playedThreshold:d};const u=this._handleTrackLoaded.bind(this,{uid:this._uid,track:this._currentTrack,options:this._currentTrackOptions,list:this._loadedList});return this._getTrackPlayer().then((t=>this._currentSeqId!==i?r.CANCELLED:(Promise.resolve(t.load(e,{uriProperty:"playableURI",autoplay:o,position:l,playedThreshold:d,continuePrevious:c},u)).catch((()=>{})),r.SUCCESS)))}_preloadUpcomingTrack(){const e=this._loadedList;if(!e)return Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));const t={reason:St.TRACK_DONE,listConstants:kt};return e.peekNext(t).then((e=>e===kt.FORBIDDEN?r.FORBIDDEN:e===kt.NULL_VALUE?this._preloadUpcomingTrack():e===kt.LIST_END?r.LIST_END:Rt(e)&&e.playable?this._preloadTrack(e):r.INVALID))}activateElement(){return this._getTrackPlayer().then((e=>(e.activateElement(),r.SUCCESS)))}load(e,t){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={index:-1,position:0,initialPosition:0,duration:-1,paused:!1,reason:St.UNKNOWN};return void 0!==e.index&&(t.index=e.index),void 0!==e.position&&(t.position=e.position),void 0!==e.initialPosition&&(t.initialPosition=e.initialPosition),void 0!==e.duration&&(t.duration=e.duration),void 0!==e.paused&&(t.paused=e.paused),void 0!==e.reason&&(t.reason=e.reason),t}(t||this._loadedOptions||{});return this._setListIndex(e,i).then(this._setListOptions).then(this._replaceCurrentList)}play(e,t){return this.load(e,t).then((()=>{if(this._loadedList!==e)return r.CANCELLED;const t=this._loadedOptions?this._loadedOptions.reason:St.UNKNOWN;return this.next(t)}))}canChangeTrack(){return this._loadedList?this._loadedList.peekNext({reason:St.FORWARD_BUTTON,listConstants:kt}).then((e=>e!==kt.FORBIDDEN)):Promise.resolve(!0)}next(e){if(!e)return Promise.reject(new Tt(s.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(n.LIST_PLAYER_BEFORE_NEXT,{list:t,reason:e});const i=this._incrementSeqId(),a={reason:e,listConstants:kt};return t.next(a).then((a=>this._currentSeqId!==i?r.CANCELLED:a===kt.FORBIDDEN?r.FORBIDDEN:a===kt.NULL_VALUE?this.next(e):a===kt.LIST_END?(this.emit(n.LIST_PLAYER_LIST_ENDED,{list:t,reason:St.END_PLAY}),this.clear(e),r.LIST_END):Rt(a)?a.playable?this._changeTrack(a,e,i):(this.emit(n.LIST_PLAYER_TRACK_UNPLAYABLE,{track:a,list:t}),this.next(e)):r.INVALID))}previous(e){if(!e)return Promise.reject(new Tt(s.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(n.LIST_PLAYER_BEFORE_PREVIOUS,{list:t,reason:e});const i=this._incrementSeqId(),a={reason:e,listConstants:kt};return t.previous(a).then((a=>this._currentSeqId!==i?r.CANCELLED:a===kt.FORBIDDEN?r.FORBIDDEN:a===kt.NULL_VALUE?this.previous(e):a===kt.LIST_START?(this.emit(n.LIST_PLAYER_LIST_ENDED,{list:t,reason:St.END_PLAY}),this.clear(e),r.LIST_END):Rt(a)?a.playable?this._changeTrack(a,e,i):(this.emit(n.LIST_PLAYER_TRACK_UNPLAYABLE,{track:a,list:t}),this.previous(e)):r.INVALID))}pause(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.pause().then((()=>r.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?r.CANCELLED:r.FORBIDDEN)))):Promise.resolve(r.SUCCESS):Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}resume(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.resume().then((()=>r.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?r.CANCELLED:r.FORBIDDEN)))):Promise.resolve(r.SUCCESS):Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}togglePlay(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.togglePlay().then((()=>r.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?r.CANCELLED:r.FORBIDDEN)))):Promise.resolve(r.SUCCESS):Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}stop(e){const t={reason:e||St.UNKNOWN},i=this._currentTrack;return i&&i.logData&&(t.source=i.logData.source),this._incrementSeqId(),this._getTrackPlayer().then((e=>(e.stop(t),this.emit(n.LIST_PLAYER_STOPPED,{uid:this._uid,options:this._currentTrackOptions,list:this._loadedList}),r.SUCCESS)))}clear(e){return this.stop(e).then((()=>(this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this.emit(n.LIST_PLAYER_CLEARED,null),r.SUCCESS)))}setShuffle(e){const t=!!e;if(this._shuffled!==t){this._shuffled=t,this.emit(n.LIST_PLAYER_SHUFFLE_CHANGED,{player:this,shuffled:t});const e=this._loadedList;e&&e.setShuffle(this._shuffled)}return Promise.resolve(r.SUCCESS)}setRepeatMode(e){if(!(e in ft))return Promise.reject(new Tt(s.LIST_PLAYER_INVALID_ARGUMENT,"The value of repeat mode is not a correct RepeatMode enum value"));if(this._repeatMode!==e){this._repeatMode=e,this.emit(n.LIST_PLAYER_REPEAT_MODE_CHANGED,{player:this,repeatMode:e});const t=this._loadedList;t&&t.setRepeatMode(this._repeatMode)}return Promise.resolve(r.SUCCESS)}getVolume(){return this._getTrackPlayer().then((e=>e.getVolume()))}setVolume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._getTrackPlayer().then((i=>(i.setVolume(e,{commandId:null!=t?t:void 0}),this.emit(n.LIST_PLAYER_VOLUME_CHANGED,{volume:e,commandId:t}),r.SUCCESS)))}seek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St.SEEK;var i,a;const o=this._loadedList;if(!o)return Promise.reject(new Tt(s.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));if("function"==typeof o.allowSeeking&&!o.allowSeeking())return Promise.reject(new Tt(s.LIST_PLAYER_FORBIDDEN,"The operation is not allowed."));const l=null!==(a=null===(i=o.handleSeek)||void 0===i?void 0:i.call(o,e,{reason:t,listConstants:kt}))&&void 0!==a?a:e;return l===kt.PAUSE?this.pause().then((t=>(this.emit(n.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:l}),t))):l===kt.IGNORE?(this.emit(n.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:l}),Promise.resolve(r.SUCCESS)):this._currentTrack?this._getTrackPlayer().then((e=>(e.seek(l),r.SUCCESS))):Promise.resolve(r.SUCCESS)}getListConstants(){return kt}getLoadedList(){return this._loadedList}getLoadedOptions(){return this._loadedOptions}getPlayerState(){return this._getTrackPlayer().then((e=>{const t=e.getPlayerState();return Object.assign(Object.assign({},t),{position:this._translatePosition(t.position),duration:this._translateDuration(t.duration)})}))}getState(){return this.getPlayerState().then((e=>({playbackState:e,track:this._currentTrack,list:this._loadedList,options:this._loadedOptions})))}getMediaConfig(){return this._getTrackPlayer().then((e=>e.getMediaConfig()))}hideSubtitles(){return this._getTrackPlayer().then((e=>e.hideSubtitles())).then((()=>r.SUCCESS))}showSubtitles(){return this._getTrackPlayer().then((e=>e.showSubtitles())).then((()=>r.SUCCESS))}areSubtitlesShown(){return this._getTrackPlayer().then((e=>e.areSubtitlesShown()))}getSubtitleLanguages(){return this._getTrackPlayer().then((e=>e.getSubtitleLanguages()))}getActiveSubtitleLanguage(){return this._getTrackPlayer().then((e=>{var t;return null!==(t=e.getActiveSubtitleLanguage())&&void 0!==t?t:null}))}deactivateCueEvents(){return this._getTrackPlayer().then((e=>e.deactivateCueEvents())).then((()=>r.SUCCESS))}activateCueEvents(){return this._getTrackPlayer().then((e=>e.activateCueEvents())).then((()=>r.SUCCESS))}getCurrentBandwidth(){return this._getTrackPlayer().then((e=>e.getCurrentBandwidth()))}setSubtitleLanguage(e){return this._getTrackPlayer().then((t=>t.setSubtitleLanguage(e))).then((()=>r.SUCCESS))}setPlaybackSpeed(e){return this._getTrackPlayer().then((t=>t.setPlaybackSpeed(e))).then((e=>e?r.SUCCESS:r.FORBIDDEN))}getStatistics(){return this._getTrackPlayer().then((e=>e.getStatistics()))}getAudioProcessor(){return this._getTrackPlayer().then((e=>e.getAudioProcessor()))}}const bt=c.P.forTag("playback.init");function Ct(e){return new Promise(((t,i)=>{var n,a,s,r,o,l,c;if(!e.transport)return void i(new TypeError("Argument transport is required."));if("undefined"!=typeof window){("boolean"==typeof window.isSecureContext?window.isSecureContext:function(){if("undefined"==typeof window||!window.location)return!1;const e=window.location;if("https"===e.protocol||"file"===e.protocol)return!0;const t=e.hostname;return!!/^127(\.[0-255]){3}$|^locahost\.?$|\.localhost\.?$/.test(t)}())||null===(n=window.console)||void 0===n||n.warn("%cDRM might not be available from unsecure contexts","background: #222; color: #bada55; font-size: 40px")}const{transport:u}=e,[m="",_=""]=(e.sdkId||"").split(":"),h=Object.assign(Object.assign({},e),{tracker:st.create(),audioResolver:new et(u),videoResolver:new rt(u),licenseURLResolver:new lt({transport:u,sdk:{name:m,version:_},securityLevel:e.securityLevel,useTestLicenseServer:e.useTestLicenseServer}),newBufferPerTrack:null===(a=e.newBufferPerTrack)||void 0===a||a,preinitMediaElement:null===(s=e.preinitMediaElement)||void 0===s||s});e.unauthenticatedLogs&&!(null===(r=e.loggerOptions)||void 0===r?void 0:r.endpoint)&&(e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{endpoint:"https://spclient.wg.spotify.com/melody/unauth"})),(null===(o=null==e?void 0:e.loggerOptions)||void 0===o?void 0:o.deviceInfo)||Promise.all([null===(l=e.loggerOptions)||void 0===l?void 0:l.platform,null===(c=e.loggerOptions)||void 0===c?void 0:c.clientVersion]).then((t=>{let[i,n]=t;e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{deviceInfo:{platform:i,version:n}})})),He.create(h).then((t=>{const i=Object.assign({disableMux:!0},e.loggerOptions),n=function(e){return new dt(e)}(Object.assign(Object.assign({},i),{transport:u,sdkId:e.sdkId,platform:Promise.resolve(i.deviceInfo).then((e=>{var t;return null!==(t=null==e?void 0:e.platform)&&void 0!==t?t:""})),clientVersion:Promise.resolve(i.deviceInfo).then((e=>{var t;return null!==(t=null==e?void 0:e.version)&&void 0!==t?t:""}))})),a=Ze.create({transport:u,player:t,logSender:n});return i.disableMux||vt.create({player:t,mux:d,envKey:null==i?void 0:i.muxEnvKey,sdk:m,sdkVersion:_,deviceInfo:i.deviceInfo,muxCustomDimensions:i.muxCustomDimensions}).ready().then((()=>bt.info("MuxReporter ready")),(e=>bt.error("Failed to instantiate MuxReporter",null==e?void 0:e.message))),{player:t,logger:a}})).then(t,i)}))}},23868:(e,t)=>{"use strict";t.n=void 0,function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(t.n||(t.n={}))},27164:(e,t)=>{"use strict";t.Y=void 0,function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook"}(t.Y||(t.Y={}))},77067:(e,t)=>{"use strict";t.L=void 0,function(e){e.USER_INFO_REQUEST_EMPTY_RESPONSE="USER_INFO_REQUEST_EMPTY_RESPONSE",e.USER_INFO_REQUEST_FAILED_WITH_STATUS="USER_INFO_REQUEST_FAILED_WITH_STATUS",e.HARMONY_NO_TRACKS_LOADED="HARMONY_NO_TRACKS_LOADED",e.HARMONY_OPERATION_FORBIDDEN="HARMONY_OPERATION_FORBIDDEN",e.HARMONY_LOCAL_PLAYER_DISABLED="HARMONY_LOCAL_PLAYER_DISABLED",e.HARMONY_INVALID_DESCRIPTOR_ID="HARMONY_INVALID_DESCRIPTOR_ID",e.CONNECTAPI_CLIENT_INVALID_ARGUMENTS="CONNECTAPI_CLIENT_INVALID_ARGUMENTS",e.CONNECTAPI_CLIENT_MISSING_DEVICE_ID="CONNECTAPI_CLIENT_MISSING_DEVICE_ID",e.CONNECTAPI_CLIENT_NO_CONNECTION_ID="CONNECT_API_CLIENT_NO_CONNECTION_ID",e.CONNECTAPI_CLIENT_NO_DEVICE="CONNECTAPI_CLIENT_NO_DEVICE",e.CONNECTAPI_CLIENT_NO_SESSION_ID="CONNECTAPI_CLIENT_NO_SESSION_ID",e.CONNECTAPI_CLIENT_NO_STATE="CONNECTAPI_CLIENT_NO_STATE",e.CONNECTAPI_CLIENT_INVALID_POSITION="CONNECT_API_CLIENT_INVALID_POSITION",e.CONNECTAPI_CLIENT_INVALID_VOLUME="CONNECT_API_CLIENT_INVALID_VOLUME",e.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED="CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED",e.CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS="CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS",e.CP_NO_DEVICE_DESCRIPTOR="CP_NO_DEVICE_DESCRIPTOR",e.CP_NO_CONNECTION_ID="CP_NO_CONNECTION_ID",e.CP_REGISTRATION_FAILED_WITH_STATUS="CP_REGISTRATION_FAILED_WITH_STATUS",e.CP_REGISTRATION_FAILED_NON_PREMIUM="CP_REGISTRATION_FAILED_NON_PREMIUM",e.CP_REQUEST_FAILED_WITH_STATUS="CP_REQUEST_FAILED_WITH_STATUS",e.CP_NO_DEVICE_ID="CP_NO_DEVICE_ID",e.CP_NO_RESPONSE_BODY="CP_NO_RESPONSE_BODY",e.CP_NO_TRACKING_DATA="CP_NO_TRACKING_DATA",e.CP_INVALID_STATE="CP_INVALID_STATE",e.QUEUE_MANAGER_NO_STATE="QUEUE_MANAGER_NO_STATE",e.QUEUE_OPERATION_STALE_REVISION="QUEUE_OPERATION_STALE_REVISION",e.TP_NO_RESPONSE_BODY="TP_NO_RESPONSE_BODY",e.TP_REGISTRATION_FAILED_NON_PREMIUM="TP_REGISTRATION_FAILED_NON_PREMIUM",e.TP_REGISTRATION_FAILED_WITH_STATUS="TP_REGISTRATION_FAILED_WITH_STATUS",e.TP_MAX_SUBSCRIPTIONS_REACHED="TP_MAX_SUBSCRIPTIONS_REACHED",e.TP_UPDATE_REQUEST_EMPTY_RESPONSE="TP_UPDATE_REQUEST_EMPTY_RESPONSE",e.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS="TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS",e.TP_UNKNOWN_COMMAND="TP_UNKNOWN_COMMAND",e.TP_CANNOT_CREATE_STATE_REF="TP_CANNOT_CREATE_STATE_REF",e.TP_MISSING_INITIAL_STATE="TP_MISSING_INITIAL_STATE",e.TP_INVALID_STATE_REFERENCE="TP_INVALID_STATE_REFERENCE",e.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS="TP_CONFLICT_REQUEST_FAILED_WITH_STATUS"}(t.L||(t.L={}))},41412:(e,t)=>{"use strict";t.i=void 0,function(e){e.AUTHENTICATED="authenticated",e.AUTHENTICATION_ERROR="authentication_error",e.AUTOPLAY_FAILED="autoplay_failed",e.BEFORE_DISCONNECT="before_disconnect",e.BEFORE_VOLUME_CHANGE="before_volume_change",e.BUFFER_STALLED="stalled",e.BUFFERING_END="buffering_end",e.BUFFERING_START="buffering_start",e.CONNECTED="connected",e.CONNECTION_ERROR="connection_error",e.DEVICES_CHANGED="devices_changed",e.DEVICE_DEACTIVATED="device_deactivated",e.DEVICE_DESCRIPTOR_CHANGED="descriptor_changed",e.DISCONNECTED="disconnected",e.DURATION_CHANGED="duration_changed",e.ERROR="error",e.LAST_ACTIVE_DEVICE_INFO_CHANGED="last_active_device_info_changed",e.LOCAL_CONTEXT_ENDED="local_context_ended",e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.LOCAL_PLAYER_ENABLED="local_player_enabled",e.LOCAL_PLAYER_LOGGED_OUT="local_player_logged_out",e.LOGGED_OUT="logged_out",e.MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.MAX_SUBSCRIPTIONS_REACHED="max_subscriptions_reached",e.PLAYBACK_CAPPED="playback_capped",e.PLAYER_INITIALIZATION_DONE="player_initialization_done",e.PLAYER_INITIALIZATION_FAILED="player_initialization_failed",e.PRODUCT_STATE_CHANGED="product_state_changed",e.PROGRESS="progress",e.PLAYER_QUEUE_CHANGED="player_queue_changed",e.RECONNECTED="reconnected",e.RECONNECTING="reconnecting",e.REMOTE_OBSERVER_DISABLED="remote_observer_disabled",e.REMOTE_OBSERVER_ENABLED="remote_observer_enabled",e.SERVICE_REGISTRATION_ERROR="service_registration_error",e.STATE_CHANGED="state_changed",e.STOPPED_ON_BACKGROUND="stopped_on_background",e.TRACK_ENDED="track_ended",e.UNRECOVERABLE_FAILURE="unrecoverable_failure",e.VIDEO_ELEMENT_APPENDED="video_element_appended",e.VIDEO_ELEMENT_REMOVED="video_element_removed",e.VOLUME_CHANGED="volume_changed",e.DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.SPEED_CHANGED="speed_changed"}(t.i||(t.i={}))},42990:(e,t,i)=>{"use strict";i.r(t),i.d(t,{DeviceDeactivatedReason:()=>Pi,DeviceType:()=>A,HarmonyError:()=>Xi,HarmonyErrorSource:()=>p,HarmonyEvent:()=>h,HiFiStatus:()=>ui,KeySystem:()=>K,LOCAL_DEVICE_ID:()=>m,MediaCodec:()=>Jt,PlaybackQuality:()=>ei,RepeatMode:()=>v,Robustness:()=>ii,createHarmony:()=>Ji,createHarmonyAndTransport:()=>en});var n;i(59538);!function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(n||(n={}));var a,s=i(59399);!function(e){e.USER_INFO_REQUEST_EMPTY_RESPONSE="USER_INFO_REQUEST_EMPTY_RESPONSE",e.USER_INFO_REQUEST_FAILED_WITH_STATUS="USER_INFO_REQUEST_FAILED_WITH_STATUS",e.HARMONY_NO_TRACKS_LOADED="HARMONY_NO_TRACKS_LOADED",e.HARMONY_OPERATION_FORBIDDEN="HARMONY_OPERATION_FORBIDDEN",e.HARMONY_LOCAL_PLAYER_DISABLED="HARMONY_LOCAL_PLAYER_DISABLED",e.HARMONY_INVALID_DESCRIPTOR_ID="HARMONY_INVALID_DESCRIPTOR_ID",e.CONNECTAPI_CLIENT_INVALID_ARGUMENTS="CONNECTAPI_CLIENT_INVALID_ARGUMENTS",e.CONNECTAPI_CLIENT_MISSING_DEVICE_ID="CONNECTAPI_CLIENT_MISSING_DEVICE_ID",e.CONNECTAPI_CLIENT_NO_CONNECTION_ID="CONNECT_API_CLIENT_NO_CONNECTION_ID",e.CONNECTAPI_CLIENT_NO_DEVICE="CONNECTAPI_CLIENT_NO_DEVICE",e.CONNECTAPI_CLIENT_NO_SESSION_ID="CONNECTAPI_CLIENT_NO_SESSION_ID",e.CONNECTAPI_CLIENT_NO_STATE="CONNECTAPI_CLIENT_NO_STATE",e.CONNECTAPI_CLIENT_INVALID_POSITION="CONNECT_API_CLIENT_INVALID_POSITION",e.CONNECTAPI_CLIENT_INVALID_VOLUME="CONNECT_API_CLIENT_INVALID_VOLUME",e.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED="CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED",e.CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS="CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS",e.CP_NO_DEVICE_DESCRIPTOR="CP_NO_DEVICE_DESCRIPTOR",e.CP_NO_CONNECTION_ID="CP_NO_CONNECTION_ID",e.CP_REGISTRATION_FAILED_WITH_STATUS="CP_REGISTRATION_FAILED_WITH_STATUS",e.CP_REGISTRATION_FAILED_NON_PREMIUM="CP_REGISTRATION_FAILED_NON_PREMIUM",e.CP_REQUEST_FAILED_WITH_STATUS="CP_REQUEST_FAILED_WITH_STATUS",e.CP_NO_DEVICE_ID="CP_NO_DEVICE_ID",e.CP_NO_RESPONSE_BODY="CP_NO_RESPONSE_BODY",e.CP_NO_TRACKING_DATA="CP_NO_TRACKING_DATA",e.CP_INVALID_STATE="CP_INVALID_STATE",e.QUEUE_MANAGER_NO_STATE="QUEUE_MANAGER_NO_STATE",e.QUEUE_OPERATION_STALE_REVISION="QUEUE_OPERATION_STALE_REVISION",e.TP_NO_RESPONSE_BODY="TP_NO_RESPONSE_BODY",e.TP_REGISTRATION_FAILED_NON_PREMIUM="TP_REGISTRATION_FAILED_NON_PREMIUM",e.TP_REGISTRATION_FAILED_WITH_STATUS="TP_REGISTRATION_FAILED_WITH_STATUS",e.TP_MAX_SUBSCRIPTIONS_REACHED="TP_MAX_SUBSCRIPTIONS_REACHED",e.TP_UPDATE_REQUEST_EMPTY_RESPONSE="TP_UPDATE_REQUEST_EMPTY_RESPONSE",e.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS="TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS",e.TP_UNKNOWN_COMMAND="TP_UNKNOWN_COMMAND",e.TP_CANNOT_CREATE_STATE_REF="TP_CANNOT_CREATE_STATE_REF",e.TP_MISSING_INITIAL_STATE="TP_MISSING_INITIAL_STATE",e.TP_INVALID_STATE_REFERENCE="TP_INVALID_STATE_REFERENCE",e.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS="TP_CONFLICT_REQUEST_FAILED_WITH_STATUS"}(a||(a={}));var r=i(35022),o=i(65937);function l(e){return"string"==typeof e}i(71756);var d,c=i(74772);!function(e){e.APPLOAD="appload",e.BACK_BUTTON="backbtn",e.CLICK_ROW="clickrow",e.CLICK_SIDE="clickside",e.END_PLAY="endplay",e.FORWARD_BUTTON="fwdbtn",e.LOGOUT="logout",e.PLAY_BUTTON="playbtn",e.POPUP="popup",e.REMOTE="remote",e.TRACK_DONE="trackdone",e.TRACK_ERROR="trackerror",e.UNKNOWN="unknown",e.URI_OPEN="uriopen",e.CAPPED="capped",e.SEEK="seek"}(d||(d={}));var u=i(85698);const m="@local",_=65535;var h,p,v;!function(e){e.AUTHENTICATED="authenticated",e.AUTHENTICATION_ERROR="authentication_error",e.AUTOPLAY_FAILED="autoplay_failed",e.BEFORE_DISCONNECT="before_disconnect",e.BEFORE_VOLUME_CHANGE="before_volume_change",e.BUFFER_STALLED="stalled",e.BUFFERING_END="buffering_end",e.BUFFERING_START="buffering_start",e.CONNECTED="connected",e.CONNECTION_ERROR="connection_error",e.DEVICES_CHANGED="devices_changed",e.DEVICE_DEACTIVATED="device_deactivated",e.DEVICE_DESCRIPTOR_CHANGED="descriptor_changed",e.DISCONNECTED="disconnected",e.DURATION_CHANGED="duration_changed",e.ERROR="error",e.LAST_ACTIVE_DEVICE_INFO_CHANGED="last_active_device_info_changed",e.LOCAL_CONTEXT_ENDED="local_context_ended",e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.LOCAL_PLAYER_ENABLED="local_player_enabled",e.LOCAL_PLAYER_LOGGED_OUT="local_player_logged_out",e.LOGGED_OUT="logged_out",e.MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.MAX_SUBSCRIPTIONS_REACHED="max_subscriptions_reached",e.PLAYBACK_CAPPED="playback_capped",e.PLAYER_INITIALIZATION_DONE="player_initialization_done",e.PLAYER_INITIALIZATION_FAILED="player_initialization_failed",e.PRODUCT_STATE_CHANGED="product_state_changed",e.PROGRESS="progress",e.PLAYER_QUEUE_CHANGED="player_queue_changed",e.RECONNECTED="reconnected",e.RECONNECTING="reconnecting",e.REMOTE_OBSERVER_DISABLED="remote_observer_disabled",e.REMOTE_OBSERVER_ENABLED="remote_observer_enabled",e.SERVICE_REGISTRATION_ERROR="service_registration_error",e.STATE_CHANGED="state_changed",e.STOPPED_ON_BACKGROUND="stopped_on_background",e.TRACK_ENDED="track_ended",e.UNRECOVERABLE_FAILURE="unrecoverable_failure",e.VIDEO_ELEMENT_APPENDED="video_element_appended",e.VIDEO_ELEMENT_REMOVED="video_element_removed",e.VOLUME_CHANGED="volume_changed",e.DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.SPEED_CHANGED="speed_changed"}(h||(h={})),function(e){e.CLOUD_PLAYBACK="cloud-playback",e.CONNECT_API="connect-api",e.HARMONY="harmony",e.PLAYBACK="playback",e.TRACK_PLAYBACK="track-playback",e.TRANSPORT="transport"}(p||(p={})),function(e){e[e.OFF=0]="OFF",e[e.CONTEXT=1]="CONTEXT",e[e.TRACK=2]="TRACK"}(v||(v={}));class k extends Error{constructor(e,t){super(t),this.status=-1,this.unrecoverable=!1,this.debug={},this.code=e,this.name="HarmonyError"}static fatal(e,t){const i=new k(e,t);return i.unrecoverable=!0,i}}function g(e,t){return!e&&!t||!(!e||!t)&&(e.id===t.id&&e.is_active===t.is_active&&e.is_controllable===t.is_controllable&&e.is_observable===t.is_observable&&e.is_being_activated===t.is_being_activated&&e.local===t.local&&e.name===t.name&&e.type===t.type&&e.version===t.version&&e.volume===t.volume)}class E extends Error{constructor(e,t){super(t),this.unrecoverable=!1,this.code=e,this.name="PlayerQueueError"}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreMetaForTrack:!1};var i,n,a,s,r;const o=[],l=[];let d=!1,c=!1;if(!(null==e?void 0:e.length))return{items:o,tracks:l,hasQueuedTracks:d};for(const u of e){const e="spotify:delimiter"===u.uri||/^spotify:meta:/.test(u.uri)?"meta":"track",m=`${u.uid}:::${null!==(n=null===(i=u.metadata)||void 0===i?void 0:i.iteration)&&void 0!==n?n:""}`,_={type:e,uri:u.uri,uid:u.uid,qid:m,metadata:u.metadata||{},hidden:"true"===(null===(a=u.metadata)||void 0===a?void 0:a.hidden),queued:"true"===(null===(s=u.metadata)||void 0===s?void 0:s.is_queued),provider:u.provider,removed_reasons:u.removed,$blck_rs:u.blocked};_.queued&&(d=!0),o.push(_),"meta"===_.type?c=!0:!t.ignoreMetaForTrack&&c||"track"!==_.type||_.hidden||(null===(r=_.removed_reasons)||void 0===r?void 0:r.length)||l.push(_)}return{items:o,tracks:l,hasQueuedTracks:d}}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(e))throw new TypeError("Items is not an array.");if(!e.length)return[];const i=[];for(let n of e){if(!n)continue;"string"==typeof n&&(n={type:"track",uri:n});const e={uri:n.uri,uid:n.uid,metadata:n.metadata||{},removed:n.removed_reasons,blocked:n.$blck_rs,provider:n.provider};(n.queued||t.queued)&&(e.metadata.is_queued="true",e.provider="queue"),(n.hidden||"meta"===n.type)&&(e.metadata.hidden="true"),i.push(e)}return i}function f(e){const[t,i]=e.split(":::"),n={type:"track",uid:t};return i&&(n.metadata={iteration:i}),n}class N extends c.vp{constructor(e){super(),this._hasInitialState=!1,this._reportInactiveQueues=!1,this._onlyLocalQueue=!1,this._currentPlayerState=null,this._currentInternalQueue=null,this._currentQueue=null,this._hasQueuedTracks=!1,this._connectClient=e.connectClient,this._runner=e.runner||(e=>e()),this._parsePlayerState=this._parsePlayerState.bind(this),this._onlyLocalQueue=!!e.onlyLocalQueue,this._reportInactiveQueues=!!e.reportInactiveQueues,this._connectClient.on("player_state_changed",this._onPlayerStateChanged.bind(this)),e.initialContextPlayerState&&this._parsePlayerState(e.initialContextPlayerState)}static create(e){return new N(e)}_onPlayerStateChanged(e){const{playerState:t,orphaned:i,isLocal:n}=e.data;this._parsePlayerState(t,i,n)}_parsePlayerState(e,t,i){var n,a,s;if(this._hasInitialState=!0,this._onlyLocalQueue&&!i||!this._reportInactiveQueues&&t)this._currentPlayerState=null,this._currentInternalQueue=null,this._currentQueue=null;else if(this._currentPlayerState=null!=e?e:null,e){if(e.queue_revision===(null===(n=this._currentInternalQueue)||void 0===n?void 0:n.revision))return null;this._hasQueuedTracks=!1;const t={ignoreMetaForTrack:null===(a=e.options)||void 0===a?void 0:a.repeating_context},i=e.queue_revision,r=S([e.track]).items[0],o=S(e.next_tracks,t),l=S(e.prev_tracks,t);this._hasQueuedTracks=o.hasQueuedTracks;const d={uri:e.context_uri,metadata:null!==(s=e.context_metadata)&&void 0!==s?s:void 0};this._currentInternalQueue={revision:i,context:d,current_track:r,next_items:o.items,previous_items:l.items},this._currentQueue={revision:i,context:d,current_track:r,next_tracks:o.tracks,previous_tracks:l.tracks}}else this._hasQueuedTracks=!1,this._currentInternalQueue=null,this._currentQueue=null;return this.emit(h.PLAYER_QUEUE_CHANGED,{internalPlayerQueue:this._currentInternalQueue,playerQueue:this._currentQueue}),this._currentInternalQueue}_setQueueNext(e,t){const i=this._currentPlayerState;if(!i)return Promise.reject(new E(a.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));const n={next_tracks:e,prev_tracks:i.prev_tracks,queue_revision:i.queue_revision};return this._runner((()=>this._connectClient.setQueue(n,t)),t)}_appendQueued(e,t){var i,n;const s=this._currentPlayerState;if(!s)return Promise.reject(new E(a.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));const r=Array.from(null!==(i=s.next_tracks)&&void 0!==i?i:[]);if(this._hasQueuedTracks){let t=!1;for(let i=0,a=r.length;i<a;i++){const a=r[i];if("true"!==(null===(n=null==a?void 0:a.metadata)||void 0===n?void 0:n.is_queued)){r.splice(i,0,...e),t=!0;break}}t||r.push(...e)}else r.unshift(...e);return this._setQueueNext(r,t)}getInternalPlayerQueue(){return this._hasInitialState?Promise.resolve(this._currentInternalQueue):new Promise((e=>{this.on(h.PLAYER_QUEUE_CHANGED,(t=>{e(t.data.internalPlayerQueue)}))}))}getPlayerQueue(){return this._hasInitialState?Promise.resolve(this._currentQueue):new Promise((e=>{this.on(h.PLAYER_QUEUE_CHANGED,(t=>{e(t.data.playerQueue)}))}))}setInternalPlayerQueue(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreRevision:!1};if(!this._currentPlayerState)return Promise.reject(new E(a.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));if(e.revision!==this._currentPlayerState.queue_revision&&!i.ignoreRevision)return Promise.reject(new E(a.QUEUE_OPERATION_STALE_REVISION,"Cannot perform operation; revision is stale."));const n={next_tracks:y(e.next_items),prev_tracks:y(e.previous_items),queue_revision:i.ignoreRevision?void 0:this._currentPlayerState.queue_revision};return this._runner((()=>this._connectClient.setQueue(n,t)),t)}addToQueue(e,t){if(!Array.isArray(e))return Promise.reject(new TypeError("Argument `items` must be an array."));const i=y(e,{queued:!0});return i.length?1===i.length?this._runner((()=>this._connectClient.addToQueue(i[0],t)),t):this._appendQueued(i,t):Promise.resolve(!1)}removeNext(e,t){var i,n,s;const r=this._currentPlayerState;if(!r)return Promise.reject(new E(a.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));let o;o="string"==typeof e?f(e):e;const l=Array.from(null!==(i=r.next_tracks)&&void 0!==i?i:[]),d=l.length;for(let a=0;a<d;a++){const e=l[a];if((null==e?void 0:e.uid)===o.uid&&(null===(n=null==e?void 0:e.metadata)||void 0===n?void 0:n.iteration)===(null===(s=o.metadata)||void 0===s?void 0:s.iteration)){l.splice(a,1);break}}return l.length===d?Promise.resolve(!1):this._setQueueNext(l,t)}}class T extends c.vp{constructor(e){super(),this._hasFakeState=!1,this._localPlayerEnabled=!1,this._localPlayback=!1,this._lastDeviceList=[],this._deferredStreamer=(0,u.$)(),this._client=e.client,this._streamer=e.streamer,this._controller=e.controller,this._hidden=!!e.hidden,this._onlyLocalState=!!e.onlyLocalState,this._preferController=!this._onlyLocalState&&!!e.preferControllerState,this._claimInactivePlayerStates=!!e.claimInactivePlayerStates,this._enableControllerWithoutStreamer=!!e.enableControllerWithoutStreamer,this._autoActivateElement=!!e.autoActivateElement,this._deactivateOnStop=!!e.experimentalDeactivateOnStop,this._parseDeviceList=this._parseDeviceList.bind(this),this._init()}static create(e){return new T(e)}_init(){this._createStreamerDeferred();const e=this._client;e.on("error",this._onError.bind(this)),this.proxyEmit(e,"authenticated",h.AUTHENTICATED),this.proxyEmit(e,"authentication_error",h.AUTHENTICATION_ERROR),this.proxyEmit(e,"before_disconnect",h.BEFORE_DISCONNECT),this.proxyEmit(e,"connected",h.CONNECTED),this.proxyEmit(e,"connection_error",h.CONNECTION_ERROR),this.proxyEmit(e,"descriptor_changed",h.DEVICE_DESCRIPTOR_CHANGED),this.proxyEmit(e,"product_state_changed",h.PRODUCT_STATE_CHANGED),this.proxyEmit(e,"reconnected",h.RECONNECTED),this.proxyEmit(e,"reconnecting",h.RECONNECTING),this.proxyEmit(e,"unrecoverable_failure",h.UNRECOVERABLE_FAILURE),this.proxyEmit(e,"logged_out",h.LOGGED_OUT);const t=this._controller;t.on("device_info_changed",(e=>{this._onDeviceStateChanged(e.data)})),t.on("devices_changed",this._onDevicesChanged.bind(this)),t.on("state_changed",this._onPlayerStateChanged.bind(this)),t.on("progress",this._onControllerProgress.bind(this)),this.proxyEmitAll(t,{max_subscriptions_reached:h.MAX_SUBSCRIPTIONS_REACHED,device_deactivated:h.DEVICE_DEACTIVATED}),t.on("registered",this.emit.bind(this,h.REMOTE_OBSERVER_ENABLED,null)),t.on("deregistered",this.emit.bind(this,h.REMOTE_OBSERVER_DISABLED,null));const i=this._streamer;i?(i.on("deregistered",this._onStreamerDeregistered.bind(this)),i.on("registered",this._onStreamerRegistered.bind(this)),i.on("registration_aborted",this._onStreamerRegistrationAborted.bind(this)),i.on("state_changed",this._onStreamerStateChanged.bind(this)),i.on("stopped_on_background",this._onStreamerStoppedOnBackground.bind(this)),i.on("streamer_seek_handled",this._onSeekHandled.bind(this)),this.proxyEmitSync(i,"before_volume_change",h.BEFORE_VOLUME_CHANGE),this.proxyEmit(i,"autoplay_failed",h.AUTOPLAY_FAILED),this.proxyEmit(i,"stalled",h.BUFFER_STALLED),this.proxyEmit(i,"buffering_end",h.BUFFERING_END),this.proxyEmit(i,"buffering_start",h.BUFFERING_START),this.proxyEmit(i,"duration_changed",h.DURATION_CHANGED),this.proxyEmit(i,"max_list_errors_reached",h.MAX_LIST_ERRORS_REACHED),this.proxyEmit(i,"max_subscriptions_reached",h.MAX_SUBSCRIPTIONS_REACHED),this.proxyEmit(i,"playback_capped",h.PLAYBACK_CAPPED),this.proxyEmit(i,"player_initialization_done",h.PLAYER_INITIALIZATION_DONE),this.proxyEmit(i,"player_initialization_failed",h.PLAYER_INITIALIZATION_FAILED),this.proxyEmit(i,"progress",h.PROGRESS),this.proxyEmit(i,"registration_error",h.SERVICE_REGISTRATION_ERROR),this.proxyEmit(i,"track_ended",h.TRACK_ENDED),this.proxyEmit(i,"video_element_appended",h.VIDEO_ELEMENT_APPENDED),this.proxyEmit(i,"video_element_removed",h.VIDEO_ELEMENT_REMOVED),this.proxyEmit(i,"volume_changed",h.VOLUME_CHANGED),this.proxyEmit(i,"displayed_cues_changed",h.DISPLAYED_CUES_CHANGED),this.proxyEmit(i,"subtitle_languages_loaded",h.SUBTITLE_LANGUAGES_LOADED),this.proxyEmit(i,"speed_changed",h.SPEED_CHANGED),this.proxyEmitSync(i,"internal_endcontent","internal_endcontent"),i.on("context_ended",this.emit.bind(this,h.LOCAL_CONTEXT_ENDED,null)),i.on("logged_out",this.emit.bind(this,h.LOCAL_PLAYER_LOGGED_OUT,null))):(this._disableLocalTarget(),this.on(h.AUTHENTICATED,(()=>{this.emit(h.LOCAL_PLAYER_DISABLED,null)})))}_createStreamerDeferred(){this._deferredStreamer=(0,u.$)(),this._deferredStreamer.promise.catch((function(){}))}_isTargetIdLocal(e){return e?e===m?Promise.resolve(!0):this._client.getDeviceDescriptor().then((function(t){return e===t.getId()})):Promise.resolve(!!this._localPlayback)}_onStreamerRegistered(e){this._deferredStreamer.resolve(e.data),this._createStreamerDeferred(),this._deferredStreamer.resolve(e.data),this._localPlayerEnabled=!0,this._controller.register(),this.emit(h.LOCAL_PLAYER_ENABLED,null)}_onStreamerDeregistered(){this._disableLocalTarget(),this.emit(h.LOCAL_PLAYER_DISABLED,null)}_onStreamerRegistrationAborted(){this._disableLocalTarget(),this._enableControllerWithoutStreamer&&this._controller.register(),this.emit(h.LOCAL_PLAYER_DISABLED,null)}_disableLocalTarget(){this._localPlayerEnabled=!1;const e=new k(a.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot perform command; local player is disabled.");this._deferredStreamer.reject(e),this._createStreamerDeferred(),this._deferredStreamer.reject(e)}_onStreamerConnect(){return this._deferredStreamer.promise}_onDeviceStateChanged(e){var t=this;const i=!!this._localPlayback,n=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t._generateLocalDeviceInfo(e).then((e=>{t.emit(h.LAST_ACTIVE_DEVICE_INFO_CHANGED,{deviceInfo:e,hasOrphanedState:!1})}))};if(this._localPlayerEnabled&&e.hasOrphanedState&&this._claimInactivePlayerStates)return this._hasFakeState=!0,void n(!0);if(this._hasFakeState=!1,this._localPlayback=!(!e.deviceInfo||!e.deviceInfo.local),this._localPlayback){if(!this._streamer)throw new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.");this._streamer.getVolume().then((t=>{e.deviceInfo&&(e.deviceInfo.volume=t),this.emit(h.LAST_ACTIVE_DEVICE_INFO_CHANGED,e)})).catch((function(){}))}else this._onlyLocalState?(this._localPlayback||i)&&n():this.emit(h.LAST_ACTIVE_DEVICE_INFO_CHANGED,e)}_onDevicesChanged(e){this._parseDeviceList(e.data).then((e=>{(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Invalid devices list.");if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!g(e[i],t[i]))return!1;return!0})(this._lastDeviceList,e)||(this._lastDeviceList=e,this.emit(h.DEVICES_CHANGED,{devices:e,localDevice:null}))}))}_onError(e){const t=e.data.error;e.data.source===p.PLAYBACK&&t&&t.unrecoverable&&(this._disableLocalTarget(),this._streamer&&this._streamer.deregister()),this.emit(h.ERROR,e.data)}_onPlayerStateChanged(e){if(!this._onlyLocalState&&(this._preferController||!this._localPlayback)){let t;t=this._localPlayerEnabled&&this._claimInactivePlayerStates?e.data.state:e.data.orphaned?null:e.data.state,this.emit(h.STATE_CHANGED,{state:t})}}_onControllerProgress(e){this._onlyLocalState||this._localPlayback||this.emit(h.PROGRESS,e.data)}_onStreamerStateChanged(e){this._preferController||(this._onlyLocalState?this._triggerLocalStateChanges(e.data):this._hidden?this._handleHidden(e.data):this._localPlayback&&this.emit(h.STATE_CHANGED,e.data))}_onStreamerStoppedOnBackground(){this._deactivateOnStop&&(this._localPlayback=!1),this.emit(h.STOPPED_ON_BACKGROUND,null)}_handleHidden(e){e.state?(this._controller.suppressEvents(),this._triggerLocalStateChanges(e)):this._controller.unsuppressEvents()}_parseDeviceList(e){const t=e.devices.slice(0).map((e=>Promise.resolve(e)));return t.length&&e.localDevice?this._hasFakeState&&e.localDevice&&(e.localDevice.is_active=!0):t.push(this._generateLocalDeviceInfo(this._hasFakeState)),Promise.all(t).then((e=>e))}_triggerLocalStateChanges(e){this._generateLocalDeviceInfo().then((e=>{this._onDeviceStateChanged({deviceInfo:e,hasOrphanedState:!1})})),this.emit(h.STATE_CHANGED,e)}_canStartNewContext(e){return this._runOnDevice(e,(()=>this._streamer?Promise.resolve(!0):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided."))),(()=>Promise.resolve(!0)),{bypassFakeState:!0})}_activateElement(){this._autoActivateElement=!1,this._streamer&&this._streamer.activateElement().catch((()=>{}))}_runOnDevice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this._hasFakeState&&!(null==n?void 0:n.bypassFakeState)?(this._autoActivateElement&&this._activateElement(),this._claimStateAndRun(i,n)):this._isTargetIdLocal(e).then((e=>e?this._onStreamerConnect().then(t):i()))}_claimStateAndRun(e,t){return this._onStreamerConnect().then((()=>{this._hasFakeState=!1;const e={paused:!0};return(null==t?void 0:t.loggingParams)&&(e.loggingParams=t.loggingParams),Promise.all([this._controller.transfer(m,e),new Promise(((e,t)=>{this._streamer?this._streamer.once("track_loaded",e):t(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided."))}))])})).then((()=>e()))}_generateLocalDeviceInfo(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._client,i=this._streamer;let n=Promise.resolve(!1),a=Promise.resolve(-1);return this._localPlayerEnabled&&(e?n=Promise.resolve(!0):i&&(n=i.getCurrentState().then((e=>!!e))),i&&(a=i.getVolume())),Promise.all([t.getClientDescriptor(),t.getSDKId(),n,a]).then((e=>{let[t,i,n,a]=e;var s;const r={hifi_status:{fully_supported:void 0,user_eligible:void 0,device_supported:null===(s=t.capabilities)||void 0===s?void 0:s.lossless_playback}};return{hidden:this._hidden,id:t.id,is_active:n,is_group:!1,is_being_activated:!1,is_controllable:this._localPlayerEnabled,is_observable:!!this._localPlayerEnabled&&!this._hidden,local:!0,metadata:t.metadata||{},name:t.name,type:t.type,version:i,volume:a,capabilities:{supports_lossless_audio:!1},playback_features:r,has_inactive_player_state:this._hasFakeState}}))}_movePosition(e,t){return this.getCurrentState().then((i=>{if(!i||isNaN(i.position))return Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Seeking not allowed with invalid track."));const n=e,s=Math.min(i.duration,Math.max(0,i.position+n));return this.seek(s,t)}))}_prepareSkipTrack(e){let t;return t="string"==typeof e?f(e):e,t}_cycleRepeatMode(e){return this.getCurrentState().then((t=>{if(!t)return Promise.reject(new k(a.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"));let i=null;const n=t.disallows;switch(t.repeat_mode){case v.OFF:if(n.toggling_repeat_context){if(n.toggling_repeat_track)return Promise.resolve(!1);i=v.TRACK}else i=v.CONTEXT;break;case v.CONTEXT:i=n.toggling_repeat_track?v.OFF:v.TRACK;break;case v.TRACK:default:i=v.OFF}return this.setRepeatMode(i,e)}))}_onSeekHandled(e){this._controller.seek(e.data.position)}getClientDescriptor(){return this._client.getClientDescriptor()}getProductState(){return this._client.getProductState()}getPublicTransport(){return this._client.getPublicTransport()}getUserInfo(){return this._client.getUserInfo()}getVersionDescriptor(){return this._client.getVersionDescriptor()}logAppMetrics(e,t){return this._client.logAppMetrics(e,t)}setName(e){return this._client.setName(e)}setNameTemplate(e){return this._client.setNameTemplate(e)}getContextPlayerState(){return this._controller.getContextPlayerState()}updateCurrentContext(e,t){return this._controller.updateCurrentContext(e,t)}getLastActiveDevice(){return this._onlyLocalState||this._hasFakeState?this._generateLocalDeviceInfo(this._hasFakeState):this._controller.getActiveDevice().then((e=>(null==e?void 0:e.local)&&this._streamer?(e.hidden=this._hidden,this._streamer.getVolume().then((t=>(e.volume=t,e)))):e))}getCurrentState(){if(!this._onlyLocalState&&(this._preferController||!this._localPlayback)){const e=!this._localPlayerEnabled||!this._claimInactivePlayerStates;return this._controller.getCurrentState(e).then((e=>!this._preferController&&this._localPlayback?this.getCurrentState():e))}return this._onStreamerConnect().then(this._streamer.getCurrentState.bind(this._streamer))}pause(e,t){return this._runOnDevice(e,(()=>this._streamer.pause()),this._controller.pause.bind(this._controller,e,t),{loggingParams:null==t?void 0:t.loggingParams})}resume(e,t){return this._runOnDevice(e,(()=>this._streamer.resume()),this._controller.resume.bind(this._controller,e,t),{loggingParams:null==t?void 0:t.loggingParams})}togglePlay(e,t){return this._runOnDevice(e,(()=>this._streamer.togglePlay()),this._controller.togglePlay.bind(this._controller,e,t),{loggingParams:null==t?void 0:t.loggingParams})}playURI(e,t,i){return this._canStartNewContext(t).then((()=>(this._autoActivateElement&&this._activateElement(),this._controller.playURI(e,t,i))))}playPages(e,t,i){return this._canStartNewContext(t).then((()=>(this._autoActivateElement&&this._activateElement(),this._controller.playPages(e,t,i))))}playTracks(e,t,i){return this._canStartNewContext(t).then((()=>(this._autoActivateElement&&this._activateElement(),this._controller.playTracks(e,t,i))))}nextTrack(e,t){const i={};let n=()=>this._streamer.nextTrack(d.FORWARD_BUTTON);const a=this._controller.nextTrack.bind(this._controller,e,i);return(null==t?void 0:t.track)&&(n=a,i.track=this._prepareSkipTrack(t.track)),(null==t?void 0:t.loggingParams)&&(i.loggingParams=t.loggingParams),this._runOnDevice(e,n,a,{loggingParams:null==t?void 0:t.loggingParams})}smartPreviousTrack(e,t){return this.getCurrentState().then((i=>{if(!i)return Promise.reject(new k(a.HARMONY_NO_TRACKS_LOADED,"No current state."));return(i.disallows||{}).seeking||i.position<3e3&&i.track_window&&i.track_window.previous_tracks&&i.track_window.previous_tracks.length>0?this.previousTrack(e,t):this.seek(0,e)}))}previousTrack(e,t){const i={};let n=()=>this._streamer.previousTrack(d.FORWARD_BUTTON);const a=this._controller.previousTrack.bind(this._controller,e,i);return(null==t?void 0:t.track)&&(n=a,i.track=this._prepareSkipTrack(t.track)),(null==t?void 0:t.loggingParams)&&(i.loggingParams=t.loggingParams),this._runOnDevice(e,n,a,{loggingParams:null==t?void 0:t.loggingParams})}seek(e,t){return this._runOnDevice(t,(()=>this._streamer.seek(e)),this._controller.seek.bind(this._controller,e,t))}seekForward(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,t=arguments.length>1?arguments[1]:void 0;return this._movePosition(e,t)}seekBackward(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,t=arguments.length>1?arguments[1]:void 0;return this._movePosition(-1*e,t)}getVolume(){return this._streamer?this._streamer.getVolume():Promise.resolve(-1)}setVolume(e,t){return this._runOnDevice(t,(()=>this._streamer.setVolume(e)),this._controller.setVolume.bind(this._controller,e),{bypassFakeState:!0})}getVideoProfiles(){if(!this._streamer)throw new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.");return this._streamer.getVideoVariants()}setPreferredBitrate(e){if(!this._streamer)throw new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.");return this._streamer.setPreferredBitrate(e)}getDevices(){return this._controller.getDevices().then(this._parseDeviceList).then((e=>(this._lastDeviceList=e,e)))}setQueue(e,t,i){const n=this._controller.setQueue.bind(this._controller,e,t,i);return this._runOnDevice(i,n,n)}addToQueue(e,t){const i=e.map((e=>"string"==typeof e?e:e.uri));return this._controller.getQueueManager().addToQueue(i,t)}setShuffle(e,t,i){const n=this._controller.setShuffle.bind(this._controller,e,t,i);return this._runOnDevice(t,n,n,{loggingParams:null==i?void 0:i.loggingParams})}toggleShuffle(e,t){const i=this._controller.toggleShuffle.bind(this._controller,e,t);return this._runOnDevice(e,i,i,{loggingParams:null==t?void 0:t.loggingParams})}setRepeatMode(e,t){const i=this._controller.setRepeatMode.bind(this._controller,e,t);return this._runOnDevice(t,i,i)}cycleRepeatMode(e){const t=this._cycleRepeatMode.bind(this,e);return this._runOnDevice(e,t,t)}transfer(e,t){const i=e||m,n=this._controller.transfer.bind(this._controller,i,t);return this._autoActivateElement&&this._activateElement(),this._runOnDevice(i,n,n,{bypassFakeState:!0,loggingParams:null==t?void 0:t.loggingParams})}logout(e){return this._controller.logout(e||m)}activateElement(){return this._streamer?this._streamer.activateElement():Promise.reject(new k(a.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot activate element; local player is disabled."))}getQueueManager(){return this._controller.getQueueManager(((e,t)=>this._runOnDevice(t,e,e)),{reportInactiveQueues:this._claimInactivePlayerStates,onlyLocalQueue:this._onlyLocalState,reportInitial:this._hasFakeState||this._localPlayback})}hideSubtitles(){return this._localPlayback?this._streamer?this._streamer.hideSubtitles():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot hide subtitles on remote player."))}showSubtitles(){return this._localPlayback?this._streamer?this._streamer.showSubtitles():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot show subtitles on remote player."))}areSubtitlesShown(){return this._localPlayback?this._streamer?this._streamer.areSubtitlesShown():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot show subtitles on remote player."))}getSubtitleLanguages(){return this._localPlayback?this._streamer?this._streamer.getSubtitleLanguages():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot get subtitle languages on remote player."))}getActiveSubtitleLanguage(){return this._localPlayback?this._streamer?this._streamer.getActiveSubtitleLanguage():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot get subtitle language on remote player."))}setSubtitleLanguage(e){return this._localPlayback?this._streamer?this._streamer.setSubtitleLanguage(e):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot set subtitle languages on remote player."))}deactivateSubtitleEvents(){return this._localPlayback?this._streamer?this._streamer.activateSubtitleEvents():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot deactivate subtitle events on remote player."))}activateSubtitleEvents(){return this._localPlayback?this._streamer?this._streamer.activateSubtitleEvents():Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot activate subtitle events on remote player."))}setBackgrounded(e){return this._localPlayback?this._streamer?this._streamer.setBackgrounded(e):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot set background mode on remote player."))}setVideoResolution(e){return this._localPlayback?this._streamer?this._streamer.setVideoResolution(e):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot set preferred video resolution on remote player."))}getMediaConfig(){return this._streamer?this._streamer.getMediaConfig():Promise.reject(new k(a.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot activate element; local player is disabled."))}setPlaybackSpeed(e){const t=this._streamer;return t?this.getCurrentState().then((i=>{var n;return"episode"!==(null===(n=null==i?void 0:i.track_window.current_track)||void 0===n?void 0:n.type)?Promise.reject(new k(a.HARMONY_OPERATION_FORBIDDEN,"Cannot change playback speed; content type is not an episode.")):t.setPlaybackSpeed(e)})):Promise.reject(new k(a.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot change speed; local player is disabled."))}}i(99975);var R,A,b=i(8908),C=i(15986),I=i(15277);!function(e){e.FILE_URLS_MP3="file_urls_mp3",e.FILE_URLS_EXTERNAL="file_urls_external",e.FILE_IDS_MP3="file_ids_mp3",e.FILE_IDS_MP4="file_ids_mp4",e.FILE_IDS_MP4_DUAL="file_ids_mp4_dual",e.FILE_IDS_CBCS="file_ids_mp4_cbcs",e.FILE_IDS_MP4FLAC="file_ids_mp4flac",e.MANIFEST_IDS_VIDEO="manifest_ids_video"}(R||(R={})),function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook"}(A||(A={}));i(60178),i(59346),i(45060),i(60252),i(37193),i(12041),i(31266),i(36507),i(55553),i(6127);var L=i(71387);function P(){const e=new Uint8Array(16);crypto.getRandomValues(e);return L.R.toHex(e.join(""),40).slice(0,40)}function D(){const e=new Array(27);let t=e.length;for(;t--;)e[t]=Math.floor(8*Math.random());return L.R.toHex(e.join(""),40)}const O="undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?P:D,F="_spharmony_device_id";const w={get:function(e){if(e&&"string"==typeof e)return e;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return O();let t=localStorage.getItem(F);return t||(t=O(),localStorage.setItem(F,t)),t},generate:O,generateWithCrypto:P,generateWithRandom:D};i(31781);class x extends c.vp{constructor(e){var t;if(super(),this._platformVersion="",this._metadata={},this._manifestPrependOffset=0,!e)throw new TypeError("Invalid argument `options`.");if(!e.id)throw new TypeError("Argument `options.id` is required.");if(!e.name||!e.model||!e.type)throw new TypeError("Incomplete `options` value.");this._id=e.id,this._type=e.type,this._brand=e.brand,this._model=e.model,this._isGroup=!!e.is_group,this._name=e.name,this._platformName=e.platform_name,this._platformIdentifier=e.platform_identifier,this._platformVersion=e.platform_version||"",this._metadata=e.metadata||{},this._capabilities=e.capabilities||{manifest_formats:[]},this._manifestPrependOffset=(null===(t=this._capabilities.manifest_formats)||void 0===t?void 0:t.length)||0}static create(e){return new x({id:w.get(e.id,e.randomizeId),model:e.model||(0,I._)("harmony-{{name}}.{{version}}-{{platform}}").toLowerCase(),name:e.nameTemplate?(0,I._)(e.nameTemplate):e.name||(t=(0,I._)("Spotify ({{name}}/{{platform}})"),t.replace(/\b[a-z]/g,(e=>e.toUpperCase()))),type:e.type||A.COMPUTER,brand:e.brand||"SpotifyHarmonyGeneric",platform_name:e.platform_name,platform_identifier:e.platform_identifier,platform_version:e.platform_version,metadata:e.metadata||{},capabilities:e.capabilities||{},is_group:!!e.is_group});var t}getId(){return this._id}setCapability(e,t){if("manifest_formats"===e)throw new TypeError('Cannot change capability "manifest_formats"');return this._capabilities[e]=t,this.emit("descriptor_changed",{descriptor:this.toJSON()}),!0}getCapability(e){if("manifest_formats"===e)throw new TypeError("Use `descriptor.getManifestFormats()`.");return this._capabilities[e]}setName(e){return this._name=e,this.emit("descriptor_changed",{descriptor:this.toJSON()}),!0}getName(){return this._name}getType(){return this._type}getBrand(){return this._brand}getModel(){return this._model}getPlatformIdentifier(){return this._platformIdentifier||`Partner ${this._brand} ${this._model}`}getPlatformName(){return this._platformName||this.getPlatformIdentifier()}getPlatformVersion(){return this._platformVersion}getManifestFormats(){return this._capabilities.manifest_formats||[]}appendManifestFormat(){const e=this._capabilities.manifest_formats;Array.isArray(e)&&e.push(...arguments)}prependManifestFormat(){const e=this._capabilities.manifest_formats;if(Array.isArray(e)){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.splice(this._manifestPrependOffset,0,...i)}}toJSON(){return{brand:this._brand,capabilities:Object.assign({},this._capabilities),id:this._id,metadata:Object.assign({},this._metadata),model:this._model,name:this._name,platform_name:this._platformName,platform_identifier:this._platformIdentifier,platform_version:this._platformVersion,type:this._type}}toTrackPlaybackDeviceInfo(){return{brand:this._brand,capabilities:Object.assign({},this._capabilities),device_id:this._id,device_type:this._type,metadata:Object.assign({},this._metadata),model:this._model,name:this._name,platform_name:this._platformName,platform_identifier:this._platformIdentifier,is_group:this._isGroup}}}const M={tagged:"4.27.1-af7f4f3",version:"4.27.1",revision:"af7f4f3"};var U=i(5579);class j{constructor(e){this._melodyLogger=new U.Hx(e)}logClientEvent(e,t){return e?this._melodyLogger.sendLog("/v1/msg/batch",{type:"client_event",message:{source:e.source||U.eV.UNKNOWN,context:e.context||U.eV.UNKNOWN,event:e.event||U.eV.UNKNOWN,event_version:e.event_version||U.eV.EMPTY,test_version:e.test_version||U.eV.EMPTY,source_version:e.source_version||U.eV.UNKNOWN,source_vendor:e.source_vendor||U.eV.UNKNOWN,json_data:"json"===t?e.json_data||"{}":JSON.stringify(e.json_data||{})}},{batch:!0}):Promise.reject(new TypeError("Logger.logClientEvent `data` cannot be null."))}logMetrics(e,t){if(!e&&!t)return Promise.resolve(!0);const i=e||[],n=t||[];if(!i.length&&!n.length)return Promise.resolve(!0);if(!Array.isArray(i)||!Array.isArray(n))return Promise.reject(new TypeError("Logger.logMetrics `meters` and `timers` must be null or an array."));for(const a of i)if(!("what"in a)||!("result"in a)||!("reason"in a))return Promise.reject(new TypeError("Logger.logMetrics: Invalid meter format in `meters` array."));for(const a of n)if(!("what"in a)||!("duration"in a))return Promise.reject(new TypeError("Logger.logMetrics: Invalid timer format in `timers` array."));return this._melodyLogger.sendLog("/v1/metric",{sdk_id:void 0,platform:void 0,client_version:void 0,meters:i,timers:n})}logJSSDKError(e,t){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_error",message:{source:e.source||U.eV.UNKNOWN,source_version:e.source_version||U.eV.UNKNOWN,type:e.type||U.eV.UNKNOWN,message:e.message||U.eV.EMPTY,stack:JSON.stringify(e.stack||U.eV.EMPTY),json_data:"json"===t?e.json_data||"{}":JSON.stringify(e.json_data||{}),json_data_version:e.json_data_version||U.eV.EMPTY_VERSION}},{batch:!0})}logJSSDKContentRequest(e){var t;return this._melodyLogger.sendLog("/v1/msg/jssdk_content_request",{source:e.source||U.eV.UNKNOWN,type:e.type||U.eV.UNKNOWN,http_status:null!==(t=e.http_status)&&void 0!==t?t:void 0,ms_request_duration:e.ms_request_duration||U.eV.EMPTY,n_retries:e.n_retries||U.eV.ZERO,playback_id:e.playback_id||U.eV.EMPTY})}}const B=b.P.forTag("harmonyclient"),G=/^[a-zA-Z0-9_%:-]{1,40}$/;class V extends c.vp{constructor(e){if(super(),this._platformIdentifier=(0,u.$)(),this._platformVersion=(0,u.$)(),!e)throw new TypeError("Argument `options` is not defined.");if(!e.transport)throw new TypeError("No Transport instance provided");if(!e.transport.hasPlugin("dealer"))throw new TypeError("Transport has no Dealer plugin.");this._transport=e.transport,this._deviceDescriptor=this._initDeviceDescriptor(e),this._logger=new j({transport:this._transport.toPublic(),sdkId:this.getSDKId(),platform:this._platformIdentifier.promise,clientVersion:this._platformVersion.promise}),this._productStateObserver=C.A.create({transport:this._transport}),this._onConnected=this._onConnected.bind(this),this._onAuthenticated=this._onAuthenticated.bind(this),this._onConnectionError=this._onConnectionError.bind(this),this._onAuthenticationError=this._onAuthenticationError.bind(this),this._onShortSessionDisconnect=this._onShortSessionDisconnect.bind(this),this._attachListeners()}static create(e){return new V(e)}static of(e){return e._client}_createDeviceDescriptor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,n;if((null==t?void 0:t.id)&&!G.test(t.id))throw k.fatal(a.HARMONY_INVALID_DESCRIPTOR_ID,"Invalid device id.");const s=t.capabilities||{},r={change_volume:null===(i=s.change_volume)||void 0===i||i,endsong_snooping:s.endsong_snooping,enable_play_token:!0,supports_file_media_type:!0,play_token_lost_behavior:e.playTokenLostBehavior||"pause",disable_connect:!!e.hidden,audio_podcasts:null===(n=s.audio_podcasts)||void 0===n||n,video_playback:s.video_playback,lossless_playback:s.lossless_playback,volume_steps:void 0!==s.volume_steps&&s.volume_steps>=0&&s.volume_steps<_?s.volume_steps:void 0,manifest_formats:[R.FILE_IDS_MP3,R.FILE_URLS_MP3]},o=x.create(Object.assign(Object.assign({},t),{capabilities:r}));return this._platformIdentifier.resolve(o.getPlatformIdentifier()),this._platformVersion.resolve(o.getPlatformVersion()),this.proxyEmit(o,"descriptor_changed","descriptor_changed"),o}_initDeviceDescriptor(e){return Promise.resolve(e.descriptor).then(this._createDeviceDescriptor.bind(this,e)).catch((e=>(this._onError(p.HARMONY,{error:e}),Promise.reject(e))))}_attachListeners(){const e=this._transport;e.on(o.TransportEvent.CONNECTED,this._onConnected),e.on(o.TransportEvent.AUTHENTICATED,this._onAuthenticated),e.on(o.TransportEvent.CONNECTION_FAILED,this._onConnectionError),e.on(o.TransportEvent.AUTHENTICATION_FAILED,this._onAuthenticationError),this.proxyEmit(e,o.TransportEvent.RECONNECTING,"reconnecting"),this.proxyEmit(e,o.TransportEvent.RECONNECTED,"reconnected"),this.proxyEmit(e,o.TransportEvent.LOGGED_OUT,"logged_out"),this.proxyEmitSync(e,o.TransportEvent.BEFORE_OFFLINE_DISCONNECT,"before_offline_disconnect"),this.proxyEmitSync(e,o.TransportEvent.BEFORE_ONLINE_DISCONNECT,"before_disconnect"),e.on(o.TransportEvent.SHORT_SESSION_DISCONNECTED,this._onShortSessionDisconnect.bind(this)),this.proxyEmit(this._productStateObserver,o.TransportEvent.PRODUCT_STATE_CHANGED,"product_state_changed"),this.on("before_disconnect",(e=>{const t=this._productStateObserver.deregister().catch((()=>{}));e.data.awaitPromise(t)}))}_onError(e,t){this.emit("error",{source:e,error:t.error}),t.error&&t.error.unrecoverable&&this.emit("unrecoverable_failure",{source:e,error:t.error})}_onConnected(){this.emit("connected",null)}_onAuthenticated(){this.emit("authenticated",null)}_onConnectionError(e){this._onError(p.TRANSPORT,{error:e.data.error}),this.emit("connection_error",e.data)}_onAuthenticationError(e){this._onError(p.TRANSPORT,{error:e.data.error}),this.emit("authentication_error",e.data)}_onShortSessionDisconnect(e){this._logger.logClientEvent({source:"transport",source_version:M.tagged,source_vendor:"spotify",event:e.type,event_version:"1.0.0",json_data:{disconnectCount:e.data.disconnectCount,sessionLength:e.data.sessionLength}},"object").catch((t=>B.warn(`${e.type} Logging Error:`,t)))}getVersionDescriptor(){return Object.assign({},M)}getSDKId(){return`harmony:${M.tagged}`}getUntaggedSDKId(){return`harmony:${M.version}`}getPlatformIdentifier(){return this._platformIdentifier.promise}getPlatformVersion(){return this._platformVersion.promise}getLogger(){return this._logger}logAppMetrics(e,t){if(!this._logger)throw new TypeError("Invalid logger instance");return this._logger.logMetrics(e,t)}request(e,t){return this._transport.request(e,t)}getPublicTransport(){return this._transport.toPublic()}getClientDescriptor(){return this._deviceDescriptor.then((e=>e.toJSON()))}getDeviceDescriptor(){return this._deviceDescriptor}getUserInfo(){return this._transport.request("@webapi/v1/me",{responseType:"json"}).then((e=>{const t=e.body;if(200!==e.status){const t=new k(a.USER_INFO_REQUEST_FAILED_WITH_STATUS,`User info request failed with status ${e.status}`);return t.status=e.status,Promise.reject(t)}return t?{display_name:t.display_name,followers:t.followers,id:t.id,images:t.images,uri:t.uri}:Promise.reject(new k(a.USER_INFO_REQUEST_EMPTY_RESPONSE,"Unexpected empty response."))}))}getProductState(){return this._productStateObserver.getCurrentState()}setName(e){return this._deviceDescriptor.then((function(t){return t.setName(e)}))}setNameTemplate(e){return this.setName((0,I._)(e))}setCapability(e,t){return this._deviceDescriptor.then((i=>i.setCapability(e,t)))}notifyError(e,t){this._onError(e,{error:t})}}var Y,K,H,W,q,Q=i(83668),$=(i(70238),i(45880),i(51492));!function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAY="play",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.MEDIA_RATECHANGE="ratechange",e.MEDIA_RESIZE="resize",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_STALLED="stalled",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.FRAGMENT_APPENDED="fragment_appended",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LIST_PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAY="play",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_SEEKING="seeking",e.PLAYER_FRAGMENT_FETCHED="fragment_fetched",e.PLAYER_FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.PLAYER_VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.PLAYER_VIDEO_RESIZED="resize",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(Y||(Y={})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(K||(K={})),function(e){e.SUCCESS="RESULT_SUCCESS",e.INVALID="RESULT_INVALID",e.FORBIDDEN="RESULT_FORBIDDEN",e.OUT_OF_BOUNDS="RESULT_OUT_OF_BOUNDS",e.NO_LIST="RESULT_NO_LIST",e.NO_TRACK="RESULT_NO_TRACK",e.LIST_END="RESULT_LIST_END",e.INVALID_TRACK="RESULT_INVALID_TRACK",e.CANCELLED="CANCELLED",e.NO_TRACK_PLAYER="NO_TRACK_PLAYER"}(H||(H={})),function(e){e.MP3="MP3",e.MP4="MP4",e.MP4_DUAL="MP4_DUAL",e.MP4_CBCS="MP4_CBCS",e.MP4_FLAC="MP4_FLAC",e.MANIFEST_ID="MANIFEST_ID"}(W||(W={})),function(e){e.FRAGMENT_FETCHED="fragment_fetched",e.FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.VIDEO_PROFILE_CHANGED="video_profile",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded"}(q||(q={}));class z extends Error{constructor(e,t){super(t),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.code=e,this.message=t,this.name="PlaybackError"}static fatal(e,t){const i=new z(e,t);return i.unrecoverable=!0,i}}class Z extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.STORAGE_ERROR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"File Error";super(t),this.canPlayNext=!0,this.debug={},this.code=e,this.message=t,this.name="FileError"}}i(30848),i(86554);class X extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.EME_ERROR_UNKNOWN,t=arguments.length>1?arguments[1]:void 0;super(t),this.status=-1,this.licenseServer="",this.shouldRefreshEndpoint=!1,this.unrecoverable=!1,this.debug={},this.code=e,this.message=t,this.name="EMEError"}static fatal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.EME_ERROR_UNKNOWN;const t=new X(e,arguments.length>1?arguments[1]:void 0);return t.unrecoverable=!0,t}}class J extends Error{constructor(e,t){super(t),this.name="CappingError",this.message=t,this.code=e}}function ee(e){const t=document.createEvent("Event");t.initEvent("encrypted",!1,!1),t.initDataType="cenc",t.initData=e.initData,t.fromPolyfill=!0,this.dispatchEvent(t)}class te extends c.B{constructor(e){super(Y.KEY_SESSION_MESSAGE,null),this.messageType="license-request",this.message=e}}class ie extends c.vp{constructor(e){super(),this._nativeKeySession=null,this._lastUpdateDeferred=(0,u.$)(),this._lastGenerateDeferred=(0,u.$)(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){const e=this._nativeKeySession;e&&(e.addEventListener(Y.MS_KEY_ADDED,this._onKeyAdded),e.addEventListener(Y.MS_KEY_ERROR,this._onKeyError),e.addEventListener(Y.MS_KEY_MESSAGE,this._onKeyMessage))}_detach(){const e=this._nativeKeySession;e&&(e.removeEventListener(Y.MS_KEY_ADDED,this._onKeyAdded),e.removeEventListener(Y.MS_KEY_ERROR,this._onKeyError),e.removeEventListener(Y.MS_KEY_MESSAGE,this._onKeyMessage))}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new te(e.message.buffer)),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null))}_onKeyAdded(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null),this.emit(Y.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error;this._lastGenerateDeferred&&(this._lastGenerateDeferred.reject(e),this._lastGenerateDeferred=null),this._lastUpdateDeferred&&(this._lastUpdateDeferred.reject(e),this._lastUpdateDeferred=null),this.emit(Y.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return new Promise(((e,i)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=e,this._lastGenerateDeferred.reject=i),this._nativeKeySession=this._nativeMediaKeys.createSession("audio/mp4",new Uint8Array(t),null),this._attach()}))}update(e){return new Promise(((t,i)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=t,this._lastGenerateDeferred.reject=i),this._nativeKeySession&&this._nativeKeySession.update(new Uint8Array(e))}))}close(){return new Promise((e=>{this._nativeKeySession&&this._nativeKeySession.close(),this._detach(),e(!0)}))}}class ne{constructor(e){this._lastBoundSetter=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new MSMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.msSetMediaKeys(this._nativeMediaKeys),void t();const i=()=>{e.removeEventListener(Y.MEDIA_LOADEDMETADATA,i),this._lastBoundSetter=null,e.msSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=i,e.addEventListener(Y.MEDIA_LOADEDMETADATA,i),e.addEventListener(Y.MS_NEEDKEY,ee),t()}))}detach(e){this._lastBoundSetter&&(e.removeEventListener(Y.MS_NEEDKEY,ee),e.removeEventListener(Y.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(){return Promise.reject(new X(n.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){return new ie(this._nativeMediaKeys)}}function ae(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class se{constructor(e,t){if(this._configuration=null,this.keySystem=e,!this._checkConfig(t))throw new X(n.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){var t,i;const n=this.keySystem;for(const a of e){const e={initDataTypes:a.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:a.label};let s;if(a.audioCapabilities&&a.audioCapabilities.length&&e.audioCapabilities){s=!1;for(const i of a.audioCapabilities){const a=null===(t=i.contentType)||void 0===t?void 0:t.split(";")[0];MSMediaKeys.isTypeSupported(n,a)&&(e.audioCapabilities.push(i),s=!0)}}if(a.videoCapabilities&&a.videoCapabilities.length&&e.videoCapabilities){s=!1;for(const t of a.videoCapabilities){const a=null===(i=t.contentType)||void 0===i?void 0:i.split(";")[0];MSMediaKeys.isTypeSupported(n,a)&&(e.videoCapabilities.push(t),s=!0)}}if(s)return this._configuration=e,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new ne(this.keySystem))}))}}const re=b.P.forTag("eme_polyfill.v0_1b");class oe extends c.vp{constructor(e,t,i){super(),this._mediaElement=null,this._lastUpdateDeferred=null,this._lastGenerateResolver=null,this.sessionId=null,this._keySystem=e,this._mediaElement=t,this._prefix=i,this.addEventListener=this.addListener,this.removeEventListener=this.removeListener}_addPrefix(e){return this._prefix?this._prefix+e.replace(/\b[a-z]/,(function(e){return e.toUpperCase()})):e}generateComplete(e){this.emitEvent(new te(e)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null)}updateComplete(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this.emit(Y.KEY_SESSION_STATUSES_CHANGE,null)}handleErrorEvent(e){const t=new X(n.EME_MEDIA_KEY_SESSION_V0_1B_ERROR,"MediaKeySession v0.1b Error");t.debug.errorCode=e.errorCode,t.debug.systemCode=e.systemCode,!e.sessionId&&this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):e.sessionId&&this._lastUpdateDeferred?(this._lastUpdateDeferred.reject(t),this._lastUpdateDeferred=null):this.emit(Y.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return this._mediaElement?new Promise(((e,i)=>{this._lastGenerateResolver={resolve:e,reject:i};try{this._mediaElement[this._addPrefix("generateKeyRequest")](this._keySystem,new Uint8Array(t))}catch(n){i(n),this._lastGenerateResolver=null}})):Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."))}update(e){if(!this._mediaElement)return Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."));if(this._lastUpdateDeferred){const t=this.update.bind(this,e);return this._lastUpdateDeferred.promise.then(t,t)}const t=(0,u.$)();this._lastUpdateDeferred=t;try{this._mediaElement[this._addPrefix("addKey")](this._keySystem,new Uint8Array(e),null,this.sessionId)}catch(i){t.reject(i),this._lastUpdateDeferred=null}return t.promise}close(){if(this.sessionId&&this._mediaElement)try{this._mediaElement[this._addPrefix("cancelKeyRequest")](this._keySystem,this.sessionId)}catch(e){re.warn("Could not close keysession",e)}return Promise.resolve(!0)}}class le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._mediaElement=null,this._waitingForSessionIds=[],this._sessionMap={},this.shouldRefreshPerTrack=!0,this._keySystem=e,this._prefix=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}attach(e){this._mediaElement=e;const t=this._prefix;e.addEventListener(t+Y.V0_1B_NEEDKEY,ee);const i=e.addEventListener.bind(e);i(t+Y.V0_1B_KEY_ADDED,this._onKeyAdded),i(t+Y.V0_1B_KEY_ERROR,this._onKeyError),i(t+Y.V0_1B_KEY_MESSAGE,this._onKeyMessage)}detach(e){this._mediaElement=null;const t=this._prefix;e.removeEventListener(t+Y.V0_1B_NEEDKEY,ee);const i=e.removeEventListener.bind(e);i(t+Y.V0_1B_KEY_ADDED,this._onKeyAdded),i(t+Y.V0_1B_KEY_ERROR,this._onKeyError),i(t+Y.V0_1B_KEY_MESSAGE,this._onKeyMessage)}_getSession(e){const t=this._sessionMap[e];if(t)return t;const i=this._waitingForSessionIds.shift();return i?(i.sessionId=e,this._sessionMap[e]=i,i):null}_onKeyMessage(e){const t=this._getSession(e.sessionId);t?t.generateComplete(e.message):re.warn("Got keymessage without session.")}_onKeyAdded(e){const t=this._getSession(e.sessionId);t?t.updateComplete():re.warn("Got keyadded without session.")}_onKeyError(e){const t=this._getSession(e.sessionId);t?t.handleErrorEvent(e):re.warn("Got keyerror without session.")}setServerCertificate(){return Promise.reject(new X(n.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){const e=new oe(this._keySystem,this._mediaElement,this._prefix);return this._waitingForSessionIds.push(e),e}}function de(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class ce{constructor(e,t,i){if(this._configuration=null,this.keySystem=e,this._prefix=i,!this._checkConfig(t))throw new X(n.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){var t,i;const n=this.keySystem,a=document.createElement("video");for(const s of e){const e={initDataTypes:s.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:s.label};let r=!1;if(s.audioCapabilities&&s.audioCapabilities.length&&e.audioCapabilities){r=!1;for(const i of s.audioCapabilities){const s=null===(t=i.contentType)||void 0===t?void 0:t.split(";")[0];s&&a.canPlayType(s,n)&&(e.audioCapabilities.push(i),r=!0)}}if(s.videoCapabilities&&s.videoCapabilities.length&&e.videoCapabilities){r=!1;for(const t of s.videoCapabilities){const s=null===(i=t.contentType)||void 0===i?void 0:i.split(";")[0];s&&a.canPlayType(s,n)&&(e.videoCapabilities.push(t),r=!0)}}if(r)return this._configuration=e,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new le(this.keySystem,this._prefix))}))}}function ue(e){navigator.requestMediaKeySystemAccess=function(t,i){return new Promise((n=>{n(new ce(t,i,e))}))};const t=HTMLMediaElement.prototype;delete t.mediaKeys,t.setMediaKeys=de}const me=b.P.forTag("eme_polyfill.safari");class _e extends c.vp{constructor(e,t){super(),this._attached=!1,this._nativeKeySession=null,this._lastGenerateResolver=(0,u.$)(),this._lastUpdateResolver=(0,u.$)(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._serverCertificate=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){if(this._attached)return;const e=this._nativeKeySession;e?(e.addEventListener(Y.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.addEventListener(Y.WEBKIT_KEY_ADDED,this._onKeyAdded),e.addEventListener(Y.WEBKIT_KEY_ERROR,this._onKeyError)):me.warn("Tried to attach with no WebKitMediaKeySession")}_detach(){if(!this._attached)return;const e=this._nativeKeySession;e?(e.removeEventListener(Y.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.removeEventListener(Y.WEBKIT_KEY_ADDED,this._onKeyAdded),e.removeEventListener(Y.WEBKIT_KEY_ERROR,this._onKeyError)):me.warn("Tried to detach with no WebKitMediaKeySession")}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new te(e.message.buffer)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null))}_onKeyAdded(){this._lastUpdateResolver&&(this._lastUpdateResolver.resolve(!0),this._lastUpdateResolver=null),this.emit(Y.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error,t=new X(n.EME_MEDIA_KEY_SESSION_SAFARI_ERROR,e&&e.message||"MediaKeySession Safari Error");e&&(t.debug.errorCode=e.code,t.debug.systemCode=e.systemCode),this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):this._lastUpdateResolver&&(this._lastUpdateResolver.reject(t),this._lastUpdateResolver=null)}_rebuildInitData(e){const t=new Uint8Array(e);if(new DataView(t.buffer).getUint32(0,!0)+4!==t.byteLength)throw new X(n.EME_INIT_DATA_MALFORMED,"Malformed init data");const i=function(e){const t=Math.floor(e.byteLength/2),i=new Uint16Array(t),n=new DataView(e.buffer);for(let a=0;a<t;a++)i[a]=n.getUint16(2*a,!0);return String.fromCharCode.apply(null,i)}(t.slice(4)),a=i.match(/^skd:\/\/([0-9a-fA-F]+)/);if(!(null==a?void 0:a[1]))throw new X(n.EME_INIT_DATA_MALFORMED,"Invalid content ID");const s=a[1],r=new Uint8Array(function(e){const t=new Uint8Array(2*e.length),i=new DataView(t.buffer),n=e.split("");for(let a=0,s=n.length;a<s;a++){const e=n[a].charCodeAt(0);i.setUint16(2*a,e,!0)}return t.buffer}(s)),o=this._serverCertificate,l=new Uint8Array(t.byteLength+4+r.byteLength+4+o.byteLength);let d=0;l.set(t,d),d+=t.byteLength;const c=new DataView(l.buffer);return c.setUint32(d,r.byteLength,!0),d+=4,l.set(r,d),d+=r.byteLength,c.setUint32(d,o.byteLength,!0),d+=4,l.set(o,d),l}generateRequest(e,t){return new Promise(((e,i)=>{this._lastGenerateResolver={resolve:e,reject:i};try{const e=this._rebuildInitData(t);this._nativeKeySession=this._nativeMediaKeys.createSession("video/mp4",new Uint8Array(e),null),this._attach()}catch(n){this._lastGenerateResolver=null,i(n)}}))}update(e){const t=(0,u.$)();if(this._lastUpdateResolver=t,!this._nativeKeySession)return me.warn("Tried to update with no WebKitMediaKeySession"),t.promise;try{this._nativeKeySession.update(new Uint8Array(e))}catch(i){t.reject(i)}return t.promise}close(){return new Promise((e=>{this._detach(),e(!0)}))}}class he{constructor(e){this._lastBoundSetter=null,this._serverCertificate=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new WebKitMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.webkitSetMediaKeys(this._nativeMediaKeys),void t();const i=()=>{e.removeEventListener(Y.MEDIA_LOADEDMETADATA,i),this._lastBoundSetter=null,e.webkitSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=i,e.addEventListener(Y.MEDIA_LOADEDMETADATA,i),e.addEventListener(Y.WEBKIT_NEEDKEY,ee),t()}))}detach(e){e.removeEventListener(Y.WEBKIT_NEEDKEY,ee),this._lastBoundSetter&&(e.removeEventListener(Y.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(e){return this._serverCertificate=new Uint8Array(e),Promise.resolve(!0)}createSession(){if(!this._serverCertificate)throw new X(n.EME_INVALID_STATE_ERROR,"The server certificate is not available");return new _e(this._nativeMediaKeys,this._serverCertificate)}}class pe{constructor(e,t){this.keySystem=e;const i=this._checkConfig(t);if(!i)throw new X(n.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations");this._configuration=i}_checkConfig(e){const t=this.keySystem;let i=!1;for(const n of e){const e={initDataTypes:n.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"]};if(n.audioCapabilities)for(const a of n.audioCapabilities){if(!a.contentType)continue;const n=a.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,n)&&(e.audioCapabilities.push(a),i=!0)}if(n.videoCapabilities)for(const a of n.videoCapabilities){if(!a.contentType)continue;const n=a.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,n)&&(e.videoCapabilities.push(a),i=!0)}if(i)return e}return null}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new he(this.keySystem))}))}}function ve(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e?e.attach(this):Promise.resolve()}const ke=b.P.forTag("eme_polyfills.tester");function ge(){return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.requestMediaKeySystemAccess)&&"undefined"==typeof WebKitMediaKeys&&"undefined"!=typeof MediaKeySystemAccess&&(null===MediaKeySystemAccess||void 0===MediaKeySystemAccess?void 0:MediaKeySystemAccess.prototype.getConfiguration)?(ke.log("Using native EME implementation."),"native"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.webkitGenerateKeyRequest)?(ke.log('Detected "webkit" Prefixed EME v0.1b. Polyfilling.'),ue("webkit"),"v0.1b-webkit"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.generateKeyRequest)?(ke.log("Detected Unprefixed EME v0.1b. Polyfilling."),ue(),"v0.1b"):"undefined"!=typeof MSMediaKeys?(ke.log("Detected MS IE EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((i=>{i(new se(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=ae}(),"ms-ie"):"function"==typeof WebKitMediaKeys?(ke.log("Detected Safari EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((i=>{i(new pe(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=ve}(),"safari"):(ke.warn("Detected no EME APIs."),null)}const Ee={[K.WIDEVINE]:{commonName:"widevine",licenseServer:"https://@webgate/widevine-license",withCertificate:!0,pssh_field:{audio:"pssh_widevine",video:"encryption_data"}},[K.PLAYREADY]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[K.PLAYREADY_HARDWARE]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[K.FAIRPLAY]:{commonName:"fairplay",licenseServer:"https://@webgate/fairplay-license",withCertificate:!0,pssh_field:{audio:"pssh_fairplay",video:"asset_id"}},[K.INVALID_SPOTIFY_KEY]:{commonName:"spotify-invalid",licenseServer:"https://@webgate",withCertificate:!1,pssh_field:{audio:"pssh_invalid",video:"encryption_data"}}},Se=[{label:"video-sw-decode",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_DECODE"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:""},{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:""},{contentType:'video/webm; codecs="vp8"',robustness:""},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:""},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:""}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}];function ye(e,t){var i,n;for(const a of e){const e={audioCapabilities:[],videoCapabilities:[]};let s,r=!1;if(null===(i=a.audioCapabilities)||void 0===i?void 0:i.length){r=!1;for(const i of a.audioCapabilities)s=i.contentType,s&&t(s)&&(e.audioCapabilities.push(i),r=!0)}if(null===(n=a.videoCapabilities)||void 0===n?void 0:n.length){r=!1;for(const i of a.videoCapabilities)s=i.contentType,s&&t(s)&&(e.videoCapabilities.push(i),r=!0)}if(r)return e}return null}const fe=/([^;]+)(?:;\s?codecs="(.*)")?/;function Ne(e){var t;const[,i="unknown",n="unknown"]=null!==(t=e.match(fe))&&void 0!==t?t:[];return{mimeType:i,codec:n,contentType:e}}const Te=/([^;]+)(?:;\s?codecs="(.*)")?/,Re=b.P.forTag("playback.eme_manager"),Ae={EMPTY:"-no-robustness",SW_CRYPTO:"-sw-crypto",SW_DECODE:"-sw-decode",HW_CRYPTO:"-hw-crypto",HW_DECODE:"-hw-decode",HW_ALL:"-hw-all"};function be(e,t){var i;const n=[],a=new RegExp(`codecs="(${t.join("|")})"`);for(const s of e)a.test(null!==(i=s.contentType)&&void 0!==i?i:"")||n.push(s);return n.length?n:null}function Ce(e,t){let{audio:i,video:n}=t;var a,s,r,o;if(!(null==i?void 0:i.length)&&!(null==n?void 0:n.length))return e;let{audioCapabilities:l,videoCapabilities:d}=e;return(null==i?void 0:i.length)&&(null===(a=e.audioCapabilities)||void 0===a?void 0:a.length)&&(l=null!==(s=be(e.audioCapabilities,i))&&void 0!==s?s:void 0,!l)||(null==n?void 0:n.length)&&(null===(r=e.videoCapabilities)||void 0===r?void 0:r.length)&&(d=null!==(o=be(e.videoCapabilities,n))&&void 0!==o?o:void 0,!d)?null:Object.assign(Object.assign({},e),{audioCapabilities:l,videoCapabilities:d})}class Ie extends c.vp{constructor(e){var t;super(),this._unauthServerCertificateBase="",this._disallowCodecs={},this._keySystemDeferred=(0,u.$)(),this._configuration=(0,u.$)(),this._keySystemSettings=null,this._keySessions=[],this._configs=[],this._pendingCertificateRequest=null,this._certificate=null,this._transport=e.transport,this._emeImpl=e.emeImpl,this._noServerCertificate=!!e.noServerCertificate,this._precacheServerCertificate=null===(t=e.precacheServerCertificate)||void 0===t||t,this._unauthServerCertificateBase=e.unauthServerCertificateBase||"https://spclient.wg.spotify.com",this._configFilter=function(e){const t=["--ensure-no-match--"];if(null==e?void 0:e.length){let i=e.length;for(;i--;){const n=e[i];n&&Ae.hasOwnProperty(n)&&t.push(Ae[n])}}return new RegExp(`(${t.join("|")})$`)}(e.disallowRobustnessValues||[]),this._disallowCodecs=e.disallowCodecs,this._preferredKeySystems=e.preferredKeySystems||[K.WIDEVINE,K.PLAYREADY,K.PLAYREADY_HARDWARE,K.FAIRPLAY]}static create(e){return new Promise((t=>{const i=ge();if(!i)throw X.fatal(n.EME_API_NOT_SUPPORTED,"Platform does not support navigator.requestMediaKeySystemAccess");t(new Ie(Object.assign(Object.assign({},e),{emeImpl:i})).init())}))}_prepareConfiguration(e){const t=e.getConfiguration();Re.info("KeySystem configured as ",t.label),t.audioCapabilities&&t.audioCapabilities.length||this._appendProbableMediaCapabilities(e.keySystem,t);const i={keySystem:e.keySystem,keySystemImpl:this._emeImpl,audioFormats:this._parseCapabilities(t.audioCapabilities),videoFormats:this._parseCapabilities(t.videoCapabilities)};return this._keySystemSettings=Ee[e.keySystem],this._configuration.resolve(i),i}_parseCapabilities(e){var t;if(!e)return[];const i=[];for(const n of e){if(!(null==n?void 0:n.contentType))continue;const[,e,a]=null!==(t=n.contentType.match(Te))&&void 0!==t?t:[];e&&i.push({contentType:n.contentType,mimeType:e,codec:null!=a?a:""})}return i}_appendProbableMediaCapabilities(e,t){const i=ye(this._configs,(t=>(-1===t.indexOf("webm")||e!==K.PLAYREADY&&e!==K.PLAYREADY_HARDWARE)&&!!MediaSource.isTypeSupported(t)));i&&(t.audioCapabilities=i.audioCapabilities,t.videoCapabilities=i.videoCapabilities)}_trySetServerCertificate(e,t){const i=this._certificate;return(i&&i.expiry>Date.now()?Promise.resolve(i):this._requestServerCertificate(e)).then((e=>t.setServerCertificate(e.contents))).then((()=>this)).catch((e=>(Re.warn("Error from setting server certificate",e),this)))}_cacheServerCertificate(e){let t="";switch(e){case K.FAIRPLAY:t="fairplay";break;case K.WIDEVINE:t="widevine";break;default:return Promise.resolve(this)}return this._requestServerCertificate(`${this._unauthServerCertificateBase}/${t}-license`,!1).then((()=>this),(e=>(Re.warn("Cannot precache server certificate",e),this)))}_requestServerCertificate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._pendingCertificateRequest)return this._pendingCertificateRequest;return this._transport.request(`${e}/v1/application-certificate`,{authorize:t,responseType:"arraybuffer",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()===t.SERVER_ERROR}}).then((e=>{var t;if(!e.body)throw new TypeError("Response body is invalid");this._pendingCertificateRequest=null;let i=3600;const n=null===(t=e.headers)||void 0===t?void 0:t.get("cache-control");if(n){const e=n.match(/(?:^|,|\s)max-age=(\d+)(?:,|$)/);e&&e[1]&&(i=1e3*parseInt(e[1],10))}return this._certificate={expiry:Date.now()+(i-600),contents:e.body},this._certificate}))}_extractPlayReadyChallenge(e,t){var i;let a=null;const s=new Uint16Array(e),r=String.fromCharCode.apply(null,s);if(-1===r.indexOf("PlayReadyKeyMessage"))return Re.info("Using unextracted PlayReady message."),e;const o=(new DOMParser).parseFromString(r,"application/xml"),l=o.getElementsByTagName("Challenge")[0],d=null===(i=null==l?void 0:l.childNodes[0])||void 0===i?void 0:i.nodeValue;if(d)try{a=atob(d);const e=o.getElementsByTagName("name"),t=o.getElementsByTagName("value");if(e.length!==t.length)throw new X(n.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")}catch(c){this.emit(Y.EME_LICENSE_REQUEST_ERROR,{signal:t,error:c}),a=null}else this.emit(Y.EME_LICENSE_REQUEST_ERROR,{signal:t,error:new X(n.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")});return a}_onMessage(e,t){e.timeMap.generate.end=Date.now();let i="message"in t?t.message:null;const n="messageType"in t?t.messageType:void 0;if(Re.info("Got EME message event with type",n),i&&e.keySystem===K.PLAYREADY&&(i=this._extractPlayReadyChallenge(i,e.signal)),!i)return void Re.info("Ignoring message event: no valid request payload");if(!e.licenseServer)return void Re.info("Ignoring message event: no licenseServer url");e.timeMap.request.start=Date.now();let a=e.licenseServer;e.keySystem===K.FAIRPLAY&&(a=`${a}${-1!==a.indexOf("?")?"&":"?"}assetId=hex`),this._transport.request(a,{method:"POST",payload:i,responseType:"arraybuffer",retry:{condition:(e,t)=>400!==e.status&&402!==e.status&&403!==e.status&&(!e.body||e.getStatusFamily()!==t.SUCCESS)}}).then(this._handleLicenseResponse.bind(this,e))}_handleLicenseResponse(e,t){const i=t=>{e.licenseServer&&(t.licenseServer=e.licenseServer),this.emit(Y.EME_LICENSE_REQUEST_ERROR,{signal:e.signal,error:t})};let a,s;if(e.timeMap.request.end=Date.now(),200!==t.status){try{if(t.body){const e=new Uint8Array(t.body),i=String.fromCharCode.apply(String,e);s=JSON.parse(i).errorMsg}}catch(r){}402===t.status?this.emit(Y.EME_LICENSE_REQUEST_CAPPED,{signal:e.signal,error:new J(n.CAPPING_USER_IS_CAPPED,"User is capped.")}):400===t.status&&"widevine error"===s?(a=X.fatal(n.EME_LICENSE_REQUEST_WIDEVINE_ERROR,"Widevine license server failed to parse request."),a.status=t.status,a.shouldRefreshEndpoint=!0,i(a)):(a=new X(n.EME_LICENSE_REQUEST_FAILED_WITH_STATUS,`License request failed (${s||"unknown"})`),a.status=t.status,a.shouldRefreshEndpoint=400===t.status||403===t.status,i(a))}else{if(!t.body)return a=new X(n.EME_LICENSE_REQUEST_EMPTY_RESPONSE,"Empty license response body"),a.status=t.status,void i(a);try{e.timeMap.update.start=Date.now(),e.keySession.update(t.body).catch((e=>{i(new X(n.EME_LICENSE_UPDATE_FAILED,e.message||"License update failed."))})),Re.info("KeySession updated.")}catch(o){const{message:e}=o;i(new X(n.EME_LICENSE_UPDATE_FAILED,e||"License update failed."))}}}_selectKeySystem(e){const t=this._preferredKeySystems;for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n&&n in e)return e[n]}return null}_testMediaKeys(e){return new Promise((t=>{t(e.createMediaKeys())})).then((t=>{if(!t)return Promise.reject(X.fatal(n.EME_MEDIA_KEYS_NOT_SUPPORTED,"Cannot create MediaKeys from KeySystemAccess"));e.keySystem===K.FAIRPLAY&&t.setServerCertificate(new ArrayBuffer(0));try{if(!t.createSession())throw new Error("")}catch(i){const{message:e}=i;return Promise.reject(X.fatal(n.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED,e||"Cannot create MediaKeySession from KeySystemAccess"))}return Promise.resolve(e)}),(e=>(Re.error(e.name),Promise.reject(X.fatal(n.EME_MEDIA_KEYS_NOT_SUPPORTED,e.message||"Unknown error")))))}_saveSession(e){this._keySessions.push(e)}destroySessions(){const e=[],t=this._keySessions;for(const n of t)try{const t=n.keySession;if(!t)continue;n.onMessageListener&&t.removeEventListener(Y.KEY_SESSION_MESSAGE,n.onMessageListener),n.onKeyStatusChangeListener&&t.removeEventListener(Y.KEY_SESSION_STATUSES_CHANGE,n.onKeyStatusChangeListener);const i=Promise.resolve(t.close()).catch((e=>{Re.warn("Failed to close KeySession",e)}));e.push(i),n.keySession=null,n.onMessageListener=null,n.onKeyStatusChangeListener=null,Re.info("Closed KeySession")}catch(i){Re.warn("Failed to close KeySession",i)}return this._keySessions=[],Promise.all(e)}init(){const e=this._keySystemDeferred,t={},i=[],a=[];for(let n of Se)if(!n.label||!this._configFilter.test(n.label)){if(this._disallowCodecs){const e=Ce(n,this._disallowCodecs);if(!e)continue;n=e}a.push(n)}this._configs=a;for(const n in K){if(!Object.prototype.hasOwnProperty.call(K,n))continue;const e=n;i.push(navigator.requestMediaKeySystemAccess(K[e],a).then((e=>{t[e.keySystem]=e})).catch((()=>{})))}return Promise.all(i).then(this._selectKeySystem.bind(this,t)).then((e=>e?this._testMediaKeys(e):Promise.reject(new X(n.EME_NO_SUPPORTED_KEYSYSTEM,"No supported keysystem was found.")))).then((t=>(this._prepareConfiguration(t),e.resolve(t),this._precacheServerCertificate?this._cacheServerCertificate(t.keySystem):this))).catch((t=>{const i=t.code||n.EME_NO_SUPPORTED_KEYSYSTEM,a=t.message||"No supported keysystem";return e.reject(X.fatal(i,a)),e.promise.then((()=>this))}))}createMediaKeys(e){return this._keySystemDeferred.promise.then((e=>e.createMediaKeys())).then((t=>Promise.all([e.setMediaKeys(t),t]))).then((t=>{let[i,a]=t;if(!e.mediaKeys)throw new X(n.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED,"Failed to set MediaKeys on HTMLMediaElement");return this._configuration.promise.then((()=>{const e=this._keySystemSettings;return e&&!this._noServerCertificate&&e.withCertificate?this._trySetServerCertificate(e.licenseServer,a):this}))}))}removeMediaKeys(e){return Promise.resolve(e.setMediaKeys(null)).then((()=>this))}getKeySystemInfo(){return this._configuration.promise}getKeySystemImpl(){return this._emeImpl}createSessionWithParams(e){return new Promise(((t,i)=>{Re.info("Creating KeySession",e.keySystem);const a=e.mediaKeys.createSession(),s={generate:{start:0,end:0},request:{start:0,end:0},update:{start:0,end:0}},r=this._keySystemSettings&&this._keySystemSettings.licenseServer||void 0,o=this._onMessage.bind(this,{keySystem:e.keySystem,keySession:a,licenseServer:e.licenseServer||r,signal:e.signal,timeMap:s});a.addEventListener(Y.KEY_SESSION_MESSAGE,o);const l=()=>{Re.info("KeyStatus change"),s.update.end=Date.now(),t({elapsed:{generate:Math.max(s.generate.end-s.generate.start,0),request:Math.max(s.request.end-s.request.start,0),update:Math.max(s.update.end-s.update.start,0)}})};return a.addEventListener(Y.KEY_SESSION_STATUSES_CHANGE,l),this._saveSession({keySession:a,onMessageListener:o,onKeyStatusChangeListener:l}),Re.info("Generating KeySession request",e.keySystem),s.generate.start=Date.now(),Promise.resolve(a.generateRequest(e.initDataType,e.initData.buffer)).catch((e=>{if(!e)return;let t;switch(e.name){case"NotSupportedError":t=n.EME_NOT_SUPPORTED_ERROR;break;case"InvalidStateError":t=n.EME_INVALID_STATE_ERROR;break;default:t=n.EME_UNKNOWN_ERROR}i(new X(t,e.message||"Unknown error message."))}))}))}}class Le extends Error{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(t),this.code=e,this.message=t,this.status=i,this.debug=n,this.name="FragmentError"}}class Pe{constructor(e){var t;if(this._fallbackURLs=[],this._fragments=[],this._loaded=!1,this._mediaType="audio",this._noAuth=!1,this._resolvedURLs=[],this._segmentLength=0,this._duration=0,!e.fileId&&!e.resolvedURL)throw new TypeError("Missing: provide either fileId or resolvedURL");this._abrManager=e.abrManager,this._mediator=e.mediator,this._disableCache=e.disableCache,this._fileId=e.fileId,this._format=e.format,this._isAd=e.isAd||!1,this._keySystem=e.keySystem,this._keySystemSettings=Ee[this._keySystem],this._licenseEndpoint=e.licenseEndpoint,this._logData=e.logData||{displayTrack:"",playbackId:""},this._resolver=e.resolver,this._resolvedURL=e.resolvedURL,this._noAuth=null!==(t=e.noAuth)&&void 0!==t&&t,this._transport=e.transport,this._uri=e.uri,this._audioGainDb=e.audioGain}_parsePSSHBox(e){const t=L.D.decode(e),i=new Uint8Array(t.length);for(let n=0,a=t.length;n<a;n++)i[n]=t.charCodeAt(n);return i}_parseAssetID(e){const t=L.D.decode(e),i=new Array(t.length);for(let n=0,a=t.length;n<a;n++){const e=t.charCodeAt(n).toString(16);i[n]=1===e.length?`0${e}`:e}return i.join("")}getCalculatedDuration(){return this._duration}getFileId(){return this._fileId}getFormat(){return this._format||""}getAudioGain(){return this._audioGainDb}getFragmentLength(){return this._segmentLength}canLowerBitrate(){return!1}getInitFragment(){return this._initFragment}getInitParams(){const e={keySystem:this._keySystem,initDataType:this._protection,initData:this._psshBox,licenseServer:null};return Promise.resolve(e)}getKeySystem(){return this._keySystem}getLicenseEndpoint(){return this._licenseEndpoint}getLogData(){return this._logData||{}}getMediaType(){return this._mediaType}getResolvedURL(){return this._resolvedURL}getResolvedURLs(){return this._resolvedURLs}getHLSURL(){throw new Z(n.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.")}releaseHLSURL(){}getURI(){return this._uri}isAd(){return this._isAd}isProtected(){return!!this._protection&&!!this._psshBox}setLogData(e){return this._logData=e,this}toLogJSON(){return{uri:this._uri,fileId:this._fileId,format:this._format||"",resolved_url:this._resolvedURL}}}const De="application/vnd.apple.mpegurl";function Oe(e){var t;const i=function(e){return e.map((e=>{if(e.byteEnd&&void 0!==e.byteStart){let t=""+(1+e.byteEnd-e.byteStart);return t+=`@${e.byteStart}`,`#EXTINF:${e.duration},\n#EXT-X-BYTERANGE:${t}\n${e.url}`}return`#EXTINF:${e.duration},\n${e.url}`})).join("\n")}(e.segments),n=e.assetID?`#EXT-X-KEY:METHOD=SAMPLE-AES,URI="skd://${e.assetID}",KEYFORMATVERSIONS="1",KEYFORMAT="com.apple.streamingkeydelivery"`:"";let a=e.map?`#EXT-X-MAP:URI="${e.map.url}"`:"";return(null===(t=e.map)||void 0===t?void 0:t.byteEnd)&&void 0!==e.map.byteStart&&(a+=`,BYTERANGE="${1+e.map.byteEnd}@${e.map.byteStart}"`),`#EXTM3U\n#EXT-X-VERSION:6\n#EXT-X-TARGETDURATION:${Math.floor(e.targetDuration)}\n#EXT-X-MEDIA-SEQUENCE:0\n#EXT-X-PLAYLIST-TYPE:VOD\n${a?`${n}\n${a}`:n}\n${i}\n#EXT-X-ENDLIST`}function Fe(e){return`data:application/vnd.apple.mpegurl;base64,${btoa(e)}`}function we(e){const t=new Blob([e],{type:De});return URL.createObjectURL(t)}function xe(e){return we(Oe(e))}function Me(e){return Fe(Oe(e))}const Ue=/avc1\.(([0-9a-f]{2})[0-9a-f]{2}([0-9a-f]{2}))/,je="4d";function Be(e,t){const i=e.toLowerCase().match(Ue),n=t.toLowerCase().match(Ue);if(!i||!n)return!1;const[,a,s,r]=i,[,o,l,d]=n;return a===o||s===je&&l===je&&parseInt(r,16)>=parseInt(d,16)}function Ge(e,t){return e.sort(((e,i)=>"video_bitrate"in e&&"video_bitrate"in i?t?e.video_resolution===i.video_resolution?e.video_bitrate-i.video_bitrate:e.video_resolution-i.video_resolution:e.video_bitrate-i.video_bitrate:e.max_bitrate-i.max_bitrate))}function Ve(e,t){return void 0!==t&&Array.isArray(e.encryption_indices)&&-1===e.encryption_indices.indexOf(t)}function Ye(e,t){if(!t)return!1;return t(Object.assign({mimeType:e.mime_type},function(e){return"video_codec"in e}(e)?{type:"video",codec:e.video_codec,bitrate:e.video_bitrate,height:e.video_height,width:e.video_width,resolution:e.video_resolution}:{type:"audio",codec:e.audio_codec,bitrate:e.audio_bitrate}))}function Ke(e){return"audio_codec"in e?e.audio_codec:e.video_codec}function He(e){const{codec:t,formats:i,profiles:n,encryptionIndex:a,disallowProfile:s,preferredKeySystem:r,preferredVideoResolution:o,allowMixedAVC1Codecs:l}=e;for(const d of i){const e=[];let i="spotify/unknown-mimetype",c="unknown-codec";for(const o of n){const n=Ke(o);!(t in o)||Ve(o,a)||r===K.FAIRPLAY&&"ts"!==o.file_type||Ye(o,s)||(r!==K.FAIRPLAY||"ts"!==o.file_type?"unknown-codec"!==c||o.mime_type!==d.mimeType||n!==d.codec&&!Be(d.codec,n)?o.mime_type===i&&(n===c||l&&Be(c,n))&&(e.push(o),o.__effective_codec=c):(i=d.mimeType,c=l?d.codec:n,e.push(o),o.__effective_codec=d.codec):e.push(o))}if(e.length)return Ge(e,o)}return[]}const We=b.P.forTag("playback.video_content");function qe(e){if(!e)return"";const t=e.__effective_codec||("audio_codec"in e?e.audio_codec:e.video_codec);return`${e.mime_type};codecs="${t}"`}const Qe={method:"GET",responseType:"arraybuffer",timing:!0,retry:{condition:(e,t)=>{if(0===e.status)return!0;const i=e.getStatusFamily();return i===t.CONNECTION_ERROR||i===t.SERVER_ERROR}}};class $e extends Pe{constructor(e){super(e),this._assetId="",this._endTime=0,this._videoFormats=[],this._audioFormats=[],this._subtitleLanguages=[],this._videoProfile=null,this._videoProfiles=[],this._audioProfile=null,this._audioProfiles=[],this._baseURL="",this._initTemplate="",this._segmentTemplate="",this._subtitleTemplate="",this._initSegments={},this._hlsURLs=[],this._allowMixedAVC1Codecs=!1,this._initTemplate="",this._isAd=e.isAd||!1,this._mediaType="video",this._resolver=e.resolver,this._videoFormats=e.videoFormats,this._audioFormats=e.audioFormats,this._disallowProfile=e.disallowProfile,this._videoResolution=e.videoResolution,this._allowMixedAVC1Codecs=!!e.allowMixedAVC1Codecs,this._keySystem===K.FAIRPLAY&&this._audioFormats.unshift({mimeType:"audio/mp2t",codec:"mp4a.40.2"}),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new $e(e)}_isQualityMatched(e,t,i){var n,a,s,r;if(this._videoResolution){const t=null!==(n=this._videoResolution.max)&&void 0!==n?n:9007199254740991,r=null!==(a=this._videoResolution.min)&&void 0!==a?a:0;if(i){const i=null!==(s=this._videoResolution.start)&&void 0!==s?s:t;return e.video_resolution<=i}return e.video_resolution>=r&&e.video_resolution<=t}const o=null!==(r=null==t?void 0:t.audio_bitrate)&&void 0!==r?r:0,l=this._abrManager.getBandwidthEstimate();return e.video_bitrate+o<2*l-1e5}_updateVariants(e){var t;const i=this._audioProfiles[0];this._audioProfile=null!=i?i:null;const n=this._videoProfiles,a=this._videoProfile;let s=null,r=n.length;if(r){for(;r--;){const t=n[r];if(t&&this._isQualityMatched(t,i,!!e)){s=t;break}}s||(s=n[0]),this._videoProfile=s,(null==a?void 0:a.id)!==s.id&&(We.log(`Video profile changed. ID ${s.id} (${s.video_codec}), Bitrate ${s.video_bitrate}, ${s.video_width}x${s.video_height}`),null===(t=this._mediator)||void 0===t||t.emit(q.VIDEO_PROFILE_CHANGED,{profile:{type:"video",mimeType:s.mime_type,codec:s.video_codec,bitrate:s.video_bitrate,height:s.video_height,width:s.video_width,resolution:s.video_resolution}}))}}_constructFragmentURL(e,t,i){if(!t&&!i)throw new Error("Both audioProfile and videoProfile is null");return e.init?this._resolver.getInitSegmentURLs(this._baseURL,this._initTemplate,t,i):this._resolver.getSegmentURLs(this._baseURL,this._segmentTemplate,e.timeStart,t,i)}_fetchBufferData(e,t,i,n){return this._transport.request(e,Object.assign(Object.assign({},Qe),{metadata:{timeStart:Date.now(),fragment:t,profile:i,loggingURL:n}})).then(this._parseFragmentResponse)}_fetchInitSegmentBuffers(e,t){const i=this._initFragment;if(!i)return Promise.reject(new Z(n.FILE_NOT_RESOLVED,"Cannot fetch Init Segment buffers: File not resolved."));let a;try{a=this._constructFragmentURL(i,e,t)}catch(l){return Promise.reject(l)}const s=this._initSegments;let r=Promise.resolve(null);if(e){const t=s[e.id];(null==t?void 0:t.buffer.byteLength)?r=Promise.resolve(t):(null==a?void 0:a.audio)&&(r=this._fetchBufferData(a.audio,i,e,a.audioLogging).then((t=>(s[e.id]=t,t))))}let o=Promise.resolve(null);if(t){const e=s[t.id];(null==e?void 0:e.buffer.byteLength)?o=Promise.resolve(e):(null==a?void 0:a.video)&&(o=this._fetchBufferData(a.video,i,t,a.videoLogging).then((e=>(s[t.id]=e,e))))}return Promise.all([r,o]).then((e=>{let[t,i]=e;return{audio:t,video:i}}))}_fetchBufferForFragment(e,t,i){let n;try{n=this._constructFragmentURL(e,t,i)}catch(a){return Promise.reject(a)}return Promise.all([this._fetchInitSegmentBuffers(t,i),!e.init&&n.audio?this._fetchBufferData(n.audio,e,t,n.audioLogging):null,!e.init&&n.video?this._fetchBufferData(n.video,e,i,n.videoLogging):null]).then((t=>{let[i,n,a]=t;var s,r;let o;return e.init?o={audio:null!==(s=i.audio)&&void 0!==s?s:void 0,video:null!==(r=i.video)&&void 0!==r?r:void 0}:(o={audio:null!=n?n:void 0,video:null!=a?a:void 0},e.cacheBufferSet&&(e.bufferSet=o),o.audio&&(null==i?void 0:i.audio)&&(o.audio.initBuffer=i.audio.buffer),o.video&&(null==i?void 0:i.video)&&(o.video.initBuffer=i.video.buffer)),o})).catch((e=>Promise.reject(e)))}_parseFragmentResponse(e){var t,i,a,s;const{fragment:r,profile:o,timeStart:l,loggingURL:d}=e.metadata,c=qe(o),u=function(e){return e?"audio_bitrate"in e?e.audio_bitrate:e.video_bitrate:0}(o),m="video_resolution"in o?o.video_resolution:void 0,_=`${r.timeStart}-${r.timeEnd}`,h="video_resolution"in o?"video":"audio";switch(e.status){case 0:{const e=new Le(n.FRAGMENT_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:_,mimetype:c,resolution:m,bitrate:u});return null===(t=this._mediator)||void 0===t||t.emit(q.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:h,url:d,start_time:l,init:r.init,error:e}),Promise.reject(e)}case 200:case 206:{const t=e.body;if(!(null==t?void 0:t.byteLength)){const t=new Le(n.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:_,mimetype:c,resolution:m,bitrate:u});return null===(i=this._mediator)||void 0===i||i.emit(q.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:h,url:d,start_time:l,init:r.init,error:t}),Promise.reject(t)}const s=t.byteLength;this._abrManager.sample(s,Date.now()-l),this._updateVariants();const p=8e3*s/e.timing.completed;return null===(a=this._mediator)||void 0===a||a.emit(q.FRAGMENT_FETCHED,{media_type:"video",segment_type:h,url:d,init:r.init,byte_length:s,start_time:l,end_time:Date.now(),resolution:m,bandwidth:p}),Promise.resolve({profileId:`${this._fileId}-${o.id}`,bufferURL:d,byteStart:0,byteEnd:s-1,buffer:t,mimetype:c,resolution:m,bitrate:u,bandwidth:p})}}const p=new Le(n.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:_,mimetype:c,resolution:m,bitrate:u});return null===(s=this._mediator)||void 0===s||s.emit(q.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:h,url:d,init:r.init,start_time:l,error:p}),Promise.reject(p)}_getHLSURLForProfile(e){const t=this._duration,i=this._segmentLength,n=this._segmentTemplate,a=[];for(let r=0;r<t;r+=i){const s=r+i>t?t-r:i,o=n.replace("{{profile_id}}",e.id.toString(10)).replace("{{segment_timestamp}}",r.toString(10)).replace("{{file_type}}",e.file_type);a.push({duration:s,url:`${this._baseURL}${o}`})}const s=("undefined"==typeof MediaSource?xe:Me)({assetID:this._assetId,targetDuration:i,segments:a});return this._hlsURLs.push(s),s}_calculateFragments(e){this._duration=e.end_time_millis/1e3;const t=this._segmentLength;this._initFragment={init:!0,cacheBufferSet:!1,timeStart:-1,timeEnd:-1,byteRanges:{}};for(let i=0;i<this._duration;i+=t)this._fragments.push({cacheBufferSet:!i&&!this._disableCache,timeStart:i,timeEnd:i+t,byteRanges:{}})}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._updateVariants()}getCurrentBitrate(){var e,t;return null!==(t=null===(e=this._videoProfile)||void 0===e?void 0:e.video_bitrate)&&void 0!==t?t:0}getBufferForFragment(e){var t,i;if(!e)return Promise.reject(new TypeError("No fragment provided"));const n=this._audioProfile,a=this._videoProfile,s=null===(i=null===(t=e.bufferSet)||void 0===t?void 0:t.video)||void 0===i?void 0:i.resolution;return e.bufferSet&&(!a||s&&s>=a.video_resolution)?Promise.resolve(e.bufferSet):this._fetchBufferForFragment(e,null!=n?n:void 0,null!=a?a:void 0)}clearCachedBuffers(){this._initFragment&&(this._initSegments={}),this._fragments.forEach((e=>{e.bufferSet=null}))}getDuration(){return this._endTime}getFragmentAfterTime(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[1];for(const i of this._fragments)if(i.timeStart>e)return i;return null}getFragmentForTime(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[0];for(const i of this._fragments)if(i.timeStart<=e&&i.timeEnd>=e)return i;return null}getSubtitleLanguages(){return this._subtitleLanguages}getSubtitles(){return this._subtitleLanguages.map((e=>({lang:e,url:this._subtitleTemplate.replace("{{language_code}}",e)})))}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resolveLatency:0,manifestLatency:0};if(this._loaded)return e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this);if(!this._fileId)throw new TypeError("Missing: provide either fileId or resolvedURL");const t=Date.now();return this._resolver.getManifest(this._fileId,this._noAuth).then((i=>{var a,s,r;let o;e.resolveLatency=0,e.manifestLatency=Date.now()-t;const l=i.contents[0];if(!l)return o=new Z(n.FILE_MALFORMED_SEEKTABLE,"Malformed seektable: no contents."),o.track=this.toLogJSON(),Promise.reject(o);this._resolvedURLs=i.base_urls.slice();const[d,...c]=i.base_urls;let u;if(d&&(this._baseURL=d,this._fallbackURLs=c),this._resolvedURL=this._baseURL,this._initTemplate=i.initialization_template,this._segmentTemplate=i.segment_template,this._segmentLength=l.segment_length,null===(a=l.encryption_infos)||void 0===a?void 0:a.length){const e=l.encryption_infos,t=this._keySystemSettings.commonName;let i;for(let n=0,a=e.length;n<a;n++){const a=e[n];if(a&&a.key_system===t){u=n,i=a[this._keySystemSettings.pssh_field.video];break}}if(!i)return o=new Z(n.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),o.track=this.toLogJSON(),Promise.reject(o);switch(this._keySystemSettings.commonName){case"widevine":case"playready":this._protection="cenc";try{this._psshBox=this._parsePSSHBox(i)}catch(m){return o=new Z(n.FILE_MALFORMED_PSSH,"Invalid PSSH value."),o.track=this.toLogJSON(),Promise.reject(o)}break;case"fairplay":this._protection="hls",this._psshBox=new Uint8Array([]);try{this._assetId=this._parseAssetID(i)}catch(m){return o=new Z(n.FILE_MALFORMED_PSSH,"Invalid PSSH value."),o.track=this.toLogJSON(),Promise.reject(o)}break;default:return o=new Z(n.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),o.track=this.toLogJSON(),Promise.reject(o)}}return this._endTime=i.end_time_millis,this._videoProfiles=He({codec:"video_codec",formats:this._videoFormats,profiles:l.profiles,encryptionIndex:u,disallowProfile:this._disallowProfile,preferredKeySystem:this._keySystem,preferredVideoResolution:this._videoResolution,allowMixedAVC1Codecs:this._allowMixedAVC1Codecs}),this._audioProfiles=He({codec:"audio_codec",formats:this._audioFormats,profiles:l.profiles,encryptionIndex:u,preferredKeySystem:this._keySystem}),this._updateVariants(!0),this._calculateFragments(i),this._subtitleLanguages=i.subtitle_language_codes||[],null===(s=this._mediator)||void 0===s||s.emit(q.SUBTITLE_LANGUAGES_LOADED,{languages:this._subtitleLanguages}),(null===(r=i.subtitle_base_urls)||void 0===r?void 0:r.length)&&i.subtitle_template?this._subtitleTemplate=`${i.subtitle_base_urls[0]}${i.subtitle_template}`:(We.info("No subtitles available"),this._subtitleTemplate=""),this}))}adaptToBandwidth(){return this._updateVariants(),Promise.resolve(!0)}getPlayableCodecs(){var e,t;return[qe(null!==(e=this._videoProfile)&&void 0!==e?e:void 0),qe(null!==(t=this._audioProfile)&&void 0!==t?t:void 0)].filter((e=>!!e))}getAudioProfile(){return this._audioProfile}getVideoProfile(){return this._videoProfile}getVideoProfiles(){return this._videoProfiles}getHLSURL(){if(!this._resolvedURL)throw new Z(n.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");this.releaseHLSURL();const e=[],t=this._audioProfiles[0];t&&e.push(`#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",LANGUAGE="eng",NAME="English",AUTOSELECT=YES,URI="${this._getHLSURLForProfile(t)}"`);for(const n of this._videoProfiles)e.push(`#EXT-X-STREAM-INF:BANDWIDTH=${n.max_bitrate},RESOLUTION=${n.video_width}x${n.video_height},CODECS="${(null==t?void 0:t.audio_codec)?`mp4a.40.2, ${n.video_codec}`:n.video_codec}"${(null==t?void 0:t.audio_codec)?',AUDIO="audio"':""}\n${this._getHLSURLForProfile(n)}`);const i=`#EXTM3U\n${e.join("\n")}`,a=("undefined"==typeof MediaSource?we:Fe)(i);return this._hlsURLs.push(a),a}releaseHLSURL(){for(const e of this._hlsURLs)URL.revokeObjectURL(e);this._hlsURLs=[]}canLowerBitrate(){var e;const t=this._videoProfiles[0];return(null===(e=this._videoProfile)||void 0===e?void 0:e.id)!==(null==t?void 0:t.id)}}var ze;!function(e){e[e.MP3_256=3]="MP3_256",e[e.MP3_320=4]="MP3_320",e[e.MP3_160=5]="MP3_160",e[e.MP3_96=6]="MP3_96",e[e.MP4_128=10]="MP4_128",e[e.MP4_256=11]="MP4_256",e[e.MP4_128_DUAL=12]="MP4_128_DUAL",e[e.MP4_256_DUAL=13]="MP4_256_DUAL",e[e.MP4_128_CBCS=14]="MP4_128_CBCS",e[e.MP4_256_CBCS=15]="MP4_256_CBCS",e[e.MP4_FLAC=17]="MP4_FLAC"}(ze||(ze={}));const Ze={[ze.MP3_256]:"audio/mp3",[ze.MP3_320]:"audio/mp3",[ze.MP3_160]:"audio/mp3",[ze.MP3_96]:"audio/mp3",[ze.MP4_128]:'audio/mp4; codecs="mp4a.40.2"',[ze.MP4_256]:'audio/mp4; codecs="mp4a.40.2"',[ze.MP4_128_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[ze.MP4_256_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[ze.MP4_128_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[ze.MP4_256_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[ze.MP4_FLAC]:'audio/mp4; codecs="flac"'};class Xe extends Pe{constructor(e){if(super(e),this._lastResolveTimestamp=0,this._profileId=`${Date.now()}`,this._initBufferPromise=null,this._lastFetchedBuffer=null,this._hlsURL=null,this._bypassResolve=!!this._resolvedURL,this._emitWarning=e.emitWarning||function(){},this._mediaType="audio",this._noManifest=!!e.noManifest,this._preloadedManifest=e.preloadedManifest,this._resolver=e.resolver,this._segmentLength=0,this._fileFormat=e.fileFormat,this._fileFormat)this._audioCodec=Ze[this._fileFormat];else switch(this._format){case W.MP3:this._audioCodec=Ze[ze.MP3_160];break;case W.MP4:case W.MP4_DUAL:case W.MP4_CBCS:this._audioCodec=Ze[ze.MP4_128];break;default:throw new TypeError(`Unknown audio format ${this._format}`)}this._fileId&&(this._profileId=this._fileId),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new Xe(e)}_parseFragmentResponse(e){const{requestURL:t,fragment:i,byteRangeHeader:a,expectedLength:s}=e.metadata,r=`${i.timeStart}-${i.timeEnd}`;switch(e.status){case 0:{if(e.offline)return Promise.reject(new Le(n.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:r,byte_range:a}));const s=new Le(n.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0);let o=!1;return this._resolvedURL!==t?o=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(o=!0,this._resolvedURL=this._fallbackURLs.shift()),s.debug.has_fallback=o,o?(this._emitWarning(s,this.toLogJSON()),this.getBufferForFragment(i)):Promise.reject(s)}case 200:case 206:{const o=e.body;if(!o)return Promise.reject(new Le(n.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:r,byte_range:a}));if(o.byteLength!==s)return Promise.reject(new Le(n.FRAGMENT_REQUEST_UNEXPECTED_LENGTH,"Received buffer of unexpected length.",e.status,{time_range:r,byte_range:a,received_length:o.byteLength,expected_length:s}));const l={audio:{profileId:this._profileId,bufferURL:t,byteStart:i.byteRanges.audio.start,byteEnd:i.byteRanges.audio.end,buffer:o,mimetype:this._audioCodec,bandwidth:8e3*o.byteLength/e.timing.completed}};if(i.cacheBufferSet&&o&&o.byteLength){i.bufferSet=l;const e=i.sliceInto;if(null==e?void 0:e.length)for(const t of e){const e=t.fragment;(null==e?void 0:e.cacheBufferSet)&&(e.bufferSet={audio:Object.assign(Object.assign({},l.audio),{buffer:o.slice(t.start,t.end),byteStart:e.byteRanges.audio.start,byteEnd:e.byteRanges.audio.end})})}}return this._abrManager.sample(o.byteLength,e.timing.completed),Promise.resolve(l)}case 403:return this.resolve().then((()=>this.getBufferForFragment(i)));default:{let s=!1;return this._resolvedURL!==t?s=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(s=!0,this._resolvedURL=this._fallbackURLs.shift()),s?this.getBufferForFragment(i):Promise.reject(new Le(n.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:r,byte_range:a}))}}}_getInitBuffer(){var e,t;if(!this._initFragment)throw new Z(n.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return(null===(t=null===(e=this._initFragment.bufferSet)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.buffer.byteLength)?Promise.resolve(this._initFragment.bufferSet.audio.buffer):(this._initBufferPromise||(this._initBufferPromise=this.getBufferForFragment(this._initFragment).then((e=>{var t;if(!(null===(t=e.audio)||void 0===t?void 0:t.buffer.byteLength))throw new Error("Empty initialization segment buffer");return e.audio.buffer}))),this._initBufferPromise)}_calculateFragments(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const i=e.segments,n=e.timescale,a=i.length,s=new Array(a);let r=0,o=0;for(let l=0,d=a;l<d;l++){const e=i[l];if(!(null==e?void 0:e.length))continue;const[a,d]=e,c=d/n,u={init:!1,cacheBufferSet:!l&&!this._disableCache,timeStart:r,timeEnd:r+c,byteRanges:{audio:{start:t,end:t+(a-1)}}};s[l]=u,t+=a,o+=d,r+=c,Math.floor(c)>this._segmentLength&&(this._segmentLength=Math.floor(c))}s[s.length-1].isLastFragment=!0,this._fragments=s,this._duration=o/n}_calculateFragmentsV1(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const i=e.references,n=e.timescale,a=i.length,s=new Array(a);let r=0,o=0;for(let l=0,d=a;l<d;l++){const e=i[l];if(!e)continue;const a=e.duration/n,d={init:!1,cacheBufferSet:!l&&!this._disableCache,timeStart:o,timeEnd:o+a,byteRanges:{audio:{start:t,end:t+(e.size-1)}}};s[l]=d,t+=e.size,r+=e.duration,o+=a,Math.floor(a)>this._segmentLength&&(this._segmentLength=Math.floor(a))}s[s.length-1].isLastFragment=!0,this._fragments=s,this._duration=r/n}_getManifest(e){if(this._noManifest)return e&&(e.manifestLatency=0),Promise.resolve(null);if(this._preloadedManifest)return e&&(e.manifestLatency=0),Promise.resolve(this._preloadedManifest);if(!this._fileId)throw new TypeError("Missing: fileId");const t=Date.now();return this._resolver.getManifest(this._fileId).then((function(i){return e&&(e.manifestLatency=Date.now()-t),i}))}getHLSURL(){var e,t;const i=this._resolvedURL,a=this._initFragment;if(!i||!a)throw new Z(n.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");this.releaseHLSURL();const s={url:i,byteStart:null===(e=a.byteRanges.audio)||void 0===e?void 0:e.start,byteEnd:null===(t=a.byteRanges.audio)||void 0===t?void 0:t.end},r=this._fragments.map((e=>{var t,n;return{url:i,duration:e.timeEnd-e.timeStart,byteStart:null===(t=e.byteRanges.audio)||void 0===t?void 0:t.start,byteEnd:null===(n=e.byteRanges.audio)||void 0===n?void 0:n.end}})),o="undefined"==typeof MediaSource?xe:Me;return this._hlsURL=o({assetID:this._fileId,targetDuration:10,map:s,segments:r}),this._hlsURL}releaseHLSURL(){this._hlsURL&&URL.revokeObjectURL(this._hlsURL),this._hlsURL=null}clearCachedBuffers(){this._headFragment&&delete this._headFragment,this._initFragment&&(this._initFragment.bufferSet=null),this._fragments[0]&&(this._fragments[0].bufferSet=null),this._lastFetchedBuffer=null}getPlayableCodecs(){return[this._audioCodec]}getFirstFragment(){var e;return null!==(e=this._fragments[0])&&void 0!==e?e:null}getHeadFragment(){const e=this._initFragment,t=this._fragments[0];if(!(null==e?void 0:e.byteRanges.audio)||!(null==t?void 0:t.byteRanges.audio))throw new Z(n.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return this._headFragment||(this._headFragment={init:!0,cacheBufferSet:!0,timeStart:0,timeEnd:0,byteRanges:{audio:{start:e.byteRanges.audio.start,end:t.byteRanges.audio.end}},sliceInto:[{fragment:e,start:0,end:t.byteRanges.audio.start},{fragment:t,start:t.byteRanges.audio.start,end:void 0}]}),this._headFragment}getFragmentAfterTime(e){var t,i;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(i=this._fragments[1])&&void 0!==i?i:null;for(const n of this._fragments)if(n.timeStart>e)return n;return null}getFragmentForTime(e){var t,i;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(i=this._fragments[0])&&void 0!==i?i:null;for(const n of this._fragments)if(n.timeStart<=e&&n.timeEnd>=e)return n;return null}getBufferForFragment(e){var t;if(!e)return Promise.reject(new Error("FIXME: error type?"));if((null===(t=this._lastFetchedBuffer)||void 0===t?void 0:t.fragment)===e)return Promise.resolve(this._lastFetchedBuffer.bufferSet);if(e.bufferSet)return Promise.resolve(e.bufferSet);if(!this._resolvedURL)return Promise.reject(new Z(n.FILE_NOT_RESOLVED,"Cannot fetch buffer: No resolved URL"));const i=e.byteRanges.audio,a=`${i.start}-${i.end}`,s=i.end+1-i.start,r=this._resolvedURL,o=e.init?Promise.resolve(null):this._getInitBuffer();return Promise.all([o,this._transport.request(r,{method:"GET",responseType:"arraybuffer",headers:{Range:`bytes=${a}`},timing:!0,metadata:{requestURL:r,fragment:e,byteRangeHeader:a,expectedLength:s},retry:{condition:(e,t)=>{if(0===e.status)return e.offline;const i=e.getStatusFamily();return i===t.CONNECTION_ERROR||i===t.SERVER_ERROR||!(i!==t.SUCCESS||!e.body)&&e.body.byteLength!==s}}}).then(this._parseFragmentResponse)]).then((t=>{let[i,n]=t;return i&&n.audio&&(n.audio.initBuffer=i),this._lastFetchedBuffer={fragment:e,bufferSet:n},n}))}resolve(e){const t=this._fileId;if(this._bypassResolve)return e&&(e.resolveLatency=0),Promise.resolve({uri:this._resolvedURL,uris:[],protection:this._preloadedManifest||!this._noManifest?"cenc":void 0});if(!t)throw new TypeError("Missing: fileId is required to resolve content URL");clearTimeout(this._lastResolveToken);const i=()=>(this._lastResolveTimestamp=Date.now(),this._resolver.getCDNURL(t,this._fileFormat).then((t=>(e&&(e.resolveLatency=Date.now()-this._lastResolveTimestamp),t)))),n=Date.now()-this._lastResolveTimestamp;let a;return a=n<1001?new Promise(((e,t)=>{this._lastResolveToken=setTimeout((()=>{i().then(e,t)}),1001-n)})):i(),a.then((e=>{this._resolvedURLs=[];for(const t of e.uris){const e=t.split("?")[0];this._resolvedURLs.push(e)}return this._fallbackURLs=e.uris,this._resolvedURL=this._fallbackURLs.shift(),e})).catch((e=>(e&&(e.track=this.toLogJSON()),Promise.reject(e))))}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resolveLatency:0,manifestLatency:0};return this._loaded?(e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this)):Promise.all([this.resolve(e),this._getManifest(e)]).then((e=>{let[t,i]=e;var a;if(this._loaded=!0,!t.protection||!i)return this;if(this._keySystem===K.INVALID_SPOTIFY_KEY)return this._protection=i.protection||"cenc",this._psshBox=new Uint8Array(0),this;let s;const r=this._keySystemSettings.pssh_field.audio;let o=function(e,t){return t.hasOwnProperty(e)}(r,i)?`${i[r]}`:null;if(!o&&"pssh_widevine"===r&&"pssh"in i&&(o=null!==(a=i.pssh)&&void 0!==a?a:null),!o)return s=new Z(n.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),s.track=this.toLogJSON(),Promise.reject(s);if(this._protection=i.protection||"cenc",this._psshBox=this._parsePSSHBox(o),"segments"in i&&i.segments)this._calculateFragments(i);else{if(!("references"in i)||!i.references)return s=new Z(n.FILE_MALFORMED_SEEKTABLE,"Malformed seektable."),s.track=this.toLogJSON(),Promise.reject(s);this._calculateFragmentsV1(i)}return this}))}adaptToBandwidth(){return Promise.resolve(!1)}}class Je{constructor(e){if(this._estimate=0,this._totalWeight=0,e<0)throw new TypeError("Halflife must be set to a positive value.");this._weightingDecrease=Math.exp(Math.log(.5)/e)}sample(e,t){const i=Math.pow(this._weightingDecrease,e),n=t*(1-i)+i*this._estimate;isNaN(n)||(this._estimate=n,this._totalWeight+=t)}getEstimate(){return this._estimate/1-Math.pow(this._weightingDecrease,this._totalWeight)}}class et{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e5;this._totalBytes=0,this._overrideBitrate=0,this._currentBandwidth=e,this._short=new Je(2),this._long=new Je(5),this._init()}_init(){if("undefined"==typeof navigator)return;const e=navigator;e.connection&&e.connection.downlink&&(this._currentBandwidth=1e6*e.connection.downlink,this._onConnectionChange=this._onConnectionChange.bind(this),e.connection.addEventListener("change",this._onConnectionChange))}_onConnectionChange(e){const t=e.target.downlink||0;this._setBandwidth(t)}_setBandwidth(e){this._currentBandwidth=1e6*e}getBandwidthEstimate(){if(this._overrideBitrate)return this._overrideBitrate;if(this._totalBytes<128e3)return this._currentBandwidth;const e=this._short.getEstimate(),t=this._long.getEstimate();return Math.min(e,t)}sample(e,t){if(e<16e3)return;const i=t/1e3,n=8*e/i;this._totalBytes+=e,this._short.sample(i,n),this._long.sample(i,n)}overrideBitrate(e){this._overrideBitrate=e<=0?0:e}}var tt;!function(e){e.SHOWING="showing",e.HIDDEN="hidden"}(tt||(tt={}));const it=Array.prototype.slice,nt="function"==typeof Array.from?e=>Array.from(e):e=>it.call(e);function at(e,t){const i=nt(e.getElementsByTagName(t));for(const n of i)e.removeChild(n)}function st(e){const t=e;return{id:t.id,text:t.text}}const rt="visible",ot="hidden",lt=/^[A-Za-z]{2,4}([_-][A-Za-z]{4})?([_-]([A-Za-z]{2}|[0-9]{3}))?$/;class dt extends c.vp{constructor(e){super(),this._isVisible=!1,this._player=null,this._crossOrigin=null,this._currentVideoContent=null,this._unsubscribers=[],this._displayedCues=[],this._deactivateListeners=!1,this._activeLanguage=void 0,this._preferredLanguage=e.language.toLowerCase(),e.deactivateListeners&&(this._deactivateListeners=!0),this._onEnter=this._onEnter.bind(this),this._onExit=this._onExit.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this.setPlayer(e.player)}_subscribeToCueEvents(e){var t;const{track:i}=e;if(!i)throw new Error("No track");if(i.mode=this._isVisible?tt.SHOWING:tt.HIDDEN,null===(t=i.cues)||void 0===t?void 0:t.length){this._displayedCues=i.activeCues?Array.from(i.activeCues):[],this._emitDisplayedCues();for(let e=0;e<i.cues.length;e++){const t=i.cues[e];t&&(t.addEventListener("enter",this._onEnter),t.addEventListener("exit",this._onExit),this._unsubscribers.push((()=>{t.removeEventListener("enter",this._onEnter),t.removeEventListener("exit",this._onExit)})))}}else{const t=()=>{this._subscribeToCueEvents(e),e.removeEventListener("load",t)};e.addEventListener("load",t)}}_unsubscribeFromCueEvents(){this._unsubscribers.forEach((e=>e())),this._unsubscribers=[]}_onEnter(e){const t=e.target;this._displayedCues.indexOf(t)>-1||(this._displayedCues.push(t),this._emitDisplayedCues())}_onExit(e){const t=e.target,i=this._displayedCues.indexOf(t);i>-1&&(this._displayedCues.splice(i,1),this._emitDisplayedCues())}_emitDisplayedCues(){this.emit(Y.PLAYER_DISPLAYED_CUES_CHANGED,{cues:this._displayedCues.map(st)})}_updateVisibleState(){var e,t;if(!this._player)return;const i=this.getActiveLanguage();Array.from(null!==(t=null===(e=this._player)||void 0===e?void 0:e.querySelectorAll("track"))&&void 0!==t?t:[]).forEach((e=>{e.style.visibility=this._isVisible?rt:ot}));const n=this._player.textTracks;for(let a=0,s=n.length;a<s;a++){const e=n[a];e&&(e.mode=this._isVisible&&e.language.toLowerCase()===i?tt.SHOWING:tt.HIDDEN)}}_updateTextTracks(){const e=this._player;e&&(e.readyState>=1?this._onLoadedMetadata():this._currentVideoContent&&e.addEventListener(Y.MEDIA_LOADEDMETADATA,this._onLoadedMetadata))}_onLoadedMetadata(){const e=this._player;if(!e)return;if(at(e,"track"),!this._currentVideoContent)return;e.crossOrigin="anonymous";const t=this._updateActiveLanguage();for(const{lang:i,url:n}of this._currentVideoContent.getSubtitles()){const a=i.toLowerCase()===t,s=document.createElement("track");s.label=`${i} subtitles`,s.kind="subtitles",s.srclang=i,s.src=n,s.default=a,s.style.visibility=this._isVisible?rt:ot,e.appendChild(s),a&&!this._deactivateListeners&&this._subscribeToCueEvents(s)}}_updateActiveLanguage(){if(!this._player||!this._currentVideoContent)return void(this._activeLanguage=void 0);const e=this._currentVideoContent.getSubtitleLanguages(),t=this._preferredLanguage.split("-")[0];let i=null;for(const n of e){const e=n.toLowerCase();if(e===this._preferredLanguage)return this._activeLanguage=e,this._activeLanguage;e.split("-")[0]===t&&null===i&&(i=e)}return this._activeLanguage=null!=i?i:"en-us",this._activeLanguage}getActiveLanguage(){if(this._player&&this._currentVideoContent)return this._activeLanguage}setVideoContent(e){this._unsubscribeFromCueEvents(),this._displayedCues=[],this._currentVideoContent=e,e||this.clear(),this._updateTextTracks()}setPlayer(e){var t;const i="VIDEO"===(null==e?void 0:e.tagName)?e:null;this._player!==i&&this.clear(),this._player=i||null,this._crossOrigin=null!==(t=null==i?void 0:i.crossOrigin)&&void 0!==t?t:null,this._updateTextTracks()}getAvailableLanguages(){var e,t;return null!==(t=null===(e=this._currentVideoContent)||void 0===e?void 0:e.getSubtitleLanguages())&&void 0!==t?t:[]}setLanguage(e){if(!e.length)throw new TypeError("Argument `code` must be a non-empty string. Hide subtitles using `hideSubtitles()`.");if(!lt.test(e))throw new TypeError("Argument `code` must be a valid BCP 47 formatted language code");this._preferredLanguage=e.toLowerCase(),this._updateTextTracks()}hide(){this._isVisible=!1,this._updateVisibleState()}show(){this._isVisible=!0,this._updateVisibleState()}deactivateListeners(){if(this._deactivateListeners)return;this._player&&(this._deactivateListeners=!0,this._unsubscribeFromCueEvents())}activateListeners(){this._deactivateListeners&&(this._deactivateListeners=!1,this._updateTextTracks())}areListenersActivated(){return!this._deactivateListeners}clear(){const e=this._player;e&&(this._unsubscribeFromCueEvents(),this._currentVideoContent=null,this._displayedCues=[],at(e,"track"),e.removeEventListener(Y.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.crossOrigin=this._crossOrigin)}visible(){return this._isVisible}}class ct{constructor(e){this.bandwidthEstimator=e.bandwidthEstimator}static create(e){return new ct(e)}getSample(e,t){var i,n;const a=this.bandwidthEstimator.getBandwidthEstimate(),s=function(e,t){const i=e.length;for(let n=0;n<i;n++)if(e.start(n)<=t&&t<=e.end(n))return 1e3*(e.end(n)-t);return 0}(e.buffered,e.currentTime);if(t instanceof Xe){const e=null===(n=null===(i=t.getFirstFragment())||void 0===i?void 0:i.bufferSet)||void 0===n?void 0:n.audio,r=null==e?void 0:e.bitrate;return{bandwidth:a,bufferAvailability:s,audio:{contentType:null==e?void 0:e.mimetype,bitrate:r}}}const r=t.getAudioProfile(),o=t.getVideoProfile(),l=t.getVideoProfiles(),d="getVideoPlaybackQuality"in e?e.getVideoPlaybackQuality():{creationTime:void 0,droppedVideoFrames:void 0,totalVideoFrames:void 0};return{bandwidth:a,bufferAvailability:s,video:{creationTime:d.creationTime,droppedVideoFrames:d.droppedVideoFrames,totalVideoFrames:d.totalVideoFrames,bitrate:null==o?void 0:o.video_bitrate,availableBitrates:l.map((e=>e.video_bitrate)),height:null==o?void 0:o.video_height,width:null==o?void 0:o.video_width,resolution:null==o?void 0:o.video_resolution,contentType:qe(null!=o?o:void 0)},audio:{bitrate:null==r?void 0:r.audio_bitrate,contentType:qe(null!=r?r:void 0)}}}}const ut=b.P.forTag("playback.audio_processor");class mt{constructor(e){this._audioContext=null,this._mediaElementSource=null,this._gainNode=null,this._nodes=[],(null==e?void 0:e.disable)?ut.info("AudioProcessor disabled"):(this._audioContext=(null==e?void 0:e.audioContext)||("undefined"!=typeof AudioContext?new AudioContext:null),this._audioContext?(this._gainNode=this._audioContext.createGain(),this._buildNodePipeline(null==e?void 0:e.nodes)):ut.warn("The AudioContext API is not supported. Any future operation related to `AudioProcessor` will be skipped."))}static create(e){return new mt(e)}_setMediaElementSource(e){var t;this._audioContext&&(this._mediaElementSource&&(ut.info("Disconnecting previous media element source"),this._mediaElementSource.disconnect()),ut.info("Creating new media element source"),this._mediaElementSource=this._audioContext.createMediaElementSource(e)||null,this._mediaElementSource.connect(null!==(t=this._nodes[0])&&void 0!==t?t:this._audioContext.destination))}_buildNodePipeline(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var t;if(!this._audioContext)return;ut.info("Disconnecting previous nodes");const i=this._nodes;for(const s of i)s.disconnect();const n=[this._gainNode,...e];let a=null;for(const s of n)a&&a.connect(s),a=s;null===(t=n[n.length-1])||void 0===t||t.connect(this._audioContext.destination),ut.info("Node pipeline built"),this._nodes=n}setPlayer(e){var t;e&&((null===(t=this._mediaElementSource)||void 0===t?void 0:t.mediaElement)!==e?this._setMediaElementSource(e):ut.info("The new player is the same as the current player"))}setAudioGain(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this._gainNode)return ut.info("The default gain node is not available"),!1;const t=Math.pow(10,e/20);return this._gainNode.gain.value=t,ut.info("Main gain set to",t),!0}getAudioContext(){return this._audioContext}resume(){return this._audioContext&&"running"!==this._audioContext.state?this._audioContext.resume():Promise.resolve()}suspend(){return this._audioContext&&"suspended"!==this._audioContext.state?this._audioContext.suspend():Promise.resolve()}destroy(){var e;this._audioContext&&(null===(e=this._mediaElementSource)||void 0===e||e.connect(this._audioContext.destination)),this._nodes=[],this._audioContext=null,this._gainNode=null,this._mediaElementSource=null,ut.info("The AudioProcessor is destroyed")}}const _t=b.P.forTag("playback.media_source_manager");function ht(e){if(!e)return"";const t=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const n=e[i]?`="${e[i]}"`:"";t.push(`${i}${n}`)}return t.length?`; ${t.join("; ")}`:""}class pt extends c.vp{constructor(e){super(),this._mediaSource=null,this._sourceBuffers={},this._currentInitSegments={},this._updateQueue=[],this._codecs=[],this._playId=0,this._lastBufferClearTime=Date.now(),this._customSourceBufferParams="";const{codecs:t,customSourceBufferParams:i,disableBufferAbort:n}=e;this._codecs=t,this._customSourceBufferParams=ht(i),this._disableBufferAbort=!!n,this._onSourceOpen=this._onSourceOpen.bind(this),this._onSourceClose=this._onSourceClose.bind(this),this.dequeueUpdates=this.dequeueUpdates.bind(this),e.noInit||this._init()}static create(e){return new pt(e)}_init(){this._mediaSource=new MediaSource,this._mediaSource.addEventListener(Y.MEDIA_SOURCE_OPEN,this._onSourceOpen),this._mediaSource.addEventListener(Y.MEDIA_SOURCE_CLOSE,this._onSourceClose),this._sourceBuffers={},this._currentInitSegments={}}_onSourceOpen(){var e;_t.info("MediaSource opened.");const t=this._mediaSource;if(0===(null===(e=null==t?void 0:t.sourceBuffers)||void 0===e?void 0:e.length)&&"open"===(null==t?void 0:t.readyState)){_t.info("Creating source buffers for codecs",this._codecs);for(const e of this._codecs){const i=t.addSourceBuffer(e+this._customSourceBufferParams);i.addEventListener(Y.SOURCE_BUFFER_UPDATE_END,this.dequeueUpdates),this._sourceBuffers[e]=i}}this.dequeueUpdates(),this.emit(Y.BUFFER_SOURCE_OPEN,null)}_onSourceClose(){_t.info("MediaSource closed."),this._destroySourceBuffers(),this.emit(Y.BUFFER_SOURCE_CLOSE,null)}_destroySourceBuffers(){const e=this._mediaSource;if(!e)return;const t=e.sourceBuffers;if(t.length)for(let n=0,a=t.length;n<a;n++){const a=t[n];if(a){a.removeEventListener("updateend",this.dequeueUpdates);try{e.removeSourceBuffer(a),_t.info("Removed source buffer")}catch(i){_t.warn("Failed to remove sourcebuffer",i)}}}this._sourceBuffers={},this._currentInitSegments={}}_endUpdate(e){var t;this._isUpdating()?this._updateQueue.push(e):"open"===(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState)&&(this._mediaSource.endOfStream(),e.resolve&&e.resolve(!0))}_durationUpdate(e){this._isUpdating()?this._updateQueue.push(e):(this._mediaSource&&(this._mediaSource.duration=e.duration),e.resolve&&e.resolve(!0))}_isUpdating(){if(!this._mediaSource)return!1;const e=this._mediaSource.sourceBuffers;for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i&&i.updating)return!0}return!1}_appendUpdate(e){var t,i;const n=this._sourceBuffers[e.codec];if(!n||n.updating)return void this._updateQueue.push(e);let a=e.buffer;if(e.fragment.init&&this._currentInitSegments[e.codec]===e.profileId)return null===(t=e.resolve)||void 0===t||t.call(e,!0),void Promise.resolve().then(this.dequeueUpdates);if(e.initBuffer&&e.buffer&&this._currentInitSegments[e.codec]!==e.profileId){const t=new Uint8Array(e.initBuffer.byteLength+e.buffer.byteLength);t.set(new Uint8Array(e.initBuffer),0),t.set(new Uint8Array(e.buffer),e.initBuffer.byteLength),a=t.buffer}try{n.appendBuffer(a)}catch(r){let t=!1;return"QuotaExceededError"===r.name?(_t.warn("Failed to append buffer: exceeded quota."),t=!0,this.emitSync(Y.BUFFER_QUOTA_EXCEEDED,null)):_t.warn("Failed to append buffer",r),void new Promise((e=>{t?setTimeout(e,500):e()})).then((()=>{this.emitSync(Y.FRAGMENT_APPENDED,e.fragment),this.dequeueUpdates()})).then((()=>{e.init&&this._updateQueue.push(e)}))}this.emitSync(Y.FRAGMENT_APPENDED,e.fragment);const s=a.byteLength>e.buffer.byteLength;(e.fragment.init||s)&&(this._currentInitSegments[e.codec]=e.profileId),null===(i=e.resolve)||void 0===i||i.call(e,!0),s?_t.info(`Injected combined init segment and playable segment (${e.codec}, ${e.profileId})`):e.init&&_t.info(`Injected individual init segment (${e.codec}, ${e.profileId})`)}_abortUpdate(e){var t;"fragment"in e&&this.emitSync(Y.FRAGMENT_APPENDED,e.fragment),null===(t=e.resolve)||void 0===t||t.call(e,!1),Promise.resolve().then(this.dequeueUpdates)}dequeueUpdates(){const e=this._updateQueue.shift();e&&this.tryUpdate(e)}tryUpdate(e){if(e.playId!==this._playId)return _t.info("Try update dropped: playId has changed"),void this._abortUpdate(e);if(e.timestamp<this._lastBufferClearTime)return _t.info("Try update dropped: update is older than the last clear"),void this._abortUpdate(e);const t=this._mediaSource;t&&"open"!==t.readyState&&"ended"!==t.readyState?this._updateQueue.push(e):"end"===e.type?this._endUpdate(e):"duration"===e.type?this._durationUpdate(e):"append"===e.type&&this._appendUpdate(e)}appendBufferData(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();const a=[];if(e.audio){const s=(0,u.$)();this.tryUpdate({playId:i,timestamp:n,fragment:t,type:"append",profileId:e.audio.profileId,buffer:e.audio.buffer,initBuffer:e.audio.initBuffer,codec:e.audio.mimetype,init:!!t.init,resolve:s.resolve}),a.push(s.promise)}if(e.video){const s=(0,u.$)();this.tryUpdate({playId:i,timestamp:n,fragment:t,type:"append",profileId:e.video.profileId,buffer:e.video.buffer,initBuffer:e.video.initBuffer,codec:e.video.mimetype,init:!!t.init,resolve:s.resolve}),a.push(s.promise)}return Promise.all(a)}endOfStream(){this._mediaSource&&"ended"!==this._mediaSource.readyState&&this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"end"})}abort(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._lastBufferClearTime=Date.now(),this._disableBufferAbort)return void _t.info("MediaSource abort skipped; action disabled.");const t=this._mediaSource;if(t){const n=t.sourceBuffers;for(let a=0,s=n.length;a<s;a++){const s=n[a];if("open"===t.readyState&&s)try{s.abort();const t=s.buffered;if(e&&t.length){const e=t.start(0),i=t.end(t.length-1);s.remove(e,i),_t.info("Cleared buffer range",e,i)}}catch(i){_t.warn("MediaSourceManager.clear failed.",i)}}}this._currentInitSegments={}}destroy(){const e=this._mediaSource;e&&(_t.info("Source destroyed"),e.removeEventListener("sourceopen",this._onSourceOpen),e.removeEventListener("sourceclose",this._onSourceClose),this._destroySourceBuffers(),this._mediaSource=null)}recreate(e){this.abort(),this.destroy(),this._codecs=e.codecs,e.customSourceBufferParams&&(this._customSourceBufferParams=ht(e.customSourceBufferParams)),this._init()}setDuration(e){return new Promise((t=>{this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"duration",duration:e,resolve:t})}))}getMediaSource(){return this._mediaSource}setPlayId(e){this._playId=e}getPlayId(){return this._playId}}const vt=b.P.forTag("playback.content_buffer");var kt;function gt(){}!function(e){e[e.AUDIO=10]="AUDIO",e[e.VIDEO=20]="VIDEO"}(kt||(kt={}));class Et extends c.vp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this._appendingFragments=[],this._tracker=e;const{customSourceBufferParams:n,noInit:a,disableBufferAbort:s}=i;this._mediaSourceManager=pt.create({codecs:t,noInit:a,customSourceBufferParams:n,disableBufferAbort:s}),this._removeAppendingFragment=this._removeAppendingFragment.bind(this),this._mediaSourceManager.on(Y.FRAGMENT_APPENDED,(e=>{let{data:t}=e;return this._removeAppendingFragment(t)})),this.proxyEmitAll(this._mediaSourceManager,{[Y.BUFFER_SOURCE_OPEN]:Y.BUFFER_SOURCE_OPEN,[Y.BUFFER_SOURCE_CLOSE]:Y.BUFFER_SOURCE_CLOSE,[Y.BUFFER_QUOTA_EXCEEDED]:Y.BUFFER_QUOTA_EXCEEDED})}static create(e){return new Et(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}_trackBufferingProgress(e){e.audio&&e.audio.buffer&&this._tracker.trackBytesDownloaded(e.audio.buffer.byteLength),e.video&&e.video.buffer&&this._tracker.trackBytesDownloaded(e.video.buffer.byteLength)}_checkStalling(e,t,i){var n,a;const s=t.byteRanges.video?t.byteRanges.video.start:null!==(a=null===(n=t.byteRanges.audio)||void 0===n?void 0:n.start)&&void 0!==a?a:-1;var r;e>9e3&&this.emit(Y.BUFFER_STALLED,{byteStart:s,timeStart:(r=t.timeStart,Math.ceil(1e3*r)),stallAmount:e-9e3,didTimeout:i})}_removeAppendingFragment(e){if(!e)return;const t=this._appendingFragments,i=t.indexOf(e);-1!==i&&t.splice(i,1)}dequeueUpdates(){this._mediaSourceManager.dequeueUpdates()}appendFragment(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(-1!==this._appendingFragments.indexOf(t))return Promise.resolve([]);this._appendingFragments.push(t),this.emit(Y.BUFFERING_START,null);const n=Date.now(),a=this._mediaSourceManager.getPlayId(),s=e.toLogJSON();return e.getBufferForFragment(t).then((e=>{var s,r,o,l,d,c;return this._trackBufferingProgress(e),a!==this._mediaSourceManager.getPlayId()?(vt.info("Append fragment dropped: playId has changed."),[]):(i||this._checkStalling(Date.now()-n,t,!1),null!==(null===(s=e.audio)||void 0===s?void 0:s.bandwidth)&&this._tracker.trackBufferURL((null===(r=e.audio)||void 0===r?void 0:r.bufferURL)||"",{bandwidth:(null===(o=e.audio)||void 0===o?void 0:o.bandwidth)||0}),null!==(null===(l=e.video)||void 0===l?void 0:l.bandwidth)&&this._tracker.trackBufferURL((null===(d=e.video)||void 0===d?void 0:d.bufferURL)||"",{bandwidth:(null===(c=e.video)||void 0===c?void 0:c.bandwidth)||0}),this.emit(Y.BUFFERING_END,null),this._mediaSourceManager.appendBufferData(e,t,a,n))})).catch((e=>(this._removeAppendingFragment(t),i||this._checkStalling(Date.now()-n,t,!0),this.emit(Y.BUFFER_APPEND_ERROR,{error:e,canPlayNext:!0,track:s}),Promise.reject(e))))}abort(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._appendingFragments=[],this._mediaSourceManager.abort(e)}getMediaSource(){return this._mediaSourceManager.getMediaSource()}destroy(){this._mediaSourceManager.destroy()}progress(e,t,i){const n=this._mediaSourceManager.getMediaSource();if(!n)return;const a="video"===e.getMediaType()?kt.VIDEO:kt.AUDIO;if("open"===n.readyState||"ended"===n.readyState){let s;const r=function(e,t){var i;const n=null===(i=e.sourceBuffers[e.sourceBuffers.length-1])||void 0===i?void 0:i.buffered;if(n){let e,i;for(let a=0;a<n.length;a++)if(e=n.start(a),i=n.end(a),e<=t&&t<=i)return{start:e,end:i}}return null}(n,i);if(r){if(i+a>n.duration)return void("open"===n.readyState&&this._mediaSourceManager.endOfStream());const o=e.getFragmentLength();Math.ceil(i/o)>Math.floor(r.end/o)&&(s=e.getFragmentForTime(i),s&&this.appendFragment(e,s,t).catch(gt));const l=Math.floor(r.end-i);if(l>a)return;const d=Math.min(e.getFragmentLength(),a-l);if(d<1)return;const c=Math.floor(r.end+d);s=e.getFragmentForTime(c),s?this.appendFragment(e,s,t).catch(gt):this._mediaSourceManager.endOfStream()}else if(s=e.getFragmentForTime(i),s){const n=this.appendFragment(e,s,t).catch(gt);if(s.timeEnd<i+5){const i=e.getFragmentAfterTime(s.timeStart);i?this.appendFragment(e,i,t).catch(gt):n.then((()=>{this._mediaSourceManager.endOfStream()}))}}else this._mediaSourceManager.endOfStream()}}recreate(e){this._appendingFragments=[],this._mediaSourceManager.recreate({codecs:e})}setDuration(e){return this._mediaSourceManager.setDuration(e)}setPlayId(e){this._mediaSourceManager.setPlayId(e)}}const St=b.P.forTag("playback.player"),yt=/^blob:/,ft={[W.MP4]:!0,[W.MP4_DUAL]:!0,[W.MP4_CBCS]:!0,[W.MP4_FLAC]:!0,[W.MP3]:!1,[W.MANIFEST_ID]:!1};function Nt(e){return Math.ceil(1e3*e)}function Tt(e){return e/1e3}function Rt(e){return document.createElement(e)}class At extends c.vp{constructor(e){super(),this._cubicVolume=!1,this._player=null,this._emeManager=null,this._mediator=new c.vp,this._currentContent=null,this._upcomingContent=null,this._preloadingTracks={},this._playId=0,this._abortController=null,this._loaded=!1,this._licenseRequested=!1,this._playerActivated=!1,this._pauseToken=0,this._syntheticEndedToken=0,this._activeCodecs=[],this._playerVolume=1,this._playerSpeed=1,this._fatalOnNextError=!1,this._canPreloadEmitted=!1,this._lastTimeUpdatePostion=0,this._buffering=!1,this._preferredBitrate=0,this._disableLicensePrefetch=!1,this._allowMixedAVC1Codecs=!1,this._disableBufferingBeforeLicense=!1,this._audioResolver=e.audioResolver,this._clearBufferOnSeek=!!e.clearBufferOnSeek,this._createPlayer=e.createPlayer||Rt,this._cubicVolume=e.cubicVolume,this._disableCache=!!e.disableCache,this._licenseURLResolver=e.licenseURLResolver,this._newBufferPerTrack=!!e.newBufferPerTrack,this._newElementPerTrack=!!e.newElementPerTrack,this._newMediaKeysPerTrack=!!e.newMediaKeysPerTrack,this._rebufferOnQuotaExceeded=!!e.rebufferOnQuotaExceeded,this._disableLicensePrefetch=!!e.disableLicensePrefetch,this._synthesizeEnded=!!e.synthesizeEnded,this._tracker=e.tracker,this._transport=e.transport,this._videoPlayerContainer=e.videoPlayerContainer,this._audioPlayerContainer=e.audioPlayerContainer,this._allowMixedAVC1Codecs=e.allowMixedAVC1Codecs,this._videoResolver=e.videoResolver,this._abrManager=new et,this._emeManager=e.disallowProtectedTracks?null:e.emeManager||null,this._disallowProfile=e.disallowProfile,this._disableBufferingBeforeLicense=!!e.disableBufferingBeforeLicense,this._cache=new $.z6(e.trackCacheSize||2),this._subtitleManager=new dt({language:e.preferredSubtitleLanguage||navigator.language,player:this._player}),this._videoResolution=e.videoResolution,St.info("Setting Player track cache to:",e.trackCacheSize||2),this._bufferManager=Et.create(this._tracker,void 0,{disableBufferAbort:!!e.disableBufferAbort,reinjectInitsOnAbort:!!e.reinjectInitsOnAbort,noInit:!0,customSourceBufferParams:e.customSourceBufferParams}),this._statistics=ct.create({bandwidthEstimator:this._abrManager}),this._audioProcessor=mt.create(e.audioProcessorOptions),this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onPlay=this._onPlay.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onPause=this._onPause.bind(this),this._onSeeking=this._onSeeking.bind(this),this._onEncrypted=this._onEncrypted.bind(this),this._onEnded=this._onEnded.bind(this),this._onError=this._onError.bind(this),this._onRequiresDuration=this._onRequiresDuration.bind(this),this._onQuotaExceeded=this._onQuotaExceeded.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this._onWaiting=this._onWaiting.bind(this),this._onFragmentFetched=this._onFragmentFetched.bind(this),this._onProfileChanged=this._onProfileChanged.bind(this),this._onPlayedThresholdReached=this._onPlayedThresholdReached.bind(this),this._onSyntheticEnded=this._onSyntheticEnded.bind(this),this._onLicenseRequestCapped=this._onLicenseRequestCapped.bind(this),this._onLicenseRequestError=this._onLicenseRequestError.bind(this),this._onNavigatorOffline=this._onNavigatorOffline.bind(this),this._onBufferError=this._onBufferError.bind(this),this._emitWarning=this._emitWarning.bind(this),this._handleLoadingComplete=this._handleLoadingComplete.bind(this),this._onRateChange=this._onRateChange.bind(this),this._onVideoResize=this._onVideoResize.bind(this),this._setAudioGain=this._setAudioGain.bind(this),this._init()}static create(e){const t=Object.assign({},e);return e.disallowProtectedTracks?At.createWithOptions(t):Ie.create({transport:e.transport,disallowRobustnessValues:e.disallowRobustnessValues,disallowCodecs:e.disallowCodecs,noServerCertificate:e.noServerCertificate,precacheServerCertificate:e.precacheServerCertificate,unauthServerCertificateBase:e.unauthServerCertificateBase,preferredKeySystems:e.preferredKeySystems}).then((e=>{t.emeManager=e;const i=new At(t);return t.preinitMediaElement?i._preinitMediaElement():i})).catch((i=>{if(e.enableWithoutEME)return At.createWithOptions(t);throw i}))}static createWithOptions(e){return new Promise((t=>{const i=new At(e);t(e.preinitMediaElement?i._preinitMediaElement():i)}))}_init(){this._disableCache&&St.info("Cache disabled."),this._transport.on(this._transport.EVENT_CONNECTION_OFFLINE,this._onNavigatorOffline),this.proxyEmitAllSync(this._tracker,{[Y.TRACKER_TRACKING_DATA_CREATED]:Y.PLAYER_TRACKING_DATA_CREATED,[Y.TRACKER_TRACKING_DATA_FINALIZED]:Y.PLAYER_TRACKING_DATA_FINALIZED,[Y.TRACKER_PLAYBACK_START]:Y.PLAYER_PLAYBACK_START}),this._tracker.on(Y.TRACKER_PLAYED_THRESHOLD_REACHED,this._onPlayedThresholdReached),this._emeManager&&this._emeManager.addListeners({[Y.EME_LICENSE_REQUEST_CAPPED]:this._onLicenseRequestCapped,[Y.EME_LICENSE_REQUEST_ERROR]:this._onLicenseRequestError}),this._bufferManager.addListeners({[Y.BUFFER_APPEND_ERROR]:this._onBufferError,[Y.BUFFER_QUOTA_EXCEEDED]:this._onQuotaExceeded}),this.proxyEmitAll(this._bufferManager,{[Y.BUFFER_STALLED]:Y.PLAYER_BUFFER_STALLED}),this._mediator.addListeners({[q.FRAGMENT_FETCHED]:this._onFragmentFetched,[q.VIDEO_PROFILE_CHANGED]:this._onProfileChanged}),this.proxyEmitAll(this._mediator,{[q.FRAGMENT_FETCH_ERROR]:Y.PLAYER_FRAGMENT_FETCH_ERROR,[q.SUBTITLE_LANGUAGES_LOADED]:Y.PLAYER_SUBTITLE_LANGUAGES_LOADED}),this.proxyEmitSync(this._subtitleManager,Y.PLAYER_DISPLAYED_CUES_CHANGED,Y.PLAYER_DISPLAYED_CUES_CHANGED),this.proxyEmitAll(this._videoResolver,{[Y.VIDEO_MANIFEST_RESOLVED]:Y.PLAYER_VIDEO_MANIFEST_RESOLVED,[Y.VIDEO_MANIFEST_RESOLVE_FAILED]:Y.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED})}_onRateChange(){this._player&&(this._tracker.trackSpeedChanged(this._player.playbackRate),this.emit(Y.PLAYER_PLAYBACK_SPEED_CHANGED,{playback_speed:this._player.playbackRate}))}_onLicenseRequestError(e){if(e.data.signal.aborted)return;const t=this._currentContent;if(!t)return;const i=e.data.error;i.shouldRefreshEndpoint&&this._licenseURLResolver.remove(t.getKeySystem(),t.getMediaType()),this._emitError(i,!i.unrecoverable,t.toLogJSON())}_onFragmentFetched(e){const{data:t}=e;this._tracker.trackFragment(t),this.emit(Y.PLAYER_FRAGMENT_FETCHED,t)}_onProfileChanged(e){const{data:t}=e;this._tracker.trackProfileChanged(t.profile),this.emit(Y.PLAYER_VIDEO_PROFILE_CHANGED,t)}_onLicenseRequestCapped(e){if(e.data.signal.aborted)return;this._currentContent&&(this.pause(),this.emit(Y.PLAYER_CAPPED,null))}_shouldNextErrorBeFatal(){const e=this._currentContent;if(!e)return!1;if(e.isAd()||!e.isProtected())return!1;if(!this._player)return!1;const t=this._player.error;if(!(t&&t instanceof MediaError))return this._fatalOnNextError=!1,!1;switch(t.code){case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:case MediaError.MEDIA_ERR_DECODE:return!0;default:return!1}}_onNavigatorOffline(){this._tracker.trackNavigatorOffline()}_onBufferError(e){this._emitError(e.data.error,e.data.canPlayNext,e.data.track)}_addPlayerEvents(e){e.addEventListener(Y.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.addEventListener(Y.MEDIA_PLAY,this._onPlay),e.addEventListener(Y.MEDIA_PLAYING,this._onPlaying),e.addEventListener(Y.MEDIA_PAUSE,this._onPause),e.addEventListener(Y.MEDIA_SEEKING,this._onSeeking),e.addEventListener(Y.MEDIA_ENCRYPTED,this._onEncrypted),e.addEventListener(Y.MEDIA_ENDED,this._onEnded),e.addEventListener(Y.MEDIA_ERROR,this._onError),e.addEventListener(Y.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.addEventListener(Y.MEDIA_DURATIONCHANGE,this._onDurationChange),e.addEventListener(Y.MEDIA_WAITING,this._onWaiting),e.addEventListener(Y.MEDIA_CANPLAY,this._onCanPlay),e.addEventListener(Y.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.addEventListener(Y.MEDIA_RATECHANGE,this._onRateChange),e.addEventListener(Y.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration),e.addEventListener(Y.MEDIA_RESIZE,this._onVideoResize)}_removePlayerEvents(e){e.removeEventListener(Y.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.removeEventListener(Y.MEDIA_PLAY,this._onPlay),e.removeEventListener(Y.MEDIA_PLAYING,this._onPlaying),e.removeEventListener(Y.MEDIA_PAUSE,this._onPause),e.removeEventListener(Y.MEDIA_SEEKING,this._onSeeking),e.removeEventListener(Y.MEDIA_ENCRYPTED,this._onEncrypted),e.removeEventListener(Y.MEDIA_ENDED,this._onEnded),e.removeEventListener(Y.MEDIA_ERROR,this._onError),e.removeEventListener(Y.MEDIA_WAITING,this._onWaiting),e.removeEventListener(Y.MEDIA_CANPLAY,this._onCanPlay),e.removeEventListener(Y.MEDIA_RATECHANGE,this._onRateChange),e.removeEventListener(Y.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.removeEventListener(Y.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.removeEventListener(Y.MEDIA_DURATIONCHANGE,this._onDurationChange),e.removeEventListener(Y.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration),e.removeEventListener(Y.MEDIA_RESIZE,this._onVideoResize)}_recreateMediaElement(e,t,i,n){if(t.aborted)return St.info("Recreate player dropped: operation aborted."),Promise.resolve(!1);const a=this._player;if(a){if(!this._newElementPerTrack&&("AUDIO"!==a.tagName||"video"!==i)){let t=!0;for(const i of e)if('audio/mp2t;codecs="mp4a.40.2"'!==i&&!a.canPlayType(i)){t=!1;break}if(t)return St.info("Reusing media element."),e.join(",")===this._activeCodecs.join(",")&&!this._newBufferPerTrack||n||(St.info("Recreating buffer."),this._bufferManager.recreate(e),this._activeCodecs=e),Promise.resolve(!0)}this._removePlayerEvents(a),a.pause(),this._emeManager&&this._emeManager.removeMediaKeys(a).catch((function(e){St.warn("Failed to remove media keys.",e)})),this._player=null;const t=this._getContainerElement(this._videoPlayerContainer);t&&a.parentNode===t&&(t.removeChild(a),this.emit(Y.PLAYER_VIDEO_ELEMENT_REMOVED,null));const s=this._getContainerElement(this._audioPlayerContainer);s&&a.parentNode===s&&s.removeChild(a)}St.info("Creating new media element.");const s=this._createPlayer(i),r=this._playerVolume;return s.volume=this._cubicVolume?r*r*r:r,s.autoplay=!1,s.loop=!1,"playsInline"in s&&(s.playsInline=!0),this._player=s,this._subtitleManager.setPlayer(s),this._playerActivated=!1,this._addPlayerEvents(s),n||this._bufferManager.recreate(e),this._activeCodecs=e,Promise.resolve(!0)}_getContainerElement(e){return"string"==typeof e?document.querySelector(e):e||null}_onVideoResize(){if(!(this._player instanceof HTMLVideoElement))return;const{videoWidth:e,videoHeight:t}=this._player;this.emit(Y.PLAYER_VIDEO_RESIZED,{width:e,height:t})}_onDurationChange(){var e;const t=null===(e=this._abortController)||void 0===e?void 0:e.signal,i=()=>{if(!this._player)return;if(null==t?void 0:t.aborted)return void St.info("Duration changed drop: operation aborted.");const e=Nt(this._player.duration),i=Nt(this._player.currentTime);this._tracker.setActualDuration(e),this.emit(Y.PLAYER_DURATION_CHANGED,{timestamp:Date.now(),position:i,duration:e})};this._loaded?i():this.once(Y.PLAYER_LOAD,i)}_onPlay(){var e;if(!this._player||!this._currentContent)return;const t=Nt(this._player.currentTime);this._tracker.trackPlay(t,this._player.playbackRate),this.emit(Y.PLAYER_PLAY,{timestamp:Date.now(),position:t,logData:null!==(e=this._currentContent.getLogData())&&void 0!==e?e:null})}_onPlaying(){if(!this._player)return;this._playerActivated=!0;const e=this._currentContent,t=Nt(this._player.currentTime);this._tracker.trackPlaying(t),this.emit(Y.PLAYER_PLAYING,{timestamp:Date.now(),position:t,logData:e?e.getLogData():null})}_onPause(){if(!this._player)return;const e=Nt(this._player.currentTime);this._tracker.trackPaused(e);const t=this._currentContent?this._currentContent.getLogData():null;this._pauseToken=setTimeout((()=>{clearTimeout(this._syntheticEndedToken),this.emit(Y.PLAYER_PAUSED,{position:e,logData:t})}),10)}_onSeeking(){this.emit(Y.PLAYER_SEEKING,null),this._bufferManager.abort(this._clearBufferOnSeek),this._lastTimeUpdatePostion=0,this._onTimeUpdate()}_onRequiresDuration(){this._currentContent&&this._currentContent.isProtected()&&this._player&&(this._player.duration=this._currentContent.getCalculatedDuration())}_onQuotaExceeded(){this._player&&this._rebufferOnQuotaExceeded&&(St.info("Exceeded quota: rebuffering current track."),this._bufferManager.abort(!0),this._player.currentTime=this._player.currentTime,this._onTimeUpdate())}_onEncrypted(e){St.info("Got Encrypted event");this._currentContent&&this.emitSync(Y.INTERNAL_ENCRYPTED,{initData:e.initData,fromPolyfill:!!e.fromPolyfill})}_onEnded(){!this._currentContent||this._synthesizeEnded&&this._currentContent.isProtected()||(St.info("Native ended emitted."),this._emitEnded())}_onSyntheticEnded(){this._synthesizeEnded&&this._currentContent&&this._currentContent.isProtected()&&(St.info("Synthetic ended emitted."),this._emitEnded())}_onError(){if(!this._player)return;const e=this._player.error;let t,i=!1;const a=this._currentContent;let s,r,o,l=!1;a&&(i=a.isProtected(),t=a.toLogJSON(),l=a.isAd(),a.clearCachedBuffers());let d=!0;const c=!a||l||!this._fatalOnNextError,u=e&&e.msExtendedCode?`0x${(e.msExtendedCode>>>0).toString(16).toUpperCase()}`:null,m=`data:${(null==t?void 0:t.fileId)||"unknown"}`;if(e instanceof MediaError){switch(e.code){case MediaError.MEDIA_ERR_ABORTED:s=n.MEDIA_ABORTED,r="Media aborted.";break;case MediaError.MEDIA_ERR_NETWORK:s=n.MEDIA_NETWORK_ERROR,r="Network error.";break;case MediaError.MEDIA_ERR_DECODE:s=n.MEDIA_DECODING_ERROR,r="Media decoding error.",d=c;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:s=n.MEDIA_NOT_SUPPORTED,r="Media not supported.",d=c;break;default:s=n.PLAYER_MEDIA_ERROR,r="Media error.",o=!0}r+=` (${e.message||u||m||e.toString()})`}else s=n.PLAYER_PLAYBACK_ERROR,r="Error message undefined",o=!0;this._bufferManager.abort(!0);const _=new z(s,r);d||(_.unrecoverable=!0),_.listPlayerIgnore=l,_.debug.src_url=m,_.debug.protected=i,_.debug.extendedCode=u,_.debug.rawExCode=e&&e.msExtendedCode||null,o&&e&&(_.debug.nativeCode=e.code||null,_.debug.errorData=e),this._emitError(_,d,t)}_onLoadedMetadata(){this.emitSync(Y.INTERNAL_PLAYER_LOADED_METADATA,null)}_onCanPlay(){this._buffering=!1,this.emitSync(Y.INTERNAL_PLAYER_CANPLAY,null),this.emit(Y.PLAYER_FIRST_BYTES,null)}_onCanPlayThrough(){this.emitSync(Y.INTERNAL_PLAYER_CANPLAYTHROUGH,null)}_onWaiting(){clearTimeout(this._syntheticEndedToken);const e=this._player;if(!e||!this._currentContent)return;const t=e.seeking;this._buffering=!0;const i=this._currentContent.canLowerBitrate(),n=this._tracker;this.emit(Y.PLAYER_BUFFERING_START,Object.assign({position:Nt(e.currentTime),msPlayed:this._tracker.getMSPlayed(),canLowerBitrate:i,seeking:t},n.getStallsInformation())),this._getBufferingLatency().then((a=>{t||this._tracker.trackMsStalled(a),this.emit(Y.PLAYER_BUFFERING_END,Object.assign({position:Nt(e.currentTime),msPlayed:this._tracker.getMSPlayed(),canLowerBitrate:i,msStalled:a,seeking:t},n.getStallsInformation()))}))}_onPlayedThresholdReached(e){this._currentContent&&this._player&&this.emit(Y.PLAYER_PLAYED_THRESHOLD_REACHED,{played:e.data.played,threshold:e.data.threshold,position:Nt(this._player.currentTime)})}_emitEnded(){this._currentContent&&"video"===this._currentContent.getMediaType()&&this.emit(Y.PLAYER_ENDED_VIDEO,null),clearTimeout(this._pauseToken),this.emit(Y.PLAYER_ENDED,null)}_emitError(e,t,i){St.error("Player Error",e,i,t),this._tracker.setHadError(!0),!this._disableCache&&i&&i.fileId&&this._cache.remove(i.fileId),this.emit(Y.PLAYER_ERROR,{playId:this._playId,error:e,track:i,canPlayNext:t,position:this._player?Nt(this._player.currentTime):0})}_emitWarning(e,t){St.error("Player Warning",e,t,!0),this._tracker.trackWarning(),this.emit(Y.PLAYER_WARNING,{playId:this._playId,error:e,track:t,canPlayNext:!0,position:this._player?Nt(this._player.currentTime):0})}_prepareMediaElement(e,t){return t.aborted||!this._upcomingContent?(St.info("Loading content dropped: operation aborted."),Promise.resolve(!1)):this._recreateMediaElement(this._upcomingContent.getPlayableCodecs(),t,this._upcomingContent.getMediaType(),this._upcomingContent.getKeySystem()===K.FAIRPLAY).then((i=>{var n;if(!i||t.aborted)return St.info("Loading content dropped after recreate: operation aborted."),Promise.resolve(!1);this._player.playbackRate=(null===(n=this._loadingOptions)||void 0===n?void 0:n.useDefaultPlaybackSpeed)?1:this._playerSpeed;const a=this._player;return"VIDEO"===(null==a?void 0:a.tagName)&&(e.poster?a.poster=e.poster:a.removeAttribute("poster")),a&&this._upcomingContent&&this._upcomingContent.isProtected()&&this._emeManager&&(!a.mediaKeys||a.mediaKeys.shouldRefreshPerTrack||this._newMediaKeysPerTrack)?(St.info("Creating media keys"),this._emeManager.createMediaKeys(a).then((()=>!0)).catch((e=>(e.unrecoverable=!0,this._emitError(e,!1,this._upcomingContent?this._upcomingContent.toLogJSON():void 0),Promise.reject(e))))):Promise.resolve(!0)}))}_handleLoadingComplete(e){const t=this._currentContent&&this._currentContent.getMediaType(),i=this._getContainerElement("video"===t?this._videoPlayerContainer:this._audioPlayerContainer);return i&&this._player&&this._player.parentNode!==i&&(i.appendChild(this._player),"video"===t&&this.emit(Y.PLAYER_VIDEO_ELEMENT_APPENDED,null)),this._upcomingContent=null,e}_handleLoadingError(e,t,i,n){if(this._upcomingContent=null,i.aborted)return Promise.resolve(!1);if(this._tracker.trackLoadFailed(),this.emit(Y.PLAYER_LOADING_FAILED,{uri:e,logData:t.logData}),n){const i=n.track||{uri:e,fileId:t.fileId,format:t.format,deviceId:t.logData.deviceId};this._emitError(n,"StorageError"!==n.name||!!n.canPlayNext,i)}return Promise.reject(n)}_handleLoadedMetadata(e,t,i){if(e.aborted)return void St.info("LoadedMetadata operations dropped: operation aborted.");this._loaded=!0;const n=this._player;if(!n)return;this._bufferManager.dequeueUpdates();const a=i.position>n.duration?0:i.position;this._lastTimeUpdatePostion=0,(isNaN(n.currentTime)||n.currentTime<a)&&(St.info("Resetting initial position after metadata."),n.currentTime=a),this._tracker.trackLoadDone(Nt(n.currentTime)),this.emitSync(Y.PLAYER_LOAD,{autoplay:i.autoplay,position:Nt(a),logData:t}),Promise.resolve().then((()=>{this._onTimeUpdate()}));let s=()=>{n.currentTime<a&&(St.info("Resetting initial position after playable."),n.currentTime=a)};i.autoplay&&!n.error&&(s=()=>{if(n.currentTime<a&&(St.info("Resetting initial position after playable."),n.currentTime=a),e.aborted)return void St.info("Play trigger dropped: operation aborted");new Promise((e=>e(this._player&&this._player.play()))).catch((e=>{if(e){if("NotSupportedError"===e.name)return Promise.reject(e);if("NotAllowedError"===e.name)return this.emit(Y.PLAYER_AUTOPLAY_FAILED,null),Promise.reject(e)}return this._player?this._player.play():Promise.resolve()})).catch((()=>{this._onPause()}))}),n.readyState>2?(St.info("Ready to play, triggering play."),s()):(St.info("Waiting to be playable."),this.once(Y.INTERNAL_PLAYER_CANPLAY,s))}_handleCanPlayThrough(e){e.aborted?St.info("CanPlayThrough operations dropped: operation aborted."):this._tracker.trackCanPlayThrough()}_loadContent(e,t){if(t.aborted||!this._upcomingContent)return St.info("Loading content dropped: operation aborted."),Promise.resolve(!1);if(!this._player)throw new z(n.PLAYER_INVALID_INTERNAL_STATE,"Cannot load content without an HTMLMediaElement");this._canPreloadEmitted=!1;const i=this._upcomingContent;this._upcomingContent=null,this._currentContent=i,this._setAudioGain(i),this._subtitleManager.setVideoContent(i instanceof $e?i:null);const a=e.callback;a&&this.once(Y.PLAYER_LOAD,(()=>{t.aborted?St.info("Load content event dropped: operation aborted."):a()})),this.once(Y.INTERNAL_PLAYER_LOADED_METADATA,this._handleLoadedMetadata.bind(this,t,this._currentContent.getLogData(),e)),this.once(Y.INTERNAL_PLAYER_CANPLAYTHROUGH,this._handleCanPlayThrough.bind(this,t));let s=e.position;const r=i.getCalculatedDuration();r&&s>r&&(s=e.position=0);try{this._player.currentTime=s}catch(l){St.warn("Cannot set initial position before loading.",l)}const o=i.isProtected();return this._tracker.setProtected(o),i.getKeySystem()===K.FAIRPLAY?i instanceof Xe&&!o?Promise.resolve(this._loadUnprotectedTrack()):Promise.resolve(this._loadHLSProtectedTrack(e,t)):i instanceof $e?this._loadVideoTrack(e,t):o?this._loadProtectedTrack(e,t):Promise.resolve(this._loadUnprotectedTrack())}_getBufferingLatency(){return new Promise((e=>{if(!this._player)return void e(0);const t=Date.now();this._player.addEventListener("canplaythrough",(function i(){this.removeEventListener("canplaythrough",i),e(Date.now()-t)}))}))}_loadVideoTrack(e,t){if(!(this._player&&this._currentContent&&this._currentContent instanceof $e))return Promise.resolve(!1);const i=this._currentContent;St.info("_loadVideoTrack");const a=()=>{this._currentContent&&this._currentContent.isProtected()&&this._requestLicense(t).then((()=>{t.aborted||(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}))};this._disableLicensePrefetch?this.once(Y.INTERNAL_ENCRYPTED,a):this._bufferManager.once(Y.BUFFER_SOURCE_OPEN,a);const s=this.getMediaSource();if(!s)throw new z(n.PLAYER_INVALID_INTERNAL_STATE,"No media source.");this._player.src=URL.createObjectURL(s);const r=i.getVideoProfile(),o=i.getAudioProfile();return o||r?(this._tracker.trackVideoLoadStart({bitrate:null==r?void 0:r.video_bitrate,audioProfile:null!=o?o:void 0,videoProfile:null!=r?r:void 0}),this._tracker.trackBufferLoadStart(),this._bufferManager.setDuration(i.getCalculatedDuration()).then((()=>this._bufferManager.appendFragment(i,i.getInitFragment()))).then(this._onAppendedHeadSegment(t))):Promise.resolve(!1)}_loadHLSProtectedTrack(e,t){if(St.info("Load HLS Protected Track"),!this._player||!this._currentContent)return!1;const i=this._currentContent.getResolvedURL();if(!i)throw new Z(n.FILE_NOT_RESOLVED,"Cannot load HLS protected track: File not resolved.");const a=e=>{e.data.fromPolyfill&&(this.removeListener(Y.INTERNAL_ENCRYPTED,a),this._requestLicense(t,{initData:e.data.initData}))};this.on(Y.INTERNAL_ENCRYPTED,a);const s=this._currentContent;if(s instanceof $e){const e=s.getVideoProfile(),t=s.getAudioProfile();this._tracker.trackVideoLoadStart({bitrate:null==e?void 0:e.video_bitrate,audioProfile:null!=t?t:void 0,videoProfile:null!=e?e:void 0})}this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(i,{bandwidth:0});const r=document.createElement("source");return r.src=this._currentContent.getHLSURL(),r.type=De,this._player.appendChild(r),this._player.load(),!0}_loadUnprotectedTrack(){if(!this._player||!this._currentContent)return!1;const e=this._currentContent.getResolvedURL();return!!e&&(St.info("_loadUnprotectedTrack",this._currentContent.getURI()),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(e,{bandwidth:0}),this._player.src=e,this._player.load(),!0)}_onAppendedHeadSegment(e){return()=>!e.aborted&&(this._player&&this._player.spload&&this._player.spload(),St.info("Head segment appended."),!0)}_loadProtectedTrack(e,t){if(!(this._currentContent&&this._player&&this._currentContent instanceof Xe))return Promise.resolve(!1);const i=this._currentContent;St.info("_loadProtectedTrack",i.getURI());const a=()=>this._requestLicense(t).then((()=>{t.aborted||(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}));this._disableLicensePrefetch?this.once(Y.INTERNAL_ENCRYPTED,a):this._bufferManager.once(Y.BUFFER_SOURCE_OPEN,a);const s=this.getMediaSource();if(!s)throw new z(n.PLAYER_INVALID_INTERNAL_STATE,"No media source.");this._player.src=URL.createObjectURL(s),this._tracker.trackBufferLoadStart();const r=i.getFragmentForTime(e.position);let o=null;return r===i.getFirstFragment()?(St.info("Appending combined init and playable fragment."),o=this._bufferManager.appendFragment(i,i.getHeadFragment())):(St.info("Appending split init and playable fragment."),o=this._bufferManager.appendFragment(i,r)),o.then(this._onAppendedHeadSegment(t)).then((()=>Promise.resolve(!t.aborted)))}_requestLicense(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.aborted){const e="Request license dropped: operation aborted.";return St.info(e),Promise.resolve(!1)}if(!this._player||!this._currentContent||!this._emeManager)return Promise.resolve(!1);const i=Date.now(),n=this._player.mediaKeys,a=this._currentContent,s=a.getFileId(),r=a.getLogData(),o=a.toLogJSON(),l=a.getKeySystem(),d=a.getLicenseEndpoint();let c;if(d)c=Promise.resolve(d);else{if(!s)return Promise.reject(new TypeError("Missing: fileId or licenseEndpoint"));c=this._licenseURLResolver.get(l,a.getMediaType()).then((e=>e.replace(/\{contentId\}/,s)))}const u=this._emeManager,m=this._tracker;return m.setKeySystem(l),m.setKeySystemImpl(u.getKeySystemImpl()),Promise.all([c,a.getInitParams()]).then((a=>{let[s,r]=a;m.setLicenseSessionLatency(Date.now()-i);const o=r.initDataType,l=t.initData||r.initData;if(n&&l&&o){const t=Object.assign(Object.assign({},r),{signal:e,initData:l,mediaKeys:n,licenseServer:s,initDataType:o});return u.createSessionWithParams(t)}return Promise.resolve(!1)})).then((t=>{if(e.aborted)return St.info("License tracking dropped: operation aborted."),Promise.resolve(!1);"boolean"!=typeof t&&"elapsed"in t&&(m.setLicenseGenerationLatency(t.elapsed.generate),m.setLicenseRequestLatency(t.elapsed.request),m.setLicenseUpdateLatency(t.elapsed.update));const n=Date.now()-i;return m.setKeyLatency(n),this.emit(Y.PLAYER_KEY_RECEIVED,{requestTime:n,logData:r}),St.info("License updated."),Promise.resolve(!0)})).catch((t=>{if(e.aborted)return Promise.resolve(!1);const i=!t||!("canPlayNext"in t)||t.canPlayNext;return this._emitError(t,i,o),Promise.reject(t)}))}_onTimeUpdate(){var e;if(!this._loaded||!(null===(e=this._player)||void 0===e?void 0:e.readyState)||!this._currentContent)return;const t=this._currentContent,i=this._player.seeking,n=this._player.currentTime,a="video"===t.getMediaType();if(t.isProtected()&&this._disableBufferingBeforeLicense&&!this._licenseRequested)return void St.log("Dropping time update event: buffering before license disabled.");if(!i&&this._lastTimeUpdatePostion&&this._lastTimeUpdatePostion===n)return void St.warn("Dropping duplicate time update.");this._lastTimeUpdatePostion=i?0:n,t.getKeySystem()!==K.FAIRPLAY&&(a||t.isProtected())&&this._bufferManager.progress(t,i,n);const s=this._player.duration,r=Nt(n),o=t.getLogData();i?(this._tracker.trackPositionChanged(r),this.emit(Y.PLAYER_POSITION_CHANGED,{position:r,logData:o})):(this._tracker.trackProgress(r,"getCurrentBitrate"in t?t.getCurrentBitrate():0),this.emit(Y.PLAYER_PROGRESS,{timestamp:Date.now(),position:r,played:this._tracker.getMSPlayed(),interval:500,logData:o})),!this._canPreloadEmitted&&s-n<=10?(this._canPreloadEmitted=!0,this.emit(Y.PLAYER_CAN_PRELOAD,null)):this._canPreloadEmitted=!1,clearTimeout(this._syntheticEndedToken),this._synthesizeEnded&&t.isProtected()&&this._isPlaying()&&(this._syntheticEndedToken=setTimeout(this._onSyntheticEnded,Nt(s-n)))}_isPlaying(){return!!this._player&&!this._player.paused}_createAudioContent(e,t){const i={manifestLatency:0,resolveLatency:0};return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:K.INVALID_SPOTIFY_KEY})).then((n=>Xe.create({abrManager:this._abrManager,mediator:this._mediator,keySystem:n.keySystem,licenseEndpoint:t.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:e,fileId:t.fileId,fileFormat:t.fileFormat,format:t.format,isAd:t.isAd,resolvedURL:t.resolvedURL,noManifest:t.noManifest,preloadedManifest:t.preloadedManifest,logData:t.logData,disableCache:this._disableCache,emitWarning:this._emitWarning,audioGain:t.audioGain}).load(i))).then((e=>{const n=this._tracker;return n.setResolveLatency(i.resolveLatency),n.setManifestLatency(i.manifestLatency),e.isProtected()&&t.fileId&&!this._disableCache&&this._cache.set(t.fileId,e),e}))}_createVideoContent(e,t){const i={manifestLatency:0,resolveLatency:0},n=t.fileId;return(this._emeManager?this._emeManager.getKeySystemInfo():this.getMediaConfig().then((e=>({keySystem:K.INVALID_SPOTIFY_KEY,audioFormats:e.formatsInfo.audio,videoFormats:e.formatsInfo.video})))).then((a=>$e.create({uri:e,abrManager:this._abrManager,mediator:this._mediator,resolver:this._videoResolver,keySystem:a.keySystem,licenseEndpoint:t.licenseEndpoint,fileId:n,noAuth:t.noAuth,format:W.MANIFEST_ID,isAd:t.isAd,transport:this._transport,videoFormats:a.videoFormats,videoResolution:this._videoResolution,audioFormats:a.audioFormats,disableCache:this._disableCache,disallowProfile:this._disallowProfile,allowMixedAVC1Codecs:this._allowMixedAVC1Codecs,audioGain:t.audioGain}).load(i))).then((e=>{const t=this._tracker;return t.setResolveLatency(i.resolveLatency),t.setManifestLatency(i.manifestLatency),e.isProtected()&&n&&!this._disableCache&&this._cache.set(n,e),e}))}_preinitMediaElement(){if(this._player||!this._emeManager)return Promise.resolve(this);const e=(0,o.createAbortControllerLike)();return this._emeManager.getKeySystemInfo().then((t=>{var i,n;const a=[];return(null===(i=t.audioFormats)||void 0===i?void 0:i[0])&&a.push(t.audioFormats[0].contentType),(null===(n=t.videoFormats)||void 0===n?void 0:n[0])&&a.push(t.videoFormats[0].contentType),!!a.length&&this._recreateMediaElement(a,e.signal,a.length>1?"video":"audio",t.keySystem!==K.FAIRPLAY)})).then((()=>this),(e=>(St.warn("Cannot precreate media element:",null==e?void 0:e.message),this)))}_setAudioGain(e){var t;null===(t=this._audioProcessor)||void 0===t||t.setAudioGain(e.getAudioGain())}getCodecInfo(){return{audiocodec:"mp3",bitrate:160}}getMediaSource(){return this._bufferManager.getMediaSource()}load(e,t,i){var a;const s=function(e,t){return t&&t.hasOwnProperty(e)}(t.uriProperty,e)?t.uriProperty:"uri",r=e[s];if(St.info("load",r),!r)return Promise.reject(new z(n.PLAYER_CANNOT_FIND_PLAYABLE_URI,"Cannot find a playable URI."));if(!e.logData)return Promise.reject(new Error("Invalid track: logging info not specified"));this.stop(e.logData,e.mediaType),this._loaded=!1,this._licenseRequested=!1,this._buffering=!0,this._currentContent=null,this._subtitleManager.setVideoContent(null);const l=++this._playId;this._abortController=(0,o.createAbortControllerLike)();const d=this._abortController.signal,c=this._tracker;let u;c.trackLoadStart(r,e.fileId,l.toString(),e.logData,e.metadata),this.emit(Y.PLAYER_BEFORE_LOAD,{track:e,options:t,logData:e.logData,uri:r,timestamp:Date.now()}),this._bufferManager.setPlayId(l),this._loadingOptions={position:Tt(t.position||0),autoplay:!("autoplay"in t)||t.autoplay,poster:e.poster,useDefaultPlaybackSpeed:!!(null===(a=e.options)||void 0===a?void 0:a.useDefaultPlaybackSpeed),callback:i},c.setPlayIntended(this._loadingOptions.autoplay),c.setPlayedThreshold(t.playedThreshold);const m=this._cache,_="video"===e.mediaType?this._createVideoContent.bind(this,r,e):this._createAudioContent.bind(this,r,e);if(e.fileId){const t=e.fileId,i=this._preloadingTracks[t],n=this._disableCache?null:m.get(t);i?(St.info("Waiting for preloading track.",t),u=i.then((e=>(St.info("Preloading succeeded.",t),c.setResolveLatency(e.resolveLatency),c.setManifestLatency(e.manifestLatency),m.get(t))),(()=>(St.info("Preloading failed, creating new track",t),_())))):n?(St.info("Using cached track.",t,n),c.setMemoryCached(!0),u=Promise.resolve(n)):(St.info("Creating new track from fileId",t),u=_())}else St.info("Creating new track without fileId",e.resolvedURL),u=_();return u.then((t=>{if(t.isProtected()&&!this._emeManager)throw new z(n.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported");t.setLogData(e.logData),c.setCalculatedDuration(Nt(t.getCalculatedDuration())),this._upcomingContent=t})).then(this._prepareMediaElement.bind(this,this._loadingOptions,d)).then((()=>{this._audioProcessor.setPlayer(this._player)})).then(this._loadContent.bind(this,this._loadingOptions,d)).then(this._handleLoadingComplete,this._handleLoadingError.bind(this,r,e,d))}preload(e){const t=!this._disableCache,i=e.uri,n=e.fileId,a=this._cache;if(!t||!n||!this._emeManager)return Promise.resolve(null);const s="video"===e.mediaType;if(!(ft[e.format]&&!s)||a.get(n))return Promise.resolve(null);const r=this._preloadingTracks,o=r[n];if(o)return o;St.info("Preloading track",n);const l={manifestLatency:0,resolveLatency:0},d=this._emeManager.getKeySystemInfo().then((t=>Xe.create({abrManager:this._abrManager,keySystem:t.keySystem,licenseEndpoint:e.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:i,fileId:n,format:e.format,fileFormat:e.fileFormat,isAd:e.isAd,resolvedURL:e.resolvedURL,noManifest:e.noManifest,preloadedManifest:e.preloadedManifest,logData:e.logData,disableCache:this._disableCache,emitWarning:this._emitWarning,audioGain:e.audioGain}).load(l))).then((t=>Promise.all([t,"MP4_CBCS"!==e.format?t.getBufferForFragment(t.getHeadFragment()):null]))).then((e=>{let[t]=e;return a.set(n,t),delete r[n],St.info("Cached",n),l})).catch((e=>(delete r[n],St.warn("Preloading error",e),this.emit(Y.PLAYER_PRELOADING_ERROR,{error:e,track:e.track||null,canPlayNext:!("canPlayNext"in e)||e.canPlayNext,preloading:!0}),Promise.reject(e))));return r[n]=d,d}togglePlay(){return this._isPlaying()?this.pause():this.resume()}setSubtitleLanguage(e){this._subtitleManager.setLanguage(e)}getSubtitleLanguages(){return this._subtitleManager.getAvailableLanguages()}getActiveSubtitleLanguage(){return this._subtitleManager.getActiveLanguage()}deactivateCueEvents(){this._subtitleManager.deactivateListeners()}activateCueEvents(){this._subtitleManager.activateListeners()}setVolume(e,t){if(!this.emitSync(Y.PLAYER_BEFORE_VOLUME_CHANGE,{volume:e,options:t}).defaultPrevented){if(e<0||e>1)throw new z(n.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE,"Volume should be in range [0, 1]");this._playerVolume=e,this._player&&(this._player.volume=this._cubicVolume?e*e*e:e)}}getVolume(){return this._playerVolume}getPlayerState(){var e,t,i;const n=this._player,a=this._currentContent,s={src:(null==n?void 0:n.src)?`data:${(null==a?void 0:a.getFileId())||"unknown"}`:void 0,height:(null==n?void 0:n.clientWidth)||0,width:(null==n?void 0:n.clientHeight)||0},r={};if(a){const[e,t]=a.getPlayableCodecs();r.audio_format=e,r.video_format=t,a instanceof $e&&n instanceof HTMLVideoElement&&(r.video_height=n.videoHeight,r.video_width=n.videoWidth,s.poster=n.poster)}return{playing:null!==(e=!(null==n?void 0:n.paused))&&void 0!==e&&e,position:n?Nt(n.currentTime):0,duration:n?Nt(n.duration):0,volume:null!==(t=this._playerVolume)&&void 0!==t?t:1,playback_speed:null!==(i=null==n?void 0:n.playbackRate)&&void 0!==i?i:0,buffering:this._buffering,media_type:(null==a?void 0:a.getMediaType())||null,media_info:r,player_element:s}}getPlayerPosition(){return this._player?Nt(this._player.currentTime):0}seek(e){var t;if(!this._player)return;const i=null===(t=this._abortController)||void 0===t?void 0:t.signal,n=()=>{if(!this._player||(null==i?void 0:i.aborted))return void St.info("Seek dropped: operation aborted.");let t=Tt(e);t<0?t=0:t>=this._player.duration&&(t=this._player.duration),this._player.currentTime=t};this._loaded?n():this.once(Y.PLAYER_LOAD,n),this._getBufferingLatency().then((e=>{this._tracker.trackSeekRebuffering(e)}))}pause(){return new Promise((e=>{this._player&&this._isPlaying()?e(this._player&&this._player.pause()):e()}))}resume(){return this._audioProcessor.resume().then((()=>{this._player&&!this._isPlaying()&&Promise.resolve(this._player.play())}))}stop(e,t){var i,n;const a=[],s=e||{};this.emit(Y.PLAYER_BEFORE_STOP,{timestamp:Date.now(),logData:s}),null===(i=this._abortController)||void 0===i||i.abort(),this._tracker.trackStopped(this._player?Nt(this._player.currentTime):-1,e,this.getStatistics()||void 0),this._bufferManager.abort(!0),this._emeManager&&a.push(this._emeManager.destroySessions());const r=this._player;if(r){this._subtitleManager.clear(),this._fatalOnNextError=this._shouldNextErrorBeFatal(),this._fatalOnNextError&&St.warn("MediaError detected: next immediate media error will be fatal.");const e=r.src;if(e)yt.test(e)&&URL.revokeObjectURL(e),r.removeAttribute("src");else{const e=nt(r.getElementsByTagName("source"));St.info(`HTMLSourceElements to removed: ${e.length}`);for(const t of e)r.removeChild(t);St.info("Releasing HLS URLs"),null===(n=this._currentContent)||void 0===n||n.releaseHLSURL()}r.load()}if(this._currentContent&&this._disableCache&&this._currentContent.clearCachedBuffers(),r&&this._currentContent&&"video"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._videoPlayerContainer);e&&r.parentNode===e&&(this._newElementPerTrack||"video"!==t)&&(this._subtitleManager.setPlayer(null),e.removeChild(r),this.emit(Y.PLAYER_VIDEO_ELEMENT_REMOVED,null))}else if(r&&this._currentContent&&"audio"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._audioPlayerContainer);e&&r.parentNode===e&&(this._newElementPerTrack||"audio"!==t)&&e.removeChild(r)}return this.emit(Y.PLAYER_STOPPED,null),Promise.all(a).then((()=>!0))}hideSubtitles(){this._subtitleManager.hide()}showSubtitles(){this._subtitleManager.show()}areSubtitlesShown(){return this._subtitleManager.visible()}getKeySystemInfo(){return this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve(null)}getVideoVariants(){if(!(this._currentContent&&this._currentContent instanceof $e))return[];const e=[],t=this._currentContent.getVideoProfiles();for(const i of t)e.push({width:i.video_width,height:i.video_height,bitrate:i.video_bitrate});return e}setPreferredBitrate(e){return"number"!=typeof e?Promise.resolve(H.INVALID):(this._preferredBitrate=e,this._currentContent&&"video"===this._currentContent.getMediaType()&&e>0&&this._bufferManager.abort(!0),this._abrManager.overrideBitrate(e),Promise.resolve(H.SUCCESS))}getCurrentBandwidth(){return this._abrManager.getBandwidthEstimate()}setBackgrounded(e){this._abrManager.overrideBitrate(e?1e-32:this._preferredBitrate)}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._currentContent instanceof $e&&this._currentContent.setVideoResolution(this._videoResolution)}activateElement(){return this._playerActivated||!this._player||this._player.src?(this._audioProcessor.resume(),!1):(this._audioProcessor.resume().then((()=>{var e;return null===(e=this._player)||void 0===e?void 0:e.load()})),this._playerActivated=!0,!0)}getMediaConfig(){return void 0===this._mediaConfig?function(e,t){const i=t||Rt("video"),n=e=>{i.canPlayType("audio/mp3")&&(e.formats.audio.push("audio/mp3"),e.formatsInfo.audio.push({mimeType:"audio/mp3",codec:"mp3",contentType:'audio/mp3; codecs="mp3"'}),e.supports.unprotected_audio=!0)};if(e)return e.getKeySystemInfo().then((e=>{const{audioFormats:t,videoFormats:i}=e,a={supports:{protected_audio:!!t.length,unprotected_audio:!0,protected_video:!!i.length,unprotected_video:!0},formats:{audio:t.map((e=>e.contentType)),video:i.map((e=>e.contentType))},formatsInfo:{audio:[...t],video:[...i]}};return a.keysystem=e.keySystem,a.keysystem_impl=e.keySystemImpl,n(a),a}));const a="undefined"!=typeof window&&window.MediaSource?e=>MediaSource.isTypeSupported(e):e=>"probably"===i.canPlayType(e)||"probably"===i.canPlayType(e.split(";")[0]),s=ye([Se[0]],a),r=[],o=[],l=[],d=[];if(s){const{audioCapabilities:e,videoCapabilities:t}=s;for(const i of e)r.push(i.contentType),l.push(Ne(i.contentType));for(const i of t)o.push(i.contentType),d.push(Ne(i.contentType))}const c={supports:{protected_audio:!1,unprotected_audio:!!r.length,protected_video:!1,unprotected_video:!!o.length},formats:{audio:r,video:o},formatsInfo:{audio:l,video:d}};return n(c),Promise.resolve(c)}(this._emeManager,this._player).then((e=>(this._mediaConfig=e,this._mediaConfig))):Promise.resolve(this._mediaConfig)}setPlaybackSpeed(e){var t;return!(!isFinite(e)||e<=0)&&(!(null===(t=this._loadingOptions)||void 0===t?void 0:t.useDefaultPlaybackSpeed)&&(this._playerSpeed=null!=e?e:1,this._player&&(this._player.playbackRate=this._playerSpeed,this._tracker.trackSpeedChanged(this._playerSpeed)),!0))}getStatistics(){return this._player&&this._currentContent?this._statistics.getSample(this._player,this._currentContent):null}getAudioProcessor(){return this._audioProcessor}}class bt extends Error{constructor(e,t){super(t),this.debug={},this.name="LoggingError",this.message=t,this.code=e}}const Ct="7.21.3-1cb09a4",It="7.21.3",Lt=b.P.forTag("playback.logger");class Pt extends c.vp{constructor(e){super(),this._currentTrackingData=null,this._sequenceId=0,this._sequenceSessionStorage={},this._sessionId="0",this._transport=e.transport,this._logSender=e.logSender,this._player=e.player,this._init()}static create(e){return new Pt(e)}_init(){const e=this._player;e.on(Y.PLAYER_LOAD,this._onPlayerLoad.bind(this)),e.on(Y.PLAYER_ERROR,this._onError.bind(this,!1)),e.on(Y.PLAYER_WARNING,this._onError.bind(this,!0)),e.on(Y.PLAYER_PRELOADING_ERROR,this._onError.bind(this,!1)),e.on(Y.PLAYER_TRACKING_DATA_CREATED,this._onTrackingDataCreated.bind(this)),e.on(Y.PLAYER_TRACKING_DATA_FINALIZED,this._onTrackingDataFinalized.bind(this)),e.on(Y.PLAYER_PLAYBACK_START,this._onPlaybackStart.bind(this))}_emitError(e,t){this.emit(Y.LOGGER_ERROR,{error:e,trackingData:t})}_onError(e,t){var i,a,s;const r=t.data,o=this._currentTrackingData;if(!o||o.noLog)return;const l=r.error,d=null!==(i=null==l?void 0:l.debug)&&void 0!==i?i:{};d.position="position"in r?r.position:0;const c={track:r.track||{},debug:d,preloading:"preloading"in r&&!!r.preloading,session_id:this._sessionId,playback_id:o.playbackId||null,player_play_id:"playId"in r?r.playId:null,http_status_code:null!==(a=null==l?void 0:l.status)&&void 0!==a?a:null,license_server:null!==(s=null==l?void 0:l.licenseServer)&&void 0!==s?s:null};this._logError(l.code||n.UNKNOWN,l,c,o,e)}_onPlayerLoad(e){const t=e.data.logData;if(t)if(t.impressionURLs)for(const i of t.impressionURLs)this._logImpression(i);else t.impressionURL&&this._logImpression(t.impressionURL)}_onPlaybackStart(e){const t=e.data.trackingData;t.noLog||t.noStats||this._logPlaybackStart(t)}_onTrackingDataCreated(e){const t=e.data.trackingData;t.noLog?this._currentTrackingData=null:(this._currentTrackingData=t,this._setSessionId(),t.noTSV||this._setSequenceId())}_setSessionId(){this._sessionId=this._transport.getInitTime().toString()}_setSequenceId(){this._sessionId&&(this._sequenceId=this._getSequenceId(this._sessionId))}_onTrackingDataFinalized(e){const t=e.data.trackingData;if(t.noLog)return;const i=this._sessionId!==this._transport.getInitTime().toString();if(i&&this._setSessionId(),t.playbackId&&!t.noTSV){if(i&&this._setSequenceId(),!t.playIntended&&!t.played)return void this._rollbackSequenceId(this._sessionId);this._logTrackStreamVerification(t)}t.noStats||this._logPlaybackStats(t)}_logTrackStreamVerification(e){const t={play_track:e.currentTrackUri,playback_id:e.playbackId,ms_played:e.msPlayed,ms_nominal_played:e.msNominalPlayed,session_id:this._sessionId,sequence_id:this._sequenceId,next_playback_id:e.nextPlaybackId};Lt.debug("Logged TrackStreamVerification",t),this._logSender.logTrackStreamVerification(t).catch((i=>{const a=new bt(n.TSV_SENDING_FAILED,i.message||"Unknown reason.");this._logError(a.code,i,t,e,!1),this._emitError(a,e)}))}_logPlaybackStats(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,internal_play_id:e.internalPlayId,memory_cached:e.memoryCached,persistent_cached:e.persistentCached,audio_format:e.audiocodec||"",video_format:e.videocodec||"",manifest_id:e.fileId,protected:!1,key_system:e.keySystem,key_system_impl:e.keySystemImpl,urls_json:JSON.stringify(e.urls),start_time:e.loadTime,end_time:e.stopTime,external_start_time:e.externalLoadTime,ms_play_latency:e.msPlayLatency,ms_init_latency:e.msInitLatency,ms_head_latency:e.msHeadLatency,ms_manifest_latency:e.msManifestLatency,ms_resolve_latency:e.msResolveLatency,ms_license_session_latency:e.msLicenseSessionLatency,ms_license_generation_latency:e.msLicenseGenerationLatency,ms_license_request_latency:e.msLicenseRequestLatency,ms_license_update_latency:e.msLicenseUpdateLatency,ms_played:e.msPlayed,ms_nominal_played:e.msNominalPlayed,ms_file_duration:e.msFileDuration,ms_actual_duration:e.msActualDuration,ms_metadata_duration:e.msMetadataDuration,ms_start_position:e.startPosition,ms_end_position:e.position,ms_seek_rebuffer:e.msSeekRebuffering,ms_seek_rebuffer_longest:e.maxMsSeekRebuffering,ms_stall_rebuffer:e.msStalled,ms_stall_rebuffer_longest:e.maxMsStalled,n_stalls:e.nStalls,n_rendition_upgrade:e.nRenditionUpgrade,n_rendition_downgrade:e.nRenditionDowngrade,bps_bandwidth_max:e.bpsBandwidthMax,bps_bandwidth_min:e.bpsBandwidthMin,bps_bandwidth_avg:e.bpsBandwidthAvg,n_seekback:e.nSeeksBackward,n_seekforward:e.nSeeksForward,start_bitrate:e.startBitrate||e.bitrate||0,audio_quality:e.audioQuality,time_weighted_bitrate:e.timeWeightedBitrate,reason_start:e.reasonStart,reason_end:e.reasonEnd,initially_paused:!e.playIntended,had_error:e.hadError,n_warnings:e.nWarnings,n_navigator_offline:e.nOffline,session_id:this._sessionId,sequence_id:this._sequenceId,client_id:e.clientId,correlation_id:e.correlationId,n_dropped_video_frames:e.droppedVideoFrames,n_total_video_frames:e.totalVideoFrames,resolution_max:e.maxResolution||0,resolution_min:e.minResolution||0};Lt.info("Logging PlaybackStats"),this._logSender.logJSSDKPlaybackStats(t).catch((i=>{const a=new bt(n.PLAYBACK_STATS_SENDING_FAILED,i.message||"Unknown reason.");this._logError(a.code,i,t,e,!1),this._emitError(a,e)}))}_logPlaybackStart(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,session_id:this._sessionId,ms_start_position:e.startPosition,initially_paused:!e.playIntended,client_id:e.clientId,correlation_id:e.correlationId};Lt.info("Logging PlaybackStart"),this._logSender.logJSSDKPlaybackStart(t).catch((i=>{const a=new bt(n.PLAYBACK_START_SENDING_FAILED,i.message||"Unknown reason.");this._logError(a.code,i,t,e,!1),this._emitError(a,e)}))}_getSequenceId(e){let t=this._sequenceSessionStorage[e];return t||(t=0),t+1>=9007199254740991&&(t=0),this._sequenceSessionStorage[e]=t+1,t}_rollbackSequenceId(e){const t=this._sequenceSessionStorage[e];t&&(this._sequenceSessionStorage[e]=Math.max(t-1,0))}_logImpression(e){this._transport.request(e,{forget:!0}).catch((function(e){Lt.warn("Unable to send impression request",e)}))}_logError(e,t,i,n,a){let s="";t&&(s=t.stack||"",s||(s=t.toString()));const r={source:"playback",source_version:Ct||U.eV.UNKNOWN,type:e||U.eV.UNKNOWN,message:t&&t.message||U.eV.EMPTY,stack:JSON.stringify(s),json_data:JSON.stringify(i||{}),json_data_version:"1.0.0",client_id:n.clientId,correlation_id:n.correlationId};a?this._logSender.logJSSDKWarning(r).catch((e=>Lt.warn("Failed to log warning",r,e))):this._logSender.logJSSDKError(r).catch((e=>Lt.warn("Failed to log error",r,e)))}}class Dt extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.STORAGE_ERROR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Storage Error";super(t),this.status=-1,this.fileId="",this.debug={},this.canPlayNext=!0,this.code=e,this.message=t,this.name="StorageError"}}const Ot=b.P.forTag("playback.storage_resolve");class Ft{constructor(e){this._transport=e}_parseResponse(e,t){var i;let a;if(200!==t.status)return a=new Dt(n.STORAGE_FAILED_WITH_STATUS,`Storage Resolve responded with ${t.status}`),a.status=t.status,a.fileId=e,Promise.reject(a);const s=t.body;if(!(null===(i=null==s?void 0:s.cdnurl)||void 0===i?void 0:i.length))return a=new Dt(n.STORAGE_RETURNED_NO_TRACKS,`Storage Resolve returned no tracks for fileId ${e}`),a.fileId=e,Promise.reject(a);const r={uri:s.cdnurl[0],uris:s.cdnurl,protection:"cenc"};return Promise.resolve(r)}getCDNURL(e,t){Ot.info("Requesting CDN URL for ",e);const i="files/audio/interactive",n=`@webgate/storage-resolve/${t?`v2/${i}/${t}/${e}`:`${i}/${e}`}?version=10000000&product=9&platform=39&alt=json`;return this._transport.request(n,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then(this._parseResponse.bind(this,e))}getManifest(e){const t=`https://seektables.scdn.co/seektable/${e}.json`;return Ot.info("Requesting JSON manifest for ",e),this._transport.request(t,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then((t=>{let i;return 200!==t.status?(i=new Dt(n.STORAGE_TRACK_MANIFEST_FAILED,`Track manifest request failed with status code ${t.status}`),i.debug.file_id=e,i.status=t.status,Promise.reject(i)):t.body?t.body:(i=new Dt(n.STORAGE_TRACK_MANIFEST_EMPTY,"Received empty manifest."),i.debug.file_id=e,i.status=t.status,Promise.reject(i))}))}}class wt extends Error{constructor(e,t){super(t),this.debug={},this.name="TrackingError",this.message=t,this.code=e}}class xt{constructor(){this._version="1.0.0",this._map={}}clear(){this._map={}}track(e,t){let i=this._map[e];i||(i={url:e,segments:0,bandwidths:[],totalBandwidth:0},this._map[e]=i),i.segments+=1,i.bandwidths.push(t.bandwidth),i.totalBandwidth+=t.bandwidth}toJSON(){const e=[];for(const t in this._map){if(!this._map[t])continue;const i=this._map[t];i&&e.push({url:t,segments:i.segments,avg_bw:parseFloat((i.totalBandwidth/i.bandwidths.length).toFixed(7))})}return{version:this._version,urls:e}}}class Mt{constructor(){this._bitrates={},this._isFinalized=!1,this._needsEndSegment=!1,this._segments=[],this._cdnURLTracker=new xt,this._currentSpeed=1,this.audiocodec=null,this.bitrate=0,this.audioQuality=void 0,this.bufferLoadStartTime=0,this.urls={},this.currentTrackUri="",this.displayTrack="",this.externalLoadTime=0,this.fileId="",this.gaiaDevId="none",this.hadError=!1,this.internalPlayId="",this.isProtected=!1,this.keySystem="",this.keySystemImpl="",this.lastPlayPosition=-1,this.loadTime=0,this.localTimeMs=-1,this.maxContinuous=0,this.maxMsSeekRebuffering=0,this.maxMsStalled=0,this.memoryCached=!1,this.msActualDuration=0,this.msMetadataDuration=0,this.msFileDuration=0,this.msHeadLatency=0,this.msInitLatency=0,this.msKeyLatency=0,this.msLicenseGenerationLatency=0,this.msLicenseRequestLatency=0,this.msLicenseSessionLatency=0,this.msLicenseUpdateLatency=0,this.msManifestLatency=0,this.msPlayed=0,this.msNominalPlayed=0,this.msPlayedUnion=0,this.msPlayLatency=0,this.msResolveLatency=0,this.msSeekRebuffering=0,this.msSeeksBackward=0,this.msSeeksForward=0,this.nextPlaybackId="",this.nOffline=0,this.noLog=!1,this.noTSV=!1,this.noStats=!1,this.nWarnings=0,this.msStalled=0,this.nSeeksBackward=0,this.nSeeksForward=0,this.nSpeedChanges=!1,this.nStalls=0,this.nRenditionUpgrade=0,this.nRenditionDowngrade=0,this.bpsBandwidthMax=0,this.bpsBandwidthMin=0,this.bpsBandwidthAvg=0,this.totalBandwidth=0,this.lastBitrate=0,this.persistentCached=!1,this.playbackId="",this.playContext="",this.played=!1,this.position=0,this.reasonEnd="unknown",this.reasonStart="unknown",this.referrer="unknown",this.referrerVendor="unknown",this.referrerVersion="unknown",this.sourceEnd="unknown",this.sourceStart="unknown",this.startPosition=0,this.stopTime=0,this.streamingRule="none",this.timeWeightedBitrate=0,this.totalBytes=0,this.playIntended=!1,this.videocodec=null,this.clientId="unknown",this.correlationId="unknown",this.droppedVideoFrames=0,this.totalVideoFrames=0,this.maxResolution=0,this.minResolution=0}static create(){return new Mt}_calculateUnion(){const e=this._segments.slice(0);let t=0,i=0,n=0,a=0,s=0,r=0,o=this.maxContinuous;for(;s<e.length;s++)s%2!=0&&void 0!==e[s-1]&&"start"===e[s-1].type&&(r=e[s].time-e[s-1].time,o=r>o?r:o);for(this.maxContinuous=o,e.sort(((e,t)=>e.time-t.time));a<e.length;a++)"start"===e[a].type&&(0===i&&(n=a),++i),"end"===e[a].type&&(--i,0===i&&(t+=e[a].time-e[n].time));return t}_calculateWeightedBitrate(e){const t=this._bitrates;let i=0;for(const n in t)n&&t.hasOwnProperty(n)&&e>0&&(i+=parseInt(n,10)*t[n]/e);return Math.round(i)}registerVideoVariant(e){const t=e.bitrate;t&&(this._bitrates[t]=this._bitrates[t]||0,this.startBitrate||(this.startBitrate=t)),e.audioProfile&&(this.audiocodec=e.audioProfile.audio_codec),e.videoProfile&&(this.videocodec=e.videoProfile.video_codec,this.lastBitrate=e.videoProfile.video_bitrate,this.minResolution=e.videoProfile.video_resolution,this.maxResolution=e.videoProfile.video_resolution)}addStartSegment(){this._segments.push({type:"start",time:this.position}),this._needsEndSegment=!0}addEndSegment(){this._needsEndSegment&&(this._segments.push({type:"end",time:this.position}),this._needsEndSegment=!1)}addMSPlayed(e){if(e){if(e<0)throw new TypeError(`Cannot add negative msPlayed value: ${e}`);this.msPlayed+=e/this._currentSpeed,this.msNominalPlayed+=e}}addSpeedChange(e){this.nSpeedChanges=!0,this._currentSpeed=e}trackBitrate(e,t){const i=e||"dummy";this._bitrates[i]=this._bitrates[i]||0,this._bitrates[i]+=t}trackBufferURL(e,t){this._cdnURLTracker.track(e,t)}finalize(){if(this._isFinalized)throw new wt(n.TRACK_DATA_ALREADY_FINALIZED,"TrackData already finalized.");this.msPlayedUnion=this._calculateUnion(),this.nSeeksBackward||this.nSeeksForward||this.nSpeedChanges||(this.msNominalPlayed=this.maxContinuous=this.msPlayedUnion,this.msPlayed=this.msNominalPlayed/this._currentSpeed,this.nSpeedChanges=!1);const e=this.msPlayed;return this.timeWeightedBitrate=this._calculateWeightedBitrate(e),this.startBitrate||(this.startBitrate=this.bitrate),this.urls=this._cdnURLTracker.toJSON(),this._isFinalized=!0,!0}getURLsJSON(){var e,t;return null!==(t=null===(e=this._cdnURLTracker.toJSON().urls)||void 0===e?void 0:e.map((e=>{let{url:t}=e;return t})))&&void 0!==t?t:[]}getPlaybackStats(){let e;switch(this.keySystem){case K.WIDEVINE:e="widevine";break;case K.PLAYREADY:case K.PLAYREADY_HARDWARE:e="playready";break;default:e="none"}return{ms_total_est:this.msActualDuration,ms_metadata_duration:this.msMetadataDuration,ms_manifest_latency:this.msManifestLatency,ms_latency:this.msPlayLatency,start_offset_ms:this.startPosition,ms_initial_buffering:this.msPlayLatency,ms_seek_rebuffering:this.msSeekRebuffering,ms_stalled:this.msStalled,max_ms_seek_rebuffering:this.maxMsSeekRebuffering,max_ms_stalled:this.maxMsStalled,n_stalls:this.nStalls,n_rendition_upgrade:this.nRenditionUpgrade,n_rendition_downgrade:this.nRenditionDowngrade,bps_bandwidth_max:this.bpsBandwidthMax,bps_bandwidth_min:this.bpsBandwidthMin,bps_bandwidth_avg:this.bpsBandwidthAvg,audiocodec:this.audiocodec?this.audiocodec.toLowerCase():void 0,videocodec:this.videocodec?this.videocodec.toLowerCase():void 0,start_bitrate:this.startBitrate||this.bitrate||void 0,full_screen:void 0,time_weighted_bitrate:this.timeWeightedBitrate,buffering_percentage:void 0,prefetched_bytes:void 0,prefetched_bytes_loaded:void 0,prefetched_initial_bitrate:void 0,key_system:e,ms_key_latency:this.msKeyLatency,total_bytes:this.totalBytes,local_time_ms:this.localTimeMs,ms_played_background:void 0,n_dropped_video_frames:this.droppedVideoFrames,n_total_video_frames:this.totalVideoFrames,resolution_max:this.maxResolution,resolution_min:this.minResolution}}isFinalized(){return this._isFinalized}}const Ut=b.P.forTag("playback.tracker");class jt extends c.vp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._playedThreshold=31e3,this._playedThresholdReached=!1,this._trackingData=null,this._playedThreshold=e.playerThreshold||31e3}static create(e){return new jt(e)}_checkPlayedThreshold(){const e=this._trackingData;!e||!this._playedThreshold||this._playedThresholdReached||e.msPlayed<this._playedThreshold||(this._playedThresholdReached=!0,this.emit(Y.TRACKER_PLAYED_THRESHOLD_REACHED,{played:e&&e.msPlayed||0,threshold:this._playedThreshold}))}getMSPlayed(){return this._trackingData?this._trackingData.msPlayed:0}getStallsInformation(){return this._trackingData?{nStalls:this._trackingData.nStalls,msTotalStalled:this._trackingData.msStalled}:{nStalls:0,msTotalStalled:0}}trackLoadStart(e,t,i,n,a){const s=Mt.create();this._trackingData=s,this._playedThresholdReached=!1,s.fileId=null!=t?t:"",s.currentTrackUri=e,s.loadTime=Date.now(),s.internalPlayId=i,s.externalLoadTime=n.externalLoadTime||0,s.displayTrack=n.displayTrack||"",s.playbackId=n.playbackId||"",s.playContext=n.playContext||"",s.reasonStart=n.reason||"unknown",s.sourceStart=n.source||"unknown",s.clientId=n.clientId||"",s.correlationId=n.correlationId||"";const r=n.referrer||{};s.referrer=void 0!==r.name?r.name:"unknown",s.referrerVersion=void 0!==r.version?r.version:"unknown",s.referrerVendor=void 0!==r.vendor?r.vendor:"unknown";const o=n.format||{};o.codec&&(s.audiocodec=o.codec.toLowerCase()),o.bitrate&&(s.bitrate=o.bitrate),o.audioQuality&&(s.audioQuality=o.audioQuality),s.gaiaDevId=n.deviceId||"none",s.noLog=n.noLog||!1,s.noTSV=n.noTSV||!1,s.noStats=n.noStats||!1,s.contentMetadata=a,"number"==typeof(null==a?void 0:a.displayDuration)&&(s.msMetadataDuration=a.displayDuration),this.emit(Y.TRACKER_TRACKING_DATA_CREATED,{trackingData:s})}trackBufferLoadStart(){const e=this._trackingData;e&&(e.bufferLoadStartTime=Date.now())}trackBytesDownloaded(e){const t=this._trackingData;t&&(t.totalBytes+=e)}trackLoadDone(e){const t=this._trackingData;if(!t)return;const i=Date.now();t.msInitLatency=i-t.bufferLoadStartTime,t.localTimeMs=i,t.position=e,t.addStartSegment()}trackPlay(e,t){const i=this._trackingData;i&&(i.played||this.emit(Y.TRACKER_PLAYBACK_START,{trackingData:i}),i.played=!0,i.position=e,i.startPosition=e,i.addSpeedChange(t||1))}trackCanPlayThrough(){const e=this._trackingData;if(!e||e.msPlayLatency)return;const t=Date.now();e.msPlayLatency=t-e.loadTime,e.msHeadLatency=t-e.bufferLoadStartTime}trackBufferURL(e,t){const i=this._trackingData;i&&i.trackBufferURL(e,t)}trackNavigatorOffline(){const e=this._trackingData;e&&(e.nOffline+=1)}trackSeekRebuffering(e){const t=this._trackingData;t&&(e>t.maxMsSeekRebuffering&&(t.maxMsSeekRebuffering=e),t.msSeekRebuffering+=e)}trackMsStalled(e){const t=this._trackingData;t&&(e>t.maxMsStalled&&(t.maxMsStalled=e),t.msStalled+=e,t.nStalls++)}trackLoadFailed(){const e=this._trackingData;e&&(e.msPlayLatency=Date.now()-e.loadTime,e.position=0,e.addStartSegment())}trackStopped(e,t,i){var n,a,s,r;const o=this._trackingData;if(!o||o.isFinalized())return;const l=Date.now();if(o.stopTime=l,o.lastPlayPosition>=0&&e>=0&&o.lastPlayPosition<e){const t=e-o.lastPlayPosition;o.addMSPlayed(t)}o.addEndSegment(),o.sourceEnd=t.source||"unknown",o.reasonEnd=t.reason||"unknown",o.nextPlaybackId=t.playbackId||"",o.droppedVideoFrames=null!==(a=null===(n=null==i?void 0:i.video)||void 0===n?void 0:n.droppedVideoFrames)&&void 0!==a?a:0,o.totalVideoFrames=null!==(r=null===(s=null==i?void 0:i.video)||void 0===s?void 0:s.totalVideoFrames)&&void 0!==r?r:0,o.finalize(),Ut.info("Tracker data finalized.");const d=o.getPlaybackStats();this.emit(Y.TRACKER_TRACKING_DATA_FINALIZED,{trackingData:o,playbackStats:d})}trackPositionChanged(e){const t=this._trackingData;if(!t)return;const i=t.position;e!==i&&(t.addEndSegment(),e>i?(t.nSeeksForward++,t.msSeeksForward+=e-i):e<i&&(t.nSeeksBackward++,t.msSeeksBackward+=i-e),t.position=e,t.lastPlayPosition=-1,t.addStartSegment())}trackPlaying(e){const t=this._trackingData;if(t){if(t.lastPlayPosition>=0&&t.lastPlayPosition<e){const i=e-t.lastPlayPosition;t.addMSPlayed(i)}t.position=e,t.lastPlayPosition=e}}trackPaused(e){const t=this._trackingData;if(t){if(t.lastPlayPosition>=0&&t.lastPlayPosition<e){const i=e-t.lastPlayPosition;t.addMSPlayed(i)}t.position=e,t.lastPlayPosition=e}}trackProgress(e,t){const i=this._trackingData;if(!(null==i?void 0:i.played))return;let n=0;if(i.lastPlayPosition>=0){if(n=e-i.lastPlayPosition,n<0)return void Ut.warn("Skipping msPlayed calculation: late progress event.");i.addMSPlayed(n)}this._checkPlayedThreshold(),i.position=e,i.lastPlayPosition=e,t&&i.trackBitrate(t,n)}trackSpeedChanged(e){const t=this._trackingData;t&&t.addSpeedChange(e)}trackVideoLoadStart(e){const t=this._trackingData;t&&t.registerVideoVariant(e)}trackWarning(){const e=this._trackingData;e&&e.nWarnings++}trackOffline(){const e=this._trackingData;e&&e.nOffline++}setActualDuration(e){const t=this._trackingData;t&&(t.msActualDuration=e)}setKeySystem(e){const t=this._trackingData;t&&(t.keySystem=e)}setKeySystemImpl(e){const t=this._trackingData;t&&(t.keySystemImpl=e)}setManifestLatency(e){const t=this._trackingData;t&&(t.msManifestLatency=e)}setPlayIntended(e){const t=this._trackingData;t&&(t.playIntended=e)}setKeyLatency(e){const t=this._trackingData;t&&(t.msKeyLatency=e)}setMemoryCached(e){const t=this._trackingData;t&&(t.memoryCached=e)}setPersistentCached(e){const t=this._trackingData;t&&(t.persistentCached=e)}setProtected(e){const t=this._trackingData;t&&(t.isProtected=e)}setHadError(e){const t=this._trackingData;t&&(t.hadError=e)}setLicenseSessionLatency(e){const t=this._trackingData;t&&(t.msLicenseSessionLatency=e)}setLicenseGenerationLatency(e){const t=this._trackingData;t&&(t.msLicenseGenerationLatency=e)}setLicenseRequestLatency(e){const t=this._trackingData;t&&(t.msLicenseRequestLatency=e)}setLicenseUpdateLatency(e){const t=this._trackingData;t&&(t.msLicenseUpdateLatency=e)}setResolveLatency(e){const t=this._trackingData;t&&(t.msResolveLatency=e)}setCalculatedDuration(e){const t=this._trackingData;t&&(t.msFileDuration=e)}setPlayedThreshold(e){this._playedThreshold=e}trackFragment(e){const t=this._trackingData;if(!t)return;const{bandwidth:i,resolution:n}=e;n&&((n<t.minResolution||!t.minResolution)&&(t.minResolution=n),n>t.maxResolution&&(t.maxResolution=n)),(i<t.bpsBandwidthMin||!t.bpsBandwidthMin)&&(t.bpsBandwidthMin=i),i>t.bpsBandwidthMax&&(t.bpsBandwidthMax=i),t.bpsBandwidthAvg=t.bpsBandwidthAvg?(t.bpsBandwidthAvg+i)/2:i}trackProfileChanged(e){const t=this._trackingData;if(!t)return;const{bitrate:i}=e;i<t.lastBitrate&&t.nRenditionDowngrade++,i>t.lastBitrate&&t.nRenditionUpgrade++,t.lastBitrate=i}}class Bt extends c.vp{constructor(e){super(),this._transport=e,this._parseManifestResponse=this._parseManifestResponse.bind(this)}static create(e){return new Bt(e)}_parseManifestResponse(e){var t;const i=e.metadata.startTime;if(200!==e.status){const t=new Dt(n.STORAGE_VIDEO_MANIFEST_FAILED,`Video manifest request failed with status ${e.status}`);return t.status=e.status,this.emit(Y.VIDEO_MANIFEST_RESOLVE_FAILED,{url:e.url,error:t,start_time:i}),Promise.reject(t)}const a=e.body,s=null===(t=e.headers)||void 0===t?void 0:t.get("content-length");return this.emit(Y.VIDEO_MANIFEST_RESOLVED,{url:e.url,manifest_size:s?parseInt(s,10):JSON.stringify(a).length,start_time:i,end_time:Date.now()}),Promise.resolve(a)}getInitSegmentURLs(e,t,i,n){let a="";i&&(a=e+t.replace("{{profile_id}}",i.id.toString(10)).replace("{{file_type}}",i.file_type));let s="";return n&&(s=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type)),{audio:a,video:s,audioLogging:a,videoLogging:s}}getSegmentURLs(e,t,i,n,a){let s="";n&&(s=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type));let r="";return a&&(r=e+t.replace("{{profile_id}}",a.id.toString(10)).replace("{{file_type}}",a.file_type)),{audio:s.replace("{{segment_timestamp}}",i.toString()),video:r.replace("{{segment_timestamp}}",i.toString()),audioLogging:s,videoLogging:r}}getManifest(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=`${t?"@webgate/manifests/v8/unauth/json/sources":"@webgate/manifests/v7/json/sources"}/${e}/options/supports_drm`;return this._transport.request(i,{authorize:!t,responseType:"json",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS},metadata:{startTime:Date.now()}}).then(this._parseManifestResponse)}}class Gt extends Error{constructor(e,t){super(),this.status=-1,this.debug={},this.canPlayNext=!0,this.unrecoverable=!1,this.name="LicenseError",this.code=e,this.message=t}static fatal(e,t){const i=new Gt(e,t);return i.unrecoverable=!0,i.canPlayNext=!1,i}}class Vt{constructor(e){this._sdk={name:"",version:""},this._securityLevel=null,this._urls={},e.sdk&&(this._sdk=e.sdk),e.securityLevel&&(this._securityLevel=e.securityLevel),this._transport=e.transport,this._useTestLicenseServer=!!e.useTestLicenseServer,this._transport.on(this._transport.EVENT_CONNECTION_ID,(()=>{this._urls={}}))}get(e,t){const i=`${e}:${t}`,a=this._urls[i];if(a&&a.expires>Date.now()+6e4)return Promise.resolve(a.uri);const s=this._useTestLicenseServer?"&use_test_license_server=true":"",r=`@webgate/melody/v1/license_url?keysystem=${e}&mediatype=${t}&sdk_name=${this._sdk.name}&sdk_version=${this._sdk.version}${s}`;return this._transport.request(r,{responseType:"json",retry:{condition:(e,t)=>{const i=e.getStatusFamily();return i===t.SERVER_ERROR||i===t.CONNECTION_ERROR}}}).then((e=>{const t=e.body;if(t&&200===e.status)return t.expires*=1e3,t.uri=`@webgate/${t.uri}`,this._securityLevel&&(t.uri+=[-1!==t.uri.indexOf("?")?"&":"?","sl=",this._securityLevel].join("")),this._urls[i]=t,t.uri;let a;return a=t?400===e.status&&t&&"deprecated-version"===t.code?Gt.fatal(n.LICENSE_RESOLVER_DEPRECATED_VERSION,"This version of the SDK is no longer supported. Please upgrade"):new Gt(n.LICENSE_RESOLVER_CANT_RESOLVE_URL,`License URL endpoint responded with status ${e.status}`):Gt.fatal(n.LICENSE_RESOLVE_INVALID_RESPONSE,"License URL endpoint responded with invalid response"),a.status=e.status,Promise.reject(a)}))}remove(e,t){this._urls[`${e}:${t}`]=null}}class Yt{constructor(e){this._melodyLogger=new U.Hx(e)}logTrackStreamVerification(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"track_stream_verification",message:e},{batch:!0})}logJSSDKPlaybackStats(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_playback_stats",message:e},{batch:!0})}logJSSDKPlaybackStart(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_playback_start",message:e},{batch:!0})}logJSSDKError(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_error",message:e},{batch:!0})}logJSSDKWarning(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_warning",message:e},{batch:!0})}}var Kt;!function(e){e[e.ABORTED=101]="ABORTED",e[e.NETWORK=102]="NETWORK",e[e.MEDIA_DECODING=103]="MEDIA_DECODING",e[e.SRC_NOT_SUPPORTED=104]="SRC_NOT_SUPPORTED",e[e.EME=105]="EME",e[e.GENERIC=100]="GENERIC"}(Kt||(Kt={}));const Ht={[n.MEDIA_ABORTED]:Kt.ABORTED,[n.MEDIA_DECODING_ERROR]:Kt.MEDIA_DECODING,[n.MEDIA_NOT_SUPPORTED]:Kt.SRC_NOT_SUPPORTED,[n.MEDIA_NETWORK_ERROR]:Kt.NETWORK};function Wt(e){let t=Ht[e];return/_REQUEST_|_RESPONSE$/.test(e)?t=Kt.NETWORK:t||(t=/^EME_/.test(e)?Kt.EME:Kt.GENERIC),t}function qt(e){var t;const i=e.match(/^https?:\/\/([^\/]+@)?([^\/?#]+)/);return null!==(t=null==i?void 0:i[2])&&void 0!==t?t:""}var Qt;!function(e){e.READY="playerready",e.VIDEO_CHANGE="videochange",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMEUPDATE="timeupdate",e.SEEKING="seeking",e.SEEKED="seeked",e.ERROR="error",e.ENDED="ended",e.RENDITION_CHANGE="renditionchange",e.REQUEST_COMPLETED="requestcompleted",e.REQUEST_FAILED="requestfailed",e.REQUEST_CANCELED="requestcanceled"}(Qt||(Qt={}));const $t={player_is_paused:!0,player_width:0,player_height:0,video_source_height:0,video_source_width:0,player_is_fullscreen:void 0,player_autoplay_on:void 0,player_preload_on:void 0,video_source_url:void 0,video_source_mime_type:void 0,video_source_duration:void 0,video_poster_url:void 0,player_language_code:void 0};class zt{constructor(e){this._playerId=`spotify-playback-${Date.now()}`,this._currentContentInfo=null,this._readyDeferred=(0,u.$)(),this._isMuxInitialized=!1,this._muxInitData=null,this._player=e.player,this._mux=e.mux,this._getPlayheadTime=this._getPlayheadTime.bind(this),this._getStateData=this._getStateData.bind(this),this._init(e)}static create(e){return new zt(e)}_init(e){Promise.all([Promise.resolve(e.deviceInfo)]).then((t=>{let[i]=t;var n;this._muxInitData={data:Object.assign({env_key:e.envKey||"2qbjhhcl4u87btjbo7dh8vi2n",player_name:null!==(n=null==i?void 0:i.platform_name)&&void 0!==n?n:null==i?void 0:i.platform,player_version:null==i?void 0:i.version,viewer_device_manufacturer:null==i?void 0:i.brand,viewer_device_category:null==i?void 0:i.type,viewer_device_name:null==i?void 0:i.model,player_software_name:e.sdk||"spotify-playback",player_software_version:e.sdkVersion||It,player_mux_plugin_name:"spotify-playback-mux-reporter",player_mux_plugin_version:It},e.muxCustomDimensions),getPlayheadTime:this._getPlayheadTime,getStateData:this._getStateData},this._player.addListeners({[Y.PLAYER_BEFORE_LOAD]:this._onBeforeLoad.bind(this),[Y.PLAYER_PLAY]:this._onPlay.bind(this),[Y.PLAYER_PLAYING]:this._onPlaying.bind(this),[Y.PLAYER_PAUSED]:this._onPause.bind(this),[Y.PLAYER_PROGRESS]:this._onProgress.bind(this),[Y.PLAYER_SEEKING]:this._onSeeking.bind(this),[Y.PLAYER_POSITION_CHANGED]:this._onPositionChanged.bind(this),[Y.PLAYER_ERROR]:this._onError.bind(this),[Y.PLAYER_ENDED]:this._onEnded.bind(this),[Y.PLAYER_DURATION_CHANGED]:this._onDurationChanged.bind(this),[Y.PLAYER_VIDEO_RESIZED]:this._onVideoResized.bind(this),[Y.PLAYER_VIDEO_PROFILE_CHANGED]:this._onVideoProfileChanged.bind(this),[Y.PLAYER_FRAGMENT_FETCHED]:this._onFragmentFetched.bind(this),[Y.PLAYER_FRAGMENT_FETCH_ERROR]:this._onFragmentFetchError.bind(this),[Y.PLAYER_VIDEO_MANIFEST_RESOLVED]:this._onVideoManifestResolved.bind(this),[Y.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED]:this._onVideoManifestResolveFailed.bind(this)})})).then(this._readyDeferred.resolve,this._readyDeferred.reject)}_getPlayheadTime(){return this._player.getPlayerPosition()}_getStateData(){return this._currentContentInfo?Object.assign(Object.assign({},this._currentContentInfo.stateData),{player_language_code:this._player.getActiveSubtitleLanguage()}):null}_onDurationChanged(e){this._currentContentInfo&&(this._currentContentInfo.stateData.video_source_duration=e.data.duration)}_onVideoResized(e){this._currentContentInfo&&(this._currentContentInfo.stateData.player_width=e.data.width,this._currentContentInfo.stateData.player_height=e.data.height)}_onBeforeLoad(e){const{track:t,options:i,logData:n}=e.data,a=!!this._currentContentInfo;if("video"!==t.mediaType||(null==n?void 0:n.noLog)||(null==n?void 0:n.noMuxEvents))return a&&this._mux.emit(this._playerId,Qt.VIDEO_CHANGE,{}),void(this._currentContentInfo=null);const s={video_id:t.fileId,video_title:(null==n?void 0:n.displayTitle)||void 0,video_series:(null==n?void 0:n.displayGroup)||void 0,video_duration:(null==n?void 0:n.displayDuration)||void 0},r=Object.assign({},$t);this._currentContentInfo={track:t,options:i,videoData:s,stateData:r},!this._isMuxInitialized&&this._muxInitData?(this._mux.init(this._playerId,this._muxInitData),this._mux.emit(this._playerId,Qt.READY),this._isMuxInitialized=!0):a&&this._mux.emit(this._playerId,Qt.VIDEO_CHANGE,s)}_onPlay(){var e,t;if(!this._currentContentInfo)return;const i=this._currentContentInfo.stateData,n=this._player.getPlayerState(),a=n.media_info,s=(null===(t=null===(e=this._currentContentInfo)||void 0===e?void 0:e.options)||void 0===t?void 0:t.autoplay)||!1,{width:r,height:o,src:l,poster:d}=n.player_element;i.player_is_paused=!n.playing,i.player_width=r||0,i.player_height=o||0,i.video_source_height=a.video_height||0,i.video_source_width=a.video_width||0,i.player_autoplay_on=s,i.video_source_url=l,i.video_source_mime_type=a.video_format,i.video_source_duration=n.duration,i.video_poster_url=d,this._mux.emit(this._playerId,Qt.PLAY,this._currentContentInfo.videoData)}_onPlaying(){this._currentContentInfo&&(this._currentContentInfo.stateData.player_is_paused=!1,this._mux.emit(this._playerId,Qt.PLAYING))}_onPause(){this._currentContentInfo&&(this._currentContentInfo.stateData.player_is_paused=!0,this._mux.emit(this._playerId,Qt.PAUSE))}_onProgress(e){this._currentContentInfo&&this._mux.emit(this._playerId,Qt.TIMEUPDATE,{player_playhead_time:e.data.position})}_onSeeking(){this._currentContentInfo&&this._mux.emit(this._playerId,Qt.SEEKING)}_onPositionChanged(){this._currentContentInfo&&this._mux.emit(this._playerId,Qt.SEEKED)}_onError(e){var t,i;const n=null===(i=null===(t=e.data)||void 0===t?void 0:t.error)||void 0===i?void 0:i.code;this._currentContentInfo&&n&&this._mux.emit(this._playerId,Qt.ERROR,{player_error_code:Wt(n),player_error_message:n})}_onEnded(){this._currentContentInfo&&this._mux.emit(this._playerId,Qt.ENDED)}_onVideoProfileChanged(e){if(!this._currentContentInfo)return;const t=e.data.profile,i=this._currentContentInfo.stateData;i.video_source_height=t.height||0,i.video_source_width=t.width||0,i.video_source_mime_type=t.mimeType,this._mux.emit(this._playerId,Qt.RENDITION_CHANGE,{video_source_bitrate:t.bitrate,video_source_width:t.width,video_source_height:t.height})}_onFragmentFetched(e){const t=e.data;if(!this._currentContentInfo&&"video"!==t.media_type)return;const i=`${t.segment_type}${t.init?"_init":""}`;this._mux.emit(this._playerId,Qt.REQUEST_COMPLETED,{request_type:i,request_hostname:qt(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.byte_length})}_onFragmentFetchError(e){const t=e.data;if(!this._currentContentInfo&&"video"!==t.media_type)return;const i=`${t.segment_type}${t.init?"_init":""}`;this._mux.emit(this._playerId,Qt.REQUEST_FAILED,{request_type:i,request_hostname:qt(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}_onVideoManifestResolved(e){const t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,Qt.REQUEST_COMPLETED,{request_type:"manifest",request_hostname:qt(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.manifest_size})}_onVideoManifestResolveFailed(e){const t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,Qt.REQUEST_FAILED,{request_type:"manifest",request_hostname:qt(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}ready(){return this._readyDeferred.promise}}var Zt,Xt,Jt,ei,ti,ii;!function(e){e.NULL_VALUE="NULL_VALUE",e.LIST_START="LIST_START",e.LIST_END="LIST_END",e.FORBIDDEN="FORBIDDEN",e.IGNORE="IGNORE",e.PAUSE="PAUSE"}(Zt||(Zt={})),function(e){e.MP4_AUDIO="audio/mp4",e.MP4_VIDEO="video/mp4",e.MTS_VIDEO="video/mp2t",e.WEBM_AUDIO="audio/webm",e.WEBM_VIDEO="video/webm"}(Xt||(Xt={})),function(e){e.AAC_LC="mp4a.40.2",e.FLAC="flac",e.OPUS="opus",e.VP9="vp9",e.VP8="vp8",e.H264_31="avc1.4d401f"}(Jt||(Jt={})),function(e){e.UNKNOWN="UNKNOWN",e.DEFAULT="DEFAULT",e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.VERY_HIGH="VERY_HIGH",e.HIFI="HIFI"}(ei||(ei={})),function(e){e.NONE="NONE",e.CONTEXT="CONTEXT",e.TRACK="TRACK"}(ti||(ti={})),function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(ii||(ii={}));class ni extends Error{constructor(e,t){super(),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.name="PlaybackError",this.code=e,this.message=t}static fatal(e,t){const i=new ni(e,t);return i.unrecoverable=!0,i}}function ai(e){return"uri"in e}class si extends c.vp{constructor(e){if(super(),this._trackPlayerPromise=(0,u.$)(),this._maxListErrors=5,this._uid=0,this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this._listPlayCount=0,this._listErrorCount=0,this._shuffled=!1,this._repeatMode=ti.NONE,this._currentSeqId=0,!e.trackPlayer)throw new TypeError("Argument `options.trackPlayerManager` not found.");e.maxListErrors&&(this._maxListErrors=e.maxListErrors),this._setListOptions=this._setListOptions.bind(this),this._replaceCurrentList=this._replaceCurrentList.bind(this),this._handleCapped=this._handleCapped.bind(this),this._handlePlaying=this._handlePlaying.bind(this),this._handlePaused=this._handlePaused.bind(this),this._handleEnded=this._handleEnded.bind(this),this._handleCanPreload=this._handleCanPreload.bind(this),this._handleError=this._handleError.bind(this),this._handlePositionChanged=this._handlePositionChanged.bind(this),this._handleDurationChanged=this._handleDurationChanged.bind(this),this._handleTimeout=this._handleTimeout.bind(this),this._handlePlayerInitError=this._handlePlayerInitError.bind(this),this._handleProgress=this._handleProgress.bind(this),this._handlePlayedThresholdReached=this._handlePlayedThresholdReached.bind(this),this._handleBeforeLoad=this._handleBeforeLoad.bind(this),this._init(e.trackPlayer)}static create(e){return new si(e)}_init(e){this._trackPlayerPromise.promise.catch((()=>{})),Promise.resolve(e).then((e=>{this._attachPlayerEvents(e),this._trackPlayerPromise.resolve(e)})).catch(this._handlePlayerInitError)}_attachPlayerEvents(e){e.addListeners({[Y.PLAYER_CAN_PRELOAD]:this._handleCanPreload,[Y.PLAYER_CAPPED]:this._handleCapped,[Y.PLAYER_ENDED]:this._handleEnded,[Y.PLAYER_ERROR]:this._handleError,[Y.PLAYER_PAUSED]:this._handlePaused,[Y.PLAYER_PLAYING]:this._handlePlaying,[Y.PLAYER_TIMEOUT]:this._handleTimeout,[Y.PLAYER_POSITION_CHANGED]:this._handlePositionChanged,[Y.PLAYER_DURATION_CHANGED]:this._handleDurationChanged,[Y.PLAYER_PROGRESS]:this._handleProgress,[Y.PLAYER_BEFORE_LOAD]:this._handleBeforeLoad,[Y.PLAYER_PLAYED_THRESHOLD_REACHED]:this._handlePlayedThresholdReached}),this.proxyEmitAllSync(e,{[Y.PLAYER_BEFORE_VOLUME_CHANGE]:Y.LIST_PLAYER_BEFORE_VOLUME_CHANGE,[Y.PLAYER_LOAD]:Y.LIST_PLAYER_PLAYER_LOAD}),this.proxyEmitAll(e,{[Y.PLAYER_AUTOPLAY_FAILED]:Y.LIST_PLAYER_AUTOPLAY_FAILED,[Y.PLAYER_TRACKING_DATA_CREATED]:Y.LIST_PLAYER_TRACKING_DATA_CREATED,[Y.PLAYER_TRACKING_DATA_FINALIZED]:Y.LIST_PLAYER_TRACKING_DATA_FINALIZED,[Y.PLAYER_BUFFER_STALLED]:Y.LIST_PLAYER_BUFFER_STALLED,[Y.PLAYER_BUFFERING_START]:Y.LIST_PLAYER_BUFFERING_START,[Y.PLAYER_BUFFERING_END]:Y.LIST_PLAYER_BUFFERING_END,[Y.PLAYER_VIDEO_ELEMENT_APPENDED]:Y.LIST_PLAYER_VIDEO_ELEMENT_APPENDED,[Y.PLAYER_VIDEO_ELEMENT_REMOVED]:Y.LIST_PLAYER_VIDEO_ELEMENT_REMOVED,[Y.PLAYER_DISPLAYED_CUES_CHANGED]:Y.LIST_PLAYER_DISPLAYED_CUES_CHANGED,[Y.LIST_PLAYER_VIDEO_PROFILE_CHANGED]:Y.PLAYER_VIDEO_PROFILE_CHANGED,[Y.LIST_PLAYER_PLAYBACK_SPEED_CHANGED]:Y.PLAYER_PLAYBACK_SPEED_CHANGED,[Y.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED]:Y.PLAYER_SUBTITLE_LANGUAGES_LOADED})}_translatePosition(e){var t,i,n;return null!==(n=null===(i=null===(t=this._loadedList)||void 0===t?void 0:t.translatePosition)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:e}_translateDuration(e){var t,i,n;return null!==(n=null===(i=null===(t=this._loadedList)||void 0===t?void 0:t.translateDuration)||void 0===i?void 0:i.call(t,e))&&void 0!==n?n:e}_handleProgress(e){const{data:t}=e;this.emit(Y.LIST_PLAYER_PROGRESS,Object.assign(Object.assign({},t),{position:this._translatePosition(t.position)}))}_handleBeforeLoad(e){const{data:t}=e;this.emit(Y.LIST_PLAYER_BEFORE_PLAYER_LOAD,Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},t.options),{position:this._translatePosition(t.options.position)})}))}_handlePlayerInitError(e){this._trackPlayerPromise.reject(new ni(n.LIST_PLAYER_NO_TRACK_PLAYER,e.message||"Track player promise was rejected."))}_handleCapped(){const e=this._currentTrack;e&&this.emit(Y.LIST_PLAYER_CAPPED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList})}_handlePlaying(e){const t=this._currentTrack;t&&this.emit(Y.LIST_PLAYER_PLAYING,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handlePaused(e){const t=this._currentTrack;t&&this.emit(Y.LIST_PLAYER_PAUSED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleCanPreload(){this._preloadUpcomingTrack().catch((()=>{}))}_handleEnded(){const e=this._currentTrack;e&&(this.emit(Y.LIST_PLAYER_TRACK_ENDED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(d.TRACK_DONE))}_handleTimeout(){const e=this._currentTrack;e&&(this.emit(Y.LIST_PLAYER_TRACK_TIMEOUT,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(d.TRACK_ERROR))}_handlePositionChanged(e){const t=this._currentTrack;t&&this.emit(Y.LIST_PLAYER_POSITION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleDurationChanged(e){const t=this._currentTrack;t&&this.emit(Y.LIST_PLAYER_DURATION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position),duration:this._translateDuration(e.data.duration)})}_handlePlayedThresholdReached(e){const t=this._currentTrack;t&&this.emit(Y.LIST_PLAYER_PLAYED_THRESHOLD_REACHED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,threshold:e.data.threshold,position:this._translatePosition(e.data.position)})}_handleError(e){const t=this._currentTrack,i=e.data;if(!t)return;i.position=this._translatePosition(e.data.position),this.emit(Y.LIST_PLAYER_ERROR,i),this.emitSync(Y.LIST_PLAYER_ERROR_SYNC,i);const n=!!i.error&&i.error.listPlayerIgnore;n||this._listErrorCount++,i.canPlayNext&&(n||this._listErrorCount<=this._maxListErrors?this.next(d.TRACK_ERROR):this.emit(Y.LIST_PLAYER_MAX_LIST_ERRORS_REACHED,{count:this._listErrorCount,threshold:this._maxListErrors}))}_handleTrackLoaded(e){this.emitSync(Y.LIST_PLAYER_TRACK_LOADED,e)}_incrementSeqId(){return this._currentSeqId>=9007199254740991?this._currentSeqId=0:this._currentSeqId+=1,this._currentSeqId}_getTrackPlayer(){return this._trackPlayerPromise.promise}_setListIndex(e,t){const i=t.index&&-1!==t.index?t.index:0;return Promise.all([e,t,e.startAt(i)])}_setListOptions(e){let[t,i,n]=e;return Promise.all([t.setShuffle(!!this._shuffled),t.setRepeatMode(this._repeatMode)]).then((()=>[t,i]))}_replaceCurrentList(e){let[t,i]=e;return this.emitSync(Y.LIST_PLAYER_BEFORE_LIST_CHANGE,{newList:t,newOptions:i,oldList:this._loadedList,oldOptions:this._loadedOptions}),this._loadedList=t,this._loadedOptions=i,this._listPlayCount=0,this._listErrorCount=0,this.emit(Y.LIST_PLAYER_LIST_CHANGED,{list:t,options:i}),H.SUCCESS}_preloadTrack(e){return this._getTrackPlayer().then((t=>(t.preload(e).catch((()=>{})),H.SUCCESS)))}_changeTrack(e,t,i){if(this._currentSeqId!==i)return Promise.resolve(H.CANCELLED);this.emitSync(Y.LIST_PLAYER_BEFORE_TRACK_LOAD,{list:this._loadedList,newTrack:e,oldTrack:this._currentTrack}),this._uid++;const n=++this._listPlayCount,a=this._loadedOptions;let s=!0,r=0,o=3e4;a&&(1===n?(s=!a.paused,r=a.initialPosition||a.position||0):r=a.position||0);const l=t===d.TRACK_DONE;if(e.options){const t=e.options;void 0!==t.paused&&(s=!t.paused),void 0!==t.position&&(r=t.position),void 0!==t.playedThreshold&&(o=t.playedThreshold)}this._currentTrack=e,this._currentTrackOptions={reason:t,paused:!s,position:r,playedThreshold:o};const c=this._handleTrackLoaded.bind(this,{uid:this._uid,track:this._currentTrack,options:this._currentTrackOptions,list:this._loadedList});return this._getTrackPlayer().then((t=>this._currentSeqId!==i?H.CANCELLED:(Promise.resolve(t.load(e,{uriProperty:"playableURI",autoplay:s,position:r,playedThreshold:o,continuePrevious:l},c)).catch((()=>{})),H.SUCCESS)))}_preloadUpcomingTrack(){const e=this._loadedList;if(!e)return Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));const t={reason:d.TRACK_DONE,listConstants:Zt};return e.peekNext(t).then((e=>e===Zt.FORBIDDEN?H.FORBIDDEN:e===Zt.NULL_VALUE?this._preloadUpcomingTrack():e===Zt.LIST_END?H.LIST_END:ai(e)&&e.playable?this._preloadTrack(e):H.INVALID))}activateElement(){return this._getTrackPlayer().then((e=>(e.activateElement(),H.SUCCESS)))}load(e,t){const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={index:-1,position:0,initialPosition:0,duration:-1,paused:!1,reason:d.UNKNOWN};return void 0!==e.index&&(t.index=e.index),void 0!==e.position&&(t.position=e.position),void 0!==e.initialPosition&&(t.initialPosition=e.initialPosition),void 0!==e.duration&&(t.duration=e.duration),void 0!==e.paused&&(t.paused=e.paused),void 0!==e.reason&&(t.reason=e.reason),t}(t||this._loadedOptions||{});return this._setListIndex(e,i).then(this._setListOptions).then(this._replaceCurrentList)}play(e,t){return this.load(e,t).then((()=>{if(this._loadedList!==e)return H.CANCELLED;const t=this._loadedOptions?this._loadedOptions.reason:d.UNKNOWN;return this.next(t)}))}canChangeTrack(){return this._loadedList?this._loadedList.peekNext({reason:d.FORWARD_BUTTON,listConstants:Zt}).then((e=>e!==Zt.FORBIDDEN)):Promise.resolve(!0)}next(e){if(!e)return Promise.reject(new ni(n.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(Y.LIST_PLAYER_BEFORE_NEXT,{list:t,reason:e});const i=this._incrementSeqId(),a={reason:e,listConstants:Zt};return t.next(a).then((n=>this._currentSeqId!==i?H.CANCELLED:n===Zt.FORBIDDEN?H.FORBIDDEN:n===Zt.NULL_VALUE?this.next(e):n===Zt.LIST_END?(this.emit(Y.LIST_PLAYER_LIST_ENDED,{list:t,reason:d.END_PLAY}),this.clear(e),H.LIST_END):ai(n)?n.playable?this._changeTrack(n,e,i):(this.emit(Y.LIST_PLAYER_TRACK_UNPLAYABLE,{track:n,list:t}),this.next(e)):H.INVALID))}previous(e){if(!e)return Promise.reject(new ni(n.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(Y.LIST_PLAYER_BEFORE_PREVIOUS,{list:t,reason:e});const i=this._incrementSeqId(),a={reason:e,listConstants:Zt};return t.previous(a).then((n=>this._currentSeqId!==i?H.CANCELLED:n===Zt.FORBIDDEN?H.FORBIDDEN:n===Zt.NULL_VALUE?this.previous(e):n===Zt.LIST_START?(this.emit(Y.LIST_PLAYER_LIST_ENDED,{list:t,reason:d.END_PLAY}),this.clear(e),H.LIST_END):ai(n)?n.playable?this._changeTrack(n,e,i):(this.emit(Y.LIST_PLAYER_TRACK_UNPLAYABLE,{track:n,list:t}),this.previous(e)):H.INVALID))}pause(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.pause().then((()=>H.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?H.CANCELLED:H.FORBIDDEN)))):Promise.resolve(H.SUCCESS):Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}resume(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.resume().then((()=>H.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?H.CANCELLED:H.FORBIDDEN)))):Promise.resolve(H.SUCCESS):Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}togglePlay(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.togglePlay().then((()=>H.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?H.CANCELLED:H.FORBIDDEN)))):Promise.resolve(H.SUCCESS):Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}stop(e){const t={reason:e||d.UNKNOWN},i=this._currentTrack;return i&&i.logData&&(t.source=i.logData.source),this._incrementSeqId(),this._getTrackPlayer().then((e=>(e.stop(t),this.emit(Y.LIST_PLAYER_STOPPED,{uid:this._uid,options:this._currentTrackOptions,list:this._loadedList}),H.SUCCESS)))}clear(e){return this.stop(e).then((()=>(this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this.emit(Y.LIST_PLAYER_CLEARED,null),H.SUCCESS)))}setShuffle(e){const t=!!e;if(this._shuffled!==t){this._shuffled=t,this.emit(Y.LIST_PLAYER_SHUFFLE_CHANGED,{player:this,shuffled:t});const e=this._loadedList;e&&e.setShuffle(this._shuffled)}return Promise.resolve(H.SUCCESS)}setRepeatMode(e){if(!(e in ti))return Promise.reject(new ni(n.LIST_PLAYER_INVALID_ARGUMENT,"The value of repeat mode is not a correct RepeatMode enum value"));if(this._repeatMode!==e){this._repeatMode=e,this.emit(Y.LIST_PLAYER_REPEAT_MODE_CHANGED,{player:this,repeatMode:e});const t=this._loadedList;t&&t.setRepeatMode(this._repeatMode)}return Promise.resolve(H.SUCCESS)}getVolume(){return this._getTrackPlayer().then((e=>e.getVolume()))}setVolume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._getTrackPlayer().then((i=>(i.setVolume(e,{commandId:null!=t?t:void 0}),this.emit(Y.LIST_PLAYER_VOLUME_CHANGED,{volume:e,commandId:t}),H.SUCCESS)))}seek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.SEEK;var i,a;const s=this._loadedList;if(!s)return Promise.reject(new ni(n.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));if("function"==typeof s.allowSeeking&&!s.allowSeeking())return Promise.reject(new ni(n.LIST_PLAYER_FORBIDDEN,"The operation is not allowed."));const r=null!==(a=null===(i=s.handleSeek)||void 0===i?void 0:i.call(s,e,{reason:t,listConstants:Zt}))&&void 0!==a?a:e;return r===Zt.PAUSE?this.pause().then((t=>(this.emit(Y.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:r}),t))):r===Zt.IGNORE?(this.emit(Y.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:r}),Promise.resolve(H.SUCCESS)):this._currentTrack?this._getTrackPlayer().then((e=>(e.seek(r),H.SUCCESS))):Promise.resolve(H.SUCCESS)}getListConstants(){return Zt}getLoadedList(){return this._loadedList}getLoadedOptions(){return this._loadedOptions}getPlayerState(){return this._getTrackPlayer().then((e=>{const t=e.getPlayerState();return Object.assign(Object.assign({},t),{position:this._translatePosition(t.position),duration:this._translateDuration(t.duration)})}))}getState(){return this.getPlayerState().then((e=>({playbackState:e,track:this._currentTrack,list:this._loadedList,options:this._loadedOptions})))}getMediaConfig(){return this._getTrackPlayer().then((e=>e.getMediaConfig()))}hideSubtitles(){return this._getTrackPlayer().then((e=>e.hideSubtitles())).then((()=>H.SUCCESS))}showSubtitles(){return this._getTrackPlayer().then((e=>e.showSubtitles())).then((()=>H.SUCCESS))}areSubtitlesShown(){return this._getTrackPlayer().then((e=>e.areSubtitlesShown()))}getSubtitleLanguages(){return this._getTrackPlayer().then((e=>e.getSubtitleLanguages()))}getActiveSubtitleLanguage(){return this._getTrackPlayer().then((e=>{var t;return null!==(t=e.getActiveSubtitleLanguage())&&void 0!==t?t:null}))}deactivateCueEvents(){return this._getTrackPlayer().then((e=>e.deactivateCueEvents())).then((()=>H.SUCCESS))}activateCueEvents(){return this._getTrackPlayer().then((e=>e.activateCueEvents())).then((()=>H.SUCCESS))}getCurrentBandwidth(){return this._getTrackPlayer().then((e=>e.getCurrentBandwidth()))}setSubtitleLanguage(e){return this._getTrackPlayer().then((t=>t.setSubtitleLanguage(e))).then((()=>H.SUCCESS))}setPlaybackSpeed(e){return this._getTrackPlayer().then((t=>t.setPlaybackSpeed(e))).then((e=>e?H.SUCCESS:H.FORBIDDEN))}getStatistics(){return this._getTrackPlayer().then((e=>e.getStatistics()))}getAudioProcessor(){return this._getTrackPlayer().then((e=>e.getAudioProcessor()))}}const ri=b.P.forTag("playback.init");function oi(e){return new Promise(((t,i)=>{var n,a,s,r,o,l,d;if(!e.transport)return void i(new TypeError("Argument transport is required."));if("undefined"!=typeof window){("boolean"==typeof window.isSecureContext?window.isSecureContext:function(){if("undefined"==typeof window||!window.location)return!1;const e=window.location;if("https"===e.protocol||"file"===e.protocol)return!0;const t=e.hostname;return!!/^127(\.[0-255]){3}$|^locahost\.?$|\.localhost\.?$/.test(t)}())||null===(n=window.console)||void 0===n||n.warn("%cDRM might not be available from unsecure contexts","background: #222; color: #bada55; font-size: 40px")}const{transport:c}=e,[u="",m=""]=(e.sdkId||"").split(":"),_=Object.assign(Object.assign({},e),{tracker:jt.create(),audioResolver:new Ft(c),videoResolver:new Bt(c),licenseURLResolver:new Vt({transport:c,sdk:{name:u,version:m},securityLevel:e.securityLevel,useTestLicenseServer:e.useTestLicenseServer}),newBufferPerTrack:null===(a=e.newBufferPerTrack)||void 0===a||a,preinitMediaElement:null===(s=e.preinitMediaElement)||void 0===s||s});e.unauthenticatedLogs&&!(null===(r=e.loggerOptions)||void 0===r?void 0:r.endpoint)&&(e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{endpoint:"https://spclient.wg.spotify.com/melody/unauth"})),(null===(o=null==e?void 0:e.loggerOptions)||void 0===o?void 0:o.deviceInfo)||Promise.all([null===(l=e.loggerOptions)||void 0===l?void 0:l.platform,null===(d=e.loggerOptions)||void 0===d?void 0:d.clientVersion]).then((t=>{let[i,n]=t;e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{deviceInfo:{platform:i,version:n}})})),At.create(_).then((t=>{const i=Object.assign({disableMux:!0},e.loggerOptions),n=function(e){return new Yt(e)}(Object.assign(Object.assign({},i),{transport:c,sdkId:e.sdkId,platform:Promise.resolve(i.deviceInfo).then((e=>{var t;return null!==(t=null==e?void 0:e.platform)&&void 0!==t?t:""})),clientVersion:Promise.resolve(i.deviceInfo).then((e=>{var t;return null!==(t=null==e?void 0:e.version)&&void 0!==t?t:""}))})),a=Pt.create({transport:c,player:t,logSender:n});return i.disableMux||zt.create({player:t,mux:Q,envKey:null==i?void 0:i.muxEnvKey,sdk:u,sdkVersion:m,deviceInfo:i.deviceInfo,muxCustomDimensions:i.muxCustomDimensions}).ready().then((()=>ri.info("MuxReporter ready")),(e=>ri.error("Failed to instantiate MuxReporter",null==e?void 0:e.message))),{player:t,logger:a}})).then(t,i)}))}class li extends c.vp{constructor(e){super(),this._client=e.client,this._initialVolume=e.initialVolume,this._listPlayer=e.listPlayer,this._playerPromise=e.playerPromise,this._playbackServiceClient=e.playbackServiceClient,this._playbackStateObserver=e.playbackStateObserver,this._stopOnBackground=e.stopOnBackground,this._init()}_init(){this._client.addListeners({before_disconnect:this._onClientBeforeDisconnect.bind(this),before_offline_disconnect:this._onClientBeforeOfflineDisconnect.bind(this)});const e=this._listPlayer;e.addListeners({[Y.LIST_PLAYER_CAPPED]:this._onCapped.bind(this),[Y.LIST_PLAYER_TRACK_ENDED]:this._onTrackEnded.bind(this),[Y.LIST_PLAYER_BEFORE_VOLUME_CHANGE]:this._onBeforeVolumeChange.bind(this),[Y.LIST_PLAYER_VOLUME_CHANGED]:this._onVolumeChanged.bind(this),[Y.LIST_PLAYER_ERROR]:e=>{this._onError(e,p.PLAYBACK)}}),this.proxyEmitAll(e,{[Y.LIST_PLAYER_AUTOPLAY_FAILED]:"autoplay_failed",[Y.LIST_PLAYER_TRACK_LOADED]:"track_loaded",[Y.LIST_PLAYER_DURATION_CHANGED]:"duration_changed",[Y.LIST_PLAYER_POSITION_CHANGED]:"position_changed",[Y.LIST_PLAYER_PROGRESS]:"progress",[Y.LIST_PLAYER_BUFFER_STALLED]:"stalled",[Y.LIST_PLAYER_BUFFERING_END]:"buffering_end",[Y.LIST_PLAYER_BUFFERING_START]:"buffering_start",[Y.LIST_PLAYER_MAX_LIST_ERRORS_REACHED]:"max_list_errors_reached",[Y.LIST_PLAYER_VIDEO_ELEMENT_APPENDED]:"video_element_appended",[Y.LIST_PLAYER_VIDEO_ELEMENT_REMOVED]:"video_element_removed",[Y.LIST_PLAYER_LIST_ENDED]:"context_ended",[Y.LIST_PLAYER_SEEK_HANDLED]:"streamer_seek_handled",[Y.LIST_PLAYER_DISPLAYED_CUES_CHANGED]:"displayed_cues_changed",[Y.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED]:"subtitle_languages_loaded",[Y.LIST_PLAYER_PLAYBACK_SPEED_CHANGED]:"speed_changed"});const t=this._playbackServiceClient;t.addListeners({logout:this._onPlaybackClientLogout.bind(this),error:e=>{this._onError(e,e.data.source)}}),this.proxyEmitAll(t,{max_subscriptions_reached:"max_subscriptions_reached",deregistered:"deregistered",registered:"registered",registration_aborted:"registration_aborted",internal_endcontent:"internal_endcontent"}),this.proxyEmit(this._playbackStateObserver,"state_changed","state_changed"),this._stopOnBackground&&document.addEventListener&&document.addEventListener("visibilitychange",(()=>{document.hidden&&this.stop()&&this.emitSync("stopped_on_background",null)})),this._playerPromise.then((e=>{e.setVolume(this._initialVolume),this.emit("player_initialization_done",null)}),(e=>{this.emit("player_initialization_failed",{reason:e.message,error:e})}))}_assertOperationSuccess(e){return e===H.SUCCESS}_onTrackEnded(){this.emit("track_ended",null)}_onClientBeforeDisconnect(e){e.data.awaitPromise(this.deregister().catch((()=>{})))}_onClientBeforeOfflineDisconnect(e){e.data.awaitPromise(this.pause().catch((()=>{})))}_onBeforeVolumeChange(e){var t;this.emitSync("before_volume_change",{volume:e.data.volume,remote:!!(null===(t=e.data.options)||void 0===t?void 0:t.commandId)}).defaultPrevented&&e.preventDefault()}_onVolumeChanged(e){this.emit("volume_changed",{volume:e.data.volume,remote:!!e.data.commandId})}_onCapped(){this.emit("playback_capped",null)}_onError(e,t){const{error:i}=e.data;i&&(i.registration&&this.emit("registration_error",{error:i}),this.emit("error",{source:t,error:i}),this._client.notifyError(t,i))}_onPlaybackClientLogout(){this.emit("logged_out",null)}stop(){return this._playbackServiceClient.stop()}register(){return this._playbackServiceClient.register()}deregister(){return this._playbackServiceClient.deregister()}resume(){return this._listPlayer.resume().then(this._assertOperationSuccess)}pause(){return this._listPlayer.pause().then(this._assertOperationSuccess)}nextTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.FORWARD_BUTTON;return this._listPlayer.next(e).then(this._assertOperationSuccess)}canChangeTrack(){return this._listPlayer.canChangeTrack()}previousTrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.BACK_BUTTON;return this._listPlayer.previous(e).then(this._assertOperationSuccess)}togglePlay(){return this._listPlayer.togglePlay().then(this._assertOperationSuccess)}setVolume(e){return this._listPlayer.setVolume(e).then(this._assertOperationSuccess)}getVolume(){return this._listPlayer.getVolume()}seek(e){return this._listPlayer.seek(e).then(this._assertOperationSuccess)}getCurrentState(){return this._playbackStateObserver.getCurrentState()}getVideoVariants(){return this._playerPromise.then((e=>e.getVideoVariants()))}setPreferredBitrate(e){return this._playerPromise.then((t=>t.setPreferredBitrate(e).then(this._assertOperationSuccess)))}setVideoResolution(e){return this._playerPromise.then((t=>t.setVideoResolution(e)))}setBackgrounded(e){return this._playerPromise.then((t=>t.setBackgrounded(e)))}activateElement(){return this._playerPromise.then((e=>e.activateElement()))}hideSubtitles(){return this._listPlayer.hideSubtitles().then(this._assertOperationSuccess)}showSubtitles(){return this._listPlayer.showSubtitles().then(this._assertOperationSuccess)}areSubtitlesShown(){return this._listPlayer.areSubtitlesShown()}getSubtitleLanguages(){return this._listPlayer.getSubtitleLanguages()}getActiveSubtitleLanguage(){return this._listPlayer.getActiveSubtitleLanguage()}setSubtitleLanguage(e){return this._listPlayer.setSubtitleLanguage(e).then(this._assertOperationSuccess)}getMediaConfig(){return this._listPlayer.getMediaConfig()}setPlaybackSpeed(e){return this._listPlayer.setPlaybackSpeed(e).then(this._assertOperationSuccess)}deactivateSubtitleEvents(){return this._listPlayer.deactivateCueEvents().then(this._assertOperationSuccess)}activateSubtitleEvents(){return this._listPlayer.activateCueEvents().then(this._assertOperationSuccess)}}class di extends Error{constructor(e,t){super(t),this.status=-1,this.maxedSubscriptions=!1,this.unrecoverable=!1,this.debug={},this.registration=!1,this.code=e,this.name="TrackPlayerAPIClientError"}static fatal(e,t){const i=new di(e,t);return i.unrecoverable=!0,i}}class ci{constructor(e,t){this._stateMachine=null,this._currentState=null,this._currentStateIndex=null,this._pausedState=!1,this._initialPlaybackPosition=null,this._uri=e,this._manifestTrackResolver=t}static create(e,t){return new ci(e,t)}setPaused(e){this._pausedState=e}isPaused(){return this._currentStateIndex&&this._currentStateIndex<0&&this._currentState&&this._currentState.transitions.advance?!!this._currentState.transitions.advance.paused:this._pausedState}setInitialPosition(e){this._initialPlaybackPosition=e}setStateMachine(e){this._stateMachine=e}setDeviceId(e){this._deviceId=e}startAtState(e){const t=this._stateMachine&&this._stateMachine.states[e.state_index];if(!t)throw new di(a.TP_MISSING_INITIAL_STATE,"Invalid state reference.");const i=t.transitions;this._currentStateIndex=-1,this._currentState={decoy:!0,paused:!!e.paused,track:-1,state_id:null,transitions:{advance:e,show_next:i.show_next,show_prev:i.show_prev,skip_next:e,skip_prev:i.skip_prev},duration_override:t.duration_override,position_offset:t.position_offset}}setCurrentState(e){const t=e.state_index;this._currentStateIndex=t,this._currentState=this._stateMachine&&this._stateMachine.states[t]}getStateMachine(){return this._stateMachine}getInternalStateRef(){let e=this._pausedState,t=this._currentStateIndex;if(!t)return null;if(t&&t<0){const i=this._currentState&&this._currentState.transitions.advance;i&&(t=i.state_index,e=!!i.paused)}return{paused:e,state_index:t}}getStateRef(){const e=this._stateMachine;if(!e||null===this._currentStateIndex)return null;let t,i;if(this._currentStateIndex<0){const n=this._currentState&&this._currentState.transitions.advance;n&&(t=e.states[n.state_index],i=n.paused)}else t=e.states[this._currentStateIndex],i=this._pausedState;return t?{state_machine_id:e.state_machine_id,state_id:t.state_id,paused:!!i}:null}getCurrentTrack(){const e=this._stateMachine;if(!e||null===this._currentStateIndex)return null;let t;if(this._currentStateIndex<0){const i=this._currentState&&this._currentState.transitions.advance;i&&(t=e.states[i.state_index])}else t=e.states[this._currentStateIndex];return t?e.tracks[t.track]:null}startAt(){return Promise.resolve(H.SUCCESS)}setShuffle(){return Promise.resolve(H.SUCCESS)}setRepeatMode(){return Promise.resolve(H.SUCCESS)}next(e){const t=this._currentState;let i=null;if(t){const n=t.transitions;if(e.reason===d.FORWARD_BUTTON)"skip_next"in n&&(i=n.skip_next);else"advance"in n&&(i=n.advance)}return this._transitionTo(e,i,!1)}peekNext(e){const t=this._currentState;let i=null;if(t){const n=t.transitions;if(e.reason===d.FORWARD_BUTTON)"skip_next"in n&&(i=n.skip_next);else"advance"in n&&(i=n.advance)}return this._transitionTo(e,i,!0)}previous(e){const t=this._currentState;let i=null;if(t){i=t.transitions.skip_prev}return this._transitionTo(e,i,!1)}translatePosition(e){var t,i;return(null!==(i=null===(t=this._currentState)||void 0===t?void 0:t.position_offset)&&void 0!==i?i:0)+e}translateDuration(e){var t,i;return null!==(i=null===(t=this._currentState)||void 0===t?void 0:t.duration_override)&&void 0!==i?i:e}handleSeek(e,t){var i;return(null===(i=this._currentState)||void 0===i?void 0:i.duration_override)&&t.reason!==d.REMOTE?t.listConstants.IGNORE:e}allowSeeking(){return!!this._currentState&&!this._currentState.disallow_seeking}_transitionTo(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((n=>{var a;const s=e.reason,r=e.listConstants;if(!t)return n(r.FORBIDDEN);const o=this._stateMachine;if(!o)return n(r.NULL_VALUE);const l=o.states[t.state_index];if(!l)return n(r.NULL_VALUE);const d=o.tracks[l.track];if(!(null===(a=null==d?void 0:d.metadata)||void 0===a?void 0:a.uri))return n(r.NULL_VALUE);if(!this._currentState)return n(r.NULL_VALUE);const c=this._currentState,u=c.decoy?!!c.paused:t.paused;i||(this._currentState=l,this._currentStateIndex=t.state_index,this._pausedState=!!u);let m=0;return i||null===this._initialPlaybackPosition?"initial_playback_position"in l&&(m=l.initial_playback_position||0):(m=this._initialPlaybackPosition,this._initialPlaybackPosition=null),this._manifestTrackResolver.resolveFromStateTrack(d).then((e=>{if(!e)return n(r.NULL_VALUE);let t=this._uri;d.metadata&&d.metadata.context_uri&&(t=d.metadata.context_uri);const i=s,a=d.ms_played_until_update,o={playbackQuality:e.playbackQuality,hifiStatus:e.hifi_status},c={uri:e.uri,playableURI:e.uri,fileId:e.fileId,resolvedURL:e.resolvedURL,playable:e.playable,isAd:e.isAd,format:e.format,fileFormat:e.fileFormat,mediaType:e.mediaType,noManifest:e.noManifest,metadata:o,options:{position:m,paused:u,playedThreshold:a},logData:{noLog:!!e.noLog,noTSV:!!e.noTSV,noStats:!!e.noStats,deviceId:this._deviceId,playbackId:l.state_id?l.state_id:void 0,reason:i,displayTrack:e.uri,playContext:t,impressionURL:e.impressionURL,impressionURLs:e.impressionURLs,format:{codec:e.format,bitrate:e.bitrate},uriType:e.uriType,displayTitle:d.metadata.name,displayGroup:d.metadata.group_name,displayDuration:d.metadata.duration},stateId:l.state_id?l.state_id:void 0,audioGain:e.gainDb};return n(c)}))}))}getCurrentState(){return this._currentState}}var ui,mi=i(59272);!function(e){e.ON="ON",e.OFF="OFF",e.NONE="NONE"}(ui||(ui={}));const _i=/^disallow_([^]+)_reasons$/;const hi=b.P.forTag("tp.stream.PlaybackStateObserver");class pi extends c.vp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._tpApiClient=e,this._numPreviousTracks=t.numPrevious||2,this._numNextTracks=t.numNextTracks||2,this._currentState=null,this._init()}static create(e,t){return new pi(e,t)}_init(){this._tpApiClient.on("state_changed",this._onStateChanged.bind(this)),this._tpApiClient.on("state_cleared",this._onStateCleared.bind(this))}_onStateChanged(e){var t,i,n,a,s,r,o,l,d;const{stateMachine:c,stateRef:u,position:m,paused:_,loading:h,currentTrackInfo:p}=e.data,v=null==c?void 0:c.states;if(!c||!(null==v?void 0:v.length)||!u)return void hi.warn("_onStateChanged called with no current state",e);const k=v[u.state_index],g=c.tracks[null==k?void 0:k.track];if(!k||!g)return void hi.warn("_onStateChanged called with no current state or track",e);let E=null!==(t=p.duration)&&void 0!==t?t:0;const S=this._createTrackWindow(c,k,E);E||(E=null!==(n=null===(i=S.current_track)||void 0===i?void 0:i.duration_ms)&&void 0!==n?n:0);const y=function(e,t){const i={};for(const n in e)e.hasOwnProperty(n)&&"disallow_resuming_reasons"!==n&&"disallow_pausing_reasons"!==n&&(i[n]=e[n]);return t?i.disallow_pausing_reasons=["already_paused"]:i.disallow_resuming_reasons=["not_paused"],i}(k.restrictions||{},_),f=function(e){const t={};for(const i in e)if(e.hasOwnProperty(i)){const n=e[i],a=!(!n||!n.length);t[i.replace(_i,"$1")]=a}return t}(y),N={timestamp:Date.now(),context:{uri:null!==(s=null===(a=g.metadata)||void 0===a?void 0:a.context_uri)&&void 0!==s?s:null,metadata:{}},position:m,duration:E,paused:_,playback_quality:null!==(r=p.playbackQuality)&&void 0!==r?r:ei.UNKNOWN,playback_features:{hifi_status:null!==(o=p.hifiStatus)&&void 0!==o?o:ui.NONE,change_playback_speed:null!==(l=p.changePlaybackSpeed)&&void 0!==l&&l},shuffle:this._getShuffleSetting(c),repeat_mode:this._getRepeatSetting(c),track_window:S,restrictions:y,disallows:f,loading:h,playback_speed:p.playbackSpeed,playback_id:k.state_id};(null===(d=g.metadata)||void 0===d?void 0:d.context_description)&&(N.context.metadata.context_description=g.metadata.context_description),this._currentState=N,this.emit("state_changed",{state:N?Object.assign({},N):null})}_createTrackWindow(e,t,i){const n=e.states;return{current_track:this._getTrackMetadata(e,t,i),next_tracks:this._getNextStates(t,n).map((t=>this._getTrackMetadata(e,t,null))).filter((e=>!!e)),previous_tracks:this._getPreviousStates(t,n).map((t=>this._getTrackMetadata(e,t,null))).filter((e=>!!e))}}_onStateCleared(){this._currentState=null,this.emit("state_changed",{state:null})}_getRepeatSetting(e){const t=e.attributes.options;return t.repeating_track?v.TRACK:t.repeating_context?v.CONTEXT:v.OFF}_getShuffleSetting(e){return e.attributes.options.shuffling_context}_getNextStates(e,t){const i=this._numNextTracks,n=[];let a=e;for(;a&&"show_next"in a.transitions&&a.transitions.show_next;){const e=t[a.transitions.show_next.state_index];if(e&&n.push(e),a=e,n.length>=i)break}return n}_getPreviousStates(e,t){const i=this._numPreviousTracks,n=[];let a=e;for(;a&&"show_prev"in a.transitions&&a.transitions.show_prev;){const e=t[a.transitions.show_prev.state_index];if(e&&n.unshift(e),a=e,n.length>=i)break}return n}_getTrackMetadata(e,t,i){const n=null==e?void 0:e.tracks[t.track];if(!(null==n?void 0:n.metadata))return null;const a=n.metadata,s=n.manifest&&"manifest_ids_video"in n.manifest,r=n.track_type.toLowerCase(),o=(0,mi.EC)(a.uri),l=a.linked_from_uri?(0,mi.EC)(a.linked_from_uri):null;return{id:o?o.id:null,uri:a.uri,type:(null==o?void 0:o.type)||"unknown",uid:t.track_uid,linked_from:{uri:a.linked_from_uri||null,id:l?l.id:null},media_type:s?"video":"audio",track_type:r,name:a.name,duration_ms:i||a.duration,artists:a.authors,album:{uri:a.group_uri,name:a.group_name,images:a.images},is_playable:!0}}getCurrentState(){const e=this._currentState;if(e&&!e.paused){const t=Date.now(),i=e.position+(t-e.timestamp);e.position=i,e.timestamp=t}return Promise.resolve(this._currentState?Object.assign({},this._currentState):null)}}const vi=/^https:\/\//,ki={[R.FILE_URLS_MP3]:W.MP3,[R.FILE_URLS_EXTERNAL]:W.MP3,[R.FILE_IDS_MP3]:W.MP3,[R.FILE_IDS_MP4]:W.MP4,[R.FILE_IDS_MP4_DUAL]:W.MP4,[R.FILE_IDS_CBCS]:W.MP4_CBCS,[R.FILE_IDS_MP4FLAC]:W.MP4_FLAC,[R.MANIFEST_IDS_VIDEO]:W.MANIFEST_ID};class gi{constructor(e){this._descriptor=e.descriptor,this._listPlayer=e.listPlayer}static create(e){return new gi(e)}_resolveFromStateTrack(e,t,i){var n,a,s,r;const o=e.manifest,l=e.metadata.uri,d=(0,mi.EC)(l);let c=null;for(const u of i){const e=o[u];if(e)for(const i of e){if(!i.file_id&&!vi.test(null!==(n=i.file_url)&&void 0!==n?n:""))continue;const e=!(!d||d.type!==mi.URITypeMap.AD&&d.type!==mi.URITypeMap.INTERRUPTION);if(u===R.FILE_IDS_MP3&&!e)continue;let o,m;if(o=i.track_type?i.track_type.toLowerCase():u===R.MANIFEST_IDS_VIDEO?"video":"audio",i.format){const e=parseInt(i.format,10);ze[e]&&(m=e)}const _=null!==(a=i.bitrate)&&void 0!==a?a:u===R.FILE_IDS_MP4FLAC?1411200:128e3,h=null!==(s=i.bitrate)&&void 0!==s?s:u===R.FILE_IDS_MP4FLAC?7e5:128e3,p=ki[u];if(c={uri:l,uriType:d&&d.type?d.type:void 0,fileId:null!==(r=i.file_id)&&void 0!==r?r:"",resolvedURL:i.file_url,mediaType:o,format:p,bitrate:h,fileFormat:null!=m?m:void 0,playbackQuality:i.audio_quality,hifi_status:i.hifi_status,impressionURL:i.impression_url,impressionURLs:i.impression_urls,gainDb:i.gain_db,isAd:e,noLog:!1,noTSV:e,noStats:e,noManifest:p===W.MP3,playable:!0},u===R.MANIFEST_IDS_VIDEO||_<=t)return c}}return c}resolveFromStateTrack(e){return Promise.all([Promise.resolve(this._descriptor),this._listPlayer.getCurrentBandwidth()]).then((t=>{let[i,n]=t;return this._resolveFromStateTrack(e,n,i.getManifestFormats())}))}}var Ei,Si=i(52811);!function(e){e.TRACK_DATA_FINALIZED="track_data_finalized",e.DEREGISTER="deregister",e.REGISTER="register",e.BEFORE_TRACK_LOAD="before_track_load",e.CAPPED="capped",e.ERROR="error",e.PAUSE="pause",e.RESUME="resume",e.PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.POSITION_CHANGED="position_changed",e.SPEED_CHANGED="speed_changed",e.STARTED_PLAYING="started_playing",e.PROGRESS="progress",e.PING="ping",e.MODIFY_CURRENT_STATE="modify_current_state",e.STATE_CLEAR="state_clear"}(Ei||(Ei={}));const yi=b.P.forTag("tpapiclient"),fi=b.P.forTag("tpapiclient.endsong"),Ni=b.P.forTag("tpapiclient.endsongs"),Ti=/^hm:\/\/track-playback\/v1/,Ri=/^hm:\/\/play-token\/lost/,Ai=function(e,t){const i=e.getStatusFamily();return i===t.SERVER_ERROR||i===t.CONNECTION_ERROR},bi={condition:Ai,maxRetries:8},Ci={condition:Ai,maxRetries:2};class Ii extends c.vp{constructor(e){super(),this._deviceId=null,this._sequenceNumber=0,this._currentContext=null,this._loading=!1,this._lastSentStateUpdatePayload=null,this._isSendingConflict=!1,this._queuedRejectedStates=[],this._isSendingUpdate=!1,this._queueSendUpdate=[],this._currentTrackInfo={},this._registered=!1,this._isDeregistering=!1,this._waitingForTrackingData=(0,u.$)(),this._lastProcessedStateId=null,this._limitStateUpdates=!1,this._lastUpdateStateTime=0,this._initialUpdateSent=!1,this._startedPlayingUpdateSent=!1,this._nextFinalizedDataPayload=null,this._switchingContext=!1,this._connectionId=null,this._transport=e.transport,this._logger=e.logger,this._endpoint=e.endpoint||"http://@webgate/track-playback",this._listPlayer=e.listPlayer,this._ListClass=e.ListClass,this._currentGaiaVolume=e.initialVolume*_,this._clientVersion=e.clientVersion,this._manifestTrackResolver=e.manifestTrackResolver,this._descriptorPromise=Promise.resolve(e.descriptor),this._init(),this._performCommand=this._performCommand.bind(this),this._handleRegisterResponse=this._handleRegisterResponse.bind(this),this._handleStateConflictResponse=this._handleStateConflictResponse.bind(this),this.register=this.register.bind(this),this._parseDescriptor=this._parseDescriptor.bind(this),this._volumeDebouncer=new Si.d(this._sendVolume.bind(this),{blockInitial:!0})}static create(e){return new Ii(e)}_init(){this._waitingForTrackingData=(0,u.$)(),this._waitingForTrackingData.resolve(!0),this._transport.on(this._transport.EVENT_CONNECTION_ID,this._onConnectionId.bind(this)),this._transport.matchMessages(Ri,this._onPlayTokenLost.bind(this)),this._transport.matchMessages(Ti,this._onTrackPlaybackMessage.bind(this)),this._listPlayer.addListeners({[Y.LIST_PLAYER_CAPPED]:this._onCapped.bind(this),[Y.LIST_PLAYER_ERROR_SYNC]:this._onError.bind(this),[Y.LIST_PLAYER_BEFORE_NEXT]:this._onBeforeTrackChange.bind(this),[Y.LIST_PLAYER_BEFORE_PREVIOUS]:this._onBeforeTrackChange.bind(this),[Y.LIST_PLAYER_BEFORE_PLAYER_LOAD]:this._onBeforePlayerLoad.bind(this),[Y.LIST_PLAYER_PLAYER_LOAD]:this._onListPlayerLoad.bind(this),[Y.LIST_PLAYER_BEFORE_TRACK_LOAD]:this._onBeforeTrackLoad.bind(this),[Y.LIST_PLAYER_POSITION_CHANGED]:this._onPositionChanged.bind(this),[Y.LIST_PLAYER_DURATION_CHANGED]:this._onDurationChanged.bind(this),[Y.LIST_PLAYER_VOLUME_CHANGED]:this._onVolumeChanged.bind(this),[Y.LIST_PLAYER_PLAYBACK_SPEED_CHANGED]:this._onSpeedChanged.bind(this),[Y.LIST_PLAYER_PAUSED]:this._onPlayPause.bind(this,!0),[Y.LIST_PLAYER_PLAYING]:this._onPlayPause.bind(this,!1),[Y.LIST_PLAYER_PLAYED_THRESHOLD_REACHED]:this._onPlayThresholdReached.bind(this),[Y.LIST_PLAYER_PROGRESS]:this._onProgress.bind(this),[Y.LIST_PLAYER_TRACKING_DATA_CREATED]:this._onTrackDataCreatedEvent.bind(this),[Y.LIST_PLAYER_TRACKING_DATA_FINALIZED]:this._onTrackDataFinalizedEvent.bind(this)}),this._descriptorPromise.then((e=>{e.on("descriptor_changed",(()=>{this._parseDescriptor(e),this._updateDeviceInfo()}))}))}_onBeforeTrackChange(){var e,t;if(this._nextFinalizedDataPayload||this._switchingContext)return;const i=null!==(t=null===(e=this._currentContext)||void 0===e?void 0:e.getStateRef())&&void 0!==t?t:null,n=this._generateStatePayload(i,Ei.TRACK_DATA_FINALIZED);this._setSequenceNumber(n),this._nextFinalizedDataPayload=n}_onBeforeTrackLoad(e){var t;this._loading=!0,this._switchingContext=!1,this._currentTrackInfo.duration=void 0,this._stateEventPositionOverride=null===(t=e.data.newTrack.options)||void 0===t?void 0:t.position}_onBeforePlayerLoad(e){var t,i,n,a,s,r,o,l;const d=this._currentContext;if(!d)return;const c=d.getCurrentTrack(),u=null===(t=d.getCurrentState)||void 0===t?void 0:t.call(d),m=null!==(n=null!==(i=null==u?void 0:u.duration_override)&&void 0!==i?i:null==c?void 0:c.metadata.duration)&&void 0!==n?n:0,{data:_}=e,h=_.track.metadata||{},p=this._currentTrackInfo.playbackSpeed||1;this._currentTrackInfo={duration:m,mediaType:_.track.mediaType.toUpperCase(),fileFormat:_.track.fileFormat,bitrate:null===(s=null===(a=_.logData)||void 0===a?void 0:a.format)||void 0===s?void 0:s.bitrate,playbackQuality:h.playbackQuality,hifiStatus:h.hifiStatus,changePlaybackSpeed:null!==(o=!(null===(r=_.track.options)||void 0===r?void 0:r.useDefaultPlaybackSpeed))&&void 0!==o&&o,playbackSpeed:(null===(l=e.data.track.options)||void 0===l?void 0:l.useDefaultPlaybackSpeed)?1:p};const v=_.options;d.setPaused(!v.autoplay),this._setCurrentTrackPosition(v&&v.position||0),this._updateState(Ei.BEFORE_TRACK_LOAD),this._startedPlayingUpdateSent=!1,this._initialUpdateSent=!1}_onCapped(){this._listPlayer.clear(d.CAPPED),this._currentContext=null,this._updateState(Ei.CAPPED),this._setCurrentTrackPosition(void 0),this._lastProcessedStateId=null,this.emit("state_cleared",null)}_onConnectionId(e){this._connectionId=e.data.id,this._isDeregistering||(this._registered=!1,Promise.all([this._listPlayer.getVolume(),this._descriptorPromise.then(this._parseDescriptor)]).then(this.register,(e=>{yi.info("Skipping registration due to error",e),this.emit("registration_aborted",{reason_error:e,source:p.TRACK_PLAYBACK})})).catch((()=>{})))}_onDurationChanged(e){var t;const i=null===(t=this._currentContext)||void 0===t?void 0:t.getCurrentTrack();(null==i?void 0:i.metadata.uri)===e.data.track.uri&&(this._currentTrackInfo.duration=e.data.duration,this._emitStateChanged())}_onError(e){"position"in e.data&&(this._setCurrentTrackPosition(e.data.position),this._updateState(Ei.ERROR))}_onSpeedChanged(e){this._currentTrackInfo.playbackSpeed=e.data.playback_speed,this._updateState(Ei.SPEED_CHANGED)}_onPlayPause(e,t){const i=this._currentContext;i&&(i.setPaused(e),"position"in t.data&&this._setAllTrackPositions(t.data.position),t.data.track.stateId&&this._shouldSendUpdateForEvent(t.data.track.stateId)?this._updateState(e?Ei.PAUSE:Ei.RESUME):(this._lastProcessedStateId=null,this._emitStateChanged()))}_onPlayThresholdReached(e){this._initialUpdateSent=!0,this._setAllTrackPositions(e.data.position),this._updateState(Ei.PLAYED_THRESHOLD_REACHED)}_onPlayTokenLost(){this._listPlayer.pause().catch((function(){}))}_onPositionChanged(e){this._loading||(this._setCurrentTrackPosition(e.data.position),e.data.track&&this._shouldSendUpdateForEvent(e.data.track.stateId)?this._updateState(Ei.POSITION_CHANGED):(this._lastProcessedStateId=null,this._emitStateChanged()))}_onProgress(e){if(this._loading||!this._currentContext)return;this._setAllTrackPositions(e.data.position),!this._startedPlayingUpdateSent&&e.data.played>1e3&&(this._startedPlayingUpdateSent=!0,this._updateState(Ei.STARTED_PLAYING));if(!e.data.logData)return;const t=this._currentContext.getCurrentTrack(),i=t&&"number"==typeof t.ms_playing_update_interval?t.ms_playing_update_interval:null;this._initialUpdateSent&&null!==i&&i>0&&Date.now()-this._lastUpdateStateTime>i&&this._updateState(Ei.PROGRESS)}_onTrackDataCreatedEvent(){this._waitingForTrackingData=(0,u.$)()}_onTrackDataFinalizedEvent(e){const t=this._nextFinalizedDataPayload;t&&(t.playback_stats=e.data.playbackStats,this._updateState(Ei.TRACK_DATA_FINALIZED,t)),this._nextFinalizedDataPayload=null,this._waitingForTrackingData&&this._waitingForTrackingData.resolve(!0)}_onListPlayerLoad(e){this._loading=!1;const t=this._currentContext;t&&(t.setPaused(!e.data.autoplay),this._setCurrentTrackPosition(e.data.position||0))}_onTrackPlaybackMessage(e){const t=e.payloads;Array.isArray(t)&&t.length&&this._performCommand(t[0])}_onVolumeChanged(e){var t;if(this._currentGaiaVolume=e.data.volume*_,!this._registered)return;const i=null!==(t=e.data.commandId)&&void 0!==t?t:"",n={seq_num:void 0,volume:this._currentGaiaVolume,command_id:i};this._volumeDebouncer.async(n)}_clearSessionData(){this._connectionId=null,this._sequenceNumber=0,this._currentContext=null,this._lastSentStateUpdatePayload=null,this._isSendingConflict=!1,this._isSendingUpdate=!1,this._queueSendUpdate=[],this._previousTrackPosition=void 0,this._currentTrackPosition=void 0,this._currentTrackInfo={},this._lastProcessedStateId=null,this.emit("state_cleared",null)}_createStateRef(e,t){if(!t)return null;const i=e.states[t.state_index];if(!i)throw new di(a.TP_CANNOT_CREATE_STATE_REF,"Invalid state reference.");return{state_machine_id:e.state_machine_id,state_id:i.state_id,paused:t.paused}}_deregisterFromService(e){let t=null;const i=this._currentContext;i&&(e&&(i.setPaused(!e.playing),this._setAllTrackPositions(e.position)),t=i.getStateRef());const n=this._generateStatePayload(t,Ei.DEREGISTER);this._setSequenceNumber(n);const a=`${this._endpoint}/v1/devices/${this._deviceId}`;return this._transport.request(a,{authorize:!0,method:"DELETE",payload:JSON.stringify(n),responseType:"json",retry:Ci}).then((e=>{if(200!==e.status&&204!==e.status)return this._registered=!0,!1;const{body:t}=e;return t&&(t.endsong&&fi.log(t.endsong),t.endsongs&&(Ni.log(t.endsongs),this.emit("internal_endcontent",{endcontents:t.endsongs}))),this._clearSessionData(),this.emit("deregistered",null),!0}))}_emitError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("error",{error:e,source:p.TRACK_PLAYBACK}),e.registration||this._logger.logJSSDKError({source:"tpapi-client",source_version:M.tagged,type:e.code,message:e&&e.message,stack:e&&e.stack,json_data:t,json_data_version:"1.0.0"},"object").catch((function(e){yi.error("Track-Playback Logging Error",e)}))}_emitStateChanged(){const e=this._currentContext;if(!e)return;let t=this._currentTrackPosition||0;void 0!==this._stateEventPositionOverride&&(t=this._stateEventPositionOverride,this._stateEventPositionOverride=void 0),this.emit("state_changed",{position:t,currentTrackInfo:this._currentTrackInfo,stateMachine:e.getStateMachine(),stateRef:e.getInternalStateRef(),paused:e.isPaused(),loading:this._loading})}_generateStatePayload(e,t){const i=this._currentTrackInfo;return{seq_num:void 0,seq_nums:void 0,state_ref:e,sub_state:{playback_speed:(null==e?void 0:e.paused)?0:this._currentTrackInfo.playbackSpeed||1,position:this._currentTrackPosition,duration:i.duration||void 0,media_type:i.mediaType,bitrate:i.bitrate,audio_quality:i.playbackQuality,format:i.fileFormat},previous_position:this._previousTrackPosition,playback_stats:void 0,rejected_state_refs:void 0,debug_source:t}}_handleRegisterResponse(e){let t;if(429===e.status)return t=di.fatal(a.TP_MAX_SUBSCRIPTIONS_REACHED,"Max connections reached"),t.maxedSubscriptions=!0,t.status=e.status,this.emit("max_subscriptions_reached",{error:t}),Promise.reject(t);if(403===e.status&&e.body&&"PREMIUM_REQUIRED"===e.body.error_type?t=di.fatal(a.TP_REGISTRATION_FAILED_NON_PREMIUM,"Cannot register to Track Playback with non-premium user."):200!==e.status?t=di.fatal(a.TP_REGISTRATION_FAILED_WITH_STATUS,`track-playback service responded with status ${e.status} when registering device`):e.body||(t=di.fatal(a.TP_NO_RESPONSE_BODY,"Unexpected empty response body from registration request.")),t)return t.status=e.status,Promise.reject(t);const i=e.body;return i.endsong&&fi.log(i.endsong),i.endsongs&&(Ni.log(i.endsongs),this.emit("internal_endcontent",{endcontents:i.endsongs})),this._sequenceNumber=i.initial_seq_num,this._registered=!0,this.emit("registered",{deviceId:this._deviceId}),Promise.resolve(!0)}_handleStateConflictResponse(e){var t;if(e.status>=200&&e.status<300){const i=null===(t=e.body)||void 0===t?void 0:t.commands;if(!i||!i.length)return;for(let e=0,t=i.length;e<t;e++)this._performCommand(i[e])}else{const t=new di(a.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS,`Track-Playback service responded with ${e.status}`);t.status=e.status,this._emitError(t)}}_handleStateUpdateResponse(e,t){let i;if(200!==t.status)return i=new di(a.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS,`Service responded with status ${t.status}`),i.status=t.status,Promise.reject(i);if(!t.body)return i=new di(a.TP_UPDATE_REQUEST_EMPTY_RESPONSE,"Unexpected empty response body from state update request."),i.status=t.status,Promise.reject(i);const n=t.body;n.endsong&&fi.log(n.endsong),n.endsongs&&(Ni.log(n.endsongs),this.emit("internal_endcontent",{endcontents:n.endsongs}));const s=this._currentContext;if(!s)return Promise.resolve();const r=n.state_machine,o=n.updated_state_ref;return this._isCurrentStateRef(e)?(s.setStateMachine(r),s.setCurrentState(o),this._emitStateChanged(),Promise.resolve()):Promise.resolve()}_isCurrentStateRef(e){const t=this._currentContext?this._currentContext.getStateRef():null;return!t&&!e||!(!t||!e)&&(t.state_machine_id===e.state_machine_id&&t.state_id===e.state_id&&t.paused===e.paused)}_logUnsentStateUpdate(e){yi.info("Unsent state update.",e),this._logger.logClientEvent({source:"tpapi-client",source_version:M.tagged,source_vendor:"spotify",event:"unsent-state-update",event_version:"1.0.0",json_data:e},"object").catch((e=>{yi.error("Track-Playback Logging Error",e)}))}_logout(){this._listPlayer.pause().catch((()=>{})),this.emit("state_cleared",null),this.deregister().then((e=>{this._currentContext=null,this._setCurrentTrackPosition(void 0),e&&this.emit("logout",null)}))}_parseDescriptor(e){return this._deviceId=e.getId(),this._deviceInfo=e.toTrackPlaybackDeviceInfo(),!0}_performCommand(e){switch(e.type){case"set_volume":this._setVolume(e);break;case"log_out":this._logout();break;case"replace_state":this._replaceState(e);break;case"ping":this._updateState(Ei.PING);break;default:this._emitError(new di(a.TP_UNKNOWN_COMMAND,"Received unknown command."),{command:e})}}_rejectState(e){const t=this._queuedRejectedStates;if(void 0!==e&&t.push(e),!this._registered||this._isSendingConflict||!t.length)return;this._isSendingConflict=!0;const i=t.splice(0,5),n=this._currentContext?this._currentContext.getStateRef():null,a=this._generateStatePayload(n);a.rejected_state_refs=i,this._setSequenceNumbers(a,i.length);const s=()=>{this._isSendingConflict=!1,this._rejectState()},r=`${this._endpoint}/v1/devices/${this._deviceId}/state_conflict`;this._transport.request(r,{authorize:!0,method:"POST",headers:{"Content-Type":"application/json"},responseType:"json",payload:JSON.stringify(a),retry:Ci}).then(this._handleStateConflictResponse).then(s,s)}_replaceState(e){var t,i,n;const a=this._listPlayer,s=e.state_machine,r=e.state_ref,o=this._createStateRef(s,r);if(!this._isCurrentStateRef(e.prev_state_ref))return void this._rejectState(o);if(!r)return void this._clearContextAndState();const l=null!==(i=null===(t=this._currentContext)||void 0===t?void 0:t.getStateRef())&&void 0!==i?i:null;if(function(e,t){if(!e)throw new Error(`Assertion failed: ${t}`)}(null!==o,"New state reference is null"),this._currentContext&&(null==l?void 0:l.state_id)===o.state_id){const t=this._currentContext;t.setStateMachine(s),t.setCurrentState(r);let i=!1;t.isPaused()!==r.paused&&(i=!0),r.paused?(t.setPaused(!0),a.pause()):(t.setPaused(!1),a.resume());const n=parseInt(e.seek_to,10);t.allowSeeking()&&!isNaN(n)&&(a.seek(n,d.REMOTE),this._setCurrentTrackPosition(n),i=!0),i?this._emitStateChanged():(this._lastProcessedStateId=null,this._updateState(Ei.MODIFY_CURRENT_STATE))}else{this._lastProcessedStateId=null!==(n=o.state_id)&&void 0!==n?n:null,this._currentContext&&this._onBeforeTrackChange();const t=this._ListClass.create("spotify:app:jsspeaker",this._manifestTrackResolver);t.setStateMachine(s),t.startAtState(r),this._deviceId&&t.setDeviceId(this._deviceId),this._currentContext=t;const i=e.seek_to||0;t.setInitialPosition(i),this._loading=!0,this._switchingContext=!0,a.play(t,{reason:d.REMOTE})}}_clearContextAndState(){const e=this._listPlayer;e.pause().catch((function(){})),e.clear(d.REMOTE),this._currentContext=null,this._updateState(Ei.STATE_CLEAR),this._setAllTrackPositions(void 0),this._lastProcessedStateId=null,this.emit("state_cleared",null),this._loading=!0}_sendDevicesRequest(e,t){let i=`${this._endpoint}/v1/devices`;return"PUT"===e&&(i=`${i}/${this._deviceId}`),this._transport.request(i,{authorize:!0,method:e||"POST",headers:{"Content-Type":"application/json"},responseType:"json",payload:JSON.stringify(t),retry:bi})}_sendVolume(e){const t=`${this._endpoint}/v1/devices/${this._deviceId}/volume`;return this._setSequenceNumber(e),this._transport.request(t,{authorize:!0,method:"PUT",headers:{"Content-Type":"application/json"},payload:JSON.stringify(e)})}_setAllTrackPositions(e){this._previousTrackPosition=e,this._currentTrackPosition=e}_setCurrentTrackPosition(e){this._previousTrackPosition=this._currentTrackPosition,this._currentTrackPosition=e}_setSequenceNumber(e){return void 0===e.seq_num&&(e.seq_num=++this._sequenceNumber),e}_setSequenceNumbers(e,t){e.seq_nums=[];for(let i=0;i<t;i++)e.seq_nums.push(++this._sequenceNumber);return e}_setVolume(e){var t;const i=e.volume/_;this._listPlayer.setVolume(i,null!==(t=e.command_id)&&void 0!==t?t:`tpcommand-${Date.now()}`)}_shouldSendUpdateForEvent(e){return!(!e||e===this._lastProcessedStateId)}_updateDeviceInfo(){this._registered&&this._deviceInfo&&this._sendDevicesRequest("PUT",this._deviceInfo).then((e=>{204===e.status&&this.emit("registration_updated",null)}))}_updateState(e,t){var i,n;if(!this._registered)return;let a,s;if(t?(a=t.state_ref,s=t):(a=null!==(n=null===(i=this._currentContext)||void 0===i?void 0:i.getStateRef())&&void 0!==n?n:null,s=this._generateStatePayload(a,e)),!this._shouldSendPayload(s))return void yi.info("State update ignored (duplicate).",s);if(this._emitStateChanged(),this._isSendingUpdate&&this._limitStateUpdates)return this._logUnsentStateUpdate(s),void this._queueSendUpdate.push(e);this._isSendingUpdate=!0,this._queueSendUpdate=[],this._setSequenceNumber(s),this._lastSentStateUpdatePayload=s;const r=()=>{this._isSendingUpdate=!1,this._queueSendUpdate.length&&this._updateState(this._queueSendUpdate[this._queueSendUpdate.length-1]),yi.info("State update sent.",e,s)},o=`${this._endpoint}/v1/devices/${this._deviceId}/state`;this._lastUpdateStateTime=Date.now(),this._transport.request(o,{authorize:!0,method:"PUT",headers:{"Content-Type":"application/json"},responseType:"json",payload:JSON.stringify(s),retry:bi}).then(this._handleStateUpdateResponse.bind(this,a)).then(r,(e=>{this._emitError(e),r()}))}_shouldSendPayload(e){const t=this._lastSentStateUpdatePayload;if(!t||!t.state_ref||!e.state_ref)return!0;const i=e.state_ref,n=t.state_ref;if(i.paused!==n.paused||i.state_id!==n.state_id||i.state_machine_id!==n.state_machine_id)return!0;const a=e.sub_state,s=t.sub_state;if(a.playback_speed!==s.playback_speed||a.position!==s.position)return!0;if(e.previous_position!==t.previous_position)return!0;return Math.abs((a.duration||0)-(s.duration||0))>=26}stop(){return!(!this._registered||!this._currentContext)&&(this._clearContextAndState(),!0)}deregister(){return this._registered?(this._isDeregistering=!0,this._registered=!1,this._listPlayer.getPlayerState().then((e=>Promise.all([this._deregisterFromService(e),this._waitingForTrackingData.promise,this._listPlayer.stop().catch((()=>{}))]).then((e=>{let[t]=e;return this._isDeregistering=!1,t}))),(()=>(this._isDeregistering=!1,this._registered=!0,!1)))):Promise.resolve(!1)}register(){if(this._registered)return Promise.resolve(!1);if(!this._deviceInfo)return Promise.reject(new Error("Need DeviceInfo for device registration."));if(!this._connectionId)return Promise.reject(new Error("Need connection-id for device registration"));let e;const t=this._currentContext;return t&&(e=this._generateStatePayload(t.getStateRef(),Ei.REGISTER),this._setSequenceNumber(e)),this._sendDevicesRequest("POST",{device:this._deviceInfo,outro_endcontent_snooping:"true"==={}.OUTRO_SNOOPING,connection_id:this._connectionId,client_version:this._clientVersion,previous_session_state:e,volume:this._currentGaiaVolume}).then(this._handleRegisterResponse).catch((e=>(e&&!e.maxedSubscriptions&&(e.registration=!0,this._emitError(e)),!1)))}}function Li(e){return function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n,a,s,r,o,l,d,c,u;const m=e.getSDKId(),_=e.getPublicTransport(),h=e.getLogger(),p=e.getDeviceDescriptor(),v=null!==(n=i.initialVolume)&&void 0!==n?n:1;i.audioProcessorOptions=Object.assign(Object.assign({},i.audioProcessorOptions),{disable:null===(s=null===(a=i.audioProcessorOptions)||void 0===a?void 0:a.disable)||void 0===s||s});const k=oi(Object.assign(Object.assign({},i),{transport:_,sdkId:e.getUntaggedSDKId(),loggerOptions:{disableMux:null===(l=null!==(o=null===(r=null==i?void 0:i.mux)||void 0===r?void 0:r.disable)&&void 0!==o?o:null==i?void 0:i.disableMux)||void 0===l||l,muxEnvKey:null!==(c=null===(d=null==i?void 0:i.mux)||void 0===d?void 0:d.envKey)&&void 0!==c?c:null==i?void 0:i.muxEnvKey,deviceInfo:p.then((e=>({platform_name:e.getPlatformName(),platform:e.getPlatformIdentifier(),version:e.getPlatformVersion(),brand:e.getBrand(),model:e.getModel(),type:e.getType()}))),muxCustomDimensions:null===(u=null==i?void 0:i.mux)||void 0===u?void 0:u.customDimensions,platform:e.getPlatformIdentifier(),clientVersion:e.getPlatformVersion()}})).then((e=>{let{player:t}=e;return t})),g=k.then((e=>e.getMediaConfig())),E=Promise.all([p,g]).then((e=>{let[t,n]=e;return t.getCapability("audio_podcasts")&&!i.disableExternalFiles&&t.appendManifestFormat(R.FILE_URLS_EXTERNAL),n.keysystem===K.FAIRPLAY?t.appendManifestFormat(R.FILE_IDS_CBCS):n.keysystem!==K.WIDEVINE||i.preferMultiDRMFormat?t.appendManifestFormat(R.FILE_IDS_MP4_DUAL,R.FILE_IDS_MP4):(-1!==n.formats.audio.indexOf('audio/mp4; codecs="flac"')&&t.getCapability("lossless_playback")&&t.appendManifestFormat(R.FILE_IDS_MP4FLAC),t.appendManifestFormat(R.FILE_IDS_MP4,R.FILE_IDS_MP4_DUAL)),n.supports.protected_video&&t.getCapability("video_playback")&&t.prependManifestFormat(R.MANIFEST_IDS_VIDEO),t})),S=si.create({trackPlayer:k}),y=gi.create({descriptor:p,listPlayer:S}),{playbackServiceClient:f,playbackStateObserver:N}=t({initialVolume:v,listPlayer:S,logger:h,transport:_,clientVersion:m,descriptor:E,endpoint:i.endpoint,manifestTrackResolver:y});return new li({client:e,playbackServiceClient:f,playbackStateObserver:N,initialVolume:v,playerPromise:k,listPlayer:S,stopOnBackground:i.stopOnBackground})}(e,(e=>{const t=Ii.create(Object.assign(Object.assign({},e),{ListClass:ci}));return{playbackServiceClient:t,playbackStateObserver:pi.create(t)}}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}var Pi,Di=i(11177);!function(e){e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.STOPPED="stopped",e.REMOTE_ACTIVATED="remote_activated",e.UNKNOWN="unknown"}(Pi||(Pi={}));class Oi extends Error{constructor(e,t){super(t),this.status=-1,this.maxedSubscriptions=!1,this.unrecoverable=!1,this.debug={},this.code=e,this.name="PlayerAPIClientError"}static fatal(e,t){const i=new Oi(e,t);return i.unrecoverable=!0,i}}class Fi{constructor(e){this._transport=e.transport,this._metadataCache=new $.z6(e.cacheSize||20)}static create(e){return new Fi(e)}_decorateTrackWindow(e){const t=this._metadataCache,i={current_track:null,next_tracks:[],previous_tracks:[]};let n,a,s;e.current_track&&(a=t&&e.current_track&&"uri"in e.current_track&&t.get(e.current_track.uri),i.current_track=Object.assign({uid:e.current_track.uid},a||e.current_track)),n=e.next_tracks.length;for(;n--;)s=e.next_tracks[n],a=t&&s&&"uri"in s&&t.get(s.uri),i.next_tracks[n]=Object.assign({uid:s.uid},a||s);for(n=e.previous_tracks.length;n--;)s=e.previous_tracks[n],a=t&&s&&"uri"in s&&t.get(s.uri),i.previous_tracks[n]=Object.assign({uid:s.uid},a||s);return i}_buildTrackList(e){const t=[],i={},n=[e.current_track,...e.next_tracks,...e.previous_tracks];for(const a of n)a&&!i[a.uri]&&t.push(a.uri);return t}_cacheMetadata(e){const t=[],i=[],n=this._metadataCache;for(const a of e){if(n.get(a))continue;const e=(0,mi.EC)(a);e&&(e.type===mi.URITypeMap.TRACK?i.push(e.id):e.type===mi.URITypeMap.EPISODE&&t.push(e.id))}return t.length||i.length?Promise.all([this._requestMultiData("episodes",t),this._requestMultiData("tracks",i)]).then((e=>{let[t,i]=e;return!!t||!!i})):Promise.resolve(!0)}_requestMultiData(e,t){if(!t.length)return Promise.resolve(!1);const i=this._metadataCache,n=["https://@webapi/v1/",e,"?ids=",t.join(","),"&market=from_token"].join("");return this._transport.request(n,{responseType:"json"}).then((t=>{var n;if(200!==t.status)return!1;const a=null===(n=t.body)||void 0===n?void 0:n[e];if(!a)return!1;let s=a.length;for(;s--;){let t=a[s];t&&("episodes"===e?t=this._formatEpisodeData(t):(t.track_type="audio",t.media_type="audio"),i&&i.set(t.uri,t),i&&t.linked_from&&t.linked_from.uri&&i.set(t.linked_from.uri,t))}return!0}))}_formatEpisodeData(e){const t="audio"===e.show.media_type?"audio":"video";return{id:e.id,uri:e.uri,type:"episode",media_type:t,track_type:e.show.media_type,name:e.name,artists:[{uri:e.show.uri,name:e.show.publisher}],album:{uri:e.show.uri,name:e.show.name,images:e.images},duration_ms:e.duration_ms||0,is_playable:!0}}formatLocalTrack(e,t){if(!e||e.type!==mi.URITypeMap.LOCAL_TRACK)return null;return{uri:e.toURI(),type:"local",uid:t,media_type:"audio",track_type:"audio",name:e.track,artists:[{uri:(0,mi.ak)(e.artist).toURI(),name:e.artist}],album:{uri:(0,mi.Jf)(e.artist,e.album).toURI(),name:e.album,images:[{url:""}]},duration_ms:e.duration?1e3*e.duration:0,is_playable:!1}}formatAd(e,t){if(!e||e.type!==mi.URITypeMap.AD&&e.type!==mi.URITypeMap.INTERRUPTION)return null;if(!t||!t.metadata)return null;const i=t.metadata;return{id:e.id,uri:e.toURI(),type:e.type,uid:t.uid,media_type:"audio",track_type:"audio",name:i.advertiser,artists:[{uri:i.click_url,name:i.buttonMessage||i.advertiser}],album:{uri:i.click_url,name:i.advertiser,images:[{url:i.image_url}]},duration_ms:parseInt(i.duration,10),is_playable:!1}}decorateTrackWindow(e,t){const i=null!=t?t:this._buildTrackList(e);return this._cacheMetadata(i).then((t=>t?this._decorateTrackWindow(e):e))}}const wi=b.P.forTag("harmony.controller"),xi=/^disallow_([^]+)_reasons$/,Mi={disallow_pausing_reasons:!0,disallow_peeking_next_reasons:!0,disallow_peeking_prev_reasons:!0,disallow_resuming_reasons:!0,disallow_seeking_reasons:!0,disallow_skipping_next_reasons:!0,disallow_skipping_prev_reasons:!0,disallow_toggling_repeat_context_reasons:!0,disallow_toggling_repeat_track_reasons:!0,disallow_toggling_shuffle_reasons:!0,disallow_transferring_playback_reasons:!0},Ui="premium",ji="on-demand",Bi={unknown:ei.UNKNOWN,default:ei.DEFAULT,low:ei.LOW,normal:ei.NORMAL,normalized:ei.NORMAL,high:ei.HIGH,veryhigh:ei.VERY_HIGH,hifi:ei.HIFI},Gi={on:ui.ON,off:ui.OFF,none:ui.NONE};function Vi(e,t){if(!e)return[];const i=[],n=[mi.URITypeMap.TRACK,mi.URITypeMap.EPISODE];for(let a=0,s=e.length;a<s;a++){let s,r=e[a];if(!r)throw new TypeError("Null value inside track array.");if("string"==typeof r?(s=(0,mi.EC)(r),r={uri:r}):s=(0,mi.EC)(r.uri),!/^spotify:(meta:|delimiter)/.test(r.uri)){if(!s)throw new TypeError(`Invalid uri string: ${s}`);if(-1===n.indexOf(s.type))throw new TypeError(`Invalid track uri: ${r.uri}`)}r.metadata||(r.metadata={}),t&&t.queued&&(r.metadata.is_queued="true"),i.push(r)}return i}function Yi(e){if(e){if(/^.+:\/\//.test(e))return e;throw new TypeError(`Invalid page url: ${e}`)}}class Ki extends c.vp{constructor(e){super(),this._suppressed=!1,this._lastDeviceInfoData=null,this._state=null,this._lastPlayerState=null,this._isOrphanedState=!1,this._progressPosition=0,this._lastProgressTs=0,this._trackingIntervalId=0,this._queue=null,this._client=e.client,this._serverTime=e.serverTime,this._version=e.version,this._playerClient=e.playerClient,this._disableProgress=!!e.disableProgress,this._transport=this._client.getPublicTransport(),this._decorate=!!e.decorateTrackWindow,this._metadataDecorator=new Fi({transport:this._transport}),this._onClientBeforeDisconnect=this._onClientBeforeDisconnect.bind(this),this._onDeviceStateChanged=this._onDeviceStateChanged.bind(this),this._onPlayerStateChanged=this._onPlayerStateChanged.bind(this),this._onProgressTracking=this._onProgressTracking.bind(this),this._client.on("before_disconnect",this._onClientBeforeDisconnect),this.proxyEmit(this._playerClient,"max_subscriptions_reached","max_subscriptions_reached"),this.proxyEmit(this._playerClient,"devices_changed","devices_changed"),this.proxyEmit(this._playerClient,"registered","registered"),this.proxyEmit(this._playerClient,"deregistered","deregistered"),this._playerClient.on("device_state_changed",this._onDeviceStateChanged),this._playerClient.on("player_state_changed",this._onPlayerStateChanged)}static create(e){return new Ki(e)}_onClientBeforeDisconnect(e){e&&e.data.awaitPromise(this._playerClient.deregister().catch((()=>{})))}_onDeviceStateChanged(e){var t,i;const{deviceState:n,hasOrphanedState:a}=e.data,s=!!(null===(i=null===(t=this._lastDeviceInfoData)||void 0===t?void 0:t.deviceInfo)||void 0===i?void 0:i.local);this._lastDeviceInfoData={deviceInfo:n,hasOrphanedState:a},s&&!(null==n?void 0:n.local)&&this._playerClient.getDevices().then((e=>{let{localDevice:t}=e,i=Pi.STOPPED;a?t||(i=Pi.LOCAL_PLAYER_DISABLED):i=Pi.REMOTE_ACTIVATED,this.emit("device_deactivated",{reason:i})})).catch((e=>{wi.warn("Device deactivation checking failed.",e)})),this._suppressed||this.emit("device_info_changed",this._lastDeviceInfoData)}_startProgressTracking(){this._stopProgressTracking(),this._lastProgressTs=Date.now(),this._onProgressTracking(),this._trackingIntervalId=setInterval(this._onProgressTracking,500)}_stopProgressTracking(){this._trackingIntervalId&&(clearInterval(this._trackingIntervalId),this._trackingIntervalId=0)}_onProgressTracking(){var e;const t=Date.now(),i=(null===(e=this._lastPlayerState)||void 0===e?void 0:e.playback_speed)||1;this._progressPosition+=i*(t-this._lastProgressTs),this.emit("progress",{position:this._progressPosition,timestamp:Date.now()}),this._lastProgressTs=t}_getLicense(){return this._client.getProductState().then((e=>"premium"===e.product?Ui:ji)).catch((()=>ji))}_generatePlayOptions(e,t){return this._getLicense().then((i=>{const n={license:i};if(!e)return n;if(("index"in e||"trackUID"in e||"trackURI"in e||"pageIndex"in e)&&(n.skip_to={track_uid:e.trackUID,track_index:e.index,track_uri:e.trackURI,page_index:e.pageIndex}),"initialOffset"in e&&(n.seek_to=e.initialOffset),"paused"in e&&(n.initially_paused=e.paused),"alwaysPlaySomething"in e&&(n.always_play_something=e.alwaysPlaySomething),t)return n;n.player_options_override={};const a=n.player_options_override;if("shuffle"in e&&(a.shuffling_context=e.shuffle),"repeatMode"in e)switch(e.repeatMode){case v.CONTEXT:a.repeating_context=!0,a.repeating_track=!1;break;case v.TRACK:a.repeating_track=!0,a.repeating_context=!1;break;case v.OFF:a.repeating_track=!1,a.repeating_context=!1}return n}))}_setFilterAndSort(e,t){t&&t.filter&&e.metadata&&(e.metadata["filtering.predicate"]=t.filter),t&&t.sort&&e.metadata&&(e.metadata["sorting.criteria"]=t.sort)}_setMetadataOptions(e,t){if(!t)return;const i=e.metadata||{};"autoplayCandidate"in t&&(i.autoplay_candidate=t.autoplayCandidate?"true":"false"),e.metadata=i}_generatePlayOrigin(e){if(e&&e.featureClasses&&!Array.isArray(e.featureClasses))throw new TypeError("PlayOptions playOrigin.featureClasses must be an array of strings.");return{feature_identifier:e&&e.featureIdentifier||"harmony",feature_version:e&&e.featureVersion||this._version,feature_classes:e&&e.featureClasses,view_uri:e&&e.viewURI,external_referrer:e&&e.externalReferrer,referrer_identifier:e&&e.referrerIdentifier}}_generateLoggingParams(e){if(!e)return;const{pageInstanceId:t,interactionId:i}=e;return{page_instance_ids:t?[t]:[],interaction_ids:i?[i]:[]}}_parseRestrictions(e){const t={};for(const i in e.restrictions)e.restrictions.hasOwnProperty(i)&&Mi[i]?t[i]=e.restrictions[i]:Mi[i]&&(t[i]=[]);return t}_parseDisallows(e){const t={},i=e.restrictions;for(const n in i)if(i.hasOwnProperty(n)&&Mi[n]){const e=i[n],a=!(!e||!e.length);t[n.replace(xi,"$1")]=a}return t}_onPlayerStateChanged(e){this._isOrphanedState=e.data.orphaned,this._parsePlayerState(e.data.playerState).then((t=>{this._state=t,this._suppressed||this.emit("state_changed",{state:t?Object.assign({},t):null,orphaned:e.data.orphaned}),!this._disableProgress&&t&&(this._progressPosition=t.position,t.paused?this._stopProgressTracking():this._startProgressTracking())}))}_parsePlayerState(e){return this._lastPlayerState=e,e?this._getTrackWindow(e).then((t=>{var i,n,a,s,r,o,l,d;return{context:{uri:e.context_uri||null,metadata:e.context_metadata||{}},timestamp:e.timestamp,duration:e.duration||t.current_track&&"uri"in t.current_track&&t.current_track.duration_ms||0,position:e.is_paused?e.position_as_of_timestamp:this._offsetPosition(e.timestamp,e.position_as_of_timestamp,null===(i=this._lastPlayerState)||void 0===i?void 0:i.playback_speed),playback_id:null,playback_quality:null!==(s=Bi[null!==(a=null===(n=e.playback_quality)||void 0===n?void 0:n.bitrate_level)&&void 0!==a?a:"unknown"])&&void 0!==s?s:ei.UNKNOWN,playback_features:{hifi_status:Gi[null!==(o=null===(r=e.playback_quality)||void 0===r?void 0:r.hifi_status)&&void 0!==o?o:"none"]},paused:!!e.is_paused,shuffle:!(!e.options||!e.options.shuffling_context),repeat_mode:this._getStateRepeatMode(e),restrictions:this._parseRestrictions(e),disallows:this._parseDisallows(e),track_window:t,bitrate:null,loading:null!==(d=null===(l=this._state)||void 0===l?void 0:l.loading)&&void 0!==d&&d}})):Promise.resolve(null)}_offsetPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=t+(((arguments.length>3?arguments[3]:void 0)||this._serverTime.getApproximate())-e)*i;return n<0?0:n}_isRestricted(e,t){if(!e||!e.restrictions)return!1;const i=`disallow_${t}_reasons`;return!!(e.restrictions[i]||[]).length}_getTrackWindow(e){const t={current_track:null,next_tracks:[],previous_tracks:[]},i={},n=[];if(!e.track)return Promise.resolve(t);const a=e.track.uri;if(!a)return Promise.resolve(t);const s=this._metadataDecorator,r=(0,mi.EC)(a),o=s.formatLocalTrack(r,e.track.uid),l=s.formatAd(r,e.track);return t.current_track=o||l||{uri:a,uid:e.track.uid,type:r&&r.type?r.type:"unknown"},o||l||(i[a]=1,n.push(a)),this._isRestricted(e,"peeking_next")||this._fillWindow(n,t.next_tracks,i,e.next_tracks?e.next_tracks.slice(0,5):[]),this._isRestricted(e,"peeking_prev")||this._fillWindow(n,t.previous_tracks,i,e.prev_tracks?e.prev_tracks.slice(-5):[],!0),this._decorate?this._metadataDecorator.decorateTrackWindow(t,n):Promise.resolve(t)}_fillWindow(e,t,i,n,a){a&&n.reverse();for(const s of n){const n=s.uri,r=(0,mi.EC)(n);if(!n||"spotify:delimiter"===n||r&&(r.type===mi.URITypeMap.AD||r.type===mi.URITypeMap.INTERRUPTION))continue;const o=this._metadataDecorator.formatLocalTrack(r,s.uid),l=o||{uri:n,uid:s.uid,type:"unknown"};if(o||n in i||(i[n]=1,e.push(n)),a?t.unshift(l):t.push(l),2===t.length)break}}_getStateRepeatMode(e){const t=e.options;return t&&t.repeating_track?v.TRACK:t&&t.repeating_context?v.CONTEXT:v.OFF}_play(e,t,i){return this._setFilterAndSort(e,i),this._setMetadataOptions(e,i),this._generatePlayOptions(i).then((n=>{const a={context:e,play_origin:this._generatePlayOrigin(i&&i.playOrigin),options:n,logging_params:this._generateLoggingParams(null==i?void 0:i.loggingParams)};return this._playerClient.play(a,t)}))}getActiveDevice(){return this._playerClient.getActiveDevice()}getCurrentState(e){var t;if(e&&this._isOrphanedState)return Promise.resolve(null);const i=this._state;if(i&&!i.paused){const e=this._serverTime.getApproximate();i.position=this._offsetPosition(i.timestamp,i.position,null===(t=this._lastPlayerState)||void 0===t?void 0:t.playback_speed,e),i.timestamp=e}return Promise.resolve(i?Object.assign({},i):null)}getContextPlayerState(){return wi.warn("The `getContextPlayerState()` method is not well supported. Please avoid using it directly."),this._playerClient.getContextPlayerState()}getDevices(){return this._playerClient.getDevices()}playURI(e,t,i){if(!(0,mi.EC)(e))return Promise.reject(new TypeError("Invalid Spotify URI"));const n={uri:e,url:`context://${e}`,metadata:i&&i.contextMetadata||{}};return this._play(n,t,i)}playPages(e,t,i){var n;if(!Array.isArray(e))return Promise.reject(new TypeError("Invalid pages array."));let a;try{a=function(e){var t,i,n;const a=[];for(const s of e)a.push({tracks:Array.isArray(s.tracks)?Vi(s.tracks):void 0,page_url:null!==(t=Yi(s.pageURL))&&void 0!==t?t:void 0,next_page_url:null!==(i=Yi(s.nextPageURL))&&void 0!==i?i:void 0,metadata:null!==(n=s.metadata)&&void 0!==n?n:void 0});return a}(e)}catch(r){return Promise.reject(r)}const s={uri:null!==(n=null==i?void 0:i.contextURI)&&void 0!==n?n:"spotify:internal:harmony-play-pages",metadata:(null==i?void 0:i.contextMetadata)||{},pages:a};return this._play(s,t,i)}playTracks(e,t,i){var n;if(!Array.isArray(e))return Promise.reject(new TypeError("Invalid tracks array."));let a;try{a=Vi(e)}catch(r){return Promise.reject(r)}const s={uri:null!==(n=null==i?void 0:i.contextURI)&&void 0!==n?n:"spotify:internal:harmony-play-tracks",metadata:(null==i?void 0:i.contextMetadata)||{},pages:[{tracks:a}]};return this._play(s,t,i)}updateCurrentContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._playerClient.updateCurrentContext(e,t)}setQueue(e,t,i){if(!Array.isArray(e))return Promise.reject(new TypeError("Invalid nextTracks array."));if(!Array.isArray(t))return Promise.reject(new TypeError("Invalid previousTracks array."));let n,a;try{n=Vi(e),a=Vi(t)}catch(r){return Promise.reject(r)}const s={next_tracks:n.length?n:void 0,prev_tracks:a.length?a:void 0};return this._playerClient.setQueue(s,i)}transfer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._playerClient.transfer(e,t)}pause(e,t){const i={logging_params:this._generateLoggingParams(null==t?void 0:t.loggingParams)};return this._playerClient.pause(e,i)}resume(e,t){const i={logging_params:this._generateLoggingParams(null==t?void 0:t.loggingParams)};return this._playerClient.resume(e,i)}togglePlay(e,t){const i={logging_params:this._generateLoggingParams(null==t?void 0:t.loggingParams)};return this._playerClient.togglePlay(e,i)}nextTrack(e,t){const i={logging_params:this._generateLoggingParams(null==t?void 0:t.loggingParams)};return(null==t?void 0:t.track)&&(i.track=y([t.track])[0]),this._playerClient.nextTrack(e,i)}previousTrack(e,t){const i={logging_params:this._generateLoggingParams(null==t?void 0:t.loggingParams)};return(null==t?void 0:t.track)&&(i.track=y([t.track])[0]),this._playerClient.previousTrack(e,i)}seek(e,t){return this._playerClient.seek(e,t)}setShuffle(e,t,i){const n={logging_params:this._generateLoggingParams(null==i?void 0:i.loggingParams)};return this._playerClient.setShuffle(e,t,n)}toggleShuffle(e,t){const i={logging_params:this._generateLoggingParams(null==t?void 0:t.loggingParams)};return this._playerClient.toggleShuffle(e,i)}setVolume(e,t){return this._playerClient.setVolume(e,t)}logout(e){return this._playerClient.logout(e)}setRepeatMode(e,t){return this.getCurrentState().then((i=>{if(!i)return Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"));const n=this._playerClient,s=i.disallows;switch(e){case v.OFF:return(!s.toggling_repeat_context||!s.toggling_repeat_track)&&n.setOptions({repeating_context:!!s.toggling_repeat_context&&void 0,repeating_track:!!s.toggling_repeat_track&&void 0},t);case v.CONTEXT:return!s.toggling_repeat_context&&n.setOptions({repeating_context:!0,repeating_track:!!s.toggling_repeat_track&&void 0},t);case v.TRACK:return!s.toggling_repeat_track&&n.setOptions({repeating_context:!s.toggling_repeat_context||void 0,repeating_track:!0},t);default:return Promise.reject(new TypeError("Unknown repeat mode."))}}))}register(){return this._playerClient.register()}suppressEvents(){this._suppressed=!0}unsuppressEvents(){this._suppressed=!1,this._lastDeviceInfoData&&this.emit("device_info_changed",this._lastDeviceInfoData),this._state&&this.emit("state_changed",{state:this._state})}getQueueManager(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._queue){const i=t.reportInitial?this._lastPlayerState:null;this._queue=new N(Object.assign({connectClient:this._playerClient,initialContextPlayerState:i,runner:e},t))}return this._queue}}var Hi=i(68513);const Wi=/connect-state\/v1\/cluster$/,qi=/^([a-zA-Z0-9_%:-]{1,40}).*$/;function Qi(e){var t,i,n;return!!e.track&&0===(null!==(n=null===(i=null===(t=e.restrictions)||void 0===t?void 0:t.disallow_transferring_playback_reasons)||void 0===i?void 0:i.length)&&void 0!==n?n:0)}const $i="::a_";function zi(e){if(!e)return{deviceId:null};const[t,i]=e.split($i);return{deviceId:t,aliasId:i?parseInt(i,10):void 0}}class Zi extends c.vp{constructor(e){super(),this._autoregister=!0,this._connectionId="",this._localDeviceId="",this._localObserverDeviceId=null,this._lastActiveDevice=null,this._lastKnownPlayerState=null,this._lastKnownDevices=[],this._localDevice=null,this._fetchedInitialState=!1,this._awaitingAcknowledgment={},this._acknowledgementMaps=[],this._lastProcessedTimestamp=0,this._descriptor=e.descriptor,this._transport=e.transport,this._endpoint=e.endpoint||"@webgate/connect-state",this._autoregister=!("autoregister"in e)||!!e.autoregister,this._onConnectionId=this._onConnectionId.bind(this),this._onClusterMessage=this._onClusterMessage.bind(this),this._awaitResponseWithAck=this._awaitResponseWithAck.bind(this),this._transport.on(this._transport.EVENT_CONNECTION_ID,(e=>{this._onConnectionId(e.data.id)})),this._transport.matchMessages(Wi,this._onClusterMessage),this._descriptorPromise=Promise.resolve(this._descriptor).then((e=>(this._localDeviceId=e.id||"",this._localObserverDeviceId=("hobs_"+this._localDeviceId).replace(qi,"$1"),!0)))}static create(e){return new Zi(e)}_onConnectionId(e){this._connectionId=e,this._autoregister&&this.register()}_onClusterMessage(e){const t=e.payloads&&e.payloads[0];if(t){if(t.ack_id){const e=t.ack_id,i=this._awaitingAcknowledgment[e];if(i)i.resolve(!0);else{const t=this._acknowledgementMaps;for(const i of t)i[e]=(0,u.$)()}}this._parseCluster(t.cluster)}}_resolveTargetDevice(e){return this._descriptorPromise.then((()=>{const t=this._localDeviceId;return zi(e?e===m?t:e:this._lastActiveDevice?this._lastActiveDevice.id:t)}))}_makeEndpoint(e,t,i){return this._descriptorPromise.then((()=>{const n=this._localDeviceId;return`${this._endpoint}/${e}/${t}/from/${n}/to/${i}`}))}_sendPlayerCommand(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.endpoint=e;const n={command:i};return this._resolveTargetDevice(t).then((e=>{if(!e.deviceId)throw new Oi(a.CONNECTAPI_CLIENT_MISSING_DEVICE_ID,"Operation resulted in a null device id");return!n.target_alias_id&&e.aliasId&&(n.target_alias_id=e.aliasId),this._makeEndpoint("v1","player/command",e.deviceId)})).then((e=>this._sendRequest(Hi.n.POST,e,n))).then(this._awaitResponseWithAck)}_sendConnectCommand(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="volume"===e?Hi.n.PUT:Hi.n.POST,s="volume"===e||"logout"===e;return this._resolveTargetDevice(t).then((t=>{if(!t.deviceId)throw new Oi(a.CONNECTAPI_CLIENT_MISSING_DEVICE_ID,"Operation resulted in a null device id");return t.aliasId&&(s?i.command_options={target_alias_id:t.aliasId}:i.target_alias_id||(i.target_alias_id=t.aliasId)),this._makeEndpoint("v1",`connect/${e}`,t.deviceId)})).then((e=>this._sendRequest(n,e,i))).then(this._awaitResponseWithAck)}_sendRequest(e,t,i){const n=this._acknowledgementMaps,a={};n.push(a);const s=()=>{const e=n.indexOf(a);-1!==e&&n.splice(e,1)};return this._transport.request(t,{method:e,payload:i?JSON.stringify(i):void 0,responseType:"json",retry:{condition:(e,t)=>{const i=e.getStatusFamily();return i===t.SERVER_ERROR||i===t.CONNECTION_ERROR}}}).then((e=>(s(),{response:e,map:a})),(e=>(s(),Promise.reject(e))))}_awaitResponseWithAck(e){var t,i;if(404===e.response.status)return Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_DEVICE,"No such device."));const n=null===(t=e.response.body)||void 0===t?void 0:t.ack_id;if(200===e.response.status&&n){if(null===(i=e.map)||void 0===i?void 0:i[n])return Promise.resolve(!0);const t=(0,u.$)();return this._awaitingAcknowledgment[n]=t,t.promise}return Promise.resolve(202===e.response.status&&!n)}_parseCluster(e){if(!e)return;const t=parseInt(e.timestamp,10);this._lastProcessedTimestamp>t||(this._lastProcessedTimestamp=t,this._parseClusterDevices(e),this._parseClusterPlayerState(e))}_parseClusterDevices(e){const t=this._lastActiveDevice;this._lastActiveDevice=null,this._lastKnownDevices=[],this._localDevice=null;const i=[];for(const n in e.devices)e.devices.hasOwnProperty(n)&&i.push(n);if(i.sort(),i.length){const t=e.active_device_id;for(const n of i){const i=e.devices[n],a=this._formatClusterDevice(i,t);this._lastKnownDevices.push(...a);for(const e of a)e.is_active&&(this._lastActiveDevice=e),e.local&&(this._localDevice=e)}}if(!this._fetchedInitialState||!g(this._lastActiveDevice,t)){const i=e.player_state,n=i&&Qi(i);this.emit("device_state_changed",{deviceState:this._lastActiveDevice,hasOrphanedState:!this._lastActiveDevice&&!!n,disappeared:!!t&&!this._lastActiveDevice})}this.emit("devices_changed",{devices:this._lastKnownDevices,localDevice:this._localDevice})}_formatClusterDevice(e,t){const i={};if(e&&Array.isArray(e.metadata))for(let r=0,o=e.metadata.length;r<o;r++){const t=e.metadata[r];i[t.type]=t.metadata}const{capabilities:n}=e,a={hidden:!1,id:e.device_id,is_active:e.device_id===t,is_controllable:!!n.is_controllable,is_observable:!!n.is_observable,local:e.device_id===this._localDeviceId,metadata:i,name:e.name,type:(e.device_type||A.UNKNOWN).toLowerCase(),version:e.device_software_version,volume:n.disable_volume?-1:e.volume/_||0,capabilities:{supports_lossless_audio:!!n.supports_lossless_audio},is_alias:!1,is_alias_group:!1,playback_features:{hifi_status:n.supports_hifi},is_group:!!e.is_group,is_being_activated:!1};if(!e.device_aliases)return[a];const s=[];for(const r in e.device_aliases){if(!e.device_aliases.hasOwnProperty(r))continue;const t=e.device_aliases[r];if(!t)continue;const i=Object.assign(Object.assign({},a),{id:`${a.id}${$i}${t.id}`,name:t.display_name,is_alias:!0,is_alias_group:e.is_group||t.is_group,is_active:a.is_active&&e.selected_alias_id===t.id,is_group:!!t.is_group});s.push(i)}return s}_parseClusterPlayerState(e){this._lastKnownPlayerState=null;const t=e.active_device_id,i=t&&e.devices[t];let n=e.player_state;n&&n.track&&(i&&i.capabilities&&!i.capabilities.is_observable?n=null:(i||(n.is_paused=!0,n.restrictions&&(delete n.restrictions.disallow_resuming_reasons,n.restrictions.disallow_pausing_reasons=["already_paused"])),n.duration=parseInt(n.duration,10),n.position=parseInt(n.position,10),n.position_as_of_timestamp=parseInt(n.position_as_of_timestamp,10),n.timestamp=parseInt(n.timestamp,10),n.next_tracks=n.next_tracks||[],n.prev_tracks=n.prev_tracks||[]),this._lastKnownPlayerState=n);let a=!i&&!!this._lastKnownPlayerState;a&&n&&!Qi(n)&&(this._lastKnownPlayerState=null,a=!1),this.emit("player_state_changed",{playerState:this._lastKnownPlayerState,orphaned:a,isLocal:!!t&&t===this._localDeviceId})}_register(){this._fetchedInitialState=!1;const e=`${this._endpoint}/v1/devices/${this._localObserverDeviceId}`;return this._connectionId||Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_CONNECTION_ID,"Cannot register: no connection id.")),this._transport.request(e,{method:"PUT",headers:{"X-Spotify-Connection-Id":this._connectionId,Accept:"application/json"},payload:JSON.stringify({member_type:"CONNECT_STATE",device:{device_info:{capabilities:{can_be_player:!1,hidden:!0,needs_full_player_state:!0}}}}),responseType:"json"}).then((e=>{429===e.status?this.emit("max_subscriptions_reached",{error:new Oi(a.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED,"Max connections reached")}):200===e.status&&(this.emit("registered",null),e.body&&(this._parseCluster(e.body),this._fetchedInitialState=!0)),429!==e.status&&408!==e.status||(this._lastKnownDevices=this._lastKnownDevices.map((e=>(e.is_being_activated=!1,e))),this._localDevice&&(this._localDevice.is_being_activated=!1),this.emit("devices_changed",{devices:this._lastKnownDevices,localDevice:this._localDevice}))}))}register(){return this._connectionId?this._descriptorPromise.then(this._register.bind(this)):Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_CONNECTION_ID,"Cannot register: no connection id."))}deregister(){const e=`${this._endpoint}/v1/devices/${this._localObserverDeviceId}`;return this._transport.request(e,{method:"DELETE",responseType:"json"}).then((e=>{200===e.status&&this.emit("deregistered",null)}))}getDevices(){return this._fetchedInitialState?Promise.resolve({devices:this._lastKnownDevices,localDevice:this._localDevice}):new Promise((e=>{this.once("device_state_changed",(()=>{e({devices:this._lastKnownDevices,localDevice:this._localDevice})}))}))}getActiveDevice(){return this._fetchedInitialState?Promise.resolve(this._lastActiveDevice):new Promise((e=>{this.once("device_state_changed",(t=>{e(t.data.deviceState)}))}))}getContextPlayerState(){return this._fetchedInitialState?Promise.resolve(this._lastKnownPlayerState):new Promise((e=>{this.once("player_state_changed",(t=>{e(t.data.playerState)}))}))}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?this._sendPlayerCommand("play",t,e):Promise.reject(new Oi(a.CONNECTAPI_CLIENT_INVALID_ARGUMENTS,"Descriptor is required for play commands"))}updateCurrentContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getContextPlayerState().then((i=>i?i.session_id?i.context_url||t.forceNonUpdateable?this._sendPlayerCommand("update_context",e,{context:{url:i.context_url||`context://${i.context_uri}`},session_id:i.session_id}):Promise.resolve(!1):Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_SESSION_ID,"The current state does not have a session id")):Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"))))}setQueue(e,t){return this._sendPlayerCommand("set_queue",t,e)}addToQueue(e,t){return this._sendPlayerCommand("add_to_queue",t,{track:e})}transfer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,n;this._lastKnownDevices=this._lastKnownDevices.map((t=>(t.is_being_activated=t.id===e,t))),this._localDevice&&(this._localDevice.is_being_activated=e===m),this.emit("devices_changed",{devices:this._lastKnownDevices,localDevice:this._localDevice});const a={restore_paused:"restore"};return"paused"in t&&(a.restore_paused=t.paused?"pause":"resume"),this._sendConnectCommand("transfer",e||m,{transfer_options:a,page_instance_id:null===(i=t.loggingParams)||void 0===i?void 0:i.pageInstanceId,interaction_id:null===(n=t.loggingParams)||void 0===n?void 0:n.interactionId})}pause(e,t){return this._sendPlayerCommand("pause",e,t)}resume(e,t){return this._sendPlayerCommand("resume",e,t)}togglePlay(e,t){return this.getContextPlayerState().then((i=>i?i.is_paused?this.resume(e,t):this.pause(e,t):Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"))))}nextTrack(e,t){return this._sendPlayerCommand("skip_next",e,t)}previousTrack(e,t){return this._sendPlayerCommand("skip_prev",e,t)}seek(e,t){return isNaN(e)||e<0?Promise.reject(new Oi(a.CONNECTAPI_CLIENT_INVALID_POSITION,"Invalid position.")):this._sendPlayerCommand("seek_to",t,{value:e})}setShuffle(e,t,i){return this._sendPlayerCommand("set_shuffling_context",t,Object.assign({value:!!e},i))}toggleShuffle(e,t){return this.getContextPlayerState().then((i=>{if(!i)return Promise.reject(new Oi(a.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"));const n=i.options&&i.options.shuffling_context;return this.setShuffle(!n,e,t)}))}setRepeatingContext(e,t){return this._sendPlayerCommand("set_repeating_context",t,{value:e})}setRepeatingTrack(e,t){return this._sendPlayerCommand("set_repeating_track",t,{value:!!e})}setOptions(e,t){return this._sendPlayerCommand("set_options",t,Object.assign({},e))}setVolume(e,t){if(isNaN(e)||e<0)return Promise.reject(new Oi(a.CONNECTAPI_CLIENT_INVALID_VOLUME,"Invalid volume."));const i=Math.round(e*_);return this._sendConnectCommand("volume",t,{volume:i})}logout(e){return this._sendConnectCommand("logout",e)}}const Xi=Object.assign(Object.assign(Object.assign({},a),s.J),n);function Ji(e){var t;const i=e.transport;if(!i)throw new TypeError("No Transport instance provided");const n=function(e){return V.create(e)}(Object.assign(Object.assign({},e.client),{transport:i,hidden:!!e.hidden,playTokenLostBehavior:e.hidden&&!e.onlyLocalState?"stop":"pause"})),a=e.streamer||{},s=e.controller||{};let r,o=!1;e.streamer&&e.streamer.disabled?(e.hidden=!0,e.onlyLocalState=!1,e.claimInactivePlayerStates=!1,o=!0):(r=Li(n,a),s.autoregister=!1,e.onlyLocalState&&(s.decorateTrackWindow=!1,s.disableProgress=!0));const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.getPublicTransport(),n=e.getVersionDescriptor().tagged,a=Zi.create({autoregister:!("autoregister"in t)||t.autoregister,descriptor:e.getClientDescriptor(),transport:i});return Ki.create({client:e,playerClient:a,version:n,serverTime:Di.X.create(i),decorateTrackWindow:"boolean"!=typeof t.decorateTrackWindow||t.decorateTrackWindow,disableProgress:t.disableProgress})}(n,s);return T.create({transport:i,client:n,streamer:r,controller:l,enableControllerWithoutStreamer:o,hidden:e.hidden,onlyLocalState:e.onlyLocalState,claimInactivePlayerStates:e.claimInactivePlayerStates,autoActivateElement:null!==(t=e.autoActivateElement)&&void 0!==t?t:"undefined"!=typeof WebKitMediaKeys,experimentalDeactivateOnStop:e.experimentalDeactivateOnStop})}function en(e){const t=function(e){if("function"!=typeof e.getToken)throw new TypeError("Argument options.getToken must be a function");const t=(0,r.Q)(e.xresolve);return(0,o.createTransport)({providers:{endpoints:i=>t(i).then((t=>{const i=e.endpoints;if(i)for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];l(n)&&(t[e]=n)}return t})),token:()=>new Promise((t=>{e.getToken(((e,i)=>{t(void 0===i?e:[e,i])}))}))},disconnectBeforeUnload:e.disconnectBeforeUnload,forcePolyfillTypes:e.forcePolyfillTypes,reconnectionRetries:e.reconnectionRetries,requestMode:e.requestMode||"fetch"})}(e);return{harmony:Ji(Object.assign(Object.assign({},e),{transport:t})),transport:t}}},50363:e=>{e.exports={WEB_API_URL:"https://api.spotify.com",SPCLIENT_WG_URL:"https://spclient.wg.spotify.com",EXP_WG_ENDPOINT:"https://exp.wg.spotify.com",ACCOUNTS_HOST:"https://accounts.spotify.com",PARTNER_API_ENDPOINT:"https://api-partner.spotify.com"}},22587:(e,t,i)=>{"use strict";i.d(t,{Cy:()=>r,Yu:()=>l,cs:()=>c,uf:()=>u,zx:()=>d});i(71756),i(45880);var n=i(16336),a=i(15520),s=i(19968);const r="ANONYMOUS_PLAYBACK_HOOK",o=(e,t)=>{var i;const n=null==t||null===(i=t.item)||void 0===i?void 0:i.type;e.dispatch((e=>({type:r,entityType:e}))(n))},l=e=>t=>{o(e,t)},d=e=>(t,i,n)=>{var a;const r=e.getState(),o=((e,t,i,n)=>{var a,r;const o=(null!==(a=(0,s.k)(i))&&void 0!==a?a:0)-(e=>{const t=new URLSearchParams(window.location.search),i=1e3*Number(t.get("t"));return i>=0&&i<=e?i:0})(null!==(r=null==i?void 0:i.duration)&&void 0!==r?r:0)>1e4,l=document.hasFocus();return!e&&o&&l&&n&&"now-playing-view"!==t})(t,null==r||null===(a=r.ui)||void 0===a?void 0:a.modal,i,n);return o},c=(e,t,i,n)=>{let s=!1,r=Date.now(),o=document.querySelector(t);const l=e.getEvents(),d=()=>{r=Date.now()},c=()=>{o||(o=document.querySelector(t),o&&o.addEventListener("scroll",d))},u=e=>{let{data:t}=e;c();const m=Date.now()-r>1e3;n(s,t,m)&&(s=!0,i(t),l.removeListener(a.rg.UPDATE,u),o&&o.removeEventListener("scroll",d))};l.addListener(a.rg.UPDATE,u),c()},u=()=>{window.open((0,n.iZ)().toString(),"_self","noopener")}},26452:(e,t,i)=>{"use strict";i.d(t,{Z:()=>q});var n=i(71756),a=i.n(n),s=i(59496),r=i(55292),o=i(61740),l=i(43145),d=i(56049),c=i(26721),u=i(56379),m=i(11300),_=i(44983),h=i(10340),p=i(88177),v=i(51871),k=i(15449),g=i(95057),E=i(76339),S=i(50047),y=i(78142),f=i(16336),N=i(68609),T=i(84055),R=i(10495),A=i(58359),b=i(16713),C=i(75849),I=i(6129),L=i(76733),P=i(36357),D=i(84875),O=i.n(D),F=i(44910),w=i(41177),x=i(40908),M=i(23066),U=i(43398),j=i(83682),B=i(74578),G=i(4637);const V=(0,l.ZP)({resolved:{},chunkName:()=>"mwp-connect-view-container",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(224)]).then(i.bind(i,81095)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 81095}},{resolveComponent:e=>e.ConnectModal}),Y=(0,l.ZP)({resolved:{},chunkName:()=>"mwp-dialog-container",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(587)]).then(i.bind(i,36926)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 36926}}),K=(0,l.ZP)({resolved:{},chunkName:()=>"mwp-now-playing-view",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(592)]).then(i.bind(i,80091)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 80091}},{resolveComponent:e=>e.NowPlayingView}),H=(0,l.ZP)({resolved:{},chunkName:()=>"mwp-context-menu-container",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(737)]).then(i.bind(i,62284)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 62284}},{resolveComponent:e=>e.RoutedContextMenu}),W=()=>{var e;const t=(0,h.QT)(),i=(0,o.I0)(),[n,a]=(0,s.useState)(!1),l=(0,w.TH)(),D=(0,w.ur)(),W=(0,w.s0)(),q=(0,o.v9)((e=>e.ui.errorView)),Q=(0,o.v9)((e=>e.session)),$=(0,N.p5)(Q),z=(0,s.useRef)(null),Z=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e,t;null===(e=window.LUX)||void 0===e||e.init(),null===(t=window.LUX)||void 0===t||t.addData("active-experiments",JSON.stringify(Q.features,null,2))}),[Q.features]);const X=(0,s.useCallback)((()=>{a(window.innerHeight<window.screen.height/2)}),[a]),J=(0,s.useCallback)((()=>{window.open((0,f.iZ)().toString(),"_blank","noopener")}),[]),ee=(0,s.useCallback)((()=>{const e=l.pathname,t=(0,p.ER)(e);t&&i((0,v.C)(t))}),[i,l.pathname]);(0,s.useEffect)((()=>{var e,t;ee();const i=l.pathname;null===(e=window.LUX)||void 0===e||e.init(),null===(t=window.LUX)||void 0===t||t.addData("active-experiments",JSON.stringify(Q.features,null,2)),i.indexOf("/search/results")}),[l.pathname,X,ee,Q.features]),(0,s.useEffect)((()=>{Q.country&&i((0,u.zD)())}),[i,Q.country]),(0,s.useEffect)((()=>{i((0,x.A)(l,D))}),[l,D,i]);const te=(0,I.Qs)((()=>(0,d.t)({category:"open",action:"pageview",label:"login",destination_url:"open.spotify.com",os:(0,c.y)()})));(0,s.useEffect)((()=>{const e=(0,N.I5)(Q);E.K({isPremiumUser:e,locationSearch:l.search,navigate:W,logNavigation:te,showDialog:()=>i((0,k.bc)())})}),[i,l.search,W,Q,te]);const ie=(0,I.Qs)((()=>S.Ht({country:Q.country,os:(0,c.y)()})));(0,s.useEffect)((()=>{S.KH({locationSearch:l.search,navigate:W,logDialog:ie,showDialog:()=>i((0,k.D8)())})}),[i,l.search,W,Q,ie]),(0,s.useEffect)((()=>(window.addEventListener("resize",X),()=>{window.removeEventListener("resize",X)})),[X]);const ne=!$||(null===(e=Q.features)||void 0===e?void 0:e.isMWPAndPlaybackCapable),ae=(0,s.useCallback)((e=>{e.preventDefault()}),[]);(0,s.useEffect)((()=>(window.addEventListener("contextmenu",ae),()=>{window.removeEventListener("contextmenu",ae)})),[ae]);const[se,re]=(0,s.useState)(0);(0,M.y)({refOrElement:z,onResize:e=>{let{height:t}=e;void 0!==t&&re(t)}});const oe=(0,U.uI)();return(0,s.useEffect)((()=>{oe.onLocationChange(l)}),[oe,l]),q?(0,G.jsx)(F.o,{heading:t.get("mwp.header.playback.error"),message:t.get("mwp.playback.error.protected.content"),primaryButtonTitle:t.get("mwp.a2hs.upsell.tab.native.cta.add"),onPrimaryButtonClick:J}):(0,G.jsx)(g.Z,{children:(0,G.jsxs)(T.Z,{children:[(0,G.jsxs)(m.F,{children:[(0,G.jsx)(B.Du,{}),(0,G.jsxs)("div",{className:P.Z.mainContent,style:{"--bottomMargin":`${se}px`},children:[(0,G.jsx)(j.M,{location:l}),(0,G.jsx)("div",{})]}),!n&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(b.H,{childRef:z}),(0,G.jsx)(C.x,{childRef:z}),(0,G.jsxs)("div",{className:P.Z.bottomFixed,ref:z,children:[ne&&(0,G.jsx)(r.A,{fallback:null,children:(0,G.jsx)(y.ZP,{value:"now-playing-bar",children:(0,G.jsx)(A.Y,{})})}),!$&&(0,G.jsx)(r.A,{fallback:null,children:(0,G.jsx)(y.ZP,{value:"nav-bar",children:(0,G.jsx)(R.C,{})})})]})]}),(0,G.jsx)(r.A,{fallback:null,children:(0,G.jsx)(y.ZP,{value:"signup-modal",children:(0,G.jsx)(Y,{})})}),(0,G.jsx)(r.A,{fallback:null,children:(0,G.jsx)(y.ZP,{value:"contextmenu",children:(0,G.jsx)(H,{})})})]}),(0,G.jsxs)("aside",{className:O()("encore-dark-theme",P.Z.modalLayer),children:[ne&&(0,G.jsx)(r.A,{fallback:null,children:(0,G.jsx)(y.ZP,{value:"connect-view",children:(0,G.jsx)(V,{})})}),ne&&(0,G.jsx)(r.A,{fallback:null,children:(0,G.jsx)(y.ZP,{value:"now-playing-view",children:(0,G.jsx)(K,{})})}),(0,G.jsx)("div",{ref:Z}),(0,G.jsx)(L.K,{languageSelectionModalRef:Z})]}),(0,G.jsx)(y.ZP,{value:"toast",children:(0,G.jsx)(_.I,{})})]})})},q=W},83682:(e,t,i)=>{"use strict";i.d(t,{M:()=>c});var n=i(59496),a=i(55292),s=i(87164),r=i(87097),o=i(41177),l=i(4637);const d={},c=n.memo((e=>{let{location:t}=e;const i=(0,o.ur)(),{scrollNodeRef:c}=(0,n.useContext)(s.VX);return(0,n.useEffect)((()=>{var e;if(!c.current)return;const n="POP"===i,a=d[null!==(e=null==t?void 0:t.pathname)&&void 0!==e?e:""],s=n&&a?a:0;((e,t)=>{setTimeout((()=>{e.scrollTop=t}),100)})(c.current,s)}),[i,c,null==t?void 0:t.pathname]),(0,l.jsx)(a.A,{fallback:(0,l.jsx)(r.U,{}),children:(0,l.jsx)(o.j3,{})})}),((e,t)=>{var i,n,a,s;const r=document.querySelector("[data-main-scrollable-node]");var o,l;null!=r&&r.scrollTop&&(d[null!==(o=null===(l=e.location)||void 0===l?void 0:l.pathname)&&void 0!==o?o:""]=r.scrollTop);return(null===(i=e.location)||void 0===i?void 0:i.pathname)===(null===(n=t.location)||void 0===n?void 0:n.pathname)&&(null===(a=e.location)||void 0===a?void 0:a.hash)===(null===(s=t.location)||void 0===s?void 0:s.hash)}))},32434:(e,t,i)=>{"use strict";i.d(t,{q:()=>s});var n=i(41177),a=i(4637);function s(){var e;const t=(0,n.TH)(),i=`/${null!==(e=(0,n.UO)()["*"])&&void 0!==e?e:""}${t.search}`,s=t.pathname+t.search;return(0,a.jsx)(n.Fg,{to:i===s?`/${t.search}`:i,replace:!0})}},50335:(e,t,i)=>{"use strict";i.d(t,{h:()=>M});var n=i(71756),a=i.n(n),s=i(43145),r=i(55027),o=i(82132),l=i(31903),d=i(32434),c=i(53361),u=i(63374),m=i(61740),_=i(41177),h=i(77008),p=i(26452),v=i(94890),k=i(99540),g=i(10340),E=i(84023),S=i(78650),y=i(26110),f=i(27264),N=i(77288),T=i(93737),R=i(76022),A=i(4637);const b=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-home-page",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(671)]).then(i.bind(i,98845)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 98845}},{resolveComponent:e=>e.HomePage}),C=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-user-profile",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(271).then(i.bind(i,19215)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 19215}},{resolveComponent:e=>e.UserPage}),I=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-artist-page",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(518)]).then(i.bind(i,42677)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 42677}},{resolveComponent:e=>e.ArtistEntityView}),L=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-search-landing",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(129).then(i.bind(i,83795)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 83795}},{resolveComponent:e=>e.SearchLanding}),P=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-search-results",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(574)]).then(i.bind(i,54968)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 54968}},{resolveComponent:e=>e.SearchPage}),D=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-upsell",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(142).then(i.bind(i,99235)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 99235}},{resolveComponent:e=>e.ConnectedAppLanding}),O=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-genre-view",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(242)]).then(i.bind(i,33796)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 33796}},{resolveComponent:e=>e.RoutedGenreViewWithErrorBoundary}),F=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-browse-page",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(243)]).then(i.bind(i,20124)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 20124}},{resolveComponent:e=>e.BrowsePage}),w=(0,s.ZP)({resolved:{},chunkName:()=>"mwp-blend-party-page",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(225),i.e(458)]).then(i.bind(i,78696)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 78696}},{resolveComponent:e=>e.BlendPartyPage}),x=e=>(0,A.jsx)(_.AW,{path:`/${R.F0}${e}`,element:(0,A.jsx)(v.u,{children:(0,A.jsx)(b,{})})},`${e}_home`),M=()=>{const e=(0,g.QT)(),t=(0,m.v9)((e=>e.session)),{enableShows:i,isPathfinderBrowseCardsEnabled:n,isBlendPartyEnabled:a}=t.features,s=t.isAnonymous;return(0,A.jsx)(_.Z5,{children:(0,A.jsxs)(_.AW,{element:(0,A.jsx)(p.Z,{}),children:[(0,A.jsx)(_.AW,{path:"/",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(r.g,{pageId:c.Wg.HOME,navigationalRoot:u.U.HOME,entityUri:u.s.SPOTIFY_APP_HOME,children:(0,A.jsx)(b,{})})})}),(0,A.jsx)(_.AW,{path:"/search",element:(0,A.jsx)(v.u,{message:e.get("mwp.playback.error.refresh"),primaryButtonTitle:e.get("mwp.nav.home"),primaryButtonNavigatePath:"/",children:(0,A.jsx)(r.g,{pageId:c.Wg.SEARCH,navigationalRoot:u.U.SEARCH,entityUri:u.s.SPOTIFY_APP_SEARCH,children:(0,A.jsx)(L,{})})})}),(0,A.jsx)(_.AW,{path:"/search/:type/:query?",element:(0,A.jsx)(v.u,{message:e.get("mwp.playback.error.refresh"),primaryButtonTitle:e.get("mwp.nav.home"),primaryButtonNavigatePath:"/",children:(0,A.jsx)(P,{})})}),(0,A.jsx)(_.AW,{path:"/playlist-format/:title/:category",element:(0,A.jsx)(o.p,{isAnonymous:s})}),(0,A.jsx)(_.AW,{path:"/playlist-format/:title",element:(0,A.jsx)(o.p,{isAnonymous:s})}),(0,A.jsx)(_.AW,{path:"/playlist/:playlistId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(r.g,{pageId:c.Wg.PLAYLIST,children:(0,A.jsx)(E.iw,{})})})}),(0,A.jsx)(_.AW,{path:"/user/:userId/playlist/:playlistId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(E.iw,{})})}),(0,A.jsx)(_.AW,{path:"/show/:showId",element:i?(0,A.jsx)(v.u,{children:(0,A.jsx)(S.UX,{})}):(0,A.jsx)(_.Fg,{to:"/",replace:!0})}),(0,A.jsx)(_.AW,{path:"/episode/:episodeId",element:i?(0,A.jsx)(v.u,{children:(0,A.jsx)(h.c,{})}):(0,A.jsx)(_.Fg,{to:"/",replace:!0})}),(0,A.jsx)(_.AW,{path:"/collection/tracks",element:s?(0,A.jsx)(_.Fg,{to:"/",replace:!0}):(0,A.jsx)(v.u,{children:(0,A.jsx)(y.P,{})})}),(0,A.jsx)(_.AW,{path:"/collection/library",element:(0,A.jsx)(_.Fg,{to:"/",replace:!0})}),(0,A.jsx)(_.AW,{path:"/user/:userId/collection/*",element:s?(0,A.jsx)(_.Fg,{to:"/",replace:!0}):(0,A.jsx)(_.Fg,{to:"/collection/tracks",replace:!0})}),(0,A.jsx)(_.AW,{path:"/user/:userId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(C,{})})}),(0,A.jsx)(_.AW,{path:"/track/:entityId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(k.D,{})})}),(0,A.jsx)(_.AW,{path:"/artist/:entityId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(r.g,{pageId:c.Wg.ARTIST,children:(0,A.jsx)(I,{})})})}),(0,A.jsx)(_.AW,{path:"/album/:entityId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(r.g,{pageId:c.Wg.ALBUM,children:(0,A.jsx)(f.m,{})})})}),(0,A.jsx)(_.AW,{path:"/artist/:artistId/concerts",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(N.M,{})})}),(0,A.jsx)(_.AW,{path:"/concerts/location/:location",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(T.A,{})})}),(0,A.jsx)(_.AW,{path:"/concerts",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(T.A,{})})}),(0,A.jsx)(_.AW,{path:"/concert/:concertId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(l.k,{})})}),(0,A.jsx)(_.AW,{path:"/download",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(r.g,{pageId:c.Wg.UPSELL,children:(0,A.jsx)(D,{})})})}),(0,A.jsx)(_.AW,{path:"/upsell/*",element:(0,A.jsx)(_.Fg,{to:"/download",replace:!0})}),(0,A.jsx)(_.AW,{path:"/__noul__/*",element:(0,A.jsx)(d.q,{})}),(0,A.jsx)(_.AW,{path:"/__noul__",element:(0,A.jsx)(d.q,{})}),R.BK.map((e=>x(e))),(0,A.jsx)(_.AW,{path:"/genre/:genreId",element:n?(0,A.jsx)(v.u,{children:(0,A.jsx)(F,{})}):(0,A.jsx)(O,{})}),(0,A.jsx)(_.AW,{path:"/blend/party/:blendPartyId",element:a?(0,A.jsx)(v.u,{children:(0,A.jsx)(w,{})}):(0,A.jsx)(_.Fg,{to:"/",replace:!0})}),(0,A.jsx)(_.AW,{path:"/:localeFromPath/track/:entityId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(k.D,{})})}),(0,A.jsx)(_.AW,{path:"/:localeFromPath/artist/:entityId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(I,{})})}),(0,A.jsx)(_.AW,{path:"/:localeFromPath/album/:entityId",element:(0,A.jsx)(v.u,{children:(0,A.jsx)(f.m,{})})}),(0,A.jsx)(_.AW,{path:"*",element:(0,A.jsx)(_.Fg,{to:"/",replace:!0})})]})})}},49904:(e,t,i)=>{"use strict";i.d(t,{m:()=>k});i(71756);var n=i(59496),a=i(23066);const s="JUa6JJNj7R_Y3i4P8YUX",r="lyVkg68L7ycnwyOcO3vj",o="qnYVzttodnzg9WdrVQ1p";var l=i(4637);const d=(e,t)=>(0,l.jsx)("div",{style:{height:e}},t),c=()=>"undefined"!=typeof window&&"requestIdleCallback"in window,u=e=>{var t;let{renderRows:i,nrRows:u,rowHeight:m,scrollNodeRef:_,nrRowsOverscan:h=10,renderPlaceholder:p=d}=e;const v=function(){const e=(0,n.useRef)(!1);return(0,n.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,n.useCallback)((()=>e.current),[])}(),k=(0,n.useRef)(null),g=(0,n.useRef)(null),E=(0,n.useRef)(null),S=(0,n.useRef)(0),[y,f]=(0,n.useState)(c()?0:h),[N,T]=(0,n.useState)(null),[R,A]=(0,n.useState)(0),b=(0,n.useCallback)((()=>{const e=_.current;if(!e)return;const t=Math.ceil(e.offsetHeight/m)+2;A(t)}),[_,m]),C=(0,n.useCallback)((()=>{const e=_.current;if(!e)return;const t=Math.floor((e.scrollTop-S.current-1)/m);T(t)}),[m,_]);(0,n.useEffect)((()=>{c()&&window.requestIdleCallback((()=>{v()&&f(h)}))}),[v,h]),(0,n.useEffect)((()=>{const e=E.current,t=_.current;e&&t&&(S.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[_,null===(t=E.current)||void 0===t?void 0:t.offsetTop]),(0,n.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&C()}))}));return k.current&&e.observe(k.current),g.current&&e.observe(g.current),()=>{e.disconnect()}}),[C,N,R,u]),(0,n.useEffect)((()=>{b(),C()}),[b,C]),(0,a.y)({refOrElement:_,observeOnly:"height",onResize:b});const I=(null!=N?N:0)-y,L=Math.min(null!==N?I+2*y+R-1:-1,u-1),P=Math.max(I,0),D=Math.max(L,-1),O=Math.min(R>0?u*m:0,Math.max(m*(y-2),0)),F=m*P,w=m*u,x=w-m*Math.max(u-(D+1),0);return(0,l.jsxs)("div",{ref:E,className:s,style:{height:`${w}px`,"--row-height":`${m}px`},role:"presentation",children:[(0,l.jsxs)("div",{ref:k,"data-testid":"top-sentinel",className:r,style:{height:`${F+O}px`},role:"presentation",children:[p(`calc(100% - ${O}px)`,"top-sentinel"),(0,l.jsx)("div",{style:{height:`${O}px`},role:"presentation"})]}),(0,l.jsx)("div",{style:{transform:`translateY(${F}px)`},role:"presentation",children:i(P,D)}),(0,l.jsxs)("div",{ref:g,"data-testid":"bottom-sentinel",className:o,style:{height:`calc(100% - ${x}px + ${O}px)`},role:"presentation",children:[(0,l.jsx)("div",{style:{height:`${O}px`},role:"presentation"}),p(`calc(100% - ${O}px)`,"bottom-sentinel")]})]})},m=()=>{const[e,t]=(0,n.useState)(!1),i=e?"client":"server";return(0,n.useEffect)((()=>{t(!0)}),[]),{isClient:e,key:i}};var _=i(34671),h=i(87164);const p=15;function v(e){let{nrTracks:t,rowHeight:i,renderRow:a,fetchTracks:s,limit:r=50,rowPlaceholder:o=_.L,trackMap:d}=e;const{scrollNodeRef:c}=(0,n.useContext)(h.VX),v=(0,n.useRef)(!1),k=(0,n.useRef)({firstIndex:-1,lastIndex:-1}),[,g]=(0,n.useState)(0),E=(0,n.useCallback)((function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=Math.max(e,0);!v.current&&s&&(v.current=!n,s(a,t).then((e=>{n&&(d.current={}),e.forEach(((e,t)=>{d.current[a+t]=e})),v.current=!1,(i<=e.length||r===e.length)&&g((e=>e+1))})).catch((e=>{g((()=>{throw e}))})))}),[s,r,d]),S=(0,n.useCallback)((()=>{if(-1===k.current.firstIndex||!s)return;const e=Math.max(k.current.lastIndex-k.current.firstIndex+1,0);E(k.current.firstIndex,r,e,!0)}),[E,s,r]);(0,n.useEffect)((()=>{S()}),[t]);const{isClient:y}=m(),f=(0,n.useCallback)(((e,t)=>y?(0,l.jsx)(o,{height:e},t):(0,l.jsx)("div",{})),[o,y]);return(0,l.jsx)(u,{renderRows:(e,n)=>{const s=Object.keys(d.current).length;!e&&-1===n&&s&&(e=0,n=s-1);const o=Math.max(n-e+1,0);o>0&&(k.current={firstIndex:e,lastIndex:n});let l=t+1,c=-1;const u=Array.from(Array(o)).map(((t,n)=>{const s=d.current[e+n];return void 0===s&&(c=Math.max(c,e+n),l=Math.min(l,e+n)),s?a(s,e+n):f(`${i}px`,`${e+n}`)})),m=c-l+1;return m>0&&(c===n?E(l,r,m):l===e?E(c-r+1,r,m):E(l,c-l+1,m)),u},nrRows:t,nrRowsOverscan:p,rowHeight:i,scrollNodeRef:c,renderPlaceholder:f})}const k=function(e){let{tracks:t,...i}=e;const a=(0,n.useRef)({});return t&&t.forEach(((e,t)=>{a.current[t]=e})),(0,l.jsx)(v,{...i,trackMap:a})}},34671:(e,t,i)=>{"use strict";i.d(t,{L:()=>g});var n=i(59496),a=i(84875),s=i.n(a);const r="IV3eOwLiJ909txXT98gs",o="yYHPThJmxlWjfHY4CyI8",l="riESeVK2YqNs99yKRKya",d="DWpF6mly0D68RdccJMFB",c="ssQwzxeUMppw83gSd4GK",u="G6Rzh9_SjcVnmIgKHIBw",m="a3dFSPkCTLZQLv2Zn991",_="WpTSqV7PXTHKZV0NJscv";var h=i(4637);const p=n.memo((()=>(0,h.jsx)("div",{className:s()(c,l,m)}))),v=n.memo((()=>(0,h.jsx)("div",{className:s()(c,d,_)}))),k=n.memo((()=>(0,h.jsx)("div",{className:s()(c,o,u)}))),g=n.memo((e=>{let{height:t}=e;return(0,h.jsxs)("div",{className:r,style:{height:t},"data-testid":"tracklist-row-placeholder",children:[(0,h.jsx)(k,{}),(0,h.jsx)(p,{}),(0,h.jsx)(v,{})]})}))},10495:(e,t,i)=>{"use strict";i.d(t,{C:()=>V});var n=i(78142);const a="PBG1TYHEQHdEoTb7wkcG";var s=i(38770),r=i(42676),o=i(84875),l=i.n(o);const d="Mn86uNsAfw66AwsZTQ1D",c="JctljiN8hRz7GRCIa8gg";var u=i(24377),m=i(4637);const _=e=>{let{icon:t,text:i,isActive:n,...a}=e;return(0,m.jsxs)(r.O,{className:l()(d,{[c]:n}),...a,children:[(0,m.jsx)(t,{size:"medium"}),(0,m.jsx)(u.D,{variant:"finale",children:i})]})};var h=i(10340),p=i(41177);const v=()=>{const e=(0,h.QT)(),t="upsell"===(0,p.TH)().pathname.split("/")[1];return(0,m.jsx)(_,{icon:s.V,isActive:t,to:"/download",text:e.get("mwp.nav.get.app")},"logo")};var k=i(35836),g=i(34683),E=i(35333),S=i(93381);const y=()=>{const e=(0,h.QT)(),t=e.getUrlLocale(),i=(0,E.k)({type:"locale",uri:""})?(0,S.is)("/",t):"/",n=(0,p.TH)().pathname===i;return(0,m.jsx)(_,{icon:n?k.v:g.A,isActive:n,to:i,text:e.get("mwp.nav.home")},"home")};var f=i(44364),N=i(20525);const T=()=>{const e=(0,h.QT)(),t="search"===(0,p.TH)().pathname.split("/")[1];return(0,m.jsx)(_,{icon:t?f.g:N.j,isActive:t,to:"/search",text:e.get("mwp.nav.search")},"search")};i(71756);var R=i(59496),A=i(82996),b=i(42490),C=i(59272),I=i(63270),L=i(88652);const P="RRD552bg5p_elJZTkA1L",D="HGt0GSTTXkWoOOh1hMHb",O="feLaqqAsCbsgYApdq92p",F="Sji_v8PlAwMbp9bQxgxN",w="pb3qoDvCexQ35YqYkuwz";var x=i(29404),M=i(61740),U=i(17409),j=i(99730);const B=()=>{const e=(0,h.QT)(),t=(0,L.qT)(),i=(0,M.v9)((e=>e.session.isAnonymous));return(0,m.jsx)(x.Z,{timeout:300,in:!0,appear:!0,unmountOnExit:!0,classNames:{appear:O,appearActive:F},children:(0,m.jsx)(b.yv,{className:`${P} encore-dark-theme`,children:(0,m.jsxs)("div",{className:D,children:[(0,m.jsx)(u.D,{as:"div",variant:"cello",children:e.get("action-trigger.enjoy-library")}),(0,m.jsx)(u.D,{as:"div",variant:"mesto",children:i?e.get("action-trigger.login-library"):e.get("mwp.your-library.upsell.body")}),(0,m.jsxs)("div",{className:w,children:[(0,m.jsx)(U.o,{semanticColor:"textBase",onClick:()=>{t({type:"close"})},children:e.get("action-trigger.button.not-now")}),(0,m.jsx)(j.D,{colorSet:"invertedLight",onClick:()=>{window.open((0,I.iZ)((0,C.EC)("spotify:collection")).toString(),"_blank","noopener")},children:e.get("action-trigger.button.get-app")})]})]})})})},G=()=>{const e=(0,h.QT)(),{isAnonymous:t}=(0,M.v9)((e=>({isAnonymous:e.session.isAnonymous}))),i=e.getUrlLocale(),n=(0,E.k)({uri:"",type:"locale"})?(0,S.is)("/",i):"/",[a,s]=(0,R.useState)(!1);return t?null:(0,m.jsx)(b.Nt,{trigger:"click",action:"open",placement:"top",renderInline:!1,offset:[0,20],content:(0,m.jsx)(B,{}),onHide:()=>{s(!1)},children:(0,m.jsx)(_,{icon:A.$,isActive:a,onClick:e=>{e.preventDefault(),s(!0)},to:n,text:e.get("navbar.your-library")},"library")},"library")},V=()=>(0,m.jsxs)("div",{className:a,children:[(0,m.jsx)(n.ZP,{value:"browse",children:(0,m.jsx)(y,{})}),(0,m.jsx)(n.ZP,{value:"search",children:(0,m.jsx)(T,{})}),(0,m.jsx)(n.ZP,{value:"collection",children:(0,m.jsx)(G,{})}),(0,m.jsx)(n.ZP,{value:"getapp",children:(0,m.jsx)(v,{})})]})},68193:(e,t,i)=>{"use strict";i.d(t,{H:()=>T,q:()=>f});i(71756);var n=i(59496),a=i(84875),s=i.n(a),r=i(63473),o=i(32760),l=i(9622),d=i(23038),c=i(17249),u=i(41965),m=i(4637);const _=(0,n.memo)((function(e){let{size:t,onEnd:i}=e;return(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",width:1.3*t,height:1.3*t,viewBox:"0 0 384 384",style:{willChange:"transform",transform:"translate3d(0, 0, 0)",margin:`-${(1.3*t-t)/2}px`},children:[(0,m.jsxs)("g",{id:"_R_G",children:[(0,m.jsx)("g",{id:"_R_G_L_4_G_N_3_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_4_G_N_3_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_4_G_N_3_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_4_G",transform:" translate(0, 0.006) translate(0, 0)",children:(0,m.jsx)("path",{id:"_R_G_L_4_G_D_0_P_0",fill:"#b3b3b3",fillOpacity:"1",fillRule:"nonzero",d:" M-156 -0.01 C-156,86.02 -86.02,155.99 0,155.99 C86.02,155.99 156,86.02 156,-0.01 C156,-86.03 86.02,-156.01 0,-156.01 C-86.02,-156.01 -156,-86.02 -156,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_3_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_3_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_3_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_3_G",children:(0,m.jsx)("path",{id:"_R_G_L_3_G_D_0_P_0",fill:"#b3b3b3",fillOpacity:"1",fillRule:"nonzero",d:" M96 -6 C96,-6 96,6 96,6 C96,6 -96,6 -96,6 C-96,6 -96,-6 -96,-6 C-96,-6 96,-6 96,-6z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_2_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_2_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_2_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_2_G",children:(0,m.jsx)("path",{id:"_R_G_L_2_G_D_0_P_0",stroke:"#b3b3b3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:"14",strokeOpacity:"1",d:" M0 -162 C89.41,-162 162,-89.41 162,0 C162,89.41 89.41,162 0,162 C-89.41,162 -162,89.41 -162,0 C-162,-89.41 -89.41,-162 0,-162z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_1_G",children:(0,m.jsx)("path",{id:"_R_G_L_1_G_D_0_P_0",fill:"#b3b3b3",fillOpacity:"1",fillRule:"nonzero",d:" M96 -7 C96,-7 96,7 96,7 C96,7 -96,7 -96,7 C-96,7 -96,-7 -96,-7 C-96,-7 96,-7 96,-7z  M7 -96 C7,-96 7,96 7,96 C7,96 -7,96 -7,96 C-7,96 -7,-96 -7,-96 C-7,-96 7,-96 7,-96z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_0_G",transform:" rotate(-130) scale(1.03, 1.03)",children:(0,m.jsx)("path",{id:"_R_G_L_0_G_D_0_P_0",fill:"#1ed760",fillOpacity:"1",fillRule:"nonzero",d:" M-92.21 15.2 C-92.21,15.2 -27.04,91.53 -27.04,91.53 C-27.04,91.53 94.27,-50.53 94.27,-50.53 C94.27,-50.53 75.27,-66.67 75.27,-66.67 C75.27,-66.67 -27.04,53.15 -27.04,53.15 C-27.04,53.15 -75.83,-3.92 -75.83,-3.92 C-75.83,-3.92 -92.21,15.2 -92.21,15.2z  M-162 0 C-162,-89.47 -89.47,-162 0,-162 C89.47,-162 162,-89.47 162,0 C162,89.47 89.47,162 0,162 C-89.47,162 -162,89.47 -162,0z "})})})})})]}),(0,m.jsx)("g",{id:"time_group"}),(0,m.jsxs)("defs",{children:[(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_D_0_P_0",fill:"freeze",attributeName:"fill",from:"#b3b3b3",to:"#b3b3b3",keyTimes:"0;0.9090909;0.9545455;1",values:"#b3b3b3;#1db954;#1ed760;#1ed760",keySplines:"0 0 0 1;0.328 0.103 0.661 1;0 0 0 0",calcMode:"spline",ref:e=>{e&&e.addEventListener("endEvent",i,{once:!0})}}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_D_0_P_0",fill:"freeze",attributeName:"d",attributeType:"XML",from:"M-156 -0.01 C-156,86.02 -86.02,155.99 0,155.99 C86.02,155.99 156,86.02 156,-0.01 C156,-86.03 86.02,-156.01 0,-156.01 C-86.02,-156.01 -156,-86.02 -156,-0.01z ",to:"M-0.2 -0.01 C-0.2,0.1 -0.11,0.19 0,0.19 C0.11,0.19 0.2,0.1 0.2,-0.01 C0.2,-0.11 0.11,-0.2 0,-0.2 C-0.11,-0.2 -0.2,-0.11 -0.2,-0.01z ",keyTimes:"0;0.9545455;1",values:"M-156 -0.01 C-156,86.02 -86.02,155.99 0,155.99 C86.02,155.99 156,86.02 156,-0.01 C156,-86.03 86.02,-156.01 0,-156.01 C-86.02,-156.01 -156,-86.02 -156,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z ;M-0.2 -0.01 C-0.2,0.1 -0.11,0.19 0,0.19 C0.11,0.19 0.2,0.1 0.2,-0.01 C0.2,-0.11 0.11,-0.2 0,-0.2 C-0.11,-0.2 -0.2,-0.11 -0.2,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z ;M-0.2 -0.01 C-0.2,0.1 -0.11,0.19 0,0.19 C0.11,0.19 0.2,0.1 0.2,-0.01 C0.2,-0.11 0.11,-0.2 0,-0.2 C-0.11,-0.2 -0.2,-0.11 -0.2,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z ",keySplines:"0 0 0.34 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_N_3_T_0",fill:"freeze",attributeName:"transform",from:"1 1",to:"0.99 0.99",type:"scale",additive:"sum",keyTimes:"0;0.9545455;1",values:"1 1;0.99 0.99;0.99 0.99",keySplines:"0.692 0 0.64 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_N_3_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 192 C192,192 192,198 192,198 C192,198 192,198 192,198 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_N_3_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"0",keyTimes:"0;0.0454545;0.0454591;0.9545455;0.9545455;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_D_0_P_0",fill:"freeze",attributeName:"fill",from:"#b3b3b3",to:"#b3b3b3",keyTimes:"0;0.1818182;0.4545455;1",values:"#b3b3b3;#b3b3b3;#121212;#121212",keySplines:"0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_D_0_P_0",fill:"freeze",attributeName:"d",attributeType:"XML",from:"M96 -6 C96,-6 96,6 96,6 C96,6 -96,6 -96,6 C-96,6 -96,-6 -96,-6 C-96,-6 96,-6 96,-6z ",to:"M87.22 -37.47 C87.22,-37.47 83.61,-14.6 83.61,-14.6 C83.61,-14.6 -98.73,-15.53 -98.73,-15.53 C-98.73,-15.53 -98.93,-39.44 -98.93,-39.44 C-98.93,-39.44 87.22,-37.47 87.22,-37.47z ",keyTimes:"0;0.9545455;1",values:"M96 -6 C96,-6 96,6 96,6 C96,6 -96,6 -96,6 C-96,6 -96,-6 -96,-6 C-96,-6 96,-6 96,-6z  M6 -96 C6,-96 6,96 6,96 C6,96 -6,96 -6,96 C-6,96 -6,-96 -6,-96 C-6,-96 6,-96 6,-96z ;M87.22 -37.47 C87.22,-37.47 83.61,-14.6 83.61,-14.6 C83.61,-14.6 -98.73,-15.53 -98.73,-15.53 C-98.73,-15.53 -98.93,-39.44 -98.93,-39.44 C-98.93,-39.44 87.22,-37.47 87.22,-37.47z  M87.74 -37.48 C87.74,-37.48 70.28,60.99 70.28,60.99 C70.28,60.99 46.22,61 46.22,61 C46.22,61 62.59,-37.21 62.59,-37.21 C62.59,-37.21 87.74,-37.48 87.74,-37.48z ;M87.22 -37.47 C87.22,-37.47 83.61,-14.6 83.61,-14.6 C83.61,-14.6 -98.73,-15.53 -98.73,-15.53 C-98.73,-15.53 -98.93,-39.44 -98.93,-39.44 C-98.93,-39.44 87.22,-37.47 87.22,-37.47z  M87.74 -37.48 C87.74,-37.48 70.28,60.99 70.28,60.99 C70.28,60.99 46.22,61 46.22,61 C46.22,61 62.59,-37.21 62.59,-37.21 C62.59,-37.21 87.74,-37.48 87.74,-37.48z ",keySplines:"0.66 0 0.34 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"0",to:"130",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"0;130;130",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 192 C192,192 192,198 192,198 C192,198 192,198 192,198 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"0",keyTimes:"0;0.0454545;0.0454591;0.9545455;0.9545455;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_2_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"0",to:"130",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"0;130;130",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_2_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 192 C192,192 192,198 192,198 C192,198 192,198 192,198 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_2_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"1",to:"0",keyTimes:"0;0.0454545;0.0454546;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"0",to:"130",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"0;130;130",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 192 C192,192 192,198 192,198 C192,198 192,198 192,198 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"1",to:"0",keyTimes:"0;0.0454545;0.0454546;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G",fill:"freeze",attributeName:"opacity",from:"0",to:"1",keyTimes:"0;0.7727273;0.9545455;1",values:"0;0;1;1",keySplines:"0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"0",to:"130",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"0;130;130",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 192 C192,192 192,198 192,198 C192,198 192,198 192,198 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"1",keyTimes:"0;0.7727273;0.7727318;1",values:"0;0;1;1",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{attributeType:"XML",attributeName:"opacity",dur:"0s",from:"0",to:"1",xlinkHref:"#time_group"})]})]})})),h=(0,n.memo)((function(e){let{size:t,onEnd:i}=e;return(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",width:1.3*t,height:1.3*t,viewBox:"0 0 384 384",style:{willChange:"transform",transform:"translate3d(0, 0, 0)",margin:`-${(1.3*t-t)/2}px`},children:[(0,m.jsxs)("g",{id:"_R_G",children:[(0,m.jsx)("g",{id:"_R_G_L_4_G_N_3_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_4_G_N_3_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_4_G_N_3_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_4_G",transform:" translate(0, 0.006) translate(0, 0)",children:(0,m.jsx)("path",{id:"_R_G_L_4_G_D_0_P_0",fill:"#1ed760",fillOpacity:"1",fillRule:"nonzero",d:" M-0.2 -0.01 C-0.2,0.1 -0.11,0.19 0,0.19 C0.11,0.19 0.2,0.1 0.2,-0.01 C0.2,-0.11 0.11,-0.2 0,-0.2 C-0.11,-0.2 -0.2,-0.11 -0.2,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_3_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_3_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_3_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_3_G",children:(0,m.jsx)("path",{id:"_R_G_L_3_G_D_0_P_0",fill:"#121212",fillOpacity:"1",fillRule:"nonzero",d:" M87.22 -37.47 C87.22,-37.47 83.61,-14.6 83.61,-14.6 C83.61,-14.6 -98.73,-15.53 -98.73,-15.53 C-98.73,-15.53 -98.93,-39.44 -98.93,-39.44 C-98.93,-39.44 87.22,-37.47 87.22,-37.47z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_2_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_2_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_2_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_2_G",transform:" rotate(-130) scale(1.03, 1.03)",children:(0,m.jsx)("path",{id:"_R_G_L_2_G_D_0_P_0",fill:"#1ed760",fillOpacity:"1",fillRule:"nonzero",d:" M-92.21 15.2 C-92.21,15.2 -27.04,91.53 -27.04,91.53 C-27.04,91.53 94.27,-50.53 94.27,-50.53 C94.27,-50.53 75.27,-66.67 75.27,-66.67 C75.27,-66.67 -27.04,53.15 -27.04,53.15 C-27.04,53.15 -75.83,-3.92 -75.83,-3.92 C-75.83,-3.92 -92.21,15.2 -92.21,15.2z  M-162 0 C-162,-89.47 -89.47,-162 0,-162 C89.47,-162 162,-89.47 162,0 C162,89.47 89.47,162 0,162 C-89.47,162 -162,89.47 -162,0z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_1_G",children:(0,m.jsx)("path",{id:"_R_G_L_1_G_D_0_P_0",fill:"#b3b3b3",fillOpacity:"1",fillRule:"nonzero",d:" M96 -7 C96,-7 96,7 96,7 C96,7 -96,7 -96,7 C-96,7 -96,-7 -96,-7 C-96,-7 96,-7 96,-7z  M7 -96 C7,-96 7,96 7,96 C7,96 -7,96 -7,96 C-7,96 -7,-96 -7,-96 C-7,-96 7,-96 7,-96z "})})})})}),(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_N_1_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_T_0",transform:" translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_0_G",children:(0,m.jsx)("path",{id:"_R_G_L_0_G_D_0_P_0",stroke:"#b3b3b3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:"14",strokeOpacity:"1",d:" M0 -162 C89.41,-162 162,-89.41 162,0 C162,89.41 89.41,162 0,162 C-89.41,162 -162,89.41 -162,0 C-162,-89.41 -89.41,-162 0,-162z "})})})})})]}),(0,m.jsx)("g",{id:"time_group"}),(0,m.jsxs)("defs",{children:[(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_D_0_P_0",fill:"freeze",attributeName:"fill",from:"#1ed760",to:"#1ed760",keyTimes:"0;0.9545455;1",values:"#1ed760;#b3b3b3;#b3b3b3",keySplines:"1 0 1 1;0 0 0 0",calcMode:"spline",ref:e=>{e&&e.addEventListener("endEvent",i,{once:!0})}}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_D_0_P_0",fill:"freeze",attributeName:"d",attributeType:"XML",from:"M-0.2 -0.01 C-0.2,0.1 -0.11,0.19 0,0.19 C0.11,0.19 0.2,0.1 0.2,-0.01 C0.2,-0.11 0.11,-0.2 0,-0.2 C-0.11,-0.2 -0.2,-0.11 -0.2,-0.01z ",to:"M-156 -0.01 C-156,86.02 -86.02,155.99 0,155.99 C86.02,155.99 156,86.02 156,-0.01 C156,-86.03 86.02,-156.01 0,-156.01 C-86.02,-156.01 -156,-86.02 -156,-0.01z ",keyTimes:"0;0.9545455;1",values:"M-0.2 -0.01 C-0.2,0.1 -0.11,0.19 0,0.19 C0.11,0.19 0.2,0.1 0.2,-0.01 C0.2,-0.11 0.11,-0.2 0,-0.2 C-0.11,-0.2 -0.2,-0.11 -0.2,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z ;M-156 -0.01 C-156,86.02 -86.02,155.99 0,155.99 C86.02,155.99 156,86.02 156,-0.01 C156,-86.03 86.02,-156.01 0,-156.01 C-86.02,-156.01 -156,-86.02 -156,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z ;M-156 -0.01 C-156,86.02 -86.02,155.99 0,155.99 C86.02,155.99 156,86.02 156,-0.01 C156,-86.03 86.02,-156.01 0,-156.01 C-86.02,-156.01 -156,-86.02 -156,-0.01z  M-168 0 C-168,-92.78 -92.78,-168 0,-168 C92.78,-168 168,-92.79 168,0 C168,92.78 92.78,168 0,168 C-92.78,168 -168,92.78 -168,0z ",keySplines:"0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_N_3_T_0",fill:"freeze",attributeName:"transform",from:"0.99 0.99",to:"1 1",type:"scale",additive:"sum",keyTimes:"0;0.9545455;1",values:"0.99 0.99;1 1;1 1",keySplines:"0.66 0 0.34 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_N_3_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 198 C192,198 192,192 192,192 C192,192 192,192 192,192 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_4_G_N_3_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"0",keyTimes:"0;0.0454545;0.0454591;0.9545455;0.9545455;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_D_0_P_0",fill:"freeze",attributeName:"fill",from:"#121212",to:"#121212",keyTimes:"0;0.0454545;0.1818182;1",values:"#121212;#121212;#b3b3b3;#b3b3b3",keySplines:"0.167 0.167 0.833 0.833;0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_D_0_P_0",fill:"freeze",attributeName:"d",attributeType:"XML",from:"M87.22 -37.47 C87.22,-37.47 83.61,-14.6 83.61,-14.6 C83.61,-14.6 -98.73,-15.53 -98.73,-15.53 C-98.73,-15.53 -98.93,-39.44 -98.93,-39.44 C-98.93,-39.44 87.22,-37.47 87.22,-37.47z ",to:"M96 -6 C96,-6 96,6 96,6 C96,6 -96,6 -96,6 C-96,6 -96,-6 -96,-6 C-96,-6 96,-6 96,-6z ",keyTimes:"0;0.9545455;1",values:"M87.22 -37.47 C87.22,-37.47 83.61,-14.6 83.61,-14.6 C83.61,-14.6 -98.73,-15.53 -98.73,-15.53 C-98.73,-15.53 -98.93,-39.44 -98.93,-39.44 C-98.93,-39.44 87.22,-37.47 87.22,-37.47z  M87.74 -37.48 C87.74,-37.48 70.28,60.99 70.28,60.99 C70.28,60.99 46.22,61 46.22,61 C46.22,61 62.59,-37.21 62.59,-37.21 C62.59,-37.21 87.74,-37.48 87.74,-37.48z ;M96 -6 C96,-6 96,6 96,6 C96,6 -96,6 -96,6 C-96,6 -96,-6 -96,-6 C-96,-6 96,-6 96,-6z  M6 -96 C6,-96 6,96 6,96 C6,96 -6,96 -6,96 C-6,96 -6,-96 -6,-96 C-6,-96 6,-96 6,-96z ;M96 -6 C96,-6 96,6 96,6 C96,6 -96,6 -96,6 C-96,6 -96,-6 -96,-6 C-96,-6 96,-6 96,-6z  M6 -96 C6,-96 6,96 6,96 C6,96 -6,96 -6,96 C-6,96 -6,-96 -6,-96 C-6,-96 6,-96 6,-96z ",keySplines:"0.66 0 0.34 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"-230",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"-230;0;0",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 198 C192,198 192,192 192,192 C192,192 192,192 192,192 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_3_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"0",keyTimes:"0;0.0454545;0.0454591;0.9545455;0.9545455;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_2_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"-230",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"-230;0;0",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_2_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 198 C192,198 192,192 192,192 C192,192 192,192 192,192 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_2_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"1",to:"0",keyTimes:"0;0.0454545;0.0454546;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"-230",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"-230;0;0",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 198 C192,198 192,192 192,192 C192,192 192,192 192,192 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"1",keyTimes:"0;0.9545455;0.95455;1",values:"0;0;1;1",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:"-230",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.9545455;1",values:"-230;0;0",keySplines:"0.8 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_N_1_T_0",fill:"freeze",keyTimes:"0;0.9545455;1",path:"M192 198 C192,198 192,192 192,192 C192,192 192,192 192,192 ",keyPoints:"0;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.36666666666666664s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:"0",to:"1",keyTimes:"0;0.9545455;0.95455;1",values:"0;0;1;1",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{attributeType:"XML",attributeName:"opacity",dur:"0s",from:"0",to:"1",xlinkHref:"#time_group"})]})]})}));var p=i(38185);const v=(0,n.memo)((function(e){let{size:t,onEnd:i}=e;const n=t>16?2.35:2.5;return(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",width:t*n,height:t*n,viewBox:"0 0 224 224",style:{willChange:"transform",transform:"translate3d(0, 0, 0)",margin:`-${(t*n-t)/2}px`},children:[(0,m.jsxs)("defs",{children:[(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_7_G_D_0_P_0",fill:"freeze",attributeName:"stroke-width",from:30,to:0,keyTimes:"0;0.1219512;0.804878;1",values:"30;30;0;0",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline",ref:e=>{e&&e.addEventListener("endEvent",i,{once:!0})}}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_7_G_D_0_P_0",fill:"freeze",attributeName:"rx",from:15,to:110,keyTimes:"0;0.1219512;0.804878;1",values:"15;15;110;110",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_7_G_D_0_P_0",fill:"freeze",attributeName:"ry",from:15,to:110,keyTimes:"0;0.1219512;0.804878;1",values:"15;15;110;110",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_7_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.1219512;0.804878;1",values:"1;1;0;0",keySplines:"0.2 0 0.4 1;0.2 0 0.4 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_7_G_M",fill:"freeze",attributeName:"opacity",from:0,to:0,keyTimes:"0;0.1219512;0.1219537;0.8292683;0.8292683;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_6_G_D_0_P_0",fill:"freeze",attributeName:"stroke-width",from:30,to:0,keyTimes:"0;0.2926829;0.9756098;1",values:"30;30;0;0",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_6_G_D_0_P_0",fill:"freeze",attributeName:"rx",from:15,to:110,keyTimes:"0;0.2926829;0.9756098;1",values:"15;15;110;110",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_6_G_D_0_P_0",fill:"freeze",attributeName:"ry",from:15,to:110,keyTimes:"0;0.2926829;0.9756098;1",values:"15;15;110;110",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_6_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.2926829;0.9756098;1",values:"1;1;0;0",keySplines:"0.2 0 0.4 1;0.2 0 0.4 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_6_G_M",fill:"freeze",attributeName:"opacity",from:0,to:1,keyTimes:"0;0.2926829;0.2926854;1",values:"0;0;1;1",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_5_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.7804878;1",values:"1;0;0",keySplines:"0.6 0 0.7 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_5_G",fill:"freeze",keyTimes:"0;0.7804878;1",path:"M122.25 123.17 C200.25,137.25 197.5,23.92 197.5,23.92 C197.5,23.92 197.5,23.92 197.5,23.92 ",keyPoints:"0;1;1",keySplines:"0.95 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_5_G",fill:"freeze",attributeName:"transform",from:"0.6 0.6",to:"0.9 0.9",type:"scale",additive:"sum",keyTimes:"0;0.7804878;1",values:"0.6 0.6;0.9 0.9;0.9 0.9",keySplines:"0.8 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_5_G_M",fill:"freeze",attributeName:"opacity",from:0,to:0,keyTimes:"0;0.2439024;0.2439049;0.804878;0.8048781;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_4_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.6585366;1",values:"1;0;0",keySplines:"0.6 0 1 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_4_G",fill:"freeze",keyTimes:"0;0.6585366;1",path:"M98 105.92 C19.75,106.25 32.25,37.42 32.25,37.42 C32.25,37.42 32.25,37.42 32.25,37.42 ",keyPoints:"0;1;1",keySplines:"0.95 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_4_G",fill:"freeze",attributeName:"transform",from:"0.6 0.6",to:"0.9 0.9",type:"scale",additive:"sum",keyTimes:"0;0.6585366;1",values:"0.6 0.6;0.9 0.9;0.9 0.9",keySplines:"0.8 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_4_G_M",fill:"freeze",attributeName:"opacity",from:0,to:0,keyTimes:"0;0.2439024;0.2439049;0.6829268;0.6829269;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_3_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.7317073;1",values:"1;0;0",keySplines:"0.6 0 1 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_3_G",fill:"freeze",keyTimes:"0;0.7317073;1",path:"M112.5 123.17 C73.75,194.5 72,43.17 72,43.17 C72,43.17 72,43.17 72,43.17 ",keyPoints:"0;1;1",keySplines:"0.95 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_3_G",fill:"freeze",attributeName:"transform",from:"0.6 0.6",to:"0.9 0.9",type:"scale",additive:"sum",keyTimes:"0;0.7317073;1",values:"0.6 0.6;0.9 0.9;0.9 0.9",keySplines:"0.8 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_3_G_M",fill:"freeze",attributeName:"opacity",from:0,to:0,keyTimes:"0;0.2439024;0.2439049;0.804878;0.8048781;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_2_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.804878;1",values:"1;0;0",keySplines:"0.6 0 1 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_2_G",fill:"freeze",keyTimes:"0;0.804878;1",path:"M112 134.92 C160.75,190.75 155.25,45.67 155.25,45.67 C155.25,45.67 155.25,45.67 155.25,45.67 ",keyPoints:"0;1;1",keySplines:"0.95 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_2_G",fill:"freeze",attributeName:"transform",from:"0.6 0.6",to:"0.9 0.9",type:"scale",additive:"sum",keyTimes:"0;0.804878;1",values:"0.6 0.6;0.9 0.9;0.9 0.9",keySplines:"0.8 0 0.8 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_2_G_M",fill:"freeze",attributeName:"opacity",from:0,to:0,keyTimes:"0;0.2439024;0.2439049;0.8536585;0.8536586;1",values:"0;0;1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_1_G_D_0_P_0",fill:"freeze",attributeName:"fill",from:p.ixZ,to:p.ixZ,keyTimes:"0;0.1219512;0.2439024;1",values:"#ffffff;#ffffff;#1db954;#1db954",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_1_G_D_0_P_0",fill:"freeze",attributeName:"d",attributeType:"XML",from:"M-6.18 -8.52 C-5.37,-8.78 -4.5,-8.82 -3.67,-8.63 C-2.84,-8.43 -2.07,-8.02 -1.46,-7.43 C-1.46,-7.43 -1.45,-7.43 -1.45,-7.43 C-1.06,-7.06 -0.54,-6.85 0,-6.85 C0.54,-6.85 1.06,-7.06 1.45,-7.43 C1.45,-7.43 1.46,-7.43 1.46,-7.43 C1.99,-7.94 2.63,-8.31 3.32,-8.53 C4.02,-8.75 4.76,-8.8 5.48,-8.69 C6.44,-8.53 7.34,-8.08 8.04,-7.41 C8.74,-6.73 9.22,-5.85 9.41,-4.9 C9.55,-4.2 9.53,-3.48 9.34,-2.79 C9.16,-2.11 8.83,-1.47 8.36,-0.93 C8.36,-0.93 0.4,8.56 0.4,8.56 C0.35,8.62 0.29,8.67 0.22,8.7 C0.15,8.73 0.08,8.75 0,8.75 C-0.07,8.75 -0.15,8.73 -0.22,8.7 C-0.29,8.67 -0.35,8.62 -0.39,8.56 C-0.39,8.56 -8.35,-0.92 -8.35,-0.92 C-8.35,-0.92 -8.36,-0.93 -8.36,-0.93 C-8.83,-1.47 -9.16,-2.11 -9.35,-2.79 C-9.53,-3.48 -9.55,-4.2 -9.41,-4.9 C-9.41,-4.9 -9.41,-4.9 -9.41,-4.9 C-9.25,-5.74 -8.86,-6.52 -8.29,-7.16 C-7.73,-7.79 -7,-8.27 -6.18,-8.52z ",to:"M0.03 0 C0.02,0 0.02,0 0.02,0 C0.01,0 0.01,0 0.01,-0.01 C0.01,-0.01 0.01,-0.01 0.01,-0.01 C0,-0.01 0,-0.01 0,-0.01 C0,-0.01 0,-0.01 -0.01,-0.01 C-0.01,-0.01 -0.01,-0.01 -0.01,-0.01 C-0.01,0 -0.01,0 -0.01,0 C-0.02,0 -0.02,0 -0.02,0 C-0.03,0 -0.03,0 -0.03,-0.01 C-0.04,-0.01 -0.04,-0.01 -0.04,-0.02 C-0.04,-0.02 -0.04,-0.02 -0.04,-0.02 C-0.04,-0.03 -0.04,-0.03 -0.03,-0.03 C-0.03,-0.03 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0.03,-0.03 0.03,-0.03 C0.03,-0.03 0.03,-0.03 0.03,-0.03 C0.04,-0.03 0.04,-0.03 0.04,-0.02 C0.04,-0.02 0.04,-0.02 0.04,-0.02 C0.04,-0.02 0.04,-0.02 0.04,-0.02 C0.04,-0.01 0.04,-0.01 0.03,-0.01 C0.03,0 0.03,0 0.03,0z ",keyTimes:"0;0.1219512;0.2439024;1",values:"M-6.18 -8.52 C-5.37,-8.78 -4.5,-8.82 -3.67,-8.63 C-2.84,-8.43 -2.07,-8.02 -1.46,-7.43 C-1.46,-7.43 -1.45,-7.43 -1.45,-7.43 C-1.06,-7.06 -0.54,-6.85 0,-6.85 C0.54,-6.85 1.06,-7.06 1.45,-7.43 C1.45,-7.43 1.46,-7.43 1.46,-7.43 C1.99,-7.94 2.63,-8.31 3.32,-8.53 C4.02,-8.75 4.76,-8.8 5.48,-8.69 C6.44,-8.53 7.34,-8.08 8.04,-7.41 C8.74,-6.73 9.22,-5.85 9.41,-4.9 C9.55,-4.2 9.53,-3.48 9.34,-2.79 C9.16,-2.11 8.83,-1.47 8.36,-0.93 C8.36,-0.93 0.4,8.56 0.4,8.56 C0.35,8.62 0.29,8.67 0.22,8.7 C0.15,8.73 0.08,8.75 0,8.75 C-0.07,8.75 -0.15,8.73 -0.22,8.7 C-0.29,8.67 -0.35,8.62 -0.39,8.56 C-0.39,8.56 -8.35,-0.92 -8.35,-0.92 C-8.35,-0.92 -8.36,-0.93 -8.36,-0.93 C-8.83,-1.47 -9.16,-2.11 -9.35,-2.79 C-9.53,-3.48 -9.55,-4.2 -9.41,-4.9 C-9.41,-4.9 -9.41,-4.9 -9.41,-4.9 C-9.25,-5.74 -8.86,-6.52 -8.29,-7.16 C-7.73,-7.79 -7,-8.27 -6.18,-8.52z ;M-6.18 -8.52 C-5.37,-8.78 -4.5,-8.82 -3.67,-8.63 C-2.84,-8.43 -2.07,-8.02 -1.46,-7.43 C-1.46,-7.43 -1.45,-7.43 -1.45,-7.43 C-1.06,-7.06 -0.54,-6.85 0,-6.85 C0.54,-6.85 1.06,-7.06 1.45,-7.43 C1.45,-7.43 1.46,-7.43 1.46,-7.43 C1.99,-7.94 2.63,-8.31 3.32,-8.53 C4.02,-8.75 4.76,-8.8 5.48,-8.69 C6.44,-8.53 7.34,-8.08 8.04,-7.41 C8.74,-6.73 9.22,-5.85 9.41,-4.9 C9.55,-4.2 9.53,-3.48 9.34,-2.79 C9.16,-2.11 8.83,-1.47 8.36,-0.93 C8.36,-0.93 0.4,8.56 0.4,8.56 C0.35,8.62 0.29,8.67 0.22,8.7 C0.15,8.73 0.08,8.75 0,8.75 C-0.07,8.75 -0.15,8.73 -0.22,8.7 C-0.29,8.67 -0.35,8.62 -0.39,8.56 C-0.39,8.56 -8.35,-0.92 -8.35,-0.92 C-8.35,-0.92 -8.36,-0.93 -8.36,-0.93 C-8.83,-1.47 -9.16,-2.11 -9.35,-2.79 C-9.53,-3.48 -9.55,-4.2 -9.41,-4.9 C-9.41,-4.9 -9.41,-4.9 -9.41,-4.9 C-9.25,-5.74 -8.86,-6.52 -8.29,-7.16 C-7.73,-7.79 -7,-8.27 -6.18,-8.52z ;M0.03 0 C0.02,0 0.02,0 0.02,0 C0.01,0 0.01,0 0.01,-0.01 C0.01,-0.01 0.01,-0.01 0.01,-0.01 C0,-0.01 0,-0.01 0,-0.01 C0,-0.01 0,-0.01 -0.01,-0.01 C-0.01,-0.01 -0.01,-0.01 -0.01,-0.01 C-0.01,0 -0.01,0 -0.01,0 C-0.02,0 -0.02,0 -0.02,0 C-0.03,0 -0.03,0 -0.03,-0.01 C-0.04,-0.01 -0.04,-0.01 -0.04,-0.02 C-0.04,-0.02 -0.04,-0.02 -0.04,-0.02 C-0.04,-0.03 -0.04,-0.03 -0.03,-0.03 C-0.03,-0.03 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0.03,-0.03 0.03,-0.03 C0.03,-0.03 0.03,-0.03 0.03,-0.03 C0.04,-0.03 0.04,-0.03 0.04,-0.02 C0.04,-0.02 0.04,-0.02 0.04,-0.02 C0.04,-0.02 0.04,-0.02 0.04,-0.02 C0.04,-0.01 0.04,-0.01 0.03,-0.01 C0.03,0 0.03,0 0.03,0z ;M0.03 0 C0.02,0 0.02,0 0.02,0 C0.01,0 0.01,0 0.01,-0.01 C0.01,-0.01 0.01,-0.01 0.01,-0.01 C0,-0.01 0,-0.01 0,-0.01 C0,-0.01 0,-0.01 -0.01,-0.01 C-0.01,-0.01 -0.01,-0.01 -0.01,-0.01 C-0.01,0 -0.01,0 -0.01,0 C-0.02,0 -0.02,0 -0.02,0 C-0.03,0 -0.03,0 -0.03,-0.01 C-0.04,-0.01 -0.04,-0.01 -0.04,-0.02 C-0.04,-0.02 -0.04,-0.02 -0.04,-0.02 C-0.04,-0.03 -0.04,-0.03 -0.03,-0.03 C-0.03,-0.03 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0,-0.07 0,-0.07 C0,-0.07 0.03,-0.03 0.03,-0.03 C0.03,-0.03 0.03,-0.03 0.03,-0.03 C0.04,-0.03 0.04,-0.03 0.04,-0.02 C0.04,-0.02 0.04,-0.02 0.04,-0.02 C0.04,-0.02 0.04,-0.02 0.04,-0.02 C0.04,-0.01 0.04,-0.01 0.03,-0.01 C0.03,0 0.03,0 0.03,0z ",keySplines:"0.333 0 0.667 1;0.333 0 0.667 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_1_G_D_0_P_1",fill:"freeze",attributeName:"fill",from:p.ixZ,to:p.ixZ,keyTimes:"0;0.1219512;0.2439024;1",values:"#ffffff;#ffffff;#1db954;#1db954",keySplines:"0 0 0 1;0 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_1_G",fill:"freeze",attributeName:"opacity",from:.7000000000000001,to:1,keyTimes:"0;0.1219512;1",values:"0.7000000000000001;1;1",keySplines:"0.167 0.167 0.833 0.833;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_1_T_0",fill:"freeze",attributeName:"transform",from:"1 1",to:"1 1",type:"scale",additive:"sum",keyTimes:"0;0.1219512;0.2439024;0.5121951;1",values:"1 1;0.8 0.8;1.25 1.25;1 1;1 1",keySplines:"0.333 0 0.667 1;0.333 0 0.667 1;0.333 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.2439024;0.2439025;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_0_G_D_1_P_0",fill:"freeze",attributeName:"stroke-width",from:2,to:1,keyTimes:"0;0.2439024;0.5121951;1",values:"2;2;1;1",keySplines:"0.333 0 0 1;0.333 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_0_G",fill:"freeze",attributeName:"transform",from:"4 4",to:"4 4",type:"scale",additive:"sum",keyTimes:"0;0.2439024;0.5121951;1",values:"4 4;4 4;4 4;4 4",keySplines:"0.333 0 0 1;0.333 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_1_T_0",fill:"freeze",attributeName:"transform",from:"1 1",to:"1 1",type:"scale",additive:"sum",keyTimes:"0;0.1219512;0.2439024;0.5121951;1",values:"1 1;0.8 0.8;1.25 1.25;1 1;1 1",keySplines:"0.333 0 0.667 1;0.333 0 0.667 1;0.333 0 0 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.6833333s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_1_T_0_M",fill:"freeze",attributeName:"opacity",from:0,to:1,keyTimes:"0;0.2439024;0.2439049;1",values:"0;0;1;1",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{attributeType:"XML",attributeName:"opacity",dur:"1s",from:0,to:1,xlinkHref:"#time_group"})]}),(0,m.jsxs)("g",{id:"_R_G",children:[(0,m.jsx)("g",{id:"_R_G_L_7_G_M",children:(0,m.jsx)("g",{id:"_R_G_L_7_G",transform:" translate(112, 112) translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_7_G_D_0_P_0_G_0_T_0",children:(0,m.jsx)("ellipse",{id:"_R_G_L_7_G_D_0_P_0",stroke:p.By7,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:30,strokeOpacity:1,cx:0,cy:0})})})}),(0,m.jsx)("g",{id:"_R_G_L_6_G_M",children:(0,m.jsx)("g",{id:"_R_G_L_6_G",transform:" translate(112, 112) translate(0, 0)",children:(0,m.jsx)("g",{id:"_R_G_L_6_G_D_0_P_0_G_0_T_0",children:(0,m.jsx)("ellipse",{id:"_R_G_L_6_G_D_0_P_0",stroke:p.By7,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:30,strokeOpacity:1,cx:0,cy:0})})})}),(0,m.jsx)("g",{id:"_R_G_L_5_G_M",children:(0,m.jsx)("g",{id:"_R_G_L_5_G",children:(0,m.jsx)("path",{id:"_R_G_L_5_G_D_0_P_0",fill:p.ixZ,fillOpacity:1,fillRule:"nonzero",d:" M22.28 -19.53 C16.88,-24.89 8.3,-25.2 2.54,-20.44 C2.54,-20.44 1.5,-19.48 0,-19.48 C-1.54,-19.48 -2.54,-20.44 -2.54,-20.44 C-8.3,-25.2 -16.86,-24.86 -22.24,-19.53 C-28,-13.81 -28,-4.51 -22.24,1.21 C-22.24,1.21 -4.04,22.54 -4.04,22.54 C-1.91,25.03 1.91,25.03 4.04,22.54 C4.04,22.54 22.28,1.21 22.28,1.21 C28,-4.51 28.05,-13.81 22.28,-19.53z "})})}),(0,m.jsx)("g",{id:"_R_G_L_4_G_M",children:(0,m.jsx)("g",{id:"_R_G_L_4_G",children:(0,m.jsx)("path",{id:"_R_G_L_4_G_D_0_P_0",fill:p.By7,fillOpacity:1,fillRule:"nonzero",d:" M22.28 -19.53 C16.88,-24.89 8.3,-25.2 2.54,-20.44 C2.54,-20.44 1.5,-19.48 0,-19.48 C-1.54,-19.48 -2.54,-20.44 -2.54,-20.44 C-8.3,-25.2 -16.86,-24.86 -22.24,-19.53 C-28,-13.81 -28,-4.51 -22.24,1.21 C-22.24,1.21 -4.04,22.54 -4.04,22.54 C-1.91,25.03 1.91,25.03 4.04,22.54 C4.04,22.54 22.28,1.21 22.28,1.21 C28,-4.51 28.05,-13.81 22.28,-19.53z "})})}),(0,m.jsx)("g",{id:"_R_G_L_3_G_M",children:(0,m.jsx)("g",{id:"_R_G_L_3_G",children:(0,m.jsx)("path",{id:"_R_G_L_3_G_D_0_P_0",fill:p.ixZ,fillOpacity:1,fillRule:"nonzero",d:" M22.28 -19.53 C16.88,-24.89 8.3,-25.2 2.54,-20.44 C2.54,-20.44 1.5,-19.48 0,-19.48 C-1.54,-19.48 -2.54,-20.44 -2.54,-20.44 C-8.3,-25.2 -16.86,-24.86 -22.24,-19.53 C-28,-13.81 -28,-4.51 -22.24,1.21 C-22.24,1.21 -4.04,22.54 -4.04,22.54 C-1.91,25.03 1.91,25.03 4.04,22.54 C4.04,22.54 22.28,1.21 22.28,1.21 C28,-4.51 28.05,-13.81 22.28,-19.53z "})})}),(0,m.jsx)("g",{id:"_R_G_L_2_G_M",children:(0,m.jsx)("g",{id:"_R_G_L_2_G",children:(0,m.jsx)("path",{id:"_R_G_L_2_G_D_0_P_0",fill:p.By7,fillOpacity:1,fillRule:"nonzero",d:" M22.28 -19.53 C16.88,-24.89 8.3,-25.2 2.54,-20.44 C2.54,-20.44 1.5,-19.48 0,-19.48 C-1.54,-19.48 -2.54,-20.44 -2.54,-20.44 C-8.3,-25.2 -16.86,-24.86 -22.24,-19.53 C-28,-13.81 -28,-4.51 -22.24,1.21 C-22.24,1.21 -4.04,22.54 -4.04,22.54 C-1.91,25.03 1.91,25.03 4.04,22.54 C4.04,22.54 22.28,1.21 22.28,1.21 C28,-4.51 28.05,-13.81 22.28,-19.53z "})})}),(0,m.jsx)("g",{id:"_R_G_L_1_G_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_1_G_N_1_T_0",transform:" translate(112, 112)",children:(0,m.jsxs)("g",{id:"_R_G_L_1_G",transform:" scale(4, 4)",children:[(0,m.jsx)("path",{id:"_R_G_L_1_G_D_0_P_0",fill:p.ixZ,fillOpacity:1,fillRule:"nonzero",d:" M-6.18 -8.52 C-5.37,-8.78 -4.5,-8.82 -3.67,-8.63 C-2.84,-8.43 -2.07,-8.02 -1.46,-7.43 C-1.46,-7.43 -1.45,-7.43 -1.45,-7.43 C-1.06,-7.06 -0.54,-6.85 0,-6.85 C0.54,-6.85 1.06,-7.06 1.45,-7.43 C1.45,-7.43 1.46,-7.43 1.46,-7.43 C1.99,-7.94 2.63,-8.31 3.32,-8.53 C4.02,-8.75 4.76,-8.8 5.48,-8.69 C6.44,-8.53 7.34,-8.08 8.04,-7.41 C8.74,-6.73 9.22,-5.85 9.41,-4.9 C9.55,-4.2 9.53,-3.48 9.34,-2.79 C9.16,-2.11 8.83,-1.47 8.36,-0.93 C8.36,-0.93 0.4,8.56 0.4,8.56 C0.35,8.62 0.29,8.67 0.22,8.7 C0.15,8.73 0.08,8.75 0,8.75 C-0.07,8.75 -0.15,8.73 -0.22,8.7 C-0.29,8.67 -0.35,8.62 -0.39,8.56 C-0.39,8.56 -8.35,-0.92 -8.35,-0.92 C-8.35,-0.92 -8.36,-0.93 -8.36,-0.93 C-8.83,-1.47 -9.16,-2.11 -9.35,-2.79 C-9.53,-3.48 -9.55,-4.2 -9.41,-4.9 C-9.41,-4.9 -9.41,-4.9 -9.41,-4.9 C-9.25,-5.74 -8.86,-6.52 -8.29,-7.16 C-7.73,-7.79 -7,-8.27 -6.18,-8.52z "}),(0,m.jsx)("path",{id:"_R_G_L_1_G_D_0_P_1",fill:p.ixZ,fillOpacity:1,fillRule:"nonzero",d:" M-3.22 -10.57 C-4.4,-10.85 -5.63,-10.8 -6.79,-10.43 C-7.94,-10.06 -8.98,-9.39 -9.79,-8.49 C-10.59,-7.58 -11.14,-6.47 -11.37,-5.29 C-11.57,-4.29 -11.54,-3.26 -11.28,-2.28 C-11.02,-1.3 -10.54,-0.4 -9.88,0.37 C-9.88,0.37 -1.93,9.85 -1.93,9.85 C-1.69,10.13 -1.4,10.36 -1.06,10.51 C-0.73,10.67 -0.37,10.75 0,10.75 C0.37,10.75 0.73,10.67 1.06,10.51 C1.4,10.36 1.69,10.13 1.93,9.85 C1.93,9.85 9.88,0.37 9.88,0.37 C10.54,-0.4 11.02,-1.3 11.28,-2.28 C11.54,-3.26 11.57,-4.29 11.37,-5.28 C11.37,-5.28 11.37,-5.29 11.37,-5.29 C11.1,-6.64 10.42,-7.89 9.43,-8.85 C8.43,-9.81 7.17,-10.44 5.8,-10.66 C5.8,-10.66 5.8,-10.66 5.8,-10.66 C4.77,-10.83 3.72,-10.75 2.73,-10.44 C1.74,-10.13 0.83,-9.6 0.08,-8.88 C0.06,-8.86 0.03,-8.85 0,-8.85 C-0.03,-8.85 -0.06,-8.86 -0.08,-8.88 C-0.96,-9.72 -2.04,-10.3 -3.22,-10.57z "})]})})}),(0,m.jsx)("g",{id:"_R_G_L_0_G_N_1_T_0_M",children:(0,m.jsx)("g",{id:"_R_G_L_0_G_N_1_T_0",transform:" translate(112, 112)",children:(0,m.jsxs)("g",{id:"_R_G_L_0_G",transform:" translate(0, 0)",children:[(0,m.jsx)("path",{id:"_R_G_L_0_G_D_0_P_0",fill:p.By7,fillOpacity:1,fillRule:"nonzero",d:" M8.73 -8.13 C9.58,-7.31 10.16,-6.25 10.39,-5.09 C10.56,-4.24 10.53,-3.37 10.31,-2.54 C10.09,-1.7 9.68,-0.93 9.12,-0.28 C9.12,-0.28 1.16,9.21 1.16,9.21 C1.02,9.38 0.84,9.51 0.64,9.61 C0.44,9.7 0.22,9.75 0,9.75 C-0.22,9.75 -0.44,9.7 -0.64,9.61 C-0.84,9.51 -1.02,9.38 -1.16,9.21 C-1.16,9.21 -9.12,-0.28 -9.12,-0.28 C-9.68,-0.93 -10.09,-1.7 -10.31,-2.54 C-10.53,-3.37 -10.56,-4.25 -10.39,-5.09 C-10.19,-6.11 -9.73,-7.05 -9.04,-7.82 C-8.35,-8.59 -7.47,-9.16 -6.49,-9.48 C-5.5,-9.79 -4.45,-9.83 -3.45,-9.6 C-2.44,-9.37 -1.51,-8.87 -0.77,-8.16 C-0.56,-7.96 -0.28,-7.85 0,-7.85 C0.28,-7.85 0.56,-7.96 0.77,-8.16 C1.41,-8.77 2.18,-9.22 3.03,-9.49 C3.87,-9.75 4.77,-9.82 5.64,-9.68 C6.8,-9.49 7.88,-8.94 8.73,-8.13z "}),(0,m.jsx)("path",{id:"_R_G_L_0_G_D_1_P_0",stroke:p.By7,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:2,strokeOpacity:1,d:" M8.73 -8.13 C9.58,-7.31 10.16,-6.25 10.39,-5.09 C10.56,-4.24 10.53,-3.37 10.31,-2.54 C10.09,-1.7 9.68,-0.93 9.12,-0.28 C9.12,-0.28 1.16,9.21 1.16,9.21 C1.02,9.38 0.84,9.51 0.64,9.61 C0.44,9.7 0.22,9.75 0,9.75 C-0.22,9.75 -0.44,9.7 -0.64,9.61 C-0.84,9.51 -1.02,9.38 -1.16,9.21 C-1.16,9.21 -9.12,-0.28 -9.12,-0.28 C-9.68,-0.93 -10.09,-1.7 -10.31,-2.54 C-10.53,-3.37 -10.56,-4.25 -10.39,-5.09 C-10.19,-6.11 -9.73,-7.05 -9.04,-7.82 C-8.35,-8.59 -7.47,-9.16 -6.49,-9.48 C-5.5,-9.79 -4.45,-9.83 -3.45,-9.6 C-2.44,-9.37 -1.51,-8.87 -0.77,-8.16 C-0.56,-7.96 -0.28,-7.85 0,-7.85 C0.28,-7.85 0.56,-7.96 0.77,-8.16 C1.41,-8.77 2.18,-9.22 3.03,-9.49 C3.87,-9.75 4.77,-9.82 5.64,-9.68 C6.8,-9.49 7.88,-8.94 8.73,-8.13z "})]})})})]}),(0,m.jsx)("g",{id:"time_group"})]})})),k=(0,n.memo)((function(e){let{size:t,onEnd:i}=e;const n=2.35;return(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",width:t*n,height:t*n,viewBox:"0 0 224 224",style:{willChange:"transform",transform:"translate3d(0, 0, 0)",margin:`-${(t*n-t)/2}px`},children:[(0,m.jsxs)("defs",{children:[(0,m.jsx)("animate",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_1_G_D_0_P_0",fill:"freeze",attributeName:"stroke-width",from:1,to:2,keyTimes:"0;0.3225806;0.6451613;1",values:"1;1;2;2",keySplines:"0.6 0 0.7 1;0.6 0 0.7 1;0 0 0 0",calcMode:"spline",ref:e=>{e&&e.addEventListener("endEvent",i,{once:!0})}}),(0,m.jsx)("animate",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_1_G",fill:"freeze",attributeName:"opacity",from:0,to:.7000000000000001,keyTimes:"0;0.3225806;0.6451613;1",values:"0;0;0.7000000000000001;0.7000000000000001",keySplines:"0.6 0 0.7 1;0.6 0 0.7 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_T_0",fill:"freeze",keyTimes:"0;0.3225806;0.483871;0.6451613;0.9677419;1",path:"M112 140 C112,140 100,140 100,140 C100,140 124,140 124,140 C124,140 100,140 100,140 C100,140 112,140 112,140 C112,140 112,140 112,140 ",keyPoints:"0;0.17;0.5;0.83;1;1",keySplines:"0.8 0 0.8 1;0.8 0 0.8 1;0.8 0 0.8 1;0.2 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_1_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:0,to:0,type:"rotate",additive:"sum",keyTimes:"0;0.2580645;0.3870968;0.5483871;0.7096774;0.9677419;1",values:"0;3;-4;6;-6;0;0",keySplines:"0.6 0 0.667 1;0.333 0 0.667 1;0.333 0 0.667 1;0.333 0 0.667 1;0.6 0 0.667 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_0_G_D_1_P_0",fill:"freeze",attributeName:"stroke-width",from:1,to:2,keyTimes:"0;0.3225806;0.6451613;1",values:"1;1;2;2",keySplines:"0.3 0 0.4 1;0.3 0 0.4 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_0_G",fill:"freeze",attributeName:"opacity",from:1,to:0,keyTimes:"0;0.3225806;0.6451613;1",values:"1;1;0;0",keySplines:"0.3 0 0.4 1;0.3 0 0.4 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateMotion",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_T_0",fill:"freeze",keyTimes:"0;0.3225806;0.483871;0.6451613;0.9677419;1",path:"M112 140 C112,140 100,140 100,140 C100,140 124,140 124,140 C124,140 100,140 100,140 C100,140 112,140 112,140 C112,140 112,140 112,140 ",keyPoints:"0;0.17;0.5;0.83;1;1",keySplines:"0.8 0 0.8 1;0.8 0 0.8 1;0.8 0 0.8 1;0.2 0 0.2 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animateTransform",{dur:"0.5166667s",begin:"0s",xlinkHref:"#_R_G_L_0_G_N_2_T_0",fill:"freeze",attributeName:"transform",from:0,to:0,type:"rotate",additive:"sum",keyTimes:"0;0.2580645;0.3870968;0.5483871;0.7096774;0.9677419;1",values:"0;3;-4;6;-6;0;0",keySplines:"0.6 0 0.667 1;0.333 0 0.667 1;0.333 0 0.667 1;0.333 0 0.667 1;0.6 0 0.667 1;0 0 0 0",calcMode:"spline"}),(0,m.jsx)("animate",{attributeType:"XML",attributeName:"opacity",dur:"1s",from:0,to:1,xlinkHref:"#time_group"})]}),(0,m.jsxs)("g",{id:"_R_G",children:[(0,m.jsx)("g",{id:"_R_G_L_1_G_N_2_T_0",children:(0,m.jsx)("g",{id:"_R_G_L_1_G",transform:" translate(0, -28) scale(4, 4) translate(0, 0)",children:(0,m.jsx)("path",{id:"_R_G_L_1_G_D_0_P_0",stroke:p.ixZ,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:1,strokeOpacity:1,d:" M8.73 -8.13 C9.58,-7.31 10.16,-6.25 10.39,-5.09 C10.56,-4.24 10.53,-3.37 10.31,-2.54 C10.09,-1.7 9.68,-0.93 9.12,-0.28 C9.12,-0.28 1.16,9.21 1.16,9.21 C1.02,9.38 0.84,9.51 0.64,9.61 C0.44,9.7 0.22,9.75 0,9.75 C-0.22,9.75 -0.44,9.7 -0.64,9.61 C-0.84,9.51 -1.02,9.38 -1.16,9.21 C-1.16,9.21 -9.12,-0.28 -9.12,-0.28 C-9.68,-0.93 -10.09,-1.7 -10.31,-2.54 C-10.53,-3.37 -10.56,-4.25 -10.39,-5.09 C-10.19,-6.11 -9.73,-7.05 -9.04,-7.82 C-8.35,-8.59 -7.47,-9.16 -6.49,-9.48 C-5.5,-9.79 -4.45,-9.83 -3.45,-9.6 C-2.44,-9.37 -1.51,-8.87 -0.77,-8.16 C-0.56,-7.96 -0.28,-7.85 0,-7.85 C0.28,-7.85 0.56,-7.96 0.77,-8.16 C1.41,-8.77 2.18,-9.22 3.03,-9.49 C3.87,-9.75 4.77,-9.82 5.64,-9.68 C6.8,-9.49 7.88,-8.94 8.73,-8.13z "})})}),(0,m.jsx)("g",{id:"_R_G_L_0_G_N_2_T_0",children:(0,m.jsxs)("g",{id:"_R_G_L_0_G",transform:" translate(0.214, -27.999) scale(4, 4) translate(0, 0)",children:[(0,m.jsx)("path",{id:"_R_G_L_0_G_D_0_P_0",fill:p.By7,fillOpacity:1,fillRule:"nonzero",d:" M8.73 -8.13 C9.58,-7.31 10.16,-6.25 10.39,-5.09 C10.56,-4.24 10.53,-3.37 10.31,-2.54 C10.09,-1.7 9.68,-0.93 9.12,-0.28 C9.12,-0.28 1.16,9.21 1.16,9.21 C1.02,9.38 0.84,9.51 0.64,9.61 C0.44,9.7 0.22,9.75 0,9.75 C-0.22,9.75 -0.44,9.7 -0.64,9.61 C-0.84,9.51 -1.02,9.38 -1.16,9.21 C-1.16,9.21 -9.12,-0.28 -9.12,-0.28 C-9.68,-0.93 -10.09,-1.7 -10.31,-2.54 C-10.53,-3.37 -10.56,-4.25 -10.39,-5.09 C-10.19,-6.11 -9.73,-7.05 -9.04,-7.82 C-8.35,-8.59 -7.47,-9.16 -6.49,-9.48 C-5.5,-9.79 -4.45,-9.83 -3.45,-9.6 C-2.44,-9.37 -1.51,-8.87 -0.77,-8.16 C-0.56,-7.96 -0.28,-7.85 0,-7.85 C0.28,-7.85 0.56,-7.96 0.77,-8.16 C1.41,-8.77 2.18,-9.22 3.03,-9.49 C3.87,-9.75 4.77,-9.82 5.64,-9.68 C6.8,-9.49 7.88,-8.94 8.73,-8.13z "}),(0,m.jsx)("path",{id:"_R_G_L_0_G_D_1_P_0",stroke:p.By7,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",strokeWidth:1,strokeOpacity:1,d:" M8.73 -8.13 C9.58,-7.31 10.16,-6.25 10.39,-5.09 C10.56,-4.24 10.53,-3.37 10.31,-2.54 C10.09,-1.7 9.68,-0.93 9.12,-0.28 C9.12,-0.28 1.16,9.21 1.16,9.21 C1.02,9.38 0.84,9.51 0.64,9.61 C0.44,9.7 0.22,9.75 0,9.75 C-0.22,9.75 -0.44,9.7 -0.64,9.61 C-0.84,9.51 -1.02,9.38 -1.16,9.21 C-1.16,9.21 -9.12,-0.28 -9.12,-0.28 C-9.68,-0.93 -10.09,-1.7 -10.31,-2.54 C-10.53,-3.37 -10.56,-4.25 -10.39,-5.09 C-10.19,-6.11 -9.73,-7.05 -9.04,-7.82 C-8.35,-8.59 -7.47,-9.16 -6.49,-9.48 C-5.5,-9.79 -4.45,-9.83 -3.45,-9.6 C-2.44,-9.37 -1.51,-8.87 -0.77,-8.16 C-0.56,-7.96 -0.28,-7.85 0,-7.85 C0.28,-7.85 0.56,-7.96 0.77,-8.16 C1.41,-8.77 2.18,-9.22 3.03,-9.49 C3.87,-9.75 4.77,-9.82 5.64,-9.68 C6.8,-9.49 7.88,-8.94 8.73,-8.13z "})]})})]}),(0,m.jsx)("g",{id:"time_group"})]})}));var g=i(71062);const E="LDSCLTBPA5SMDx4mXgrg",S="o61khbQP5vnRUl_kgi5O",y="tPjfovNf3f8wHNi7XFNr";let f=function(e){return e[e.xs=16]="xs",e[e.sm=24]="sm",e[e.md=32]="md",e[e.lg=48]="lg",e[e.xl=64]="xl",e}({});var N=function(e){return e.none="none",e.positive="positive",e.undo="undo",e}(N||{});const T=(0,n.memo)((function(e){let{onClick:t,isAdded:i,size:a,disabled:p=!1,isEpisode:f=!1,isAudiobook:T=!1,className:R,...A}=e;const b=i?c.ag.get("remove_from_your_library"):c.ag.get("save_to_your_library"),C=(0,u.T)(),[I,L]=(0,n.useState)(N.none),P=(0,n.useCallback)((()=>L(N.none)),[L]),D=(0,n.useCallback)((e=>{if(p)return;const{currentTarget:n,detail:a}=e;L(i?N.undo:N.positive),t(e),a>0&&n&&n.blur()}),[i,t,p]);let O;return O=C||I===N.none?f||T?i?(0,m.jsx)(r.K,{iconSize:a}):(0,m.jsx)(o.G,{iconSize:a}):i?(0,m.jsx)(l.a,{iconSize:a}):(0,m.jsx)(d.A,{iconSize:a}):f||T?I===N.positive?(0,m.jsx)(_,{size:a,onEnd:P}):(0,m.jsx)(h,{size:a,onEnd:P}):I===N.positive?(0,m.jsx)(v,{size:a,onEnd:P}):(0,m.jsx)(k,{size:a,onEnd:P}),(0,m.jsx)(g.w,{label:b,children:(0,m.jsx)("button",{type:"button",role:"switch","aria-checked":i,"aria-label":b,className:s()(E,R,{[S]:i,[y]:p}),onClick:D,"data-testid":"add-button",...A,children:O})})}))},55126:(e,t,i)=>{"use strict";i.d(t,{z:()=>m});var n=i(59496),a=i(61740),s=i(10340),r=i(80151),o=i(37029),l=i(17409),d=i(43090),c=i(41177),u=i(4637);const m=(0,n.memo)((e=>{let{className:t,uri:i,contextUri:m,metadata:_}=e;const h=(0,s.QT)(),p=(0,a.I0)(),v=(0,c.s0)(),k=(0,n.useCallback)((()=>{v({hash:r.H}),p((0,o.pT)({uri:i,contextUri:m,metadata:_}))}),[p,v,m,_,i]);return(0,u.jsx)(l.o,{iconOnly:d.F,"aria-label":h.get("more"),onClick:k,className:t})}))},2364:(e,t,i)=>{"use strict";i.d(t,{x:()=>d});var n=i(84875),a=i.n(n),s=i(97422),r=i(96730),o=i(71313),l=i(4637);function d(e){let{Placeholder:t,sources:i=[],loading:n="lazy",circular:d=!1,radius:c=!1}=e;const u=(0,r.R)(i,160);return(0,l.jsx)("div",{className:a()(o.Z.imageContainer,{[o.Z.circleImage]:d,[o.Z.radius]:c}),children:u?(0,l.jsx)(s.Ee,{loading:n,src:u,height:"100%",width:"100%"}):t})}},72539:(e,t,i)=>{"use strict";i.d(t,{m:()=>r});var n=i(71313),a=i(24377),s=i(4637);function r(e){let{children:t}=e;return(0,s.jsx)(a.D,{as:"div",variant:"finale",className:n.Z.subtitle,dir:"auto",semanticColor:"textSubdued",children:t})}},39292:(e,t,i)=>{"use strict";i.d(t,{l:()=>r});var n=i(71313),a=i(24377),s=i(4637);function r(e){let{children:t,paddingBottom:i="spacer8"}=e;return(0,s.jsx)(a.D,{variant:"mestoBold",className:n.Z.title,dir:"auto",paddingBottom:i,children:t})}},2778:(e,t,i)=>{"use strict";i.d(t,{rf:()=>S,IT:()=>k,ZL:()=>v});var n=i(10340),a=i(83474),s=i(35205),r=i(71313),o=i(84875),l=i.n(o),d=i(59496),c=i(4637);const u=(0,d.forwardRef)((function(e,t){let{disabled:i=!1,children:n}=e;return(0,c.jsx)("div",{"data-testid":"card-mwp",className:l()(r.Z.container,{[r.Z.disabled]:i}),ref:t,children:n})}));var m=i(2364),_=i(39292),h=i(72539),p=i(25893);const v=e=>{let{sources:t,name:i,uri:r,disabled:o=!1,loading:l,followerCount:d}=e;const v=(0,n.QT)();return r?(0,c.jsx)(u,{disabled:o,children:(0,c.jsxs)(p.r,{to:r,children:[(0,c.jsx)(m.x,{sources:t,loading:l,Placeholder:(0,c.jsx)(s.j,{title:i,type:a.p.PLAYLIST})}),(0,c.jsx)(_.l,{children:i}),!!d&&(0,c.jsx)(h.m,{children:v.get("user.followers",d)})]})}):null},k=e=>{let{sources:t,name:i,uri:r,isRich:o=!1}=e;const l=(0,n.QT)();return r?(0,c.jsx)(u,{children:(0,c.jsxs)(p.r,{to:r,children:[(0,c.jsx)(m.x,{circular:!0,sources:t,Placeholder:(0,c.jsx)(s.j,{title:i,type:a.p.ARTIST})}),(0,c.jsx)(_.l,{children:i}),o&&(0,c.jsx)(h.m,{children:l.get("artist")})]})}):null};var g=i(62823);const E=(e,t)=>[e,t].join(" • "),S=e=>{let{sources:t,name:i,uri:n,disabled:r,loading:o,type:l,year:d}=e;return n?(0,c.jsx)(u,{disabled:r,children:(0,c.jsxs)(p.r,{to:n,children:[(0,c.jsx)(m.x,{sources:t,loading:o,Placeholder:(0,c.jsx)(s.j,{title:i,type:a.p.ALBUM})}),(0,c.jsx)(_.l,{children:i}),l&&!!d&&(0,c.jsx)(h.m,{children:E((0,g.R)(l),d)})]})}):null}},47586:(e,t,i)=>{"use strict";i.d(t,{V:()=>c});var n=i(87995),a=i(84875),s=i.n(a);const r="AUN1ndlgwHSsrATcSdmH",o="m4UJquBsG9EK_3N71yZX",l="XjKRzMjOiZxM2eciaoaN";var d=i(4637);const c=e=>{let{children:t,className:i,onDismiss:a,backgroundColor:c,overlayBackgroundImage:u="none",overlayOpacity:m="0.8"}=e;return n.createPortal((0,d.jsxs)("div",{className:s()(r,i),children:[(0,d.jsx)("div",{className:o,onKeyPress:e=>{"Enter"===e.key&&a()},onClick:a,style:{"--overlay-background-image":u,"--overlay-opacity":m}}),(0,d.jsx)("div",{className:l,style:c?{"--content-background-color":c}:{},children:t})]}),document.body)}},90668:(e,t,i)=>{"use strict";i.d(t,{x:()=>l});var n=i(59496);const a="JmV8FMNND0hJM4fCS9E4",s="V4vPzzVtMpFh2ZLTRD6H";var r=i(24377),o=i(4637);const l=(0,n.memo)((e=>{const{children:t,testId:i,small:n=!1}=e;return(0,o.jsx)("span",{dir:"auto",className:a,children:(0,o.jsx)(r.D,{className:s,"data-testid":i,variant:n?"canon":"alto",children:t})})}))},4248:(e,t,i)=>{"use strict";i.d(t,{o:()=>N,U:()=>y});const n="yCrCHeckTV1u4taQ4_iA",a="UyQiaNpRWAFeZAEKh6vP",s="cPODnId5hQ0TWCil7eA1",r="JmAAOV57nqLdnvqrbcqb",o="xejGwhC7nZAibjijY0QQ",l="ZVlLZFdgQKOy1Kd61zVK";var d=i(24377),c=i(44947),u=i(38510),m=i(65994),_=i(54085),h=i(9008),p=i(83474),v=i(35205),k=i(35875),g=i(84875),E=i.n(g),S=i(4637);const y=e=>{let{children:t}=e;return(0,S.jsx)(d.D,{variant:"mestoBold",className:s,children:t})},f=e=>{let{uri:t,title:i,imageUrl:a,withNumber:s,activeElement:r}=e;if(r)return(0,S.jsx)(S.Fragment,{children:r});if(s)return(0,S.jsx)(y,{children:s});const o=(0,k.p)(t),d=o===p.p.ARTIST||o===p.p.USER;return a?(0,S.jsx)(c.d,{alt:i,size:"lg",src:a,circle:d}):(0,S.jsx)(v.j,{title:null!=i?i:"",type:o,className:E()(n,{[l]:d})})},N=e=>{let{actions:t,activeElement:i,disabled:n,imageUrl:s,isActiveRow:l,id:d,onClick:c,subtitle:p,title:v,uri:k,withNumber:g,verifiedBadge:E,"data-testid":y}=e;return(0,S.jsx)(u.w,{title:(0,S.jsxs)("span",{className:a,children:[(0,S.jsx)(m.g,{lineClamp:1,semanticColor:l?"textBrightAccent":void 0,children:v}),E&&(0,S.jsx)(_.w,{iconSize:16,className:o})]}),subtitle:(0,S.jsx)(h.l,{lineClamp:1,semanticColor:"textSubdued",children:p}),id:d,media:(0,S.jsx)(f,{uri:k,imageUrl:s,withNumber:g,activeElement:i}),onClick:c,"aria-label":v,disabled:n,variant:"naked",borderRadius:"0",hasFocus:!1,trailing:(0,S.jsx)("div",{className:r,children:null==t?void 0:t.map((e=>e))}),isRedundantOnClick:!0,"data-testid":y})}},87097:(e,t,i)=>{"use strict";i.d(t,{U:()=>o});var n=i(85600),a=i(10340),s=i(57294),r=i(4637);const o=e=>{const t=(0,a.QT)();return(0,r.jsx)("div",{className:s.Z.loadingState,...e,children:(0,r.jsx)(n.T,{"data-testid":"loading-indicator",indicatorSize:"md",ariaValueText:t.get("mwp.header.momentarily"),"aria-label":t.get("mwp.header.momentarily")})})}},78257:(e,t,i)=>{"use strict";i.d(t,{n:()=>l});var n=i(24377),a=i(57294),s=i(84875),r=i.n(s),o=i(4637);const l=e=>{let{children:t,className:i}=e;return(0,o.jsx)(n.D,{as:"div",variant:"mesto",className:r()(i,a.Z.actions),children:t})}},24288:(e,t,i)=>{"use strict";i.d(t,{h:()=>d});const n="kZoMzfC8bqaRbYIBePsA";var a=i(97422),s=i(84875),r=i.n(s),o=i(96730),l=i(4637);const d=e=>{let{images:t,fallback:i}=e;const s=(0,o.R)(t,150);return(0,l.jsx)("div",{className:r()(n),"data-testid":"entity-avatar-image",children:(0,l.jsx)(a.Ee,{src:s,loading:"lazy",alt:"",children:i})})}},63700:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(24377),a=i(84875),s=i.n(a),r=i(57294),o=i(4637);const l=e=>{let{children:t,testId:i}=e;return(0,o.jsx)(n.D,{as:"div",variant:"mesto",className:s()(r.Z.entityHeaderMetadata,r.Z.bulletSeparated),"data-testid":i,children:t})}},23162:(e,t,i)=>{"use strict";i.d(t,{g:()=>r});var n=i(9944),a=i(35239),s=i(4637);const r=e=>{let{durationMs:t,isEstimate:i}=e;return i?(0,s.jsx)(a.j,{durationMs:t}):(0,s.jsx)(n.n,{durationMs:t})}},82815:(e,t,i)=>{"use strict";i.d(t,{X:()=>d});var n=i(10340),a=i(41177),s=i(44910),r=i(74578),o=i(57294),l=i(4637);const d=e=>{let{primaryButtonTitle:t,message:i,primaryButtonNavigatePath:d="/search/recent"}=e;const c=(0,n.QT)(),u=(0,a.s0)();return(0,r.Hx)({visible:!0}),(0,l.jsx)("div",{className:o.Z.errorContainer,children:(0,l.jsx)(s.o,{heading:c.get("error.generic"),message:null!=i?i:c.get("error.not_found.body"),primaryButtonTitle:null!=t?t:c.get("mwp.nav.search"),onPrimaryButtonClick:()=>{u(d)}})})}},33332:(e,t,i)=>{"use strict";i.d(t,{g:()=>r});var n=i(57294),a=i(38185),s=i(4637);const r=e=>{let{children:t,backgroundColor:i=a.nh1,"data-testid":r}=e;return(0,s.jsx)("div",{"data-testid":r,className:n.Z.header,style:{background:`linear-gradient(${i} 0%, transparent 100%)`},children:t})}},98110:(e,t,i)=>{"use strict";i.d(t,{n:()=>s});var n=i(57294),a=i(4637);const s=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:n.Z.headerBottomSection,"data-testid":"entity-bottom-section",children:t})}},83704:(e,t,i)=>{"use strict";i.d(t,{U:()=>s});var n=i(57294),a=i(4637);const s=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:n.Z.titleAndSubtitleWrapper,"data-testid":"entity-header-title-and-subtitle-section",children:t})}},61553:(e,t,i)=>{"use strict";i.d(t,{T:()=>o});var n=i(57294),a=i(84875),s=i.n(a),r=i(4637);const o=e=>{let{children:t,direction:i="column",condensed:a=!1}=e;return(0,r.jsx)("div",{className:s()(n.Z.headerImageAndTextWrapper,{[n.Z.row]:"row"===i,[n.Z.column]:"column"===i,[n.Z.condensed]:a}),"data-testid":"entity-header-top-section",children:t})}},40700:(e,t,i)=>{"use strict";i.d(t,{O:()=>h});i(71756);var n=i(59496);const a="rFLCDqCggWGtqULmRkQm",s="iUApf_adKyRKmHhMya3r",r="i7ZBpNlzVDi5Syypp0lw";var o=i(97422),l=i(84875),d=i.n(l),c=i(96730),u=i(97846);var m=i(90321),_=i(4637);const h=e=>{let{images:t,fallback:i,circular:l=!1,roundedCorners:h=!1,fadeImageBetween:p,testid:v,size:k}=e;const g=(0,c.R)(t,300),[E,S]=(0,n.useState)(1),y=(0,n.useCallback)((e=>{if(!p)return;const t=e.target,[i,n]=p,a=(s=t.scrollTop,r=i,o=n,Math.min(Math.max(s,r),o));var s,r,o;S(1-(a-i)/(n-i))}),[p]);(0,u.c)(y);const f=k?{width:m.eM[k],height:m.eM[k]}:{};return(0,_.jsx)("div",{"data-testid":"entity-image",style:{opacity:E,...f},className:d()(a,{[s]:l,[r]:h}),children:(0,_.jsx)(o.Ee,{src:g,loading:"eager",alt:"",testid:v,children:i})})}},94138:(e,t,i)=>{"use strict";i.d(t,{X:()=>s});var n=i(57294),a=i(4637);const s=e=>{let{children:t}=e;return(0,a.jsx)("div",{className:n.Z.mainContent,children:t})}},61911:(e,t,i)=>{"use strict";i.d(t,{O:()=>p});var n=i(24377),a=i(84875),s=i.n(a),r=i(76490),o=i(27369),l=i(97477);const d="hJKp9MHk92NS0JN_aM2m",c="rjgjKwDDE323iNhT7QdG",u="PUz1yqlfF9DS4FJPaA4h";var m=i(4637);const _=e=>{let{isShuffle:t=!1,...i}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.f,{...i,size:"lg"}),t?(0,m.jsx)("span",{className:(0,o.Mg)("base",d),"data-testid":"shuffle-button",children:(0,m.jsx)(l.z,{className:s()(c,{[u]:i.disabled}),"aria-hidden":!0,iconSize:16})}):null]})};var h=i(57294);const p=e=>{let{onClick:t,isPlaying:i,disabled:a,isOnDemand:r,bottomAligned:o=!1}=e;return(0,m.jsx)(n.D,{as:"div",variant:"mesto",className:s()(h.Z.playButton,{[h.Z.bottomAligned]:o}),children:(0,m.jsx)("div",{className:h.Z.playButtonInner,children:(0,m.jsx)(_,{onClick:t,isPlaying:i,disabled:a,isShuffle:!r})})})}},84136:(e,t,i)=>{"use strict";i.d(t,{x:()=>r});var n=i(57294),a=i(24377),s=i(4637);const r=e=>{let{children:t,testId:i}=e;return(0,s.jsx)(a.D,{as:"h1",variant:"alto","data-testid":i,className:n.Z.title,children:t})}},50586:(e,t,i)=>{"use strict";i.d(t,{X:()=>s});var n=i(57294),a=i(4637);const s=e=>{let{children:t,testId:i}=e;return(0,a.jsx)("div",{"data-testid":i,className:n.Z.entityView,children:t})}},94890:(e,t,i)=>{"use strict";i.d(t,{u:()=>o});var n=i(82815),a=i(46146),s=i(95057),r=i(4637);const o=e=>{let{children:t,...i}=e;return(0,r.jsx)(a.SV,{onError:s.A,fallbackRender:()=>(0,r.jsx)(n.X,{...i}),children:t})}},35352:(e,t,i)=>{"use strict";i.d(t,{F:()=>h});var n=i(59272),a=i(17409),s=i(60722),r=i(9923),o=i(61740),l=i(10340),d=i(70283),c=i(5065),u=i(35333),m=i(76022),_=i(4637);const h=e=>{var t,i;let{uri:h,shareTitle:p,shareText:v}=e;const k=(0,l.QT)(),g=(0,o.I0)(),E=(0,c.o)(),S=k.getUrlLocale(),y=(0,u.k)({type:"link",uri:h})?null===(t=(0,n.EC)(h))||void 0===t?void 0:t.toURL(`${m.Li}${m.F0}${S}/`):null===(i=(0,n.EC)(h))||void 0===i?void 0:i.toURL();return(0,_.jsx)(a.o,{iconOnly:s.o,"aria-label":k.get("mwp.list.item.share"),disabled:!y,onClick:()=>{y&&(g((0,r.OW)(p,v,y)),E({type:d.wl.CATEGORY.CLICK,intent:"share-copy-link",targetUri:h}))}})}},30475:(e,t,i)=>{"use strict";i.d(t,{Q:()=>d});var n=i(95627),a=i(25893),s=i(24377),r=i(54352),o=i(24288),l=i(4637);const d=e=>{let{name:t,uri:i,images:d}=e;return(0,l.jsxs)(s.D,{as:"div",variant:"mesto",className:n.Z.albumArtist,children:[(0,l.jsx)(o.h,{images:null!=d?d:[],fallback:(0,l.jsx)(r.f,{iconSize:24})}),(0,l.jsx)(a.r,{to:i,children:t})]})}},27264:(e,t,i)=>{"use strict";i.d(t,{m:()=>ae});var n=i(61339),a=i(17409),s=i(43090),r=i(40644),o=i(32673),l=i(92901),d=i(24156),c=i(9923),u=i(78986),m=i(59496),_=i(61740),h=i(78257),p=i(33332),v=i(98110),k=i(40700),g=i(94138),E=i(84136),S=i(50586),y=i(87097),f=i(35352),N=i(55165),T=i(61911),R=i(30475),A=i(24377),b=i(63700),C=i(10340),I=i(23162),L=i(4637);const P=e=>{let{durationMs:t,isEstimate:i}=e;const n=(0,C.QT)();return(0,L.jsxs)(L.Fragment,{children:[n.getSeparator(),(0,L.jsx)(I.g,{durationMs:t,isEstimate:i})]})};var D=i(95627);const O=e=>{let{year:t,totalCount:i,durationMs:n,isEstimate:a}=e;const s=(0,C.QT)();return(0,L.jsx)("div",{className:D.Z.bulletMetadata,"data-testid":"time-and-duration",children:(0,L.jsxs)(b.Z,{children:[!!t&&(0,L.jsx)(A.D,{variant:"mesto",children:t}),(0,L.jsxs)(A.D,{variant:"mesto",children:[s.get("tracklist-header.songs-counter",i),n>0&&(0,L.jsx)(P,{durationMs:n,isEstimate:a})]})]})})};var F=i(97425);const w=e=>{let{items:t}=e;return(0,L.jsx)("div",{className:D.Z.trackCloud,children:(0,L.jsx)(F.q,{tracks:t.slice(0,6).map((e=>({title:e.name,subtitle:e.artists.items[0].profile.name})))})})};var x=i(49904),M=i(4248),U=i(27169),j=i(30776),B=i(35215);var G=i(33660),V=i(75285);const Y=function(e,t,i){var n,a;return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1}).subtitleAsLink?t.artists.items.map((e=>({uri:e.uri,name:e.profile.name}))):t.artists&&i?t.artists.items.map((e=>e.profile.name)).join(e.getSeparator()):null!==(n=null===(a=t.artists.items[0])||void 0===a?void 0:a.profile.name)&&void 0!==n?n:""},K=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1};const a=(t,a,s)=>{var r;const o=i?t.name:null!==(r=Y(e,t,i))&&void 0!==r?r:"",l=function(e,t,i){return i?Y(e,t,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1}):t.name}(e,t,i,n),d=(e=>{const{album:t,track:i}=e,n=t.coverArt&&t.coverArt.sources.length>0?t.coverArt.sources.map((e=>{var t,i;return{url:e.url,height:null!==(t=e.height)&&void 0!==t?t:void 0,width:null!==(i=e.height)&&void 0!==i?i:void 0}})):[],a={name:t.name,uri:t.uri,images:n},s=i.artists.items.map((e=>({name:e.profile.name,uri:e.uri})));return{name:i.name,uri:i.uri,type:"track",is_playable:i.playability.playable,duration_ms:i.duration.totalMilliseconds,preview_url:i.previews&&i.previews.audioPreviews.items.length>0?i.previews.audioPreviews.items[0].url:"",id:i.id,images:n,artists:s,album:a}})({album:s,track:t});return{index:a,rawTrack:d,isPlayable:t.playability.playable,uri:t.uri,images:d.images,album:d.album,artists:d.artists,title:o,subtitle:l}};return t.tracks.items.filter((e=>{let{track:t}=e;return t})).map(((e,i)=>a(e.track,i,t)))},H=e=>{let{isAnonymous:t,isOnDemand:i,contextURI:n,currentTrackURI:a,album:s,onRowClick:r,shouldDisableRow:o,onContextMenuClick:l,nrTracks:d}=e;const{request:c}=(0,m.useContext)(G.Ax),_=(0,C.QT)(),h=(0,m.useCallback)((async e=>{var t;const n=await c(B.a6,{uri:s.uri,offset:e});return null!=n&&null!==(t=n.data)&&void 0!==t&&t.albumUnion&&(0,u.vN)(n.data.albumUnion)?K(_,n.data.albumUnion,i,{subtitleAsLink:!0}):[]}),[s.uri,_,i,c]),p=(0,m.useMemo)((()=>K(_,s,i,{subtitleAsLink:!0})),[s,_,i]);return(0,L.jsx)("div",{className:D.Z.tracksContainer,children:(0,L.jsx)(x.m,{tracks:p,renderRow:(e,s)=>{const{title:d,uri:c}=e,u=a===c,m="string"==typeof e.subtitle?e.subtitle:e.subtitle.map((e=>{let{name:t}=e;return t})).join(_.getSeparator()),h=t&&u?(0,L.jsx)(j.I,{fallback:(0,L.jsx)(M.U,{children:s+1})}):void 0;let p=null;return t||(p=(0,L.jsx)(V.V,{uri:c})),(0,L.jsx)(M.o,{id:`track-${c}`,uri:c,"data-testid":"track-row",title:d,subtitle:m,disabled:o(s,e),isActiveRow:u,onClick:r(s,e),withNumber:s+1,activeElement:h,actions:[p,(0,L.jsx)(U.d,{contextURI:n,onDemand:i,track:e,onContextMenuClick:l},`actions-${c}`)]})},nrTracks:d,fetchTracks:h,rowHeight:80})})};var W=i(1246),q=i(13831),Q=i(98593),$=i(37716),z=i(30951),Z=i(46931),X=i(69773),J=i(41177),ee=i(8632),te=i(74578),ie=i(59272),ne=i(35333);const ae=()=>{var e,t,i,A,b,I,P,D;const F=(0,C.QT)(),{entityId:x=""}=(0,J.UO)(),M=(0,ie.jy)(x).toURI();(0,m.useEffect)((()=>{window.LUX&&(window.LUX.label="Album Page")}));const U=(0,_.I0)(),j=(0,_.v9)((e=>e.entities.items[M])),B=(0,u.Og)(j)?j:void 0;(0,te.Hx)({visible:!0,title:null==B?void 0:B.name,backgroundColor:null==B||null===(e=B.coverArt)||void 0===e||null===(t=e.extractedColors)||void 0===t?void 0:t.colorDark.hex});const G=!!B,V=(0,r.g)(),Y=(0,ne.k)({type:"link",uri:M});(0,m.useEffect)((()=>{G||U((0,c.$p)(M))}),[U,M,G]);const K=(0,ee.OT)({i18n:F,albumArtists:(0,ee.eI)(F,null==B?void 0:B.artists.items),albumName:null==B?void 0:B.name,albumType:null==B?void 0:B.type,shouldLocalize:Y});(0,X.j)(K);const ae=(0,o.u)(M),se=(0,l.k)(),re=(0,W.U)(),oe=(0,$.u)(),le=(0,d.W)(),de=(0,_.v9)((e=>{var t,i,n;return{playbackContextUri:null===(t=e.playback.current)||void 0===t?void 0:t.context.uri,currentTrackURI:null===(i=e.playback.current)||void 0===i||null===(n=i.track_window.current_track)||void 0===n?void 0:n.uri}})),ce=(0,N.g0)({uri:M,isOnDemand:ae,playbackContextUri:de.playbackContextUri,referrer:le,audioFileMetadataResolver:()=>(0,N.IJ)(oe,B)}),{onContextMenuClick:ue,handleHeaderMenuClick:me}=(0,Q.a)(),{onRowClick:_e,shouldDisableRow:he}=(0,q.Y)(M,oe,re,!1,de.currentTrackURI,le);if(!B)return(0,L.jsx)(y.U,{});const pe=B.artists.items[0],ve=function(e){let{items:t,totalCount:i}=e;const n=t.reduce(((e,t)=>e+(t.track.duration.totalMilliseconds||0)),0);return{milliseconds:t.length>0?n/t.length*i:0,isEstimate:t.length<i}}({items:B.tracks.items,totalCount:B.tracks.totalCount}),ke=M===de.playbackContextUri&&!se;return(0,L.jsxs)(S.X,{children:[(0,L.jsxs)(p.g,{backgroundColor:null===(i=B.coverArt)||void 0===i||null===(A=i.extractedColors)||void 0===A?void 0:A.colorRaw.hex,children:[(0,L.jsx)(k.O,{images:null!==(b=null===(I=B.coverArt)||void 0===I?void 0:I.sources)&&void 0!==b?b:[],fallback:(0,L.jsx)(n.c,{iconSize:64})}),(0,L.jsx)(E.x,{children:B.name}),(0,L.jsx)(R.Q,{name:pe.profile.name,uri:pe.uri,images:null===(P=pe.visuals.avatarImage)||void 0===P?void 0:P.sources}),(0,L.jsxs)(v.n,{children:[(0,L.jsx)(O,{year:null===(D=B.date)||void 0===D?void 0:D.year,totalCount:B.tracks.totalCount,durationMs:ve.milliseconds,isEstimate:ve.isEstimate}),(0,L.jsxs)(h.n,{children:[(0,L.jsx)(Z.y,{uri:M}),(0,L.jsx)(f.F,{uri:M,shareTitle:B.name,shareText:B.name}),(0,L.jsx)(a.o,{iconOnly:s.F,"aria-label":F.get("more"),onClick:()=>{var e,t;me({uri:M,header:{title:B.name,backgroundImage:null===(e=pe.visuals.avatarImage)||void 0===e||null===(t=e.sources)||void 0===t?void 0:t[0].url}})}})]}),(0,L.jsx)(T.O,{onClick:ce,isPlaying:ke,disabled:0===B.tracks.totalCount,isOnDemand:ae})]})]}),(0,L.jsx)(g.X,{children:ae?(0,L.jsx)(H,{isAnonymous:V,isOnDemand:ae,contextURI:B.uri,currentTrackURI:de.currentTrackURI,album:B,onRowClick:_e,shouldDisableRow:he,onContextMenuClick:ue,nrTracks:B.tracks.totalCount}):(0,L.jsx)(w,{items:B.tracks.items.map((e=>e.track))})}),(0,L.jsx)(z.P,{})]})}},77008:(e,t,i)=>{"use strict";i.d(t,{c:()=>Ie});var n=i(41177),a=i(61740),s=i(3987),r=i(10340),o=i(86797),l=i(91663),d=i(24377),c=i(17409),u=i(70308),m=i(47393),_=i(67946),h=i(59496),p=i(24511),v=i(5065),k=i(59272),g=i(29800),E=i(32879),S=i(9068);const y="SOI0Zts9WldZA9BUFboH",f="G8uDcuecH1QuFI9oViej",N="hPnVPrq883aiaG2qAdIs";var T=i(56143),R=i(42490),A=i(88652);const b="MJpbIw2sXkl8vyRlS2Cw",C="n3pXM5pHtkln6l5EiLAm",I="RZMPdrbe28U2C4t7wWDD",L="NtEwiqZSRE8DvE6S2PEO",P="YtHLLGmWv7fy5kUzIiR3";var D=i(29404),O=i(99730),F=i(55609),w=i(4637);const x=e=>{let{showOrAudiobook:t}=e;const i=(0,r.QT)(),n=(0,A.qT)(),{createCheckoutSession:a,onError:s}=(0,F.n)();return(0,w.jsx)(D.Z,{timeout:300,in:!0,appear:!0,unmountOnExit:!0,classNames:{appear:I,appearActive:L},children:(0,w.jsx)(R.yv,{className:`${b} encore-dark-theme`,children:(0,w.jsxs)("div",{className:C,children:[(0,w.jsx)(d.D,{as:"div",variant:"cello",children:i.get("audiobook.chapterBuyCTA.header")}),(0,w.jsx)(d.D,{as:"div",variant:"mesto",children:i.get("audiobook.chapterBuyCTA.body")}),(0,w.jsxs)("div",{className:P,children:[(0,w.jsx)(c.o,{semanticColor:"textBase",onClick:()=>{n({type:"close"})},children:i.get("action-trigger.button.not-now")}),(0,w.jsx)(O.D,{colorSet:"invertedLight",onClick:async()=>{var e,i,n,r,o;null!=t&&null!==(e=t.price)&&void 0!==e&&e.finalPrice?await a({show_uri:(null==t?void 0:t.uri)||"",currency:(null==t||null===(i=t.price)||void 0===i||null===(n=i.finalPrice)||void 0===n?void 0:n.currency)||"",price:(null==t||null===(r=t.price)||void 0===r||null===(o=r.finalPrice)||void 0===o?void 0:o.amount)||0}):s()},children:i.get("mobile-web-player.locales.audiobooks.buy")})]})]})})})};var M=i(28894);const U=e=>{let{children:t,hasLockedContent:i,audiobook:n}=e;return i?(0,w.jsx)(R.Nt,{trigger:"click",action:"open",placement:"bottom",renderInline:!1,offset:[0,20],content:(0,w.jsx)(x,{showOrAudiobook:n}),children:t},"audiobook-chapter-buy"):t},j=e=>{let{hasContentLocked:t,audiobook:i,chapter:n,isPlaying:s,isPlayDisabled:o,isLoading:l}=e;const d=(0,r.QT)(),c=(0,v.o)(),u=(0,a.I0)(),m=(0,h.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),t&&!s||(c({type:"click",intent:"play",itemIdSuffix:"chapter/play"}),u((0,E.t_)("episode-view",n,i)))}),[n,i,t,s,c,u]);return(0,w.jsx)("div",{className:N,children:(0,w.jsx)(S.c,{id:S.P.musicPlusTalkEpisode,deferredLinkUri:(0,k.EC)(n.uri),triggerOptions:(0,M.M)(d),children:(0,w.jsx)(U,{hasLockedContent:t,audiobook:i,children:(0,w.jsx)(T.JM,{size:T.qE.lg,onClick:m,isPlaying:s,locked:t,disabled:o,isLoading:l})})})})};var B=i(40014),G=i(27383);const V=e=>{var t,i;let{episodeOrChapter:n}=e;const a=(0,r.QT)(),s=(0,B.v)(null!==(t=null===(i=n.coverArt)||void 0===i?void 0:i.sources)&&void 0!==t?t:[],B.F.large);return s?(0,w.jsx)("img",{className:y,src:(0,G.ZP)(s.url,!0),alt:a.get("mwp.podcast.episode"),loading:"lazy"}):null};var Y=i(90902),K=i(94138),H=i(43090),W=i(44488),q=i(33332),Q=i(35352),$=i(78257),z=i(98110),Z=i(61553),X=i(61339),J=i(63700),ee=i(40700),te=i(84136),ie=i(83704),ne=i(58582),ae=i(28552),se=i(80151),re=i(37029),oe=i(6336),le=i(37013),de=i(90321);const ce=e=>{var t,i,s,o,l,d,u,m,_,h,v;let{backgroundColor:k,episodeOrChapter:g,uri:E,PlayButton:S,showOrAudiobook:y}=e;const N=(0,r.QT)(),T=(0,n.s0)(),R=(0,a.I0)(),{playback:A}=(0,a.v9)((e=>({playback:e.playback}))),b=(null==A||null===(t=A.current)||void 0===t||null===(i=t.track_window)||void 0===i||null===(s=i.current_track)||void 0===s?void 0:s.uri)===E,C=null!==(o=null===(l=g.playedState)||void 0===l?void 0:l.playPositionMilliseconds)&&void 0!==o?o:0,I=((e,t,i)=>{var n,a;return{displayType:e.get("mwp.podcast.episode"),title:t.name,subtitle:null==i?void 0:i.name,subtitleLinkURI:null==i?void 0:i.uri,images:(0,W.l)(null!==(n=null===(a=t.coverArt)||void 0===a?void 0:a.sources)&&void 0!==n?n:[]),type:ne.p.EPISODE}})(N,g,y);I.images=(I.images||[]).map((e=>{let{url:t,...i}=e;return{url:(0,G.ZP)(t,!0),...i}}));return(0,w.jsxs)(q.g,{backgroundColor:k,children:[(0,w.jsxs)(Z.T,{condensed:!0,children:[(0,w.jsx)("div",{className:f,children:(0,w.jsx)(ee.O,{images:I.images||[],fallback:(0,w.jsx)(X.c,{iconSize:64}),fadeImageBetween:[50,175],testid:"entity-header-entity-image",size:de.m$.SIZE_56})}),(0,w.jsx)("div",{className:f,children:(0,w.jsxs)(ie.U,{children:[(0,w.jsx)(te.x,{testId:"showTitle",children:I.title}),I.subtitle&&(0,w.jsx)(J.Z,{testId:"entity-header-entity-subtitle",children:I.subtitle})]})})]}),(0,w.jsxs)(z.n,{children:[(0,w.jsxs)("span",{children:[(null===(d=g.contentRating)||void 0===d?void 0:d.label)===p.KS.Explicit&&(0,w.jsx)(oe.N,{}),(0,w.jsx)(le.E,{fullyPlayed:(null===(u=g.playedState)||void 0===u?void 0:u.state)===p.sY.Completed,isPlaying:!1,durationMs:null===(m=g.duration)||void 0===m?void 0:m.totalMilliseconds,releaseDate:null===(_=g.releaseDate)||void 0===_?void 0:_.isoString,resumePositionMs:null===(h=g.playedState)||void 0===h?void 0:h.playPositionMilliseconds,position:b?C:void 0})]}),(0,w.jsxs)($.n,{children:[(0,w.jsx)(Q.F,{uri:E,shareTitle:I.title,shareText:null!==(v=I.subtitle)&&void 0!==v?v:""}),(0,w.jsx)(c.o,{"data-testid":"context-menu-action",onClick:()=>{const{title:e}=I,t={text:{title:e},custom:{}},i={...(0,ae.T)({uri:E,header:I},t),attributes:{isAudiobook:"Audiobook"===y.__typename},show:y},n={contextUri:E,uri:E,metadata:i};T({hash:se.H}),R((0,re.pT)(n))},iconOnly:H.F,"aria-label":N.get("more")},"context-menu-action")]}),S]})]})};var ue=i(69773),me=i(74578),_e=i(8632);const he=e=>{var t,i,s,E,S,y,f,N,T,R,A;let{chapter:b,backgroundColor:C,audiobook:I,uri:L}=e;const P=(0,r.QT)();(0,me.Hx)({visible:!0,backgroundColor:C,title:b.name}),(0,ue.j)((0,_e.mK)({episodeOrChapterName:b.name,showOrAudiobookName:I.name,type:"Audiobook"}));const D=(0,n.s0)(),{playback:O,session:F}=(0,a.v9)((e=>({playback:e.playback,session:e.session}))),x=null==O?void 0:O.isBuffering,{isAudiobooksOnMWPEnabled:M}=F.features,U=(null==O||null===(t=O.current)||void 0===t||null===(i=t.track_window)||void 0===i||null===(s=i.current_track)||void 0===s?void 0:s.uri)===b.uri,B=null!==(E=b.duration)&&void 0!==E&&E.totalMilliseconds?(0,_.P)(null===(S=b.duration)||void 0===S?void 0:S.totalMilliseconds):"",G=!(null!==(y=b.playability)&&void 0!==y&&y.playable)&&(null===(f=b.playability)||void 0===f?void 0:f.reason)===p.Ku.PaymentRequired,H=(0,v.o)();(0,h.useEffect)((()=>{H({type:"view",intent:"audiobook-chapter",itemIdSuffix:"chapter/"+(G?"paid":"free")})}),[G,H]),(0,h.useEffect)((()=>{window.LUX&&(window.LUX.label="Chapter Page")}));const W=()=>{const e=I.id;return`/show/${(0,k.HB)(e)}`},q=W(),Q=U&&!Boolean(null==O||null===(N=O.current)||void 0===N?void 0:N.paused),$=!(null!==(T=b.playability)&&void 0!==T&&T.playable&&Boolean(M));return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ce,{backgroundColor:C,episodeOrChapter:b,uri:L,PlayButton:(0,w.jsx)(j,{hasContentLocked:G,audiobook:I,chapter:b,isPlaying:Q,isPlayDisabled:$,isLoading:x}),showOrAudiobook:I}),(0,w.jsx)(K.X,{children:(0,w.jsxs)("div",{children:[b.description&&(0,w.jsx)(o.o,{content:b.description,maxLines:2,enableTimestamps:!0}),(null===(R=b.contentRating)||void 0===R?void 0:R.label)===p.KS.Explicit&&(0,w.jsx)(l.V,{children:P.get("mwp.badge.explicit")}),(null===(A=b.contentRating)||void 0===A?void 0:A.label)===p.KS.NineteenPlus&&(0,w.jsx)(Y.X,{size:16}),(0,w.jsx)(d.D,{as:"div",variant:"minuet",semanticColor:"textSubdued",children:B&&(0,g.N)({h:B.hours,m:B.minutes,s:B.seconds})}),(0,w.jsx)(V,{episodeOrChapter:b}),q&&(0,w.jsx)(m.rU,{to:q,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,w.jsx)(c.o,{onClick:()=>{const e=W();D(e)},iconTrailing:u.V,condensed:!0,semanticColor:"textBase",children:P.get("web-player.audiobooks.seeAllChapters")})})]})})]})};i(71756),i(45880);var pe=i(20200);const ve="ozUyDkHkApOdIonUD9uk",ke="EuZ8EbdSyqoC4iAeHW6x",ge="jFY3E6bnGNVyB3cq1dJ7",Ee="fFTsVhgMkg2qo2z_xyFA";var Se=i(25893);const ye=e=>{var t,i;let{cardHeaderText:n,cardBodyText:a,buttonText:s,buttonTarget:r}=e;return(0,w.jsxs)("div",{className:ve,children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:ke,children:[(0,w.jsx)(pe.W,{}),(0,w.jsx)(d.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:n})]}),(0,w.jsx)(d.D,{as:"span",variant:"viola",semanticColor:"textBase",children:a})]}),(0,w.jsx)("div",{className:ge,children:(0,w.jsx)(Se.r,{to:null!==(t=null===(i=(0,k.EC)(r))||void 0===i?void 0:i.toURLPath(!0))&&void 0!==t?t:"",children:(0,w.jsx)(O.D,{colorSet:"invertedLight",children:(0,w.jsx)("span",{className:Ee,children:s})})})})]})};var fe=i(32985);const Ne=e=>{let{episode:t,isPlaying:i,isPlayDisabled:n,isLoading:a,onCtaClick:s}=e;const o=(0,r.QT)();return(0,w.jsx)("div",{className:N,children:(0,w.jsx)(S.c,{id:S.P.musicPlusTalkEpisode,deferredLinkUri:(0,k.EC)(t.uri),triggerOptions:(0,M.M)(o),children:(0,w.jsx)(T.JM,{size:T.qE.lg,onClick:e=>{e.preventDefault(),e.stopPropagation(),t.type!==p.Wf.Episode?s():fe.y.set((()=>({triggerId:S.P.musicPlusTalkEpisode,triggerAction:null})))},isPlaying:i,disabled:n,isLoading:a})})})},Te=e=>{var t,i,s,l;let{episode:d,backgroundColor:_,show:p,uri:v}=e;const g=(0,r.QT)();(0,me.Hx)({visible:!0,backgroundColor:_}),(0,ue.j)((0,_e.mK)({episodeOrChapterName:d.name,showOrAudiobookName:p.name,type:"Podcast"}));const S=(0,n.s0)(),y=(0,n.TH)(),{playback:f}=(0,a.v9)((e=>({playback:e.playback}))),N=null==f?void 0:f.isBuffering,T=!(null==f||null===(t=f.current)||void 0===t||!t.paused),R=null==f||null===(i=f.current)||void 0===i?void 0:i.track_window,A=(null==R||null===(s=R.current_track)||void 0===s?void 0:s.uri)===(null==d?void 0:d.uri),b=(0,a.I0)();(0,h.useEffect)((()=>{window.LUX&&(window.LUX.label="Episode Page")}));const C=(0,h.useCallback)((e=>{b((0,E.t_)("episode-view",d,p,e))}),[b,d,p]),I=(0,h.useCallback)((e=>{const t=Math.floor(e)||0;C(t)}),[C]),L=(0,h.useCallback)((()=>{var e;const t=null==y?void 0:y.search,i=new URLSearchParams(t),n=1e3*Number(i.get("t")),a=null===(e=d.duration)||void 0===e?void 0:e.totalMilliseconds;n&&n>0&&a&&n<=a&&I(n)}),[d,I,null==y?void 0:y.search]),P=()=>{var e;const t=null!==(e=p.id)&&void 0!==e?e:"";return`/show/${(0,k.HB)(t)}`};(0,h.useEffect)((()=>{L()}),[]);const D=P(),O=A&&!T,F=!(null!==(l=d.playability)&&void 0!==l&&l.playable);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ce,{backgroundColor:_,episodeOrChapter:d,uri:v,PlayButton:(0,w.jsx)(Ne,{onCtaClick:C,episode:d,isPlaying:O,isPlayDisabled:F,isLoading:N}),showOrAudiobook:p}),(0,w.jsx)(K.X,{children:(0,w.jsxs)("div",{children:[d.contentInformation&&(0,w.jsx)(ye,{cardHeaderText:d.contentInformation.cardHeaderText,cardBodyText:d.contentInformation.cardBodyText,buttonText:d.contentInformation.buttonText,buttonTarget:d.contentInformation.buttonTarget}),d.description&&(0,w.jsx)(o.o,{content:d.description,onTimeStampClick:I,maxLines:2,enableTimestamps:!0}),(0,w.jsx)(V,{episodeOrChapter:d}),D&&(0,w.jsx)(m.rU,{to:D,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,w.jsx)(c.o,{onClick:()=>{const e=P();S(e)},iconTrailing:u.V,condensed:!0,semanticColor:"textBase",children:g.get("mwp.podcast.see.all.episodes")})})]})})]})};var Re=i(50586),Ae=i(9923),be=i(87097),Ce=i(30951);const Ie=()=>{var e,t,i;const{episodeId:r,userId:o}=(0,n.UO)(),l=(0,a.I0)(),{entities:d}=(0,a.v9)((e=>({entities:e.entities}))),c=r&&o?`spotify:user:${o}:episode:${r}`:`spotify:episode:${r}`;(0,h.useEffect)((()=>{l((0,E.gZ)(c)),l((0,Ae.dV)(c))}),[c,l]);const u=d.items[c],m=(0,s.wY)(u)?u:void 0;if(!m)return(0,w.jsx)(be.U,{});const _=m.showOrAudiobook.data,p=(0,s.Lc)(_)?_:null,{hex:v="#000000"}=null!==(e=null===(t=m.coverArt)||void 0===t||null===(i=t.extractedColors)||void 0===i?void 0:i.colorLight)&&void 0!==e?e:{},k=(0,s.Ey)(m)&&(0,s.Mc)(p),g=(0,s.v8)(m)&&(0,s.ck)(p);return(0,w.jsxs)(Re.X,{testId:"podcast-entity-view",children:[k&&(0,w.jsx)(he,{uri:c,backgroundColor:v,chapter:m,audiobook:p}),g&&(0,w.jsx)(Te,{uri:c,backgroundColor:v,episode:m,show:p}),(0,w.jsx)(Ce.P,{})]})}},26110:(e,t,i)=>{"use strict";i.d(t,{P:()=>W});i(71756);var n=i(33332),a=i(94138),s=i(50586),r=i(63700),o=i(61740),l=i(90668),d=i(98110),c=i(38185),u=i(24377),m=i(61911),_=i(32673),h=i(59496),p=i(49904),v=i(4248),k=i(19394),g=i(27169),E=i(30776),S=i(10340);const y="Eo2JiwOmXxKkuv2IAWcH",f="ButyLz3AwOH797xynMXV",N="HmPRco_MS_UTMwoXdeKS";function T(e){return"Track"===(null==e?void 0:e.__typename)}function R(e){return Boolean(e)}const A=e=>{var t,i,n,a,s,r;const o=((null==e||null===(t=e.albumOfTrack)||void 0===t||null===(i=t.coverArt)||void 0===i?void 0:i.sources)||[]).map((e=>{var t,i;return{url:e.url,height:null!==(t=e.height)&&void 0!==t?t:void 0,width:null!==(i=e.height)&&void 0!==i?i:void 0}})),l={name:null!==(n=null===(a=e.albumOfTrack)||void 0===a?void 0:a.name)&&void 0!==n?n:"",uri:null!==(s=null===(r=e.albumOfTrack)||void 0===r?void 0:r.uri)&&void 0!==s?s:"",images:o},d=e.artists.items.map((e=>({name:e.profile.name,uri:e.uri})));return{name:e.name,uri:e.uri,type:"track",is_playable:e.playability.playable,duration_ms:e.duration.totalMilliseconds,preview_url:e.previews&&e.previews.audioPreviews.items.length>0?e.previews.audioPreviews.items[0].url:"",id:e.id,images:o,artists:d,album:l}};var b=i(75714),C=i(75285),I=i(4637);const L=function(e,t,i){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1};if(!R(t))return[];return(null!==(n=t.items)&&void 0!==n?n:[]).map((e=>{var t;return null==e||null===(t=e.track)||void 0===t?void 0:t.data})).filter(T).map(((t,n)=>((t,n)=>{const s=t.name,r=function(e,t,i){return i?function(e,t,i){var n,a;return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1}).subtitleAsLink?t.artists.items.map((e=>({uri:e.uri,name:e.profile.name}))):t.artists&&i?t.artists.items.map((e=>e.profile.name)).join(e.getSeparator()):null!==(n=null===(a=t.artists.items[0])||void 0===a?void 0:a.profile.name)&&void 0!==n?n:""}(e,t,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1}):t.name}(e,t,i,a),o=A(t);return{index:n,rawTrack:o,isPlayable:t.playability.playable,uri:t.uri,images:o.images,album:o.album,artists:o.artists,title:s,subtitle:r}})(t,n)))},P=e=>{let{isAnonymous:t,isOnDemand:i,contextURI:n,currentTrackURI:a,onRowClick:s,initialTracks:r,shouldDisableRow:o,onContextMenuClick:l,nrTracks:d}=e;const{instance:c}=(0,h.useContext)(b.H),u=(0,S.QT)(),m=(0,h.useCallback)((async(e,t)=>{try{const n=await(null==c?void 0:c.getLikedTracks(e,t));return n?L(u,n,i):[]}catch{return[]}}),[u,i,c]),_=L(u,r,i),[y,N]=(0,h.useState)(d),T=()=>{N(y-1)};return(0,I.jsx)("div",{className:f,children:(0,I.jsx)(p.m,{tracks:_,renderRow:(e,r)=>{const{title:d,uri:c}=e,u=a===c,m="string"==typeof e.subtitle?e.subtitle:(0,k.OX)(e.subtitle||[]),_=t&&u?(0,I.jsx)(E.I,{fallback:(0,I.jsx)(v.U,{children:r+1})}):void 0;return(0,I.jsx)(v.o,{id:`track-${c}`,uri:c,"data-testid":"track-row",title:d,subtitle:m,disabled:o(r,e),isActiveRow:u,onClick:s(r,e),withNumber:r+1,activeElement:_,actions:[(0,I.jsx)(C.V,{uri:c,onLibraryUpdated:T}),(0,I.jsx)(g.d,{contextURI:n,onDemand:i,track:e,onContextMenuClick:l},`actions-${c}`)]})},nrTracks:y,fetchTracks:m,rowHeight:80})})};var D=i(55165),O=i(24156);var F=i(98593),w=i(13831),x=i(1246),M=i(37716),U=i(99730),j=i(41177);const B=()=>{const e=(0,S.QT)(),t=(0,j.s0)();return(0,I.jsxs)("div",{className:y,children:[(0,I.jsx)(u.D,{as:"h1",variant:"alto",paddingBottom:"0.75rem",children:e.get("mobile-web-player.LikedSongsEntityView.empty-state.title")}),(0,I.jsx)(u.D,{as:"h2",variant:"cello",weight:"book",semanticColor:"textSubdued",paddingBottom:"2rem",children:e.get("mobile-web-player.LikedSongsEntityView.empty-state.suggestion")}),(0,I.jsx)(U.D,{colorSet:"invertedLight",buttonSize:"lg",onClick:()=>t("/search/"),children:e.get("mobile-web-player.LikedSongsEntityView.empty-state.discover")})]})};var G=i(97425);const V=function(e,t,i){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1};if(!R(t))return[];return(null!==(n=t.items)&&void 0!==n?n:[]).map((e=>{var t;return null==e||null===(t=e.track)||void 0===t?void 0:t.data})).filter(T).map(((t,n)=>((t,n)=>{const s=t.name,r=function(e,t,i){return i?function(e,t,i){var n,a;return(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1}).subtitleAsLink?t.artists.items.map((e=>({uri:e.uri,name:e.profile.name}))):t.artists&&i?t.artists.items.map((e=>e.profile.name)).join(e.getSeparator()):null!==(n=null===(a=t.artists.items[0])||void 0===a?void 0:a.profile.name)&&void 0!==n?n:""}(e,t,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{subtitleAsLink:!1}):t.name}(e,t,i,a),o=A(t);return{index:n,rawTrack:o,isPlayable:t.playability.playable,uri:t.uri,images:o.images,album:o.album,artists:o.artists,title:s,subtitle:r}})(t,n)))};function Y(e){let{items:t}=e;const i=(0,S.QT)();return(0,I.jsx)("div",{className:N,children:(0,I.jsx)(G.q,{tracks:V(i,t,!1).slice(0,6).map((e=>{var t,i;return{title:null!==(t=null===(i=e.artists)||void 0===i?void 0:i[0].name)&&void 0!==t?t:"",subtitle:e.title}}))})})}var K=i(74578),H=function(e){return e.ALLOWED="ALLOWED",e.DISALLOWED="DISALLOWED",e.NOT_YET_KNOWN="NOT_YET_KNOWN",e}(H||{});const W=()=>{const e=(0,S.QT)();(0,K.Hx)({visible:!0,title:e.get("mobile-web-player.LikedSongsEntityView.title"),backgroundColor:c.god});const t=`spotify:user:${(0,o.v9)((e=>{var t,i;return null===(t=e.session.me)||void 0===t||null===(i=t.profile)||void 0===i?void 0:i.id}))}:collection`,i=(0,_.u)(t),p=(0,x.U)(),v=(0,M.u)(),k=(()=>{const{instance:e}=(0,h.useContext)(b.H),[t,i]=(0,h.useState)({totalLength:0});return(0,h.useEffect)((()=>{(async()=>{const n=await(null==e?void 0:e.getTracksMetadata());n&&n.totalLength!==t.totalLength&&i(n)})()}),[e,t]),t})(),g=(0,O.W)(),E=k.totalLength,{onContextMenuClick:y}=(0,F.a)(),f=(0,o.v9)((e=>{var t;return null===(t=e.playback.current)||void 0===t?void 0:t.context.uri})),N=(0,o.v9)((e=>{var i;return f===t&&!(null!==(i=e.playback.current)&&void 0!==i&&i.paused)})),[T,R]=(e=>{const{instance:t}=(0,h.useContext)(b.H),{offset:i,limit:n}=e,[a,s]=(0,h.useState)(!0),[r,o]=(0,h.useState)(null);return(0,h.useEffect)((()=>{(async()=>{s(!0);const e=await(null==t?void 0:t.getLikedTracks(i,n));e&&o(e),s(!1)})()}),[n,i,t]),[r,a]})({offset:0,limit:50}),A=(0,D.g0)({uri:t,isOnDemand:!0,playbackContextUri:f,referrer:g}),C=(0,o.v9)((e=>{var t,i;return null===(t=e.playback.current)||void 0===t||null===(i=t.track_window.current_track)||void 0===i?void 0:i.uri})),{onRowClick:L,shouldDisableRow:U}=(0,w.Y)(t,v,p,!1,C,g),j=E>0;let G;return G=i?H.ALLOWED:R?H.NOT_YET_KNOWN:H.DISALLOWED,(0,I.jsxs)(s.X,{children:[(0,I.jsxs)(n.g,{backgroundColor:c.god,children:[(0,I.jsx)(l.x,{children:e.get("mobile-web-player.LikedSongsEntityView.title")}),(0,I.jsx)(d.n,{children:j&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(r.Z,{children:(0,I.jsx)(u.D,{variant:"mesto",children:e.get("mobile-web-player.LikedSongsEntityView.song-count",E)})}),(0,I.jsx)(m.O,{onClick:A,isPlaying:N,disabled:0===E,isOnDemand:i})]})})]}),(0,I.jsxs)(a.X,{children:[j&&G===H.DISALLOWED&&(0,I.jsx)(Y,{items:T}),j&&G===H.ALLOWED&&(0,I.jsx)(P,{isAnonymous:!1,currentTrackURI:C,isOnDemand:!0,contextURI:t,onRowClick:L,shouldDisableRow:U,onContextMenuClick:y,nrTracks:E,initialTracks:T}),!j&&!R&&(0,I.jsx)(B,{})]})]})}},84023:(e,t,i)=>{"use strict";i.d(t,{iw:()=>pe});var n=i(87938),a=i(24377),s=i(17409),r=i(43090),o=i(10340),l=i(59496),d=i(61740),c=(i(71756),i(49904)),u=i(4248),m=i(27169),_=i(30776),h=i(52633),p=i(77645),v=i(75285),k=i(33660),g=i(86194),E=i(93341);const S=e=>null!=e&&e.sources?e.sources.map((e=>{var t,i;return{url:e.url,width:null!==(t=e.width)&&void 0!==t?t:void 0,height:null!==(i=e.height)&&void 0!==i?i:void 0}})):[],y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"Track"===e.__typename?((e,t)=>{var i,n,a,s,r,o,l;const d=null===(i=e.relinkingInformation)||void 0===i?void 0:i.linkedTrack,c=(0,g.Li)(d)?d:e,u=null!=c&&c.albumOfTrack?{name:c.name,uri:c.albumOfTrack.uri,images:[]}:void 0,m=null!==(n=null==c?void 0:c.artists.items.map((e=>({name:e.profile.name,uri:e.uri}))))&&void 0!==n?n:[];return{index:t,isPlayable:c.playability.playable,subtitle:m.map((e=>({uri:e.uri,name:e.name}))),title:c.name,uri:c.uri,images:S(null===(a=c.albumOfTrack)||void 0===a?void 0:a.coverArt),album:u,artists:m,rawTrack:{id:c.uri,is_playable:c.playability.playable,name:c.name,uri:c.uri,type:"track",preview_url:null!==(s=null===(r=c.previews)||void 0===r||null===(o=r.audioPreviews.items[0])||void 0===o?void 0:o.url)&&void 0!==s?s:"",images:S(null===(l=c.albumOfTrack)||void 0===l?void 0:l.coverArt),album:u,artists:m}}})(e,t):((e,t)=>{var i,n,a;const s=(0,E.sg)(e.podcastV2.data)?e.podcastV2.data:void 0;return{index:t,isPlayable:e.playability.playable,subtitle:[{uri:e.uri,name:null!==(i=null==s?void 0:s.name)&&void 0!==i?i:""}],title:e.name,uri:e.uri,images:S(null==e?void 0:e.coverArt),album:void 0,artists:void 0,rawTrack:{id:e.uri,is_playable:e.playability.playable,name:e.name,uri:e.uri,type:"episode",preview_url:null!==(n=null==e||null===(a=e.audioPreview)||void 0===a?void 0:a.url)&&void 0!==n?n:"",images:S(e.coverArt),album:void 0,artists:void 0}}})(e,t)};var f=i(47930);const N=e=>{var t;return null!==(t=null==e?void 0:e.reduce(((e,t)=>(((0,g.lU)(null==t?void 0:t.itemV2)&&(0,g.Li)(null==t?void 0:t.itemV2.data)&&null!=t&&t.itemV2.data||(0,g.Us)(null==t?void 0:t.itemV2)&&(0,g.v8)(null==t?void 0:t.itemV2.data)&&null!=t&&t.itemV2.data)&&e.push(t.itemV2.data),e)),[]))&&void 0!==t?t:[]};var T=i(4637);const R=e=>{let{nrTracks:t,onRowClick:i,onContextMenuClick:n,shouldDisableRow:a,playlistUri:s}=e;const r=(0,l.useContext)(o.OO),E=(0,l.useContext)(k.Ax),S=(0,d.v9)((e=>e.session.isAnonymous)),R=(0,d.v9)((e=>{var t,i;return null===(t=e.playback.current)||void 0===t||null===(i=t.track_window.current_track)||void 0===i?void 0:i.uri})),A=(0,d.v9)((e=>{var t;return null===(t=e.playback.current)||void 0===t?void 0:t.context.uri})),[b,C]=(0,l.useState)([]),I=(0,p.E)({entities:b,skipCheck:!b.length}),L=(0,d.v9)((e=>{const t=e.entities.items[s];if(t&&(0,h.i)(t)&&(0,g.R9)(t.content))return N(t.content.items).map(y)})),P=(0,l.useCallback)((async(e,t)=>{C([]);const i=await(async(e,t,i)=>{let{limit:n,offset:a}=i;try{var s;const i=await e.request(f.pr,{uri:t,limit:n,offset:a}),o=null==i||null===(s=i.data)||void 0===s?void 0:s.playlistV2;var r;if("Playlist"===(null==o?void 0:o.__typename)&&(0,g.R9)(o.content))return N(null===(r=o.content)||void 0===r?void 0:r.items)}catch(o){}return[]})(E,s,{offset:e,limit:t});return C(i.map((e=>({uri:e.uri})))),i.map(y)}),[E,s]);return(0,T.jsx)(c.m,{tracks:S?L:void 0,renderRow:(e,t)=>{const o="string"==typeof e.subtitle?e.subtitle:e.subtitle.map((e=>e.name)).join(r.getSeparator()),l=void 0!==A&&A===s,d=void 0!==R&&e.uri===R,c=l&&d,h=I.length?(0,T.jsx)(v.V,{uri:e.uri}):null;return(0,T.jsx)(u.o,{id:`track-${e.uri}-${t}`,uri:e.uri,"data-testid":"track-row",title:e.title,subtitle:o,disabled:a(t,e),isActiveRow:c,onClick:i(t,e),withNumber:t+1,activeElement:S&&c?(0,T.jsx)(_.I,{fallback:(0,T.jsx)(u.U,{children:t+1})}):null,actions:[h,(0,T.jsx)(m.d,{contextURI:s,onDemand:!0,track:e,onContextMenuClick:n},`actions-${e.uri}`)]})},nrTracks:t,fetchTracks:P,limit:25,rowHeight:80})};var A=i(13831),b=i(98593),C=i(42198),I=i(9923),L=i(67121),P=i(57294);const D=e=>{let{children:t}=e;return t?(0,T.jsx)("div",{className:P.Z.description,children:t}):null};var O=i(33332),F=i(98110),w=i(40700),x=i(94138),M=i(84136),U=i(50586),j=i(87097),B=i(97425);const G="Zlw_JpvCycfWtpw7K5Oq",V="cWtv1Xy3HnTGsu4VB7YR",Y="QbLyYUzRpNooZWSygxYt";function K(e){let{items:t}=e;return(0,T.jsx)("div",{className:V,children:(0,T.jsx)(B.q,{tracks:t.map(y).slice(0,6).map((e=>{var t;return{title:"object"==typeof e.subtitle?null===(t=e.subtitle[0])||void 0===t?void 0:t.name:"",subtitle:e.title}}))})})}var H=i(8582),W=i(55165),q=i(30951),Q=i(57325),$=i(32673),z=i(37716),Z=i(35352),X=i(78257),J=i(63700),ee=i(23162),te=i(61911),ie=i(46931),ne=i(96730),ae=i(73135),se=i(25893),re=i(54352),oe=i(24288);const le=e=>{let{name:t,uri:i,images:n}=e;return(0,T.jsxs)(a.D,{as:"div",variant:"mesto",className:G,"data-testid":"entity-owner",children:[(0,T.jsx)(oe.h,{images:null!=n?n:[],fallback:(0,T.jsx)(re.f,{iconSize:24})}),(0,T.jsx)(se.r,{to:i,children:t})]})};var de=i(69773),ce=i(8632),ue=i(74578),me=i(41177),_e=i(59272);let he=function(e){return e.ALLOWED="ALLOWED",e.DISALLOWED="DISALLOWED",e.NOT_YET_KNOWN="NOT_YET_KNOWN",e}({});const pe=()=>{var e,t,i,c,u,m,_,p,v;const k=(0,o.QT)(),{playlistId:E=""}=(0,me.UO)(),S=(0,_e.FW)(E).toURI();(0,l.useEffect)((()=>{window.LUX&&(window.LUX.label="Playlist Page")}));const y=(0,d.I0)(),{entity:f,isBuffering:P,currentUserUri:B,activeContextUri:G,isFreeOnDemandPlaylist:V,currentTrackURI:se}=(0,d.v9)((e=>{var t,i,n,a,s;return{entity:e.entities.items[S],isBuffering:e.playback.isBuffering,currentUserUri:null===(t=e.session.me)||void 0===t||null===(i=t.profile)||void 0===i?void 0:i.uri,activeContextUri:null===(n=e.playback.current)||void 0===n?void 0:n.context.uri,currentTrackURI:null===(a=e.playback.current)||void 0===a||null===(s=a.track_window.current_track)||void 0===s?void 0:s.uri,isFreeOnDemandPlaylist:(0,C.T)(e.onDemandPlaylists,S)}})),re=(0,h.i)(f)?f:void 0,oe=(0,g.R9)(null==re?void 0:re.content)?null==re?void 0:re.content:void 0,pe=!!re,ve=(0,ne.R)(null==re||null===(e=re.images)||void 0===e?void 0:e.items.map((e=>e.sources[0])),300),ke=(0,d.v9)((e=>(0,L.Q)(e,ve))),ge=(0,d.v9)((e=>ve&&Boolean(e.colorExtraction.colors[ve]))),Ee=`rgb(${ke})`;(0,ue.Hx)({visible:!0,title:null==re?void 0:re.name,backgroundColor:ge?Ee:void 0}),(0,l.useEffect)((()=>{ve&&!ge&&y((0,H.Fd)({url:ve}))}),[y,ve,ge]),(0,l.useEffect)((()=>{pe||y((0,I.$p)(S))}),[y,S,pe]);const Se=(0,$.u)(S),ye=N(null==oe?void 0:oe.items),fe=(0,d.v9)((e=>{var t;return null===(t=e.onDemandPlaylists)||void 0===t?void 0:t.fetched}));let Ne;(0,l.useEffect)((()=>{y((0,Q.Vd)())}),[y]),Ne=Se?he.ALLOWED:fe?he.DISALLOWED:he.NOT_YET_KNOWN;const Te=(0,z.u)(),Re=(0,d.v9)((e=>{var t;return G===S&&!(null!==(t=e.playback.current)&&void 0!==t&&t.paused)})),{onContextMenuClick:Ae,handleHeaderMenuClick:be}=(0,b.a)(),Ce=(0,d.v9)((e=>e.session.referrer)),{onRowClick:Ie,shouldDisableRow:Le}=(0,A.Y)(S,Te,P,V,se,Ce),Pe=(0,W.g0)({uri:S,isOnDemand:V,playbackContextUri:G,referrer:Ce,audioFileMetadataResolver:()=>(0,W.Vj)(Te,ye[0])}),De=(0,g.NU)(null==re?void 0:re.ownerV2.data)?null==re?void 0:re.ownerV2.data:void 0,Oe=De&&(null==De?void 0:De.uri)===B;if((0,de.j)((0,ce.T5)({playlistName:null==re?void 0:re.name,userName:null==De?void 0:De.name})),!re)return(0,T.jsx)(j.U,{});const Fe=function(e,t){const i=e.reduce(((e,t)=>{var i;return e+(null!==(i=t.duration.totalMilliseconds)&&void 0!==i?i:0)}),0);return{milliseconds:e.length>0?i/e.length*t:0,isEstimate:e.length<t}}(ye,null!==(t=null==oe?void 0:oe.totalCount)&&void 0!==t?t:0);return(0,T.jsxs)(U.X,{testId:"playlist-entity-view",children:[(0,T.jsxs)(O.g,{backgroundColor:Ee,children:[(0,T.jsx)(w.O,{images:null===(i=re.images.items[0])||void 0===i?void 0:i.sources,fallback:(0,T.jsx)(n.U,{iconSize:64}),fadeImageBetween:[50,175]}),(0,T.jsx)(M.x,{children:re.name}),(0,T.jsx)(D,{children:re.description&&(0,T.jsx)(ae.w,{html:re.description,onTimeStampClick:()=>{}})}),(0,T.jsx)(le,{name:null!==(c=null==De?void 0:De.name)&&void 0!==c?c:"",uri:null!==(u=null==De?void 0:De.uri)&&void 0!==u?u:"",images:null==De||null===(m=De.avatar)||void 0===m?void 0:m.sources}),(0,T.jsxs)(F.n,{children:[(0,T.jsxs)(J.Z,{children:[(null!==(_=null==re?void 0:re.followers)&&void 0!==_?_:0)>0&&(0,T.jsx)(a.D,{variant:"mesto",children:k.get("likes",null!==(p=null==re?void 0:re.followers)&&void 0!==p?p:0)}),(0,T.jsx)(ee.g,{durationMs:Fe.milliseconds,isEstimate:Fe.isEstimate})]}),(0,T.jsxs)(X.n,{children:[!Oe&&(0,T.jsx)(ie.y,{uri:S}),(0,T.jsx)(Z.F,{uri:S,shareTitle:re.name,shareText:re.name}),(0,T.jsx)(s.o,{iconOnly:r.F,"aria-label":k.get("more"),onClick:()=>{var e,t;be({uri:S,header:{title:re.name,backgroundImage:null===(e=re.images.items[0])||void 0===e||null===(t=e.sources)||void 0===t?void 0:t[0].url}})}})]}),(0,T.jsx)(te.O,{onClick:Pe,isPlaying:Re,disabled:0===(null==oe?void 0:oe.totalCount),isOnDemand:Se})]})]}),(0,T.jsx)(x.X,{children:(0,T.jsxs)("div",{className:Y,children:[Ne===he.DISALLOWED&&(0,T.jsx)(K,{items:ye}),Ne===he.ALLOWED&&(0,T.jsx)(R,{nrTracks:null!==(v=null==oe?void 0:oe.totalCount)&&void 0!==v?v:0,playlistUri:re.uri,onContextMenuClick:Ae,onRowClick:Ie,shouldDisableRow:Le})]})}),(0,T.jsx)(q.P,{})]})}},99540:(e,t,i)=>{"use strict";i.d(t,{D:()=>mi});i(71756);var n=i(61339),a=i(17409),s=i(43090),r=i(46931),o=i(10340),l=i(25893),d=i(69038),c=i(17249);const u=e=>(e||[]).map((e=>{var t,i;let{track:n}=e;return{artistNames:n.artists.items.map((e=>e.profile.name)).join(c.ag.getSeparator()),duration:n.duration.totalMilliseconds,fullTrackForAnonymousPlayback:n,id:n.id,images:null===(t=n.albumOfTrack)||void 0===t||null===(i=t.coverArt)||void 0===i?void 0:i.sources,name:n.name,playcount:n.playcount,uri:n.uri}})),m=e=>(e||[]).map((e=>{var t,i;return{artistNames:e.artists.items.map((e=>e.profile.name)).join(c.ag.getSeparator()),duration:null,fullTrackForAnonymousPlayback:e,id:e.id,images:null===(t=e.albumOfTrack)||void 0===t||null===(i=t.coverArt)||void 0===i?void 0:i.sources,name:e.name,playcount:null,uri:e.uri}})),_=e=>(e||[]).map((e=>{var t;return{coverArt:e.coverArt,name:e.name,uri:e.uri,id:e.id,type:e.type,year:null===(t=e.date)||void 0===t?void 0:t.year}})),h=e=>{const t=e?e.reduce(((e,t)=>(e.push(t.releases.items[0]),e)),[]):[];return _(t)};var p=i(59496),v=i(59272);const k="o2TlnuNKxRO5RnB9BpHB",g="q0Ke_aAvTcc4dO4wCHQt",E="UlKUfS_GcROZmofuafOW",S="I5LORTI1u3A6VoUvRCBf",y="TS85Qkpioa31wR0p4kzT",f="yL1DLXBc05CR_ACv_NhA",N="k5kRkUyoz9znqg_SGOVQ";i(58846);i(36882);i(36406);var T=i(1144),R=i(62823),A=i(84875),b=i.n(A),C=i(30730),I=i(83474),L=i(90321),P=i(24377),D=i(41177),O=i(4637);let F=function(e){return e.SMALL="small",e.LARGE="large",e}({});const w=e=>{let{art:t,disabled:i=!1,LinkComponent:n,name:a,size:s=F.SMALL,type:r,uri:o}=e;const l=t?[t]:[],d=s===F.SMALL?(0,R.R)(r):function(e){switch(e){case T.n.SINGLE:return c.ag.get("track-page.from-the-single");case T.n.EP:return c.ag.get("track-page.from-the-ep");case T.n.COMPILATION:return c.ag.get("track-page.from-the-compilation");case T.n.ALBUM:default:return c.ag.get("track-page.from-the-album")}}(r),u=(0,D.s0)();return(0,O.jsxs)("div",{className:b()(k,{[E]:s===F.SMALL,[g]:i}),children:[(0,O.jsx)("div",{className:S,children:(0,O.jsx)(C.O,{images:l,size:L.m$.SIZE_80,title:a,type:I.p.ALBUM})}),(0,O.jsxs)("div",{className:y,children:[(0,O.jsx)(P.D,{variant:s===F.SMALL?"mestoBold":"finale",children:d}),(0,O.jsx)(n,{to:o,children:(0,O.jsx)(P.D,{as:"div",className:f,variant:"balladBold",dir:"auto",children:a})})]}),(0,O.jsx)("div",{onClick:()=>{u((0,v.EC)(o).toURLPath(!0))},className:N})]})};var x=i(39106),M=i(66232);const U="Xu9oKFxY1wPZ7btr99dD",j="h1pJzziAIYwO154bbEtG",B="oFwNGhN9OJGa58m3YeiN",G="IUiu3OTca8_mFmhdvWuu",V="QnFhIbZMIbj_derd2rrQ",Y="C08NFwm4eeeYploW7BoQ",K="ilG1KBl5YrTvRzekL6gB",H="KTLC51kEESUNYgIAqtZb",W="xnjLjPiqkb2fW3Z_s6Ut";var q=i(95497);const Q=e=>{let{size:t=32}=e;return(0,O.jsx)(q.g,{iconSize:t,title:c.ag.get("download.available-offline"),semanticColor:"textBrightAccent"})};var $=i(90902),z=i(6336);const Z=e=>{const{artists:t,contentRating:i,duration:n,name:a}=e,s=(0,o.QT)(),{badges:r,hasBadges:l}=(0,M.r)({contentRating:i});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:B,children:[(0,O.jsxs)("div",{className:G,children:[l&&(0,O.jsxs)(P.D,{className:V,variant:"ballad",semanticColor:"textSubdued",children:[r.download&&(0,O.jsx)(Q,{size:16}),r.explicit&&(0,O.jsx)(z.N,{}),r.nineteen&&(0,O.jsx)($.X,{size:16})]}),(0,O.jsx)(P.D,{as:"div",variant:"ballad",className:K,dir:"auto",children:a})]}),(0,O.jsx)(P.D,{dir:"auto",as:"div",variant:"mesto",className:H,children:t.items.map(((e,t)=>[t>0&&s.getSeparator(),e.profile.name]))})]}),(0,O.jsx)(P.D,{variant:"mesto",className:W,children:(0,x.m)(n)})]})},X=e=>{const{items:t}=e;if(t.length<1)return null;return(0,O.jsx)("div",{className:U,children:t.map((e=>(e=>{var t;return(0,O.jsx)(l.r,{to:e.track.uri,className:Y,children:(0,O.jsx)("div",{className:j,children:(0,O.jsx)(Z,{artists:e.track.artists,contentRating:null===(t=e.track.contentRating)||void 0===t?void 0:t.label,duration:e.track.duration.totalMilliseconds,name:e.track.name,uri:e.track.uri},e.track.id)},e.track.id)},e.track.id)})(e)))})};var J=i(2778),ee=i(61740),te=i(98909);const ie="zXjUB0VB3r8mbkfW6cui",ne="JGAZxBxameb73fdUfx_m",ae="krftXi4GcnLW3YCXOCCf",se="j4ErIGpMBuACtsfnsx3Z",re=e=>{let{children:t}=e;return(0,O.jsx)("div",{className:ie,children:t})};var oe=i(96730),le=i(44888),de=i(87824),ce=i(38674),ue=i(24511),me=i(81711),_e=i(8701);const he=(e,t)=>(0,_e.vI)(me.k.IlrTrackCanonicalTop,t)||e===de.Zn.CANONICAL_TOP_POSITION,pe=(e,t)=>(0,_e.vI)(me.k.IlrTrackCanonicalBottom,t)||e===de.Zn.CANONICAL_BOTTOM_POSITION,ve=(e,t)=>(0,_e.vI)(me.k.IlrTrackOrganicTop,t)||e===de.Zn.ORGANIC_TOP_POSITION,ke=(e,t)=>(0,_e.vI)(me.k.IlrTrackOrganicBottom,t)||e===de.Zn.ORGANIC_BOTTOM_POSITION,ge={[de.Zn.DEFAULT]:void 0,[de.Zn.CONTROL]:void 0,[de.Zn.CANONICAL_TOP_POSITION]:ue.JI.ContentOnly,[de.Zn.CANONICAL_BOTTOM_POSITION]:ue.JI.ContentOnly,[de.Zn.ORGANIC_TOP_POSITION]:ue.JI.OrganicTraffic,[de.Zn.ORGANIC_BOTTOM_POSITION]:ue.JI.OrganicTraffic},Ee="v31oEQQthIBTrzaor91k",Se="QsF_2ghagKvtOMlCKmlg",ye="VVipB_gKNhrobbBulY2N",fe="nZ6SlvHDIgZshXAoDgvI",Ne="fp8WSzkgAOp6pQcVcVjL",Te="ul8VLEzwyq253mCBVlX0",Re="SFL_8OScayNetZYtCrnW",Ae="OqlDFP1v7o3_liIvD2Lr";var be=i(38185);const Ce=e=>{let{name:t}=e;return(0,O.jsx)(P.D,{className:Re,variant:"balladBold",paddingBottom:be.hM$,children:t})},Ie=e=>{let{playcount:t}=e;const i=(0,o.QT)();return(0,O.jsx)(P.D,{variant:"finale",className:Ae,children:i.formatNumber(parseInt(t,10))})},Le=e=>{let{artistNames:t}=e;return(0,O.jsx)(P.D,{variant:"finale",className:Ae,children:t})},Pe=e=>{let{artistNames:t,uri:i,name:n,playcount:a}=e;return(0,O.jsx)("div",{className:Ne,children:(0,O.jsxs)(l.r,{to:i,children:[(0,O.jsx)(Ce,{name:n}),a&&(0,O.jsx)(Ie,{playcount:a}),t&&(0,O.jsx)(Le,{artistNames:t})]})})};var De=i(55126);const Oe=e=>{var t;let{uri:i,contextUri:n,images:a,name:s}=e;return(0,O.jsx)(De.z,{uri:i,contextUri:n,metadata:{title:s,subtitle:"",image:(null===(t=(a||[]).find((e=>64===e.width)))||void 0===t?void 0:t.url)||""}})};var Fe=i(32673),we=i(76490),xe=i(56143),Me=i(38331),Ue=i(93855);const je=e=>{let{fullTrackForAnonymousPlayback:t,name:i,images:n,uri:a}=e;const{playbackContextUri:s}=(0,ee.v9)((e=>{var t,i;return{playbackContextUri:null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.context.uri}}),ee.wU),r=(0,ee.v9)((e=>{var t,i;return{isAnonymous:null===(t=e.session)||void 0===t?void 0:t.isAnonymous,referrer:null===(i=e.session)||void 0===i?void 0:i.referrer}}),ee.wU),o=(0,Fe.u)(a),l=a===s,d=(0,ee.v9)((e=>{var t,i;return null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.paused})),c=((e,t,i,n,a,s)=>{const r=(0,ee.I0)();return async()=>{if(n===e)return void r((0,Me.Xh)());const o=!i;let l;t&&s&&(l=(0,Ue.pV)(s));const d={shuffle:o,playOrigin:{referrerIdentifier:a}},c=(0,Me.K$)(e,null,d,void 0,l);r(c)}})(a,r.isAnonymous,o,s,r.referrer,t);return(0,O.jsxs)("div",{className:fe,children:[(0,O.jsx)(C.O,{images:n,size:L.m$.SIZE_56,title:i,type:I.p.ALBUM}),o&&(0,O.jsx)("div",{className:Te,children:(0,O.jsx)(we.f,{version:xe.ul.transparent,size:"sm",isPlaying:l&&!d,onClick:c})})]})},Be=e=>{const{contextUri:t,fullTrackForAnonymousPlayback:i,images:n,name:a,playcount:s,uri:r}=e;return(0,O.jsxs)("div",{className:Se,children:[(0,O.jsxs)("div",{className:ye,children:[(0,O.jsx)(je,{fullTrackForAnonymousPlayback:i,name:a,images:n,uri:r}),(0,O.jsx)(Pe,{uri:r,name:a,playcount:s})]}),(0,O.jsx)(Oe,{uri:r,contextUri:t,images:n,name:a})]})},Ge=e=>{const{contextUri:t,items:i,title:n}=e;return(0,O.jsxs)("div",{"data-testid":"popular-artist-tracks",children:[(0,O.jsx)(P.D,{as:"h2",variant:"cello",className:Ee,dir:"auto",children:n}),i.map((e=>(0,O.jsx)(Be,{contextUri:t,fullTrackForAnonymousPlayback:e.fullTrackForAnonymousPlayback,images:e.images,name:e.name,playcount:e.playcount,uri:e.uri},e.id)))]})},Ve=e=>{const{artistNames:t,fullTrackForAnonymousPlayback:i,images:n,name:a,uri:s}=e;return(0,O.jsx)("div",{className:Se,children:(0,O.jsxs)("div",{className:ye,children:[(0,O.jsx)(je,{fullTrackForAnonymousPlayback:i,name:a,images:n,uri:s}),(0,O.jsx)(Pe,{uri:s,name:a,artistNames:t})]})})},Ye=e=>{const{items:t,title:i}=e;return(0,O.jsxs)("div",{"data-testid":"track-internal-link-recommender",children:[(0,O.jsx)(P.D,{as:"h2",variant:"cello",className:Ee,dir:"auto",children:i}),t.map((e=>(0,O.jsx)(Ve,{artistNames:e.artistNames,fullTrackForAnonymousPlayback:e.fullTrackForAnonymousPlayback,images:e.images,name:e.name,uri:e.uri},e.id)))]})};var Ke=i(42214),He=i(75543);const We=e=>{var t,i,n,s,r,c,v;let{artistName:k,popularAlbums:g,uri:E,track:S}=e;const y=(0,o.QT)(),f=(0,D.TH)(),N=S.albumOfTrack,T=null===(t=S.albumOfTrack)||void 0===t?void 0:t.coverArt,R=S.firstArtist.items[0],A=(0,ee.I0)(),C=(0,p.useCallback)((()=>A((0,te.sd)(E))),[A,E]),I=(0,ee.v9)((e=>e.richEntities.trackArtists.data)),L=(0,ee.v9)((e=>{var t;return null===(t=e.richEntities.seoExperiment)||void 0===t?void 0:t.track})),F=(0,ce.W6)(de.YS),{data:x,uri:M,status:U}=(0,ee.v9)((e=>e.internalLinkRecommender.track)),j=U===He.g.LOADED,B=ge[F];(0,p.useEffect)((()=>{void 0!==M&&M!==E&&B&&A((0,Ke.ob)(E,B))}),[A,B,M,E]);const G=null==R||null===(i=R.discography)||void 0===i||null===(n=i.singles)||void 0===n?void 0:n.items,V=(0,p.useCallback)((()=>h(G)),[G]),Y=null==R||null===(s=R.discography)||void 0===s||null===(r=s.popularReleasesAlbums)||void 0===r?void 0:r.items,K=(0,p.useCallback)((()=>_(Y)),[Y]),H=null==R||null===(c=R.discography)||void 0===c||null===(v=c.topTracks)||void 0===v?void 0:v.items,W=(0,p.useCallback)((()=>u(H)),[H]),[q,Q]=(0,p.useState)(!1),$=(0,p.useCallback)((()=>{Q(!q)}),[q]),z=(0,le.xU)(L||{},(null==S?void 0:S.id)||"")&&I,Z=z&&I.otherArtists.items.length>5;return(0,p.useEffect)((()=>{C()}),[C,E]),(0,O.jsxs)(O.Fragment,{children:[j&&(0,O.jsxs)(O.Fragment,{children:[he(F,f)&&(0,O.jsx)("div",{"data-testid":"canonical-pool-top",children:(0,O.jsx)(Ye,{items:m(x),title:y.get("internal-link-recommender.recommended-based-on-this-song")})}),ve(F,f)&&(0,O.jsx)("div",{"data-testid":"organic-pool-top",children:(0,O.jsx)(Ye,{items:m(x),title:y.get("internal-link-recommender.recommended-based-on-this-song")})})]}),H&&H.length>0&&(0,O.jsx)(re,{children:(0,O.jsx)(Ge,{items:W(),title:y.get("rich-page.popular-tracks-by",{artist:k}),contextUri:E})}),Y&&Y.length>0&&(0,O.jsx)(re,{children:(0,O.jsx)(d.P,{title:y.get("track-page.popular-releases-by-artist",{artist:k}),children:K().map((e=>{var t,i,n;return(0,O.jsx)(J.rf,{uri:null!==(t=e.uri)&&void 0!==t?t:"",sources:null===(i=e.coverArt)||void 0===i?void 0:i.sources,name:null!==(n=e.name)&&void 0!==n?n:"",type:e.type,year:e.year},e.uri)}))})}),g&&g.length>0&&(0,O.jsx)(re,{children:(0,O.jsx)(d.P,{title:y.get("track-page.popular-albums-by-artist",{artist:k}),children:g.map((e=>{var t,i,n;return(0,O.jsx)(J.rf,{uri:null!==(t=e.uri)&&void 0!==t?t:"",sources:null===(i=e.coverArt)||void 0===i?void 0:i.sources,name:null!==(n=e.name)&&void 0!==n?n:"",type:e.type,year:e.year},e.uri)}))})}),G&&G.length>0&&(0,O.jsx)(re,{children:(0,O.jsx)(d.P,{title:y.get("track-page.popular-singles-and-eps-by-artist",{artist:k}),children:V().map((e=>{var t,i,n;return(0,O.jsx)(J.rf,{uri:null!==(t=e.uri)&&void 0!==t?t:"",sources:null===(i=e.coverArt)||void 0===i?void 0:i.sources,name:null!==(n=e.name)&&void 0!==n?n:"",type:e.type,year:e.year},e.uri)}))})}),z&&I.otherArtists.items.map(((e,t)=>{var i;return(0,O.jsx)("div",{className:b()({[ne]:t>4,[ae]:q&&t>4}),children:(0,O.jsx)(re,{children:(0,O.jsx)(d.P,{title:y.get("track-page.popular-releases-by-artist",{artist:e.profile.name}),listRowHeaderProps:{title:e.profile.name,pretitle:y.get("artist-page.popular"),media:(0,oe.R)(null===(i=e.visuals.avatarImage)||void 0===i?void 0:i.sources,48)||""},children:e.discography.popularReleasesAlbums.items.map((e=>{var t,i,n;return(0,O.jsx)(J.rf,{uri:null!==(t=e.uri)&&void 0!==t?t:"",sources:null===(i=e.coverArt)||void 0===i?void 0:i.sources,name:null!==(n=e.name)&&void 0!==n?n:"",type:e.type,year:e.date?e.date.year:void 0},e.uri)}))})})})})),Z&&(0,O.jsx)(a.o,{onClick:$,className:se,children:(0,O.jsx)(P.D,{as:"h2",variant:"violaBold",children:q?y.get("show_less"):y.get("mwp.search.artists.all")})}),z&&(0,O.jsx)(re,{children:(0,O.jsx)(d.P,{title:y.get("artist-page.fansalsolike"),children:I.firstArtist.items[0].relatedContent.relatedArtists.items.map((e=>{var t;return(0,O.jsx)(J.IT,{name:e.profile.name,uri:e.uri,sources:null===(t=e.visuals.avatarImage)||void 0===t?void 0:t.sources},e.uri)}))})}),N&&(0,O.jsxs)(re,{children:[(0,O.jsx)(w,{art:T?T.sources[0]:void 0,disabled:!N.playability.playable,LinkComponent:l.r,name:N.name,type:N.type,uri:N.uri}),(0,O.jsx)(X,{items:N.tracks.items})]})]})};var qe=i(55165),Qe=i(30951),$e=i(97871),ze=i(71238),Ze=i(26721),Xe=i(1754),Je=i(6129);const et=e=>{let{category:t,action:i,remoteConfigProperty:n,defaultVariant:a,label:s,context:r,country:o,spt:l=!1,isAnonymous:d=!1,isFirstRender:c,setIsFirstRender:u}=e;const m=(0,ce.W6)(n),_=(0,Je.Qs)((()=>{const e={category:t,action:i,variant:null!=a?a:m,label:s,os:(0,Ze.y)(),...r&&{context:r},...o&&{country:o},...l&&{sp_t:(0,Xe.vQ)("sp_t")}};return d?(0,$e.k)(e):(0,ze.x)(e)}));(0,p.useEffect)((()=>{m&&s&&c&&(_(),u&&u(!1))}),[m,s,_,c,u])};var tt=i(40644),it=i(92901),nt=i(24156),at=i(9923);const st="T1nqQ4HEh3heHy4RCCKa",rt="L8zjshPVgUMXyZR4FtOk",ot="YMn1FWcFmOz9osBrNvhF",lt="Inbyq3TnvKDOJtcKFTDQ",dt="lWk5se4WETUOJwaEb8D6",ct="i8DyQbWCmDV_8N5XGJQT",ut="t5WPFlGTY6GCd9UOFfLu",mt="AGQ3wRyMVK1odq860qnT",_t="ZX_r7uZgPgssaUplfpxT",ht="qrqctaPu2XBpxsw23nPX",pt="XnWidTagai3nQwMPxIMF";var vt=i(64),kt=i(76022);let gt=function(e){return e.SMALL="small",e.LARGE="large",e}({});const Et=e=>{const{disabled:t,images:i,LinkComponent:n,name:a,size:s,uri:r,enableI18nRoutes:o,enableI18nAdditionalPages:l}=e,d=s===gt.SMALL,u=(0,D.s0)(),m=(0,v.EC)(r),_=null==m?void 0:m.type,h=c.ag.getUrlLocale(),p=(0,vt.S9)({localeFeatureFlag:o,entityFeatureFlag:l,urlLocale:h,entity:_,type:"link"});return(0,O.jsxs)("div",{className:b()(rt,{[ot]:t}),"data-testid":"track-artist-link-card",children:[(0,O.jsx)(C.O,{shape:C.K.CIRCLE,images:i,size:L.m$.SIZE_80,title:a,type:I.p.ARTIST}),(0,O.jsxs)("div",{className:b()(dt,{[ct]:d}),children:[(0,O.jsx)(P.D,{variant:"mestoBold",className:lt,children:c.ag.get("card.tag.artist")}),(0,O.jsx)(n,{to:r,children:(0,O.jsx)(P.D,{as:"div",dir:"ltr",className:ut,variant:"balladBold",children:a})})]}),(0,O.jsx)("div",{onClick:()=>{const e=null==m?void 0:m.toURL(`/${kt.F0}${h}/`);if(m){const t=p?e:m.toURLPath(!0);u(t)}},className:mt})]})},St=e=>{let{size:t=gt.LARGE,disabled:i=!1,enableI18nRoutes:n,enableI18nAdditionalPages:s,...r}=e;const[o,l]=(0,p.useState)(!1),d=(0,p.useCallback)((()=>{l(!o)}),[o]),u=r.artists;return(0,O.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,O.jsx)("div",{className:st,children:u.map(((e,a)=>(0,O.jsx)("div",{className:b()({[ht]:o&&a>5,[_t]:a>5}),children:(0,O.jsx)(Et,{name:e.name,uri:e.uri,images:e.images,size:t,LinkComponent:r.LinkComponent,disabled:i,enableI18nRoutes:n,enableI18nAdditionalPages:s},e.id)},`${e.uri}-${a}`)))}),u.length>6&&(0,O.jsx)(a.o,{onClick:d,className:pt,children:(0,O.jsx)(P.D,{as:"p",variant:"violaBold",children:o?c.ag.get("show_less"):c.ag.get("mwp.search.artists.all")})})]})};var yt=i(97425),ft=i(35352),Nt=i(78257),Tt=i(33332),Rt=i(98110),At=i(40700),bt=i(94138),Ct=i(61911),It=i(84136),Lt=i(50586),Pt=i(87097),Dt=i(30475),Ot=i(63700);const Ft="z0LHX2yZ2wBi7LCow2r6",wt="oMGvDCVLleqfARo515oS",xt="cqbTNUwVGezBUcaLf0QQ",Mt="GAVvMHSdqvBQDQ2YgMYD",Ut="qqRdT92va8wXaGb16W4F",jt=e=>{let{albumName:t,duration:i,year:n}=e;return(0,O.jsx)("div",{className:Ft,children:(0,O.jsxs)(Ot.Z,{children:[t&&(0,O.jsx)(P.D,{variant:"mesto",children:t}),!!n&&(0,O.jsx)(P.D,{variant:"mesto",children:n}),(0,O.jsx)(P.D,{variant:"mesto",children:(0,x.m)(i)})]})})};var Bt=i(58839);const Gt=()=>(0,ee.v9)((e=>e.lyrics.status))===Bt.oB.LOADED;var Vt=i(58069),Yt=i(4370);const Kt=e=>{let{copyrights:t}=e;const i=(0,tt.g)(),n=Gt();return(0,O.jsxs)("div",{className:Ut,children:[(0,O.jsx)("div",{className:Mt,children:(0,O.jsx)(Vt.k,{copyrights:t})}),!i&&n&&(0,O.jsx)(Yt.c,{})]})},Ht="tOeeG4Y1y6QvrTbRjwCN",Wt="GgLaitFf8OIIa5BRzqSD",qt="yhF7Ere4CYzTtp_JVeHQ";var Qt=i(99730);const $t=e=>{let{buttonText:t,onPrimaryButtonClick:i,text:n}=e;return(0,O.jsxs)("div",{className:Ht,"data-testid":"static-activation-trigger",children:[(0,O.jsx)(P.D,{className:Wt,variant:"cello",children:n}),(0,O.jsx)("div",{className:qt,children:(0,O.jsx)(Qt.D,{onClick:i,colorSet:"brightAccent",children:t})})]})};var zt=i(5065),Zt=i(40074);const Xt="Q3OKWaFrTVTIRZyG05Gh",Jt="cFQh4aLbQzp0aYzbWwjY",ei="NAaJboGa8qckhNNQTKTn",ti=e=>{let{lines:t=[]}=e;return 0===t.length?null:(0,O.jsxs)("div",{className:Xt,children:[(0,O.jsx)(P.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Jt,children:c.ag.get("web-player.lyrics.title")}),t.map(((e,t)=>{let{words:i}=e;return(0,O.jsx)(P.D,{as:"p",dir:"auto",variant:"ballad",className:ei,children:i},`lyrics-seo-line-${t}`)}))]})};var ii=i(54293);const ni=e=>{let{uri:t}=e;const i=(0,o.QT)(),n=(0,ee.I0)(),a=(0,tt.g)(),s=(0,zt.o)(),r=(0,ee.v9)((e=>e.lyrics.data)),l=(0,ee.v9)((e=>e.lyrics.uri)),d=Gt(),c=a||d,u=(0,p.useCallback)((()=>{n((0,Zt.m)(t))}),[n,t]);return(0,p.useEffect)((()=>{a||l!==t&&u()}),[a,u,l,t]),c?(0,O.jsx)("div",{className:wt,children:a?(0,O.jsx)($t,{buttonText:i.get("sign_up"),text:i.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:()=>{s({type:"click",intent:"signup",itemIdSuffix:"static-upsell"}),(0,ii.L6)()}}):(0,O.jsx)(ti,{lines:null==r?void 0:r.lyrics.lines})}):null};var ai=i(98593),si=i(85714),ri=i(69773),oi=i(8632),li=i(74578),di=i(35333);const ci=e=>e.map((e=>({title:e.artists[0].name,subtitle:e.name}))),ui=e=>e?e.items.map((e=>{var t;return{name:e.profile.name,images:((null===(t=e.visuals.avatarImage)||void 0===t?void 0:t.sources)||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}})):[],mi=()=>{var e,t,i,d,c,u,_,v,k,g;const E=(0,o.QT)(),S=`spotify:track:${(0,D.UO)().entityId}`;(0,p.useEffect)((()=>{window.LUX&&(window.LUX.label="Track page")}));const{enableI18nLocales:y}=(0,si.h)(),f=(0,ee.I0)(),N=(0,D.TH)(),T=(0,tt.g)(),{entity:R,trackCloud:A}=(0,ee.v9)((e=>{var t,i;return{entity:e.entities.items[S],trackCloud:null===(t=e.entities)||void 0===t||null===(i=t.trackCloud)||void 0===i?void 0:i[S]}})),b=(0,di.k)({type:"link",uri:S}),C=(e=>!!e&&"Track"===e.__typename)(R)?R:void 0,I=null==C?void 0:C.albumOfTrack,L=null==I||null===(e=I.coverArt)||void 0===e||null===(t=e.extractedColors)||void 0===t?void 0:t.colorDark.hex;(0,li.Hx)({visible:!0,title:null==C?void 0:C.name,backgroundColor:L});const P=(0,Fe.u)(S),F=(0,ee.v9)((e=>{var t,i,n;return{playbackContextUri:null===(t=e.playback.current)||void 0===t?void 0:t.context.uri,currentTrackURI:null===(i=e.playback.current)||void 0===i||null===(n=i.track_window.current_track)||void 0===n?void 0:n.uri}})),w=(0,nt.W)(),x=(0,it.k)(),M=S===F.playbackContextUri&&!x,U=(0,qe.g0)({uri:S,isOnDemand:P,playbackContextUri:F.playbackContextUri,referrer:w,audioFileMetadataResolver:()=>(0,qe.Vj)(T,C)}),j=(0,ee.v9)((e=>{var t;return null===(t=e.richEntities.seoExperiment)||void 0===t?void 0:t.track})),B=(0,ce.W6)(de.YS),{data:G,uri:V,status:Y}=(0,ee.v9)((e=>e.internalLinkRecommender.track)),K=Y===He.g.LOADED,H=ge[B],W=(0,le.xU)(j||{},(null==C?void 0:C.id)||""),[q,Q]=(0,p.useState)(!0),$=(0,ee.v9)((e=>{var t,i;return null===(t=e.session.me)||void 0===t||null===(i=t.profile)||void 0===i?void 0:i.id})),z=(0,ee.v9)((e=>e.session.country));var Z;et({category:"rtp-feat-artist-and-credits-test",action:"remote-config-response",label:"mwp",context:`${S}|${W}`,remoteConfigProperty:de.es,country:$?z:"",spt:!0,isAnonymous:T,isFirstRender:q,setIsFirstRender:Q}),et({category:"track_ilr_exposures",action:"track_page_visit",remoteConfigProperty:de.YS,label:"mwp",context:`${S}|${Z=G,Z?Z.map((e=>e.uri)):[]}`,country:$?z:"",spt:!0,isAnonymous:T,isFirstRender:q,setIsFirstRender:Q});const X=Boolean(C);(0,p.useEffect)((()=>{X||f((0,at.$p)(S))}),[f,S,X]),(0,p.useEffect)((()=>{A||P||f((0,at.Dh)(S))}),[S,A,f,P]),(0,p.useEffect)((()=>{void 0!==V&&V!==S&&H&&f((0,Ke.ob)(S,H))}),[f,H,V,S]);const J=null==C?void 0:C.firstArtist,te=null==J?void 0:J.items[0].discography.albums.items,ie=(0,p.useCallback)((()=>h(te)),[te]),{handleHeaderMenuClick:ne}=(0,ai.a)(),ae=ui(J),se=C&&W?ae.concat(ui(C.otherArtists)):ae,re=(0,oi.Zs)({i18n:E,trackName:null==C?void 0:C.name,trackArtistsList:se.map((e=>e.name)).join(E.getSeparator()),shouldLocalize:b});if((0,ri.j)(re),!C)return(0,O.jsx)(Pt.U,{});const oe=null==C?void 0:C.firstArtist.items[0];return(0,O.jsxs)(Lt.X,{testId:"track-view",children:[(0,O.jsxs)(Tt.g,{backgroundColor:L,children:[(0,O.jsx)(At.O,{images:null!==(i=null===(d=C.albumOfTrack)||void 0===d||null===(c=d.coverArt)||void 0===c?void 0:c.sources)&&void 0!==i?i:[],fallback:(0,O.jsx)(n.c,{iconSize:64})}),(0,O.jsx)(It.x,{children:C.name}),(0,O.jsx)(Dt.Q,{name:oe.profile.name,uri:oe.uri,images:null===(u=oe.visuals.avatarImage)||void 0===u?void 0:u.sources}),(0,O.jsxs)(Rt.n,{children:[(0,O.jsx)(jt,{albumName:W?null==I?void 0:I.name:void 0,year:null==I||null===(_=I.date)||void 0===_?void 0:_.year,duration:C.duration.totalMilliseconds}),(0,O.jsxs)(Nt.n,{children:[(0,O.jsx)(r.y,{uri:S}),(0,O.jsx)(ft.F,{uri:S,shareTitle:null!==(v=null==I?void 0:I.name)&&void 0!==v?v:"",shareText:null!==(k=null==I?void 0:I.name)&&void 0!==k?k:""}),(0,O.jsx)(a.o,{iconOnly:s.F,"aria-label":E.get("more"),onClick:()=>{var e,t,i;ne({uri:S,header:{title:C.name,backgroundImage:null===(e=C.albumOfTrack)||void 0===e||null===(t=e.coverArt)||void 0===t||null===(i=t.sources)||void 0===i?void 0:i[0].url}})}})]}),(0,O.jsx)(Ct.O,{onClick:U,isPlaying:M,disabled:!(null!=I&&I.playability.playable),isOnDemand:P})]})]}),(0,O.jsxs)(bt.X,{children:[A&&!P&&(0,O.jsx)(yt.q,{className:xt,tracks:ci(A.content.items)}),(0,O.jsx)(ni,{uri:S}),se&&(0,O.jsx)(St,{artists:se,LinkComponent:l.r,size:gt.SMALL,enableI18nRoutes:Boolean(y),enableI18nAdditionalPages:Boolean(de.v0)}),(0,O.jsx)("div",{"data-testid":"rich-track-data",children:(0,O.jsx)(We,{artistName:(null==J||null===(g=J.items[0].profile)||void 0===g?void 0:g.name)||"",popularAlbums:ie(),uri:S,track:C})}),C.albumOfTrack&&(0,O.jsx)(Kt,{copyrights:C.albumOfTrack.copyright.items}),K&&(0,O.jsxs)(O.Fragment,{children:[pe(B,N)&&(0,O.jsx)("div",{"data-testid":"canonical-pool-bottom",children:(0,O.jsx)(Ye,{items:m(G),title:E.get("internal-link-recommender.recommended-based-on-this-song")})}),ke(B,N)&&(0,O.jsx)("div",{"data-testid":"organic-pool-bottom",children:(0,O.jsx)(Ye,{items:m(G),title:E.get("internal-link-recommender.recommended-based-on-this-song")})})]})]}),(0,O.jsx)(Qe.P,{})]})}},44910:(e,t,i)=>{"use strict";i.d(t,{o:()=>d});var n=i(18148),a=i(24377),s=i(99730);const r="C8ZC1K9aTo1bVZR5326H",o="Lg64tO7KvK4aRj40lM6j";var l=i(4637);const d=e=>{let{heading:t,message:i,primaryButtonTitle:d,onPrimaryButtonClick:c}=e;return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)(n.n,{height:"48",condensed:!0}),(0,l.jsx)(a.D,{variant:"canon",as:"h1",children:t}),i&&(0,l.jsx)(a.D,{variant:"ballad",as:"p",className:o,children:i}),(0,l.jsx)(s.D,{colorSet:"invertedLight",onClick:c,children:d})]})}},86797:(e,t,i)=>{"use strict";i.d(t,{o:()=>y});i(31781),i(71756);var n=i(59496),a=i(10340);const s="buqVKMpwHgGMDJFSl54R",r="Zbad_ytC5aqG3ZISd4Gw",o="XtRaMxXYR3jQlMDuhW1f",l="tVjXMkiv0WPWpf49mPv3";var d=i(69912),c=i(24377),u=i(73135),m=i(4637);const _=n.memo((function(e){let{text:t,onTimeStampClick:i,children:a,className:s,enableTimestamps:r=!1}=e;const o=(0,n.useMemo)((()=>(0,m.jsx)(u.w,{html:t,onTimeStampClick:i,enableTimestamps:r})),[t,r,i]);return(0,m.jsxs)(c.D,{variant:"viola",as:"p",className:s,children:[o,a]})})),h="UhoFLV9F6uYQvi0m6ptf",p=(0,n.memo)((function(e){let{text:t,onTimeStampClick:i,onToggle:n,className:s,enableTimestamps:r}=e;const o=(0,a.QT)();return(0,m.jsx)(_,{className:s,text:t,onTimeStampClick:i,enableTimestamps:r,children:(0,m.jsx)("button",{"aria-expanded":!1,className:h,onClick:n,children:(0,m.jsxs)(c.D,{variant:"violaBold",children:["… ",o.get("mwp.see.more")]})})})})),v=(e,t,i,n)=>{const a=e.get("mwp.see.more").length,s=t.length+a+6;return n<=1&&s<i},k=(0,n.memo)((function(e){let{paragraphs:t,clickHandler:i,maxCharactersPerLine:n,maxLines:s,toggleExpandedState:r,className:o,enableTimestamps:l}=e;const d=(0,a.QT)();let c=!1,u=0;const h=t.map(((e,a)=>{const h=Math.round(e.length/n);if(u+=h>0?h:1,c)return null;const k=s-(u-h);if(!(a+1===t.length&&(v(d,e,n,k)||h<=k))&&u>=s){c=!0;const t=((e,t,i,n)=>{const a=e.get("mwp.see.more").length;if(v(e,t,i,n))return t;const s=i*n-a-6;return t.slice(0,s)})(d,e,n,k);return(0,m.jsx)(p,{text:t,onTimeStampClick:i,onToggle:r,className:o,enableTimestamps:l},a)}return(0,m.jsx)(_,{className:o,text:e,onTimeStampClick:i,enableTimestamps:l},a)})).filter((e=>null!==e)).map(((e,t,i)=>t+1===i.length?e:[e," "])).flat();return(0,m.jsx)(m.Fragment,{children:h})})),g={isOpen:!1,contentWidth:0},E=(e,t)=>({...e,...t}),S=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[ \u00a0]{2}/).filter(Boolean)},y=(0,n.memo)((function(e){let{content:t,htmlContent:i,maxLines:h=2,className:p,onTimeStampClick:v=(()=>{}),onExpanded:y,enableTimestamps:f=!1}=e;const[N,T]=(0,n.useReducer)(E,g),{isOpen:R,contentWidth:A}=N,b=(0,a.QT)(),C=(0,n.useCallback)((()=>{T({isOpen:!R}),y&&y(!R)}),[R,y]);(0,n.useEffect)((()=>{T({isOpen:!1})}),[t]);const I=A?A/7.8:Number.MAX_VALUE,L=(0,n.useRef)(null),P=(0,n.useCallback)((e=>{e&&(L.current=e,T({contentWidth:e.clientWidth}))}),[]),D=(0,n.useMemo)((()=>i?(0,m.jsx)(u.w,{html:i,onTimeStampClick:v,enableTimestamps:f}):((e,t,i)=>S(e).map(((e,n)=>(0,m.jsx)(_,{className:r,text:e,onTimeStampClick:t,enableTimestamps:i},n))))(t,v,f)),[t,f,i,v]),O=(0,n.useMemo)((()=>i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace("<p>","").split(/(?:<\/p>)/).filter(Boolean)}(i):S(t)),[t,i]);return(0,d.a)((()=>{L.current&&T({contentWidth:L.current.clientWidth})})),(0,m.jsx)("div",{className:p,"data-testid":"expandable-description",children:(0,m.jsxs)("div",{ref:P,className:s,children:[R&&(0,m.jsxs)(m.Fragment,{children:[D,(0,m.jsx)("button",{"aria-expanded":!0,className:l,onClick:C,children:(0,m.jsx)(c.D,{className:o,variant:"balladBold",children:b.get("show_less")})})]}),!R&&(0,m.jsx)(k,{className:r,paragraphs:O,clickHandler:v,enableTimestamps:f,maxCharactersPerLine:I,maxLines:h,toggleExpandedState:C})]})})}))},58359:(e,t,i)=>{"use strict";i.d(t,{Y:()=>U});var n=i(61740);const a="Rj38soYIO7xO9JyFZM7x",s="pXPrDQuZwVTOvkQhu92j",r="VRq4id4IImgH9ykK7Gj1",o="TtMOUDL5GeQa5xjmtQun",l="yamyVSBHov2rOuWLOQ1_",d="HwrcB8qIw0GUzgugTyhC",c="y7JZhjvVEjC0pumwW5iV",u="AT0VzqPjjNnA8nQlO1TQ",m="xH68Uo5InE9BgRmZo6Fl";var _=i(97422),h=(i(71756),i(59496)),p=i(4637);const v=h.memo((()=>{var e,t,i;const a=(0,n.v9)((e=>{var t,i;return(null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.position)||0})),s=h.useRef(a),[r,o]=(0,h.useState)(!1),l=null!==(e=(0,n.v9)((e=>{var t,i;return null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.playback_speed})))&&void 0!==e?e:1,d=null!==(t=(0,n.v9)((e=>{var t,i;return null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.duration})))&&void 0!==t?t:0,m=null!==(i=(0,n.v9)((e=>{var t,i;return null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.paused})))&&void 0!==i&&i;(0,h.useEffect)((()=>{const e=setTimeout((()=>{s.current=a,o(!1)}),20);return o(!0),s.current=a,()=>{clearTimeout(e)}}),[a,d]);const _=s.current,v=d/l,k=m?"paused":"running",g="progress-"+(r?"reset":"start");return(0,p.jsx)("div",{className:c,children:(0,p.jsx)("div",{className:u,style:{animation:`${g} ${v}ms linear -${_}ms ${k}`}})})}));var k=i(15449),g=i(5065),E=i(67121),S=i(38185),y=i(88177),f=i(44969),N=i(28321),T=i(38331),R=i(70283);const A=()=>{const e=(0,n.v9)((e=>{var t;return null===(t=e.playback.current)||void 0===t?void 0:t.paused})),t=(0,n.v9)((e=>e.playback.isBuffering));let i=(0,p.jsx)(f.k,{});e&&(i=(0,p.jsx)(N.J,{}));const a=(0,n.I0)();return(0,p.jsx)("div",{className:t?m:"",children:(0,p.jsx)("button",{disabled:t,onClick:e=>{a((0,T.Xh)(R.wl.LABEL.NOW_PLAYING_BAR)),e.stopPropagation()},className:d,"data-test-id":"play-pause-button",children:i})})};var b=i(79779),C=i(68193);const I=e=>{let{uri:t}=e;return(0,p.jsx)(b.n,{uri:t,inLibraryComponent:e=>(0,p.jsx)(C.H,{onClick:t=>{t.stopPropagation(),e()},isAdded:!0,size:C.q.sm,style:{padding:S.dly}}),notInLibraryComponent:e=>(0,p.jsx)(C.H,{onClick:t=>{t.stopPropagation(),e()},isAdded:!1,size:C.q.sm,style:{padding:S.dly}})})};var L=i(24377),P=i(80748);const D=h.memo((function(e){let{title:t=""}=e;return(0,p.jsx)(P.R,{children:(0,p.jsx)(L.D,{variant:"mestoBold",children:t})},null!=t?t:"")}));var O=i(10340);const F=h.memo((e=>{var t,i;let{track:n}=e;const a=(0,O.QT)();let s="";var o,l,d,c;null!=n&&null!==(t=n.artists)&&void 0!==t&&t.length?s=null===(o=n.artists)||void 0===o||null===(l=o.map((e=>e.name)))||void 0===l?void 0:l.join(a.getSeparator()):s=null!==(d=null==n||null===(c=n.album)||void 0===c?void 0:c.name)&&void 0!==d?d:"";return(0,p.jsx)(P.R,{children:(0,p.jsx)(L.D,{variant:"mesto",className:r,children:s})},null!==(i=s)&&void 0!==i?i:"")}));var w=i(39113);const x=h.memo((e=>{let{device:t}=e;return null!=t&&t.name?(0,p.jsxs)(L.D,{variant:"mesto",className:o,children:[(0,p.jsx)(w.W,{iconSize:12}),t.name]}):null}));var M=i(92911);const U=()=>{const e=(0,g.o)(),t=(0,n.I0)(),{device:i,hasNowPlayingData:r,uri:o,uriType:d,coverArtUrl:c}=(0,n.v9)((e=>{var t,i,n,a,s,r,o,l,d;return{device:e.connect.device,hasNowPlayingData:!(null===(t=e.playback.current)||void 0===t||!t.track_window),uri:null===(i=e.playback.current)||void 0===i||null===(n=i.track_window)||void 0===n||null===(a=n.current_track)||void 0===a?void 0:a.uri,uriType:null!==(s=null===(r=e.playback.current)||void 0===r||null===(o=r.track_window)||void 0===o||null===(l=o.current_track)||void 0===l?void 0:l.type)&&void 0!==s?s:"",coverArtUrl:(0,y.pl)(null===(d=e.playback.current)||void 0===d?void 0:d.track_window.current_track)}})),u=`rgb(${(0,n.v9)((e=>(0,E.Q)(e,c,S.Sns)))})`,m=!["chapter","episode"].includes(d);if(!r)return null;return(0,p.jsxs)("div",{"data-testid":"floating-now-playing-bar",className:a,style:{backgroundColor:u,"--background-color":u},onClick:()=>{t((0,k.rf)()),e({type:"click",intent:"open-now-playing-view"})},children:[(0,p.jsx)(_.Ee,{src:c,className:s,loading:"eager"}),(0,p.jsx)(M.E,{trackComponent:e=>{let{track:t}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(D,{title:null==t?void 0:t.name}),null!=i&&i.local?(0,p.jsx)(F,{track:t}):(0,p.jsx)(x,{device:i})]})}}),(0,p.jsx)(v,{}),(0,p.jsxs)("div",{className:l,children:[m&&(0,p.jsx)(I,{uri:null!=o?o:""}),(0,p.jsx)(A,{})]})]})}},32985:(e,t,i)=>{"use strict";i.d(t,{P:()=>A,y:()=>R});i(71756);var n=i(59496);const a="mqhzZzqWlQeiuaLBwa_a",s="wJmAhytA2uz4mdLJIrjY",r="BYGpWy8lXjIaYtEy4e5J",o="QEAyrCamd1dT2GDabxxa",l="kmcdRXAcpBED2LkhCBNO",d="j0Nb633e3DOTXSKN3RIV",c="TvhlS9jw1akVSJKb71l2",u="Ja2O7U44T_rhvBK8MJF9";var m=i(15117),_=i(18148),h=i(24377),p=i(45498),v=i(17409),k=i(99730),g=i(10340),E=i(71062),S=i(4637);const y=n.forwardRef((function(e,t){let{onClick:i,ariaLabel:n,standalone:a=!1,tabIndex:s=0,className:r="",icon:o,size:l="md",semanticColor:d,condensed:c,condensedAll:u,disableTooltip:m=!1,testId:_,disabled:h=!1}=e;const p=o;return(0,S.jsx)(E.w,{label:n,disabled:m,children:(0,S.jsx)(v.o,{"data-testid":_,className:r,onClick:i,"aria-label":n,"aria-hidden":a,tabIndex:s,ref:t,iconOnly:p,buttonSize:l,semanticColor:d,condensed:c,condensedAll:u,disabled:h})})}));var f=i(84875),N=i.n(f);const T=e=>{let{title:t,description:i,id:n,visible:E,primaryButtonText:f,secondaryButtonText:T,onHide:R,onPrimaryButtonClick:A,onSecondaryButtonClick:b=R,onCloseClick:C=R,showButtons:I=!0,showCloseButton:L=!1,children:P,placement:D="auto",hideArrow:O,className:F,popperOptions:w,zIndex:x,maxWidth:M,tippyClassName:U,hideOnClickOutside:j=!0,useSecondaryStyling:B=!1,childRef:G}=e;const V=(0,g.QT)(),Y=B?"brightAccent":void 0;return(0,S.jsx)(m.x,{visible:E,placement:D,hideArrow:O,popperOptions:w,className:U,zIndex:x,maxWidth:M,onHide:j?R:()=>{},childRef:G,overlay:(0,S.jsxs)("div",{className:N()(a,F),"data-testid":`${n}-hook`,children:[(0,S.jsx)(_.n,{condensed:!0,useBrandColor:!0,height:36}),(0,S.jsxs)("div",{className:s,children:[(0,S.jsx)(h.D,{as:"p",className:r,variant:"cello",children:t}),L&&(0,S.jsx)(y,{className:u,onClick:C,ariaLabel:V.get("close"),icon:p.k,size:"sm"})]}),(0,S.jsx)(h.D,{as:"p",className:o,variant:"mesto",children:i}),I&&(0,S.jsxs)("div",{className:l,children:[(0,S.jsx)(v.o,{semanticColor:"textBase",className:d,onClick:b,children:T?T():V.get("action-trigger.button.not-now")}),f&&(0,S.jsx)(k.D,{colorSet:Y,className:c,onClick:A,children:f()})]})]}),children:P})};const R=function(e){let t=e,i=[];return{addListener:e=>{i.push(e)},removeListener:e=>{i=i.filter((t=>t!==e))},get:()=>t,set:e=>{t=e(t),i.forEach((e=>{e(t)}))}}}({triggerId:null,triggerAction:null}),A=e=>{let{id:t,children:i,childRef:a,options:{placement:s,isCTA:r,intentPrimaryButton:o="login",intentSecondaryButton:l="close-upsell",getDescription:d,getTitle:c,hideArrow:u,shouldHideOnOutsideClick:m=(()=>!0),popperOptions:_,zIndex:h,maxWidth:p,tippyClassName:v,primaryButtonText:k,primaryButtonTargetUri:g,secondaryButtonText:E,useSecondaryStyling:y,onLogInteraction:f},onPrimaryButtonClick:N=(()=>{}),onSecondaryButtonClick:A,showCloseButton:b=!1,className:C,onHide:I,onShow:L}=e;const P=r?"tooltip-with-cta":"tooltip-without-cta",[{triggerId:D,triggerAction:O},F]=function(e){const t=(0,n.useState)()[1];return(0,n.useEffect)((()=>(e.addListener(t),()=>{e.removeListener(t)})),[e,t]),[e.get(),e.set]}(R),w=Boolean(D&&D===t),x=(0,n.useCallback)((e=>{e.stopPropagation(),f({itemIdSuffix:P,intent:o,type:"click",targetUri:g}),F((e=>({...e,triggerAction:null,triggerId:null}))),N()}),[N,f,g,F,P,o]),M=(0,n.useCallback)((e=>t=>{t.stopPropagation&&t.stopPropagation(),f({intent:"close-upsell",type:"click",itemIdSuffix:`${P}/${e}`}),F((e=>({...e,triggerAction:null,triggerId:null})))}),[f,F,P]),U=(0,n.useCallback)((e=>{e.stopPropagation(),f({itemIdSuffix:P,intent:l,type:"click"}),F((e=>({...e,triggerAction:null,triggerId:null}))),A?A():M("close-button")}),[A,f,F,P,M,l]);(0,n.useEffect)((()=>{I&&L&&(w?L():I())}),[I,L,w]);const j=(0,n.useRef)(!1);if((0,n.useEffect)((()=>{!j.current&&w&&(f({intent:"open-upsell",type:"view",itemIdSuffix:P}),j.current=!0),j.current&&!w&&(j.current=!1)}),[f,P,w]),!w)return i;const B=c({triggerAction:O}),G=d({triggerAction:O}),V=m({triggerAction:O});return(0,S.jsx)(T,{placement:s,className:C,tippyClassName:v,popperOptions:_,zIndex:h,maxWidth:p,title:B,description:G,hideArrow:u,id:t,visible:w,showButtons:r,hideOnClickOutside:V,onHide:M("backdrop"),onSecondaryButtonClick:U,onPrimaryButtonClick:x,primaryButtonText:k,secondaryButtonText:E,useSecondaryStyling:y,showCloseButton:b,childRef:a,children:i})}},11606:(e,t,i)=>{"use strict";i.d(t,{P:()=>n.P});var n=i(32985)},73135:(e,t,i)=>{"use strict";i.d(t,{w:()=>v});var n=i(59496),a=i(4417),s=i.n(a),r=i(24377);i(31781);const o=/(\((?:[0-9]{1,3}:){1,2}[0-9]{2}\))/g;var l=i(75068),d=i(25893);const c="G_f5DJd2sgHWeto5cwbi",u="WXHi6MZMKUcXnoLln5uD",m="pOo5SXb2mDN3gsYCvXll",_="HHCshwejARoH8BKHIS3s",h="VcaRT3xceXBMfe1scW9M";var p=i(4637);const v=(0,n.memo)((function(e){let{html:t,onTimeStampClick:i,enableTimestamps:a=!1}=e;const l=(0,n.useMemo)((()=>{const e=a?t.split(o).map((e=>e.match(o)?`(<time>${e.replace("(","").replace(")","")}</time>)`:e)).join(""):t;return s()(e,{transform:k(i),dangerouslySetChildren:[]})}),[a,t,i]);return(0,p.jsx)(r.D,{className:c,children:l})}));function k(e){let t=0;return{p:e=>(0,p.jsx)(r.D,{as:"p",variant:"viola",semanticColor:"textSubdued",className:h,children:e.children}),a:t=>{var i;return null!==(i=t.href)&&void 0!==i&&i.startsWith("#t=")?(0,p.jsx)(l.E,{onClick:e,children:t.children}):t.href?(0,p.jsx)(d.r,{to:t.href,children:t.children}):(0,p.jsx)(p.Fragment,{children:t.children})},ul:e=>(0,p.jsx)("ul",{className:m,children:e.children}),ol:e=>(0,p.jsx)("ol",{className:m,children:e.children}),li:e=>(0,p.jsx)(r.D,{as:"li",variant:"viola",semanticColor:"textSubdued",className:_,children:e.children}),br:()=>(0,p.jsx)("br",{}),h1:e=>(0,p.jsx)(r.D,{as:"h1",variant:"violaBold",semanticColor:"textSubdued",className:u,children:e.children}),h2:e=>(0,p.jsx)(r.D,{as:"h2",variant:"violaBold",semanticColor:"textSubdued",className:u,children:e.children}),h3:e=>(0,p.jsx)(r.D,{as:"h3",variant:"violaBold",semanticColor:"textSubdued",className:u,children:e.children}),h4:e=>(0,p.jsx)(r.D,{as:"h4",variant:"violaBold",semanticColor:"textSubdued",className:u,children:e.children}),h5:e=>(0,p.jsx)(r.D,{as:"h5",variant:"violaBold",semanticColor:"textSubdued",className:u,children:e.children}),h6:e=>(0,p.jsx)(r.D,{as:"h6",variant:"violaBold",semanticColor:"textSubdued",className:u,children:e.children}),time:t=>(0,p.jsx)(l.E,{onClick:e,children:t.children}),_:(e,i,a)=>{const s=void 0===i?e:a;return(0,p.jsx)(n.Fragment,{children:s},"fragment"+t++)}}}},25893:(e,t,i)=>{"use strict";i.d(t,{r:()=>u});var n=i(59496),a=i(59272),s=i(47393),r=i(5065),o=i(76022),l=i(10340),d=i(35333),c=i(4637);const u=(0,n.memo)((e=>{const t=(0,l.QT)(),{to:i,onClick:u,children:m,draggable:_=!1,...h}=e,p=t.getUrlLocale(),v=(0,r.o)(),k=(0,a.EC)(i,{parseUnknown:!0}),g=null==k?void 0:k.toURL(),E=(0,a.EC)(g),S=(0,d.k)({type:"link",uri:null==E?void 0:E.toURI()}),y={onClick:(0,n.useCallback)((e=>{v({intent:"navigate",type:"click",targetUri:i}),u&&u(e)}),[v,i,u]),draggable:_,...h};if(k){const e=k.toURL(`/${o.F0}${p}/`),t=k.toURLPath(!0),i=S?e:t;return(0,c.jsx)(s.rU,{...y,to:{pathname:i},children:m})}return(0,c.jsx)("a",{...y,href:i,target:"_blank",rel:"noopener nofollow",children:m})}))},42676:(e,t,i)=>{"use strict";i.d(t,{O:()=>c});var n=i(59496),a=i(47393),s=i(5065),r=i(10340),o=i(35333),l=i(93381),d=i(4637);const c=(0,n.memo)((e=>{const t=(0,r.QT)().getUrlLocale(),i="/"===e.to,c=(0,o.k)({uri:"",type:"locale"})&&i?(0,l.is)("/",t):e.to,{onClick:u,onDoubleClick:m,onKeyDown:_,className:h,tabIndex:p,children:v,end:k}=e,g=(0,s.o)(),E=(0,n.useCallback)((e=>{g({intent:"navigate",type:"click",targetUri:c}),u&&u(e)}),[g,u,c]);return(0,d.jsx)(a.OL,{draggable:!1,end:k,to:c,"aria-label":e["aria-label"],className:h,tabIndex:p,onClick:E,onDoubleClick:m,onKeyDown:_,children:v})}))},80748:(e,t,i)=>{"use strict";i.d(t,{R:()=>m});var n=i(59496),a=i(61740),s=i(41965),r=i(69912);const o="x0JR0d_48vNetlDnfSQb",l="LXFhUW6138Z6idhHh9nD",d="zAiloZ8QArl6sathqdbw",c="HJpr0Ykhb_GbZUePKH3r";var u=i(4637);const m=e=>{let{children:t,title:i,speed:m=.2,pauseAtEndEdgeDurationMs:_=1200,initialMouseIntDelayMs:h=200,startAnimationOnMount:p=!0,startAnimationOnMountDelayMs:v=1e3,iterationCount:k="infinite",scrollMethod:g="transform"}=e;const E=(0,n.useRef)(null),S=(0,n.useRef)(null),y=(0,n.useRef)(null),f=(0,n.useRef)(0),N=(0,n.useRef)("scrolling"),T=(0,a.v9)((e=>e.session.textDirectionality)),R=(0,n.useRef)("ltr"),A=(0,s.T)(),b=(0,n.useRef)({initialMouseInteraction:null,animationOnMount:null}),C=(0,n.useCallback)((()=>y.current&&E.current?y.current.clientWidth-E.current.clientWidth:0),[]),I=(0,n.useCallback)((()=>"rtl"===R.current?1:-1),[R]),L=(0,n.useCallback)((()=>{const e=C();return e>0&&T!==R.current?0+-1*I()*e:0}),[C,T,I]),P=(0,n.useCallback)((()=>{var e;null===(e=y.current)||void 0===e||e.style.setProperty("--trans-x",`${L()}px`)}),[L]),D=(0,n.useCallback)((()=>{if(A)return;if(f.current)return;let e=!1,t=0,i=1,n=!1;const a=s=>{const r=C();if(r<=0)return;let o=!0,l=t;if(e){if(n)s>n+_&&(n=!1);else if("paused"===N.current);else{l+=i*(60*(s-e)/1e3)*m,l>r?(i*=-1,n=s,l=r):l<0&&(i*=-1,n=s,l=0,o="infinite"===k)}if(t=l,"transform"===g){var d;const e=I()*t+L();null===(d=y.current)||void 0===d||d.style.setProperty("--trans-x",`${e}px`),S.current.scrollLeft=0}else"scroll"===g&&(S.current.scrollLeft=t)}e=s,f.current=0,o&&(f.current=requestAnimationFrame(a))};N.current="scrolling",a(0)}),[m,_,g,I,L,C,A,k]),O=(0,n.useCallback)((()=>f.current),[]),F=(0,n.useCallback)((()=>{N.current="paused"}),[]),w=(0,n.useCallback)((()=>{N.current="scrolling"}),[]),x=(0,n.useCallback)((()=>{cancelAnimationFrame(f.current),N.current="paused",f.current=0}),[]),M=(0,n.useCallback)((()=>{Object.values(b.current).forEach((e=>e&&clearTimeout(e)))}),[]),U=(0,n.useCallback)((e=>{O()?F():"focus"!==e&&(b.current.initialMouseInteraction=setTimeout(D,h))}),[D,F,h,O]),j=(0,n.useCallback)((()=>{b.current.initialMouseInteraction&&clearTimeout(b.current.initialMouseInteraction),O()&&w()}),[w,O]);return(0,n.useEffect)((()=>{p&&(b.current.animationOnMount&&clearTimeout(b.current.animationOnMount),b.current.animationOnMount=setTimeout(D,v))}),[D,v,p]),(0,n.useEffect)((()=>()=>{x(),M(),P()}),[x,M,P]),(0,n.useEffect)((()=>{var e;const t=null===(e=y.current)||void 0===e?void 0:e.children[0];var i;t&&(R.current=getComputedStyle(t).direction,"rtl"===R.current&&(null===(i=E.current)||void 0===i||i.classList.add(l)));P()}),[T,L,P]),(0,r.a)((()=>{x(),P()})),(0,u.jsx)("div",{ref:E,className:o,onMouseOver:()=>U("mouse"),onFocus:()=>U("focus"),onMouseOut:j,onBlur:j,title:A&&i?i:void 0,children:(0,u.jsx)("div",{ref:S,className:d,children:(0,u.jsx)("div",{ref:y,className:c,children:t})})})}},15117:(e,t,i)=>{"use strict";i.d(t,{L:()=>c,x:()=>u});var n=i(71756),a=i.n(n),s=i(43145),r=i(90932),o=i(55292),l=i(4637);const d=(0,s.ZP)({resolved:{},chunkName:()=>"tippyjs-react",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(225).then(i.bind(i,29049)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 29049}}),c={top:"top",topRight:"top-end",topLeft:"top-start",left:"left",leftTop:"left-start",leftBottom:"left-end",bottom:"bottom",bottomLeft:"bottom-start",bottomRight:"bottom-end",right:"right",rightTop:"right-start",rightBottom:"right-end",auto:"auto"},u=e=>{let{visible:t,overlay:i,placement:n,children:a,childRef:s,maxWidth:c=336,hideArrow:u=!1,className:m="",popperOptions:_={},onHide:h,zIndex:p}=e;return t?(0,l.jsx)(o.A,{fallback:a,children:(0,l.jsx)(d,{animation:"shift-toward-subtle",maxWidth:c,visible:t,theme:"activation",placement:n||"auto",interactive:!0,arrow:!u,content:i,className:m,onClickOutside:h,popperOptions:_,zIndex:p,offset:[0,14],reference:s,children:(0,l.jsx)("div",{className:r.Z.tippyWrapper,children:a})})}):a}},80823:(e,t,i)=>{"use strict";i.d(t,{M:()=>h});i(71756);var n=i(20525),a=i(17409),s=i(45498),r=i(10340),o=i(59496),l=i(85830);const d="Se6tAnECaHLzBf5d6Zfi",c="bsDwynUMyvLBY1h5Yjfn",u="xfLs2p800R6R4ZghQN1c",m="_FwO22cwCMdvLQqqCLCE";var _=i(4637);const h=e=>{let{placeholder:t,onChange:i,value:h,focusOnMount:p=!1}=e;const v=(0,r.QT)(),[k,g]=(0,o.useState)(""!==h),E=(0,l.y1)((e=>{g(""!==e.target.value),i(e.target.value)}),200),S=(0,o.useRef)(null);(0,o.useEffect)((()=>{var e;p&&(null===(e=S.current)||void 0===e||e.focus())}),[p]);const y=(0,o.useCallback)((()=>{S.current&&(S.current.value="",g(!1))}),[]);return(0,_.jsxs)("div",{className:d,children:[(0,_.jsx)(n.j,{iconSize:16,className:u}),(0,_.jsx)("input",{ref:S,defaultValue:h,placeholder:t,className:c,onBlur:E,onChange:E,onFocus:E,"data-testid":"search-input"}),k&&(0,_.jsx)(a.o,{buttonSize:"sm","aria-label":v.get("search.a11y.clear-input"),iconOnly:s.k,className:m,condensedAll:!0,onClick:y,"data-testid":"search-input-clear-button"})]})}},69038:(e,t,i)=>{"use strict";i.d(t,{P:()=>v});var n=i(24377),a=i(59496),s=i(84875),r=i.n(s);const o="qirFczpKFgQDsNuuzLHP";var l=i(4637);const d=e=>{let{children:t,gap:i,fullbleedMargin:n}=e;return(0,l.jsx)("div",{className:o,"data-testid":"carousel-mwp",style:{"--gap":i,"--fullbleed-margin":n},children:t})};var c=i(38510),u=i(65994),m=i(44947);const _="JMgUTIyId0RuU9k6aQaz",h="Tkbghg6KSm2TwjaaewC0",p=e=>{let{title:t,pretitle:i,media:n}=e;return(0,l.jsx)(c.w,{"data-testid":"list-row-shelf-header",id:"header-only",padding:"0 12px",pretitle:(0,l.jsx)(u.g,{variant:"mesto",semanticColor:"textSubdued",children:i}),title:(0,l.jsx)(u.g,{variant:"celloCanon",semanticColor:"textBase",children:t}),media:(0,l.jsx)(m.d,{className:h,src:n,circle:!0})})},v=a.forwardRef((function(e,t){let{title:i,gap:s,fullbleedMargin:o,children:c,"data-testid":u,listRowHeaderProps:m,headerClassName:h}=e;return 0===a.Children.count(c)?null:(0,l.jsxs)("div",{"data-testid":u,ref:t,children:[(0,l.jsx)("div",{className:r()(_,h),children:m?(0,l.jsx)(p,{...m}):(0,l.jsx)(n.D,{as:"h2",variant:"celloCanon",dir:"auto",children:i})}),(0,l.jsx)(d,{gap:s,fullbleedMargin:o,children:c})]})}))},92911:(e,t,i)=>{"use strict";i.d(t,{E:()=>u});i(65394),i(78819),i(71756);var n=i(59496),a=i(91929),s=i(61740),r=i(38331);const o="MzSNEFiHmU9uhBlp8TaD",l="hdgGtl7SSeRqERt7_sKQ";var d=i(5065),c=i(4637);const u=e=>{let{trackComponent:t}=e;const i=(0,s.I0)(),{currentTrack:u,nextTrack:m,previousTrack:_,allowSkipPrev:h,allowSkipNext:p}=(0,s.v9)((e=>{var t,i,n,a,s,r,o,l,d,c,u,m;return{currentTrack:null===(t=e.playback.current)||void 0===t||null===(i=t.track_window)||void 0===i?void 0:i.current_track,previousTrack:null===(n=e.playback.current)||void 0===n||null===(a=n.track_window)||void 0===a?void 0:a.previous_tracks.at(-1),nextTrack:null===(s=e.playback.current)||void 0===s||null===(r=s.track_window)||void 0===r?void 0:r.next_tracks[0],allowSkipPrev:!Boolean(null===(o=e.playback)||void 0===o||null===(l=o.current)||void 0===l||null===(d=l.disallows)||void 0===d?void 0:d.skipping_prev),allowSkipNext:!Boolean(null===(c=e.playback)||void 0===c||null===(u=c.current)||void 0===u||null===(m=u.disallows)||void 0===m?void 0:m.skipping_next)}})),[v,k]=(0,n.useState)(!1),g=(0,n.useRef)(null),E=(0,n.useRef)(null),S=(0,d.o)(),{ref:y}=(0,a.YD)({threshold:1,root:g.current,onChange:e=>{e&&v&&(i((0,r.IV)()),S({type:"scroll-down",intent:"next"}))}}),{ref:f}=(0,a.YD)({threshold:1,root:g.current,onChange:e=>{e&&v&&(i((0,r.SQ)()),S({type:"scroll-up",intent:"previous"}))}});return(0,n.useEffect)((()=>{E.current&&(k(!1),E.current.scrollIntoView()),k(!0)}),[p,h,null==u?void 0:u.uri,null==m?void 0:m.uri,null==_?void 0:_.uri]),(0,c.jsxs)("div",{className:o,ref:g,children:[h&&_&&(0,c.jsx)("div",{className:l,ref:f,children:t({track:_})}),(0,c.jsx)("div",{className:l,ref:E,children:t({track:u})}),p&&m&&(0,c.jsx)("div",{className:l,ref:y,children:t({track:m})})]})}},74578:(e,t,i)=>{"use strict";i.d(t,{Du:()=>Z,Hx:()=>q});i(71756);var n=i(38185),a=i(97846),s=i(59496),r=i(37716),o=i(57294),l=i(84875),d=i.n(l),c=i(4637);const u=e=>{let{children:t,backgroundColor:i=n.QlB,className:a}=e;return(0,c.jsx)("div",{className:d()(a,o.Z.fixedTopBar),style:{"--backgroundColor":i,"--backgroundColorShade":"transparent"===i?"transparent":n.UoJ},"data-testid":"entity-view-top-bar",children:t})};var m=i(16336),_=i(5065),h=i(10340),p=i(24377);const v=()=>{const e=(0,h.QT)(),t=(0,_.o)();return(0,c.jsx)("button",{className:o.Z.openAppButton,"data-testid":"download-button",onClick:()=>{const e=(0,m.iZ)().toString();t({type:"click",intent:"download-app",itemIdSuffix:"download-button",targetUri:e}),window.open(e,"_self","noopener")},children:(0,c.jsx)(p.D,{variant:"finaleBold",className:o.Z.openAppButtonText,children:e.get("mwp.nav.open.app")})})},k="BvJFBdeeDryjw7xxJNSo";var g=i(17409),E=i(55785),S=i(61740),y=i(41177);const f=()=>{const e=(0,h.QT)(),t=(0,S.v9)((e=>e.session.canGoBack)),i=(0,y.s0)();return(0,c.jsx)(g.o,{onClick:()=>i(-1),iconOnly:E.D,"aria-label":e.get("navbar.go-back"),disabled:!t,semanticColor:"textBase",className:k})};var N=i(49120),T=i(64697);const R="s8xNHBQoLGzjVdosOSqC",A="XJXGRdtw5uc3RmBrVxGX",b=(0,s.forwardRef)(((e,t)=>(0,c.jsx)(g.o,{...e,ref:t}))),C=(0,s.forwardRef)(((e,t)=>{const i=(0,h.QT)(),{onLoginClick:n,onSignUpClick:a}=e,[r,o]=(0,s.useState)(!1),l=(0,_.o)(),d=(0,y.s0)(),u=(0,y.TH)(),m=(0,s.useCallback)((()=>{u.hash===T.X&&d({hash:""},{replace:!0}),l({type:"click",intent:"close-menu",itemIdSuffix:"top-bar/menu"})}),[u.hash,d,l]),p=(0,s.useCallback)((()=>{d({hash:T.X}),l({type:"click",intent:"open-menu",itemIdSuffix:"top-bar"})}),[d,l]);return(0,s.useEffect)((()=>{u.hash===T.X?o(!0):o(!1)}),[u.hash,o]),(0,c.jsxs)("div",{className:R,id:"preview-menu-container",children:[(0,c.jsx)(b,{id:"preview-menu-button",ref:t,"data-testid":"preview-menu-button","aria-label":i.get("mwp.preview-menu.menu"),"aria-controls":"preview-menu","aria-haspopup":"true","aria-expanded":r,style:{visibility:r?"hidden":"visible"},onClick:p,iconOnly:N.d,className:A}),(0,c.jsx)(T.S,{isMenuVisible:r,onLoginClick:n,onSignUpClick:a,onClose:m,primaryLinks:e.primaryLinks,secondaryLinks:e.secondaryLinks,showSpotifyLogo:e.showSpotifyLogo})]})}));var I=i(28140);function L(){return{type:I.z}}var P=i(54293);const D=()=>{const e=(0,_.o)(),t=(0,S.I0)();return(0,c.jsx)(C,{onLoginClick:()=>{t(L()),e({type:"click",intent:"login",itemIdSuffix:"top-bar/menu"}),(0,P.h$)()},onSignUpClick:()=>{t(L()),e({type:"click",intent:"signup",itemIdSuffix:"top-bar/menu"}),(0,P.L6)()}})};var O=i(20525),F=i(42676);const w=()=>{const e=(0,_.o)();return(0,c.jsx)(F.O,{className:o.Z.iconSearchLink,to:"/search/recent",onClick:()=>{e({type:"click",intent:"navigate",itemIdSuffix:"search-icon"})},children:(0,c.jsx)(O.j,{iconSize:16,"data-testid":"search-icon",semanticColor:"textBase"})})},x=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:o.Z.topBarSectionEnd,children:t})},M=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:o.Z.topBarSectionStart,children:t})},U=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:o.Z.topBarSectionVariable,children:t})};var j=i(18148),B=i(93483),G=i(35333),V=i(93381);const Y=()=>{var e;const t=null!==(e=(0,B.jh)())&&void 0!==e?e:B.Uo.XSMALL,i=(0,_.o)(),n=(0,h.QT)().getLocale(),a=(0,G.k)({type:"locale",uri:""})?(0,V.is)("/",n):"/";return(0,c.jsx)(F.O,{to:a,className:o.Z.logoButton,onClick:()=>{i({type:"click",intent:"navigate",itemIdSuffix:"spotify-logo"})},children:(0,c.jsx)(j.n,{"data-testid":"spotify-icon",height:32,semanticColor:"textBase",condensed:t===B.Uo.XSMALL})})},K="cixAxOBK_zmjVnmC5zol",H=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:K,children:t})};let W;const q=e=>{(0,s.useEffect)((()=>{W&&W((t=>{var i;return{visible:e.visible,title:null!==(i=e.title)&&void 0!==i?i:t.title,backgroundColor:Boolean(e.backgroundColor)?e.backgroundColor:t.backgroundColor}}))}),[e,e.title,e.backgroundColor])},Q=e=>{let{backgroundColor:t}=e;return(0,c.jsxs)(u,{backgroundColor:t,children:[(0,c.jsx)(M,{children:(0,c.jsx)(Y,{})}),(0,c.jsx)(U,{}),(0,c.jsxs)(x,{children:[(0,c.jsx)(w,{}),(0,c.jsx)(v,{}),(0,c.jsx)(D,{})]})]})},$=e=>{let{title:t,backgroundColor:i}=e;const[n,r]=(0,s.useState)(!0),o=(0,s.useCallback)((e=>{(null==e?void 0:e.target.scrollTop)>100&&n?r(!1):(null==e?void 0:e.target.scrollTop)<100&&!n&&r(!0)}),[n]);return(0,a.c)(o),(0,c.jsxs)(u,{backgroundColor:n?"transparent":i,children:[(0,c.jsx)(M,{children:(0,c.jsx)(f,{})}),!n&&(0,c.jsx)(H,{children:null!=t?t:""})]})},z={visible:!1,title:"",backgroundColor:n.QlB},Z=()=>{const e=(0,r.u)(),[t,i]=(0,s.useState)(z);return(0,s.useEffect)((()=>{W=i}),[]),t.visible?e?(0,c.jsx)(Q,{backgroundColor:t.backgroundColor}):(0,c.jsx)($,{title:t.title,backgroundColor:t.backgroundColor}):null}},97425:(e,t,i)=>{"use strict";i.d(t,{q:()=>d});var n=i(84875),a=i.n(n),s=i(24377);const r="gFMID21sNOX0Lmrk2Q40",o="YMypgfizDPCuBPPoiaOr";var l=i(4637);const d=e=>{let{className:t,tracks:i=[]}=e;return(0,l.jsx)("div",{"data-testid":"track-cloud-item",className:a()(t,r),children:i.slice(0,9).map(((e,t)=>(0,l.jsxs)(s.D,{className:o,variant:"ballad",children:[`${e.title} `,(0,l.jsx)(s.D,{variant:"ballad",children:e.subtitle})]},t)))})}},37120:(e,t,i)=>{"use strict";i.d(t,{H:()=>s});i(71756);var n=i(59496),a=i(87995);const s=e=>{let{children:t,selector:i}=e;const s=(0,n.useRef)(),[r,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{s.current=document.querySelector(i),o(!0)}),[i]),r?(0,a.createPortal)(t,s.current):null}},55292:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(59496),a=i(95682),s=i(4637);const r=e=>{let{children:t,...i}=e;return(0,a.O)()?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(n.Suspense,{children:t,...i})}},11300:(e,t,i)=>{"use strict";i.d(t,{F:()=>m});var n=i(59496),a=i(93483),s=i(87164),r=i(84875),o=i.n(r);const l="ufy3rNNsNBx6IOixSXEG",d="xXxkvFpB54Fne7ykRnXa",c="Cv2QMWaKhio30Ly6ooMy";var u=i(4637);const m=e=>{let{children:t}=e;const{ref:i,breakpoint:r}=(0,a.Db)({[a.Uo.XSMALL]:0,[a.Uo.SMALL]:370}),m=(0,n.useRef)(null),_=(0,n.useRef)(null),h=(0,n.useMemo)((()=>({scrollNodeRef:m,scrollNodeChildRef:_})),[m,_]);return(0,u.jsx)(a.ZU.Provider,{value:r,children:(0,u.jsx)(s.VX.Provider,{value:h,children:(0,u.jsx)("div",{className:l,ref:i,children:(0,u.jsx)("div",{className:o()("encore-dark-theme",d),"data-main-scrollable-node":!0,ref:m,children:(0,u.jsx)("div",{className:c,ref:_,children:t})})})})})}},44983:(e,t,i)=>{"use strict";i.d(t,{I:()=>S});i(31781),i(15089),i(71756);var n=i(59496),a=i(61740),s=i(25349),r=i(75714),o=i(54517),l=i(15449),d=i(41177);const c="HfUwOUORWnCFBbBCn4Kg",u="KhnsXnw36LhVmD7UOdXT",m="PGeKQCU8Y3Y1Q1Ry9PDK",_="VPN6BL1nrllGVNTiflvm",h="PWNKAHL3DVRzhaBAFHVw";var p=i(84875),v=i.n(p),k=i(24377),g=i(17409),E=i(4637);const S=()=>{const e=(0,a.v9)((e=>e.toast)),[t,i]=(0,n.useState)(!1),{onAction:p}=(e=>{const{pathname:t}=(0,d.TH)(),i=(0,d.s0)(),c=(0,a.I0)(),{instance:u}=(0,n.useContext)(r.H);return{onAction:()=>{var n,a;switch(null===(n=e.action)||void 0===n?void 0:n.type){case s._d.unlikedSong:null==u||u.addEntityToLibrary(null===(a=e.action)||void 0===a?void 0:a.payload),"/collection/tracks"===t&&i("/collection/tracks");break;default:case s._d.likedSong:c((0,l.Gr)()),i("/collection/tracks")}c((0,o.j)())}}})(e);return(0,n.useEffect)((()=>{i(!!e.message)}),[e]),e.message?e.type===s.NN.ERROR?(0,E.jsx)("div",{className:v()(m,h,c,{[u]:t}),children:(0,E.jsx)(k.D,{variant:"mestoBold",role:"alert",children:e.message})}):(0,E.jsxs)("div",{className:v()(m,c,{[u]:t,[_]:Boolean(e.action)}),children:[(0,E.jsx)(k.D,{variant:"mesto",role:"alert",children:(y=e.message,y.replaceAll(/<\/?b>/g,""))}),e.action&&(0,E.jsx)(g.o,{buttonSize:"sm",semanticColor:"textBrightAccent",onClick:p,children:null===(S=e.action)||void 0===S?void 0:S.text})]}):null;var S,y}},17366:(e,t,i)=>{"use strict";i.d(t,{W:()=>o});var n=i(88254),a=i(10340),s=i(79779),r=i(4637);const o=e=>{let{uri:t,onLibraryUpdated:i,className:o}=e;const l=(0,a.QT)();return(0,r.jsx)(s.n,{uri:t,onLibraryUpdated:i,inLibraryComponent:e=>(0,r.jsx)(n.P,{onClick:e,buttonSize:"sm","data-testid":"follow-button",className:o,children:l.get("following")}),notInLibraryComponent:e=>(0,r.jsx)(n.P,{onClick:e,buttonSize:"sm","data-testid":"follow-button",className:o,children:l.get("follow")})})}},46931:(e,t,i)=>{"use strict";i.d(t,{y:()=>o});var n=i(79779),a=i(38185),s=i(68193),r=i(4637);const o=e=>{let{uri:t,onLibraryUpdated:i}=e;return(0,r.jsx)(n.n,{uri:t,onLibraryUpdated:i,inLibraryComponent:e=>(0,r.jsx)(s.H,{onClick:e,isAdded:!0,size:s.q.sm,style:{padding:a.nuo}}),notInLibraryComponent:e=>(0,r.jsx)(s.H,{onClick:e,isAdded:!1,size:s.q.sm,style:{padding:a.nuo}})})}},75285:(e,t,i)=>{"use strict";i.d(t,{V:()=>d});var n=i(79779);const a="oM9LvUg_eLgwfMoNy4xW";var s=i(17409),r=i(9622),o=i(10340),l=i(4637);const d=e=>{let{uri:t,onLibraryUpdated:i}=e;const d=(0,o.QT)();return(0,l.jsx)(n.n,{uri:t,onLibraryUpdated:i,inLibraryComponent:e=>(0,l.jsx)(s.o,{className:a,onClick:e,iconOnly:r.a,semanticColor:"textBrightAccent","aria-label":d.get("mwp.context.liked")}),notInLibraryComponent:()=>!1})}},79779:(e,t,i)=>{"use strict";i.d(t,{n:()=>o});i(71756);var n=i(61740),a=i(77645),s=i(10666),r=i(4637);const o=e=>{let{uri:t,inLibraryComponent:i,notInLibraryComponent:o,onLibraryUpdated:l}=e;const d=(0,n.v9)((e=>e.session.isAnonymous)),{removeFromLibrary:c,addToLibrary:u,toggleFromLibrary:m}=(0,s.v)(),[_]=(0,a.E)({entities:[{uri:t}],skipCheck:!Boolean(t)}),h=()=>{d?m(t):_?(c(t),l&&l("removed")):(u(t),l&&l("added"))};return(0,r.jsx)(r.Fragment,{children:_?i(h):o(h)})}},64697:(e,t,i)=>{"use strict";i.d(t,{X:()=>R,S:()=>L});var n=i(29404),a=i(37120),s=i(76045),r=i(91094),o=i(17409),l=i(45498),d=i(24377),c=i(18148),u=i(10340),m=i(76022),_=i(16336),h=i(5065),p=i(32080);const v="zMb46yYwnZqiade3cK16",k="MQ8e3i9shKPzADo8Y4FL",g="iwWFmynUTgNQ7QNDQnbb",E="_ZrPb7E0RAvtcAE9aNEg",S="Wkd3I7_I1BD7k1ww1oin",y="mcUA10akTYTwscXjJwu5",f="DH0sva2Y_gmOU4jXPSEJ",N="dg4sKseLMZjaESdmD5_C";var T=i(4637);const R="#menu",A=e=>({animationDelay:17*e+"ms"}),b=(e,t)=>({name:e.get("mwp.preview-menu.login"),dataTestId:"preview-menu-login",onClick:()=>{t(),(0,r.sQ)({metric_type:s.MetricTypes.COUNTER,what:"login",value:1})}}),C=(e,t)=>({name:e.get("mwp.preview-menu.signup"),dataTestId:"preview-menu-signup",onClick:()=>{t(),(0,r.sQ)({metric_type:s.MetricTypes.COUNTER,what:"signup",value:1})}}),I=`${m.Np}?ref=mweb_loggedout_premium_menu`,L=e=>{let{isMenuVisible:t,onLoginClick:i,onSignUpClick:s,onClose:r,primaryLinks:R=[],secondaryLinks:L=[],showSpotifyLogo:P=!1,isTrapActive:D=!0}=e;const O=(0,u.QT)(),F=(0,h.o)(),w=i&&s?[b(O,i),C(O,s)]:R,x=i&&s?((e,t)=>[{name:e.get("mwp.settings.premium"),onClick:()=>{t({type:"click",intent:"navigate",itemIdSuffix:"top-bar/menu/premium",targetUri:I}),window.open(I,"_blank","noopener")}},{name:e.get("mwp.preview-menu.help"),onClick:()=>{t({type:"click",intent:"navigate",itemIdSuffix:"top-bar/menu/help",targetUri:m.YJ}),window.open(m.YJ,"_blank","noopener")}},{name:e.get("mwp.preview-menu.download"),onClick:()=>{const e=(0,_.IM)().toString();t({type:"click",intent:"navigate",itemIdSuffix:"top-bar/menu/download",targetUri:e}),window.open(e,"_blank","noopener")}},{name:e.get("mwp.preview-menu.privacy"),onClick:()=>{t({type:"click",intent:"navigate",itemIdSuffix:"top-bar/menu/privacy",targetUri:m.lL}),window.open(m.lL,"_blank","noopener")}},{name:e.get("mwp.preview-menu.terms"),onClick:()=>{t({type:"click",intent:"navigate",itemIdSuffix:"top-bar/menu/terms",targetUri:m.zk}),window.open(m.zk,"_blank","noopener")}}])(O,F):L;return(0,T.jsx)(a.H,{selector:"#preview-menu-container",children:(0,T.jsx)(n.Z,{timeout:300,classNames:"preview-menu",in:t,unmountOnExit:!0,children:(0,T.jsx)(p.i,{active:D,children:(0,T.jsxs)("div",{className:v,id:"preview-menu","data-testid":"preview-menu",role:"menu","aria-labelledby":"preview-menu-button",children:[(0,T.jsx)(o.o,{className:N,role:"menuitem","aria-label":O.get("mwp.preview-menu.close"),"data-testid":"cancel-button",onClick:r,iconOnly:l.k,semanticColor:"textBase"}),(0,T.jsxs)("div",{className:k,role:"presentation",children:[w.map(((e,t)=>{let{name:i,onClick:n,dataTestId:a}=e;return(0,T.jsx)(o.o,{className:g,role:"menuitem",onClick:n,"data-testid":a,buttonSize:"lg",style:A(t),condensed:!0,children:(0,T.jsx)(d.D,{variant:"canon",children:i})},i)})),(0,T.jsx)("div",{className:S,role:"none",style:A(w.length),children:(0,T.jsx)("div",{className:y})}),(0,T.jsx)("div",{className:E,children:x.map(((e,t)=>{let{name:i,onClick:n}=e;return(0,T.jsx)(o.o,{className:g,role:"menuitem",onClick:n,buttonSize:"sm",style:A(w.length+1+t),condensed:!0,children:(0,T.jsx)(d.D,{variant:"cello",children:i})},i)}))}),P&&(0,T.jsx)(c.n,{className:f,height:"32"})]})]})})})})}},77867:(e,t,i)=>{"use strict";i.d(t,{A$:()=>n,QA:()=>a,U7:()=>o,bo:()=>s,uJ:()=>r,ud:()=>l});const n="SET_INSTALL_READY",a="APPINSTALLED",s="SHOW_INSTALL_PROMPT",r=e=>{let{installReady:t=!1,source:i="navigation"}=e;return{type:n,installReady:t,source:i}},o=()=>({type:a}),l=()=>({type:s})},6526:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(77867);const a={appInstalled:!1,installReady:!1},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.A$:return{...e,installReady:t.installReady,source:t.source};case n.QA:return{...e,appInstalled:!0};default:return e}}},42779:(e,t,i)=>{"use strict";i.d(t,{Q:()=>h,n:()=>m});var n=i(11606),a=i(15117),s=i(22587),r=i(10340),o=(i(64612),i(5065)),l=i(66363),d=i(63270),c=i(78142),u=i(4637);const m="nowPlayingBar-episodeGetApp";const _=e=>{let{children:t,childRef:i}=e;const c=(0,r.QT)(),_=(0,o.o)();if(!(0,l.a)())return null!=t?t:(0,u.jsx)(u.Fragment,{});const h=s.uf,p=function(e,t){return{isCTA:!0,placement:a.L.topLeft,hideArrow:!0,zIndex:3,maxWidth:"inherit",primaryButtonText:()=>t.get("mwp.nav.get.app"),intentPrimaryButton:"download-app",primaryButtonTargetUri:(0,d.iZ)().toString(),tippyClassName:"tippy-spotify-clips",useSecondaryStyling:!0,shouldHideOnOutsideClick:e=>{let{triggerAction:t}=e;return!(t&&t.type===s.Cy)},getTitle:()=>t.get("action-trigger.download-episodes"),getDescription:()=>t.get("action-trigger.download-episodes-log-in"),onLogInteraction:e}}(_,c),v=m;return(0,u.jsx)(n.P,{id:v,options:p,onPrimaryButtonClick:h,childRef:i,children:null!=t?t:(0,u.jsx)(u.Fragment,{})})},h=e=>(0,u.jsx)(c.ZP,{value:"episode-preview-get-app-trigger",children:(0,u.jsx)(_,{...e})})},16713:(e,t,i)=>{"use strict";i.d(t,{H:()=>r});i(64612);var n=i(66363),a=i(42779),s=i(4637);const r=e=>{var t;return(0,n.a)()?(0,s.jsx)(a.Q,{...e}):null!==(t=e.children)&&void 0!==t?t:(0,s.jsx)(s.Fragment,{})}},9068:(e,t,i)=>{"use strict";i.d(t,{P:()=>d,c:()=>c});var n=i(59496),a=i(11606),s=i(10340),r=i(16336),o=i(5065),l=i(4637);const d={yourLibrary:"activation-trigger-yourlibrary",musicPlusTalkEpisode:"activation-trigger-mme",clips:"activation-trigger-clips"},c=e=>{let{id:t,children:i,deferredLinkUri:d,triggerOptions:c,onHide:u,onShow:m}=e;const _=(0,s.QT)(),h=(0,n.useCallback)((()=>{window.open((0,r.iZ)(d).toString(),"_blank","noopener")}),[d]),p=(0,o.o)(),v={...c,primaryButtonText:()=>_.get("action-trigger.button.get-app"),secondaryButtonText:()=>_.get("action-trigger.button.not-now"),isCTA:!0,intentPrimaryButton:"download-app",primaryButtonTargetUri:(0,r.iZ)(d).toString(),useSecondaryStyling:!0,onLogInteraction:p};return(0,l.jsx)(a.P,{id:t,onPrimaryButtonClick:h,options:v,onHide:u,onShow:m,children:i})}},35831:(e,t,i)=>{"use strict";i.d(t,{f:()=>n});const n="nowPlayingBar-musicPreview"},75849:(e,t,i)=>{"use strict";i.d(t,{x:()=>y});var n=i(59272),a=i(61740),s=i(58582);var r=i(41177);var o=i(11606),l=i(15117),d=i(22587),c=i(10340),u=(i(64612),i(5065)),m=i(35831),_=i(63270),h=i(78142),p=i(4637);const v=e=>{let{children:t,childRef:i}=e;const n=(0,c.QT)(),a=function(e,t){return{isCTA:!0,placement:l.L.topLeft,hideArrow:!0,zIndex:3,maxWidth:"inherit",primaryButtonText:()=>t.get("mwp.nav.get.app"),primaryButtonTargetUri:(0,_.iZ)().toString(),intentPrimaryButton:"download-app",tippyClassName:"tippy-spotify-clips",useSecondaryStyling:!0,shouldHideOnOutsideClick:e=>{let{triggerAction:t}=e;return!(t&&t.type===d.Cy)},getTitle:()=>t.get("listen_to_the_full_track"),getDescription:()=>t.get("get_the_free_app"),onLogInteraction:e}}((0,u.o)(),n),s=d.uf;return(0,p.jsx)(o.P,{id:m.f,options:a,onPrimaryButtonClick:s,childRef:i,children:null!=t?t:(0,p.jsx)(p.Fragment,{})})},k=e=>(0,p.jsx)(h.ZP,{value:"music-preview-get-app-trigger",children:(0,p.jsx)(v,{...e})});var g=i(76022);const E=e=>{let{children:t,childRef:i}=e;const n=(0,c.QT)(),a=function(e,t){return{isCTA:!0,placement:l.L.topLeft,hideArrow:!0,zIndex:3,maxWidth:600,primaryButtonText:()=>t.get("mwp.cta.go.premium"),intentPrimaryButton:"upgrade-to-premium",primaryButtonTargetUri:g.Np,tippyClassName:"tippy-spotify-clips",useSecondaryStyling:!0,shouldHideOnOutsideClick:e=>{let{triggerAction:t}=e;return!(t&&t.type===d.Cy)},getTitle:()=>t.get("listen_to_the_full_track"),getDescription:()=>t.get("go_premium"),onLogInteraction:e}}((0,u.o)(),n);return(0,p.jsx)(o.P,{id:m.f,options:a,onPrimaryButtonClick:()=>{window.open(g.Np,"_blank","noopener")},childRef:i,children:null!=t?t:(0,p.jsx)(p.Fragment,{})})},S=e=>(0,p.jsx)(h.ZP,{value:"music-preview-get-premium-trigger",children:(0,p.jsx)(E,{...e})}),y=e=>{const t=function(){const{search:e}=(0,r.TH)();return e.includes("referral=labelaffiliate")}();var i;return(()=>{var e;const t=(0,a.v9)((e=>e.session.isAnonymous)),i=(0,a.v9)((e=>e.playback));if(!t)return!1;if(null===(e=i.current)||void 0===e||!e.context.uri)return!1;const r=[s.p.TRACK,s.p.PLAYLIST,s.p.PLAYLISTV2,s.p.ALBUM,s.p.ARTIST],o=(0,n.EC)(i.current.context.uri);return!(null==o||!o.type||!r.includes(null==o?void 0:o.type))})()?t?(0,p.jsx)(S,{...e}):(0,p.jsx)(k,{...e}):null!==(i=e.children)&&void 0!==i?i:(0,p.jsx)(p.Fragment,{})}},28894:(e,t,i)=>{"use strict";i.d(t,{M:()=>n});const n=e=>({isCTA:!0,getTitle:()=>e.get("action-trigger.available-in-app-only"),getDescription:()=>e.get("action-trigger.listen-mixed-media-episode")})},66363:(e,t,i)=>{"use strict";i.d(t,{a:()=>s});var n=i(59272),a=i(61740);const s=()=>{var e;const t=(0,a.v9)((e=>e.session.isAnonymous)),i=(0,a.v9)((e=>e.playback));if(!t)return!1;if(null===(e=i.current)||void 0===e||!e.context.uri)return!1;const s=(0,n.EC)(i.current.context.uri);return!(null==s||!s.type||!["episode","show"].includes(null==s?void 0:s.type))}},55609:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});i(71756);var n=i(61740),a=i(9923),s=i(22872),r=i(98322),o=i(10340),l=i(59496),d=i(41177);function c(){const e=(0,o.QT)(),t=(0,n.I0)(),{pathname:i}=(0,d.TH)(),[c,u]=(0,l.useState)(!1);(0,l.useEffect)((()=>{u(!1)}),[i]);const m=()=>{u(!1),t((0,a.xk)(e.get("error.generic")))};return{createCheckoutSession:e=>(u(!0),s.di.createCheckoutSession(new r.c,e).then((e=>{const{body:{redirectToUrl:t}}=e;window.location=t})).catch(m)),onError:m,isLoading:c}}},66850:(e,t,i)=>{"use strict";i.d(t,{C7:()=>o,Lq:()=>r,kx:()=>n,l$:()=>s,sG:()=>a,xX:()=>l});const n="BROWSE_GRID_DATA_REQUEST",a="BROWSE_GRID_DATA_REQUEST_SUCCESS",s="BROWSE_GRID_DATA_REQUEST_ERROR",r=()=>({type:n}),o=e=>({type:a,data:e}),l=()=>({type:s})},60354:(e,t,i)=>{"use strict";i.d(t,{AZ:()=>l,Uc:()=>o,bA:()=>n,es:()=>s,fD:()=>r,fj:()=>a});const n="BROWSE_PAGE_DATA_REQUEST",a="BROWSE_PAGE_DATA_REQUEST_SUCCESS",s="BROWSE_PAGE_DATA_REQUEST_ERROR",r=e=>({type:n,uri:e}),o=(e,t)=>({type:a,uri:e,data:t}),l=e=>({type:s,uri:e})},585:(e,t,i)=>{"use strict";i.d(t,{C:()=>n});let n=function(e){return e[e.Chips=0]="Chips",e[e.Cards=1]="Cards",e}({})},39143:(e,t,i)=>{"use strict";i.d(t,{Tv:()=>o,hx:()=>a,jk:()=>n,kA:()=>l,mM:()=>s,tD:()=>r});const n="BROWSE_GRID_DATA_REQUEST_LEGACY",a="BROWSE_GRID_DATA_REQUEST_LEGACY_SUCCESS",s="BROWSE_GRID_DATA_REQUEST_LEGACY_ERROR",r=()=>({type:n}),o=(e,t)=>({type:a,data:e,enableShows:t}),l=()=>({type:s})},48470:(e,t,i)=>{"use strict";i.d(t,{F:()=>a,K:()=>s});var n=i(99571);function a(e){let{url:t}=e;return{type:n.z,url:t}}function s(e){let{url:t,color:i}=e;return{type:n.T,color:i,url:t}}},8582:(e,t,i)=>{"use strict";i.d(t,{lp:()=>r,Fd:()=>n.F});var n=i(48470),a=(i(71756),i(1186)),s=i(99571);const r=e=>t=>i=>r=>{const o=i(r),l=t.getState();switch(r.type){case s.z:{const{url:i}=r;if(l.colorExtraction.colors[i])break;(0,a.EC)(e,i).then((e=>{let[a]=e;if(a){const{r:e,g:s,b:r}=a.colorDark.rgb;t.dispatch((0,n.K)({url:i,color:[e,s,r]}))}}));break}}return o}},99571:(e,t,i)=>{"use strict";i.d(t,{T:()=>a,z:()=>n});const n="COLOR_EXTRACTOR_REQUEST",a="COLOR_EXTRACTOR_SUCCESS"},77288:(e,t,i)=>{"use strict";i.d(t,{M:()=>x});i(71756);var n=i(59496),a=i(41177),s=i(61740);const r="vtpWRqFpfc1vDE46RBDQ",o="UcWxCuMQZKpXS6bbLrWv",l="KlGFJLp3uZJJ9HRHQtZq",d="yQphlwiELIDgwOuZAPuu",c="nPcwqYmmwDH8QUG0Kgrf",u="qOVs57liBde31ZwrureZ",m="j0WD6JQbRltfk4nAWziQ",_="xcTJzBRSpQiLZCgPaQ5R",h="o26ykgVtQQz06OPAeMSR",p="vxMn7sdJv063f88Trw3P",v="TRxg_nR4uZzjqs_s6m1N",k="RO4fqJbcKNkSdQVhuxq2",g="OK3AsDc3zhWMPelM6_l2",E="TkSaAjgW4Bq4dbX662FQ";var S=i(38185),y=i(24377),f=i(814),N=i(88254),T=i(70308),R=i(10340),A=i(44888),b=i(25893),C=i(66963),I=i(32953);const L=(e,t)=>{const[i,a]=(0,n.useState)({data:null,loading:!0,error:!1}),s=(0,R.QT)();return(0,n.useEffect)((()=>{let i=!0;return a((e=>({...e,loading:!0}))),((e,t,i,n)=>e.build().withHost(I.PQ).withPath(`/v2/concerts/artist/${i}`).withQueryParameters({locale:t,filterByLoc:!1,decorate:!0,geohash:n}).withEndpointIdentifier("/v2/concerts/artist/{artistId}").send())(C.b.getInstance(),s.getLocale(),e,t).then((e=>{i&&a({data:e.body,loading:!1,error:!1})}),(()=>{i&&a({data:null,loading:!1,error:!0})})),()=>{i=!1}}),[e,t,s]),i};var P=i(67568),D=i(94613),O=i(74578),F=i(87097),w=i(4637);const x=(0,n.memo)((()=>{var e;const t=(0,R.QT)(),{artistId:i=""}=(0,a.UO)(),C=(0,s.v9)((e=>{var t;return null===(t=e.richEntities.seoExperiment)||void 0===t?void 0:t["artist-concerts"]})),I=C&&(0,A.qV)(C,i),[x,M]=(0,n.useState)(),{data:U,loading:j,error:B}=L(i,null==x?void 0:x.geonameId);(0,O.Hx)({visible:!0,backgroundColor:S.Snx,title:null==U?void 0:U.artist.name});const[G,V]=(0,n.useState)(!1),Y=(null==x||null===(e=x.location)||void 0===e?void 0:e.split(",")[0])||(null==U?void 0:U.userLocation)||t.get("concerts.default_location");if(j||B||!U)return(0,w.jsx)(F.U,{});if(!U.concerts.length)return(0,w.jsx)(y.D,{variant:"mesto",className:k,children:t.get("concerts.error.no_concerts_found_message",U.userLocation)});const{nearUser:K,otherLocations:H}=(e=>{const t={nearUser:[],otherLocations:[]};return e.forEach((e=>{e.nearUser?t.nearUser.push(e):t.otherLocations.push(e)})),t})(U.concerts);return(0,w.jsxs)("div",{className:r,children:[(0,w.jsxs)("div",{className:l,children:[(0,w.jsx)(f.E,{height:"48",width:"48",className:d,src:U.artist.imageUri}),I?(0,w.jsxs)("div",{className:c,children:[(0,w.jsx)(y.D,{as:"h3",variant:"cello",className:m,children:(0,w.jsx)(b.r,{to:U.artist.uri,children:U.artist.name})}),(0,w.jsx)(y.D,{as:"h3",variant:"mesto",className:u,children:t.get("artist.concerts.tour_dates")})]}):(0,w.jsxs)("div",{className:c,children:[(0,w.jsx)(y.D,{as:"h3",variant:"cello",className:m,children:U.artist.name}),(0,w.jsx)(y.D,{as:"h3",variant:"mesto",className:u,children:t.get("artist")})]})]}),(0,w.jsxs)("div",{className:o,children:[(0,w.jsxs)("div",{className:E,children:[(0,w.jsxs)(y.D,{as:"div",className:g,variant:"cello",children:[t.get("concerts_shows_in")," ",Y]}),(0,w.jsx)(y.D,{as:"h3",variant:"mesto",className:h,onClick:()=>{V(!0)},children:t.get("concerts.change_location")}),(0,w.jsx)(N.P,{"aria-label":"change",className:_,buttonSize:"sm",onClick:()=>{V(!0)},iconOnly:T.V})]}),(0,w.jsx)(D.Z,{show:G,onClickCancel:()=>V(!1),onSelectLocation:e=>{M(e),V(!1)}}),0===K.length?(0,w.jsx)(y.D,{as:"p",variant:"mesto",className:p,children:t.get("artist.concerts.error.not_found_near_location",Y)}):(0,w.jsx)("div",{children:(0,w.jsx)("ul",{className:v,children:K.map((e=>(0,w.jsx)("li",{children:(0,w.jsx)(P.A,{artistNames:e.concert.artists.map((e=>e.name)),venueName:e.concert.venue,venueLocation:e.concert.location,date:e.concert.date,id:e.concert.id})},e.concert.id)))})}),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(y.D,{as:"div",className:g,variant:"cello",children:t.get("concerts.header.other")}),0===H.length?(0,w.jsx)(y.D,{as:"p",variant:"mesto",className:p,children:t.get("artist.concerts.error.not_found")}):(0,w.jsx)("div",{children:(0,w.jsx)("ul",{className:v,children:H.map((e=>(0,w.jsx)("li",{children:(0,w.jsx)(P.A,{artistNames:e.concert.artists.map((e=>e.name)),venueName:e.concert.venue,venueLocation:e.concert.location,date:e.concert.date,id:e.concert.id})},e.concert.id)))})})]})]})]})}))},31903:(e,t,i)=>{"use strict";i.d(t,{k:()=>at});i(71756);var n=i(59496),a=i(66963),s=i(31185),r=(i(70238),i(45880),i(25893)),o=i(38674),l=i(31608),d=i(40644),c=i(24377),u=i(17409),m=i(65398),_=i(60722),h=i(10340),p=i(814),v=i(83822);const k="nfsdpAaRm0At8lOHhkfQ",g="px_1AeRKw_hDhnE2cevr",E="OCF681Obth7i2gxRbXhn",S="Z_LeME4CVJJN2G4w9FA5",y="rC66Bp1kU9gSYnSAsK9m",f="uDrbxCKoBwWwryQCnlqe",N="iiimjaMA7MmFEZF1pKAg",T="bGRPGJo4vaID7YNh9lIW",R="xAb1XeIE_J6uSFAmRLAa",A="MOZp2Jv5S8Ak5BfR2SLG",b="DZGMgQeH7vSpBYY8C7bM",C="S3JoGuh2sZnXuRYNdTlP",I="bYrTUu3tLe5KrXMp2K7A",L="UJJt09Nnpp8bY4MUrejc",P="muv9sEjLTV7JPw7bx6CD",D="WouYvwdurpue7tgF7wkR",O="XkTBWAzLKJ3SoHX7ntnQ",F="HyM1GI88TiItUYmUVdPd",w="LlxdwdwswQodfgiVYs6C",x="VszrQBCRgFsoA2nvrS_Y",M="RIaf5Yxk52TqXfPWLZ6q",U="yj4sUZYxEx2Jo179pPEY",j="ismprn3WlOPqYTaiSQLA",B="dMyxshG5mkRJl4FN8eYg",G="Kzxej3iHx5_6Zm1ONpVd",V="H1XgVXtOQORMCUV52_hp",Y="l42gRIaqSDlm_f2sHbLw",K="awBFL1z4cqvRO1eCHgTM",H="duDvdMn8HVyxIshk63tU",W="OX0Qx5ohl0MhTO9UJ6ya",q="XoTDWAlDH71B7_6o9RPm",Q="ahLcnvc8wHZ82fbZ2WG7",$="IAlRIrYkNiCtcSULLfQZ",z="YA0OdjctuKd3c25S65Fj",Z="BiV1DSH8htGzHsySC2Pt",X="ja39xsoXRNA9NP8D6jVU",J="kpx9YWtZUjvrVLG921WO",ee="qi_s8l9ZTqA3vuThGkFQ",te="oa9MyQSi72bcggqSdN22",ie="ZaAGF1ZxLjpLlhrWea_V",ne="yTCNGV38vihmVdt3jssU",ae="dsT4mGWaqYSl4IdWcHyZ",se="uKjkE1cXHEtH1I8VKDUA",re="f2dlxspK7tSFXlt23Rr7",oe="a4FGs_1DA52ELL4Sa_jX",le="ST2XJdDP_Uol0erkjyUO",de="fiyWGCs9pl9Q3pIIIVyR",ce="CLUrMWB7KF0lks_MzOx4",ue="De0UxRVuTj3eqHnhe_N9",me="RAO8RQPY0fn8IVAOyGs0",_e="op7quyqwODuqF87Rsie0",he="XLTkX1D_4p8vNEgsFfr_",pe="ZTWccjFtgJl_1wltDXUR",ve="fzuBius24_b2NIA1xouC",ke="I71mQNBH_88fmqGqMr9c",ge="EvXKkPI0sT7lWnv3TY3i";var Ee=i(4637);const Se=e=>{let{artists:t,date:i}=e;const n=(0,h.QT)(),a=t.slice(0,3);return(0,Ee.jsxs)("div",{className:f,role:"presentation",children:[a.map((e=>(0,Ee.jsx)(p.E,{src:e.imageUri,className:N,alt:"",imageHeight:"96px",imageWidth:"96px",crop:!0,circle:!0},e.id))),(0,Ee.jsxs)("div",{className:T,children:[(0,Ee.jsx)(c.D,{as:"div",className:R,variant:"minuet",children:(0,v.jw)(n,i)}),(0,Ee.jsx)(c.D,{as:"div",className:A,variant:"cello",children:(0,v.wf)(n,i)})]})]})},ye=(0,n.memo)((e=>{let{concert:t}=e;const i=(0,h.QT)(),n=(0,v.AP)(t);return(0,Ee.jsxs)(r.r,{to:`/concert/${t.id}`,className:ce,children:[(0,Ee.jsxs)("div",{className:ue,children:[(0,Ee.jsx)(c.D,{as:"div",className:_e,variant:"minuetBold",children:(0,v.jw)(i,n)}),(0,Ee.jsx)(c.D,{as:"div",className:he,variant:"cello",children:(0,v.wf)(i,n)})]}),(0,Ee.jsxs)("div",{className:me,children:[(0,Ee.jsx)(c.D,{as:"div",variant:"ballad",className:pe,children:(0,v.CC)(i,t)}),(0,Ee.jsxs)(c.D,{as:"div",variant:"mesto",semanticColor:"textSubdued",className:ve,children:[(0,v.kq)(i,n)," · ",t.venue]})]})]})})),fe=(0,n.memo)((e=>{const t=(0,h.QT)(),{upcomingConcerts:i}=e;return 0===i.length?null:(0,Ee.jsxs)("div",{className:oe,children:[(0,Ee.jsxs)("div",{className:le,children:[(0,Ee.jsx)(c.D,{variant:"cello",children:t.get("concerts_recommended_for_you")}),(0,Ee.jsx)(r.r,{to:"spotify:concerts",children:(0,Ee.jsx)(c.D,{as:"div",variant:"minuetBold",semanticColor:"textSubdued",className:de,children:t.get("view.see-all")})})]}),i.slice(0,3).map((e=>(0,Ee.jsx)(ye,{concert:e.concert},e.concert.id)))]})})),Ne=e=>{let{uri:t,name:i,imageUri:n,artistName:a}=e;return(0,Ee.jsxs)(r.r,{className:ae,to:t,children:[(0,Ee.jsx)(p.E,{src:n,alt:"",imageHeight:"80px",imageWidth:"80px"}),(0,Ee.jsxs)("div",{className:se,children:[(0,Ee.jsx)(c.D,{as:"div",variant:"cello",children:i}),(0,Ee.jsx)(c.D,{as:"div",variant:"mesto",semanticColor:"textSubdued",className:re,children:a})]})]})},Te=e=>{let{albums:t}=e;const i=(0,h.QT)();return 0===t.length?null:(0,Ee.jsxs)("div",{className:ie,children:[(0,Ee.jsx)(c.D,{variant:"cello",as:"div",className:ne,children:i.get("concerts.listen_to_their_music")}),t.slice(0,3).map((e=>(0,Ee.jsx)(Ne,{imageUri:e.imageUri,uri:e.uri,name:e.name,artistName:e.artistName},e.uri)))]})};var Re=i(29404),Ae=i(37120),be=i(39949),Ce=i(70308);const Ie=e=>{let{imageUri:t,uri:i,name:n}=e;const a=t?(0,Ee.jsx)(p.E,{src:t,className:j,crop:!0,circle:!0,alt:"",imageHeight:"48px",imageWidth:"48px"}):(0,Ee.jsx)("div",{className:Y,children:(0,Ee.jsx)(be.a,{iconSize:24})});return(0,Ee.jsxs)(r.r,{className:F,to:i,children:[a,(0,Ee.jsxs)("div",{className:x,children:[(0,Ee.jsx)(c.D,{as:"div",variant:"ballad",children:n}),(0,Ee.jsx)(Ce.V,{className:K,iconSize:16})]})]})},Le=e=>{let{artists:t,onClickMoreArtists:i}=e;const n=(0,h.QT)(),a=(e,t)=>e.imageUri?(0,Ee.jsx)(p.E,{src:e.imageUri,className:`${B} ${t?G:""}`,crop:!0,circle:!0,alt:"",imageHeight:"28px",imageWidth:"28px"}):(0,Ee.jsx)("div",{className:`${Y} ${t?G:""}`,children:(0,Ee.jsx)(be.a,{iconSize:24})}),s=(0,Ee.jsxs)("div",{className:U,children:[a(t[0],!1),a(t[1],!0)]});return(0,Ee.jsxs)("button",{className:w,onClick:i,children:[s,(0,Ee.jsxs)("div",{className:V,children:[(0,Ee.jsx)(c.D,{as:"div",variant:"mestoBold",children:`${t[0].name} • ${t[1].name} `}),t.length-2>0?(0,Ee.jsx)(c.D,{as:"div",variant:"mesto",semanticColor:"textSubdued",className:M,children:n.get("concerts.artist_lineup_and_more",t.length-2)}):null]})]})},Pe=e=>{let{artists:t,onClickMoreArtists:i}=e;const n=(0,h.QT)();return(0,Ee.jsxs)("div",{className:D,children:[(0,Ee.jsx)(c.D,{variant:"cello",as:"div",className:O,children:n.get("concert_lineup")}),1===t.length?(0,Ee.jsx)(Ie,{imageUri:t[0].imageUri,name:t[0].name,uri:t[0].uri}):2===t.length?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(Ie,{imageUri:t[0].imageUri,name:t[0].name,uri:t[0].uri}),(0,Ee.jsx)(Ie,{imageUri:t[1].imageUri,name:t[1].name,uri:t[1].uri})]}):t.length>=3?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(Ie,{imageUri:t[0].imageUri,name:t[0].name,uri:t[0].uri}),(0,Ee.jsx)(Le,{onClickMoreArtists:i,artists:t.slice(1)})]}):null]})},De="a2Bvfn44teAWj6QVWPMj",Oe=e=>{let{artists:t,show:i=!1,onCancelClick:n}=e;const a=(0,h.QT)();return(0,Ee.jsx)(Ae.H,{selector:"body",children:(0,Ee.jsx)(Re.Z,{timeout:200,classNames:"more-artists-overlay",in:i,unmountOnExit:!0,children:(0,Ee.jsxs)("div",{className:De,children:[(0,Ee.jsxs)("div",{className:H,children:[(0,Ee.jsx)(c.D,{className:W,variant:"cello",children:a.get("artists")}),t.map((e=>(0,Ee.jsx)(Ie,{imageUri:e.imageUri,name:e.name,uri:e.uri},e.uri)))]}),(0,Ee.jsx)(u.o,{className:q,onClick:n,children:(0,Ee.jsx)(c.D,{className:Q,variant:"ballad",children:a.get("close")})})]})})})};var Fe=i(29217),we=i(99730),xe=i(5065),Me=i(97422),Ue=i(77451);const je=e=>{const t=(0,h.QT)(),{ticketLink:i,handleConcertLinkClick:n}=e;return(0,Ee.jsxs)(r.r,{draggable:!1,className:Z,to:i.url,target:"_blank",onClick:n,children:[(0,Ee.jsxs)("div",{className:X,children:[(0,Ee.jsx)("div",{className:J,children:(0,Ee.jsx)(Me.Ee,{className:ee,loading:"eager",src:i.imageURL,height:"100%",width:"100%",children:(0,Ee.jsx)(Fe.i,{className:te,iconSize:24})})}),(0,Ee.jsx)(c.D,{children:i.partnerDisplayName})]}),(0,Ee.jsx)(we.D,{buttonSize:"sm",iconTrailing:()=>(0,Ee.jsx)(Ue.h,{iconSize:12}),children:(0,Ee.jsx)(c.D,{variant:"mestoBold",children:t.get("concert_find_tickets")})})]})},Be=e=>{let{ticketLinks:t}=e;const i=(0,h.QT)(),n=(0,xe.o)();return 0===t.length?null:(0,Ee.jsxs)("div",{className:D,children:[(0,Ee.jsx)(c.D,{variant:"cello",as:"div",className:$,children:i.get("concert.header.available_tickets_from")}),(0,Ee.jsx)("div",{className:z,children:t.map((e=>(0,Ee.jsx)(je,{ticketLink:e,handleConcertLinkClick:()=>{return t=e.url,void n({targetUri:t,intent:"find-concert",type:"click"});var t}},e.partnerDisplayName)))})]})};var Ge=i(41177);const Ve=e=>{let{isAnonymous:t,clickThruUrl:i}=e;const n=(0,h.QT)(),a=(0,xe.o)(),{concertId:s}=(0,Ge.UO)();return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:ke,children:(0,Ee.jsx)(r.r,{to:i,target:"_blank",children:(0,Ee.jsx)(we.D,{onClick:()=>{a({targetUri:`spotify:concert:${s}`,intent:"find-concert",type:"click"})},children:(0,Ee.jsx)(c.D,{as:"div",variant:"balladBold",children:n.get("concert.button.see_tickets")})})})}),(0,Ee.jsx)("div",{style:{height:t?"150px":"96px"}})]})};var Ye=i(61740),Ke=i(9923),He=i(52123),We=i(69773),qe=i(74578),Qe=(i(40542),i(73665)),$e=i(88254),ze=i(56672);const Ze=e=>{let{username:t,concertId:i}=e;const r=`spotify:concert:${i}`,[o,l]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1);(0,n.useEffect)((()=>{l(!0),(async(e,t)=>{const{body:i}=await(0,s.A0)(a.b.getInstance(),e,t);return i.found[0]})(t,r).then((e=>{c(e),l(!1)}))}),[t,r]);return{isLoading:o,inCollection:d,toggle:()=>{if(o)return;const e=d?s.FB:s.l7;c(!d),l(!0),e(a.b.getInstance(),i).catch((()=>{c(d)})).finally((()=>{l(!1)}))}}},Xe=e=>{const t=(0,h.QT)(),{isLoading:i,inCollection:n,toggle:a}=Ze(e);return n?(0,Ee.jsx)(we.D,{buttonSize:"sm",iconLeading:Qe.N,disabled:i,onClick:a,"aria-pressed":"true",className:ge,children:t.get("concerts_interested")}):(0,Ee.jsx)($e.P,{buttonSize:"sm",iconLeading:ze.S,disabled:i,onClick:a,"aria-pressed":"false",className:ge,children:t.get("concerts_interested")})},Je=(0,n.memo)((e=>{const{category:t,venue:i,location:n,lat:a,lon:s}=e.concert;if("ONLINE"===t)return(0,Ee.jsx)(c.D,{as:"div",semanticColor:"textSubdued",variant:"mesto",children:i});const o=new URL("https://maps.google.com/");return o.searchParams.set("q",`${i},${n}`),o.searchParams.set("ll",`${a},${s}`),(0,Ee.jsx)(r.r,{to:o.href,target:"_blank",children:(0,Ee.jsx)(c.D,{as:"div",semanticColor:"textSubdued",variant:"mesto",children:`${i}, ${n}`})})})),et=(0,n.memo)((()=>{const e=(0,h.QT)().get("artist.concerts.footer_text"),[t,i]=e.split('<a href="spotify:app:concerts" data-section-id="footer">'),[n,a]=(null==i?void 0:i.split("</a>"))||[];return(0,Ee.jsx)("div",{className:S,children:(0,Ee.jsxs)(c.D,{variant:"ballad",children:[t,(0,Ee.jsx)(r.r,{className:y,to:"/concerts",children:n}),a]})})})),tt=e=>{let{data:t}=e;const i=(0,h.QT)(),a=(0,d.g)(),s=(0,Ye.v9)((e=>{var t,i;return null===(t=e.session.me)||void 0===t||null===(i=t.profile)||void 0===i?void 0:i.username})),[r,p]=(0,n.useState)(!1),S=(0,o.W6)(l.Aw,{loadingValue:!1}),y=(0,o.W6)(l.cF,{loadingValue:!1}),f=(()=>{const e=(0,Ye.I0)(),t=(0,h.QT)();return i=>{const n=`https://open.spotify.com/concert/${i.id}`;e((0,Ke.OW)((0,v.CC)(t,i),i.venue,n))}})(),N=(0,He.V)(),{color:T,albums:R,artists:A,upcomingConcerts:D}=t,{concert:O,clickThruUrl:F}=t.concert,w=(0,v.AP)(O);return(0,qe.Hx)({visible:!0,backgroundColor:T,title:(0,v.CC)(i,O,"entity")}),(0,We.j)(We.A),(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("section",{className:g,children:(0,Ee.jsxs)("div",{className:E,children:[a&&(0,Ee.jsx)(et,{}),(0,Ee.jsxs)("div",{className:k,style:{backgroundColor:T},children:[(0,Ee.jsx)(Se,{date:w,artists:A.slice(0,3)}),(0,Ee.jsx)(c.D,{as:"div",variant:"canon",className:b,children:(0,v.CC)(i,O,"entity")}),(0,Ee.jsxs)("div",{className:C,children:[(0,Ee.jsxs)(c.D,{as:"div",semanticColor:"textSubdued",variant:"mesto",children:[(0,v.xE)(i,w)," • ",(0,v.hK)(i,w)]}),(0,Ee.jsx)(Je,{concert:O})]}),(0,Ee.jsxs)("div",{className:I,children:[y&&s&&(0,Ee.jsx)(Xe,{concertId:O.id,username:s}),(0,Ee.jsx)(u.o,{className:L,iconOnly:N?m.M:_.o,"aria-label":i.get("mwp.list.item.share"),onClick:()=>{f(O)}})]})]}),(0,Ee.jsxs)("div",{className:P,children:[(0,Ee.jsx)(Pe,{artists:A,onClickMoreArtists:()=>p(!0)}),S&&(0,Ee.jsx)(Be,{ticketLinks:O.ticketers||[]}),(0,Ee.jsx)(fe,{upcomingConcerts:D}),(0,Ee.jsx)(Te,{albums:R})]}),!S&&(0,Ee.jsx)(Ve,{isAnonymous:a,clickThruUrl:F})]})}),(0,Ee.jsx)(Oe,{show:r,onCancelClick:()=>p(!1),artists:A.slice(1)})]})};var it=i(87097);const nt={data:null,loading:!0,error:!1},at=(0,n.memo)((()=>{const{concertId:e}=(0,Ge.UO)(),{data:t,loading:i,error:r}=(e=>{const[t,i]=(0,n.useState)(nt);return(0,n.useEffect)((()=>{if(!e)return()=>{};let t=!0;return i((e=>({...e,loading:!0}))),(0,s.gq)(a.b.getInstance(),e).then((e=>{t&&i({data:e.body,loading:!1,error:!1})}),(()=>{t&&i({data:null,loading:!1,error:!0})})),()=>{t=!1}}),[e]),t})(e);return i||r||!t?(0,Ee.jsx)(it.U,{}):(0,Ee.jsx)(tt,{data:t})}))},93737:(e,t,i)=>{"use strict";i.d(t,{A:()=>z});i(31781),i(15089),i(71756);var n=i(38185),a=i(24377),s=i(59496),r=i(47393),o=i(41177),l=i(10340),d=i(74578),c=i(16422),u=i(5065),m=i(88254),_=i(17249),h=i(69773),p=i(50421),v=i(83822),k=i(2364),g=i(39292),E=i(72539),S=i(35205),y=i(83474),f=i(25893),N=i(4637);function T(e){var t;let{loading:i,event:n,onOpenGroupedEvent:a}=e;const s=(0,l.QT)(),r=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,o=(0,v.CC)(s,r),d="Multiple locations"===n.venue?s.get("concerts.multiple_venues"):`${n.venue} · ${n.location}`,c=[{url:n.concerts[0].concert.artists[0].imageUri}],u=()=>(0,N.jsxs)("div",{children:[(0,N.jsx)(k.x,{sources:c,loading:i,Placeholder:(0,N.jsx)(S.j,{title:o,type:y.p.ARTIST}),radius:!0}),(0,N.jsx)(E.m,{children:(0,v.Bc)(s,n).toUpperCase()}),(0,N.jsx)(g.l,{paddingBottom:"0",children:o}),(0,N.jsx)(E.m,{children:d})]});return n.concerts.length>1?(0,N.jsx)("div",{role:"button",onClick:()=>a(n),onKeyPress:()=>a(n),tabIndex:0,children:u()}):(0,N.jsx)(f.r,{to:`/concert/${n.concerts[0].concert.id}`,children:u()})}const R=(0,s.memo)((e=>{const{title:t,id:i,events:n,onOpenGroupedEvent:s}=e;return 0===n.length?null:(0,N.jsxs)("section",{className:p.Z.concertsHubSection,"aria-labelledby":`concert-shelf-${i}`,children:[(0,N.jsx)("div",{className:p.Z.concertsHubSectionHeader,children:(0,N.jsx)(a.D.h3,{variant:"cello",id:`concert-shelf-${i}`,children:t})}),(0,N.jsx)("div",{className:p.Z.concertsGrid,children:n.map(((e,t)=>(0,N.jsx)(T,{event:e,onOpenGroupedEvent:s},`concert-card-${t}`)))})]})})),A=e=>(0,N.jsxs)("div",{className:p.Z.emptyStateWrapper,children:[(0,N.jsx)(a.D,{as:"h1",variant:"alto",className:p.Z.emptyStateTitle,children:_.ag.get("concerts.error.no_concerts_found_title")}),(0,N.jsx)(a.D,{as:"h2",variant:"cello",weight:"book",semanticColor:"textSubdued",className:p.Z.emptyStateMessage,children:_.ag.get("concerts.error.no_concerts_found_message",e.locationName)})]});var b=i(87097);const C=(0,s.memo)((e=>{const{eventGroups:t,isLoading:i,onOpenGroupedEvent:n,locationName:a}=e;return i?(0,N.jsx)(b.U,{}):t?0===t.length||0===t[0].events.length?(0,N.jsx)(A,{locationName:a}):(0,N.jsx)("div",{children:t.map((e=>(0,N.jsx)("div",{className:p.Z.dateSection,children:(0,N.jsx)(R,{title:_.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),id:"all-by-date",events:e.events,onOpenGroupedEvent:n})},e.date)))}):null})),I=(0,s.memo)((e=>{var t;const{setLocationName:i,handleOpenGroupedEvent:n,setBackgroundImageUrl:a}=e,r=(0,c.s_)(),{startDate:o,endDate:l}=(0,c.Av)(new Date),{data:d,isLoading:u,hasNextPage:k,isFetchingNextPage:g,fetchNextPage:E}=(0,c.Mj)({geonameId:r,startDate:o,endDate:l}),S=(0,c.Ul)(r),y=(null==d||null===(t=d.pages[0])||void 0===t?void 0:t.userLocation)||_.ag.get("concerts.default_location");(0,s.useEffect)((()=>{i(y),a(null==d?void 0:d.pages[0].headerImageUri)}),[y,d,i,a]),(0,h.j)(`${_.ag.get("concerts_shows_in")} ${y}`);const f=(0,s.useMemo)((()=>{var e;return(0,v.k9)(null!==(e=null==d?void 0:d.pages)&&void 0!==e?e:[])}),[null==d?void 0:d.pages]);return(0,N.jsxs)("div",{children:[(0,N.jsx)(C,{isLoading:u,locationName:y,eventGroups:f,onOpenGroupedEvent:n}),k&&(0,N.jsx)("div",{className:p.Z.loadMore,children:(0,N.jsx)(m.P,{disabled:g,onClick:()=>{E()},children:_.ag.get("concerts.load_more")})}),!u&&S.data&&(0,N.jsx)(R,{title:_.ag.get("concerts_popular_near_you"),id:"popular",events:S.data.events,onOpenGroupedEvent:n})]})})),L=(0,s.memo)((e=>{const t=(0,l.QT)(),{events:i,location:n,onOpenGroupedEvent:s}=e;if(0===i.length)return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(a.D,{as:"div",className:p.Z.concertsHubNoConcertsTitle,variant:"cello",children:t.get("concerts.error.no_concerts_found_title")}),(0,N.jsx)(a.D,{as:"div",className:p.Z.concertsHubNoConcertsTitle,variant:"mesto",children:t.get("concerts.error.no_concerts_found_message",n)})]});const r={popular:[],recommended:[]};return i.forEach((e=>{switch(e.source){case"recommendation":r.recommended.push(e);break;case"popular":r.popular.push(e)}})),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(R,{title:t.get("concerts_recommended_for_you"),id:"recommended",events:r.recommended,onOpenGroupedEvent:s}),(0,N.jsx)(R,{title:t.get("concerts_popular_near_you"),id:"popular",events:r.popular,onOpenGroupedEvent:s})]})})),P=L,D=(0,s.memo)((e=>{const{setLocationName:t,handleOpenGroupedEvent:i,setBackgroundImageUrl:n}=e,a=(0,c.s_)(),{data:r,error:o,isLoading:l}=(0,c.VL)({geonameId:a});(0,h.j)("Personalized concerts for you on Spotify");const d=(null==r?void 0:r.userLocation)||_.ag.get("concerts.default_location");return(0,s.useEffect)((()=>{t(d),n(null==r?void 0:r.headerImageUri)}),[d,r,t,n]),l?(0,N.jsx)(b.U,{}):o?(0,N.jsx)("p",{children:_.ag.get("concert.error.general_error_title")}):r?(0,N.jsx)(P,{events:r.events,location:d,onOpenGroupedEvent:i}):(0,N.jsx)("p",{children:_.ag.get("concert.error.general_error_title")})}));var O=i(94613),F=i(29404),w=i(3081),x=i(814),M=i(17409),U=i(37120);const j=(0,s.memo)((e=>{const{concert:t}=e,i=(0,l.QT)(),n=(0,v.CC)(i,t),{venue:s,location:r}=t,o=(0,v.AP)(t);return(0,N.jsxs)(f.r,{to:`/concert/${t.id}`,className:p.Z.groupedConcertRow,children:[(0,N.jsxs)("div",{className:p.Z.groupedConcertCalendar,"aria-hidden":!0,children:[(0,N.jsx)(a.D,{as:"div",className:p.Z.groupedConcertCalendarMonth,variant:"minuetBold",children:(0,v.jw)(i,o)}),(0,N.jsx)(a.D,{as:"div",className:p.Z.groupedConcertCalendarDate,variant:"cello",children:(0,v.wf)(i,o)})]}),(0,N.jsxs)("div",{className:p.Z.groupedConcertInfo,children:[(0,N.jsx)(a.D,{as:"div",variant:"ballad",className:p.Z.groupedConcertTitle,children:n}),(0,N.jsx)(w.T,{children:(0,v.jx)(i,o)}),(0,N.jsxs)(a.D,{as:"div",variant:"mesto",className:p.Z.groupedConcertWeekdayTimeAndVenue,children:[(0,v.kq)(i,o)," · ",s,", ",r]})]})]})})),B=(0,s.memo)((e=>{const t=(0,l.QT)(),{event:i,location:n,onClickCancel:s}=e,r=i.concerts.map((e=>e.concert));if(0===r.length)return null;const o=r[0].artists[0];return(0,N.jsxs)("div",{className:p.Z.groupConcert,children:[(0,N.jsxs)("div",{className:p.Z.artistContainer,children:[(0,N.jsx)(x.E,{height:"48",width:"48",className:p.Z.artistImage,src:o.imageUri}),(0,N.jsxs)("div",{className:p.Z.artistInfoContainer,children:[(0,N.jsx)(a.D,{as:"h3",variant:"cello",className:p.Z.artistName,children:o.name}),(0,N.jsx)(a.D,{as:"h3",variant:"mesto",className:p.Z.concertsCount,children:`${t.get("concerts.count_near_location",r.length,n)}`})]})]}),(0,N.jsx)("div",{children:r.map((e=>(0,N.jsx)(j,{concert:e},e.id)))}),(0,N.jsx)(M.o,{className:p.Z.closeButton,onClick:s,children:(0,N.jsx)(a.D,{className:p.Z.closeButtonText,variant:"ballad",children:t.get("close")})})]})})),G=e=>{const{event:t,location:i,onClickCancel:n}=e;return(0,N.jsx)(U.H,{selector:"body",children:(0,N.jsx)(F.Z,{timeout:200,classNames:{enter:p.Z.overlayEnter,enterActive:p.Z.overlayEnterActive,exit:p.Z.overlayExit,exitActive:p.Z.overlayExitActive},in:!!t,unmountOnExit:!0,children:(0,N.jsx)("div",{className:p.Z.overlay,children:t&&(0,N.jsx)(B,{event:t,location:i,onClickCancel:n})})})})};var V=i(55887),Y=i(72954),K=i(32837),H=i(86954),W=i(48120),q=i(40644);const Q=e=>{const t=(0,l.QT)(),{location:i,backgroundImageUrl:n,onClickChangeLocation:s,currentViewType:o}=e,d=n&&`url("${n}")`,c=(0,q.g)();return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:p.Z.headerBackgroundContainer,style:{backgroundImage:d},children:[(0,N.jsx)("div",{className:p.Z.headerTitle,children:(0,N.jsx)(a.D,{as:"h1",variant:"alto",children:t.get("live_events.label")})}),!c&&(0,N.jsx)(V.l,{list:(0,N.jsx)("nav",{"aria-label":"Main",children:(0,N.jsxs)(Y.F,{className:p.Z.navBarList,children:[(0,N.jsx)(K.c,{id:"recommended_for_you_link",label:t.get("live_events.for_you_tab"),active:"recommended"===o,className:p.Z.navItem,component:r.rU,to:"/concerts",sentenceCase:!0},0),(0,N.jsx)(K.c,{id:"concerts_interested_link",label:t.get("live_events.all_events_tab"),active:"all"===o,className:p.Z.navItem,component:r.rU,to:"/concerts?filter=all",sentenceCase:!0},1)]})}),className:p.Z.navBar})]}),(0,N.jsx)("div",{className:p.Z.headerFilters,children:(0,N.jsxs)(H.A,{onClick:s,children:[(0,N.jsx)(W.n,{iconSize:16,className:p.Z.locationButtonIcon}),i]})})]})},$=(e,t)=>{if(!e)return"/concerts";const i=null==t?void 0:t.normalize().replaceAll(/\W+/g,"-");return i?`/concerts/location/${e}-${i}`:`/concerts/location/${e}`},z=()=>{const e=(0,l.QT)(),t=(0,c.i7)(),[i,m]=(0,s.useState)(),[_]=(0,r.lr)(),[h,v]=(0,s.useState)(""),[k,g]=(0,s.useState)(),E=(0,o.s0)(),S=(0,u.o)();(0,d.Hx)({visible:!0,backgroundColor:n.Snx,title:e.get("live_events.label")});const y=e=>{m({type:"groupConcert",event:e});const t=e.artists[0];S({type:"click",intent:"open-grouped-live-event",targetUri:t&&`spotify:artist:${t}`})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("section",{className:p.Z.headerWrapper,children:[(0,N.jsx)(Q,{location:h,backgroundImageUrl:k,onClickChangeLocation:()=>{m({type:"locationSelect"})},currentViewType:t.type}),(0,N.jsxs)("div",{className:p.Z.concertsHubContainer,children:["all"===t.type?(0,N.jsx)(I,{setLocationName:v,setBackgroundImageUrl:g,handleOpenGroupedEvent:y}):(0,N.jsx)(D,{setLocationName:v,setBackgroundImageUrl:g,handleOpenGroupedEvent:y}),(0,N.jsx)("div",{className:p.Z.disclaimerContainer,children:(0,N.jsx)(a.D,{as:"div",className:p.Z.disclaimer,variant:"finale",semanticColor:"textSubdued",children:e.get("live_events.disclaimer")})})]})]}),(0,N.jsx)(O.Z,{show:"locationSelect"===(null==i?void 0:i.type),onClickCancel:()=>m(void 0),onSelectLocation:e=>{m(void 0),S({type:"click",intent:"change-live-events-location"}),e.geonameId&&E({pathname:$(e.geonameId,e.location),search:`?${_.toString()}`})}}),(0,N.jsx)(G,{event:"groupConcert"===(null==i?void 0:i.type)?i.event:void 0,location:h,onClickCancel:()=>m(void 0)})]})}},94613:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});i(71756);var n=i(59496),a=i(29404),s=i(17409),r=i(55785),o=i(74033),l=i(24377),d=i(10340),c=i(37120),u=i(50421),m=i(16422),_=i(84875),h=i.n(_),p=i(80823),v=i(4637);const k=e=>{const t=(0,d.QT)(),{onClickCancel:i,onSelectLocation:a}=e,[c,_]=(0,n.useState)(""),{suggestions:k,fetchError:g}=(0,m.HU)(c);return(0,v.jsxs)("div",{className:h()(u.Z.overlay,u.Z.locationSelector,"encore-dark-theme"),children:[(0,v.jsx)("div",{className:u.Z.stickyLocationSearchBar,children:(0,v.jsxs)("div",{className:u.Z.inputAndBackButtonWrapper,children:[(0,v.jsx)(s.o,{semanticColor:"textBase",iconOnly:r.D,onClick:i,"aria-label":t.get("navbar.go-back")}),(0,v.jsx)(p.M,{placeholder:t.get("concerts.input.search_placeholder"),onChange:_,value:c,focusOnMount:!0})]})}),(0,v.jsxs)("div",{className:u.Z.locationSelectorResult,children:[g&&(0,v.jsxs)("div",{className:u.Z.changeLocationError,children:[(0,v.jsx)(o.l,{iconSize:16,className:u.Z.changeLocationErrorIcon}),(0,v.jsxs)(l.D,{as:"div",children:["network"===g&&t.get("concert.error.general_error_title"),"noResults"===g&&t.get("concert.error.no_locations_found_subtitle")]})]}),k.map(((e,t)=>(0,v.jsx)(l.D,{as:"div",className:u.Z.locationSelectorResultRow,onClick:()=>a(e),children:e.location},t)))]}),(0,v.jsx)(s.o,{className:u.Z.closeButton,onClick:i,children:(0,v.jsx)(l.D,{className:u.Z.closeButtonText,variant:"ballad",children:t.get("close")})})]})},g=e=>{const{show:t,onClickCancel:i,onSelectLocation:n}=e;return(0,v.jsx)(c.H,{selector:"body",children:(0,v.jsx)(a.Z,{timeout:200,classNames:{enter:u.Z.overlayEnter,enterActive:u.Z.overlayEnterActive,exit:u.Z.overlayExit,exitActive:u.Z.overlayExitActive},in:t,unmountOnExit:!0,children:(0,v.jsx)(k,{onClickCancel:i,onSelectLocation:n})})})}},16422:(e,t,i)=>{"use strict";i.d(t,{VL:()=>h,i7:()=>f,Av:()=>S,s_:()=>g,HU:()=>y,Mj:()=>p,Ul:()=>v});i(71756);var n=i(59496),a=i(9102),s=i(47393),r=i(66963),o=i(31185),l=i(41177),d=i(40644);const c=e=>{const[t,{geonameId:i}]=e.queryKey;return(async e=>(await(0,o.$0)(r.b.getInstance(),e)).body)(i)},u=e=>{const[,,t]=e.queryKey;return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;const{geonameId:i,startDate:n,endDate:a}=t;return(await(0,o.ij)(r.b.getInstance(),{page:e,geonameId:i,startDate:n,endDate:a})).body}(e.pageParam,t)},m=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,o.YA)(r.b.getInstance(),void 0,e)).body)(t)},_=6e5,h=e=>{const t=(0,a.useQueryClient)();return(0,a.useQuery)(["concerts",e],c,{staleTime:_,keepPreviousData:!0,onSuccess(i){if(e.geonameId||!i.userLocationGeonameId)return;const n=parseInt(i.userLocationGeonameId,10),a=["concerts",{...e,geonameId:n}];t.setQueryData(a,(()=>i))}})},p=e=>(0,a.useInfiniteQuery)(["concerts","all",e],u,{staleTime:_,keepPreviousData:!0,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}),v=e=>(0,a.useQuery)(["concerts","popular",{geonameId:e}],m,{staleTime:_,keepPreviousData:!0}),k=/^(\d+)/,g=()=>{const{location:e}=(0,l.UO)(),[,t]=(null==e?void 0:e.match(k))||[];if(t)try{return parseInt(t,10)}catch(i){return}},E=e=>e.toISOString().substring(0,10),S=e=>{var t,i,n;const[a]=(0,s.lr)(),r=null===(t=a.get("startDate"))||void 0===t?void 0:t.trim(),o=null===(i=a.get("endDate"))||void 0===i?void 0:i.trim(),l=null===(n=a.get("when"))||void 0===n?void 0:n.trim(),d=l&&((e,t)=>{const i=new Date(e);switch(i.setDate(e.getDate()+(6-e.getDay())),t){case"thisWeek":return{startDate:e,endDate:i};case"thisWeekend":{const e=new Date(i);return e.setDate(i.getDate()+1),{startDate:i,endDate:e}}case"nextWeek":{const t=new Date(e);t.setDate(t.getDate()+(7-t.getDay()));const i=new Date(t);return i.setDate(t.getDate()+6),{startDate:t,endDate:i}}case"nextMonth":{const t=e.getMonth()+1,i=e.getFullYear()+(t>11?1:0);return{startDate:new Date(i,t%12,1),endDate:new Date(i,t%12+1,0)}}default:return}})(e,l);return d?{startDate:E(d.startDate),endDate:E(d.endDate)}:{startDate:r,endDate:o}},y=e=>{const[t,i]=(0,n.useState)([]),[a,s]=(0,n.useState)(),l=((e,t)=>{const[i,a]=(0,n.useState)(e);return(0,n.useEffect)((()=>{const i=setTimeout((()=>a(e)),t);return()=>clearTimeout(i)}),[e,t]),i})(e,250);return(0,n.useEffect)((()=>{if(s(void 0),l.trim().length<=1)return void i([]);let e=!0;return(0,o.HY)(r.b.getInstance(),l).then((t=>{if(!e)return;const n=t.body.results;i(n),n.length>0?s(void 0):s("noResults")}),(()=>{i([]),s("network")})),()=>{e=!1}}),[l]),{suggestions:t,fetchError:a}},f=()=>{var e;const t=(0,d.g)(),i=g(),[n]=(0,s.lr)(),a=null===(e=n.get("filter"))||void 0===e?void 0:e.trim();return t||"all"===a?{type:"all",geonameId:i}:{type:"recommended",geonameId:i}}},67568:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(59496),a=i(24377),s=i(10340),r=i(83822),o=i(25893),l=i(32526),d=i(4637);function c(e,t,i,n){return"ONLINE"===n&&null!==t?t:[t,i].filter(Boolean).join(e.getSeparator())}const u=n.memo((function(e){let{category:t,venueName:i,venueLocation:n,date:u,id:m,artistNames:_}=e;const h=(0,s.QT)(),p=new Date(u);return(0,d.jsxs)(o.r,{to:`/concert/${m}`,className:l.Z.item,children:[(0,d.jsxs)("time",{className:l.Z.date,dateTime:u,children:[(0,d.jsx)(a.D,{as:"h5",variant:"minuetBold",className:l.Z.dateMonth,children:(0,r.jw)(h,p)}),(0,d.jsx)(a.D,{as:"h1",variant:"canon",className:l.Z.dateDay,children:(0,r.wf)(h,p)})]}),(0,d.jsxs)("div",{className:l.Z.info,children:[(0,d.jsx)(a.D,{as:"h3",variant:"balladBold",semanticColor:"textBase",className:l.Z.title,children:(0,r.UE)(h,_)}),(0,d.jsxs)(a.D,{as:"p",variant:"mesto",className:l.Z.timeAndVenue,children:[(0,d.jsx)("time",{className:l.Z.time,children:(0,r.xE)(h,p)}),c(h,i,n,t)]})]})]})}))},83822:(e,t,i)=>{"use strict";i.d(t,{AP:()=>o,Bc:()=>r,CC:()=>a,UE:()=>n,hK:()=>_,jw:()=>d,jx:()=>u,k9:()=>p,kq:()=>m,wf:()=>c,xE:()=>l});i(71756);const n=(e,t)=>1===t.length?e.get("concert.header.entity_title_1",...t):2===t.length?e.get("concert.header.entity_title_2",...t):3===t.length?e.get("concert.header.entity_title_3",...t):4===t.length?e.get("concert.header.entity_title_4",...t):t.length>4?e.get("concert.header.entity_title_more",...t):"",a=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"row";if(t.title&&(t.festival||!t.artists.length))return t.title;const a=t.artists.map((e=>e.name));return"row"===i?n(e,a):((e,t)=>1===t.length?e.get("concert.header.upcoming_concert_title_1",...t):2===t.length?e.get("concert.header.upcoming_concert_title_2",...t):3===t.length?e.get("concert.header.upcoming_concert_title_3",...t):4===t.length?e.get("concert.header.upcoming_concert_title_4",...t):t.length>4?e.get("concert.header.upcoming_concert_title_more",...t):"")(e,a)},s=e=>new Date(e.substring(0,19)),r=(e,t)=>{const i=s(t.openingDate),n=s(t.closingDate);if(i.toDateString()===n.toDateString())return e.formatDate(i,{weekday:"short",month:"short",day:"numeric"});if(i.getMonth()===n.getMonth()){return`${e.formatDate(i,{day:"numeric",month:"short"})}–${e.formatDate(n,{day:"numeric"})}`}return`${e.formatDate(i,{day:"numeric",month:"short"})}–${e.formatDate(n,{day:"numeric",month:"short"})}`},o=e=>s(e.startDate.localDate),l=(e,t)=>e.formatDate(t,{weekday:"short",month:"short",day:"numeric"}),d=(e,t)=>e.formatDate(t,{month:"short"}),c=(e,t)=>e.formatDate(t,{day:"numeric"}),u=(e,t)=>e.formatDate(t,{month:"short",day:"numeric"}),m=(e,t)=>e.formatDate(t,{weekday:"short",hour:"numeric"}),_=(e,t)=>e.formatDate(t,{hour:"numeric",minute:"numeric"}),h=10;function p(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let i={date:e[0].events[0].openingDate.slice(0,h),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,h);i.date!==n&&(t.push(i),i={date:n,events:[]}),i.events.push(e)}return t.push(i),t}},74878:(e,t,i)=>{"use strict";i.d(t,{$P:()=>o,C$:()=>c,FB:()=>s,KC:()=>l,Pz:()=>a,R5:()=>r,Rj:()=>n,jA:()=>d});const n="DEVICE_INFO_CHANGED",a="DEVICES_CHANGED",s="SET_VOLUME",r="TRANSFER_CONTENT",o=e=>({type:n,device:e}),l=e=>({type:a,devices:e}),d=e=>({type:s,volume:e}),c=e=>({type:r,deviceId:e})},80151:(e,t,i)=>{"use strict";i.d(t,{H:()=>d,x:()=>c});var n=i(29404),a=i(10340),s=i(37120);const r={container:"hPFGUimCt6DWoGmx6tQb",content:"h0HEdX430OefJ06S0y2C",actionList:"s1TZiYCrQgNE8N1Is5Lh"};var o=i(17409),l=i(4637);const d="#context",c=e=>{let{metadata:t,isVisible:i=!1,onCancelClick:d,children:c}=e;const u=(0,a.QT)();return(0,l.jsx)(s.H,{selector:"body",children:(0,l.jsx)(n.Z,{timeout:300,classNames:"overflow-menu",in:i,unmountOnExit:!0,children:(0,l.jsxs)("div",{className:["encore-dark-theme",r.container].join(" "),"data-testid":"context-menu-container",children:[(0,l.jsxs)("div",{className:r.content,children:[t,(0,l.jsx)("div",{className:r.actionList,children:c})]}),(0,l.jsx)(o.o,{onClick:d,semanticColor:"textBase",buttonSize:"lg",children:u.get("mwp.context.cancel")})]})})})}},82733:(e,t,i)=>{"use strict";i.d(t,{It:()=>s,Yk:()=>n,pT:()=>a});let n=function(e){return e.SHOW_CONTEXT_MENU="SHOW_CONTEXT_MENU",e.DISMISS_CONTEXT_MENU="DISMISS_CONTEXT_MENU",e.RESOLVE_TRACK_DATA_SUCCESS="RESOLVE_TRACK_DATA_SUCCESS",e}({});const a=e=>({type:n.SHOW_CONTEXT_MENU,data:e}),s=()=>({type:n.DISMISS_CONTEXT_MENU})},37029:(e,t,i)=>{"use strict";i.d(t,{It:()=>n.It,Yk:()=>n.Yk,pT:()=>n.pT});var n=i(82733)},12107:(e,t,i)=>{"use strict";i.d(t,{o:()=>d});var n=i(59496),a=i(10340),s=i(86854),r=i(86797),o=i(24377),l=i(4637);const d=e=>{let{monthlyListenerCount:t,description:i}=e;const d=(0,a.QT)();return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(o.D,{as:"div",variant:"balladBold",className:s.Z.monthlyListeners,children:d.get("artist.monthly-listeners-count",t)}),i&&(0,l.jsx)(r.o,{className:s.Z.description,content:i})]})}},27169:(e,t,i)=>{"use strict";i.d(t,{d:()=>p,v:()=>h});var n=i(17409),a=i(43090),s=i(40014),r=i(10340);const o="BfiNtGPhVtNLQfLL8FSg";var l=i(61740),d=i(52633),c=i(86194),u=i(4637);const m=e=>{var t,i;return e&&null!==(t=null===(i=(0,s.v)(e,s.F.small))||void 0===i?void 0:i.url)&&void 0!==t?t:""},_=(e,t)=>Array.isArray(t)?t.map((e=>e.name)).join(e.getSeparator()):t,h=(e,t)=>{const{title:i,name:n,subtitle:a,album:s,artists:r,show:o}=t,l={title:i||n||"",subtitle:_(e,a||r||[]),image:""};if(s&&(l.album=s,l.image=m(s.images)),r){const e=r[0];l.artist=e}if(o){const{images:e}=t;l.show=o,l.image=m(e)}return l},p=e=>{let{contextURI:t,onDemand:i,track:s,onContextMenuClick:m}=e;const{context:_,userDisplayName:p}=(0,l.v9)((e=>{var i,n;return{context:e.entities.items[t],userDisplayName:null===(i=e.session.me)||void 0===i||null===(n=i.profile)||void 0===n?void 0:n.name}})),v=(0,r.QT)();if(!i)return null;const k=h(v,s);(0,d.i)(_)&&(0,c.NU)(_.ownerV2.data)&&(k.hasPlaylistPermission=_.ownerV2.data.name===p);const g=m({uri:s.uri,contextUri:t,metadata:k});return(0,u.jsx)(n.o,{semanticColor:"textBase","data-testid":"context-menu-action-button",onClick:g,className:o,children:(0,u.jsx)(a.F,{})},"context-menu-action")}},30776:(e,t,i)=>{"use strict";i.d(t,{I:()=>d});i(71756);var n=i(59496),a=i(61740);const s={circularContainer:"SDJ3TrWunyDbRFs3dGQs",circularInner:"MCTtpxU54yz5eip1oX7o",rangeBar:"d8pfjqGuoLzpwgWH56Mz",rangeBarLeft:"aZldQBNmzVbqQYKRlYeQ",rangeBarRight:"XolCTZsS8oOlsR1nSq15",rangeProgress:"EaVUATZMKtPVr5bfmgtB"};var r=i(28321),o=i(44969),l=i(4637);const d=e=>{let{fallback:t}=e;const[i,d]=(0,n.useState)({left:0,right:0}),c=(0,a.v9)((e=>{var t;return null===(t=e.playback.current)||void 0===t?void 0:t.duration})),u=(0,a.v9)((e=>{var t;return null===(t=e.playback.current)||void 0===t?void 0:t.position})),m=(0,a.v9)((e=>{var t,i;return null!==(t=null===(i=e.playback.current)||void 0===i?void 0:i.paused)&&void 0!==t&&t})),_=(0,n.useRef)(!0);_.current=i.right<180,(0,n.useEffect)((()=>{if(0===u)return _.current=!0,void d({left:0,right:0});if(c&&u&&u>0){const e=360*u/c,t=e>180?180:e,i=_.current;if(180===t&&i)return void d({left:0,right:t});d({left:e>180?e-180:0,right:t})}}),[c,u]);const h={zIndex:1,transform:`rotate(${i.right}deg)`,transition:0===i.right?"none":"1s ease-in-out"},p={zIndex:2,transform:`rotate(${i.left}deg)`,transition:0===i.left?"none":"1s ease-in-out"};return m&&0===u?null!=t?t:null:(0,l.jsxs)("div",{className:s.circularContainer,"data-testid":"preview-progress",children:[(0,l.jsx)("div",{className:s.circularInner,children:m?(0,l.jsx)(r.J,{style:{marginLeft:"4px"}}):(0,l.jsx)(o.k,{})}),(0,l.jsx)("div",{className:[s.rangeBar,s.rangeBarRight].join(" "),children:(0,l.jsx)("div",{className:s.rangeProgress,style:h})}),(0,l.jsx)("div",{className:[s.rangeBar,s.rangeBarLeft].join(" "),children:(0,l.jsx)("div",{className:s.rangeProgress,style:p})})]})}},13831:(e,t,i)=>{"use strict";i.d(t,{Y:()=>c});i(71756);var n=i(59496),a=i(61740),s=i(6197),r=i(38331),o=i(69063),l=i(38223),d=i(3987);const c=(e,t,i,c,u,m)=>{const _=(0,a.I0)(),[h,p]=(0,n.useState)(null),[v,k]=(0,n.useState)(null),g=(0,n.useContext)(o.A);return{onRowClick:(i,n)=>async()=>{const a=u===n.uri;if(t&&a)return void _((0,r.Xh)());let o;if(c&&(p(i),setTimeout((()=>{p(null)}),1e3)),t)if("episode"===n.rawTrack.type){var h;const e=await g.request(l.H9,{uri:n.rawTrack.uri}),t=null==e||null===(h=e.data)||void 0===h?void 0:h.episodeUnionV2;if("Chapter"===(null==t?void 0:t.__typename)||"Episode"===(null==t?void 0:t.__typename)){const e=t.showOrAudiobook.data;(0,d.Lc)(e)&&(o=(0,s.kq)(t,e))}}else"track"===n.rawTrack.type&&(o=(0,s.v9)(n.rawTrack));const v={trackURI:n.uri,playOrigin:{referrerIdentifier:m}},E=(0,r.K$)(e,null,v,undefined,o);k(i),_(E)},shouldDisableRow:(e,n)=>{const a=(e=>{return!!t||("episode"===e.rawTrack.type?"video"!==(null===(i=e.rawTrack.show)||void 0===i?void 0:i.media_type):e.isPlayable);var i})(n);return!a||(!(!a||!i||v!==e)||!(!a||h!==e||!c))}}}},28552:(e,t,i)=>{"use strict";i.d(t,{T:()=>u});var n=i(59272),a=i(27383);const s=e=>e===n.URITypeMap.ALBUM,r=e=>e===n.URITypeMap.ARTIST,o=e=>{let{uri:t,header:i}=e;const{type:s}=(0,n.EC)(t);return s===n.URITypeMap.TRACK?"":null!=i&&i.backgroundImage?(0,a.ZP)(i.backgroundImage):""},l=e=>{var t,i;return null!==(t=null==e||null===(i=e.text)||void 0===i?void 0:i.title)&&void 0!==t?t:""},d=(e,t)=>{let{uri:i,header:a}=e,{text:o}=t;const{type:l}=(0,n.EC)(i);if(s(l)){var d,c;const e="string"==typeof(null==o?void 0:o.subtitle)?null==o?void 0:o.subtitle:null==o||null===(d=o.subtitle)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.name;return`${e?`${e} • `:""}${a.title}`}return r(l)?a.title:""},c=(e,t)=>{var i,a;let{uri:r,header:o}=e,{metadata:l}=t;const{type:d}=(0,n.EC)(r);return s(d)?{uri:r,name:o.title}:{uri:null!==(i=null==l||null===(a=l.album)||void 0===a?void 0:a.uri)&&void 0!==i?i:""}},u=(e,t)=>{const i={title:l(t),subtitle:d(e,t),image:o(e),album:c(e,t)},a=((e,t)=>{let{uri:i,header:a}=e,{custom:s}=t;const{type:o}=(0,n.EC)(i);return null!=s&&s.artists?r(o)?{uri:i,name:a.title}:{uri:s.artists[0].uri,name:s.artists[0].name}:null})(e,t);return a&&(i.artist=a),i}},98593:(e,t,i)=>{"use strict";i.d(t,{a:()=>l});var n=i(61740),a=i(37029),s=i(80151),r=i(28552),o=i(41177);const l=()=>{const e=(0,n.I0)(),t=(0,o.s0)();return{handleHeaderMenuClick:i=>{const n={text:{title:i.header.title},custom:{}},o=(0,r.T)(i,n);o.attributes={isAudiobook:Boolean(i.isAudiobook)};const l={contextUri:i.uri,uri:i.uri,metadata:o};t({hash:s.H}),e((0,a.pT)(l))},onContextMenuClick:i=>()=>{t({hash:s.H}),e((0,a.pT)(i))}}}},55165:(e,t,i)=>{"use strict";i.d(t,{IJ:()=>o,Vj:()=>r,g0:()=>l});var n=i(38331),a=i(61740),s=i(93855);const r=async(e,t)=>{let i;return e&&t&&(i="Episode"===t.__typename?(0,s.Dg)(t):(0,s.pV)(t)),i},o=async(e,t)=>{if(e&&t)return(0,s.qe)(t)},l=e=>{let{uri:t,isOnDemand:i,playbackContextUri:s,referrer:r,audioFileMetadataResolver:o}=e;const l=(0,a.I0)();return async()=>{if(s===t)return void l((0,n.Xh)());const e={shuffle:!i,playOrigin:{referrerIdentifier:r}},a=await(null==o?void 0:o());l((0,n.K$)(t,null,e,undefined,a))}}},90492:(e,t,i)=>{"use strict";function n(e){return!!e&&"User"===e.__typename}i.d(t,{z:()=>n})},95057:(e,t,i)=>{"use strict";i.d(t,{Z:()=>N,A:()=>y});var n=i(59496),a=i(55292),s=i(61740),r=i(25617),o=(i(71756),i(24377)),l=i(99730),d=i(17409),c=i(47586);const u="JFH8mHbVOnvnh_7Yraou";var m=i(10340),_=i(4637);class h extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{error:null})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){this.props.onCaptureException(e,t)}render(){if(!this.state.error)return this.props.children;const{onReloadClick:e,onCtaClick:t}=this.props,i=this.context;return(0,_.jsx)(c.V,{onDismiss:e,children:(0,_.jsxs)("div",{className:u,children:[(0,_.jsx)(o.D,{variant:"canon",children:i.get("error.generic")}),(0,_.jsx)(l.D,{onClick:e,children:i.get("playlist.extender.refresh")}),(0,_.jsx)(d.o,{onClick:t,semanticColor:"textBase",children:i.get("mwp.cta.download.app")})]})})}}(0,r.Z)(h,"contextType",m.OO);const p=h;var v=i(16336),k=i(76045),g=i(91094),E=i(90957),S=i(9596);const y=(e,t)=>{var i,n;(0,S.Tb)(e,{level:"error",extra:{...t}}),(0,g.sQ)({metric_type:k.MetricTypes.COUNTER,what:"client-crash-error",value:1,tags:{pathname:(0,E.J)(null===(i=window)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.pathname)}})};class f extends n.Component{constructor(e){super(e),this.handleReload=this.handleReload.bind(this),this.handleNativeCtaClick=this.handleNativeCtaClick.bind(this)}handleReload(){window.location.reload()}handleNativeCtaClick(){window.open((0,v.iZ)().toString(),"_blank","noopener")}render(){var e;return(0,_.jsx)(p,{onCaptureException:y,onReloadClick:this.handleReload,onCtaClick:this.handleNativeCtaClick,children:(0,_.jsx)(a.A,{fallback:null!==(e=this.props.SuspenseFallback)&&void 0!==e?e:null,children:this.props.children})})}}const N=(0,s.$j)()(f)},37100:(e,t,i)=>{"use strict";i.d(t,{Gz:()=>a,Nx:()=>n,U8:()=>o,XK:()=>c,b8:()=>l,h7:()=>s,sH:()=>r,z8:()=>d});const n="GENRE_VIEW_REQUEST",a="GENRE_VIEW_REQUEST_SUCCESS",s="GENRE_VIEW_REQUEST_ERROR",r="GENRE_VIEW_COLOR_EXTRACTION_SOURCE",o=e=>({type:n,genreId:e}),l=e=>({type:a,payload:e}),d=e=>({type:s,error:e}),c=e=>({type:r,url:e})},33841:(e,t,i)=>{"use strict";i.d(t,{GR:()=>o,Jb:()=>a,Op:()=>n,jW:()=>l,ss:()=>s,vc:()=>r});const n="HOME_PAGE_DATA_REQUEST",a="HOME_PAGE_DATA_REQUEST_SUCCESS",s="HOME_PAGE_DATA_REQUEST_ERROR",r=()=>({type:n}),o=e=>({type:a,data:e}),l=()=>({type:s})},61050:(e,t,i)=>{"use strict";i.d(t,{mW:()=>C,Hv:()=>R,Wq:()=>P,$R:()=>L,CL:()=>A,ZJ:()=>I,MO:()=>b,c2:()=>w,$G:()=>U,Xw:()=>F,gT:()=>O,lA:()=>M,mJ:()=>D,JP:()=>x});var n=i(4370),a=i(12107),s=i(24377),r=i(10340);const o="PxvyFam2kGYwo0UYJHqH",l="XOK5NVfgvkACJ3AHZro1",d="BgH5J9amNzGTAGAGr1f6";var c=i(4637);const u=e=>{let{lines:t}=e;const i=(0,r.QT)();return(0,c.jsxs)("div",{className:o,children:[(0,c.jsx)(s.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:l,children:i.get("web-player.lyrics.title")}),t.map(((e,t)=>{let{words:i}=e;return(0,c.jsx)(s.D,{as:"p",variant:"ballad",className:d,children:i},`track-entity-view-lyrics-line-${t}`)}))]},"track-entity-view-lyrics")};var m=i(58069),_=i(25893);const h="gAtZ6JvlYanM01xKU17O",p="rRX8pXd_4Q0juAuDimj5",v="MRAUm6Q_UAVkAoOQJe2K",k="r01DM_MkO1_LQsoYU2Wj",g="IGlzzwQc5W_KWpi7fy_V",E=e=>(0,c.jsxs)(_.r,{to:e.uri,target:"_blank",className:h,children:[(0,c.jsx)("div",{className:p}),(0,c.jsx)(s.D,{className:v,as:"h2",variant:"canon",children:e.label}),(0,c.jsx)(s.D,{className:k,as:"p",variant:"mesto",semanticColor:"textSubdued",children:e.tagline})]}),S=e=>e.bannerId.startsWith("scc-corona")?(0,c.jsx)("div",{className:g,children:(0,c.jsx)(E,{...e})}):null,y="WmWnnuRoVgoKDT38xi62",f="xNO1VYWAHb0SqWPpJY0S",N="pEBGRFznmRG3RU2jsCAL";var T=i(97425);const R={CARD:"card",CAROUSEL:"carousel"},A={GLUE:{SECTION_HEADER:"glue:sectionHeader",ENTITY_ROW:"glue:entityRow",CAROUSEL:"glue:carousel"},GLUE_2:{TRACK_ROW:"glue2:trackRow",CARD:"glue2:card",CARD_LARGE:"glue2:cardLarge",TRACK_CLOUD:"glue2:trackCloud",IMAGE_ROW:"glue2:imageRow"},FREE_TIER:{LARGE_ROW:"freetier:largerRow"},GENRE:{CARD:"genre:card",CAROUSEL:"genre:carousel"},ARTIST:{BIOGRAPHY:"artist:biography"},TRACK:{LYRICS:"track:lyrics",MUSIXMATCH:"track:lyrics:musixmatch"},BANNER:"banner"},b="pinned_item_header",C="track-entity-view-copyright",I="artist:pinnedItemV2",L={CLICK:"click",GENRE_PAGE_CLICK:"genrePageClick",RIGHT_ACCESSORY_CLICK:"rightAccessoryClick"},P={NAVIGATE:"navigate",PLAY_FROM_CONTEXT:"playFromContext",CONTEXT_MENU:"contextMenu"},D=e=>{let{id:t,custom:i}=e;return(0,c.jsx)("span",{className:y,"data-testid":"track-cloud",children:(0,c.jsx)(T.q,{tracks:i.tracks.slice(0,6).map((e=>({title:e.artistName,subtitle:e.trackName})))},t)})},O=e=>{let{id:t,text:i}=e;return(0,c.jsx)(s.D,{variant:"cello",as:"h2",className:N,children:i.title},t)},F=e=>{let{id:t,copyrights:i}=e;return i&&0!==i.length?(0,c.jsx)("div",{className:f,children:(0,c.jsx)(m.k,{copyrights:i})},t):null},w=e=>(0,c.jsx)(a.o,{description:e.text.description,monthlyListenerCount:e.custom.monthly_listeners_count},e.id),x=e=>(0,c.jsx)(u,{lines:e.custom.lines},e.id),M=e=>(0,c.jsx)(n.c,{padded:!0},e.id),U=e=>{const{id:t,href:i,text:{title:n,description:a}}=e;return(0,c.jsx)(S,{bannerId:t,uri:null!=i?i:"",label:n,tagline:null!=a?a:""},t)}},10340:(e,t,i)=>{"use strict";i.d(t,{OO:()=>o,QT:()=>d,bd:()=>l});var n=i(17249),a=i(59496),s=i(4637);const r=new n.oc,o=(0,a.createContext)(r),l=e=>{let{instance:t,children:i}=e;return(0,s.jsx)(o.Provider,{value:t,children:i})},d=()=>(0,a.useContext)(o)},33755:(e,t,i)=>{"use strict";i.d(t,{x:()=>c});var n=i(88254),a=i(83329),s=i(59496),r=i(40946),o=i(10340),l=i(55817),d=i(4637);const c=()=>{var e;const t=(0,o.QT)().getLocale(),i=null!==(e=r.k1[t])&&void 0!==e?e:r.k1.en,c=(0,l.hf)(),u=(0,s.useCallback)((()=>{c({type:"OPEN"})}),[c]);return(0,d.jsx)(n.P,{iconLeading:a.z,buttonSize:"sm",onClick:u,"data-testid":"language-selection-button",children:i.displayName})}},76733:(e,t,i)=>{"use strict";i.d(t,{K:()=>U});i(71756);var n=i(59496),a=i(87995),s=i(24377),r=i(38185),o=i(10340),l=i(32080),d=i(55817);var c=i(84875),u=i.n(c);const m="c2jpQEfE6mamlwL5FrVw",_="HOBn9aDYf0QFlNiWP3VA",h="GtfdmhKRSaOBhnhZRHM6",p="PPyOqvmOlhxYKiM5Y8Mk",v="vcDeKkNc5dtDcUxFSN06",k="pJ7WSCPqy3vWYbmLTvvg";var g=i(4637);const E=e=>{let{onClose:t,children:i}=e;const a=(0,n.useRef)(null),{isOpen:s}=(0,d.nt)();return(0,g.jsx)("div",{"data-testid":"language-selection-modal",className:u()(m,"encore-dark-theme",{[_]:s}),onClick:e=>{e.target===a.current&&t()},role:"presentation",ref:a,children:i})},S=e=>{let{ariaDescribedBy:t,ariaLabelledBy:i,children:n}=e;const{isOpen:a}=(0,d.nt)();return(0,g.jsx)("div",{className:h,role:"dialog",hidden:!a,"aria-modal":!0,"aria-labelledby":i,"aria-describedby":t,children:n})};var y=i(45498);const f=e=>{let{onClose:t}=e;const i=(0,o.QT)();return(0,g.jsx)("button",{"data-testid":"close-button",className:k,onClick:()=>{t()},children:(0,g.jsx)(y.k,{iconSize:16,"aria-label":i.get("close")})})};var N=i(85714);const T="nDNCzELviPqBcw00UX9O",R=e=>{let{style:t,children:i}=e;return(0,g.jsx)("div",{className:T,style:t,children:i})};var A=i(40946),b=(i(70238),i(45880),i(59272)),C=i(17249),I=i(76022),L=i(93381),P=i(64);const D="PDS7Mnf15n9cjdnwiTPc";var O=i(41177),F=i(35333);const w=e=>{let{children:t,locale:i,onClick:n,type:a="button"}=e;const s=i===C.go.en,r=(0,O.TH)(),o=(0,P.fd)(r.pathname),l=(0,b.EC)(r.pathname),d=(0,F.k)({type:"route",uri:o?"":null==l?void 0:l.toURI()}),c={className:D,id:i,onClick:e=>(e=>{if("button"===a){e.preventDefault();const t=new URL(window.location.href);window.location.href.includes("locale")&&t.searchParams.delete("locale"),window.location.href=t.href}n(i)})(e),"data-testid":`language-option-${i}`};if("link"===a){const e=(0,L.nT)(i),n=(0,L.ac)(r.pathname,!s),a=(0,L.is)(n,e),o=d?a:r.pathname,l=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${I.Lz}${o}`);return(0,g.jsx)("a",{href:l,...c,children:t})}return(0,g.jsx)("button",{...c,children:t})};var x=i(23066),M=i(1754);const U=e=>{let{languageSelectionModalRef:t}=e;const i=(0,o.QT)(),c=(0,n.useRef)(null),[u,m]=(0,n.useState)("0"),_=(0,d.hf)(),{enableI18nLocales:h}=(0,N.h)(),k=(0,n.useCallback)((()=>{_({type:"CLOSE"})}),[_]),{isOpen:y}=(0,d.nt)(),T=(0,n.useCallback)((()=>{c.current&&m(`${c.current.getBoundingClientRect().height}px`)}),[m]),b=e=>{var t;(0,M.pC)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),k()};var C;if(C=k,(0,n.useEffect)((()=>{const e=e=>{"Escape"===e.key&&C()};return window.addEventListener("keyup",e,!1),()=>window.removeEventListener("keyup",e)})),(0,x.y)({refOrElement:c,observeOnly:"height",onResize:T}),!t.current)return null;const I="language-selection-title",D="language-selection-subtitle";return(0,a.createPortal)((0,g.jsx)(l.i,{active:y,children:(0,g.jsx)("div",{children:(0,g.jsx)(E,{onClose:k,children:(0,g.jsxs)(S,{ariaLabelledBy:I,ariaDescribedBy:D,children:[(0,g.jsxs)("div",{className:p,ref:c,children:[(0,g.jsxs)("div",{className:v,children:[(0,g.jsx)(s.D,{as:"h1",variant:"canon",semanticColor:"textBase",id:I,paddingBottom:r.dly,children:i.get("i18n.language-selection.title")}),(0,g.jsx)(s.D,{as:"p",variant:"ballad",semanticColor:"textBase",id:D,paddingBottom:r.o78,children:i.get("i18n.language-selection.subtitle")})]}),(0,g.jsx)(f,{onClose:k})]}),(0,g.jsx)(R,{style:{"--header-height":u},children:A.ge.map((e=>{const t=(0,L.nT)(e),i=(0,P.S9)({localeFeatureFlag:h,urlLocale:t,type:"locale"});return(0,g.jsxs)(w,{onClick:b,locale:e,type:i?"link":"button",children:[(0,g.jsx)(s.D,{semanticColor:"textBase",children:A.k1[e].displayName}),(0,g.jsx)(s.D,{children:A.k1[e].displayNameEn})]},e)}))})]})})})}),t.current)}},55817:(e,t,i)=>{"use strict";i.d(t,{hf:()=>u,jg:()=>d,nt:()=>c});i(71756),i(59538);var n=i(59496),a=i(55590),s=i(4637);function r(e,t){switch(t.type){case"OPEN":return{...e,isOpen:!0};case"CLOSE":return{...e,isOpen:!1};default:(0,a.U)(t)}}const o=(0,n.createContext)(void 0),l=(0,n.createContext)((()=>{})),d=e=>{let{children:t}=e;const[i,a]=(0,n.useReducer)(r,{isOpen:!1});return(0,s.jsx)(l.Provider,{value:a,children:(0,s.jsx)(o.Provider,{value:i,children:t})})};function c(){const e=(0,n.useContext)(o);if(void 0===e)throw new Error("useLanguageSelectionModalState must be used within a LanguageSelectionModalContextProvider");return e}function u(){const e=(0,n.useContext)(l);if(void 0===e)throw new Error("useLanguageSelectionModalDispatch must be used within a LanguageSelectionModalDispatchContextProvider");return e}},75714:(e,t,i)=>{"use strict";i.d(t,{H:()=>n});const n=(0,i(59496).createContext)({instance:null})},77645:(e,t,i)=>{"use strict";i.d(t,{E:()=>s});i(71756);var n=i(59496),a=i(75714);const s=e=>{const{entities:t,skipCheck:i=!1}=e,[s,r]=(0,n.useState)([]),[o,l]=(0,n.useState)([]),{instance:d}=(0,n.useContext)(a.H);return(0,n.useEffect)((()=>{i&&r([])}),[i]),(0,n.useEffect)((()=>{l((e=>{if(i)return e;let n=!1;e.length!==t.length&&(n=!0);for(let i=0,a=e.length;i<a;i+=1)if(e[i]!==t[i].uri){n=!0;break}return n?(r([]),t.map((e=>{let{uri:t}=e;return t}))):e}))}),[i,t]),(0,n.useEffect)((()=>{o.length&&(null==d||d.checkIsInLibrary(o).then((e=>{e&&e.length>0&&r(e)})))}),[d,o]),(0,n.useEffect)((()=>{const e=null==d?void 0:d.getEvents();if(!e)return()=>{};const i=e=>{let i=!1;const n="remove"!==e.data.type;for(const a of e.data.uris){const e=t.findIndex((e=>{let{uri:t}=e;return t===a}));-1!==e&&(s[e]=n,i=!0)}i&&r([...s])};return e.addListener("update",i),()=>{e.removeListener("update",i)}}),[d,s,t]),s}},10666:(e,t,i)=>{"use strict";i.d(t,{v:()=>d});var n=i(59496),a=i(61740),s=i(5065),r=i(70283),o=i(9923),l=i(75714);const d=()=>{const{instance:e}=(0,n.useContext)(l.H),t=(0,a.I0)(),i=(0,s.o)(),d=(0,a.v9)((e=>e.session.isAnonymous)),c=async n=>{await(null==e?void 0:e.removeEntityFromLibrary(n)),t((0,o.oU)(n,!1)),i({type:r.wl.CATEGORY.CLICK,intent:r.wl.ACTIONS.REMOVE_FROM_LIBRARY})},u=async n=>{await(null==e?void 0:e.addEntityToLibrary(n)),t((0,o.oU)(n,!0)),i({type:r.wl.CATEGORY.CLICK,intent:r.wl.ACTIONS.ADD_TO_LIBRARY})};return{removeFromLibrary:c,addToLibrary:u,toggleFromLibrary:async i=>{const n=await(null==e?void 0:e.checkIsInLibrary([i]));d?t((0,o.Dw)(i)):n&&n[0]?await c(i):await u(i)}}}},30951:(e,t,i)=>{"use strict";i.d(t,{P:()=>u});var n=i(44185),a=i(10340),s=i(61740),r=i(33755),o=i(77586);const l="iQxdxLc2HsEnJMZt0Us4",d="bHqWsu7YPnOhoFVoWo1o";var c=i(4637);const u=()=>{const e=(0,a.QT)(),{country:t}=(0,s.v9)((e=>({country:e.session.country})));return(0,c.jsx)(n.VB,{language:e.getSmartlingLocale(),market:t.toLowerCase(),children:(0,c.jsxs)("div",{className:l,children:[(0,c.jsx)(o.b,{className:d}),(0,c.jsx)(n.Kv,{hideWebPlayerLink:!0,languageSelectionButton:(0,c.jsx)(r.x,{})})]})})}},57325:(e,t,i)=>{"use strict";i.d(t,{Vd:()=>r,Yl:()=>a,aC:()=>n,bu:()=>s,ll:()=>o,mv:()=>l});const n="ON_DEMAND_PLAYLISTS_REQUEST",a="ON_DEMAND_PLAYLISTS_REQUEST_SUCCESS",s="ON_DEMAND_PLAYLISTS_REQUEST_ERROR",r=()=>({type:n}),o=e=>({type:a,payload:e}),l=e=>({type:s,error:e})},82132:(e,t,i)=>{"use strict";i.d(t,{p:()=>u});i(71756),i(59538);var n=i(59272),a=i(59496),s=i(54293),r=i(66963),o=i(32953);var l=i(41177),d=i(4637);const c="auth_redirect",u=(0,a.memo)((e=>{let{isAnonymous:t}=e;const{title:i,category:u}=(0,l.UO)(),[m,_]=(0,a.useState)(null),h=u?`spotify:playlist-format:${i}:${u}`:`spotify:playlist-format:${i}`;if((0,a.useEffect)((()=>{t&&window.location.hash!==`#${c}`?(window.location.hash=c,(0,s.h$)()):async function(e,t){const i=await e.build().withHost(o.fe).withMethod("GET").withPath(`/resolve-uri/${encodeURIComponent(t)}`).withEndpointIdentifier("/resolve-uri/{uri}").withoutMarket().send(),{resolvedPlaylists:n}=i.body;if(n.length>0)return n[0].uri;throw new Error("Error resolving playlist format URI!")}(r.b.getInstance(),h).then((e=>_(e))).catch((e=>_(e)))}),[t,h,_]),null===m)return null;if(m instanceof Error)throw new Error(`Playlist couldn't be resolved: ${m.message}`);const p=(0,n.EC)(m).id;return(0,d.jsx)(l.Fg,{to:`/playlist/${p}`,replace:!0})}))},78650:(e,t,i)=>{"use strict";i.d(t,{UX:()=>ki,bY:()=>pi});var n=i(61740),a=i(59496),s=(i(71756),i(10340)),r=i(86797),o=i(30730),l=i(90321),d=i(83474),c=i(24377);const u="SpVoh9vvBN0kIwzfCiBh",m="nsGHaEmn310z9W4RMbb8",_="PfYVlZzroXSurDmS_kxY",h="kCT99_BcJQtW47mEfVF6",p="gmDgEbPyRXNixmjYAT9f",v="XlZGcb86bItwlMPQ2jOf",k="VGTtqfOlX2jIbpff6mPP",g="aexqooSgfdW95poEaxjH",E="Fui2wGupk4F1Khigbrhj",S="jWcvSz47NFpbLjnkFT1O",y="Oo6MP8F01W5uGlnw8dag";var f=i(56143),N=i(84875),T=i.n(N),R=i(82528),A=i(6336),b=i(90902),C=i(53111),I=i(66232),L=i(76490),P=i(4637);let D=function(e){return e.SMALL="small",e.LARGE="large",e}({});const O=e=>{let{images:t,title:i,contentRating:n,duration:a,moreButton:s,onClick:r,onContextMenu:N,onTouchStart:O,onTouchEnd:F,isPlaying:w,isActive:x,size:M,className:U,label:j,isPlayable:B=!0}=e;const G=M===D.LARGE?"md":"sm",{badges:V}=(0,I.r)({contentRating:n});return(0,P.jsxs)("div",{"data-testid":"trailer-component",className:T()(u,U,{[m]:x}),onContextMenu:N,onTouchStart:O,onTouchEnd:F,children:[(0,P.jsxs)("div",{className:h,children:[(0,P.jsxs)("div",{className:g,children:[(0,P.jsx)(o.O,{type:d.p.EPISODE,title:i,className:T()(k,{[y]:M===D.SMALL,[S]:M===D.LARGE}),size:l.m$.SIZE_56,images:t,shape:o.K.ROUNDED_CORNERS}),(0,P.jsx)("div",{className:E,children:(0,P.jsx)(L.f,{"data-testid":"trailer-play-button",version:f.ul.transparent,size:G,isPlaying:w,onClick:r,disabled:!B})})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:p,children:(0,P.jsx)(c.D,{dir:"auto",className:_,variant:"balladBold",children:i})}),(0,P.jsxs)("div",{className:v,children:[(0,P.jsx)(C.V,{text:j}),V.explicit&&(0,P.jsx)(A.N,{}),V.nineteen&&(0,P.jsx)(b.X,{}),(0,P.jsx)(c.D,{dir:"auto",variant:"mesto",children:(0,P.jsx)(R.nL,{durationMs:a})})]})]})]}),s]})},F=e=>{var t,i;return!(null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i||!i.paused)},w=e=>{var t,i,n,a;return null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i||null===(n=i.track_window)||void 0===n||null===(a=n.current_track)||void 0===a?void 0:a.uri};var x=i(93341);const M=e=>t=>{const i=t.entities.items[e];return(0,x.wG)(i)&&(0,x.GF)(i.pages)?(0,x.sg)(i)?i.pages.items.reduce(((e,t)=>(0,x.d_)(t.entity.data)?(e.push([t.uid,t.entity.data]),e):e),[]):i.pages.items.reduce(((e,t)=>(0,x.Fe)(t.entity.data)?(e.push([t.uid,t.entity.data]),e):e),[]):[]};var U=i(24511),j=i(59272),B=i(17409),G=i(60722),V=i(9068),Y=i(17249);const K=e=>{let{className:t}=e;return(0,P.jsx)(C.V,{ariaLabel:Y.ag.get("card.a11y.explicit"),text:Y.ag.get("paid"),className:t})},H="Ng3dPPA2_1CFYkzPukjM";var W=i(71062);const q=6048e5,Q=3e5;function $(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(0,j.hn)(e),s=function(e){const t=new Date;return!!e&&Math.floor(t.getTime()-Date.parse(e))<q}(t),r=function(e,t){return!!e||!!t&&t>Q}(n,i);return a&&s&&!r}const z=a.memo((function(e){let{className:t,label:i}=e;const n=i||Y.ag.get("type.newEpisode");return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(W.w,{label:n,children:(0,P.jsx)("span",{className:T()(H,t),"aria-label":n})}),i]})}));var Z=i(37013),X=i(12033),J=i(55126),ee=i(5065),te=i(27383),ie=i(9923),ne=i(32879);const ae="GUufNEt4tOKYiLgTlfXQ",se="jhHasrUEsgWasQK6x9bQ",re="tEckp4CC6m1SW1yaglRC",oe="bIJ1z_dsz7sTEJoGjcHb",le="Rg8fSoeWljYmuSeN4P_F",de="oj1w8Uz7_DJ3UShMgFpw",ce="FyEY6dWDfT6JJISVsx5M",ue="pTebN32OH1h3EY5tUJ3d",me="vjlQ6Pn7FmSIhpgLUM2s",_e="v9fZT00rdoOuPB_RIZAL",he="Mrls4bnXt_zz3XltClht",pe="uu8Ss4z5wxtD_WcIOXvT",ve="Z8NWUJLSYkuRQLHSg_je",ke="OpQcbKxJWnZi0om5RQq0";var ge=i(32985),Ee=i(56296),Se=i(41177),ye=i(47393),fe=i(28894);const Ne="activation-trigger-mme",Te=e=>{let{onClick:t}=e;const i=(0,s.QT)();return(0,P.jsx)(B.o,{"aria-label":i.get("mwp.list.item.share"),iconOnly:G.o,onClick:t})},Re=a.memo((e=>{var t,i,r,u,m,_;let{index:h,showOrAudiobook:p,episodeOrChapter:v,currentTrackUri:k,isPlaying:g,playbackPosition:E}=e;const S=(0,s.QT)(),y=(0,n.I0)(),N=v.playedState.playPositionMilliseconds,R=k===v.uri,C=v.playedState.state===U.sY.Completed,D=v.playability.playable,O=v.duration.totalMilliseconds,F=(null===(t=v.releaseDate)||void 0===t?void 0:t.isoString)||"",w=R?E:void 0,M=(0,Se.s0)(),B=R&&g,G=null!==(i=null===(r=(0,j.EC)(v.uri))||void 0===r?void 0:r.toURLPath(!0))&&void 0!==i?i:"",Y=$(v.uri,F,N,C),H=S.get("tracklist.a11y.play",v.name,p.name),W=S.get("tracklist.a11y.pause",v.name,p.name),q=(0,x.Fe)(v),Q=(0,a.useCallback)((()=>{(0,x.d_)(v)&&v.type===U.Wf.Episode?ge.y.set((()=>({triggerId:`${Ne}${v.uri}`,triggerAction:null}))):y((0,ne.t_)("show-view",v,p))}),[v,p,y]),Re=!(null!==(u=v.playability)&&void 0!==u&&u.playable)&&(null===(m=v.playability)||void 0===m?void 0:m.reason)===U.Ku.PaymentRequired,Ae=(0,ee.o)(),be=(0,a.useCallback)((()=>{Ae({type:"click",intent:"navigate",itemIdSuffix:"track-list/card"})}),[Ae]),Ce=(0,a.useMemo)((()=>{var e,t;const{badges:i}=(0,I.r)({contentRating:null===(e=v.contentRating)||void 0===e?void 0:e.label}),n=(null===(t=v.restrictions)||void 0===t?void 0:t.paywallContent)&&Re;return(0,P.jsxs)(P.Fragment,{children:[i.explicit&&(0,P.jsx)(A.N,{}),i.nineteen&&(0,P.jsx)(b.X,{}),n&&(0,P.jsx)(K,{})]})}),[v,Re]),Ie=(0,a.useCallback)((e=>{let{children:t}=e;return(0,x.Fe)(v)?t:(0,P.jsx)(V.c,{id:`${Ne}${v.uri}`,deferredLinkUri:(0,j.EC)(v.uri),triggerOptions:(0,fe.M)(S),children:t})}),[v,S]),Le=(0,a.useMemo)((()=>{var e,t;return null!==(e=null===(t=v.coverArt)||void 0===t?void 0:t.sources.map(Ee.Bi).map((e=>{let{url:t,...i}=e;return{url:(0,te.ZP)(t,!0),...i}})))&&void 0!==e?e:[]}),[v]),Pe=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),q&&Ae({type:"click",intent:"navigate",itemIdSuffix:"audiobook/chapter"}),M(G),be&&!q&&be()}),[G,M,be,Ae,q]),[De,Oe]=(0,a.useState)(!1),Fe=(0,a.useCallback)((e=>{e.stopPropagation(),Oe(!0),q&&Ae({type:"click",intent:"play",itemIdSuffix:"audiobook/chapter/play"}),Q()}),[Q,Ae,q]),{isLoading:we,currentlyLoading:xe}=(0,n.v9)((e=>{var t,i,n,a,s;return{isLoading:null===(t=e.playback)||void 0===t?void 0:t.isBuffering,currentlyLoading:null===(i=e.playback)||void 0===i||null===(n=i.current)||void 0===n||null===(a=n.track_window)||void 0===a||null===(s=a.current_track)||void 0===s?void 0:s.uri}}));(0,a.useEffect)((()=>{De&&xe===v.uri&&!we&&Oe(!1)}),[xe,v.uri,we,De]);const Me=(0,a.useMemo)((()=>{const{name:e,coverArt:t}=v,i=(0,X.X)(null==t?void 0:t.sources);return{title:e,subtitle:null==p?void 0:p.name,attributes:{isAudiobook:(0,x.l6)(p)},image:i?i.url:""}}),[v,p]);return(0,P.jsxs)("div",{className:T()(ae,{[se]:R}),"data-testid":`episode-${h}`,onClick:Pe,children:[(0,x.d_)(v)&&(0,P.jsx)("div",{className:le,children:(0,P.jsx)(o.O,{className:de,type:d.p.EPISODE,size:l.m$.SIZE_48,title:v.name,shape:o.K.ROUNDED_CORNERS,images:Le})}),(0,P.jsx)("div",{className:he,children:(0,P.jsx)("div",{className:oe,children:(0,P.jsx)(ye.rU,{to:G,onClick:Pe,children:(0,P.jsxs)(c.D,{as:"h4",variant:"balladBold",className:re,"data-testid":"episodeTitle",children:[Y&&(0,P.jsx)(z,{}),v.name]})})})}),(0,P.jsx)("div",{className:pe,children:(0,P.jsx)(c.D,{as:"p",variant:"mesto",className:ce,children:null!==(_=v.description)&&void 0!==_?_:""})}),(0,P.jsxs)("div",{className:ue,children:[(0,P.jsx)("div",{className:me,children:Ce}),(0,P.jsx)(Z.E,{isPlaying:B,fullyPlayed:C,durationMs:O,releaseDate:F,resumePositionMs:N,position:R?w:void 0})]}),(0,P.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:_e,"data-testid":"action-buttons",children:[(0,P.jsx)(Te,{onClick:()=>{q&&Ae({type:"click",intent:"audiobook-chapter-share",itemIdSuffix:"audiobook/chapter/share"}),y((0,ie.OW)(v.name,null==p?void 0:p.name,(0,j.EC)(v.uri).toURL()))}}),(0,P.jsx)(J.z,{className:ke,uri:v.uri,contextUri:p.uri,metadata:Me})]}),(0,P.jsx)("div",{className:ve,children:(0,P.jsx)(Ie,{children:(0,P.jsx)(L.f,{size:"sm",version:f.ul.secondary,onClick:Fe,isPlaying:B,disabled:!D,locked:Re,ariaPlayLabel:H,ariaPauseLabel:W,isLoading:we&&De})})})]})})),Ae="kkhNfxVc1GqXfunTEYnq";var be=i(67262),Ce=i(66031);const Ie=e=>{let{showOrAudiobook:t,setHasLockedContent:i,trailerId:s}=e;const r=(0,a.useRef)(null),o=(0,n.v9)(M(t.uri)),l=(0,n.v9)(w),d=!(0,n.v9)(F),[c,u]=(0,a.useState)(0);(0,a.useEffect)((()=>{const e=Ce.O.subscribe("position",u);return()=>{Ce.O.unsubscribe(e)}}),[]);const m=(0,n.I0)(),_=o.some((e=>{var t,i;let[,n]=e;return!(null!==(t=n.playability)&&void 0!==t&&t.playable)&&(null===(i=n.playability)||void 0===i?void 0:i.reason)===U.Ku.PaymentRequired}));return(0,a.useEffect)((()=>{_&&i(_)}),[_,i]),(0,P.jsx)("div",{ref:r,children:(0,P.jsx)(be.C,{triggerOnInitialLoad:!1,onReachBottom:(0,a.useCallback)((()=>{m((0,ne.TD)(t.uri,{offset:o.length,limit:50}))}),[o.length,m,t.uri]),children:o.filter((e=>{let[,t]=e;return t.id!==s})).map(((e,i)=>{let[n,a]=e;return(0,P.jsxs)("div",{children:[(0,P.jsx)("hr",{className:Ae,"aria-hidden":!0}),(0,P.jsx)(Re,{index:i,uid:n,episodeOrChapter:a,showOrAudiobook:t,currentTrackUri:l,isPlaying:d,playbackPosition:l===a.uri?c:void 0},`${a.uri}/${i}`)]},`${i}${n}`)}))})})};var Le=i(43090),Pe=i(44488),De=i(30951);const Oe="b1hzFAJxbIQzaMdCBV0c",Fe="fxq8aYefmAUWdpCjvhGy",we="OR4vaTTNOZShT5LDR9q8",xe="mTzpz0Vg1_2XcuxQ6g4O";var Me=i(17366),Ue=i(50586),je=i(33332),Be=i(35352),Ge=i(78257),Ve=i(98110),Ye=i(94138),Ke=i(61553),He=i(61339),We=i(63700),qe=i(40700),Qe=i(84136),$e=i(83704),ze=i(80151),Ze=i(69773),Xe=i(8701),Je=i(81711),et=i(44888),tt=i(38674),it=i(31608);const nt="LpX9YAxITAL0FvR350o3",at=e=>{let{reason:t}=e;const i=(0,s.QT)(),n=(0,tt.W6)(it.yU),a=function(e,t){switch(t){case"OTP":return e.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return e.get("podcasts.subscriber-indicator.subscription");default:return""}}(i,t);return n&&a?(0,P.jsx)(c.D,{variant:"finale",className:nt,children:a}):null};var st=i(86954);const rt="QYhCzOuzmVDxvotcebTz",ot="A5FORrghD7gRz6dtsz_d";var lt=i(19754),dt=i(75301);const ct="_yl4tOZxcpoUt28k6B8I",ut="lcJflizNrSwDM9yPNk6h",mt="ret7iHkCxcJvsZU14oPY",_t=e=>{var t,i,n;let{rating:a,className:s,onClick:r}=e;if(!a)return null;const o=Boolean(null===(t=a.rating)||void 0===t?void 0:t.rating);return(0,P.jsxs)("button",{className:T()(ct,s),onClick:r,children:[(0,P.jsx)(c.D,{dir:"auto",variant:"mestoBold",children:null!==(i=a.averageRating)&&void 0!==i&&i.showAverage?Y.ag.formatNumber(a.averageRating.average,{maximumFractionDigits:1}):Y.ag.get("web-player.audiobooks.noRating")}),o?(0,P.jsx)(lt.u,{iconSize:16,className:T()(ut)}):(0,P.jsx)(dt.G,{iconSize:16,className:T()(ut)}),(null===(n=a.averageRating)||void 0===n?void 0:n.showAverage)&&(0,P.jsxs)(c.D,{variant:"mesto",className:T()(mt),children:["(",Y.ag.formatNumberCompact(Number(a.averageRating.totalRatings)),")"]})]})};var ht=i(15449),pt=i(31815);const vt=e=>{let{rating:t,topics:i,uri:a,showOrAudiobook:s}=e;const r=(0,ee.o)(),o=(0,n.I0)(),l=(0,Se.s0)();return(0,P.jsxs)("div",{className:rt,"data-testid":"rating-and-topics",children:[(0,P.jsx)(_t,{className:ot,rating:t,onClick:()=>{o((0,ht.vC)(pt.SY.RATING,a)),r({type:"click",intent:"navigate",itemIdSuffix:`${s}/rating`})}}),i.map((e=>(0,P.jsx)(st.A,{as:"button",onClick:()=>{var t,i;const n=null!==(t=null===(i=(0,j.EC)(e.uri))||void 0===i?void 0:i.toURLPath(!0))&&void 0!==t?t:"";n&&(r({type:"click",intent:"navigate",itemIdSuffix:`${s}/topic`}),l(n))},children:e.title},e.uri)))]})};var kt=i(8632),gt=i(74578);const Et=e=>{var t,i,a,o,l;const d=(0,s.QT)(),{uri:u,header:m,nrEpisodes:_,trailer:h,description:p,show:v,gatedContentAccessReason:k,onHeaderContextMenuClick:g}=e,{hex:E="#000000"}=null!==(t=null===(i=v.coverArt)||void 0===i||null===(a=i.extractedColors)||void 0===a?void 0:a.colorLight)&&void 0!==t?t:{};(0,gt.Hx)({visible:!0,title:m.title,backgroundColor:E});const S=(0,Se.s0)(),y=(0,n.v9)((e=>{var t;return null===(t=e.entities.seoExperiment)||void 0===t?void 0:t.show})),f=(0,et.l3)(y||{},v.id),N=(0,Se.TH)(),T=(0,Xe.vI)(Je.k.VideoPodcastShowTitleTag,N),R=f||T;(0,Ze.j)((0,kt.Od)({isVideoPodcastShowTitleTagEnabled:R,showOrAudiobookName:v.name,type:"Podcast"}));return(0,P.jsxs)(Ue.X,{testId:"podcast-entity-view",children:[(0,P.jsxs)(je.g,{backgroundColor:E,children:[(0,P.jsxs)(Ke.T,{direction:"row",children:[(0,P.jsx)(qe.O,{images:m.images||[],fallback:(0,P.jsx)(He.c,{iconSize:64}),fadeImageBetween:[50,175],testid:"entity-header-entity-image"}),(0,P.jsxs)($e.U,{children:[k&&(0,P.jsx)(at,{reason:k}),(0,P.jsx)(Qe.x,{testId:"showTitle",children:m.title}),m.subtitle&&(0,P.jsx)(We.Z,{testId:"entity-header-entity-subtitle",children:m.subtitle})]})]}),(0,P.jsx)(Ve.n,{children:(0,P.jsxs)(Ge.n,{children:[(0,P.jsx)(Me.W,{uri:u,className:xe}),(0,P.jsx)(Be.F,{uri:u,shareTitle:m.title,shareText:m.subtitle||""}),g&&(0,P.jsx)(B.o,{onClick:()=>{const{header:{title:t,subtitle:i="",images:[{url:n}={url:""}]=[]}}=e,a={type:"show",title:t,subtitle:i,backgroundImage:n,uri:u,isVerified:!1};g&&(S({hash:ze.H}),g({uri:u,header:a}))},"aria-label":d.get("more"),iconOnly:Le.F,"data-testid":"show-view-more-icon"},"show-header-more")]})})]}),(0,P.jsx)(Ye.X,{children:(0,P.jsxs)("div",{children:[(0,P.jsx)(r.o,{className:Fe,content:p,onExpanded:()=>{e.onReadMoreDescriptionClick&&e.onReadMoreDescriptionClick()}}),(0,P.jsx)(vt,{rating:v.rating,topics:v.topics.items,uri:v.uri,showOrAudiobook:"show"}),h&&(0,P.jsx)(O,{className:Oe,images:(0,Pe.l)((null===(o=h.coverArt)||void 0===o?void 0:o.sources)||[]),title:h.name,duration:h.duration.totalMilliseconds,moreButton:(0,P.jsx)(J.z,{uri:h.uri,contextUri:u,metadata:h.metadata}),onClick:(A=h,b=v,()=>{e.onAudioFileEntityClick(A,b)}),isPlaying:h.isPlaying,isActive:h.isActive,size:D.SMALL,label:d.get("track-trailer"),contentRating:null===(l=h.contentRating)||void 0===l?void 0:l.label}),_>0?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h2",{className:we,children:(0,P.jsx)(c.D,{variant:"balladBold",children:d.get("mwp.podcast.all.episodes")})}),(0,P.jsx)(Ie,{showOrAudiobook:v,setHasLockedContent:()=>{}})]}):null]})}),(0,P.jsx)(De.P,{})]});var A,b};var St=i(87097);const yt="BXP02uzhT3tA5umUZOEY";var ft=i(72527),Nt=i(90668);const Tt="IFB_zGtfjqpaHLHMUsP9",Rt="hiDrpPN5sTCbj9BPanr3",At="aqUusTCZuVQioHnHxLR3",bt="d_oxVN8jTc3HAjo5m91Y",Ct="kijgofPxR6kU0BKzLIBo",It=e=>{let{price:t}=e;const i=(0,s.QT)();if(null==t||!t.finalPrice)return null;const{finalListPrice:n,finalPrice:a}=t;return(e=>{var t,i;return 0===(null===(t=e.finalPrice)||void 0===t?void 0:t.amount)&&0===(null===(i=e.finalListPrice)||void 0===i?void 0:i.amount)})(t)?(0,P.jsx)(c.D,{variant:"ballad",semanticColor:"textBase",as:"p",className:bt,children:i.get("audiobook.freePriceDescription")}):(0,P.jsxs)("div",{className:bt,children:[(0,P.jsx)(c.D,{variant:"celloCanon",semanticColor:"textBase",children:null==a?void 0:a.formattedPrice}),n&&a.amount<n.amount&&(0,P.jsx)(c.D,{variant:"mesto",semanticColor:"textSubdued",className:Ct,children:null==n?void 0:n.formattedPrice})]})};var Lt=i(63473),Pt=i(32760),Dt=i(79779);const Ot=e=>{let{uri:t,onLibraryUpdated:i}=e;const n=(0,s.QT)();return(0,P.jsx)(Dt.n,{uri:t,onLibraryUpdated:i,inLibraryComponent:e=>(0,P.jsx)(B.o,{iconOnly:Lt.K,semanticColor:"textBrightAccent",onClick:e,"aria-label":n.get("remove_from_your_library")}),notInLibraryComponent:e=>(0,P.jsx)(B.o,{iconOnly:Pt.G,onClick:e,"aria-label":n.get("save_to_your_library")})})};var Ft=i(98593),wt=i(55165),xt=i(99730),Mt=i(55609),Ut=i(76045),jt=i(91094);const Bt="Y9s9Ni6gTI2hNpvQkAJZ";function Gt(e){var t;let{hasLockedContent:i,isShowPlaying:r,uri:o,isAnonymous:l,price:d,isConsumptionCapped:c}=e;const u=(0,s.QT)(),m=function(e){const t=(0,n.v9)((e=>{var t;return null===(t=e.playback.current)||void 0===t?void 0:t.context.uri}));return(0,wt.g0)({uri:e,playbackContextUri:t,isOnDemand:!0})}(o),_=(0,ee.o)(),h=null==d||null===(t=d.finalPrice)||void 0===t?void 0:t.formattedPrice;!function(e,t,i){const n=(0,ee.o)();(0,a.useEffect)((()=>{t&&i&&n({type:"view",intent:"mobile-web-locked-audiobook",targetUri:e,itemIdSuffix:`audiobook/price/${i}`})}),[n,e,t,i])}(o,i,h);const{createCheckoutSession:p,isLoading:v,onError:k}=(0,Mt.n)(),g=(0,n.I0)();if(c)return(0,P.jsx)("div",{className:Bt,children:(0,P.jsx)(L.f,{onClick:()=>{_({type:"click",intent:"audiobook-consumption-cap",itemIdSuffix:"audiobook/play"}),g((0,ht.vC)(pt.SY.AUDIOBOOK_CONSUMPTION_CAP,o))},size:"md",isPlaying:r})});if(i){var E;const e=0===(null==d||null===(E=d.finalPrice)||void 0===E?void 0:E.amount),t=e?"audiobook-get":"audiobook-buy";return(0,P.jsx)("div",{className:Bt,children:(0,P.jsx)(xt.D,{"data-testid":"play-button",disabled:v,onClick:async()=>{_({type:"click",intent:t,targetUri:o,itemIdSuffix:"audiobook/buy"}),(0,jt.sQ)({metric_type:Ut.MetricTypes.COUNTER,what:"audiobook-buy",value:1}),l?m():null!=d&&d.finalPrice?await p({show_uri:o,currency:d.finalPrice.currency,price:d.finalPrice.amount}):k()},children:e?u.get("mobile-web-player.locales.audiobooks.buyFree"):u.get("mobile-web-player.locales.audiobooks.buy")})})}return(0,P.jsx)("div",{className:Bt,children:(0,P.jsx)(L.f,{onClick:async e=>{e.preventDefault(),_({type:"click",intent:"play",itemIdSuffix:"audiobook/play"}),m()},size:"md",isPlaying:r})})}var Vt=i(57294);const Yt=e=>{let{children:t}=e;return(0,P.jsx)("div",{className:Vt.Z.entityHeaderMetadata,children:t})};var Kt=i(67946),Ht=i(29800);const Wt=e=>{var t;let{audiobook:i}=e;const n=(0,s.QT)();return(0,P.jsxs)(Ke.T,{direction:"row",children:[(0,P.jsx)(qe.O,{roundedCorners:!0,images:(null===(t=i.coverArt)||void 0===t?void 0:t.sources)||[],fallback:(0,P.jsx)(ft.P,{iconSize:64}),fadeImageBetween:[50,175],testid:"audiobook-entity-header-entity-image"}),(0,P.jsxs)($e.U,{children:[(0,P.jsx)(Nt.x,{testId:"showTitle",small:!0,children:i.name}),i.authors&&(0,P.jsx)(We.Z,{testId:"entity-audiobook-entity-subtitle",children:i.authors.map((e=>null==e?void 0:e.name)).filter(Boolean).join(n.getSeparator())})]})]})},qt=e=>{var t,i,a,r,o;let{audiobook:l}=e;const d=(0,s.QT)(),{price:u,uri:m,publishDate:_,contentRating:h,duration:p}=l,{isAnonymous:v,currentContextUri:k,isPaused:g}=(0,n.v9)((e=>{var t,i;return{isAnonymous:Boolean(e.session.isAnonymous),isPaused:F(e),currentContextUri:null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.context.uri}})),E=1===(null===(t=l.accessInfo)||void 0===t||null===(i=t.unlockedBy)||void 0===i?void 0:i.length)&&l.accessInfo.unlockedBy.includes(U.t.Abp),S=!(null!==(a=l.accessInfo)&&void 0!==a&&a.isUserMemberOfAtLeastOneGroup),y="ConsumptionCappedAccessExplanation"===(null===(r=l.accessInfo)||void 0===r||null===(o=r.accessExplanation)||void 0===o?void 0:o.__typename),{handleHeaderMenuClick:f}=(0,Ft.a)(),{badges:N}=(0,I.r)({contentRating:null==h?void 0:h.label}),T=p&&(0,Kt.P)(p.totalMilliseconds);return(0,P.jsxs)(Ve.n,{children:[(0,P.jsx)(Yt,{children:(0,P.jsx)("div",{className:Tt,children:(0,P.jsxs)(c.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",className:Rt,children:[N.explicit&&(0,P.jsx)(A.N,{}),N.nineteen&&(0,P.jsx)(b.X,{size:16}),(0,P.jsxs)(c.D,{className:At,children:[_&&(0,P.jsx)(c.D,{children:d.formatDate(new Date(_.isoString))}),T&&(0,P.jsx)(c.D,{children:(0,Ht.N)({h:T.hours,m:T.minutes,s:T.seconds})})]})]})})}),(0,P.jsxs)(Ge.n,{children:[(0,P.jsx)(Ot,{uri:m}),(0,P.jsx)(Be.F,{uri:m,shareTitle:l.name,shareText:l.name}),(0,P.jsx)(B.o,{iconOnly:Le.F,"aria-label":d.get("more"),onClick:()=>{var e,t;f({uri:m,header:{title:l.name,backgroundImage:null===(e=l.coverArt)||void 0===e||null===(t=e.sources)||void 0===t?void 0:t[0].url},isAudiobook:!0})}})]}),(0,P.jsx)(Gt,{price:u,hasLockedContent:S,isShowPlaying:k===l.uri&&!g,isAnonymous:v,uri:m,isConsumptionCapped:y}),S&&!E&&(0,P.jsx)(It,{price:u}),E&&(0,P.jsx)(c.D,{variant:"mesto",semanticColor:"textBrightAccent",children:d.get("content.available.premium")})]})},Qt=e=>{let{audiobook:t,backgroundColor:i}=e;return(0,P.jsxs)(je.g,{backgroundColor:i,"data-testid":"audiobook-entity-header",children:[(0,P.jsx)(Wt,{audiobook:t}),(0,P.jsx)(qt,{audiobook:t})]})};var $t=i(38510);const zt="tbPnjqeS45worqV9tkbi",Zt="_n_xaCwTzIy6bV7hSpNe",Xt="bF8BjeqO6W28kVMzxHEA",Jt="AfsMFsEEb6cZ9lqDl0w8",ei="vpOeJQIUaLjnUeXXhzbC",ti=e=>!e.playability.playable&&e.playability.reason===U.Ku.PaymentRequired,ii=e=>{var t,i;const{badges:n}=(0,I.r)({contentRating:null===(t=e.contentRating)||void 0===t?void 0:t.label}),a=(null===(i=e.restrictions)||void 0===i?void 0:i.paywallContent)&&ti(e);return(0,P.jsxs)(P.Fragment,{children:[n.explicit&&(0,P.jsx)(A.N,{}),a&&(0,P.jsx)(K,{}),n.nineteen&&(0,P.jsx)(b.X,{size:16})]})},ni=e=>{let{audiobook:t}=e;const i=(0,s.QT)(),r=(0,Se.s0)(),o=(0,n.I0)(),l=(0,ee.o)(),{currentTrackUri:d,isBuffering:c,position:u,isPaused:m,chapters:_}=(0,n.v9)((e=>{var i,n,a;return{isBuffering:null===(i=e.playback)||void 0===i?void 0:i.isBuffering,currentTrackUri:w(e),position:null!==(n=null===(a=e.playback.current)||void 0===a?void 0:a.position)&&void 0!==n?n:0,isPaused:F(e),chapters:M(t.uri)(e)}})),h=(0,a.useRef)(null),{handleHeaderMenuClick:p}=(0,Ft.a)(),v=(e=>{var t,i;return"Chapter"===(null===(t=e.trailerV2)||void 0===t?void 0:t.data.__typename)?null===(i=e.trailerV2)||void 0===i?void 0:i.data.id:null})(t),k=(0,a.useCallback)((e=>{l({type:"click",intent:"play",itemIdSuffix:"audiobook/chapter/play"}),o((0,ne.t_)("show-view",e,t))}),[l,t,o]),g=(0,a.useCallback)((e=>{var t,i;l({type:"click",intent:"navigate",itemIdSuffix:"audiobook/chapter"});const n=null!==(t=null===(i=(0,j.EC)(e.uri))||void 0===i?void 0:i.toURLPath(!0))&&void 0!==t?t:"";n&&r(n)}),[r,l]);return(0,P.jsx)("div",{ref:h,"data-testid":"audiobook-chapter-list",children:(0,P.jsx)(be.C,{triggerOnInitialLoad:!1,onReachBottom:(0,a.useCallback)((()=>{o((0,ne.TD)(t.uri,{offset:_.length,limit:50}))}),[_.length,o,t.uri]),children:_.filter((e=>{let[,t]=e;return t.id!==v})).map(((e,n)=>{var a,s;let[r,_]=e;return"Chapter"!==_.__typename?null:(0,P.jsxs)("div",{children:[(0,P.jsx)("hr",{className:Jt,"aria-hidden":!0}),(0,P.jsx)($t.w,{className:zt,padding:"16px 0",hoverBackgroundColor:"backgroundBase",title:_.name,body:(0,P.jsxs)("div",{className:ei,children:[ii(_),(0,P.jsx)(Z.E,{isPlaying:d===_.uri&&!m,fullyPlayed:_.playedState.state===U.sY.Completed,durationMs:null!==(a=null===(s=_.duration)||void 0===s?void 0:s.totalMilliseconds)&&void 0!==a?a:0,resumePositionMs:_.playedState.playPositionMilliseconds,position:d===_.uri?u:void 0})]}),isRedundantOnClick:!0,onClick:e=>{e.stopPropagation(),e.preventDefault(),g(_)},variant:"naked",size:"lg",id:_.uri,footer:(0,P.jsxs)("div",{className:Zt,children:[(0,P.jsxs)("div",{className:Xt,children:[(0,P.jsx)(B.o,{buttonSize:"md",iconOnly:G.o,"aria-label":i.get("contextmenu.share"),onClick:()=>{var e;l({type:"click",intent:"audiobook-chapter-share",itemIdSuffix:"audiobook/chapter/share"}),o((0,ie.OW)(_.name,null==t?void 0:t.name,(null===(e=(0,j.EC)(_.uri))||void 0===e?void 0:e.toURL())||_.uri))}}),(0,P.jsx)(B.o,{buttonSize:"md",iconOnly:Le.F,"aria-label":i.get("more"),onClick:()=>{var e,i,n;p({uri:_.uri,header:{title:_.name,backgroundImage:null!==(e=null===(i=t.coverArt)||void 0===i||null===(n=i.sources)||void 0===n?void 0:n[0].url)&&void 0!==e?e:""},isAudiobook:!0})}})]}),(0,P.jsx)(L.f,{size:"sm",version:L.u.secondary,onClick:e=>{e.stopPropagation(),k(_)},isPlaying:d===_.uri&&!m,disabled:!_.playability.playable,locked:ti(_),ariaPlayLabel:i.get("tracklist.a11y.play",_.name,t.name),ariaPauseLabel:i.get("tracklist.a11y.pause",_.name,t.name),isLoading:d===_.uri&&c})]})},`${_.uri}/${n}`)]},`${n}${r}`)}))})})},ai="L6epO201ZBrP5Y9xJotv",si=e=>{let{audiobook:t}=e;const i=(0,s.QT)(),{publishDate:n,duration:a,authors:o,htmlDescriptionPlain:l}=t,d=(0,ee.o)(),c=a&&(0,Kt.P)(a.totalMilliseconds),u=`\n  ${l}\n  <br />\n  <p>\n  ${i.get("web-player.search-modal.result.audiobook")} • ${null==o?void 0:o.map((e=>null==e?void 0:e.name)).join(i.getSeparator())}<br />\n  ${c&&`${i.get("audiobook.length",(0,Ht.N)({h:c.hours,m:c.minutes,s:c.seconds}))}\n    <br />`}\n  ${n&&`${i.get("audiobook.released",i.formatDate(new Date(n.isoString)))}<br />`}\n  </p>\n  `;return(0,P.jsx)(r.o,{maxLines:5,className:ai,content:u,htmlContent:u,onExpanded:()=>d({type:"click",intent:"expand-description"})})},ri=e=>{var t,i,a;let{audiobook:r}=e;const o=(0,s.QT)(),l=(0,ee.o)(),d=(0,n.I0)(),c=null==r||null===(t=r.trailerV2)||void 0===t?void 0:t.data,{currentTrackUri:u,isPaused:m}=(0,n.v9)((e=>({currentTrackUri:w(e),isPaused:F(e)})));if(!c||"Chapter"!==c.__typename)return null;const _=u===c.uri;return(0,P.jsx)(O,{moreButton:null,images:(0,Pe.l)((null===(i=c.coverArt)||void 0===i?void 0:i.sources)||[]),title:c.name,duration:c.duration.totalMilliseconds,onClick:()=>{d((0,ne.t_)("show-view",c,r,void 0,!1)),l({type:"click",intent:"play",itemIdSuffix:"audiobook/trailer/play"})},isPlaying:_&&!m,isActive:_,size:D.SMALL,label:o.get("audiobook.page.sample"),contentRating:null===(a=c.contentRating)||void 0===a?void 0:a.label})},oi=e=>{var t;let{audiobook:i}=e;return(0,P.jsxs)("div",{"data-testid":"audiobook-copyright",children:[i.publisher&&(0,P.jsxs)(c.D,{as:"p",semanticColor:"textSubdued",children:["Ⓟ ",null===(t=i.publisher)||void 0===t?void 0:t.name]}),Boolean(i.copyright.items.length)&&(0,P.jsxs)(c.D,{as:"p",semanticColor:"textSubdued",children:["©"," ",i.copyright.items.reduce(((e,t)=>""===e?`${t.text}`:`${e}, ${t.text}`),"")]})]})},li=e=>{let{audiobook:t}=e;const i=(0,s.QT)(),n=function(e){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[]).map((e=>null==e?void 0:e.name)).filter(Boolean).join(e.getSeparator())}(i,t.narrators);return n?(0,P.jsx)(c.D,{variant:"viola",semanticColor:"textSubdued","data-testid":"audiobook-narrators",children:i.get("web-player.audiobooks.narratedByX",n)}):null},di=e=>{var t,i;let{audiobook:n}=e;const a=null===(t=n.coverArt)||void 0===t||null===(i=t.extractedColors)||void 0===i?void 0:i.colorLight.hex;return(0,Ze.j)((0,kt.Od)({showOrAudiobookName:n.name,type:"Audiobook"})),(0,gt.Hx)({visible:!0,title:n.name,backgroundColor:a}),(0,P.jsxs)(Ue.X,{testId:"audiobook-entity-view",children:[(0,P.jsx)(Qt,{audiobook:n,backgroundColor:a}),(0,P.jsx)(Ye.X,{children:(0,P.jsxs)("div",{className:yt,children:[(0,P.jsx)(li,{audiobook:n}),(0,P.jsx)(si,{audiobook:n}),(0,P.jsx)(vt,{rating:n.rating,topics:n.topics.items,uri:n.uri,showOrAudiobook:"audiobook"}),(0,P.jsx)(ri,{audiobook:n}),(0,P.jsx)(ni,{audiobook:n}),(0,P.jsx)(oi,{audiobook:n})]})})]})};var ci=i(39366),ui=i(28552),mi=i(37029),_i=i(8065),hi=i(51841);i(65394),i(78819),i(33892);const pi=e=>{var t,i,n;return e?{title:e.name,subtitle:"Audiobook"===e.__typename?null===(t=e.authors)||void 0===t?void 0:t.map((e=>null==e?void 0:e.name)).join(" | "):null===(i=e.publisher)||void 0===i?void 0:i.name,images:(0,Pe.l)((null===(n=e.coverArt)||void 0===n?void 0:n.sources)||[]),type:d.p.SHOW}:{title:"",subtitle:"",images:[],type:d.p.SHOW}},vi=(0,n.$j)(((e,t)=>{var i,n,a,s,r,o,l;const{playback:d,entities:c,session:u}=e,m=(e=>{let{showId:t,userId:i}=e;return t&&i?`spotify:user:${i}:show:${t}`:`spotify:show:${t}`})(t.params),_=c.items[m],h=null==d||null===(i=d.current)||void 0===i||null===(n=i.track_window)||void 0===n||null===(a=n.current_track)||void 0===a?void 0:a.uri,p=null==d||null===(s=d.current)||void 0===s?void 0:s.paused,v=(null==d||null===(r=d.current)||void 0===r?void 0:r.context.uri)===m&&!p,k=null==d?void 0:d.isBuffering,g=pi(_),E=null==c?void 0:c.saved,S=Boolean(E&&E[m]),y=null==u?void 0:u.isAnonymous,f=!0===(null==u||null===(o=u.features)||void 0===o?void 0:o.isAudiobooksOnMWPEnabled),N=null!=(T=null==_||null===(l=_.accessInfo)||void 0===l?void 0:l.unlockedBy)&&T.length?T.some((e=>e&&[U.t.OapOtp,U.t.AudiobookDirectSales].includes(e)))?"OTP":T.some((e=>e&&[U.t.OapLinking,U.t.AnchorPaywall].includes(e)))?"SUBSCRIPTION":1===(null==T?void 0:T.length)&&(null==T?void 0:T.at(0))===U.t.Abp?"ABP":"OTHER":null;var T;const R=((e,t)=>{var i,n;let{currentTrackUri:a,isPaused:s,showUri:r,showTitle:o}=t;const l=null==e?void 0:e.trailerV2,d=null==l?void 0:l.data;if(!(0,x.S1)(d))return null;const c=a===d.uri,u=(0,Pe.l)((null===(i=d.coverArt)||void 0===i?void 0:i.sources)||[]);return{...d,isActive:c,isPlaying:Boolean(c&&!s),metadata:{title:d.name,subtitle:o,show:{name:o,uri:r},image:(null===(n=(0,X.X)(u))||void 0===n?void 0:n.url)||"",attributes:{isAudiobook:"Audiobook"===(null==e?void 0:e.__typename)}}}})(_,{currentTrackUri:h,isPaused:p,isBuffering:k,showTitle:g.title,showUri:m}),A=u.canGoBack;return{nrEpisodes:_&&(0,x.GF)(null==_?void 0:_.pages)?null==_?void 0:_.pages.totalCount:0,header:g,canGoBack:A,uri:m,description:(null==_?void 0:_.description)||"",htmlDescriptionPlain:_&&(0,x.l6)(_)&&(null==_?void 0:_.htmlDescriptionPlain)||"",trailer:R,isLiked:S,isAnonymous:y,currentTrackUri:h,isShowPlaying:v,showOrAudiobook:_,enableAudiobooksGatedExperience:f,gatedContentAccessReason:N}}),((e,t)=>{const{onLogInteraction:i}=t;return{onRequestShowEntity:t=>{e((0,ne.TD)(t,{offset:0,limit:50}))},onAudioFileEntityClick:(t,i,n)=>{e((0,ne.t_)("show-view",t,i,void 0,n))},onHeaderContextMenuClick:t=>{const{uri:i,header:n,attributes:a}=t,{title:s}=n,r={text:{title:s},metadata:{},custom:{}},o={contextUri:i,uri:i,metadata:(0,ui.T)(t,r),attributes:a};e((0,mi.pT)(o))},onReadMoreDescriptionClick:()=>{i({type:"click",intent:"expand-description"})}}})),ki=(0,ci.qC)(_i.U,hi.N,vi)((e=>{(0,a.useEffect)((()=>{window.LUX&&(window.LUX.label="Show Page")}));const{header:t,onRequestShowEntity:i,uri:n,showOrAudiobook:s}=e;return(0,a.useEffect)((()=>{s||i(n)}),[i,n,s]),t&&s?(0,x.l6)(s)?(0,P.jsx)(di,{...e,audiobook:s}):(0,P.jsx)(Et,{...e,show:s}):(0,P.jsx)(St.U,{"data-testid":"entity-loading-state"})}))},32879:(e,t,i)=>{"use strict";i.d(t,{RZ:()=>l,TD:()=>s,Yo:()=>r,gZ:()=>o,t_:()=>a});var n=i(42657);const a=(e,t,i,a,s)=>({type:n.wu,context:e,audioFileEntity:t,audioFileParentEntity:i,playbackOffset:a,isAudiobookSample:s}),s=(e,t)=>({type:n.eR,uri:e,pagination:t}),r=(e,t)=>({type:n.nC,uri:e,data:t}),o=e=>({type:n.G8,uri:e}),l=(e,t)=>({type:n.mU,uri:e,data:t})},42657:(e,t,i)=>{"use strict";i.d(t,{G8:()=>r,eR:()=>a,mU:()=>o,nC:()=>s,wu:()=>n});const n="PODCAST_PLAY_INTENT",a="SHOW_OR_AUDIOBOOK_REQUEST",s="SHOW_OR_AUDIOBOOK_REQUEST_SUCCESS",r="EPISODE_OR_CHAPTER_REQUEST",o="EPISODE_OR_CHAPTER_REQUEST_SUCCESS"},23623:(e,t,i)=>{"use strict";i.d(t,{EC:()=>a,Gb:()=>v,Gg:()=>k,Gu:()=>d,Ld:()=>m,QI:()=>o,aI:()=>p,fm:()=>r,fy:()=>h,hd:()=>c,hz:()=>s,iG:()=>l,q5:()=>g,rl:()=>n,vr:()=>_,wL:()=>u});const n="FETCH_RESULTS_REQUEST_V2",a="FETCH_RESULTS_SUCCESS_V2",s="FETCH_RECENT_REQUEST_V2",r="FETCH_RECENT_SUCCESS_V2",o="CLEAR_RECENT_REQUEST_V2",l="CLEAR_ALL_RECENT_REQUEST_V2",d="SAVE_RECENT_REQUEST_V2",c="SAVE_RECENT_SUCCESS_V2",u=e=>({type:n,data:e}),m=e=>({type:a,data:e}),_=()=>({type:s}),h=e=>({type:r,recentSearches:e}),p=e=>({type:o,uri:e}),v=()=>({type:l}),k=e=>({type:d,data:e}),g=e=>({type:c,data:e})},55027:(e,t,i)=>{"use strict";i.d(t,{g:()=>r});var n=i(59496),a=i(43398),s=i(4637);const r=e=>{let{pageId:t,navigationalRoot:i,entityUri:r,children:o}=e;const l=(0,a.uI)();return(0,n.useEffect)((()=>{l&&t&&l.log({pageId:t,navigationalRoot:i,entityUri:r})}),[l,t,i,r]),(0,s.jsx)(s.Fragment,{children:o})}},43398:(e,t,i)=>{"use strict";i.d(t,{TQ:()=>h,uI:()=>_});i(59538);var n=i(59496),a=i(25617),s=i(63374),r=(i(71756),i(31781),i(59272));const o=new Set([r.URITypeMap.ALBUM,r.URITypeMap.ARTIST,r.URITypeMap.PLAYLIST,r.URITypeMap.PLAYLIST_V2,r.URITypeMap.TRACK,r.URITypeMap.EPISODE,r.URITypeMap.SHOW,r.URITypeMap.LOCAL_TRACK]),l=e=>{var t;const i=(0,r.EC)(e);if(!i)return;if((0,r.Ue)(i))return o.has(i.id)?i.toString().replace(":app:",":"):i.toString();if(o.has(i.type))return i.toString();const n=i.args||i.query&&[i.query]||i.category&&[i.category]||void 0,a=(0,r.vU)(i.type,n);return null!==(t=null==a?void 0:a.toString())&&void 0!==t?t:void 0};var d=i(53361);class c{constructor(e){(0,a.Z)(this,"navigationalRoot",s.U.HOME),(0,a.Z)(this,"navigationReason",d.hw.CLIENT_STARTED),(0,a.Z)(this,"interactionId",void 0),(0,a.Z)(this,"locationKeys",[]),(0,a.Z)(this,"lastLocationKey",""),this.ubiLogger=e}onLocationChange(e){if(e.key){this.locationKeys.includes(e.key)||this.locationKeys.push(e.key);const t=this.locationKeys.indexOf(e.key),i=this.lastLocationKey?this.locationKeys.indexOf(this.lastLocationKey):-1;this.navigationReason=t>i?d.hw.FORWARD:d.hw.BACK,this.lastLocationKey=e.key}}setInteraction(e){this.interactionId=e}log(e){var t;let{pageId:i,navigationalRoot:n,entityUri:a}=e;n&&(this.navigationalRoot=n),this.ubiLogger.logNavigationStart({navigationalRoot:null!=n?n:this.navigationalRoot,navigationReason:this.navigationReason,interactionId:this.interactionId}),this.ubiLogger.logNavigationEnd({pageId:null!=i?i:d.Wg.UNKNOWN,entityUri:null!==(t=l(null!=a?a:location.pathname))&&void 0!==t?t:"unknown"}),this.setInteraction(void 0)}}var u=i(4637);const m=(0,n.createContext)({}),_=()=>{const{ubiNavigation:e}=(0,n.useContext)(m);if(void 0===e)throw new Error("UBINavigationContext() must be used within a UBINavigationContext.Provider");return e},h=e=>{let{ubiLogger:t,children:i}=e;const a=(0,n.useMemo)((()=>new c(t)),[t]);return(0,u.jsx)(m.Provider,{value:{ubiLogger:t,ubiNavigation:a},children:i})}},63374:(e,t,i)=>{"use strict";i.d(t,{U:()=>n,s:()=>a});let n=function(e){return e.HOME="home",e.COLLECTION="collection",e.CREATE_PLAYLIST="create-playlist",e.LIKED_SONGS="liked-songs",e.YOUR_EPISODES="your-episodes",e.SEARCH="search",e.SETTINGS="settings",e.PLAYLISTS_SIDEBAR="playlists-sidebar",e.NOW_PLAYING_BAR="now-playing-bar",e.BUDDY_FEED="buddy-feed",e.PROFILE="profile",e.DEEP_LINK="deep-link",e.MAKE_MUSIC="make-music",e.NOW_PLAYING_PANEL="now_playing_panel",e.WHATS_NEW_PANEL="whats_new_panel",e.UNKNOWN="unknown",e}({}),a=function(e){return e.SPOTIFY_APP_HOME="spotify:app:home",e.SPOTIFY_APP_SEARCH="spotify:app:search",e}({})},35215:(e,t,i)=>{"use strict";i.d(t,{a6:()=>n});i(71756),i(21727);const n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"30"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albumUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumContent"}},{kind:"FragmentSpread",name:{kind:"Name",value:"notFound"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumContent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"FragmentSpread",name:{kind:"Name",value:"artistInfo"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"coverArt"}}]}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"month"}},{kind:"Field",name:{kind:"Name",value:"day"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumTracks"}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"artistInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"stats"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"monthlyListeners"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"coverArt"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}},{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumTracks"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumTracksTrack"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumTracksTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"trackNumber"}},{kind:"Field",name:{kind:"Name",value:"discNumber"}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}}]}},...i(33909).zm.definitions]}},38223:(e,t,i)=>{"use strict";i.d(t,{H9:()=>a});i(71756),i(21727);var n=i(76317);const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"episodeOrChapter"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episodeUnionV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"episodeMetadata"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"chapterMetadata"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"episodeMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescription"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"contentInformation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"buttonText"}},{kind:"Field",name:{kind:"Name",value:"buttonTarget"}},{kind:"Field",name:{kind:"Name",value:"cardHeaderText"}},{kind:"Field",name:{kind:"Name",value:"cardBodyText"}}]}},{kind:"Field",name:{kind:"Name",value:"language"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}},{kind:"Field",name:{kind:"Name",value:"fileId"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPositionMilliseconds"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}},{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"month"}},{kind:"Field",name:{kind:"Name",value:"day"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorLight"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"red"}},{kind:"Field",name:{kind:"Name",value:"green"}},{kind:"Field",name:{kind:"Name",value:"blue"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",alias:{kind:"Name",value:"showOrAudiobook"},name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"showTypes"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"trailerV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}}]}},...n.rD.definitions,...n.rA.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"chapterMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescription"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"restrictions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paywallContent"}}]}},{kind:"Field",name:{kind:"Name",value:"language"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}},{kind:"Field",name:{kind:"Name",value:"fileId"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPositionMilliseconds"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}},{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"month"}},{kind:"Field",name:{kind:"Name",value:"day"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorLight"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"red"}},{kind:"Field",name:{kind:"Name",value:"green"}},{kind:"Field",name:{kind:"Name",value:"blue"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",alias:{kind:"Name",value:"showOrAudiobook"},name:{kind:"Name",value:"audiobookV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"price"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"finalPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"}},{kind:"Field",name:{kind:"Name",value:"formattedPrice"}}]}},{kind:"Field",name:{kind:"Name",value:"finalListPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"}},{kind:"Field",name:{kind:"Name",value:"formattedPrice"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"showTypes"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"trailerV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}}]}}]}},47930:(e,t,i)=>{"use strict";i.d(t,{pr:()=>a});i(71756),i(21727);var n=i(76317);const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryPlaylist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"followers"}},{kind:"Field",name:{kind:"Name",value:"ownerV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistItemsPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeOrChapterResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"episodeFragment"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackFragment"}},{kind:"Field",name:{kind:"Name",value:"relinkingInformation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkedTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"trackFragment"}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}}]}},...n.rD.definitions,...n.rA.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"episodeFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"trackNumber"}},{kind:"Field",name:{kind:"Name",value:"discNumber"}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playcount"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}}]}},33909:(e,t,i)=>{"use strict";i.d(t,{fO:()=>s,zm:()=>a});i(71756),i(21727);var n=i(76317);const a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"notFound"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]},s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"trackEntityFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"notFound"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackEntityFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackEntityAlbum"}}]}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"otherArtists"},name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"otherTrackArtists"}}]}},{kind:"Field",alias:{kind:"Name",value:"firstArtist"},name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"firstTrackArtist"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"trackNumber"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackEntityAlbum"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"copyright"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"month"}},{kind:"Field",name:{kind:"Name",value:"day"}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackListing"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}}]}},...n.rD.definitions,...n.rA.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"trackListing"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackListingItem"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackListingItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"trackNumber"}},{kind:"FragmentSpread",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"FragmentSpread",name:{kind:"Name",value:"artistName"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"duration"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"artistName"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"otherTrackArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackArtistEntityFields"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackArtistEntityFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"stats"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"monthlyListeners"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"firstTrackArtist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackArtistEntityFields"}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"singles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackAlbumItems"}}]}},{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackReleaseItems"}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"4"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"popularTracks"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackAlbumItems"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumGroupPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackReleaseItems"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackReleaseItems"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"popularTracks"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"popularTrack"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"popularTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"FragmentSpread",name:{kind:"Name",value:"artistName"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playcount"}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},...a.definitions]}},3987:(e,t,i)=>{"use strict";function n(e){return"Episode"===(null==e?void 0:e.__typename)}function a(e){return"Chapter"===(null==e?void 0:e.__typename)}function s(e){return"Chapter"===(null==e?void 0:e.__typename)||"Episode"===(null==e?void 0:e.__typename)}function r(e){return!!e&&["Podcast","Audiobook"].includes(e.__typename)}function o(e){return!!e&&"Audiobook"===(null==e?void 0:e.__typename)}function l(e){return!!e&&"Podcast"===(null==e?void 0:e.__typename)}i.d(t,{Ey:()=>a,Lc:()=>r,Mc:()=>o,ck:()=>l,v8:()=>n,wY:()=>s})},86194:(e,t,i)=>{"use strict";i.d(t,{Li:()=>r,NU:()=>l,R9:()=>n,Us:()=>s,lU:()=>a,v8:()=>o});const n=e=>"PlaylistItemsPage"===(null==e?void 0:e.__typename),a=e=>"TrackResponseWrapper"===(null==e?void 0:e.__typename),s=e=>"EpisodeOrChapterResponseWrapper"===(null==e?void 0:e.__typename),r=e=>"Track"===(null==e?void 0:e.__typename),o=e=>"Episode"===(null==e?void 0:e.__typename),l=e=>"User"===(null==e?void 0:e.__typename)},93341:(e,t,i)=>{"use strict";function n(e){return"Audiobook"===(null==e?void 0:e.__typename)}function a(e){return"Podcast"===(null==e?void 0:e.__typename)}function s(e){return"Episode"===(null==e?void 0:e.__typename)}function r(e){return"Chapter"===(null==e?void 0:e.__typename)}function o(e){return s(e)||r(e)}i.d(t,{Fe:()=>r,GF:()=>d,S1:()=>o,d_:()=>s,l6:()=>n,sg:()=>a,wG:()=>l});const l=e=>!!e&&["Podcast","Audiobook"].includes(null==e?void 0:e.__typename),d=e=>"ContextEpisodePage"===(null==e?void 0:e.__typename)||"ContextChapterPage"===(null==e?void 0:e.__typename)},69773:(e,t,i)=>{"use strict";i.d(t,{A:()=>a,j:()=>s});var n=i(59496);const a="Spotify – Mobile Web Player",s=e=>{(0,n.useEffect)((()=>{e&&(document.title=e)}))}},6129:(e,t,i)=>{"use strict";i.d(t,{EX:()=>r,Qs:()=>o});i(59538),i(71756);var n=i(59496),a=i(4637);const s=(0,n.createContext)(null),r=e=>{let{instance:t,children:i}=e;return(0,a.jsx)(s.Provider,{value:t,children:i})};function o(e){const t=(0,n.useContext)(s);return(0,n.useCallback)((function(){if(null===t)throw new Error("useEventSender must be used within a EventSenderProvider");const i=e(...arguments);i&&t.send(i)}),[e,t])}},85714:(e,t,i)=>{"use strict";i.d(t,{h:()=>a});var n=i(61740);const a=()=>(0,n.v9)((e=>{let{session:t}=e;return t.features}))},35333:(e,t,i)=>{"use strict";i.d(t,{k:()=>o});var n=i(59272),a=i(17249),s=i(64),r=i(85714);const o=e=>{var t;let{type:i,uri:o}=e;const{isI18nAdditionalPagesEnabled:l,enableI18nLocales:d}=(0,r.h)();if(void 0===o)return!1;const c=a.ag.getUrlLocale(),u=""===o?o:null===(t=(0,n.EC)(o))||void 0===t?void 0:t.type;return(0,s.S9)({localeFeatureFlag:d,entityFeatureFlag:l,urlLocale:c,entity:u,type:i})}},5065:(e,t,i)=>{"use strict";i.d(t,{o:()=>c});var n=i(59496),a=i(61740),s=i(9686),r=i(87164),o=i(48357),l=i(41177);const d=(e,t,i)=>(0,o.E)(e,t)(i);function c(){const e=(0,n.useContext)(r.H8),t=(0,a.I0)(),{pathname:i}=(0,l.TH)();return(0,n.useCallback)(((n,a)=>{t((0,s._b)(d(i,e,n),a))}),[t,i,e])}},40644:(e,t,i)=>{"use strict";i.d(t,{g:()=>a});var n=i(61740);const a=()=>(0,n.v9)((e=>e.session.isAnonymous))},1246:(e,t,i)=>{"use strict";i.d(t,{U:()=>a});var n=i(61740);const a=()=>(0,n.v9)((e=>e.playback.isBuffering))},52123:(e,t,i)=>{"use strict";i.d(t,{V:()=>s});var n=i(20344),a=i(61740);const s=()=>(0,a.v9)((e=>e.session.browserOS))===n.E.iOS},32673:(e,t,i)=>{"use strict";i.d(t,{u:()=>s});var n=i(61740),a=i(42198);function s(e){return(0,n.v9)((t=>(0,a.e)({onDemandPlaylists:t.onDemandPlaylists,session:t.session})(e)))}},92901:(e,t,i)=>{"use strict";i.d(t,{k:()=>a});var n=i(61740);const a=()=>(0,n.v9)((e=>!e.playback.current||e.playback.current.paused))},37716:(e,t,i)=>{"use strict";i.d(t,{u:()=>s});var n=i(61740),a=i(68609);const s=()=>(0,n.v9)((e=>(0,a.p5)(e.session)))},24156:(e,t,i)=>{"use strict";i.d(t,{W:()=>a});var n=i(61740);const a=()=>(0,n.v9)((e=>e.session.referrer))},82518:(e,t,i)=>{"use strict";i(59538);var n=i(87995),a=i(61740),s=i(38366),r=i(99167),o=i(91480),l=i(38674),d=i(17249),c=i(91094),u=i(78302),m=i(66963),_=i(19496),h=i.n(_),p=i(65937),v=i(92711),k=i(82872),g=(i(31781),i(68861));const E="https://apresolve.spotify.com/",S="https://api.spotify.com/";var y=function(e){return e.DEALER="dealer",e.WEBGATE="spclient",e}(y||{});const f=3e3;function N(){let{timeout:e=f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(e){const t=`${E}?type=${y.DEALER}&type=${y.WEBGATE}`;return async()=>{const i=new AbortController,n=setTimeout((()=>i.abort()),e);let a;try{const e=await fetch(t,{signal:i.signal});clearTimeout(n),a=await e.json()}catch(o){if(i.signal.aborted)throw new Error(`x-resolve request timed out after ${e} ms`);throw o}if(!Array.isArray(a[y.DEALER])||!Array.isArray(a[y.WEBGATE])||0===a[y.DEALER].length||0===a[y.WEBGATE].length)throw new Error("x-resolve responded with incomplete results");const s=a[y.DEALER][0],r=a[y.WEBGATE][0];return{dealer:`wss://${s.replace(/:443$/,"")}`,webgate:`https://${r.replace(/:443$/,"")}`,webapi:S}}}(e),i=(0,g.Q)({});return async function(e){try{return await t(e)}catch(n){return await i(e)}}}var T=i(85865);const R={disconnectBeforeUnload:!0,reconnectionRetries:3,requestMode:"fetch"};var A=i(25617);class b{constructor(){(0,A.Z)(this,"name","allow-offline-requests"),this.onBeforeProcessRequest=this.onBeforeProcessRequest.bind(this)}onBeforeProcessRequest(e){var t,i;const{data:n}=e;null!==(t=n.options)&&void 0!==t&&null!==(i=t.metadata)&&void 0!==i&&i.noRequestTransform||navigator.onLine||(n.options=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?t:{...e,...t}}(n.options,{allowOffline:!0,authorize:!1}))}attach(e,t){t.on(p.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this.onBeforeProcessRequest)}detach(e,t){t.removeListener(p.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this.onBeforeProcessRequest)}}function C(){return new b}function I(e,t){const i=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e({providers:{endpoints:t,token:(0,T.V)(i)},...R,...n})}(p.createBaseTransport,N(),e,t.transportOptions);return t.useDealer&&i.addPlugin(v.dv,{WebSocket}),i.addPlugin(C),i.addPlugin(k.Mb,function(e){var t,i,n,a;const s=h().getParser(window.navigator.userAgent),r=s.getPlatform();let o;switch(r.type){case h().PLATFORMS_MAP.mobile:o="smartphone";break;case h().PLATFORMS_MAP.tablet:o="tablet";break;case h().PLATFORMS_MAP.desktop:o="computer";break;case h().PLATFORMS_MAP.tv:o="tv";break;default:o=void 0}return{clientInfo:{clientID:"f6a40776580943a7bc5173125a1e8832",clientVersion:"1.2.13.444.g70bf2d68",os:null!==(t=s.getOSName(!0))&&void 0!==t?t:"unknown",osVersion:null!==(i=s.getOSVersion())&&void 0!==i?i:"unknown",deviceBrand:null!==(n=r.vendor)&&void 0!==n?n:"unknown",deviceModel:null!==(a=r.model)&&void 0!==a?a:"unknown",containerVersion:void 0,deviceID:e.deviceId,deviceType:o,platformIdentifier:void 0}}}(t.clientInfoOptions)),i.on(p.TransportEvent.CONNECTED,(()=>{i.isAuthenticated()||i.authenticate()})),i.on(p.TransportEvent.DISCONNECTED,(()=>{i.connect()})),i.connect(),i}var L=i(56025),P=i(1754);var D=i(33660),O=i(71235),F=(i(31608),i(51669)),w=i(20344),x=i(39411),M=i(37485);const U={me:null,product:null,locale:"en",textDirectionality:"",isAnonymous:!1,features:{},country:"",browserOS:w.E.android,canGoBack:!1,canGoForward:!1};const j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M.co:return{...e,locale:t.locale,textDirectionality:t.textDirectionality,features:t.features,isAnonymous:t.isAnonymous,product:t.product,me:t.me,country:t.country,browserOS:t.browserOS};case M.$x:return window.location.assign("/"),e;case M.MZ:return{...e,product:t.productState};case M.nn:return{...e,features:{...e.features,...t.features}};case x.nk:return{...e,history:{location:t.location,action:t.routerAction},canGoBack:"default"!==t.location.key};case x.KS:return{...e,referrer:t.referrer};default:return e}};i(71756);var B=i(39366),G=(i(65394),i(78819),i(30901)),V=i(42990);G.F.define((()=>({timestamp:1659960134527,context:{uri:"spotify:playlist:37i9dQZF1EIWR2Z7ggXEKn",metadata:{context_description:"Drake Mix"}},position:1685,duration:15047,paused:!0,playback_quality:V.PlaybackQuality.UNKNOWN,playback_features:{hifi_status:V.HiFiStatus.NONE,change_playback_speed:!0},shuffle:!0,repeat_mode:0,track_window:{current_track:{id:"58Q8h9EMrcZRwDWq8zNmPQ",uri:"spotify:ad:58Q8h9EMrcZRwDWq8zNmPQ",type:"ad",uid:"",linked_from:{uri:null,id:null},media_type:"audio",track_type:"audio",name:"Advertisement",duration_ms:15047,artists:[{name:"McDonald's",uri:"https://ad.doubleclick.net/ddm/trackclk/N831870.159423SPOTIFY/B26671304.324148074;dc_trk_aid=516576697;dc_trk_cid=160142122;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;ltd="}],album:{uri:"",name:"",images:[{url:"https://i.scdn.co/image/ab67616600001e01c07c6f959e75ca9ee37795ce"},{url:"https://i.scdn.co/image/ab67616600001e01c07c6f959e75ca9ee37795ce"}]},is_playable:!0},next_tracks:[],previous_tracks:[]},restrictions:{disallow_seeking_reasons:["ad_disallow"],disallow_peeking_next_reasons:["unknown_reason"],disallow_peeking_prev_reasons:["unknown_reason"],disallow_skipping_next_reasons:["ad_disallow"],disallow_skipping_prev_reasons:["ad_disallow"],disallow_toggling_repeat_track_reasons:["unknown_reason"],disallow_pausing_reasons:["already_paused"]},disallows:{seeking:!0,peeking_next:!0,peeking_prev:!0,skipping_next:!0,skipping_prev:!0,toggling_repeat_track:!0,pausing:!0},loading:!1,playback_speed:1,playback_id:"341278ce969362b914b5bf93fbd63835"})));var Y=i(25126);const K={current:null,hasSkippedThisSession:!1,isBuffering:!1,heardAudio:!1,initiatedPlayback:!1};const H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y.im:return{...e,isBuffering:!1,bufferingTrigger:Y.sn.none};case Y.$b:return{...e,isBuffering:!0,bufferingTrigger:t.trigger};case Y.mC:return{...e,current:t.state};case Y.zV:return{...e,heardAudio:!0};case Y.RN:return{...e,initiatedPlayback:!0};case Y.Sp:return{...e,hasSkippedThisSession:!0};case x.nk:return((e,t)=>e)(e,t.location);default:return e}};var W=i(46804);const q={hasPreviousLikes:!1,isBanned:!1,entityView:null,albumUri:""};const Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.yI:return{...e,hasPreviousLikes:t.hasPreviousLikes};case W.Es:return{...e,isBanned:t.isBanned};default:return e;case W.nF:return{...e,showAccessInfo:t.showAccessInfo}}};var $=i(25349);const z={message:null,type:$.NN.DEFAULT,action:null};const Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $._q:return{...e,message:null,action:null};case $.yj:return{...e,message:t.message,type:t.toastType,action:t.toastAction};default:return e}};var X=i(31815);const J={modal:X.fG.NOW_PLAYING_BAR,nowPlayingView:!1,dialog:null,errorView:!1},ee=new Set;function te(e,t,i){return ee.add(t),e.dialog?e:{...e,dialog:t,context:i}}const ie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.z2:return{...e,modal:X.fG.NOW_PLAYING_BAR};case X.Vz:return{...e,nowPlayingView:!0};case X.WF:return{...e,nowPlayingView:!1};case X.J_:return{...e,errorView:!0};case X.fM:return te(e,X.SY.ERROR_BOUNDARY);case X.RJ:return{...e,modal:X.fG.CONNECT};case X.aR:return{...e,modal:""};case X.yT:return te(e,t.id,t.context);case X.Ab:return function(e,t){return ee.delete(t),{...e,dialog:ee.values().next().value||null,context:void 0}}(e,t.id);case X.RA:return{...e,modal:X.fG.OVERFLOW_MENU};case X.A6:return{...e,modal:X.fG.NOW_PLAYING_BAR};default:return e}};var ne=i(8875);const ae={landingUri:null};const se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;return t.type===ne.x?{...e,landingUri:t.landingUri}:e};var re=i(42657),oe=i(90492),le=i(93341);const de={items:{},recommendations:{},saved:{},trackCloud:{}},ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.mk:return{...e,seoExperiment:t.seoExperiment};case W.dK:{const{uri:i,data:n}=t;return{...e,items:{...e.items,[i]:n}}}case W.Fu:{const{uri:i,data:n}=t;return{...e,items:{...e.items,[i]:n}}}case W.qh:{const{uri:i}=t;return e.items[i]&&delete e.items[i],e}case W.JI:case W.mW:{const{uri:i,data:n}=t;return{...e,items:{...e.items,[i]:n}}}case W.U:{const{uri:i}=t,n=e.items[t.uri];return(0,oe.z)(n)?{...e,items:{...e.items,[i]:{...n,publicPlaylistsV2:{...n.publicPlaylistsV2,items:[...n.publicPlaylistsV2.items,...t.data.publicPlaylistsV2.items]}}}}:e}case W.l$:return{...e,trackCloud:{...e.trackCloud,[t.uri]:t.data}};case W.Al:case W.zm:return{...e,saved:{...e.saved,[t.uri]:t.isLiked}};case re.nC:{const s=e.items[t.uri],r=t.data;return void 0===s&&(0,le.wG)(r)?{...e,items:{...e.items,[t.uri]:r},saved:{[t.uri]:r.saved}}:(0,le.wG)(s)&&(0,le.wG)(r)&&(0,le.GF)(null==r?void 0:r.pages)?{...e,items:{...e.items,[t.uri]:(n=s,a=null==r||null===(i=r.pages)||void 0===i?void 0:i.items,(0,le.GF)(n.pages)?{...n,pages:{...n.pages,items:[...n.pages.items,...a]}}:n)}}:e;var i}case re.mU:return{...e,items:{...e.items,[t.uri]:t.data}};default:return e}var n,a},ue=ce;var me=i(6526),_e=i(57325);const he={fetched:!1,items:[]},pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;const{type:i}=t;return i===_e.Yl?{...e,fetched:!0,items:t.payload}:e};var ve=i(82733),ke=i(40014),ge=i(80151);const Ee={contextUri:void 0,uri:void 0,isVisible:!1,metadata:void 0,tracks:{}},Se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve.Yk.SHOW_CONTEXT_MENU:return{...e,...t.data,isVisible:!0};case ve.Yk.DISMISS_CONTEXT_MENU:return{...e,isVisible:!1};case x.nk:return{...e,isVisible:t.location.hash===ge.H};case ve.Yk.RESOLVE_TRACK_DATA_SUCCESS:{var i,n;const a=t.data,s=a.album,r=a.artists[0];return{...e,metadata:{title:a.name,subtitle:`${r.name} • ${s.name}`,image:null!==(i=null===(n=(0,ke.v)(s.images,ke.F.medium))||void 0===n?void 0:n.url)&&void 0!==i?i:"",album:{uri:s.uri,name:s.name},artist:{uri:r.uri,name:r.name},track:{uri:a.uri,name:a.name}},tracks:{...e.tracks,[t.uri]:t.data}}}default:return e}},ye=Se;var fe=i(66850),Ne=i(59272),Te=i(96730);const Re=e=>null!==e,Ae=(e,t,i,n)=>({title:e,href:t,color:i,imageUrl:(0,Te.R)(n,91)}),be=e=>{var t;let{content:i}=e;return"BrowseSectionContainerWrapper"===i.__typename&&"BrowseSectionContainer"===i.data.__typename&&null!==(t=i.data.data)&&void 0!==t&&t.cardRepresentation?(e=>{var t;let{navigationUri:i,title:n,artwork:a,backgroundColor:s}=e;const r=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0),o=null==n?void 0:n.transformedLabel;return r&&o?Ae(o,r,null==s?void 0:s.hex,null==a?void 0:a.sources):null})(i.data.data.cardRepresentation):("BrowseXlinkResponseWrapper"===i.__typename&&i.data.__typename,"BrowseXlinkResponseWrapper"===i.__typename&&i.data.__typename,null)},Ce=e=>{var t,i;let{data:n,sectionItems:a}=e;return{title:null!==(t=null==n||null===(i=n.title)||void 0===i?void 0:i.transformedLabel)&&void 0!==t?t:"",items:a.items.map(be).filter(Re)}},Ie=e=>{var t;let{sections:i}=e;return null!==(t=null==i?void 0:i.items.map(Ce))&&void 0!==t?t:[]},Le={isLoading:!1,sections:null,hasFailedAttempts:!1},Pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe.kx:return{...e,isLoading:!0};case fe.sG:return{...e,sections:Ie(t.data),isLoading:!1};case fe.l$:return{...e,isLoading:!1,hasFailedAttempts:!0};default:return e}};var De=i(585);const Oe=250,Fe=e=>null!==e,we=e=>{var t;let{content:i}=e;if("PlaylistResponseWrapper"!==i.__typename&&"ArtistResponseWrapper"!==i.__typename&&"TrackResponseWrapper"!==i.__typename&&"UserResponseWrapper"!==i.__typename&&"AlbumResponseWrapper"!==i.__typename&&"EpisodeOrChapterResponseWrapper"!==i.__typename&&"PodcastOrAudiobookResponseWrapper"!==i.__typename&&"BrowseSectionContainerWrapper"!==i.__typename&&"BrowseXlinkResponseWrapper"!==i.__typename)return null;const{data:n}=i;return"Playlist"===n.__typename?(e=>{var t,i;let{uri:n,name:a,images:s,followers:r,description:o}=e;const l=null===(t=(0,Ne.EC)(n))||void 0===t?void 0:t.toURLPath(!0);return l?{title:a,href:l,followers:r,description:o,imageUrl:(0,Te.R)(null===(i=s.items[0])||void 0===i?void 0:i.sources,Oe)}:null})(n):"Artist"===n.__typename?(e=>{var t,i;let{uri:n,profile:a,visuals:s}=e;const r=null===(t=(0,Ne.EC)(n))||void 0===t?void 0:t.toURLPath(!0);return r?{title:a.name,href:r,imageUrl:(0,Te.R)(null===(i=s.avatarImage)||void 0===i?void 0:i.sources,Oe)}:null})(n):"Track"===n.__typename?(e=>{var t,i;let{uri:n,name:a,albumOfTrack:s,artists:r}=e;const o=null===(t=(0,Ne.EC)(n))||void 0===t?void 0:t.toURLPath(!0);return o?{title:a,href:o,imageUrl:(0,Te.R)(null==s||null===(i=s.coverArt)||void 0===i?void 0:i.sources,Oe),description:r.items[0].profile.name}:null})(n):"User"===n.__typename?(e=>{var t;let{uri:i,name:n,avatar:a}=e;const s=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0);return s?{title:n,href:s,imageUrl:(0,Te.R)(null==a?void 0:a.sources,Oe)}:null})(n):"Album"===n.__typename?(e=>{var t;let{uri:i,name:n,coverArt:a,artists:s}=e;const r=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0);return r?{title:n,href:r,imageUrl:(0,Te.R)(null==a?void 0:a.sources,Oe),artistsNames:s.items.map((e=>{let{profile:t}=e;return t.name}))}:null})(n):"Audiobook"===n.__typename?(e=>{var t;let{uri:i,name:n,coverArt:a,authors:s}=e;const r=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0);if(!r)return null;const o=null==s?void 0:s.reduce(((e,t)=>(null!=t&&t.name&&e.push(t.name),e)),[]);return{title:n,href:r,imageUrl:(0,Te.R)(null==a?void 0:a.sources,Oe),authorsNames:o}})(n):"Chapter"===n.__typename||"Episode"===n.__typename||"Podcast"===n.__typename?(e=>{var t;let{uri:i,name:n,coverArt:a}=e;const s=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0);return s?{title:n,href:s,imageUrl:(0,Te.R)(null==a?void 0:a.sources,Oe)}:null})(n):"BrowseSectionContainerWrapper"===i.__typename&&"BrowseSectionContainer"===i.data.__typename&&null!==(t=i.data.data)&&void 0!==t&&t.cardRepresentation?(e=>{var t;let{navigationUri:i,title:n,artwork:a}=e;const s=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0),r=null==n?void 0:n.transformedLabel;return s&&r?{title:r,href:s,imageUrl:(0,Te.R)(null==a?void 0:a.sources,Oe)}:null})(i.data.data.cardRepresentation):"BrowseClientFeature"===n.__typename?(e=>{var t;let{featureUri:i,title:n,artwork:a}=e;const s=null===(t=(0,Ne.EC)(i))||void 0===t?void 0:t.toURLPath(!0),r=null==n?void 0:n.transformedLabel;return s&&r?{title:r,href:s,imageUrl:(0,Te.R)(null==a?void 0:a.sources,Oe)}:null})(n):"BrowseSpacesHub"===n.__typename?(e=>{let{title:t,artwork:i,spaceId:n}=e;const a=null==t?void 0:t.transformedLabel;return a?{title:a,href:`/genre/${n}`,imageUrl:(0,Te.R)(null==i?void 0:i.sources,Oe)}:null})(n):null},xe=e=>{var t,i;let{__typename:n,data:a,sectionItems:s}=e;return"BrowseSection"!==n?null:{type:(r=null==a?void 0:a.__typename,"BrowseRelatedSectionData"===r?De.C.Chips:De.C.Cards),title:null!==(t=null==a||null===(i=a.title)||void 0===i?void 0:i.transformedLabel)&&void 0!==t?t:"",items:s.items.map(we).filter(Fe)};var r},Me=e=>{var t;let{sections:i}=e;return null!==(t=null==i?void 0:i.items.map(xe).filter(Fe))&&void 0!==t?t:[]};var Ue=i(60354);const je={},Be={isLoading:!1,hasError:!1,title:null,sections:[]},Ge=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue.bA:return{...e,[t.uri]:{...Be,isLoading:!0}};case Ue.fj:var i,n,a,s;return"BrowseSectionContainer"!==(null===(i=t.data)||void 0===i?void 0:i.__typename)?e:{...e,[t.uri]:{...Be,title:null!==(n=null===(a=t.data.header)||void 0===a||null===(s=a.title)||void 0===s?void 0:s.transformedLabel)&&void 0!==n?n:"",sections:Me(t.data),isLoading:!1}};case Ue.es:return{...e,[t.uri]:{...Be,isLoading:!1,hasError:!0}};default:return e}},Ve=(0,B.UY)({grid:Pe,pages:Ge});var Ye=i(99571);const Ke={colors:{}};function He(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;if(t.type===Ye.T){const{url:i,color:n}=t;return{...e,colors:{...e.colors,[i]:n}}}return e}var We=i(37100),qe=(i(70238),i(45880),i(27383)),Qe=i(68609),$e=i(61050);const ze=e=>{if("show"===e.type)return e.publisher},Ze=(e,t)=>{var i,n;const a=e.uri,s=null!==(i=e.images)&&void 0!==i?i:[];return{id:`${e.id}-${t}`,component:{id:$e.CL.GLUE_2.CARD,category:$e.Hv.CARD},images:{main:{uri:s.length>0?(0,qe.ZP)(s[0].url):void 0}},text:{title:null!==(n=e.name)&&void 0!==n?n:"",description:ze(e)},events:{[$e.$R.CLICK]:{name:$e.Wq.NAVIGATE,data:{uri:a}}},metadata:{uri:a}}},Xe=(e,t)=>{var i,n;const a=e.href,s=new URL(a).pathname.split("/").pop()||"",r=e.id||s,o=(e=>{if("link"===e.type){let t=e.uri;return e.href.indexOf("https://api.spotify.com/v1/views/")>-1&&(t=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:")),t}return e.uri})(e),l=null!==(i=e.images)&&void 0!==i?i:[];return{id:`${r}-${t}`,component:{id:$e.CL.GENRE.CARD,category:$e.Hv.CARD},images:{main:{uri:l.length>0?(0,qe.ZP)(l[0].url):void 0}},text:{title:null!==(n=e.name)&&void 0!==n?n:""},events:{[$e.$R.GENRE_PAGE_CLICK]:{name:$e.Wq.NAVIGATE,data:{uri:o}}},metadata:{uri:a}}},Je=e=>Boolean(e.href),et=e=>{let{content:t}=e;return t.items.map(((e,t)=>{switch(e.rendering){case"DEFAULT":case"CAROUSEL":case"GRID":case"LIST":return 0===e.content.items.length?{}:(e=>e.content.items.filter((e=>"link"===e.type)).length>0)(e)?((e,t)=>{var i;return{id:`${e.id}-${t}`,component:{id:$e.CL.GENRE.CAROUSEL,category:$e.Hv.CAROUSEL},text:{title:null!==(i=e.name)&&void 0!==i?i:"",description:e.tag_line||""},children:e.content.items.filter(Je).map(Xe)}})(e,t):((e,t)=>{var i;return{id:`${e.id}-${t}`,component:{id:$e.CL.GLUE.CAROUSEL,category:$e.Hv.CAROUSEL},text:{title:null!==(i=e.name)&&void 0!==i?i:"",description:e.tag_line||""},children:e.content.items.map(Ze)}})(e,t);case"HEADER":return((e,t)=>{var i;return{id:`${e.id}-${t}`,component:{id:$e.CL.GLUE.SECTION_HEADER},text:{title:null!==(i=e.name)&&void 0!==i?i:"",description:e.tag_line||""}}})(e,t);case"BANNER":return((e,t)=>{var i,n,a,s,r,o,l,d,c,u;return{id:`${e.id}-${t}`,component:{id:$e.CL.BANNER},text:{title:null!==(i=null===(n=e.content)||void 0===n||null===(a=n.items)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.name)&&void 0!==i?i:"",description:null===(r=e.content)||void 0===r||null===(o=r.items)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.description},href:null===(d=e.content)||void 0===d||null===(c=d.items)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.href}})(e,t);default:return{}}}))},tt={isLoading:!1,backgroundColorSourceImage:"",isAnonymous:!0},it=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We.Nx:return{...e,isLoading:!0};case We.Gz:return{...e,isLoading:!1,items:et(t.payload)};case We.h7:return{...e,isLoading:!1};case We.sH:return{...e,backgroundColorSourceImage:t.url};default:return e}};var nt=i(23623);const at={isFetching:!1,results:null,query:null,error:null,recentSearches:[]},st=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nt.rl:return{...e,isFetching:!0,offset:t.data.offset,query:t.data.query};case nt.EC:return{...e,isFetching:!1,results:t.data,title:t.data.title};case nt.fm:return{...e,recentSearches:t.recentSearches};case nt.hd:return{...e,recentSearches:[...e.recentSearches||[],t.data]};default:return e}};var rt=i(58839),ot=i(96639);const lt={status:rt.oB.UNAVAILABLE};const dt=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case ot.bF:return{...t,status:rt.oB.LOADING};case ot.Fn:return{...t,status:rt.oB.LOADED,data:{lyrics:{...null===(e=i.response)||void 0===e?void 0:e.lyrics}},uri:i.uri};case ot.lP:return{status:rt.oB.UNAVAILABLE};default:return t}};var ct=i(31148);let ut=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const mt={trackArtists:{status:ut.UNAVAILABLE}};const _t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct.mk:return{...e,seoExperiment:t.seoExperiment};case ct.xU:return{...e,trackArtists:{...e.trackArtists,status:ut.LOADING}};case ct.Fr:return{...e,trackArtists:{data:t.response,status:ut.LOADED}};case ct.OV:return{...e,trackArtists:{status:ut.UNAVAILABLE}};default:return e}};var ht=i(74878);const pt={device:null,devices:[],manualTransferDeviceId:null},vt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht.Rj:{const i=e.devices.map((e=>(e&&(e.is_active=((e,t)=>Boolean(t)&&e.id===t.id&&t.is_active)(e,t.device)),e))).filter((e=>e));return{...e,device:t.device,devices:i}}case ht.Pz:return{...e,devices:t.devices};case ht.R5:return{...e,manualTransferDeviceId:t.deviceId};default:return e}},kt=e=>e.charAt(0).toLocaleUpperCase()+e.slice(1).toLocaleLowerCase(),gt=(e,t)=>{let{enableShows:i}=t;return e.map(((t,n)=>{if(n!==e.length-1)return t;const a=[...i?[{href:"/genre/podcasts-web",title:kt(d.ag.get("browse.podcasts")),color:"#148A08"}]:[],{href:"/genre/made-for-x-hub",title:d.ag.get("browse.made-for-you"),color:"#8D67AB"},{href:"/genre/browse-charts-tab",title:d.ag.get("browse.charts"),color:"#F037A5"},{href:"/genre/new-releases-page",title:d.ag.get("new_releases"),color:"#E8115B"},{href:"/genre/discover-page",title:kt(d.ag.get("browse.discover")),color:"#1E3264"},{href:"/concerts",title:d.ag.get("browse.live-events"),color:"#4100F5"},...t.items],s=a.findIndex((e=>e.href.includes("0JQ5DAqbMKFETqK4t8f1n3")));if(-1===s)return{...t,items:a};const r=a[s],o=[...a.slice(0,s),...a.slice(s+1)],[l,...c]=o;return{...t,items:[l,r,...c]}}))};var Et=i(39143);const St={isLoading:!1,sections:null},yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et.jk:return{...e,isLoading:!0};case Et.hx:return{...e,sections:gt(t.data,{enableShows:t.enableShows}),isLoading:!1};case Et.mM:default:return{...e,isLoading:!1}}},ft=(0,B.UY)({grid:yt,pages:()=>je});var Nt=i(33841);function Tt(e){return null!==e}const Rt=300,At={isLoading:!1,hasError:!1,sections:[]},bt=e=>{const t=e.data;var i,n,a,s,r,o,l;return"HomeGenericSectionData"===(null==t?void 0:t.__typename)||"HomeRecentlyPlayedSectionData"===(null==t?void 0:t.__typename)||"HomeFeatureActivationSectionData"===(null==t?void 0:t.__typename)||"HomeFeedBaselineSectionData"===(null==t?void 0:t.__typename)||"HomeNativeAdsSectionData"===(null==t?void 0:t.__typename)?null!==(i=null===(n=t.title)||void 0===n?void 0:n.transformedLabel)&&void 0!==i?i:null:"HomeShortsSectionData"===(null==t?void 0:t.__typename)?null!==(a=null===(s=t.greeting)||void 0===s?void 0:s.transformedLabel)&&void 0!==a?a:null:"HomeOnboardingSectionData"===(null==t?void 0:t.__typename)&&null!==(r=null===(o=t.title)||void 0===o||null===(l=o.baseText)||void 0===l?void 0:l.text)&&void 0!==r?r:null},Ct=e=>e.sectionItems.items.reduce(((e,t)=>{const i=t.content;if("PlaylistResponseWrapper"!==i.__typename&&"ArtistResponseWrapper"!==i.__typename&&"TrackResponseWrapper"!==i.__typename&&"UserResponseWrapper"!==i.__typename&&"EpisodeOrChapterResponseWrapper"!==i.__typename&&"PodcastOrAudiobookResponseWrapper"!==i.__typename&&"AlbumResponseWrapper"!==i.__typename)return e;if("Episode"===i.data.__typename||"Chapter"===i.data.__typename||"Podcast"===i.data.__typename||"Album"===i.data.__typename){var n;const t=(0,Ne.EC)(i.data.uri);e.push({title:i.data.name,uri:null==t?void 0:t.toURI(),href:null==t?void 0:t.toURLPath(),imageUrl:(0,Te.R)(null===(n=i.data.coverArt)||void 0===n?void 0:n.sources,Rt),renderAsCircle:!1})}else if("Audiobook"===i.data.__typename){var a,s,r;const t=(0,Ne.EC)(i.data.uri),n=null!==(a=null===(s=i.data.authors)||void 0===s?void 0:s.reduce(((e,t)=>(Tt(t)&&Tt(t.name)&&e.push(t.name),e)),[]))&&void 0!==a?a:void 0;e.push({title:i.data.name,authors:n,uri:null==t?void 0:t.toURI(),href:null==t?void 0:t.toURLPath(),imageUrl:(0,Te.R)(null===(r=i.data.coverArt)||void 0===r?void 0:r.sources,Rt),renderAsCircle:!1})}else if("Playlist"===i.data.__typename){var o;const t=(0,Ne.EC)(i.data.uri);e.push({title:i.data.name,uri:null==t?void 0:t.toURI(),href:null==t?void 0:t.toURLPath(),imageUrl:(0,Te.R)(null===(o=i.data.images.items[0])||void 0===o?void 0:o.sources,Rt),renderAsCircle:!1})}else if("Artist"===i.data.__typename){var l;const t=(0,Ne.EC)(i.data.uri);e.push({title:i.data.profile.name,uri:null==t?void 0:t.toURI(),href:null==t?void 0:t.toURLPath(),imageUrl:(0,Te.R)(null===(l=i.data.visuals.avatarImage)||void 0===l?void 0:l.sources,Rt),renderAsCircle:!0})}else if("Track"===i.data.__typename){var d,c;const t=(0,Ne.EC)(i.data.uri);e.push({title:i.data.name,uri:null==t?void 0:t.toURI(),href:null==t?void 0:t.toURLPath(),imageUrl:(0,Te.R)(null===(d=i.data.albumOfTrack)||void 0===d||null===(c=d.coverArt)||void 0===c?void 0:c.sources,Rt),renderAsCircle:!1})}else if("User"===i.data.__typename){var u;const t=(0,Ne.EC)(i.data.uri);e.push({title:i.data.name,uri:null==t?void 0:t.toURI(),href:null==t?void 0:t.toURLPath(),imageUrl:(0,Te.R)(null===(u=i.data.avatar)||void 0===u?void 0:u.sources,Rt),renderAsCircle:!1})}return e}),[]),It=(e,t)=>(e.push({title:bt(t),uri:t.uri,items:Ct(t)}),e),Lt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nt.Jb:return{...e,isLoading:!1,sections:t.data.sectionContainer.sections.items.reduce(It,[])};case Nt.ss:return{...e,hasError:!0};default:return e}};var Pt=i(75543);const Dt=e=>(0,B.UY)({session:j,connect:vt,entities:ue,playback:H,request:Q,search:st,toast:Z,ui:ie,onDemand:se,A2HS:me.Z,home:Lt,onDemandPlaylists:pe,contextMenu:ye,colorExtraction:He,genre:it,lyrics:dt,richEntities:_t,browse:null!=e&&e.isPathfinderBrowseCardsEnabled?Ve:ft,internalLinkRecommender:Pt.Z});var Ot=i(45629),Ft=i(3232),wt=i(15449),xt=i(85399),Mt=i(80580);const Ut=e=>t=>i=>{const n=t(i);if(e.getState().session.isAnonymous)return n;switch(i.type){case ht.Rj:((e,t)=>{var i,n,a;let{connect:s,playback:r,session:o}=e;const l=!r.device||r.device.id!==t.id,d=t&&t.local,c=s.manualTransferDeviceId&&t.id===s.manualTransferDeviceId,u=(null==o||null===(i=o.history)||void 0===i||null===(n=i.location)||void 0===n||null===(a=n.search)||void 0===a?void 0:a.includes("bounce=true"))||!1;return l&&t&&!d&&!c&&!u})(e.getState(),i.device)?e.dispatch((0,wt.vC)(X.SY.CONNECT)):e.dispatch((0,wt.Wr)(X.SY.CONNECT));break;case Ft.VX:xt.Z.subscribeConnect();break;case ht.FB:s=i.volume,Ot.Z.getInstance().then((e=>{e.setVolume(s)}));break;case ht.R5:a=i.deviceId,Ot.Z.getInstance().then((e=>{e.transfer(a)})),(0,Mt.yL)(e.getState(),e.dispatch)}var a,s;return n};var jt=i(76045),Bt=i(70283),Gt=i(90957),Vt=i(9596);const Yt=()=>e=>t=>{var i,n,a,s;switch(t.type){case Bt.vu:(0,Vt.Tb)(t.err,{tags:{type:"generic-error"},extra:{...t.data}}),(0,c.sQ)({metric_type:jt.MetricTypes.COUNTER,what:"mobile-web-player-generic-error",value:1,tags:{pathname:(0,Gt.J)(null===(i=window)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.pathname)}});break;case Y.EE:(0,Vt.Tb)(t.err,{tags:{type:"harmony-error"},extra:{...t.err}}),(0,c.sQ)({metric_type:jt.MetricTypes.COUNTER,what:"mobile-web-player-harmony-error",value:1,tags:{pathname:(0,Gt.J)(null===(a=window)||void 0===a||null===(s=a.location)||void 0===s?void 0:s.pathname)}});break;case W.uX:var r,o;0,(0,Vt.Tb)(t.error,{tags:{type:"mobile-web-player-entity-request-error"},extra:{...t.error}}),(0,c.sQ)({metric_type:jt.MetricTypes.COUNTER,what:"mobile-web-player-entity-request-error",value:1,tags:{pathname:(0,Gt.J)(null===(r=window)||void 0===r||null===(o=r.location)||void 0===o?void 0:o.pathname)}})}return e(t)};var Kt=i(78366),Ht=i(56379),Wt=i(38331),qt=i(66031),Qt=i(15520),$t=i(19968);let zt=function(e){return e[e.TRANSIENT=0]="TRANSIENT",e[e.PERSISTENT=1]="PERSISTENT",e}({}),Zt=function(e){return e.SUCCESS="success",e.PLAYBACK_STUCK="playback_stuck",e.PLAYBACK_ERROR="playback_error",e.LICENSE_CHANGE="license_change",e.PLAY_RESTRICTED="play_restricted",e.STOP_RESTRICTED="stop_restricted",e.UPDATE_RESTRICTED="update_restricted",e.PAUSE_RESTRICTED="pause_restricted",e.RESUME_RESTRICTED="resume_restricted",e.SKIP_TO_PREV_RESTRICTED="skip_to_prev_restricted",e.SKIP_TO_NEXT_RESTRICTED="skip_to_next_restricted",e.SKIP_TO_NON_EXISTENT_TRACK="skip_to_non_existent_track",e.TOGGLE_REPEAT_CONTEXT_RESTRICTED="toggle_repeat_context_restricted",e.TOGGLE_REPEAT_TRACK_RESTRICTED="toggle_repeat_track_restricted",e.SET_OPTIONS_RESTRICTED="set_options_restricted",e.TOGGLE_SHUFFLE_RESTRICTED="toggle_shuffle_restricted",e.SET_QUEUE_RESTRICTED="set_queue_restricted",e.INTERRUPT_PLAYBACK_RESTRICTED="interrupt_playback_restricted",e.SEEK_TO_RESTRICTED="seek_to_restricted",e.ONE_TRACK_UNPLAYABLE="one_track_unplayable",e.ONE_TRACK_UNPLAYABLE_AUTO_STOPPED="one_track_unplayable_auto_stopped",e.ALL_TRACKS_UNPLAYABLE_AUTO_STOPPED="all_tracks_unplayable_auto_stopped",e.SKIP_TO_NON_EXISTENT_TRACK_AUTO_STOPPED="skip_to_non_existent_track_auto_stopped",e.QUEUE_REVISION_MISMATCH="queue_revision_mismatch",e.VIDEO_PLAYBACK_ERROR="video_playback_error",e.VIDEO_GEORESTRICTED="video_georestricted",e.VIDEO_UNSUPPORTED_PLATFORM_VERSION="video_unsupported_platform_version",e.VIDEO_UNSUPPORTED_CLIENT_VERSION="video_unsupported_client_version",e.VIDEO_UNSUPPORTED_KEY_SYSTEM="video_unsupported_key_system",e.VIDEO_COUNTRY_RESTRICTED="video_country_restricted",e.VIDEO_UNAVAILABLE="video_unavailable",e.VIDEO_CATALOGUE_RESTRICTED="video_catalogue_restricted",e.VIDEO_MANIFEST_DELETED="video_manifest_deleted",e.TIMEOUT="timeout",e.INVALID="invalid",e.PLAYBACK_REPORTING_ERROR="playback_reporting_error",e.UNKNOWN="unknown",e.UNRECOGNIZED="unrecognized",e}({});class Xt extends Error{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;super(Xt.getMessage(t,i,n)),this.type=e,this.code=t,this.reasons=i,this.cause=n}static getMessage(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return t.length>0?`Code '${e}' with reasons '${t.join(", ")}'`:void 0!==i?`Code '${e}' with cause '${i.name}: ${i.message}'`:`Code '${e}'`}}class Jt extends Xt{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(zt.TRANSIENT,e,t,i)}}class ei extends Xt{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(zt.PERSISTENT,e,t,i)}}var ti=i(83474);let ii=function(e){return e.CONTEXT_DESCRIPTION="context_description",e.IS_AUDIOBOOK="is_audiobook",e.REPORTING_URI="reporting.uri",e.FILTERING_PREDICATE="filtering.predicate",e.SORTING_CRITERIA="sorting.criteria",e.LIST_UTIL_FILTER="list_util_filter",e.LIST_UTIL_SORT="list_util_sort",e}({});function ni(e){return(null==e?void 0:e.type)===ti.p.EPISODE}function ai(e){return(null==e?void 0:e.type)===ti.p.TRACK}const si={type:ti.p.UNKNOWN,uri:"",uid:"",name:"",images:[],mediaType:"audio",duration:{milliseconds:-1},album:{type:ti.p.ALBUM,uri:"",name:"",images:[]},artists:[{type:ti.p.ARTIST,uri:"",name:""}],provider:null};let ri=function(e){return e[e.REPEAT_NONE=0]="REPEAT_NONE",e[e.REPEAT_CONTEXT=1]="REPEAT_CONTEXT",e[e.REPEAT_TRACK=2]="REPEAT_TRACK",e}({});const oi=["not_playing_locally","not_playing_context","not_playing_track","no_prev_track","no_next_track","no_specific_track","already_paused","not_paused","context_player_disallow","mft_disallow","ad_disallow","protocol_limitations","unknown","already_playing","throttled","endless_context","autoplay","narration"];let li=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.VERY_HIGH=4]="VERY_HIGH",e[e.HIFI=5]="HIFI",e}({});const di=e=>!!(e=>!e.isBuffering&&!e.isPaused&&!e.hasContext)(e)||e.isPaused&&!e.isBuffering,ci=e=>null==e?void 0:e.map((e=>{var t,i;return{...e,width:null!==(t=e.width)&&void 0!==t?t:void 0,height:null!==(i=e.height)&&void 0!==i?i:void 0}})),ui=(e,t)=>{window.addEventListener("offline",(()=>{e((0,Ht.d1)())})),window.addEventListener("online",(()=>{e((0,Ht.u_)())})),t.getEvents().addListener(Qt.rg.UPDATE,(t=>{(0,a.dC)((()=>{t.data&&(e((0,Wt.XB)((e=>{var t,i,n,a;const s=null!==(t=e.item)&&void 0!==t?t:void 0,r={loading:!1,context:{...e.context,metadata:{}},disallows:{},timestamp:0,restrictions:{},duration:Number(e.duration),paused:di(e),position:null!==(i=(0,$t.k)(e))&&void 0!==i?i:0,shuffle:Boolean(e.shuffle),repeat_mode:V.RepeatMode.OFF,track_window:{next_tracks:[],previous_tracks:[],current_track:{uri:null!==(n=null==s?void 0:s.uri)&&void 0!==n?n:"",name:ai(s)||ni(s)?s.name:void 0,type:null!==(a=null==s?void 0:s.type)&&void 0!==a?a:"",duration_ms:Number(e.duration),artists:[],album:{}}},playback_id:null};var o,l,d,c,u,m,_,h;return s&&ni(s)?{...r,disallows:{skipping_next:!0,skipping_prev:!0,seeking:!1,toggling_shuffle:!0,toggling_repeat_track:!0,toggling_repeat_context:!0},track_window:{next_tracks:[],previous_tracks:[],current_track:{uri:null!==(o=s.uri)&&void 0!==o?o:"",name:null!==(l=s.name)&&void 0!==l?l:void 0,type:null!==(d=s.type)&&void 0!==d?d:"",media_type:null!==(c=s.mediaType)&&void 0!==c?c:"audio",duration_ms:Number(e.duration),artists:[],album:{...s.show,images:ci(s.images)}}},playback_id:null}:s&&ai(s)?{...r,disallows:{skipping_next:!0,skipping_prev:!0,seeking:!1,toggling_shuffle:!0,toggling_repeat_track:!0,toggling_repeat_context:!0},track_window:{next_tracks:[],previous_tracks:[],current_track:{uri:null!==(u=s.uri)&&void 0!==u?u:"",name:null!==(m=s.name)&&void 0!==m?m:void 0,type:null!==(_=s.type)&&void 0!==_?_:"",media_type:null!==(h=s.mediaType)&&void 0!==h?h:"audio",duration_ms:Number(e.duration),artists:s.artists,album:{...s.album,images:ci(s.album.images)}}},playback_id:null}:r})(t.data))),t.data.isBuffering?e((0,Wt.Gr)()):e((0,Wt.qI)()))}))}));t.getEvents().addListener(Qt.rg.ERROR,(t=>(t=>{if(t){const i=`AUDIO_PLAYER_ERROR_${t.name}`;e((0,Wt.F)({code:i,unrecoverable:t.type===zt.PERSISTENT}))}})(t.data)))},mi=e=>t=>i=>n=>{var a;const s=i(n);if(!e)return s;switch(n.type){case Ft.VX:ui(t.dispatch,e),e.getEvents().addListener(Qt.rg.UPDATE,(e=>{var t;const i=null!==(t=(0,$t.k)(e.data))&&void 0!==t?t:0;qt.O.getPosition()!==i&&qt.O.setPosition(i)}));break;case Y.kS:if(null!==(a=n.audioFileMetadata)&&void 0!==a&&a.anonymousPlaybackAllowed){var r,o,l,d,c;const t="track"===n.audioFileMetadata.type?ti.p.TRACK:ti.p.EPISODE;e.play({uri:n.uri,pages:[{items:[{type:t,uri:null===(r=n.audioFileMetadata)||void 0===r?void 0:r.uri,uid:null,metadata:n.audioFileMetadata,provider:null}]}]},{featureIdentifier:null===(o=(0,Ne.EC)(n.uri))||void 0===o?void 0:o.type,referrerIdentifier:"PlayerStub_UnknownReferrer"},{skipTo:null!==(l=n.options)&&void 0!==l&&l.trackUID?{uid:null===(d=n.options)||void 0===d?void 0:d.trackUID}:void 0,seekTo:null===(c=n.options)||void 0===c?void 0:c.initialOffset})}break;case Y.tG:e.seekTo(n.position);break;case Y.Eb:e.seekForward(n.time);break;case Y.km:e.seekBackward(n.time);break;case Y.Nv:var u;null!==(u=t.getState().playback.current)&&void 0!==u&&u.paused?e.resume():e.pause()}return s};i(21727);const _i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"soaPartners"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SOAPartner"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"}},{kind:"Field",name:{kind:"Name",value:"linkUrl"}},{kind:"Field",name:{kind:"Name",value:"logoUrl"}}]}}]},hi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryShowAccessInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcastUnionV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UpsellAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BasicAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MultiPassAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"soaPartners"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"soaPartners"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UpsellAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BasicAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MultiPassAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"soaPartners"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"soaPartners"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}}]}}]}}]}}]}},..._i.definitions]};var pi=i(11721);const vi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"publicPlaylist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"followers"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}}]},ki={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"publicPlaylistsResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"publicPlaylist"}}]}}]}}]}}]},gi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"publicPlaylistsV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"publicPlaylistsResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}}]}}]}},...ki.definitions,...vi.definitions]},Ei={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryUserPagination"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"publicPlaylistsV2Limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"publicPlaylistsV2Offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publicPlaylistsV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"publicPlaylistsV2Limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"publicPlaylistsV2Offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"publicPlaylistsResponse"}}]}}]}}]}}]}}]}},...ki.definitions,...vi.definitions]};var Si=i(95682);const yi=e=>{let{title:t,text:i,url:n}=e;return Boolean(!(0,Si.O)()&&"share"in window.navigator&&window.navigator.share)?window.navigator.share({title:t,text:i,url:n}):Promise.resolve()};var fi=i(9923),Ni=i(35215),Ti=i(78986);var Ri=i(76317);const Ai={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"artist"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playlistsV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playlistV2"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"biography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}}]}},{kind:"Field",name:{kind:"Name",value:"externalLinks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}},{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"headerImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"stats"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"monthlyListeners"}},{kind:"Field",name:{kind:"Name",value:"followers"}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"contextTrack"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"latest"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"album"}}]}},{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"popularReleasesGroup"}}]}},{kind:"Field",name:{kind:"Name",value:"singles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumGroup"}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumGroup"}}]}},{kind:"Field",name:{kind:"Name",value:"compilations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumGroup"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"relatedContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relatedArtists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"relatedArtist"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"appearsOn"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumGroup"}}]}},{kind:"Field",name:{kind:"Name",value:"featuringV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playlistV2"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"goods"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userLocation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"concerts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"4"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"category"}},{kind:"Field",name:{kind:"Name",value:"festival"}},{kind:"Field",name:{kind:"Name",value:"nearUser"}},{kind:"Field",name:{kind:"Name",value:"venue"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"location"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"coordinates"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latitude"}},{kind:"Field",name:{kind:"Name",value:"longitude"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artistsV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"partnerLinks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"partnerName"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"month"}},{kind:"Field",name:{kind:"Name",value:"day"}},{kind:"Field",name:{kind:"Name",value:"hour"}},{kind:"Field",name:{kind:"Name",value:"minute"}},{kind:"Field",name:{kind:"Name",value:"second"}},{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"playlistV2"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}},...Ri.rD.definitions,...Ri.rA.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"contextTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ContextTrack"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"track"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playcount"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"year"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"popularReleasesGroup"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"album"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumGroup"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumGroupPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumRelease"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumRelease"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumGroup"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releases"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"relatedArtist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]};var bi=i(48363);var Ci=i(47930);var Ii=i(33909);var Li=i(8580),Pi=i(7649),Di=i(15698),Oi=i(86272),Fi=i(90977);const wi="8.4.61";var xi=i(54517);const Mi={[Ne.URITypeMap.TRACK]:"@webapi/v1/me/tracks/contains",[Ne.URITypeMap.PLAYLIST]:"@webapi/v1/playlists",[Ne.URITypeMap.PLAYLIST_V2]:"@webapi/v1/playlists",[Ne.URITypeMap.ALBUM]:"@webapi/v1/me/albums/contains",[Ne.URITypeMap.ARTIST]:"@webapi/v1/me/following/contains/?type=artist",[Ne.URITypeMap.SHOW]:"@webapi/v1/me/shows/contains",[Ne.URITypeMap.PROFILE]:"@webapi/v1/me/following/contains/?type=user"},{ARTIST:Ui,PLAYLIST:ji,PLAYLIST_V2:Bi,PROFILE:Gi}=Ne.URITypeMap,Vi=(e,t)=>{var i,n,a,s;const r=null===(i=(0,Ne.EC)(t))||void 0===i?void 0:i.type;if(!t||!r||!(e=>Boolean(Mi[e]))(r))return;const o=e.getState(),l=(0,Ne.EC)(t),d=(0,Ne.Kv)(null!=l?l:"")?null==l?void 0:l.username:null==l?void 0:l.id,c=null==o||null===(n=o.session)||void 0===n||null===(a=n.me)||void 0===a||null===(s=a.profile)||void 0===s?void 0:s.id;let u=Mi[r];if(c){switch(r){case Ui:case Gi:u=`${u}&ids=${d}`;break;case ji:case Bi:u=`${u}/${d}/followers/contains?ids=${c}`;break;default:u=`${u}?ids=${d}`}(0,pi.k)().request(u,{responseType:"json"}).then((i=>{let{body:n}=i;return e.dispatch((0,fi.Ub)(t,n[0]))})).catch((t=>e.dispatch((0,fi.TF)(t))))}},Yi=async(e,t,i)=>{try{const n=await(async(e,t)=>{var i,n,a,s;const r=await e(hi,{uri:t});if("Audiobook"!==(null==r||null===(i=r.data)||void 0===i?void 0:i.podcastUnionV2.__typename)&&"Podcast"!==(null==r||null===(n=r.data)||void 0===n?void 0:n.podcastUnionV2.__typename))return{};const o=null==r||null===(a=r.data)||void 0===a||null===(s=a.podcastUnionV2.accessInfo)||void 0===s?void 0:s.accessExplanation;switch(null==o?void 0:o.__typename){case"UpsellAccessExplanation":return{upsellLink:{title:(null==o?void 0:o.title)||"",body:(null==o?void 0:o.body)||"",cta:(null==o?void 0:o.actionText)||"",url:(null==o?void 0:o.url)||""}};case"BasicAccessExplanation":return{basic:{title:(null==o?void 0:o.title)||"",body:(null==o?void 0:o.body)||"",cta:(null==o?void 0:o.actionText)||""}};case"MultiPassAccessExplanation":{var l;const e=[];return null==o||null===(l=o.soaPartners)||void 0===l||l.forEach((t=>{t&&e.push({displayName:t.displayName||"",linkUrl:t.linkUrl||"",logoUrl:t.logoUrl||""})})),{multiPass:{title:(null==o?void 0:o.title)||"",body:(null==o?void 0:o.body)||"",soaPartners:e}}}default:return{}}})(i,t);e.dispatch((0,fi.fE)(t,n))}catch(n){e.dispatch((0,fi.VB)(n instanceof Error?n:new Error("Unknown error object")))}},Ki=async(e,t,i)=>{const n=(0,Ne.EC)(t);null!=n&&n.type&&((null==n?void 0:n.type)===Ne.URITypeMap.ARTIST?(async e=>{let{graphQLLoader:t,store:i,uri:n}=e;try{const e=await t(Ai,{uri:n}),a=null==e?void 0:e.data;if(!a)throw new Error("Upstream returned an empty value");if(!(0,bi.O)(a.artistUnion))throw new Error(`Upstream returned error ${a.artistUnion.message}`);i.dispatch((0,fi.St)(n,a.artistUnion))}catch(a){i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(a))}})({graphQLLoader:i,store:e,uri:t}):(null==n?void 0:n.type)===Ne.URITypeMap.TRACK?(async e=>{let{graphQLLoader:t,store:i,uri:n}=e;try{const e=await t(Ii.fO,{uri:n}),s=null==e?void 0:e.data;if(!s||!s.trackUnion)throw new Error("Upstream returned an empty value");var a;"NotFound"===s.trackUnion.__typename&&null!==(a=s.trackUnion)&&void 0!==a&&a.message?(i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(new Error(s.trackUnion.message)))):"Track"===s.trackUnion.__typename&&i.dispatch((0,fi.Jv)(n,s.trackUnion))}catch(s){i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(s))}})({graphQLLoader:i,store:e,uri:t}):(null==n?void 0:n.type)===Ne.URITypeMap.ALBUM?(async e=>{let{graphQLLoader:t,store:i,uri:n}=e;try{const e=await t(Ni.a6,{uri:n,offset:0}),s=null==e?void 0:e.data;if(s&&s.albumUnion)if((0,Ti.oz)(null==s?void 0:s.albumUnion)){var a;const e=(0,Ti.Bi)(s.albumUnion);i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(new Error(null!==(a=e.message)&&void 0!==a?a:void 0)))}else{if(!(0,Ti.vN)(null==s?void 0:s.albumUnion))throw new Error("Upstream returned an empty value");i.dispatch((0,fi.lT)(n,s.albumUnion))}}catch(s){i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(s))}})({graphQLLoader:i,store:e,uri:t}):(null==n?void 0:n.type)===Ne.URITypeMap.PLAYLIST_V2?(async e=>{let{graphQLLoader:t,store:i,uri:n}=e;try{const e=await t(Ci.pr,{uri:n,limit:30,offset:0}),s=null==e?void 0:e.data;if(!s||!s.playlistV2)throw new Error("Upstream returned an empty value");var a;"NotFound"===s.playlistV2.__typename&&null!==(a=s.playlistV2)&&void 0!==a&&a.message?(i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(new Error(s.playlistV2.message)))):"Playlist"===s.playlistV2.__typename&&i.dispatch((0,fi.Kh)(n,s.playlistV2))}catch(s){i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(s))}})({graphQLLoader:i,store:e,uri:t}):(null==n?void 0:n.type)===Ne.URITypeMap.PROFILE&&(async e=>{let{graphQLLoader:t,store:i,uri:n}=e;try{const e=await t(gi,{uri:n}),a=null==e?void 0:e.data;if(!a||!a.user)throw new Error("Upstream returned an empty value");"NotFound"===a.user.__typename&&a.user.message?(i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),i.dispatch((0,fi.P7)(new Error(a.user.message)))):"User"===a.user.__typename&&i.dispatch((0,fi.St)(n,a.user))}catch(a){i.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY)),a instanceof Error&&i.dispatch((0,fi.P7)(a))}})({graphQLLoader:i,store:e,uri:t}))},Hi=(e,t,i,n,a)=>{if(!("share"in navigator)){const i=e.get("feedback.link-copied");return async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;if("clipboard"in navigator)try{if("string"==typeof e)return await navigator.clipboard.writeText(e);if(navigator.clipboard.write)return await navigator.clipboard.write([new ClipboardItem({"text/plain":e.then((e=>new Blob([e],{type:"text/plain"})))})]);const t=await e;return await navigator.clipboard.writeText(t)}catch(a){}if(null===t)throw new Error("Node is null, copy cannot be performed.");let i="";i="string"==typeof e?e:await e;const n=document.createElement("textarea");n.value=i,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",t.appendChild(n),n.select(),document.execCommand("copy"),t.removeChild(n),Promise.resolve()}(a),void t.dispatch((0,xi.C)(i,$.pC.default,!0))}yi({title:i,text:n,url:a}).then((()=>(0,fi.Tv)())).catch((e=>(0,fi.aL)(e)))},Wi=async(e,t)=>{var i,n,a,s;const r=e.getState(),o=null==r||null===(i=r.session)||void 0===i?void 0:i.locale,l=function(e,t,i){return m.b.setLocale(e),m.b.setMarket(t),{getAlbum:e=>(0,Oi.eK)(m.b.getInstance(),e).then((e=>e.body)),getTrack:e=>(0,Li.OE)(m.b.getInstance(),e).then((e=>e.body)),getArtistAlbums:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Pi.zH)(m.b.getInstance(),e,t).then((e=>e.body))},getTrackRecommendations:async i=>{const n={application:"nft",platform:"android",locale:e,market:t,version:wi,"on-demand-trial":"true",additional_types:"episode"};return(await(0,Li.A7)(m.b.getInstance(),i,n)).body.body.find((e=>/track-entity-view-appears-on/.test(e.id)))||null},getSEOTrackLyrics:async e=>(await(0,Fi.getSEOTrackLyrics)(m.b.getInstance(),e)).body,getAlbumRecommendations:async i=>{const n={application:"nft",platform:"android",locale:e,product:"premium",market:t,version:wi,"on-demand-trial":"true",additional_types:"episode"};return(await(0,Oi.lD)(m.b.getInstance(),i,n)).body.body.find((e=>/album-entity-view-recommendations/.test(e.id)))||null},getView:(e,t)=>(0,Di.k)(m.b.getInstance(),e,t).then((e=>e.body)),getUser:async e=>{if(null==i||!i.graphQLLoader)throw new Error("GraphQL Loader is required");return await i.graphQLLoader(gi,{uri:e})}}}(o,(null==r||null===(n=r.session)||void 0===n?void 0:n.isAnonymous)?null==r||null===(a=r.session)||void 0===a||null===(s=a.country)||void 0===s?void 0:s.toUpperCase():"from_token"),d={signal:`trackURI:${t}`,types:"track",locale:o,limit:"6"};try{const i=await l.getView("mwp-track-track-cloud",d);e.dispatch((0,fi.MD)(t,i))}catch(c){e.dispatch((0,fi.RU)(c))}},qi=(e,t)=>i=>n=>a=>{const s=n(a);switch(a.type){case W.Gw:Ki(i,a.uri,e);break;case W.OK:Yi(i,a.uri,e);break;case W.bE:Vi(i,a.uri);break;case W.cl:Hi(t,i,a.title,a.text,a.url);break;case W.O7:Wi(i,a.uri);break;case W.ZA:(async(e,t,i,n)=>{var a;const s=await n(Ei,{uri:t,publicPlaylistsV2Limit:i.limit,publicPlaylistsV2Offset:i.offset});if(null!=s&&null!==(a=s.errors)&&void 0!==a&&a.length)e.dispatch((0,fi.Vd)(new Error("Upstream returned an error")));else if(null!=s&&s.data&&"User"===s.data.user.__typename){const i=s.data.user;e.dispatch((0,fi.qp)(t,i))}else e.dispatch((0,fi.Vd)(new Error("Upstream returned an empty value")))})(i,a.uri,a.options,e)}return s},Qi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageURLAndSize"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageSource"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]},$i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageSources"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageURLAndSize"}}]}}]}}]},zi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchArtist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"verified"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]},Zi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchArtistResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtist"}}]}}]}}]},Xi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchAlbum"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtist"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]},Ji={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchAlbumResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchAlbum"}}]}}]}}]},en={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchPodcast"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]},tn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",alias:{kind:"Name",value:"episodeTypes"},name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchPodcast"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]},nn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchEpisodeResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchEpisode"}}]}}]}}]},an={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchPlaylist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"ownerV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]},sn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchPlaylistResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylist"}}]}}]}}]},rn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchPodcastResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchPodcast"}}]}}]}}]},on={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchGenre"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Genre"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"image"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]},ln={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchGenreResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenreResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchGenre"}}]}}]}}]},dn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtist"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchAlbum"}}]}}]}}]},cn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchAudiobook"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"narrators"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]},un={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchAudiobookResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchAudiobook"}}]}}]}}]},mn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchUser"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"verified"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]},_n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchUserResponse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchUser"}}]}}]}}]},hn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"topResults"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TopResultV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchAlbum"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtist"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchAudiobook"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchEpisode"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenreResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchGenre"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylist"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchPodcast"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchTrack"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchUser"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UnknownTypeWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_uri"}}]}}]}}]},pn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchTopResultHit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TopResultHit"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"matchedFields"}},{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"topResults"}}]}}]}}]},vn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"searchTrackHit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackHit"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchTrack"}}]}}]}}]}}]},kn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findTopResults"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"chipOrder"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"typeName"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtistResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchAlbumResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchEpisodeResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"podcasts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPodcastResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchTrackHit"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playlists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylistResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchGenreResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"users"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchUserResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"featured"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylistResponse"}}]}},{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchTopResultHit"}}]}}]}}]}}]}},...Zi.definitions,...zi.definitions,...$i.definitions,...Qi.definitions,...Ji.definitions,...Xi.definitions,...nn.definitions,...tn.definitions,...en.definitions,...rn.definitions,...vn.definitions,...dn.definitions,...sn.definitions,...an.definitions,...ln.definitions,...on.definitions,..._n.definitions,...mn.definitions,...pn.definitions,...hn.definitions,...cn.definitions]},gn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findTopResultsWithAudiobooks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"chipOrder"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"typeName"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtistResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchAlbumResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchEpisodeResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"podcasts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPodcastResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchTrackHit"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"playlists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylistResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchGenreResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audiobooks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchAudiobookResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"users"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchUserResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"featured"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylistResponse"}}]}},{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchTopResultHit"}}]}}]}}]}}]}},...Zi.definitions,...zi.definitions,...$i.definitions,...Qi.definitions,...Ji.definitions,...Xi.definitions,...nn.definitions,...tn.definitions,...en.definitions,...rn.definitions,...vn.definitions,...dn.definitions,...sn.definitions,...an.definitions,...ln.definitions,...on.definitions,...un.definitions,...cn.definitions,..._n.definitions,...mn.definitions,...pn.definitions,...hn.definitions]},En={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findArtists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchArtistResponse"}}]}}]}}]}}]}},...Zi.definitions,...zi.definitions,...$i.definitions,...Qi.definitions]},Sn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findAlbums"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchAlbumResponse"}}]}}]}}]}}]}},...Ji.definitions,...Xi.definitions,...zi.definitions,...$i.definitions,...Qi.definitions]},yn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findPodcasts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"podcasts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPodcastResponse"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchEpisodeResponse"}}]}}]}}]}}]}},...rn.definitions,...en.definitions,...$i.definitions,...Qi.definitions,...nn.definitions,...tn.definitions]},fn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findTracks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"searchTrack"}}]}}]}}]}}]}}]}}]}},...dn.definitions,...zi.definitions,...$i.definitions,...Qi.definitions,...Xi.definitions]},Nn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findPlaylists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"playlists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchPlaylistResponse"}}]}}]}}]}}]}},...sn.definitions,...an.definitions,...$i.definitions,...Qi.definitions]},Tn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findGenres"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchGenreResponse"}}]}}]}}]}}]}},...ln.definitions,...on.definitions,...$i.definitions,...Qi.definitions]},Rn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findAudiobooks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"audiobooks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchAudiobookResponse"}}]}}]}}]}}]}},...un.definitions,...cn.definitions,...$i.definitions,...Qi.definitions]},An={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"findUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"users"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchUserResponse"}}]}}]}}]}}]}},..._n.definitions,...mn.definitions,...$i.definitions,...Qi.definitions]},bn=e=>Boolean(e&&"Playlist"===e.__typename),Cn=e=>Boolean(e&&"Track"===e.__typename),In=e=>Boolean(e&&"Album"===e.__typename),Ln=e=>Boolean(e&&"Podcast"===e.__typename),Pn=e=>Boolean(e&&"Audiobook"===e.__typename),Dn=e=>Boolean(e&&"Episode"===e.__typename),On=e=>Boolean(e&&"Genre"===e.__typename),Fn=e=>Boolean(e&&"Artist"===e.__typename),wn=e=>Boolean(e&&"User"===e.__typename),xn=e=>["AlbumResponseWrapper","ArtistResponseWrapper","AudiobookResponseWrapper","EpisodeResponseWrapper","PlaylistResponseWrapper","PodcastResponseWrapper","TrackResponseWrapper","UserResponseWrapper","GenreResponseWrapper"].includes(e.__typename);var Mn=i(24511),Un=i(87044),jn=i(73386);const Bn=e=>e.items.reduce(((e,t)=>{var i;return`${e.length?`${e} | `:""}${null==t||null===(i=t.profile)||void 0===i?void 0:i.name}`}),""),Gn=e=>(null==e?void 0:e.map((e=>null==e?void 0:e.name)).join(" | "))||"";function Vn(e){var t;return{id:e.id,image:null===(t=e.visuals.avatarImage)||void 0===t?void 0:t.sources[0].url,uri:e.uri,name:e.profile.name,verified:e.profile.verified||!1,type:Un.a.artists}}function Yn(e){var t,i,n,a,s;return{id:e.id,image:null===(t=e.albumOfTrack)||void 0===t||null===(i=t.coverArt)||void 0===i?void 0:i.sources[0].url,uri:e.uri,name:e.name,type:Un.a.songs,artistName:Bn(e.artists),artistURI:null===(n=e.artists)||void 0===n?void 0:n.items[0].uri,albumURI:null===(a=e.albumOfTrack)||void 0===a?void 0:a.uri,albumName:null===(s=e.albumOfTrack)||void 0===s?void 0:s.name}}function Kn(e){var t,i,n;return{id:e.id,image:null===(t=e.images)||void 0===t||null===(i=t.items[0])||void 0===i||null===(n=i.sources[0])||void 0===n?void 0:n.url,uri:e.uri,name:e.name,type:Un.a.playlists}}function Hn(e){var t,i;return{id:e.id,image:null===(t=e.coverArt)||void 0===t?void 0:t.sources[0].url,uri:e.uri,name:e.name,type:Un.a.albums,artistURI:null===(i=e.artists)||void 0===i?void 0:i.items[0].uri,artistName:Bn(e.artists)}}function Wn(e){var t,i;return{id:e.id,image:null===(t=e.coverArt)||void 0===t?void 0:t.sources[0].url,uri:e.uri,name:e.name,mediaTypes:null!==(i=e.episodeTypes)&&void 0!==i?i:[],type:Un.a.episodes}}function qn(e){var t;return{id:e.id,image:(0,Te.R)(null===(t=e.coverArt)||void 0===t?void 0:t.sources,150),uri:e.uri,name:e.name,mediaType:e.mediaType,type:Un.a.podcasts}}function Qn(e){var t;const i=Gn(e.authors);return{id:e.id,image:null===(t=e.coverArt)||void 0===t?void 0:t.sources[0].url,uri:e.uri,name:e.name,type:Un.a.audiobook,artistName:i}}function $n(e){var t;return{id:"",image:null===(t=e.image)||void 0===t?void 0:t.sources[0].url,uri:e.uri,name:e.name,type:Un.a.genre}}function zn(e){var t;return{id:e.id,image:null===(t=e.avatar)||void 0===t?void 0:t.sources[0].url,uri:e.uri,name:e.name,verified:e.verified||!1,type:Un.a.users}}const Zn=e=>{var t,i,n,a,s,r,o,l,d,c,u,m;const _={[Mn.xN.TopResults]:null==e||null===(t=e.topResults)||void 0===t?void 0:t.itemsV2.length,[Mn.xN.Artists]:null==e||null===(i=e.artists)||void 0===i?void 0:i.items.length,[Mn.xN.Albums]:null==e||null===(n=e.albums)||void 0===n?void 0:n.items.length,[Mn.xN.Episodes]:null==e||null===(a=e.episodes)||void 0===a?void 0:a.items.length,[Mn.xN.Podcasts]:null==e||null===(s=e.podcasts)||void 0===s?void 0:s.items.length,[Mn.xN.Audiobooks]:null==e||null===(r=e.audiobooks)||void 0===r?void 0:r.items.length,[Mn.xN.Tracks]:null==e||null===(o=e.tracksV2)||void 0===o?void 0:o.items.length,[Mn.xN.Playlists]:null==e||null===(l=e.playlists)||void 0===l?void 0:l.items.length,[Mn.xN.Genres]:null==e||null===(d=e.genres)||void 0===d?void 0:d.items.length,[Mn.xN.Users]:null==e||null===(c=e.users)||void 0===c?void 0:c.items.length};return null!==(u=null==e||null===(m=e.chipOrder)||void 0===m?void 0:m.items.reduce(((e,t)=>null!=t&&t.typeName?(e.push(t.typeName),e):e),[]).filter((e=>{var t;return(null!==(t=_[e])&&void 0!==t?t:0)>0})))&&void 0!==u?u:[]},Xn=async(e,t,i,n)=>{var a,s,r;let{type:o,query:l,offset:d,limit:u}=t;const{session:{features:{isAudiobooksOnMWPEnabled:m}}}=e.getState();let _,h,p,{items:v=[],additionalItems:k=[]}=null!==(a=e.getState().search.results)&&void 0!==a?a:{},g=null!==(s=null===(r=e.getState().search.results)||void 0===r?void 0:r.chipOrder)&&void 0!==s?s:[];switch(o){case Un.a.artists:{var E,S,y,f,N,T,R,A,b;_=await i(En,{query:l,limit:u,offset:d}),p=n.get("mwp.search.results.in_artists",l);const e=(null!==(E=null===(S=_)||void 0===S||null===(y=S.data)||void 0===y||null===(f=y.searchV2)||void 0===f||null===(N=f.artists)||void 0===N?void 0:N.items)&&void 0!==E?E:[]).map((e=>e.data)).filter(Fn).map(Vn).filter((e=>e));v=d?[...v,...e]:e,h=null===(T=_)||void 0===T||null===(R=T.data)||void 0===R||null===(A=R.searchV2)||void 0===A||null===(b=A.artists)||void 0===b?void 0:b.totalCount;break}case Un.a.songs:{var C,I,L,P,D,O,F,w,x;_=await i(fn,{query:l,limit:u,offset:d}),p=n.get("mwp.search.results.in_songs",l);const e=(null!==(C=null===(I=_)||void 0===I||null===(L=I.data)||void 0===L||null===(P=L.searchV2)||void 0===P||null===(D=P.tracksV2)||void 0===D?void 0:D.items)&&void 0!==C?C:[]).map((e=>e.item.data)).filter(Cn).map(Yn).filter((e=>Boolean(e.id)));v=d?[...v,...e]:e,h=null===(O=_)||void 0===O||null===(F=O.data)||void 0===F||null===(w=F.searchV2)||void 0===w||null===(x=w.tracksV2)||void 0===x?void 0:x.totalCount;break}case Un.a.playlists:{var M,U,j,B,G,V,Y,K,H;_=await i(Nn,{query:l,limit:u,offset:d}),p=n.get("mwp.search.results.in_playlists",l);const e=(null!==(M=null===(U=_)||void 0===U||null===(j=U.data)||void 0===j||null===(B=j.searchV2)||void 0===B||null===(G=B.playlists)||void 0===G?void 0:G.items)&&void 0!==M?M:[]).map((e=>e.data)).filter(bn).map(Kn).filter((e=>Boolean(e.id)));v=d?[...v,...e]:e,h=null===(V=_)||void 0===V||null===(Y=V.data)||void 0===Y||null===(K=Y.searchV2)||void 0===K||null===(H=K.playlists)||void 0===H?void 0:H.totalCount;break}case Un.a.albums:{var W,q,Q,$,z,Z,X,J,ee;_=await i(Sn,{query:l,limit:u,offset:d}),p=n.get("mwp.search.results.in_albums",l);const e=(null!==(W=null===(q=_)||void 0===q||null===(Q=q.data)||void 0===Q||null===($=Q.searchV2)||void 0===$||null===(z=$.albums)||void 0===z?void 0:z.items)&&void 0!==W?W:[]).map((e=>e.data)).filter(In).map(Hn).filter((e=>Boolean(e.id)));v=d?[...v,...e]:e,h=null===(Z=_)||void 0===Z||null===(X=Z.data)||void 0===X||null===(J=X.searchV2)||void 0===J||null===(ee=J.albums)||void 0===ee?void 0:ee.totalCount;break}case Un.a.podcasts:{var te,ie,ne,ae,se,re,oe,le,de,ce,ue,me,_e,he;_=await i(yn,{query:l,limit:u,offset:d}),p=n.get("mwp.search.results.in_podcasts",l);const e=(null!==(te=null===(ie=_)||void 0===ie||null===(ne=ie.data)||void 0===ne||null===(ae=ne.searchV2)||void 0===ae||null===(se=ae.episodes)||void 0===se?void 0:se.items)&&void 0!==te?te:[]).map((e=>e.data)).filter(Dn).map(Wn),t=(null!==(re=null===(oe=_)||void 0===oe||null===(le=oe.data)||void 0===le||null===(de=le.searchV2)||void 0===de||null===(ce=de.podcasts)||void 0===ce?void 0:ce.items)&&void 0!==re?re:[]).map((e=>e.data)).filter(Ln).map(qn).filter((e=>Boolean(e.id)&&!e.mediaType.includes(Mn.Cl.Video)));v=d?[...v,...e]:e,k=d?k:t,h=null===(ue=_)||void 0===ue||null===(me=ue.data)||void 0===me||null===(_e=me.searchV2)||void 0===_e||null===(he=_e.podcasts)||void 0===he?void 0:he.totalCount;break}case Un.a.audiobook:{var pe,ve,ke,ge,Ee,Se,ye,fe,Ne;_=await i(Rn,{query:l,limit:u,offset:d}),p=n.get("mwp.search.results.in_audiobooks",l);const e=(null!==(pe=null===(ve=_)||void 0===ve||null===(ke=ve.data)||void 0===ke||null===(ge=ke.searchV2)||void 0===ge||null===(Ee=ge.audiobooks)||void 0===Ee?void 0:Ee.items)&&void 0!==pe?pe:[]).map((e=>e.data)).filter(Pn).map(Qn).filter((e=>Boolean(e.id)));v=d?[...v,...e]:e,h=null===(Se=_)||void 0===Se||null===(ye=Se.data)||void 0===ye||null===(fe=ye.searchV2)||void 0===fe||null===(Ne=fe.audiobooks)||void 0===Ne?void 0:Ne.totalCount;break}case Un.a.genre:{var Te,Re,Ae,be,Ce,Ie,Le,Pe,De;_=await i(Tn,{query:l,limit:u,offset:d}),p=`"${l}" in ${n.get("genres_and_moods")}`;const e=(null!==(Te=null===(Re=_)||void 0===Re||null===(Ae=Re.data)||void 0===Ae||null===(be=Ae.searchV2)||void 0===be||null===(Ce=be.genres)||void 0===Ce?void 0:Ce.items)&&void 0!==Te?Te:[]).map((e=>e.data)).filter(On).map($n).filter((e=>Boolean(e.uri)));v=d?[...v,...e]:e,h=null===(Ie=_)||void 0===Ie||null===(Le=Ie.data)||void 0===Le||null===(Pe=Le.searchV2)||void 0===Pe||null===(De=Pe.genres)||void 0===De?void 0:De.totalCount;break}case Un.a.users:{var Oe,Fe,we,xe,Me,Ue,je,Be,Ge;_=await i(An,{query:l,limit:u,offset:d});const e=(null!==(Oe=null===(Fe=_)||void 0===Fe||null===(we=Fe.data)||void 0===we||null===(xe=we.searchV2)||void 0===xe||null===(Me=xe.users)||void 0===Me?void 0:Me.items)&&void 0!==Oe?Oe:[]).map((e=>e.data)).filter(wn).map(zn).filter((e=>Boolean(e.id)));v=d?[...v,...e]:e,h=null===(Ue=_)||void 0===Ue||null===(je=Ue.data)||void 0===je||null===(Be=je.searchV2)||void 0===Be||null===(Ge=Be.users)||void 0===Ge?void 0:Ge.totalCount;break}default:{var Ve,Ye,Ke,He,We,qe,Qe,$e,ze;const e=m?gn:kn;if(_=await i(e,{query:l,numberOfTopResults:u}),null===(Ve=_)||void 0===Ve||!Ve.data)break;const t=(null!==(Ye=null===(Ke=_)||void 0===Ke||null===(He=Ke.data.searchV2)||void 0===He||null===(We=He.topResults)||void 0===We?void 0:We.itemsV2)&&void 0!==Ye?Ye:[]).map((e=>{let{item:t}=e;return t})).filter(xn);v=t.map((e=>{const{data:t}=e;if(Fn(t))return Vn(t);if(Cn(t))return Yn(t);if(bn(t))return Kn(t);if(In(t))return Hn(t);if(Dn(t))return Wn(t);if(Ln(t)){const e=qn(t);if(e.mediaType===Mn.Cl.Video)return;return e}return Pn(t)?Qn(t):On(t)?$n(t):wn(t)?zn(t):void 0})).filter(jn.Eg),k=(null!==(qe=null===(Qe=_)||void 0===Qe||null===($e=Qe.data.searchV2)||void 0===$e||null===(ze=$e.topResults)||void 0===ze?void 0:ze.featured)&&void 0!==qe?qe:[]).map((e=>e.data)).filter(bn).map(Kn).filter((e=>Boolean(e.id))),g=Zn(_.data.searchV2)}}if(o!==Un.a.basic&&!g.length){const e=m?gn:kn,t=await i(e,{query:l,numberOfTopResults:u});null!=t&&t.data&&(g=Zn(t.data.searchV2))}_&&(e.dispatch((0,nt.Ld)({query:l,items:v,chipOrder:g,additionalItems:k,type:o,title:p,totalCount:h})),(0,c.sQ)({metric_type:jt.MetricTypes.COUNTER,what:"search-results",value:1}))},Jn=(e,t)=>i=>n=>a=>{const s=n(a);return a.type===nt.rl&&Xn(i,a.data,e,t),s};var ea=i(43665);const ta=e=>{var t,i,n;return null===(t=e.getState().session)||void 0===t||null===(i=t.me)||void 0===i||null===(n=i.profile)||void 0===n?void 0:n.id},ia="recentSearchesV2",na=()=>{const e=indexedDB.open("userDataV2",1);return e.onupgradeneeded=e=>{var t;const i=null===(t=e.target)||void 0===t?void 0:t.result;i.objectStoreNames.contains(ia)||i.createObjectStore(ia,{autoIncrement:!0})},e},aa=()=>{const e=(0,ea.Z)("config");return String(null==e?void 0:e.correlationId)||"anon"},sa=e=>{let{mode:t,onsuccess:i}=e;na().onsuccess=e=>{e.target.result.transaction(ia,t).objectStore(ia).openCursor(null,"prev").onsuccess=i}},ra=e=>t=>i=>{switch(i.type){case nt.hz:(e=>{const t=ta(e)||aa(),i=[];sa({mode:"readonly",onsuccess:n=>{var a;const s=null===(a=n.target)||void 0===a?void 0:a.result;if(s&&i.length<10){const e=i.find((e=>e.uri===s.value.uri));s.value.userId!==t||e||i.push(s.value),s.continue()}else e.dispatch((0,nt.fy)(i))}})})(e);break;case nt.iG:(e=>{sa({mode:"readwrite",onsuccess:t=>{var i;const n=null===(i=t.target)||void 0===i?void 0:i.result;n?(n.delete(),n.continue()):e.dispatch((0,nt.vr)())}})})(e);break;case nt.QI:((e,t)=>{const i=ta(e)||aa();sa({mode:"readwrite",onsuccess:n=>{var a;const s=null===(a=n.target)||void 0===a?void 0:a.result;s&&(s.value.userId===i&&s.value.uri===t?s.delete().onsuccess=()=>e.dispatch((0,nt.vr)()):s.continue())}})})(e,i.uri);break;case nt.Gu:((e,t)=>{const i={...t,userId:ta(e)||aa()};na().onsuccess=t=>{var n,a;null==t||null===(n=t.target)||void 0===n||null===(a=n.result)||void 0===a||a.transaction(ia,"readwrite").objectStore(ia).add(i),e.dispatch((0,nt.q5)(i))}})(e,i.data)}return t(i)};i(40542);var oa=i(11539),la=i(88437);const da=()=>(0,P.vQ)("sp_key"),ca=e=>{const t=(0,pi.k)(),i=(()=>{const e=da();return setInterval((()=>{e!==da()&&window.location.reload()}),5e3)})();t.on(p.TransportEvent.LOGGED_OUT,(()=>{clearInterval(i),e()}))},ua=(e,t)=>i=>n=>a=>{var s,r,o;const l=n(a),d=i.getState(),c=null===(s=d.session)||void 0===s?void 0:s.isAnonymous,u=null===(r=d.session)||void 0===r?void 0:r.locale,m=null===(o=d.session)||void 0===o?void 0:o.country;if(c&&a.type===Ft.VX&&m&&u)return i.dispatch((0,la.Ls)((0,oa.wr)(m,u))),l;switch(a.type){case Ft.VX:ca((()=>i.dispatch({type:M.y})));break;case M.y:(i=>{e.request("/logout").finally((()=>{i.dispatch((0,la.ls)())})),t.finalFlush()})(i)}return l};var ma=i(42198);const _a=e=>t=>i=>n=>{var a;const s=t.getState();switch(n.type){case Ft.xo:t.dispatch((0,xi.C)(e.get("mwp.no.connection"),$.NN.ERROR));break;case Y.hw:case Y.EE:if(null!=n&&null!==(a=n.err)&&void 0!==a&&a.unrecoverable){var r,o;const i=Boolean(null==s||null===(r=s.session)||void 0===r||null===(o=r.features)||void 0===o?void 0:o.isMWPErrorCodeEnabled)?`(${n.err.code})`:"";t.dispatch((0,xi.C)(`${e.get("error.generic")} ${e.get("mwp.playback.error.refresh")} ${i}`,$.NN.ERROR))}break;case Y.Dk:var l,d;(0,ma.e)(s)(null!==(l=null===(d=s.playback.current)||void 0===d?void 0:d.context.uri)&&void 0!==l?l:"")||((e=>{var t,i,n;return Boolean(null==e||null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i||null===(n=i.disallows)||void 0===n?void 0:n.skipping_next)})(s)?t.dispatch((0,xi.C)(e.get("mwp.skips.none"),$.pC.default,!0)):(e=>{var t;return!(null!=e&&null!==(t=e.playback)&&void 0!==t&&t.hasSkippedThisSession)})(s)&&t.dispatch((0,xi.C)(e.get("mwp.skips.first.skip"),$.pC.default,!0)));break;case Ft._X:t.dispatch((0,xi.j)());break;case Ft.wf:t.dispatch((0,xi.C)(e.get("mwp.no.connection"),$.NN.ERROR));break;case W.zm:{const{isLiked:i,uri:a}=n,s=(0,Ne.wj)(a);i?s?t.dispatch((0,xi.C)(e.get("feedback.added-to-your-liked-songs"),$.pC.default,!0,{type:$._d.likedSong,text:e.get("action-trigger.button.view")})):t.dispatch((0,xi.C)(e.get("feedback.saved-to-your-library"),$.pC.default,!0)):s?t.dispatch((0,xi.C)(e.get("feedback.removed-from-your-liked-songs"),$.pC.default,!0,{type:$._d.unlikedSong,text:e.get("action-trigger.button.undo"),payload:a})):t.dispatch((0,xi.C)(e.get("feedback.removed-from-your-library"),$.pC.default,!0));break}case W.$G:t.dispatch((0,xi.C)(n.message,$.pC.error,!0))}return i(n)};var ha=i(67247),pa=i(40074);const va=e=>t=>i=>{if(i.type===ot.bF)(0,ha.Z)(i.uri).then((t=>{e.dispatch((0,pa.PA)(t,i.uri))})).catch((()=>{e.dispatch((0,pa.VR)())}));return t(i)},ka={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"internalLinkRecommenderTrackMobile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strategy"}},type:{kind:"NamedType",name:{kind:"Name",value:"SEORankingStrategy"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"seoRecommended"},arguments:[{kind:"Argument",name:{kind:"Name",value:"seoRecommendedInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"strategy"},value:{kind:"Variable",name:{kind:"Name",value:"strategy"}}},{kind:"ObjectField",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]}}]}}]}}]};var ga=i(89700),Ea=i(42214);const Sa=e=>t=>i=>n=>{const a=i(n);if(n.type===ga.NG)(async function(e,t,i){return await e(ka,{uri:t,strategy:i})})(e,n.uri,n.strategy).then((e=>{var i;const a=null==e||null===(i=e.data)||void 0===i?void 0:i.seoRecommended;if(a){for(const e of a.items)if("GenericError"===e.data.__typename||"NotFound"===e.data.__typename){t.dispatch((0,Ea.Jd)());break}t.dispatch((0,Ea.VX)(n.uri,(e=>e.items.map((e=>e.data)).filter((e=>"Track"===e.__typename)))(a)))}else t.dispatch((0,Ea.Jd)())})).catch((()=>{t.dispatch((0,Ea.Jd)())}));return a};var ya=i(98909);const fa={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryRichTrackArtists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"richTrackArtistsEntityFields"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"richTrackArtistsEntityFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"firstArtist"},name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relatedContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relatedArtists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"otherArtists"},name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}},{kind:"Field",name:{kind:"Name",value:"year"}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackNumber"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]};const Na=e=>t=>i=>n=>{const a=i(n);if(n.type===ct.xU)(async function(e,t){return await e(fa,{uri:t})})(e,n.uri).then((e=>{const i=null==e?void 0:e.data;if(i&&("NotFound"===(null==(n=null==i?void 0:i.trackUnion)?void 0:n.__typename)||"GenericError"===(null==n?void 0:n.__typename)))throw new Error("Failed to fetch rich track artists!");var n;i&&(e=>"Track"===(null==e?void 0:e.__typename))(null==i?void 0:i.trackUnion)?t.dispatch((0,ya.QX)(i.trackUnion)):t.dispatch((0,ya.Kd)())})).catch((()=>{t.dispatch((0,ya.Kd)())}));return a};var Ta=i(40908);const Ra=e=>t=>async i=>{if(i.type===x.nk){const{location:{pathname:t,key:n}}=i;"/"===t?e.dispatch((0,Ta.m)(x.hI.HOME)):"/search"===t?e.dispatch((0,Ta.m)(x.hI.SEARCH)):"default"===n&&e.dispatch((0,Ta.m)(x.hI.DEEPLINK))}return t(i)};var Aa=i(77867);let ba;const Ca=e=>t=>{t.preventDefault(),(e=>{ba=e})(t),e.dispatch((0,Aa.uJ)({installReady:!0,source:"load"}))},Ia=e=>{window.matchMedia("(display-mode: standalone)").matches?e.dispatch((0,Aa.U7)()):window.addEventListener("appinstalled",(e=>()=>{e.dispatch((0,Aa.U7)())})(e)),window.addEventListener("beforeinstallprompt",Ca(e)),document.addEventListener("visibilitychange",(e=>()=>{!document.hidden&&ba&&e.dispatch((0,Aa.uJ)({installReady:!0,source:"wake"}))})(e))},La=e=>{(0,P.pC)({name:"mwpA2HS_status",value:e,days:5e3,domain:".spotify.com"},window.document)},Pa=e=>t=>i=>{if(e.getState().session.isAnonymous)return t(i);switch(i.type){case Ft.VX:Ia(e);break;case Aa.A$:((e,t)=>{const i=(0,P.vQ)("mwpA2HS_status");t&&(void 0===i?La("ready"):"ready"===i&&(La("complete"),setTimeout((()=>{e.dispatch((0,wt.vC)(X.SY.A2HS))}),2e3)))})(e,i.installReady);break;case Aa.bo:ba&&ba.prompt()}return t(i)};var Da=i(38223),Oa=i(6197),Fa=(i(60178),i(59346),i(45060),i(60252),i(37193),i(12041),i(31266),i(36507),i(55553),i(6127),i(98813));async function wa(e){return function(e){const t=Fa.k.encode(e);return window.crypto.subtle.digest("SHA-1",t)}(e).then((e=>function(e){const t=new Uint8Array(e);return Array.from(t).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e).substring(0,20)))}const xa={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"showOrAudiobook"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcastUnionV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobook"}},{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadataMwp"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"show"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"audiobook"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"htmlDescription"}},{kind:"Field",name:{kind:"Name",value:"htmlDescriptionPlain"}},{kind:"Field",name:{kind:"Name",value:"publishDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"day"}},{kind:"Field",name:{kind:"Name",value:"month"}},{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"copyright"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"narrators"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",alias:{kind:"Name",value:"pages"},name:{kind:"Name",value:"chaptersV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ContextChapterPage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"chapterOnAudiobook"}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorLight"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"red"}},{kind:"Field",name:{kind:"Name",value:"green"}},{kind:"Field",name:{kind:"Name",value:"blue"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"trailerV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"chapterOnAudiobook"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"showTypes"}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"language"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"chapterOnAudiobook"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"restrictions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paywallContent"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}},{kind:"Field",name:{kind:"Name",value:"fileId"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPositionMilliseconds"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",name:{kind:"Name",value:"restrictions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paywallContent"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}}]}},...Ri.rD.definitions,...Ri.rA.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"audiobookMetadataMwp"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUserMemberOfAtLeastOneGroup"}},{kind:"Field",name:{kind:"Name",value:"unlockedBy"}},{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UpsellAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BasicAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MultiPassAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"soaPartners"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"soaPartners"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canRate"}},{kind:"Field",name:{kind:"Name",value:"averageRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"average"}},{kind:"Field",name:{kind:"Name",value:"showAverage"}},{kind:"Field",name:{kind:"Name",value:"totalRatings"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rating"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"showUri"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"price"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"finalPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"}},{kind:"Field",name:{kind:"Name",value:"formattedPrice"}}]}},{kind:"Field",name:{kind:"Name",value:"finalListPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"}},{kind:"Field",name:{kind:"Name",value:"formattedPrice"}}]}}]}}]}},..._i.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"show"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"musicAndTalk"}},{kind:"Field",name:{kind:"Name",value:"saved"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"htmlDescription"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}},{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorLight"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"red"}},{kind:"Field",name:{kind:"Name",value:"green"}},{kind:"Field",name:{kind:"Name",value:"blue"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",alias:{kind:"Name",value:"pages"},name:{kind:"Name",value:"episodesV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ContextEpisodePage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"episodeOnShow"}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"trailerV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RestrictedContent"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"episodeOnShow"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"showTypes"}},{kind:"Field",name:{kind:"Name",value:"availableMarkets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentType"}},{kind:"Field",name:{kind:"Name",value:"language"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"}}]}},{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUserMemberOfAtLeastOneGroup"}},{kind:"Field",name:{kind:"Name",value:"unlockedBy"}}]}},{kind:"Field",name:{kind:"Name",value:"topics"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canRate"}},{kind:"Field",name:{kind:"Name",value:"averageRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"average"}},{kind:"Field",name:{kind:"Name",value:"showAverage"}},{kind:"Field",name:{kind:"Name",value:"totalRatings"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rating"}},{kind:"Field",name:{kind:"Name",value:"userId"}},{kind:"Field",name:{kind:"Name",value:"showUri"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"episodeOnShow"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}},{kind:"Field",name:{kind:"Name",value:"fileId"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPositionMilliseconds"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",name:{kind:"Name",value:"restrictions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paywallContent"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}}]}}]};var Ma=i(8065),Ua=i(32879);const ja={"show-view":"track-list/card","episode-view":"/button"},Ba=(e,t)=>i=>{t.dispatch((0,fi.P7)(i)),e&&t.dispatch((0,wt.vC)(X.SY.ERROR_BOUNDARY))};async function Ga(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:10},n=arguments.length>3?arguments[3]:void 0;try{var a;const r=await n(xa,{uri:t,...i});if(null!=r&&r.errors&&(s=r.errors,!Boolean(s.every((e=>{var t;return"_entities,0,accessInfo"===(null==e||null===(t=e.path)||void 0===t?void 0:t.join(","))})))))throw new Error(r.errors[0].message);const o=null==r||null===(a=r.data)||void 0===a?void 0:a.podcastUnionV2;if("Audiobook"!==(null==o?void 0:o.__typename)&&"Podcast"!==(null==o?void 0:o.__typename))return;e.dispatch((0,Ua.Yo)(t,o)),e.dispatch((0,fi.Ub)(t,o.saved))}catch(r){const t=e.getState();Ba(t.session.isAnonymous,e)(r instanceof Error?r:new Error("Unknown error object"))}var s}let Va;const Ya=e=>t=>i=>n=>{const a=i(n);if(!e)return a;switch(n.type){case re.eR:Ga(t,n.uri,n.pagination,e);break;case re.G8:!async function(e,t,i){try{var n;const a=await i(Da.H9,{uri:t}),s=null==a||null===(n=a.data)||void 0===n?void 0:n.episodeUnionV2;if(null!=a&&a.errors)throw new Error(a.errors[0].message);if(!s)throw new Error(`Missing episode data for "${t}"`);if("Episode"!==(null==s?void 0:s.__typename)&&"Chapter"!==(null==s?void 0:s.__typename))throw new Error("Unknown data");e.dispatch((0,Ua.RZ)(t,s))}catch(a){const t=e.getState();Ba(t.session.isAnonymous,e)(a instanceof Error?a:new Error("Unknown error object"))}}(t,n.uri,e);break;case re.wu:{var s,r;const{context:e,audioFileEntity:i,audioFileParentEntity:a,playbackOffset:o,isAudiobookSample:l}=n,{dispatch:d}=t,c=t.getState(),{playback:u,session:{isAnonymous:m,features:{isMWPAndPlaybackCapable:_=!1}}}=c,h=null==u||null===(s=u.current)||void 0===s?void 0:s.track_window;(null==h||null===(r=h.current_track)||void 0===r?void 0:r.uri)===(null==i?void 0:i.uri)&&void 0===o?function(e,t){const i=ja[t];e((0,Wt.Xh)(i))}(d,e):async function(e,t,i,n,a,s){let r=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7?arguments[7]:void 0;try{var l;const d=await wa(n.uri);let c;s&&r&&(c=(0,Oa.kq)(n,t));const u=void 0!==a?Bt.wl.LABEL.PODCAST_TIMESTAMP_DESCRIPTION:ja[i],m=null===(l=e.getState().session)||void 0===l?void 0:l.referrer;e.dispatch((0,Wt.K$)(o?n.uri:t.uri,null,{trackUID:d,shuffle:!1,initialOffset:a,playOrigin:{referrerIdentifier:m}},null,c,u)),s&&(Va=qt.O.subscribe("position",(()=>{e.dispatch((0,Ma.p)(location.pathname,"",{type:"status",intent:"podcast-playback-started",itemIdSuffix:ja[i]})),qt.O.unsubscribe(Va)})))}catch(d){Ba(s,e)}}(t,a,e,i,o,m,Boolean(_),l);break}}return a};var Ka=i(8582);const Ha=async(e,t,i)=>{try{const{session:n}=t.getState(),a=new URLSearchParams((e=>{const t=new Date,i=(0,Qe.CQ)(e)||"",n=d.ag.getLocale(),a=e.country||i,{enableShows:s}=e.features,r=["album","artist","playlist","merch","artist_concerts"];return s&&r.push("show","episode"),{timestamp:new Date(t.getTime()-60*t.getTimezoneOffset()*1e3).toISOString(),platform:"web",content_limit:"6",limit:"20",types:r.join(","),country:a,market:i,locale:n}})(n)).toString(),{body:s}=await e.request(`@webapi/v1/views/${i}?${a}`,{responseType:"json"});t.dispatch((0,We.b8)(s))}catch(n){t.dispatch((0,We.z8)(n))}},Wa=e=>t=>i=>n=>{const a=i(n);switch(n.type){case We.Nx:Ha(e,t,n.genreId);break;case We.Gz:{var s,r,o,l,d;const e=null===(s=t.getState())||void 0===s||null===(r=s.genre)||void 0===r||null===(o=r.items)||void 0===o||null===(l=o[1])||void 0===l||null===(d=l.children)||void 0===d?void 0:d[0],i=e&&e.images.main.uri;i&&(t.dispatch((0,We.XK)(i)),t.dispatch((0,Ka.Fd)({url:i})));break}}return a};var qa=i(9686);const Qa="mwp-ondemand-playlists",$a=async e=>{try{const i=(await(0,pi.k)().request("@webgate/ondemand-selector/v2/select-ondemand-set?format=json")).body;null!==(t=i)&&"object"==typeof t&&Array.isArray(t.uris)?e.dispatch((0,_e.ll)(i.uris)):e.dispatch((0,_e.ll)([]))}catch(i){e.dispatch((0,_e.mv)(i instanceof Error?i:new Error("Unknown error object")))}var t},za=()=>e=>t=>i=>{const n=t(i);switch(i.type){case _e.aC:{var a;const t=e.getState(),{session:i}=t;(0,Qe.a)(i)||null!=t&&null!==(a=t.onDemandPlaylists)&&void 0!==a&&a.fetched||$a(e);break}case _e.bu:e.dispatch((0,qa.Jb)({type:Qa,...i.error},{test:Qa}))}return n},Za=za;var Xa=i(37029);const Ja=e=>t=>async i=>{const n=t(i);switch(i.type){case Xa.Yk.SHOW_CONTEXT_MENU:{const{uri:t}=i.data;((e,t)=>{var i;if((null===(i=(0,Ne.EC)(t))||void 0===i?void 0:i.type)===Ne.URITypeMap.TRACK)return!0;const n=e.getState(),{saved:a}=n.entities;return t in a})(e,t)||e.dispatch((0,fi.sY)(t));break}}return n},es=()=>"undefined"==typeof window||void 0===window.gtag||void 0===window.google_tag_manager,ts=()=>e=>t=>{switch(t.type){case Bt.Cp:if(!t.skipGoogleAnalytics){const{action_type:e,action_intent:i,item_id:n}=t.logData;((e,t,i)=>{es()||window.gtag("event",t,{event_category:e,event_label:i})})(e,i,n)}break;case Bt.DC:i=t.data.to,es()||window.gtag("pageview",{pathname:i})}var i;return e(t)};var is=i(28594),ns=i(95514),as=i(30694),ss=i(20979);const rs=e=>t=>i=>{const{session:n}=t.getState(),{isAnonymous:a}=n,s=_.getParser(window.navigator.userAgent),r={browser_name:`${s.getBrowserName()} ${s.getBrowserVersion()}`,browser_os:`${s.getOSName()} ${s.getOSVersion()}`,browser_platform:s.getPlatformType()},o=(0,Gt.Q)(location.pathname),l={page:o.mappedPageId,view_uri:o.viewUri,referrer:document.referrer,type:"enter",page_id_for_metrics:(0,Gt.J)(location.pathname),...r};return e.send(a?(0,is.t)(l):(0,ns.v)(l)),t=>{switch(t.type){case Bt.Cp:{const i=a?(0,as.w)({...t.logData,...r}):(0,ss.p)({...t.logData,...r});e.send(i);break}case Bt.DC:e.send(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{viewUri:i,mappedPageId:n}=(0,Gt.Q)(e),a=_.getParser(window.navigator.userAgent),s={browser_name:`${a.getBrowserName()} ${a.getBrowserVersion()}`,browser_os:`${a.getOSName()} ${a.getOSVersion()}`,browser_platform:a.getPlatformType()},r={page:n,type:"exit",view_uri:i,page_id_for_metrics:(0,Gt.J)(e),...s};return t?(0,is.t)(r):(0,ns.v)(r)}(t.data.from,a)),e.send(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{viewUri:n,mappedPageId:a}=(0,Gt.Q)(e),s=_.getParser(window.navigator.userAgent),r={browser_name:`${s.getBrowserName()} ${s.getBrowserVersion()}`,browser_os:`${s.getOSName()} ${s.getOSVersion()}`,browser_platform:s.getPlatformType()},o={page:a,type:"enter",referrer:t,view_uri:n,page_id_for_metrics:(0,Gt.J)(e),...r};return i?(0,is.t)(o):(0,ns.v)(o)}(t.data.to,t.data.referrer,a))}return i(t)}};var os=i(64697);const ls=["#login",ge.H,os.X],ds=e=>t=>i=>{const n=e.getState(),a={location:{pathname:"/",hash:null}};switch(i.type){case x.nk:{var s,r;const{location:{pathname:t,hash:o}}=i,{location:{pathname:l,hash:d=""}}=n.session.history||a,c=!(l===t&&(ls.includes(d)||ls.includes(o)))&&!t.includes("/search/results"),u=null===(s=i.location)||void 0===s||null===(r=s.search)||void 0===r?void 0:r.includes("referral=labelaffiliate"),m=n.session.history?l:"NO_PREVIOUS_PAGE";u?e.dispatch((0,qa.Nc)({from:m,to:t,referrer:"labelaffiliate"})):c&&e.dispatch((0,qa.Nc)({from:m,to:t,referrer:document.referrer}));break}}return t(i)};var cs=i(19689),us=i(28140),ms=i(16336),_s=i(42779),hs=i(35831),ps=i(32985),vs=i(22587);const ks=e=>{e((0,wt.vC)(X.SY.SIGNUP)),e((0,Ma.p)(location.pathname,"",{type:"view",intent:"open-upsell",itemIdSuffix:"signup-modal"}))},gs=(e,t,i)=>{i?ks(t):window.open((0,ms.iZ)().toString(),"_blank","noopener")},Es=e=>t=>i=>n=>{var a;const s=t.getState(),{session:{features:r}}=s,o=!(null==r||!r.isMWPAndPlaybackCapable)||!1,l=s.session.referrer;switch(n.type){case us.z:{var d;const{playback:{current:e}}=s;if(null!=e&&null!==(d=e.track_window)&&void 0!==d&&d.current_track&&(null==e||!e.paused)){const i=qt.O.getPosition(),{uri:n}=e.track_window.current_track,a=(0,Wt.K$)(n,null,{shuffle:!1,initialOffset:i,playOrigin:{referrerIdentifier:l}});t.dispatch((0,cs.h2)(a,cs.ao.PLAYING))}break}case W.VY:return t.dispatch((0,cs.h2)(n,cs.ao.USER_INVESTMENT)),void gs(n.uri,t.dispatch,o);case vs.Cy:"episode"===n.entityType?ps.y.set((()=>({triggerId:_s.n,triggerAction:n}))):"track"===n.entityType&&ps.y.set((()=>({triggerId:hs.f,triggerAction:n})));break;case Y.kS:if(null===(a=n.audioFileMetadata)||void 0===a||!a.anonymousPlaybackAllowed||null==r||!r.isMWPAndPlaybackCapable)return t.dispatch((0,cs.h2)(n,cs.ao.PLAY)),void gs(n.uri,t.dispatch,o);break;case Y.$D:ks(t.dispatch);break;case Ft.VX:(0,vs.cs)(e,"[data-main-scrollable-node]",(0,vs.Yu)(t),(0,vs.zx)(t))}i(n)},Ss=e=>!(e.type===cs.ao.PLAY||e.type===cs.ao.PLAYING),ys=e=>!(e.type===cs.ao.PLAY||e.type===cs.ao.USER_INVESTMENT),fs=e=>t=>i=>n=>{const a=i(n);switch(n.type){case cs.Mn:{const{storeAction:t,actionIntent:i}=n;e.storeAction((e=>((e,t)=>{const{type:i}=t;switch(i){case cs.ao.PLAY:return[t];case cs.ao.PLAYING:return[...e.filter(Ss),t];case cs.ao.USER_INVESTMENT:return[...e.filter(ys),t];default:return[t]}})(e,{storeAction:t,type:i})));break}case cs.Cc:{const i=e.pullAction()||null;t.dispatch({type:"PLAY_AT_FIRST_TAP_HAD_DEFERRED_ACTIONS",had:!!i&&i.length>0}),i&&i.forEach((e=>{let{storeAction:i}=e;t.dispatch(i)}));break}}return a},Ns=(e,t)=>{let i=[];return{storeAction:n=>{i=n(i),e.setItem(t,JSON.stringify(i))},pullAction:()=>{const n=e.getItem(t);if(e.removeItem(t),i=[],n)try{return JSON.parse(n)}catch(a){return null}return null}}},Ts=e=>t=>i=>{switch(i.type){case Y.kS:{var n;const t=i,a=void 0!==(null===(n=t.options)||void 0===n?void 0:n.index)?Bt.wl.LABEL.TRACK_ROW:Bt.wl.LABEL.BUTTON,s=t.label?t.label:a;e.dispatch((0,Ma.p)(location.pathname,s,{type:Bt.wl.CATEGORY.CLICK,intent:Bt.wl.ACTIONS.PLAY})),(0,c.sQ)({metric_type:jt.MetricTypes.COUNTER,what:"playback-click",value:1})}break;case Y.Nv:{var a;const t=e.getState(),n=i,{paused:s}=(null===(a=t.playback)||void 0===a?void 0:a.current)||{},r=n.label?n.label:Bt.wl.LABEL.BUTTON;e.dispatch((0,Ma.p)(location.pathname,r,{type:Bt.wl.CATEGORY.CLICK,intent:s?Bt.wl.ACTIONS.PLAY:Bt.wl.ACTIONS.PAUSE})),(0,c.sQ)({metric_type:jt.MetricTypes.COUNTER,what:"playback-click",value:1});break}}return t(i)};var Rs=i(50047),As=i(26721);let bs=!1;const Cs=e=>t=>i=>n=>{var a,s,r;const o=t.getState(),l=(0,Rs.J9)(),d=null!==l,c=(null===(a=o.playback)||void 0===a||null===(s=a.current)||void 0===s?void 0:s.paused)&&!1===(null===(r=n.state)||void 0===r?void 0:r.paused),u=d&&!1===(null==l?void 0:l.seen)&&c;if(n.type===Y.mC)!bs&&u&&(bs=!0,(0,Rs.EP)(!0),t.dispatch((0,wt.D8)()),e.send((0,Rs.Ht)({country:o.session.country,os:(0,As.y)()})));i(n)},Is={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"browseImage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]},Ls={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"browse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"browse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pagePagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"sectionPagination"},value:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"header"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"backgroundImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"color"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"content"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseAlbumResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseArtistResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseEpisodeResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseChapterResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browsePlaylistResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browsePodcastResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseAudiobookResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseTrackResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseUserResponseWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseSectionContainerWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseXlinkResponseWrapper"}}]}}]}}]}}]}}]}}]}}]}}]}},...Is.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"browseAlbumResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseArtistResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseEpisodeResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeOrChapterResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPositionMilliseconds"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}}]}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseChapterResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeOrChapterResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPositionMilliseconds"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}}]}},{kind:"Field",name:{kind:"Name",value:"audiobookV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browsePlaylistResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"followers"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browsePodcastResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastOrAudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseAudiobookResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastOrAudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseTrackResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseUserResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseSectionContainerWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainerWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cardRepresentation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationUri"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}},{kind:"Field",name:{kind:"Name",value:"artwork"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"browseXlinkResponseWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseXlinkResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSpacesHub"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}},{kind:"Field",name:{kind:"Name",value:"spaceId"}},{kind:"Field",name:{kind:"Name",value:"artwork"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseClientFeature"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}},{kind:"Field",name:{kind:"Name",value:"featureUri"}},{kind:"Field",name:{kind:"Name",value:"artwork"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}}]}}]},Ps={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"browseStart"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"browseStart"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"kind"},value:{kind:"EnumValue",value:"MAIN_BROWSE"}},{kind:"ObjectField",name:{kind:"Name",value:"pagePagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"sectionPagination"},value:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"content"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainerWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cardRepresentation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationUri"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}},{kind:"Field",name:{kind:"Name",value:"artwork"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseXlinkResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSpacesHub"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}},{kind:"Field",name:{kind:"Name",value:"spaceId"}},{kind:"Field",name:{kind:"Name",value:"artwork"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseClientFeature"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}},{kind:"Field",name:{kind:"Name",value:"featureUri"}},{kind:"Field",name:{kind:"Name",value:"artwork"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImage"}}]}},{kind:"Field",name:{kind:"Name",value:"backgroundColor"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},...Is.definitions]},Ds=e=>t=>i=>n=>(n.type===fe.kx?e(Ps,{pagePagination:{limit:75,offset:0},sectionPagination:{limit:75,offset:0}}).then((e=>{var i;const n=null==e||null===(i=e.data)||void 0===i?void 0:i.browseStart;"BrowseSectionContainer"===(null==n?void 0:n.__typename)?t.dispatch((0,fe.C7)(n)):t.dispatch((0,fe.xX)())})).catch((()=>{t.dispatch((0,fe.xX)())})):n.type===Ue.bA&&e(Ls,{uri:n.uri,pagePagination:{limit:75,offset:0},sectionPagination:{limit:75,offset:0}}).then((e=>{var i;const a=null==e||null===(i=e.data)||void 0===i?void 0:i.browse;"BrowseSectionContainer"===(null==a?void 0:a.__typename)?t.dispatch((0,Ue.Uc)(n.uri,a)):t.dispatch((0,Ue.AZ)(n.uri))})).catch((()=>{t.dispatch((0,Ue.AZ)(n.uri))})),i(n));var Os=i(32953);const Fs=["#8d67ab","#e61e32","#1e3264","#8d67ab","#148a08","#4100f5","#ba5d07","#e8115b","#b49bc8","#f037a5","#27856a","#a56752","#ba5d07"],ws=e=>(e=>!e.includes("-page")&&(0,Ne.QS)(e)===e)(e)?`${e}-page`:e,xs=e=>(0,pi.k)().request(e,{authorize:!0,responseType:"json"}),Ms=e=>{if(null!==e&&"object"==typeof e){const{type:t,href:i,name:n}=e;return"link"===t&&"string"==typeof i&&"string"==typeof n}return!1},Us=e=>{var t;const i=null==e||null===(t=e.content)||void 0===t?void 0:t.items;return!!Array.isArray(i)&&i.some(Ms)},js=(e,t)=>{return{title:e.name,color:Fs[t%Fs.length],href:(i=e.href,`/genre/${ws((e=>{const t=e.split("/");return t[t.length-1]})(i))}`)};var i};async function Bs(e){var t,i,n,a;if(!e)return[];const s=await xs(e);return[...null!==(t=null===(i=s.body)||void 0===i?void 0:i.content.items)&&void 0!==t?t:[],...await Bs(null!==(n=null===(a=s.body)||void 0===a?void 0:a.content.next)&&void 0!==n?n:null)]}const Gs=async e=>{let{locale:t,country:i}=e;const n=new URLSearchParams({content_limit:"25",country:i,limit:"50",locale:t,platform:"web",timestamp:(new Date).toISOString()}).toString(),a=`${Os.H}/views/${encodeURIComponent("browse-page-cx-test")}?${n}`;return(await async function(e){const t=await xs(e),i=[];for(const s of null!==(n=null==t||null===(a=t.body)||void 0===a?void 0:a.content.items)&&void 0!==n?n:[]){var n,a;if(!Us(s))continue;const e=s.name,{items:t,next:r}=s.content,o=await Bs(r);i.push([e,[...t,...o]])}return i}(a)).map((e=>{let[t,i]=e;return{title:t,items:i.map(js)}}))},Vs=e=>t=>i=>{const{locale:n,country:a,features:s}=e.getState().session;return"BROWSE_GRID_DATA_REQUEST_LEGACY"===i.type&&Gs({locale:n,country:a}).then((t=>e.dispatch((0,Et.Tv)(t,Boolean(s.enableShows))))).catch((()=>{e.dispatch((0,Et.kA)())})),t(i)},Ys={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryHome"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"home"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"endUserIntegration"},value:{kind:"EnumValue",value:"INTEGRATION_MOBILE_WEB_PLAYER"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeResponsePayload"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sectionContainer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeShortsSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"greeting"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeGenericSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeRecentlyPlayedSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeFeatureActivationSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeFeedBaselineSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeNativeAdsSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HomeOnboardingSectionData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"baseText"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaylistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeOrChapterResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastOrAudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},...Ri.rD.definitions,...Ri.rA.definitions]},Ks=e=>t=>i=>n=>(n.type===Nt.Op&&e(Ys,{}).then((e=>{var i;const n=null==e||null===(i=e.data)||void 0===i?void 0:i.home;"HomeResponsePayload"===(null==n?void 0:n.__typename)?t.dispatch((0,Nt.GR)(n)):t.dispatch((0,Nt.jW)())})).catch((()=>{t.dispatch((0,Nt.jW)())})),i(n));var Hs=i(17514);function Ws(e,t,i){var n;const a=(0,Qe.p5)(null==e?void 0:e.session),s=[ua(t.transport,t.eventSender),Ut,Yt,ds,ts,rs(t.eventSender),fs(Ns(window.sessionStorage,"ANONYMOUS_DEFERRED_ACTION_KEY")),Ts,...a?[Es(t.player)]:[],a?mi(t.player):(0,Kt.ZP)({enablePlayback:i.enablePlayback,i18n:t.i18n}),Ya(t.graphQLLoader),Wa(t.transport),qi(t.graphQLLoader,t.i18n),Jn(t.graphQLLoader,t.i18n),ra,_a(t.i18n),Za(),Ja,Ra,Pa,(0,Ka.lp)(t.graphQLLoader),Cs(t.eventSender),va,Na(t.graphQLLoader),Sa(t.graphQLLoader),Vs,Ds(t.graphQLLoader),Ks(t.graphQLLoader)];return(0,Hs.xC)({reducer:Dt(null==e||null===(n=e.session)||void 0===n?void 0:n.features),preloadedState:e,middleware:e=>e({immutableCheck:!1,serializableCheck:false}).concat(s)})}var qs=i(69494);const Qs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zs=/[&<>"']/g;RegExp(zs.source);const Zs=Object.values(Qs),Xs=RegExp(`${Zs.join("|")}`,"g"),Js=RegExp(`${Zs.join("|")}`);function er(e){return e&&"string"==typeof e&&Js.test(e)?e.replace(Xs,(e=>e in $s?$s[e]:e)):e}const tr=["name","display_name"],ir=(e,t)=>Object.entries(e).reduce(((e,i)=>{let[n,a]=i;const s=(e=>e&&!Array.isArray(e)&&"object"==typeof e)(a)?ir(a,t):((e,i)=>tr.includes(e)&&"string"==typeof i?t(i):i)(n,a);return{...e,[n]:s}}),{});function nr(e){const t=h().getParser(window.navigator.userAgent),i=function(e){switch(e){case"macOS":return"osx";case"Chrome OS":return"chrome";default:return e}}(t.getOSName()||"not_applicable"),n=function(e,t){if("Windows"===e)switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return""}return t}(i,t.getOSVersion());return`web_player ${i} ${n};${t.getBrowserName()} ${t.getBrowserVersion()};${e}`.toLowerCase()}function ar(){const e=h().getParser(window.navigator.userAgent);return e.satisfies({chrome:">=37",firefox:">=47",safari:">=13.1",edge:">=79"})||e.getUA().includes("Spotify")}let sr=null;function rr(e,t){const i="Safari"===h().parse(window.navigator.userAgent).browser.name;return sr=(0,V.createHarmony)({transport:e,client:{descriptor:{id:null,randomizeId:!0,name:`Web Player (${h().getParser(window.navigator.userAgent).getBrowserName()})`,brand:"spotify",model:"web_player",platform_identifier:t.platformIdentifier,capabilities:{video_playback:ar()}}},streamer:{disallowRobustnessValues:[V.Robustness.EMPTY],cubicVolume:!0,videoPlayerContainer:t.videoPlayerContainer,disableMux:i,createPlayer:t.createPlayer},controller:{decorateTrackWindow:!0},claimInactivePlayerStates:!0,onlyLocalState:!1}),sr}var or=i(55590);function lr(e,t){let{shuffle:i}=t;return(void 0!==i||!(0,Ne.RS)(e.uri))&&i}function dr(e,t){let{repeat:i}=t;if(void 0===i&&(0,Ne.RS)(e.uri))return V.RepeatMode.OFF;switch(i){case ri.REPEAT_NONE:return V.RepeatMode.OFF;case ri.REPEAT_CONTEXT:return V.RepeatMode.CONTEXT;case ri.REPEAT_TRACK:return V.RepeatMode.TRACK;default:return}}function cr(e){let{featureIdentifier:t,featureVersion:i,referrerIdentifier:n,viewURI:a,externalReferrer:s}=e;return{featureIdentifier:t,featureVersion:i,referrerIdentifier:n,viewURI:a,externalReferrer:s}}function ur(e,t,i){var n,a,s,r,o,l;return{contextURI:e.uri,trackUID:null===(n=i.skipTo)||void 0===n?void 0:n.uid,trackURI:null===(a=i.skipTo)||void 0===a?void 0:a.uri,index:null===(s=i.skipTo)||void 0===s?void 0:s.index,pageIndex:null===(r=i.skipTo)||void 0===r?void 0:r.pageIndex,initialOffset:i.seekTo,shuffle:lr(e,i),repeatMode:dr(e,i),filter:null===(o=e.metadata)||void 0===o?void 0:o[ii.FILTERING_PREDICATE],sort:null===(l=e.metadata)||void 0===l?void 0:l[ii.SORTING_CRITERIA],playOrigin:cr(t),paused:i.paused,loggingParams:i.loggingParams}}const mr=new RegExp(String.raw`^q[0-9]+$`);function _r(e,t,i){var n;const a=!!e.uid&&mr.test(e.uid),s=null!=i?i:a?"queue":null;return(0,Ne.wj)(e.uri)||(0,Ne.dB)(e.uri)?function(e,t,i){var n,a,s,r,o,l,d,c,u,m,_,h,p;return{type:ti.p.TRACK,uri:null!==(n=t.linked_from)&&void 0!==n&&n.uri?t.linked_from.uri:t.uri,uid:null!==(a=t.uid)&&void 0!==a?a:null,name:null!==(s=t.name)&&void 0!==s?s:"",mediaType:null!==(r=t.track_type)&&void 0!==r?r:"audio",duration:{milliseconds:null!==(o=t.duration_ms)&&void 0!==o?o:0},album:{type:ti.p.ALBUM,uri:null!==(l=null===(d=t.album)||void 0===d?void 0:d.uri)&&void 0!==l?l:"",name:null!==(c=null===(u=t.album)||void 0===u?void 0:u.name)&&void 0!==c?c:"",images:null!==(m=null===(_=t.album)||void 0===_?void 0:_.images)&&void 0!==m?m:[]},artists:null!==(h=null===(p=t.artists)||void 0===p?void 0:p.map((e=>{let{uri:t,name:i}=e;return{type:ti.p.ARTIST,uri:t,name:i||""}})))&&void 0!==h?h:[],isLocal:(0,Ne.dB)(t.uri),provider:e,metadata:i,get images(){return this.album.images}}}(s,e,t):(0,Ne.hn)(e.uri)?"true"===(null==t?void 0:t.is_audiobook_chapter)?function(e,t,i){var n,a,s,r,o,l,d,c,u,m;return{type:ti.p.CHAPTER,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,name:null!==(a=t.name)&&void 0!==a?a:"",mediaType:null!==(s=t.track_type)&&void 0!==s?s:"audio",duration:{milliseconds:null!==(r=t.duration_ms)&&void 0!==r?r:0},book:{type:ti.p.AUDIOBOOK,uri:null!==(o=null===(l=t.album)||void 0===l?void 0:l.uri)&&void 0!==o?o:"",name:null!==(d=null===(c=t.album)||void 0===c?void 0:c.name)&&void 0!==d?d:"",images:null!==(u=null===(m=t.album)||void 0===m?void 0:m.images)&&void 0!==u?u:[]},provider:e,metadata:i,get images(){return this.book.images}}}(s,e,t):function(e,t,i){var n,a,s,r,o,l,d,c,u,m;return{type:ti.p.EPISODE,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,name:null!==(a=t.name)&&void 0!==a?a:"",mediaType:null!==(s=t.track_type)&&void 0!==s?s:"audio",duration:{milliseconds:null!==(r=t.duration_ms)&&void 0!==r?r:0},show:{type:ti.p.SHOW,uri:null!==(o=null===(l=t.album)||void 0===l?void 0:l.uri)&&void 0!==o?o:"",name:null!==(d=null===(c=t.album)||void 0===c?void 0:c.name)&&void 0!==d?d:"",images:null!==(u=null===(m=t.album)||void 0===m?void 0:m.images)&&void 0!==u?u:[]},provider:e,metadata:i,get images(){return this.show.images}}}(s,e,t):(0,Ne.mg)(e.uri)?function(e,t,i){var n,a,s,r,o,l,d,c,u,m;return{type:ti.p.AD,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,title:null!==(a=t.name)&&void 0!==a?a:null,advertiser:null!==(s=null===(r=t.artists)||void 0===r?void 0:r[0].name)&&void 0!==s?s:null,url:null!==(o=null===(l=t.artists)||void 0===l?void 0:l[0].uri)&&void 0!==o?o:null,id:null,mediaType:null!==(d=t.track_type)&&void 0!==d?d:"audio",duration:{milliseconds:null!==(c=t.duration_ms)&&void 0!==c?c:0},images:null!==(u=null===(m=t.album)||void 0===m?void 0:m.images)&&void 0!==u?u:[],isPodcastAd:!1,isSkippableAd:!1,isTestAd:!1,provider:e,metadata:i}}(s,e,t):{...si,uri:e.uri,uid:null!==(n=e.uid)&&void 0!==n?n:null,provider:s}}function hr(e){return null===e?null:_r(e)}function pr(e){switch(e){default:case V.RepeatMode.OFF:return ri.REPEAT_NONE;case V.RepeatMode.CONTEXT:return ri.REPEAT_CONTEXT;case V.RepeatMode.TRACK:return ri.REPEAT_TRACK}}function vr(e){switch(e){case V.PlaybackQuality.DEFAULT:case V.PlaybackQuality.UNKNOWN:case void 0:return{bitrateLevel:li.UNKNOWN};case V.PlaybackQuality.LOW:return{bitrateLevel:li.LOW};case V.PlaybackQuality.NORMAL:return{bitrateLevel:li.NORMAL};case V.PlaybackQuality.HIGH:return{bitrateLevel:li.HIGH};case V.PlaybackQuality.VERY_HIGH:return{bitrateLevel:li.VERY_HIGH};case V.PlaybackQuality.HIFI:return{bitrateLevel:li.HIFI};default:return(0,or.U)(e)}}function kr(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>oi.includes(e)?e:"unknown"))}function gr(e){let{disallow_pausing_reasons:t=[],disallow_resuming_reasons:i=[],disallow_seeking_reasons:n=[],disallow_skipping_prev_reasons:a=[],disallow_skipping_next_reasons:s=[],disallow_toggling_repeat_context_reasons:r=[],disallow_toggling_repeat_track_reasons:o=[],disallow_toggling_shuffle_reasons:l=[],disallow_transferring_playback_reasons:d=[]}=e;return{canPause:0===t.length,canResume:0===i.length,canSeek:0===n.length,canSkipPrevious:0===a.length,canSkipNext:0===s.length,canToggleRepeatContext:0===r.length,canToggleRepeatTrack:0===o.length,canToggleShuffle:0===l.length,disallowPausingReasons:kr(t),disallowResumingReasons:kr(i),disallowSeekingReasons:kr(n),disallowSkippingPreviousReasons:kr(a),disallowSkippingNextReasons:kr(s),disallowTogglingRepeatContextReasons:kr(r),disallowTogglingRepeatTrackReasons:kr(o),disallowTogglingShuffleReasons:kr(l),disallowTransferringPlaybackReasons:kr(d)}}class Er extends Qt.Bc{constructor(e){super(),this._harmony=e,this._harmony.addListener(V.HarmonyEvent.STATE_CHANGED,(e=>{let{data:{state:t}}=e;this.emit(Qt.rg.UPDATE,function(e){var t;if(null===e)return null;const i=null!==e.context.uri,n=null!==e.track_window.current_track;return{sessionId:"",timestamp:e.timestamp,context:{uri:null!==(t=e.context.uri)&&void 0!==t?t:"",metadata:e.context.metadata},index:{pageURI:null,pageIndex:null,itemIndex:null},item:hr(e.track_window.current_track),shuffle:e.shuffle,repeat:pr(e.repeat_mode),speed:e.paused?0:1,playbackQuality:vr(e.playback_quality),playbackId:null,positionAsOfTimestamp:e.position,duration:e.duration,restrictions:gr(e.restrictions),hasContext:i&&n,isPaused:e.paused,isBuffering:!1,previousItems:e.track_window.previous_tracks.map((e=>_r(e))),nextItems:e.track_window.next_tracks.map((e=>_r(e)))}}(t))}))}}function Sr(e,t,i,n,a,s){const r=t.find((e=>n(i.after||i.before,e)));if(!r)return t;const o=[];e.forEach((e=>{const i=t.find((t=>n(e,t)));i&&o.push(i)}));const l=t.filter((e=>!o.includes(e))),d=o.map((e=>a(r)?s(e):e)),c=r?l.indexOf(r):0;return i.after?l.splice(c+1,0,...d):l.splice(c,0,...d),l}function yr(e,t,i,n,a,s){const r=t.find((e=>n(i.after||i.before,e)));if(!r)return t;const o=e.map((e=>s(e,a(r)))),l=t.indexOf(r);return i.after?t.splice(l+1,0,...o):t.splice(l,0,...o),t}function fr(e,t){if(0===e.length)return{current:null,queued:[],nextUp:[]};const i=t===ri.REPEAT_CONTEXT?2:1,n=[];let a=0;const s=e[0];for(let o=1;o<e.length;o++){const{type:t,uri:s,metadata:{hidden:r,availability_restrictions:l}={}}=e[o],d="spotify:delimiter"===s||"spotify:meta:delimiter"===s;if(d&&++a>=i)break;const c=s.startsWith("spotify:meta:"),u=t!==ti.p.UNKNOWN&&l;c||d||"true"===r||u||n.push(e[o])}const r=n.findIndex((e=>{let{provider:t}=e;return"queue"!==t}));return{current:s,queued:-1===r?n:n.slice(0,r),nextUp:-1===r?[]:n.slice(r)}}var Nr=i(37253),Tr=i(56296);const Rr={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"decorateContextEpisodesOrChapters"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"mediaTypes"}},{kind:"Field",name:{kind:"Name",value:"audiobookV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]},Ar={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"decorateContextTracks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]};function br(e){const t=null!=e?e:[];return t.length>1?"mixed":0===t.length||t[0]===Mn.$_.Audio?"audio":t[0]===Mn.$_.Video?"video":"audio"}async function Cr(e,t,i){const n=Array.from(new Set(i.map((e=>e.uri)).filter((e=>!t.has(e))))),a=n.filter((e=>(0,Ne.wj)(e))),s=n.filter((e=>(0,Ne.hn)(e))),[r,o]=await Promise.all([a.length>0?e(Ar,{uris:a},["uris"]):Promise.resolve([]),s.length>0?e(Rr,{uris:s},["uris"]):Promise.resolve([])]);return[...r.reduce(((e,t)=>{var i;return e.concat(null!==(i=t.tracks)&&void 0!==i?i:[])}),[]),...o.reduce(((e,t)=>{var i;return e.concat(null!==(i=t.episodes)&&void 0!==i?i:[])}),[])].map((e=>"GenericError"===e.__typename||"NotFound"===e.__typename||"RestrictedContent"===e.__typename?null:function(e){return"Track"===e.__typename}(e)?function(e){var t,i,n,a,s,r,o,l,d;return{type:ti.p.TRACK,uri:e.uri,name:e.name,mediaType:"audio",duration:{milliseconds:e.duration.totalMilliseconds},album:{type:ti.p.ALBUM,uri:null!==(t=null===(i=e.albumOfTrack)||void 0===i?void 0:i.uri)&&void 0!==t?t:"",name:null!==(n=null===(a=e.albumOfTrack)||void 0===a?void 0:a.name)&&void 0!==n?n:"",images:null!==(s=null===(r=e.albumOfTrack)||void 0===r||null===(o=r.coverArt)||void 0===o?void 0:o.sources.map((e=>(0,Tr.Bi)(e))))&&void 0!==s?s:[]},artists:e.artists.items.map((e=>({type:ti.p.ARTIST,uri:e.uri,name:e.profile.name}))),isLocal:!1,isExplicit:(null===(l=e.contentRating)||void 0===l?void 0:l.label)===Mn.KS.Explicit,is19PlusOnly:(null===(d=e.contentRating)||void 0===d?void 0:d.label)===Mn.KS.NineteenPlus,get images(){return this.album.images},uid:null,provider:null}}(e):function(e){return"Episode"===e.__typename}(e)?function(e){var t,i,n,a,s;if("Podcast"!==e.podcastV2.data.__typename)return null;const r=e.podcastV2.data;return{type:ti.p.EPISODE,uri:e.uri,name:null!==(t=e.name)&&void 0!==t?t:"",mediaType:br(e.mediaTypes),duration:{milliseconds:e.duration.totalMilliseconds},show:{type:ti.p.SHOW,uri:null!==(i=r.uri)&&void 0!==i?i:"",name:null!==(n=r.name)&&void 0!==n?n:"",images:null!==(a=null===(s=r.coverArt)||void 0===s?void 0:s.sources.map((e=>(0,Tr.Bi)(e))))&&void 0!==a?a:[]},get images(){return this.show.images},uid:null,provider:null}}(e):function(e){return"Chapter"===e.__typename}(e)?function(e){var t,i,n,a,s;if("Audiobook"!==e.audiobookV2.data.__typename)return null;const r=e.audiobookV2.data;return{type:ti.p.CHAPTER,uri:e.uri,name:null!==(t=e.name)&&void 0!==t?t:"",mediaType:br(e.mediaTypes),duration:{milliseconds:e.duration.totalMilliseconds},book:{type:ti.p.AUDIOBOOK,uri:null!==(i=r.uri)&&void 0!==i?i:"",name:null!==(n=r.name)&&void 0!==n?n:"",images:null!==(a=null===(s=r.coverArt)||void 0===s?void 0:s.sources.map((e=>(0,Tr.Bi)(e))))&&void 0!==a?a:[]},get images(){return this.book.images},uid:null,provider:null}}(e):((0,or._)(e),null))).forEach((e=>{null!==e&&t.set(e.uri,e)})),i.map((e=>({...e,...t.get(e.uri),uid:e.uid,provider:e.provider})))}class Ir{constructor(e,t,i,n){(0,A.Z)(this,"_queue",null),(0,A.Z)(this,"_cache",new Nr.tp(36e5,3e5)),this._events=e,this._queueManager=t,this._loader=i,this.getRepeatMode=n,this._queueManager.addListener(V.HarmonyEvent.PLAYER_QUEUE_CHANGED,(async e=>{this._queue=e.data.internalPlayerQueue,this._state=await this.getQueueState(),this._events.emitQueueUpdate(this._state)})),this._state=fr([],this.getRepeatMode())}async getQueueState(){var e,t,i,n,a,s;const r=null!==(e=this._queue)&&void 0!==e&&e.current_track?_r(null===(t=this._queue)||void 0===t?void 0:t.current_track,null===(i=this._queue)||void 0===i?void 0:i.current_track.metadata,null===(n=this._queue)||void 0===n?void 0:n.current_track.provider):null,o=null!==(a=null===(s=this._queue)||void 0===s?void 0:s.next_items.map((e=>_r(e,e.metadata,e.provider))))&&void 0!==a?a:[];let l=r?[r,...o]:o;try{l=await Cr(this._loader,this._cache,l)}catch(d){}return fr(l,this.getRepeatMode())}isSameItem(e,t){return e.uid&&t.uid?e.uid===t.uid:e.uri===t.uri}isQueued(e){return"queue"===e.provider}markAsQueued(e){return{...e,provider:"queue",metadata:{...e.metadata,is_queued:"true"}}}createQueueItem(e,t){return{uri:e.uri,type:"track",provider:t?"queue":"context",metadata:{is_queued:t.toString()}}}async addToQueue(e){this._queueManager.addToQueue(e.map((e=>e.uri)))}async removeFromQueue(e){var t;null!==this._queue&&this._queueManager.setInternalPlayerQueue({revision:this._queue.revision,next_items:null===(t=this._queue.next_items)||void 0===t?void 0:t.filter((t=>!e.some((e=>this.isSameItem(e,t))))),previous_items:this._queue.previous_items})}async clearQueue(){null!==this._queue&&this._queueManager.setInternalPlayerQueue({revision:this._queue.revision,next_items:this._queue.next_items.filter((e=>!this.isQueued(e))),previous_items:this._queue.previous_items})}async reorderQueue(e,t){if(null===this._queue)return;const i=[...this._queue.next_items];this._queueManager.setInternalPlayerQueue({revision:this._queue.revision,next_items:Sr(e,i,t,this.isSameItem,this.isQueued,this.markAsQueued),previous_items:this._queue.previous_items})}async insertIntoQueue(e,t){if(null===this._queue)return;const i=[...this._queue.next_items];this._queueManager.setInternalPlayerQueue({revision:this._queue.revision,next_items:yr(e,i,t,this.isSameItem,this.isQueued,this.createQueueItem),previous_items:this._queue.previous_items})}getQueue(){return this._state}getInternalQueue(){return this._queue}}class Lr{constructor(e,t,i){(0,A.Z)(this,"_state",null),this._harmony=e,this._defaultFeatureVersion=i,this._events=new Er(this._harmony),this._events.addListener(Qt.rg.UPDATE,(e=>{let{data:t}=e;this._state=t})),this._queue=new Ir(this._events,this._harmony.getQueueManager(),t,(()=>{var e,t;return null!==(e=null===(t=this._state)||void 0===t?void 0:t.repeat)&&void 0!==e?e:ri.REPEAT_NONE})),this.referrer="PlayerHarmony_UnknownReferrer"}setDefaultFeatureVersion(e){void 0===e.featureVersion&&(e.featureVersion=this._defaultFeatureVersion)}getCapabilities(){return{canChangeSpeed:!1,canChangeVolume:!0,canPlayMultipleContextPages:!0,maxNextTracks:2,hasDecoratedQueue:!0}}getEvents(){return this._events}getState(){return this._state}getReferrer(){return this.referrer}setReferrer(e){this.referrer=e}async play(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._events.emitPlaySync(e,t,i)||(this.setDefaultFeatureVersion(t),e.pages?this._harmony.playPages(e.pages.map((e=>{var t;return{tracks:null===(t=e.items)||void 0===t?void 0:t.map((e=>{let{uri:t,uid:i}=e;return{uri:t,uid:null!=i?i:void 0}})),pageURL:e.url,nextPageURL:e.nextPageUrl,metadata:e.metadata}})),null,ur(e,t,i)):this._harmony.playURI(e.uri,null,ur(e,t,i)))}async pause(){this._events.emitPauseSync()||await this._harmony.pause()}async resume(){this._events.emitResumeSync()||await this._harmony.resume()}async skipToNext(e){if(this._events.emitSkipToNextSync())return;let t;const i=this._queue.getInternalQueue();e&&i&&(t=i.next_items.find((t=>(!e.uid||t.uid===e.uid)&&t.uri===e.uri))),await this._harmony.nextTrack(null,{track:t})}async skipToPrevious(){this._events.emitSkipToPreviousSync()||await this._harmony.smartPreviousTrack()}async skipTo(){throw new Error("Not implemented")}async seekTo(e){await this._harmony.seek(e)}async seekForward(e){await this._harmony.seekForward(e)}async seekBackward(e){await this._harmony.seekBackward(e)}async setShuffle(e){await this._harmony.setShuffle(e)}async setRepeat(e){switch(e){case ri.REPEAT_NONE:await this._harmony.setRepeatMode(V.RepeatMode.OFF);break;case ri.REPEAT_CONTEXT:await this._harmony.setRepeatMode(V.RepeatMode.CONTEXT);break;case ri.REPEAT_TRACK:await this._harmony.setRepeatMode(V.RepeatMode.TRACK)}}async setSpeed(e){throw new Error("Changing playback speed not possible with Harmony.")}async canPlayEncryptedContent(){return void 0!==(await this._harmony.getMediaConfig()).keysystem}async refreshCurrentContext(){await this._harmony.updateCurrentContext()}async updateContext(){throw new Error("Updating context not possible with Harmony.")}async addToQueue(e){if(!this._events.emitQueueActionSync(Qt.FE.ADD))try{await this._queue.addToQueue(e),this._events.emitQueueActionComplete(Qt.FE.ADD)}catch(t){throw this._events.emitQueueActionComplete(Qt.FE.ADD,t instanceof Error?t:new Error("Unknown error object")),t}}async reorderQueue(e,t){if(!this._events.emitQueueActionSync(Qt.FE.REORDER))try{await this._queue.reorderQueue(e,t),this._events.emitQueueActionComplete(Qt.FE.REORDER)}catch(i){throw this._events.emitQueueActionComplete(Qt.FE.REORDER,i instanceof Error?i:new Error("Unknown error object")),i}}async insertIntoQueue(e,t){if(!this._events.emitQueueActionSync(Qt.FE.INSERT))try{await this._queue.insertIntoQueue(e,t),this._events.emitQueueActionComplete(Qt.FE.INSERT)}catch(i){throw this._events.emitQueueActionComplete(Qt.FE.INSERT,i instanceof Error?i:new Error("Unknown error object")),i}}async removeFromQueue(e){if(!this._events.emitQueueActionSync(Qt.FE.REMOVE))try{await this._queue.removeFromQueue(e),this._events.emitQueueActionComplete(Qt.FE.REMOVE)}catch(t){throw this._events.emitQueueActionComplete(Qt.FE.REMOVE,t instanceof Error?t:new Error("Unknown error object")),t}}async clearQueue(){if(!this._events.emitQueueActionSync(Qt.FE.CLEAR))try{await this._queue.clearQueue(),this._events.emitQueueActionComplete(Qt.FE.CLEAR)}catch(e){throw this._events.emitQueueActionComplete(Qt.FE.CLEAR,e instanceof Error?e:new Error("Unknown error object")),e}}getQueue(){return this._queue.getQueue()}getForcedShuffle(){return!1}setForcedShuffle(){}}var Pr=i(46100);function Dr(e){return`Partner spotify ${e}`}function Or(e){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>{let{url:t,height:i,width:n}=e;return Boolean(t)&&Boolean(i)&&Boolean(n)})).map((e=>{let{url:t,width:i,height:n}=e;return{url:t,height:parseInt(null!=n?n:"0",10),width:parseInt(null!=i?i:"0",10)}}))}({url:e.image_url,height:e.image_height,width:e.image_width},{url:e.image_url_small,height:e.image_height_small,width:e.image_width_small},{url:e.image_url_large,height:e.image_height_large,width:e.image_width_large},{url:e.image_url_xlarge,height:e.image_height_xlarge,width:e.image_width_xlarge})}function Fr(e,t){return null===e?null:(0,Ne.wj)(e.uri)||(0,Ne.dB)(e.uri)?function(e,t){var i,n,a,s,r;const o=e.metadata;return{type:ti.p.TRACK,uri:e.uri,uid:null,name:null!==(i=o.title)&&void 0!==i?i:"",mediaType:e.mediaType,duration:{milliseconds:t},album:{type:ti.p.ALBUM,uri:null!==(n=o.album_uri)&&void 0!==n?n:"",name:null!==(a=o.album_title)&&void 0!==a?a:"",images:Or(o)},artists:[{type:ti.p.ARTIST,uri:null!==(s=o.artist_uri)&&void 0!==s?s:"",name:null!==(r=o.artist_name)&&void 0!==r?r:""}],isLocal:(0,Ne.dB)(e.uri),isExplicit:!1,is19PlusOnly:!1,provider:null,get images(){return this.album.images}}}(e,t):(0,Ne.hn)(e.uri)?function(e,t){var i,n,a;const s=e.metadata;return{type:ti.p.EPISODE,uri:e.uri,uid:null,name:null!==(i=s.title)&&void 0!==i?i:"",mediaType:e.mediaType,duration:{milliseconds:t},show:{type:ti.p.SHOW,uri:null!==(n=s.album_uri)&&void 0!==n?n:"",name:null!==(a=s.album_title)&&void 0!==a?a:"",images:Or(s)},provider:null,get images(){return this.show.images}}}(e,t):(0,Ne.mg)(e.uri)?function(e,t){var i,n,a,s;const r=e.metadata;return{type:ti.p.AD,uri:e.uri,uid:null,title:null!==(i=r.title)&&void 0!==i?i:null,advertiser:null!==(n=r.artist_name)&&void 0!==n?n:null,url:null!==(a=r.artist_uri)&&void 0!==a?a:null,id:null!==(s=r.ad_id)&&void 0!==s?s:null,mediaType:e.mediaType,duration:{milliseconds:t},images:[],isPodcastAd:!1,isSkippableAd:!1,isTestAd:!1,provider:null}}(e,t):{...si,uri:e.uri,metadata:e.metadata||null}}function wr(e){switch(e){case Pr.zq.CONTEXT:return ri.REPEAT_CONTEXT;case Pr.zq.TRACK:return ri.REPEAT_TRACK;case Pr.zq.NONE:default:return ri.REPEAT_NONE}}function xr(e){let{playbackState:t}=e;return{canPause:!!t.playing,canResume:!t.playing,canSeek:!0,canSkipPrevious:!1,canSkipNext:!1,canToggleRepeatContext:!1,canToggleRepeatTrack:!1,canToggleShuffle:!1,disallowPausingReasons:t.playing?[]:["already_paused"],disallowResumingReasons:t.playing?["already_playing"]:[],disallowSeekingReasons:[],disallowSkippingPreviousReasons:["unknown"],disallowSkippingNextReasons:["unknown"],disallowTogglingRepeatContextReasons:["unknown"],disallowTogglingRepeatTrackReasons:["unknown"],disallowTogglingShuffleReasons:["unknown"],disallowTransferringPlaybackReasons:[]}}function Mr(e){const t=e.hasContext||e.isPaused||e.isBuffering;return{canSeek:null!=t&&t,disallowSeekingReasons:t?[]:["not_playing_track"]}}function Ur(e){if(null===e)return null;const t=e.playbackState,i=e.track,n=null==i?void 0:i.metadata,a=function(e){const t=e.track,i=null==t?void 0:t.metadata;return(null==i?void 0:i.contextURI)||(null==t?void 0:t.uri)||null}(e);return a?{sessionId:"",timestamp:Date.now(),context:{uri:null!=a?a:"",metadata:n},index:{pageURI:null,pageIndex:null,itemIndex:null},item:i?Fr(i,t.duration):null,shuffle:!1,repeat:wr(Pr.zq.NONE),speed:1,playbackQuality:{bitrateLevel:li.UNKNOWN},playbackId:null,positionAsOfTimestamp:t.position,duration:t.duration,restrictions:{...xr(e),...Mr({hasContext:!!i&&!!a,isPaused:!t.playing,isBuffering:!1})},hasContext:!!i&&!!a,isPaused:!t.playing,previousItems:[],nextItems:[]}:null}const jr=200,Br=400;var Gr=i(35780);const Vr={"com.apple.fps.1_0":"fairplay","com.widevine.alpha":"widevine","com.microsoft.playready":"playready"},Yr=e=>{var t,i;return null!==(t=e.pages)&&void 0!==t&&t.length&&null!==(i=e.pages[0].items)&&void 0!==i&&i.length?e.pages[0].items[0]:e},Kr=async function(e,t,i){var n,a;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"com.widevine.alpha",r=arguments.length>4?arguments[4]:void 0;const o={...t.metadata,contextURI:t!==e?e.uri:null};var l;if(null!==(n=t.metadata)&&void 0!==n&&n.externalResolvedUrl)return(0,Pr.SK)({uri:t.uri,resolvedURL:null===(l=t.metadata)||void 0===l?void 0:l.externalResolvedUrl,fileId:"",metadata:o,logData:r});if("episode"===(null===(a=(0,Ne.EC)(t.uri))||void 0===a?void 0:a.type)){const e=o.mediaType,i="yes"===o.useAuthEndpoint,n=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audio";return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?`@webgate/${Vr[e]}-license/v1/${t}/license`:`https://spclient.wg.spotify.com/${Vr[e]}-license/v1/unauth/${t}/license`}(s,i,e),a=await(0,Gr.IS)(t,s,e);return(0,Pr.SK)({uri:t.uri,licenseEndpoint:n,metadata:o,logData:r,fileId:"",noAuth:!i,...a})}const d=new Error(`No valid solution has been found to play this item (${null==t?void 0:t.uri})`);throw i.emitSync(Qt.rg.ERROR,new ei(Zt.ONE_TRACK_UNPLAYABLE,[],d)),d};function Hr(e,t){const i=function(e){const t=new Qt.Bc;let i,n,a={sessionId:"",timestamp:0,context:{uri:""},index:{pageURI:null,pageIndex:null,itemIndex:null},item:null,shuffle:!1,repeat:ri.REPEAT_NONE,speed:1,playbackQuality:{bitrateLevel:li.UNKNOWN},playbackId:null,positionAsOfTimestamp:0,duration:0,restrictions:{canPause:!1,canResume:!1,canSeek:!1,canSkipNext:!1,canSkipPrevious:!1,canToggleRepeatContext:!1,canToggleRepeatTrack:!1,canToggleShuffle:!1,disallowPausingReasons:["not_playing_track"],disallowResumingReasons:["not_playing_track"],disallowSeekingReasons:["not_playing_track"],disallowSkippingPreviousReasons:["not_playing_context"],disallowSkippingNextReasons:["not_playing_context"],disallowTogglingRepeatContextReasons:["not_playing_context"],disallowTogglingRepeatTrackReasons:["not_playing_context"],disallowTogglingShuffleReasons:["not_playing_context"],disallowTransferringPlaybackReasons:[]},hasContext:!1,isPaused:!1,isBuffering:!1,previousItems:[],nextItems:[]};function s(e){return{...a,...e,context:{...a.context,...null==e?void 0:e.context}}}function r(e){a=s(e),t.emit(Qt.rg.UPDATE,a)}async function o(){r(Ur(await e.getCurrentState()))}async function l(e){if(e){if(i)return;i=setTimeout((()=>{i=null,r({isBuffering:e})}),jr)}else i?(clearTimeout(i),i=null,r({isBuffering:e})):n||(n=setTimeout((()=>{n=null,r({isBuffering:e})}),Br))}async function d(){const t=await e.getCurrentState(),i=Ur(t),n=i?{...i,isBuffering:!1,hasContext:!1,isPaused:!1,positionAsOfTimestamp:a.duration}:{positionAsOfTimestamp:a.duration,position:a.duration,isBuffering:!1,hasContext:!1,isPaused:!1,restrictions:xr(t)},o=s(n),l=Mr(n);r({...o,restrictions:{...n.restrictions,...l}})}return e.on(Pr.oQ.ERROR,(e=>{const{error:i}=e.data;i.unrecoverable?t.emit(Qt.rg.ERROR,new ei(Zt.PLAYBACK_ERROR,[],i)):t.emit(Qt.rg.ERROR,new Jt(Zt.PLAYBACK_ERROR,[],i))})),e.on(Pr.oQ.PAUSED,o),e.on(Pr.oQ.PROGRESS,(async()=>{Date.now()-a.timestamp>=1e3&&o(),(a.isBuffering||i)&&((await e.getCurrentState()).playbackState.buffering||l(!1))})),e.on(Pr.oQ.TRACK_LOADED,o),e.on(Pr.oQ.TRACK_ENDED,d),e.on(Pr.oQ.LIST_ENDED,d),e.on(Pr.oQ.BUFFERING_START,(async()=>{await l(!0)})),e.on(Pr.oQ.BUFFERING_END,(async()=>{await l(!1)})),e.on(Pr.oQ.AUTOPLAY_FAILED,(async()=>{await l(!1)})),e.on(Pr.oQ.BEFORE_TRACK_LOAD,(async()=>{await l(!0)})),e.on(Pr.oQ.POSITION_CHANGED,(async()=>{(await e.getCurrentState()).playbackState.playing&&await l(!0)})),t}(e);let n,a=null,s="PlayerOverture_UnknownReferrer",r={unloadedSeekPosition:0,playArgs:null};const o=async()=>{if(void 0===n){const t=await e.getMediaConfig();n=t.keysystem}return n};return i.addListener(Qt.rg.UPDATE,(e=>{let{data:t}=e;a=t})),"undefined"!=typeof window&&o(),{getCapabilities:()=>({canChangeSpeed:!1,canChangeVolume:!0,canPlayMultipleContextPages:!1,maxNextTracks:0,hasDecoratedQueue:!1}),canPlayEncryptedContent:async()=>void 0!==await o(),getEvents:()=>i,getState:()=>a,getReferrer:()=>s,setReferrer(e){s=e},async play(n,a,s){var l,d,c;if(i.emitPlaySync(n,a,null!=s?s:{}))return;const u=await o(),m=Yr(n),_=await Kr(n,m,i,u,t),h=(0,Pr.Sy)({tracks:[_]}),p={index:null!==(l=null==s||null===(d=s.skipTo)||void 0===d?void 0:d.index)&&void 0!==l?l:void 0,initialPosition:null!==(c=null==s?void 0:s.seekTo)&&void 0!==c?c:0};await e.playList(h,p),r={playArgs:[n,a,s],unloadedSeekPosition:0}},async pause(){i.emitPauseSync()||await e.pause()},async resume(){if(!!(await e.getCurrentState()).track){if(i.emitResumeSync())return;await e.resume()}else if(r.playArgs){const[e,t,i]=r.playArgs;await this.play(e,t,{...i,seekTo:r.unloadedSeekPosition})}else;},async skipToNext(){i.emitSkipToNextSync()||await e.nextTrack()},async skipTo(){throw new Error("Not implemented")},async skipToPrevious(){i.emitSkipToPreviousSync()||await e.previousTrack()},async seekTo(t){(await e.getCurrentState()).track?await e.seek(t):r.unloadedSeekPosition=t},async seekForward(t){const i=(await e.getCurrentState()).playbackState.position;await e.seek(i+t)},async seekBackward(t){const i=(await e.getCurrentState()).playbackState.position;await e.seek(i-t)},async setShuffle(){throw new Error("setShuffle is not supported in Overture")},async setRepeat(){throw new Error("setRepeat is not supported in Overture")},async setSpeed(){throw new Error("setSpeed is not supported in Overture")},async refreshCurrentContext(){},async updateContext(){throw new Error("Updating context not possible with Overture.")},async addToQueue(){throw new Error("addToQueue is not supported in Overture")},async clearQueue(){throw new Error("clearQueue is not supported in Overture")},async removeFromQueue(){throw new Error("removeFromQueue is not supported in Overture")},async reorderQueue(){throw new Error("reorderQueue is not supported in Overture")},async insertIntoQueue(){throw new Error("insertIntoQueue is not supported in Overture")},getQueue(){throw new Error("getQueue is not supported in Overture")},getForcedShuffle:()=>!1,setForcedShuffle(){}}}function Wr(e,t){let{isAnonymous:i,type:n,createPlayer:a}=t;if(i){const t=function(e,t){return(0,Pr.cr)({transport:e,...t})}(e,{platform_identifier:Dr(n),config:{preinitMediaElement:!1,enableWithoutEME:!0,unauthenticatedLogs:!0,videoPlayerContainer:".VideoPlayer__container",audioPlayerContainer:".VideoPlayer__container"},autoActivateElement:!0});return{harmony:null,overture:t}}return{harmony:rr(e,{videoPlayerContainer:".VideoPlayer__container",platformIdentifier:nr(n),createPlayer:a}),overture:null}}var qr=i(56111),Qr=i(65481),$r=i(12110),zr=i(51497),Zr=i(22791),Xr=i(37800),Jr=i(42714),eo=i(28463);const to=(0,Zr.hh)(Xr.H).addMiddleware($r.a).addMiddleware(zr.d).addMiddleware(Jr.Q).addMiddleware(eo.Y);var io=i(74772);class no extends io.vp{}const ao={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeLibraryItems"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeLibraryItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RemoveLibraryItemsResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"library"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}}]}}]},so={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addLibraryItems"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addLibraryItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AddLibraryItemsResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"library"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}}]}}]},ro={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getLikedSongs"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"50"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"me"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"library"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"offset"}},{kind:"Field",name:{kind:"Name",value:"limit"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"addedAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mwpLibraryTrack"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mwpLibraryTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discNumber"}},{kind:"Field",name:{kind:"Name",value:"trackNumber"}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"previews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioPreviews"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}}]}}]}}]},oo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"isInLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeOrChapterResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PodcastOrAudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}}]}}]}}]},lo=e=>null!=e,co=(e,t)=>e.filter((e=>(null==e?void 0:e.type)===t)).map((e=>null==e?void 0:e.toURI())).filter(lo);class uo{constructor(e,t){(0,A.Z)(this,"_events",new no),(0,A.Z)(this,"_cache",new Map),this.requestGQL=e,this.userId=t}getEvents(){return this._events}async getLikedTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{var i,n,a,s;const r=await this.requestGQL(ro,{offset:e,limit:t});return null!==(i=null==r||null===(n=r.data)||void 0===n||null===(a=n.me)||void 0===a||null===(s=a.library)||void 0===s?void 0:s.tracks)&&void 0!==i?i:null}catch(r){throw new Error(`Error requesting library: ${r}`)}}async getTracksMetadata(){try{var e,t,i,n,a;const s=await this.requestGQL(ro,{offset:0,limit:1});return{totalLength:null!==(e=null==s||null===(t=s.data)||void 0===t||null===(i=t.me)||void 0===i||null===(n=i.library)||void 0===n||null===(a=n.tracks)||void 0===a?void 0:a.totalCount)&&void 0!==e?e:0}}catch(s){throw new Error("Error requesting library")}}async webApiPlaylistRequest(e,t){let i;switch(t){case"follow":i="PUT";break;case"unfollow":i="DELETE";break;default:i="GET"}return(0,pi.k)().request("isFollowed"===t?`@webapi/v1/playlists/${null==e?void 0:e.id}/followers/contains?ids=${this.userId}`:`@webapi/v1/playlists/${null==e?void 0:e.id}/followers/?ids=${this.userId}`,{responseType:"json",method:i})}async webApiUserRequest(e,t){let i;switch(t){case"follow":i="PUT";break;case"unfollow":i="DELETE";break;default:i="GET"}return(0,pi.k)().request("isFollowed"===t?`@webapi/v1/me/following/contains?type=user&ids=${e.username}`:`@webapi/v1/me/following?type=user&ids=${e.username}`,{responseType:"json",method:i})}async addEntityToLibrary(e){try{const t=(0,Ne.EC)(e);if((null==t?void 0:t.type)===Ne.URITypeMap.PLAYLIST||(null==t?void 0:t.type)===Ne.URITypeMap.PLAYLIST_V2)await this.webApiPlaylistRequest(t,"follow");else if((null==t?void 0:t.type)===Ne.URITypeMap.PROFILE)await this.webApiUserRequest(t,"follow");else{const t=await this.requestGQL(so,{uris:[e]});if(null!=t&&t.errors)throw new Error}this._cache.has(e)&&this._cache.set(e,Promise.resolve(!0)),this._events.emit("update",{type:"add",uris:[e]})}catch(t){throw new Error(`Error removing ${e} from library: ${t}`)}}async removeEntityFromLibrary(e){try{const t=(0,Ne.EC)(e);if((null==t?void 0:t.type)===Ne.URITypeMap.PLAYLIST||(null==t?void 0:t.type)===Ne.URITypeMap.PLAYLIST_V2)await this.webApiPlaylistRequest(t,"unfollow");else if((null==t?void 0:t.type)===Ne.URITypeMap.PROFILE)await this.webApiUserRequest(t,"unfollow");else{const t=await this.requestGQL(ao,{uris:[e]});if(null!=t&&t.errors)throw new Error}this._cache.has(e)&&this._cache.set(e,Promise.resolve(!1)),this._events.emit("update",{type:"remove",uris:[e]})}catch(t){throw new Error(`Error removing ${e} from library: ${t}`)}}async checkIsInLibrary(e){try{const t=e.filter((e=>!this._cache.has(e)));if(!t.length)return Promise.all(e.map((e=>this._cache.get(e))));t.map((e=>(0,Ne.EC)(e))).filter((e=>(null==e?void 0:e.type)===Ne.URITypeMap.PLAYLIST||(null==e?void 0:e.type)===Ne.URITypeMap.PLAYLIST_V2)).forEach((e=>{if(!e)return;const t=this.webApiPlaylistRequest(e,"isFollowed").then((e=>{var t;return Boolean(null===(t=e.body)||void 0===t?void 0:t[0])}));this._cache.set(e.toURI(),t)}));t.map((e=>(0,Ne.EC)(e))).filter((e=>(null==e?void 0:e.type)===Ne.URITypeMap.PROFILE)).forEach((e=>{if(!e)return;const t=this.webApiUserRequest(e,"isFollowed").then((e=>{var t;return Boolean(null===(t=e.body)||void 0===t?void 0:t[0])}));this._cache.set(e.toURI(),t)}));const i=t.map((e=>(0,Ne.EC)(e))).filter((e=>(null==e?void 0:e.type)!==Ne.URITypeMap.PLAYLIST&&(null==e?void 0:e.type)!==Ne.URITypeMap.PLAYLIST_V2)),n=[...co(i,Ne.URITypeMap.ALBUM),...co(i,Ne.URITypeMap.ARTIST),...co(i,Ne.URITypeMap.SHOW),...co(i,Ne.URITypeMap.EPISODE),...co(i,Ne.URITypeMap.TRACK)],a=this.requestGQL(oo,{uris:n}).then(mo);for(const e of n)this._cache.set(e,a.then((t=>t.get(e)||!1)));return Promise.all(e.map((e=>this._cache.get(e))))}catch(t){throw new Error(`Error checking liked status: ${t}`)}}}function mo(e){var t;const i=new Map;if(null!=e&&null!==(t=e.data)&&void 0!==t&&t.lookup)for(const n of e.data.lookup)("AlbumResponseWrapper"===n.__typename&&"Album"===n.data.__typename||"ArtistResponseWrapper"===n.__typename&&"Artist"===n.data.__typename||"EpisodeOrChapterResponseWrapper"===n.__typename&&"Episode"===n.data.__typename||"PodcastOrAudiobookResponseWrapper"===n.__typename&&"Podcast"===n.data.__typename||"TrackResponseWrapper"===n.__typename&&"Track"===n.data.__typename)&&i.set(n.data.uri,n.data.saved);return i}let _o;var ho=i(75714),po=i(4637);const vo=e=>{let{instance:t,children:i}=e;return(0,po.jsx)(ho.H.Provider,{value:{instance:t},children:i})};var ko=i(6129),go=i(39978),Eo=i(75758);var So=i(9102);const yo="data-translations-url-for-locale";var fo=i(55817);function No(e){return Date.now()>=e.accessTokenExpirationTimestampMs}var To=i(60808);function Ro(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n=t();var a;return(a=n)&&["accessToken","accessTokenExpirationTimestampMs","isAnonymous"].every((e=>e in a))||(n=null),function(e,t){let i=null,n=null;return async function(){let{preferCached:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a&&i)return i;if(n)return n;n=e();try{i=await n,t(i)}finally{n=null}return i}}((async()=>{if(n&&!No(n))return n;const t=await function(e,t,i){return e.build().withHost(Os.SW).withHostIdentifier("https://open.spotify.com").withPath("/get_access_token").withQueryParameters({reason:t,productType:i}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/get_access_token").send()}(To.b.getInstance(),"transport",e);return t.body}),i)}var Ao=i(87252);let bo=function(e){return e.UPDATE="update",e}({});class Co extends Ao.r{}const Io={isAuthorized:!1,token:null,retryAttempt:null,retryAt:null};class Lo{constructor(e,t){(0,A.Z)(this,"_events",new Co),(0,A.Z)(this,"_state",Io),this._tokenProvider=Ro(e,t,this.onTokenChanged.bind(this))}onTokenChanged(e){this._state={isAuthorized:null!==e&&!No(e),token:e,retryAttempt:null,retryAt:null},this._events.emit(bo.UPDATE,this._state)}getCapabilities(){return{canGetSessionTransferURL:!1}}getEvents(){return this._events}getState(){return this._state}getTokenProvider(){return this._tokenProvider}tryAuthorize(){throw new Error("Not implemented!")}async getSessionTransferURL(){throw new Error("Getting a session transfer URL is not possible on web!")}}var Po=i(77851),Do=i(40033);const Oo=(e,t,i)=>{((e,t)=>{if((0,Si.O)()||!window.gtag)return;const{name:i,delta:n,value:a,id:s,rating:r}=e,o={value:n,metric_id:s,metric_name:i,metric_value:a,metric_delta:n,ga4_client_id:"mobile-web-player",is_anonymous:t,debug_target:void 0,metric_rating:r};if("attribution"in e)switch(i){case"CLS":o.debug_target=e.attribution.largestShiftTarget;break;case"FID":case"INP":o.debug_target=e.attribution.eventTarget;break;case"LCP":o.debug_target=e.attribution.element}window.gtag("event","gtm.webVitals",o)})(e,t),((e,t,i)=>{const n={metric_type:"web-vitals",metric_name:e.name,metric_value:String(e.value)},a=t?(0,Do.F)(n):(0,Po.h)(n);i.send(a)})(e,t,i)};var Fo=i(43398),wo=i(50335),xo=i(59496),Mo=i(41177);const Uo=e=>{let{history:t,children:i}=e;const[n,a]=(0,xo.useState)((()=>({location:t.location,action:t.action})));return(0,xo.useLayoutEffect)((()=>{t.listen(((e,t)=>a({location:e,action:t})))}),[t]),(0,po.jsx)(Mo.F0,{location:n.location,navigationType:n.action,navigator:t,children:i})};var jo=i(10340),Bo=i(93381);function Go(e){var t,i;let{translations:_,locale:h}=e;(0,F.j)()&&(0,r.WJ)("playback_load_start");const p=(0,ea.K)("initial-state",{session:U}),v=Qr.VK.fromJSON((0,ea.K)("remote-configuration",JSON.stringify({}))),k=(0,ea.Z)("config"),g=(0,ea.Z)("session"),{me:E,isAnonymous:S}=p.session,y=new Lo("mobile-web-player",(()=>(0,ea.Z)("session"))).getTokenProvider(),f=I(y,{useDealer:!S,clientInfoOptions:{deviceId:k.correlationId}});(0,pi.J)(f),m.b.setSession({accessToken:g.accessToken,accessTokenExpirationTimestampMs:g.accessTokenExpirationTimestampMs,isAnonymous:S});{const e="mobile-web-player_2023-05-27_1685170058867_70bf2d6";(0,u.j6)("https://61f69548e77b4b52a0a8caa6885931c7@sentry.io/1242283",e)}const N="f6a40776580943a7bc5173125a1e8832",T=((e,t,i,n)=>{const a=(0,go.mi)({transport:e,suppressPersist:!1,context:[(0,Eo.jx)(t),(0,Eo.UR)({version:"mobile-web-player_2023-05-27_1685170058867_70bf2d6"}),(0,Eo.Mb)(),(0,Eo.sr)(i)],ownerProvider:n,storagePrefix:t,storage:{flushStrategy:{kind:go.PQ.IMMEDIATE},adapter:new go.Ds}});return a})(f,N,k.correlationId||"",(()=>{var e,t;return null!==(e=null==E||null===(t=E.profile)||void 0===t?void 0:t.username)&&void 0!==e?e:null}));(0,c.Rn)("mobile-web-player",y,S),function(){jt.BrowserMetrics.getPageLoadTime().then((e=>{(0,c.sQ)({metric_type:jt.MetricTypes.TIMER,what:"time-to-page-load-nanoseconds",value:(0,jt.asNanoseconds)(jt.Time.fromMillis(e).asNanos()),tags:{route:(0,Gt.J)(window.location.pathname)}})})).catch((()=>{})),jt.BrowserMetrics.getTimeToFirstPaint().then((e=>{(0,c.sQ)({metric_type:jt.MetricTypes.TIMER,what:"time-to-first-paint-nanoseconds",value:(0,jt.asNanoseconds)(jt.Time.fromMillis(e).asNanos()),tags:{route:(0,Gt.J)(window.location.pathname)}})})).catch((()=>{})),jt.BrowserMetrics.getTimeToFirstContentfulPaint().then((e=>{(0,c.sQ)({metric_type:jt.MetricTypes.TIMER,what:"time-to-first-contentful-paint-nanoseconds",value:(0,jt.asNanoseconds)(jt.Time.fromMillis(e).asNanos()),tags:{route:(0,Gt.J)(window.location.pathname)}})})).catch((()=>{}));const e=e=>{(0,c.sQ)(jt.BrowserMetrics.getWebVitalsMetric({...e,label:e.name},{route:(0,Gt.J)(window.location.pathname)}))};(0,qs.Fu)(e),(0,qs.mw)(e),(0,qs.NO)(e),(0,qs.Yn)(e),(0,qs.a4)(e),(0,qs.mr)(e)}();const R=(0,Bo.nT)(h),A=new d.oc;A.setDictionary(_),A.setLocale(h),A.setUrlLocale(R),d.ag.setDictionary(_),d.ag.setLocale(h),d.ag.setUrlLocale(R);const b=Wr(f,{isAnonymous:!0,type:"mobile"}),C=(0,L.P)(m.b.getInstance()),w=function(e,t,i){let{harmony:n,overture:a}=e,{clientId:s}=i;if(null!==n)return new Lr(n,t,"mobile-web-player_2023-05-27_1685170058867_70bf2d6");if(null!==a){const{correlationId:e}=(0,ea.Z)("config");return Hr(a,{clientId:s,correlationId:e})}throw new Error("Unable to create PlayerAPI without a Harmony or Overture instance!")}(b,(0,D.QM)(C),{clientId:N}),x=new So.QueryClient,M=((e,t)=>t?(_o||(_o=new uo(e,t)),_o):null)(C,null==E||null===(t=E.profile)||void 0===t?void 0:t.id),j=(0,s.lX)(),B=O.R.getUBILogger({eventSender:T,playContextUriProvider:{getPlayContextUri:()=>{var e,t;return null!==(e=null===(t=w.getState())||void 0===t?void 0:t.context.uri)&&void 0!==e?e:null}},playbackIdProvider:{getPlaybackId:()=>{var e,t;return null!==(e=null===(t=w.getState())||void 0===t?void 0:t.playbackId)&&void 0!==e?e:null}},disableAutoBackgroundMonitoring:!1}),G={history:j,graphQLLoader:C,player:w,transport:f,eventSender:T,i18n:A},V=Ws(ir(p,er),G,{enablePlayback:!0});const Y=document.getElementById("main");if(!Y)throw new Error("#main component not found");const K=Y.getAttribute("data-ssr")?n.hydrate:n.render;if(!S&&k.userCountry&&Ot.Z.setCountry(k.userCountry),K((0,po.jsx)(l.nD,{resolver:to,context:{username:(null==E||null===(i=E.profile)||void 0===i?void 0:i.id)||null},options:{clientId:"mobile-web-player",timeout:2e4,transport:f,eventSender:T,installationId:k.correlationId,initialConfiguration:v},initialConfiguration:v,children:(0,po.jsx)(D.$C,{request:C,children:(0,po.jsx)(ko.EX,{instance:T,children:(0,po.jsx)(So.QueryClientProvider,{client:x,children:(0,po.jsx)(vo,{instance:M,children:(0,po.jsx)(jo.bd,{instance:A,children:(0,po.jsx)(fo.jg,{children:(0,po.jsx)(Fo.TQ,{ubiLogger:B,children:(0,po.jsx)(a.zt,{store:V,children:(0,po.jsx)(Uo,{history:j,children:(0,po.jsx)(wo.h,{})})})})})})})})})})}),Y,(()=>{(0,qr.mw)((e=>Oo(e,S,T))),(0,qr.a4)((e=>Oo(e,S,T))),(0,qr.mr)((e=>Oo(e,S,T))),(0,qr.Yn)((e=>Oo(e,S,T))),(0,qr.Fu)((e=>Oo(e,S,T))),(0,qr.NO)((e=>Oo(e,S,T)))})),!k.gtmId)throw new Error("Missing optimize and gtm IDs!");var H,W;(0,o.track)({dataLayerPushInitial:!0,googleTagManagerId:k.gtmId,language:null===(H=k.locale)||void 0===H?void 0:H.locale,market:k.market,loggedIn:!S,oneTrust:"1"===(null!==(W=(0,P.vQ)("client-web_one-trust"))&&void 0!==W?W:"1"),userCountry:k.userCountry})}(async function(){const e=document.head.querySelector(`link[${yo}]`),t=e.getAttribute("href"),i=e.getAttribute(yo),n=new AbortController,a=setTimeout((()=>n.abort()),5e3),s=await fetch(t,{signal:n.signal}).then((e=>e.json())).catch((()=>({})));return clearTimeout(a),{translations:s,translationsUrl:t,locale:i}})().then((e=>{let{translations:t,locale:i}=e;return Go({translations:t,locale:i})}))},93855:(e,t,i)=>{"use strict";i.d(t,{Dg:()=>a,pV:()=>s,qe:()=>r});var n=i(6197);function a(e){var t,i,a,s;if("Podcast"===e.podcastV2.data.__typename)return{uri:e.uri,title:e.name,subtitle:e.podcastV2.data.name,type:"track",artist_uri:e.podcastV2.data.uri,artist_name:e.podcastV2.data.name,media_type:"audio",externalResolvedUrl:null===(t=e.audioPreview)||void 0===t?void 0:t.url,anonymousPlaybackAllowed:Boolean(null===(i=e.audioPreview)||void 0===i?void 0:i.url),isPreview:!0,album_uri:e.podcastV2.data.uri,album_title:e.podcastV2.data.name,...(0,n.Jx)(null!==(a=null===(s=e.coverArt)||void 0===s?void 0:s.sources)&&void 0!==a?a:[])}}function s(e){var t,i,a,s,r,o,l,d,c,u,m,_,h,p,v,k,g,E,S,y,f,N;return"artists"in e?{uri:e.uri,title:e.name,subtitle:null===(t=e.artists.items[0])||void 0===t?void 0:t.profile.name,type:"track",artist_uri:null===(i=e.artists.items[0])||void 0===i?void 0:i.uri,artist_name:null===(a=e.artists.items[0])||void 0===a?void 0:a.profile.name,media_type:"audio",externalResolvedUrl:null===(s=e.previews)||void 0===s||null===(r=s.audioPreviews.items[0])||void 0===r?void 0:r.url,anonymousPlaybackAllowed:Boolean(null===(o=e.previews)||void 0===o||null===(l=o.audioPreviews.items[0])||void 0===l?void 0:l.url),isPreview:!0,album_uri:null===(d=e.albumOfTrack)||void 0===d?void 0:d.uri,album_title:null===(c=e.albumOfTrack)||void 0===c?void 0:c.name,...(0,n.Jx)((null===(u=e.albumOfTrack)||void 0===u||null===(m=u.coverArt)||void 0===m?void 0:m.sources)||[])}:{uri:e.uri,title:e.name,subtitle:null===(_=e.firstArtist.items[0])||void 0===_?void 0:_.profile.name,type:"track",artist_uri:null===(h=e.firstArtist.items[0])||void 0===h?void 0:h.uri,artist_name:null===(p=e.firstArtist.items[0])||void 0===p?void 0:p.profile.name,media_type:"audio",externalResolvedUrl:null===(v=e.previews)||void 0===v||null===(k=v.audioPreviews.items[0])||void 0===k?void 0:k.url,anonymousPlaybackAllowed:Boolean(null===(g=e.previews)||void 0===g||null===(E=g.audioPreviews.items[0])||void 0===E?void 0:E.url),isPreview:!0,album_uri:null===(S=e.albumOfTrack)||void 0===S?void 0:S.uri,album_title:null===(y=e.albumOfTrack)||void 0===y?void 0:y.name,...(0,n.Jx)((null===(f=e.albumOfTrack)||void 0===f||null===(N=f.coverArt)||void 0===N?void 0:N.sources)||[])}}function r(e){var t,i,a,s,r,o,l,d;const c=e.tracks.items[0];if(!c)return;const u=c.track;return{uri:u.uri,title:u.name,subtitle:null===(t=u.artists.items[0])||void 0===t?void 0:t.profile.name,type:"track",album_uri:e.uri,album_title:e.name,artist_uri:null===(i=u.artists.items[0])||void 0===i?void 0:i.uri,artist_name:null===(a=u.artists.items[0])||void 0===a?void 0:a.profile.name,...(0,n.Jx)((null===(s=e.coverArt)||void 0===s?void 0:s.sources)||[]),media_type:"audio",externalResolvedUrl:null===(r=u.previews)||void 0===r||null===(o=r.audioPreviews.items[0])||void 0===o?void 0:o.url,anonymousPlaybackAllowed:Boolean(null===(l=u.previews)||void 0===l||null===(d=l.audioPreviews.items[0])||void 0===d?void 0:d.url),isPreview:!0}}},85399:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var n=i(25617),a=i(41412),s=i(56379),r=i(15449),o=i(38331),l=i(74878),d=i(45629),c=i(66031),u=i(9596);class m{constructor(){(0,n.Z)(this,"progressTimer",null)}static connectToStore(e,t){var i,n;d.Z.setDispatch(e),this.dispatch=e,this.getState=t;const a=this.getState();this.isReliabilityEnabled=null===(i=a.session)||void 0===i||null===(n=i.features)||void 0===n?void 0:n.isReliabilityEnabled}static subscribe(){d.Z.on(a.i.STATE_CHANGED,this.onStateChanged),d.Z.on(a.i.PLAYER_INITIALIZATION_FAILED,this.onPlayerInitializationFailed),d.Z.on(a.i.BUFFERING_START,this.onBufferingStart),d.Z.on(a.i.BUFFERING_END,this.onBufferingEnd),d.Z.on(a.i.PROGRESS,this.onProgress),d.Z.on(a.i.RECONNECTING,this.onReconnecting),d.Z.on(a.i.RECONNECTED,this.onReconnected),d.Z.on(a.i.ERROR,this.onError)}static subscribeConnect(){d.Z.on(a.i.LAST_ACTIVE_DEVICE_INFO_CHANGED,this.onLastActiveDeviceInfoChanged),d.Z.on(a.i.DEVICES_CHANGED,this.onDevicesChanged)}}(0,n.Z)(m,"onStateChanged",(e=>{m.dispatch((0,o.XB)(e.data.state))})),(0,n.Z)(m,"onPlayerInitializationFailed",(e=>{m.dispatch((0,r.cS)()),(0,u.Tb)(e.data.error),m.dispatch((0,o.qu)(e.data.error))})),(0,n.Z)(m,"onBufferingStart",(()=>{})),(0,n.Z)(m,"onBufferingEnd",(()=>{m.dispatch((0,o.qI)())})),(0,n.Z)(m,"onProgress",(e=>{var t,i;let{data:n}=e;const a=m.getState(),s=null===(t=a.playback)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.duration,r=n.position;c.O.setPosition(r),s-r<500&&m.dispatch((0,o.qZ)()),(e=>{var t,i,n,a,s;return(null===(t=e.playback)||void 0===t?void 0:t.initiatedPlayback)&&!(null!==(i=e.playback)&&void 0!==i&&i.heardAudio)&&(null===(n=e.playback)||void 0===n?void 0:n.current)&&!(null!==(a=e.playback)&&void 0!==a&&null!==(s=a.current)&&void 0!==s&&s.paused)})(a)&&m.dispatch((0,o.dt)())})),(0,n.Z)(m,"onReconnecting",(()=>m.dispatch((0,s.Uy)()))),(0,n.Z)(m,"onReconnected",(()=>m.dispatch((0,s.u_)()))),(0,n.Z)(m,"onError",(e=>{(0,u.Tb)(e.data.error),m.dispatch((0,o.qu)(e.data.error))})),(0,n.Z)(m,"onLastActiveDeviceInfoChanged",(e=>m.dispatch((0,l.$P)(e.data.deviceInfo)))),(0,n.Z)(m,"onDevicesChanged",(e=>m.dispatch((0,l.KC)(e.data.devices))))},45629:(e,t,i)=>{"use strict";i.d(t,{Z:()=>A});i(71756),i(59538);var n=i(15449),a=i(31815),s=i(68609),r=i(19496),o=i.n(r);const l=e=>{const t=o().getParser(e);return`web_player ${t.getOSName()||"not_applicable"} ${t.getOSVersion()};${t.getBrowserName().split(" ").join("_")} ${t.getBrowserVersion()};${window.matchMedia("(display-mode: standalone)").matches?"mobileInstall":"mobile"}`.toLowerCase()};var d=i(73168),c=i(23868),u=i(41412),m=i(27164),_=i(25617);var h=i(99167),p=i(76045),v=i(91094),k=i(19689),g=i(77067),E=i(38331),S=i(9596);const y=e=>{let{dispatch:t,event:i}=e;(0,S.Tb)(i.data);const a=i.data.error;switch(i.type){case u.i.PLAYER_INITIALIZATION_FAILED:if(navigator.webdriver)return;t((0,n.cS)());break;case u.i.ERROR:a.type===g.L.CONNECTAPI_CLIENT_NO_DEVICE&&t((0,n._R)());break;default:t((0,E.qu)(a))}};var f=i(51669),N=i(11721);const T=new class{constructor(){(0,_.Z)(this,"eventMap",new Map),(0,_.Z)(this,"on",((e,t)=>{const i=this.eventMap;let n;i.has(e)?n=i.get(e):(n=[],i.set(e,n)),n.indexOf(t)>=0||(this.target.on(e,t),n.push(t))})),(0,_.Z)(this,"removeListener",((e,t)=>{const i=this.eventMap;if(!i.has(e))return;const n=i.get(e);n.indexOf(t)<0||(this.target.removeListener(e,t),n.splice(n.indexOf(t),1))})),(0,_.Z)(this,"removeAllListeners",(()=>{this.eventMap&&this.target&&this.eventMap.forEach(((e,t)=>{e.forEach((e=>{this.target.removeListener(t,e)}))}))})),(0,_.Z)(this,"addAllListeners",(()=>{this.eventMap&&this.target&&this.eventMap.forEach(((e,t)=>{e.forEach((e=>{this.target.on(t,e)}))}))})),(0,_.Z)(this,"setTarget",(e=>{this.removeAllListeners(),this.target=e,this.addAllListeners()}))}},R=e=>{let{deviceType:t,options:i,productId:n}=e;return!i||Boolean(i.type&&t&&i.type!==t)||Boolean(i.productId&&n&&i.productId!==n)},A=(()=>{let e,t,r,o,_,g,E,S=!1;const A=function(){let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const b=l(window.navigator.userAgent),C="userAgent"in navigator&&!(0,s.P$)(navigator.userAgent);return e&&!R({deviceType:o,options:A,productId:E})||(e=Promise.resolve().then(i.bind(i,42990)).then((e=>{let{createHarmony:i}=e;E=(e=>{let{country:t,options:i}=e;return i.productId?i.productId:t===s.cn?d.K:d.G})({country:g,options:A});const l={id:null,randomizeId:!0,type:A.type||m.Y.SMARTPHONE,name:"Mobile Web Player",brand:"spotify",model:"mobile_web_player",platform_identifier:b,metadata:{product_id:E}};return r=(0,N.k)(),t=i({transport:r,client:{descriptor:l},streamer:{createPlayer:()=>document.createElement("audio"),disallowRobustnessValues:[c.n.SW_DECODE,c.n.EMPTY]},claimInactivePlayerStates:C,onlyLocalState:!1,autoActivateElement:!0}),o=A.type||m.Y.SMARTPHONE,T.setTarget(t),new Promise(((e,i)=>{t.on(u.i.LOCAL_PLAYER_ENABLED,(()=>{e(t),_&&_((0,k.D1)()),S=!0;try{if((0,f.d)()&&(0,f.j)()){(0,h.WJ)("playback_load_end");const e=(0,h.Oi)({markStart:"playback_load_start",markEnd:"playback_load_end",measureName:"time_to_playback_ready",keepEntries:!0}),[{duration:t}={}]=e;Boolean(t)&&(0,v.sQ)({metric_type:p.MetricTypes.TIMER,what:"playback-ready",value:p.Time.fromMillis(t).asNanos()}).catch((()=>({})))}}catch{}})),t.on(u.i.PLAYER_INITIALIZATION_FAILED,(e=>{y({dispatch:_,event:e})})),t.on(u.i.LOCAL_PLAYER_DISABLED,(e=>{i(new Error(e.type))})),t.on(u.i.AUTHENTICATION_ERROR,(e=>{y({dispatch:_,event:e})})),t.on(u.i.CONNECTION_ERROR,(e=>{y({dispatch:_,event:e})})),t.on(u.i.ERROR,(e=>{y({dispatch:_,event:e})})),t.on(u.i.MAX_LIST_ERRORS_REACHED,(e=>{y({dispatch:_,event:e})})),t.on(u.i.MAX_SUBSCRIPTIONS_REACHED,(e=>{y({dispatch:_,event:e})})),t.on(u.i.SERVICE_REGISTRATION_ERROR,(e=>{y({dispatch:_,event:e})})),t.on(u.i.UNRECOVERABLE_FAILURE,(e=>{y({dispatch:_,event:e})})),t.on(u.i.STOPPED_ON_BACKGROUND,(()=>{_((0,n.vC)(a.SY.BACKGROUND_PLAYBACK_ERROR))}))}))}))),e},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R({deviceType:o,options:e,productId:E})?async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=await A(e);return new Promise((e=>{i.once(u.i.LAST_ACTIVE_DEVICE_INFO_CHANGED,(()=>{e(i)})),t&&r.disconnect()}))}(e):t&&S?t:A(e)};return{getInstance:b,on:async(e,t)=>{await b(),T.on(e,t)},removeListener:async(e,t)=>{await b(),T.removeListener(e,t)},getLocalDeviceType:()=>o,setDispatch:e=>{_=e},setCountry:e=>{g=e}}})()},8065:(e,t,i)=>{"use strict";i.d(t,{U:()=>c,p:()=>l});var n=i(61740),a=i(78142),s=i(48357),r=i(9686),o=i(51841);function l(e,t,i){const n=(0,s.E)(e,t);return(0,r._b)(n(i))}const d=(e,t,i)=>{let{itemId:n,...a}=i;const s=a.location&&a.location.pathname||"",{dispatch:r}=t;return{...a,onLogInteraction:e=>{r(l(s,n,e))}}},c=e=>{const t=e.displayName||e.name||"Component",i=(0,a.ZZ)((0,o.N)((0,n.$j)(null,null,d)(e)));return i.displayName=`withInteractionLogger(${t})`,i}},66963:(e,t,i)=>{"use strict";i.d(t,{b:()=>u});var n=i(76045),a=i(91094),s=i(87132),r=i(98322);function o(e,t,i){try{(0,a.sQ)({metric_type:n.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:t,isFatal:i}}).catch((()=>({})))}catch(s){}}class l extends r.c{build(){const e=super.build();return e.onAfterSend=t=>{let i="unknown",r=!1;if(null!==e.endpointIdentifier&&(r=!0,i=`${e.method} ${e.hostIdentifier||"unknown-host"}::${e.endpointIdentifier}`),t)throw r&&o(i,JSON.stringify(t.status||0),JSON.stringify(0===(e.endpointIdentifier||"").indexOf("/me"))),s.m.fromResponse(t,e.method);if(r){o(i,"200","false");const t=Date.now()-(e.startTimestamp||0);!function(e,t,i){try{(0,a.sQ)({metric_type:n.MetricTypes.TIMER,what:"request-duration",value:i,tags:{endpoint:e,statusCode:t}}).catch((()=>({})))}catch(s){}}(i,"200",n.Time.fromMillis(t).asNanos())}},e}}var d=i(53425);let c=null;class u{static setSession(e){if(!e)return;const{accessToken:t}=e,i=this.getInstance();i.accessToken=t,t||i.resetPendingRequests()}static setLocale(e){this.getInstance().locale=e}static setMarket(e){this.getInstance().market=e}static resetInstance(){c=null}static getInstance(){return c||(c=this.createNew()),c}static createNew(){return new l(d.e)}}},73168:(e,t,i)=>{"use strict";i.d(t,{G:()=>n,K:()=>a});const n="*",a="1"},96730:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});i(71756);const n=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;const n=t.map((e=>{let t=e.width;return t||(t=64),{...e,width:t}})).sort(((e,t)=>e.width-t.width));for(const a of n)if(a.width>=i)return a.url;return null==t||null===(e=t[0])||void 0===e?void 0:e.url}},48357:(e,t,i)=>{"use strict";i.d(t,{E:()=>n});const n=(e,t)=>i=>{const{intent:n,type:a,targetUri:s,itemIdSuffix:r,pathNameOverride:o}=i,l=r?`${t}/${r}`:t,d=o||e;return{page:d.split(/\//).filter((e=>""!==e)).shift(),view_uri:d,action_intent:n,action_type:a,target_uri:s,item_id:l}}},42198:(e,t,i)=>{"use strict";i.d(t,{T:()=>r,e:()=>o});var n=i(59272),a=i(68609);const s=(e,t)=>{var i;if(!e.length||!t)return!1;const a=null===(i=(0,n.EC)(t))||void 0===i?void 0:i.id;return e.some((s=a,e=>{var t;return(null===(t=(0,n.EC)(e))||void 0===t?void 0:t.id)===s}));var s},r=(e,t)=>{var i;const n=null!==(i=null==e?void 0:e.items)&&void 0!==i?i:[];return s(n,t)},o=e=>{let{onDemandPlaylists:t,session:i}=e;return e=>(0,a.a)(i)||(e=>{var t;const i=null===(t=(0,n.EC)(e))||void 0===t?void 0:t.type;return i===n.URITypeMap.SHOW||i===n.URITypeMap.EPISODE})(e)||r(t,e)}},26721:(e,t,i)=>{"use strict";i.d(t,{y:()=>s});var n=i(19496),a=i.n(n);function s(){return a().getParser(window.navigator.userAgent).getOSName()||"not_applicable"}},66031:(e,t,i)=>{"use strict";i.d(t,{O:()=>s});i(59538);const n={position:void 0},a=new class{constructor(){this.topics={},this.lastUid=-1}subscribe(e,t){Object.prototype.hasOwnProperty.call(this.topics,e)||(this.topics[e]=[]);const i=++this.lastUid;if(!!0)throw new Error("Failed to create token");return this.topics[e].push({token:i,func:t}),i}unsubscribe(e){Object.keys(this.topics).forEach((t=>{this.topics[t].forEach(((i,n)=>{i.token===e&&this.topics[t].splice(n,1)}))}))}publish(e,t){Object.prototype.hasOwnProperty.call(this.topics,e)&&this.topics[e].forEach((e=>{e.func(t)}))}};class s{static subscribe(e,t){return a.subscribe(e,t)}static unsubscribe(e){a.unsubscribe(e)}static setPosition(e){n.position=e,a.publish("position",e)}static getPosition(){return n.position}}},16336:(e,t,i)=>{"use strict";i.d(t,{IM:()=>r,UL:()=>o,iZ:()=>s});i(71756),i(70238),i(45880);var n=i(43665);const a=(e,t,i)=>(i&&e.searchParams.set("t",i.toString()),t&&(e.searchParams.has("utm_source")||e.searchParams.set("utm_source",t)),e.searchParams.has("utm_medium")||e.searchParams.set("utm_medium","mobile"),e);function s(e){const t=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new URL("undefined"!=typeof location&&location.href?location.href:"https://open.spotify.com");let s=null;e?(s=new URL(e.toURL()),t&&i.searchParams.forEach(((e,t)=>{s.searchParams.set(t,e)}))):(s=i,t||(s.search="")),s.searchParams.delete("nd"),s.searchParams.delete("fallback"),s.searchParams.set("go","1");const r=(0,n.Z)("config");return"string"==typeof(null==r?void 0:r.correlationId)&&s.searchParams.append("sp_cid",r.correlationId),a(s,"spotify_web_player")}(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);return t.searchParams.set("fallback","getapp"),a(t,"spotify_web_player")}function r(){const e=new URL(`https://www.spotify.com/download${window.location.search}`);return e.searchParams.set("referrer","mwp"),e}function o(){return new URL(`https://spotify.link/RlzQUXrWCxb${window.location.search}`)}},27383:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>s});i(31781);const n="https://lite-images-i.scdn.co",a="https://i.scdn.co",s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e||"";if(e&&e.includes("spotify:image"))i=`${a}/image/${e.split(":")[2]}`;else if(e&&e.includes("spotify:mosaic")){i=`https://mosaic.scdn.co/300/${e.split(":").splice(2).join("")}`}return t?(e=>{if(e.startsWith("https://pl.scdn.co")){const t=e.split("/");return`${n}/image/${t[t.length-1]}`}return e.replace(a,n)})(i):i}},88177:(e,t,i)=>{"use strict";i.d(t,{A_:()=>m,ER:()=>a,FN:()=>o,hb:()=>c,n6:()=>s,pl:()=>_,rC:()=>h,tp:()=>l,vI:()=>u,zk:()=>d});var n=i(59272);function a(e){var t;const i=/track\/([a-z0-9]*)/i,n=i.exec(e)&&(null===(t=i.exec(e))||void 0===t?void 0:t[1]);return n?`spotify:track:${n}`:null}function s(e){var t;const i=null==e||null===(t=e.current_track)||void 0===t?void 0:t.artists;return i&&i[0]&&i[0].name||""}const r=e=>Boolean(e);function o(e){var t;return((null==e||null===(t=e.current_track)||void 0===t?void 0:t.artists)||[]).map((e=>e.name)).filter(r)}function l(e){var t;return(null==e||null===(t=e.current_track)||void 0===t?void 0:t.name)||""}function d(e){var t;return(null==e||null===(t=e.current_track)||void 0===t?void 0:t.duration_ms)||0}function c(e){var t;return(null==e||null===(t=e.current_track)||void 0===t?void 0:t.uri)||""}function u(e){const t=(0,n.EC)(c(e));return(null==t?void 0:t.type)===n.URITypeMap.AD||(null==t?void 0:t.type)===n.URITypeMap.APPLICATION}function m(e){const t=(0,n.EC)(c(e));return Boolean(t)&&(null==t?void 0:t.type)===n.URITypeMap.EPISODE}function _(e){var t;const i=null==e||null===(t=e.album)||void 0===t?void 0:t.images;if(!i||0===i.length)return"";const n=i.filter((e=>e.height<640&&e.height>64&&e));return i&&n[0]?n[0].url:i[0].url}function h(e){var t,i,n;return null==e||null===(t=e.current_track)||void 0===t||null===(i=t.artists)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.uri}},40014:(e,t,i)=>{"use strict";i.d(t,{F:()=>n,v:()=>a});let n=function(e){return e.small="small",e.medium="medium",e.large="large",e}({});const a=(e,t)=>{if(e&&e.length)switch(t){case n.small:{const t=e.filter((e=>!!(e.height&&e.height<300)&&e));return t.length?t[0]:e[0]}case n.medium:{const t=e.filter((e=>!!(e.height&&e.height<600&&e.height>64)&&e));return t.length?t[0]:e[0]}case n.large:{const t=e.filter((e=>!!(e.height&&e.height>600)&&e));return t.length?t[0]:e[0]}default:return e[0]}}},35875:(e,t,i)=>{"use strict";i.d(t,{p:()=>s});var n=i(59272),a=i(83474);const s=e=>{var t;switch(null===(t=(0,n.EC)(e))||void 0===t?void 0:t.type){case"artist":return a.p.ARTIST;case"track":return a.p.TRACK;case"playlist":case"playlist-v2":return a.p.PLAYLIST;case"album":return a.p.ALBUM;case"show":return a.p.SHOW;case"episode":return a.p.EPISODE;case"genre":return a.p.GENRE;case"profile":return a.p.USER;default:return a.p.UNKNOWN}}},51669:(e,t,i)=>{"use strict";i.d(t,{d:()=>a,j:()=>s});const n=()=>"performance"in window,a=()=>n()&&"measure"in window.performance,s=()=>n()&&"mark"in window.performance},68609:(e,t,i)=>{"use strict";i.d(t,{CQ:()=>l,I5:()=>n,JR:()=>r,P$:()=>o,VG:()=>a,a:()=>d,cn:()=>s,p5:()=>c});const n=e=>{var t;return"premium"===(null===(t=e.product)||void 0===t?void 0:t.catalogue)},a=e=>{var t;return"premium"===(null==e||null===(t=e.product)||void 0===t?void 0:t.product)},s="IN",r=e=>e.country===s,o=e=>e.includes("[FBAN")||e.includes("[FB_IAB"),l=e=>e.me?"from_token":e.country,d=e=>{var t,i;return Boolean(Number(null===(t=e.product)||void 0===t?void 0:t["on-demand"]))||Boolean(null===(i=e.features)||void 0===i?void 0:i.isReinventFreeEnabled)},c=e=>{var t;return!e||e.isAnonymous||!(null!==(t=e.features)&&void 0!==t&&t.isMWPAndPlaybackCapable)}},19394:(e,t,i)=>{"use strict";i.d(t,{OX:()=>m,g:()=>c,xr:()=>u});i(71756);var n=i(59272),a=i(47393),s=i(17249),r=i(64),o=i(93381),l=i(4637);const d=e=>e.preventDefault(),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{makeClickable:!1,enableI18nLocales:!1,isI18nAdditionalPagesEnabled:!1};const i=s.ag.getUrlLocale(),a=(0,n.EC)(e),l=(0,r.S9)({localeFeatureFlag:t.enableI18nLocales,entityFeatureFlag:t.isI18nAdditionalPagesEnabled,entity:null==a?void 0:a.type,urlLocale:i,type:"link"}),d=null==a?void 0:a.toURLPath(!0),c=(0,o.is)(d,i);return l?c:d},u=function(e,t){const i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{makeClickable:!1}).makeClickable?{}:{onClick:d};return(0,l.jsx)("a",{href:e,...i,children:t},`spotify-link-${e}`)},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{makeClickable:!1,enableI18nLocales:!1,isI18nAdditionalPagesEnabled:!1};return e.reduce(((e,i,n)=>{const r=[];return n>0&&r.push(s.ag.getSeparator()),r.push(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{makeClickable:!1,enableI18nLocales:!1,isI18nAdditionalPagesEnabled:!1};const n=c(e,i),s=i.makeClickable?{}:{onClick:d};return(0,l.jsx)(a.rU,{to:n||"/",...s,children:t},`spotify-link-${e}`)}(i.uri,i.name,t)),[...e,...r]}),[])}},31608:(e,t,i)=>{"use strict";i.d(t,{Aw:()=>a.Aw,cF:()=>o,yU:()=>r});var n=i(65481),a=i(87824);let s=function(e){return e.DEFAULT="default",e.A="a",e.CONTROL="control",e}({});(0,n.JP)({name:"enableAudiobooksGatedExperience",description:"Enable the gated experience on the Audiobook page",default:!1}),(0,n.JP)({name:"enablePathfinderBrowseCards",description:"Enable browse cards feature in search.",default:!1}),(0,n.JP)({name:"enableReinventFree",description:"Enable enable Reinvent Free",default:!1}),(0,n.JP)({name:"enableBlendParty",description:"Enable Blend Party on web experience",default:!1}),(0,n.JP)({name:"enableMobileWebPlayerTestProperty",description:"Dummy property for Experimentation Platform testing and PI",default:!1}),(0,n.JP)({name:"enableEntityReport",description:"Enable the report action on the context menu",default:!0}),(0,n.JP)({name:"enableAlbumReport",description:"Enable the report action on the context menu just for Albums",default:!1}),(0,n.JP)({name:"enableTrackReport",description:"Enable the report action on the context menu just for Tracks",default:!1}),(0,n.JP)({name:"enablePodcastEpisodeReport",description:"Enable the report action on the context menu just for Podcast Episodes",default:!1}),(0,n.JP)({name:"enablePodcastShowReport",description:"Enable the report action on the context menu just for Podcast Shows",default:!1}),(0,n.VL)({name:"premiumBannerTest",description:"render banner to sign up for premium on iOS",values:s,default:s.DEFAULT}),(0,n.JP)({name:"enablePremiumBanner",description:"Enable premium banner on home page for player first iOS experiment",default:!1});const r=(0,n.JP)({name:"enableGatedPodcastSubscriberIndicator",description:"Enable showing label indicating access (Subscriber/Purchased) for gated podcasts in show header",default:!1}),o=(0,n.JP)({name:"enableConcertsInterestedMobile",description:"Enable the interested button on concert pages",default:!1});(0,n.JP)({name:"enableMobileWebConcertFeedDateFilter",description:"Enable date filter on mobile Concert Feed",default:!1})},28140:(e,t,i)=>{"use strict";i.d(t,{z:()=>n});const n="ANONYMOUS_DEFER_PLAY_STATE"},56379:(e,t,i)=>{"use strict";i.d(t,{Uy:()=>o,d1:()=>a,u_:()=>r,zD:()=>s});var n=i(3232);function a(){return{type:n.xo}}function s(){return{type:n.VX}}function r(){return{type:n._X}}function o(){return{type:n.wf}}},3232:(e,t,i)=>{"use strict";i.d(t,{VX:()=>a,_X:()=>s,wf:()=>r,xo:()=>n});const n="DISCONNECTED",a="LOAD",s="RECONNECTED",r="RECONNECTING"},42214:(e,t,i)=>{"use strict";i.d(t,{Jd:()=>r,VX:()=>s,ob:()=>a});var n=i(89700);function a(e,t){return{type:n.NG,uri:e,strategy:t}}function s(e,t){return{type:n.Fk,response:t,uri:e}}function r(){return{type:n.E}}},75543:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r,g:()=>a});var n=i(89700);let a=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const s={track:{status:a.UNAVAILABLE}};const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.NG:return{...e,track:{...e.track,uri:t.uri,status:a.LOADING}};case n.Fk:return{...e,track:{data:t.response,uri:t.uri,status:a.LOADED}};case n.E:return{...e,track:{status:a.UNAVAILABLE}};default:return e}}},89700:(e,t,i)=>{"use strict";i.d(t,{E:()=>s,Fk:()=>a,NG:()=>n});const n="INTERNAL_LINK_RECOMMENDER_TRACK_REQUEST",a="INTERNAL_LINK_RECOMMENDER_TRACK_REQUEST_SUCCESS",s="INTERNAL_LINK_RECOMMENDER_TRACK_REQUEST_ERROR"},9686:(e,t,i)=>{"use strict";i.d(t,{Jb:()=>r,Nc:()=>a,_b:()=>s});var n=i(70283);function a(e){return{type:n.DC,data:e}}function s(e,t){return t?{type:n.Cp,logData:e,skipGoogleAnalytics:t}:{type:n.Cp,logData:e}}function r(e,t){return{type:n.vu,err:e,data:t}}},70283:(e,t,i)=>{"use strict";i.d(t,{Cp:()=>s,DC:()=>r,vu:()=>a,wl:()=>n});const n={CATEGORY:{CLICK:"click"},ACTIONS:{PLAY:"play",PAUSE:"pause",ADD_TO_LIBRARY:"add-to-library",REMOVE_FROM_LIBRARY:"remove-from-library"},LABEL:{TRACK_ROW:"track-list/row",BUTTON:"/button",PODCAST_TIMESTAMP_DESCRIPTION:"/podcast-description-timestamp",NOW_PLAYING_BAR:"now-playing-bar"}},a="GENERIC_ERROR",s="LOG_INTERACTION",r="LOG_PAGEVIEW"},40074:(e,t,i)=>{"use strict";i.d(t,{PA:()=>s,VR:()=>r,m:()=>a});var n=i(96639);function a(e){return{type:n.bF,uri:e}}function s(e,t){return{response:e,uri:t,type:n.Fn}}function r(){return{type:n.lP}}},96639:(e,t,i)=>{"use strict";i.d(t,{Fn:()=>a,bF:()=>n,lP:()=>s});const n="LYRICS_LOADING",a="LYRICS_LOADED",s="LYRICS_ERROR"},80580:(e,t,i)=>{"use strict";i.d(t,{yL:()=>r});var n=i(38331);const a=e=>{var t,i;return!(null==e||null===(t=e.connect)||void 0===t||null===(i=t.device)||void 0===i||!i.local)},s=e=>(e=>{var t,i;return!(null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i||!i.paused)&&a(e)})(e)||(e=>{var t,i;return!(null===(t=e.playback)||void 0===t||null===(i=t.current)||void 0===i||!i.paused||a(e))})(e)||(e=>{var t,i;return!(null!==(t=e.playback)&&void 0!==t&&null!==(i=t.current)&&void 0!==i&&i.paused||a(e))})(e),r=(e,t)=>{(e=>(e=>{var t,i;return!(null!==(t=e.playback)&&void 0!==t&&t.initiatedPlayback)&&(!(null===(i=e.playback)||void 0===i||!i.current)||(e=>{var t,i;return null===(null==e||null===(t=e.playback)||void 0===t?void 0:t.current)&&null===(null==e||null===(i=e.connect)||void 0===i?void 0:i.device)})(e))})(e)&&s(e))(e)&&t((0,n.zW)())}},78366:(e,t,i)=>{"use strict";i.d(t,{Wc:()=>T,ZP:()=>D});var n=i(59272),a=i(56379),s=i(3232),r=i(15449),o=i(25126),l=i(38331),d=i(41412),c=i(27164),u=i(45629),m=i(73168),_=i(88177),h=i(85399),p=i(68609),v=i(9686),k=i(80580),g=i(42198);let E,S,y,f,N;const T=15e3,R=e=>{let{session:t}=e;return(0,p.JR)(t)?m.K:m.G},A=e=>Math.round(1e3*e),b=e=>{var t,i,n,a,s,r;const{position:d}=e.data,c=null===(t=e.data)||void 0===t||null===(i=t.logData)||void 0===i?void 0:i.playContext,u=null===(n=e.data)||void 0===n||null===(a=n.logData)||void 0===a?void 0:a.displayTrack,m=E.getState(),_=null===(s=m.playback)||void 0===s?void 0:s.bufferingTrigger;if(null!=m&&null!==(r=m.playback)&&void 0!==r&&r.isBuffering){let e=!1;switch(_){case o.sn.seek:e=!0;break;case o.sn.skip:case o.sn.playUri:(f!==c||N!==u||S>d)&&(e=!0,f=c,N=u);break;case o.sn.progress:case o.sn.toggle:S<d&&(e=!0)}e&&E.dispatch((0,l.qI)())}S=d},C=e=>{var t,i,n;const a=e.getState(),{current:s}=a.playback;s&&(null!=a&&null!==(t=a.playback)&&void 0!==t&&null!==(i=t.current)&&void 0!==i&&i.paused||null!=a&&null!==(n=a.playback)&&void 0!==n&&n.isBuffering||(void 0!==S&&S===y?e.dispatch((0,l.Gr)(o.sn.progress)):y=S))},I=()=>"mediaSession"in navigator,L=e=>{const{url:t,width:i,height:n}=e;return{src:t,sizes:i&&n?`${i}x${n}`:void 0}},P=(e,t,i)=>{var a,s,r,o,d;if(!I())return;if(((e,t,i)=>{var n,a;if(!I())return;const s=null==i||null===(n=i.track_window)||void 0===n?void 0:n.current_track;if(!s)return;const{album:r,artists:o,name:l}=s,d=null!==(a=null==r?void 0:r.images)&&void 0!==a?a:[];navigator.mediaSession.metadata=new window.MediaMetadata({title:l||"",artist:(o||[]).map((e=>null==e?void 0:e.name)).join(e.getSeparator()),album:(null==r?void 0:r.name)||"",artwork:d.map(L)})})(e,0,i),o=null==i||null===(a=i.track_window)||void 0===a||null===(s=a.current_track)||void 0===s?void 0:s.uri,Boolean(o&&(null===(d=(0,n.EC)(o))||void 0===d?void 0:d.type)===n.URITypeMap.EPISODE))navigator.mediaSession.setActionHandler("nexttrack",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("seekforward",(e=>{let{seekOffset:i}=e;t.dispatch((0,l.ez)(i?A(i):T))})),navigator.mediaSession.setActionHandler("seekbackward",(e=>{let{seekOffset:i}=e;t.dispatch((0,l.NA)(i?A(i):T))}));else{var c,u;navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("seekbackward",null);const e=null!=i&&null!==(c=i.disallows)&&void 0!==c&&c.skipping_next?null:()=>t.dispatch((0,l.IV)());navigator.mediaSession.setActionHandler("nexttrack",e);const n=null!=i&&null!==(u=i.disallows)&&void 0!==u&&u.skipping_prev?null:()=>t.dispatch((0,l.N2)());navigator.mediaSession.setActionHandler("previoustrack",n)}navigator.mediaSession.setActionHandler("play",(()=>t.dispatch((0,l.Xh)()))),navigator.mediaSession.setActionHandler("pause",(()=>t.dispatch((0,l.Xh)())));const m=null!=i&&null!==(r=i.disallows)&&void 0!==r&&r.seeking?null:e=>{let{seekTime:i}=e;null!=i&&t.dispatch((0,l.O7)(A(i)))};navigator.mediaSession.setActionHandler("seekto",m)},D=e=>{let{enablePlayback:t,i18n:i}=e;return e=>m=>S=>{var y,f,N,T,A,L,D,O,F,w,x,M,U,j,B,G,V,Y,K;const H=e.getState();if(!t||H.session.isAnonymous)return m(S);const{current:W}=H.playback,q=null==W||null===(y=W.context)||void 0===y?void 0:y.uri,Q=null==H||null===(f=H.playback)||void 0===f||null===(N=f.current)||void 0===N||null===(T=N.track_window)||void 0===T||null===(A=T.current_track)||void 0===A||null===(L=A.album)||void 0===L?void 0:L.uri,$=u.Z.getLocalDeviceType()===c.Y.COMPUTER,z=Q&&q&&((0,n.hn)(q)||(0,n.RS)(q)),Z=(null==H||null===(D=H.entities)||void 0===D?void 0:D.items[(null==H||null===(O=H.playback)||void 0===O||null===(F=O.current)||void 0===F?void 0:F.context.uri)||""])||(null==H||null===(w=H.entities)||void 0===w?void 0:w.items[(null==H||null===(x=H.playback)||void 0===x||null===(M=x.current)||void 0===M||null===(U=M.track_window.current_track)||void 0===U?void 0:U.uri)||""]),X=Boolean("Audiobook"===(null==Z?void 0:Z.__typename)||"Chapter"===(null==Z?void 0:Z.__typename));switch(S.type){case s.VX:(e=>{let{dispatch:t,getState:i}=e;window.addEventListener("offline",(()=>{t((0,a.d1)())})),h.Z.connectToStore(t,i),h.Z.subscribe()})(e),(e=>{I()&&(navigator.mediaSession.setActionHandler("play",(()=>e.dispatch((0,l.Xh)()))),navigator.mediaSession.setActionHandler("pause",(()=>e.dispatch((0,l.Xh)()))))})(e),E=e,u.Z.on(d.i.PROGRESS,b),setInterval(C,500,e);break;case o.Nv:if(W&&W.paused&&null!=W&&null!==(j=W.disallows)&&void 0!==j&&j.resuming||W&&!W.paused&&null!=W&&null!==(B=W.disallows)&&void 0!==B&&B.pausing)break;W&&W.paused&&e.dispatch((0,l.Gr)(o.sn.toggle)),(0,k.yL)(H,e.dispatch),u.Z.getInstance({productId:R(H)}).then((t=>{t.togglePlay().catch((t=>{e.dispatch((0,l.qu)({...t,trigger:"toggle_play"}))}))}));break;case o.C7:if(null!=W&&null!==(G=W.disallows)&&void 0!==G&&G.skipping_prev)break;e.dispatch((0,l.Gr)(o.sn.skip)),(0,k.yL)(H,e.dispatch),u.Z.getInstance().then((t=>{var i,n;t.previousTrack(null==H||null===(i=H.connect)||void 0===i||null===(n=i.device)||void 0===n?void 0:n.id).catch((t=>{e.dispatch((0,l.qu)({...t,trigger:"previous_track"}))}))}));break;case o.zO:if(null!=W&&null!==(V=W.disallows)&&void 0!==V&&V.skipping_prev)break;e.dispatch((0,l.Gr)(o.sn.skip)),(0,k.yL)(H,e.dispatch),u.Z.getInstance().then((t=>{var i,n;t.smartPreviousTrack(null==H||null===(i=H.connect)||void 0===i||null===(n=i.device)||void 0===n?void 0:n.id).catch((t=>{e.dispatch((0,l.qu)({...t,trigger:"previous_track"}))}))}));break;case o.Dk:if(null!=W&&null!==(Y=W.disallows)&&void 0!==Y&&Y.skipping_next)break;if($&&Q){u.Z.getInstance({type:c.Y.SMARTPHONE}).then((e=>e.playURI(Q)));break}e.dispatch((0,l.Gr)(o.sn.skip)),(0,k.yL)(H,e.dispatch),u.Z.getInstance().then((t=>{t.nextTrack().catch((t=>{e.dispatch((0,l.qu)({...t,trigger:"next_track"}))}));(0,g.e)(H)(q)||e.dispatch((0,l.JI)())}));break;case o.$D:u.Z.getInstance().then((e=>e.toggleShuffle())).catch((t=>{e.dispatch((0,l.qu)({...t,trigger:"toggle_shuffle"}))}));break;case o.uC:u.Z.getInstance().then((e=>e.cycleRepeatMode())).catch((t=>{e.dispatch((0,l.qu)({...t,trigger:"cycle_repeat_mode"}))}));break;case o.tG:{var J;const t=S;if(null!=W&&null!==(J=W.disallows)&&void 0!==J&&J.seeking)break;e.dispatch((0,l.Gr)(o.sn.seek)),u.Z.getInstance().then((e=>{e.seek(t.position)}));break}case o.kS:{var ee,te,ie,ne;const t=S,i=null==H||null===(ee=H.playback)||void 0===ee||null===(te=ee.current)||void 0===te||null===(ie=te.context)||void 0===ie?void 0:ie.uri,a=null==H?void 0:H.session;!(0,p.a)(a)&&null!=H&&null!==(ne=H.playback)&&void 0!==ne&&ne.initiatedPlayback&&(0,n.U4)(t.uri,null!=i?i:"")||e.dispatch((0,l.Gr)(o.sn.playUri)),(0,k.yL)(H,e.dispatch),u.Z.getInstance({productId:R(H),type:t.deviceType}).then((i=>{i.playURI(t.uri,t.deviceId,t.options).then((()=>{const t=e.getState(),{modal:i}=t.ui;i||e.dispatch((0,r.iv)())})).catch((t=>{var i,n;null!==(i=e.getState())&&void 0!==i&&null!==(n=i.playback)&&void 0!==n&&n.isBuffering&&e.dispatch((0,l.qI)()),e.dispatch((0,l.qu)({...t,trigger:"play_uri"}))}))}));break}case o.v5:$&&u.Z.getInstance({type:c.Y.SMARTPHONE}).then((e=>e.playURI(Q))),z&&!X&&u.Z.getInstance().then((e=>{e.playURI(Q)}));break;case o.mC:((e,t,i)=>{var n,a,s,o,l,d;const c=t.getState(),{current:u}=c.playback;if(!i.state)return void t.dispatch((0,r.Gr)());const m=null==i||null===(n=i.state)||void 0===n?void 0:n.track_window;(null==u||null===(a=u.track_window)||void 0===a||null===(s=a.current_track)||void 0===s?void 0:s.uri)!==(null===(o=i.state)||void 0===o||null===(l=o.track_window)||void 0===l||null===(d=l.current_track)||void 0===d?void 0:d.uri)&&((0,_.vI)(m)&&t.dispatch((0,r.rf)()),P(e,t,i.state))})(i,e,S);break;case o.RN:null!=H&&null!==(K=H.playback)&&void 0!==K&&K.heardAudio||setTimeout((()=>{var t,i;null!==(t=e.getState())&&void 0!==t&&null!==(i=t.playback)&&void 0!==i&&i.heardAudio||e.dispatch((0,v.Jb)({type:"HEARD_AUDIO_TIMEOUT_ERROR"}))}),12e3);break;case o.Eb:u.Z.getInstance().then((e=>{e.seekForward(S.time)}));break;case o.km:u.Z.getInstance().then((e=>{e.seekBackward(S.time)}))}return m(S)}}},51871:(e,t,i)=>{"use strict";i.d(t,{C:()=>a});var n=i(8875);function a(e){return{type:n.x,landingUri:e}}},8875:(e,t,i)=>{"use strict";i.d(t,{x:()=>n});const n="SET_LANDING_URI"},38331:(e,t,i)=>{"use strict";i.d(t,{F:()=>o,Gr:()=>s,IV:()=>_,JI:()=>N,K$:()=>k,N2:()=>u,NA:()=>f,O7:()=>v,SQ:()=>m,XB:()=>d,Xh:()=>c,Yj:()=>h,dt:()=>E,ez:()=>y,fX:()=>p,qI:()=>r,qZ:()=>g,qu:()=>l,zW:()=>S});var n=i(27164),a=i(25126);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.sn.none;return{type:a.$b,trigger:e}}function r(){return{type:a.im}}function o(e){return{type:a.hw,err:e}}function l(e){return{type:a.EE,err:e}}function d(e){return{type:a.mC,state:e}}function c(e){return{type:a.Nv,label:e}}function u(){return{type:a.zO}}function m(){return{type:a.C7}}function _(){return{type:a.Dk}}function h(){return{type:a.$D}}function p(){return{type:a.uC}}function v(e){return{type:a.tG,position:e}}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.Y.SMARTPHONE,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return{type:a.kS,uri:e,deviceId:t,options:i,deviceType:s,audioFileMetadata:r,label:o}}function g(){return{type:a.v5}}function E(){return{type:a.zV}}function S(){return{type:a.RN}}function y(e){return{type:a.Eb,time:e}}function f(e){return{type:a.km,time:e}}function N(){return{type:a.Sp,hasSkippedThisSession:!0}}},25126:(e,t,i)=>{"use strict";i.d(t,{$D:()=>m,$b:()=>n,C7:()=>d,Dk:()=>u,EE:()=>r,Eb:()=>E,Nv:()=>l,RN:()=>g,Sp:()=>y,hw:()=>s,im:()=>a,kS:()=>p,km:()=>S,mC:()=>o,sn:()=>f,tG:()=>h,uC:()=>_,v5:()=>v,zO:()=>c,zV:()=>k});const n="BUFFERING_START",a="BUFFERING_END",s="PLAYER_ERROR",r="HARMONY_ERROR",o="STATE_CHANGED",l="TOGGLE_PLAY",d="PREV_TRACK",c="SMART_PREVIOUS_TRACK",u="NEXT_TRACK",m="TOGGLE_SHUFFLE",_="CYCLE_REPEAT_MODE",h="SEEK",p="PLAY_URI",v="TRACK_END",k="HEARD_AUDIO",g="INITIATED_PLAYBACK",E="SEEK_FORWARD",S="SEEK_BACKWARD",y="HAS_SKIPPED_THIS_SESSION";let f=function(e){return e.playUri="play_uri",e.skip="skip",e.seek="seek",e.toggle="toggle",e.progress="progress",e.none="none",e}({})},9923:(e,t,i)=>{"use strict";i.d(t,{$p:()=>_,Dh:()=>d,Dw:()=>A,Jv:()=>c,Kh:()=>a,MD:()=>u,OW:()=>N,P7:()=>p,RU:()=>m,St:()=>h,TF:()=>S,Tv:()=>R,Ub:()=>f,VB:()=>l,Vd:()=>E,Wp:()=>v,YW:()=>k,aL:()=>T,dV:()=>r,fE:()=>o,lT:()=>s,oU:()=>b,qp:()=>g,sY:()=>y,xk:()=>C});var n=i(46804);function a(e,t){return{type:n.dK,uri:e,data:t}}function s(e,t){return{type:n.JI,uri:e,data:t}}function r(e){return{type:n.OK,uri:e}}function o(e,t){return{type:n.nF,uri:e,showAccessInfo:t}}function l(e){return{type:n.NJ,error:e}}function d(e){return{type:n.O7,uri:e}}function c(e,t){return{type:n.mW,uri:e,data:t}}function u(e,t){return{type:n.l$,uri:e,data:t}}function m(e){return{type:n.er,error:e}}function _(e){return{type:n.Gw,uri:e}}function h(e,t){return{type:n.Fu,uri:e,data:t}}function p(e){return{type:n.uX,error:e}}function v(e){return{type:n.qh,uri:e}}function k(e,t){return{type:n.ZA,uri:e,options:t}}function g(e,t){return{type:n.U,uri:e,data:t}}function E(e){return{type:n.aK,error:e}}function S(e){return{type:n.J7,error:e}}function y(e){return{type:n.bE,uri:e}}function f(e,t){return{type:n.Al,uri:e,isLiked:t}}function N(e,t,i){return{type:n.cl,title:e,text:t,url:i}}function T(e){return{type:n.cp,error:e}}function R(){return{type:n.En}}function A(e){return{type:n.VY,uri:e}}function b(e,t){return{type:n.zm,uri:e,isLiked:t}}function C(e){return{type:n.$G,message:e}}},46804:(e,t,i)=>{"use strict";i.d(t,{$G:()=>T,Al:()=>g,En:()=>y,Es:()=>p,Fu:()=>r,Gw:()=>a,J7:()=>v,JI:()=>C,NJ:()=>_,O7:()=>R,OK:()=>u,U:()=>c,VY:()=>f,ZA:()=>l,aK:()=>d,bE:()=>k,cl:()=>E,cp:()=>S,dK:()=>n,er:()=>I,l$:()=>A,mW:()=>b,mk:()=>L,nF:()=>m,qh:()=>o,uX:()=>s,yI:()=>h,zm:()=>N});const n="ENTITY_PLAYLIST_REQUEST_SUCCESS",a="ENTITY_VIEW_REQUEST",s="ENTITY_VIEW_REQUEST_ERROR",r="ENTITY_VIEW_REQUEST_SUCCESS",o="ENTITY_CLEAR_SINGLE",l="USER_NEXT_PUBLIC_PLAYLISTS_REQUEST",d="USER_NEXT_PUBLIC_PLAYLISTS_ERROR",c="USER_NEXT_PUBLIC_PLAYLISTS_SUCCESS",u="SHOW_ACCESS_INFO_REQUEST",m="SHOW_ACCESS_INFO_REQUEST_SUCCESS",_="SHOW_ACCESS_INFO_REQUEST_ERROR",h="HAS_PREVIOUS_LIKES_SUCCESS",p="IS_BANNED_SUCCESS",v="IS_LIKED_ERROR",k="IS_LIKED_REQUEST",g="IS_LIKED_SUCCESS",E="SHARE_REQUEST",S="SHARE_REQUEST_ERROR",y="SHARE_REQUEST_SUCCESS",f="TOGGLE_LIKE_REQUEST",N="TOGGLE_LIKE_SUCCESS",T="CHECKOUT_BOOK_ERROR",R="TRACK_CLOUD_REQUEST",A="TRACK_CLOUD_REQUEST_SUCCESS",b="TRACK_ENTITY_VIEW_REQUEST_SUCCESS",C="ALBUM_ENTITY_VIEW_REQUEST_SUCCESS",I="TRACK_CLOUD_REQUEST_ERROR",L="SEO_EXPERIMENT_REQUEST_SUCCESS"},98909:(e,t,i)=>{"use strict";i.d(t,{Kd:()=>r,QX:()=>s,sd:()=>a});var n=i(31148);function a(e){return{type:n.xU,uri:e}}function s(e){return{type:n.Fr,response:e}}function r(){return{type:n.OV}}},31148:(e,t,i)=>{"use strict";i.d(t,{Fr:()=>a,OV:()=>s,mk:()=>r,xU:()=>n});const n="RICH_TRACK_ARTISTS_DATA_REQUEST",a="RICH_TRACK_ARTISTS_DATA_REQUEST_SUCCESS",s="RICH_TRACK_ARTISTS_DATA_REQUEST_ERROR",r="SEO_EXPERIMENT_REQUEST_SUCCESS"},40908:(e,t,i)=>{"use strict";i.d(t,{A:()=>a,m:()=>s});var n=i(39411);function a(e,t){return{type:n.nk,location:e,routerAction:t}}function s(e){return{type:n.KS,referrer:e}}},39411:(e,t,i)=>{"use strict";i.d(t,{KS:()=>a,hI:()=>s,nk:()=>n});const n="LOCATION_CHANGE",a="HISTORY_REFERRER";let s=function(e){return e.HOME="home",e.DEEPLINK="deeplink",e.SEARCH="search",e.OTHER="other",e}({})},67121:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s});var n=i(38185),a=i(49607);function s(e,t){var i,s;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.values(a.Il.fromCSS(n.k77).rgb).join(",");return t&&null!==(i=null===(s=e.colorExtraction.colors[t])||void 0===s?void 0:s.join(","))&&void 0!==i?i:r}},88437:(e,t,i)=>{"use strict";i.d(t,{Ls:()=>r,Tz:()=>a,ls:()=>s});var n=i(37485);function a(){return{type:n.y}}function s(){return{type:n.$x}}function r(e){return{type:n.MZ,productState:e}}},37485:(e,t,i)=>{"use strict";i.d(t,{$x:()=>a,MZ:()=>s,co:()=>o,nn:()=>r,y:()=>n});const n="LOGOUT_REQUEST",a="LOGOUT_SUCCESS",s="REQUEST_USER_PRODUCT_SUCCESS",r="SET_FEATURE_FLAGS",o="REQUEST_INITIAL_BASE_DATA_SUCCESS"},54517:(e,t,i)=>{"use strict";i.d(t,{C:()=>r,j:()=>s});var n=i(25349);let a;const s=()=>({type:n._q}),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.pC.default,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o=>{o({type:n.yj,message:e,toastType:t,toastAction:r}),i&&(clearTimeout(a),a=setTimeout((()=>o(s())),3e3))}}},25349:(e,t,i)=>{"use strict";i.d(t,{NN:()=>o,_d:()=>r,_q:()=>n,pC:()=>s,yj:()=>a});const n="CLEAR_TOAST",a="SHOW_TOAST";let s=function(e){return e.default="default",e.error="error",e}({}),r=function(e){return e.unlikedSong="unlikedSong",e.likedSong="likedSong",e}({});const o={DEFAULT:s.default,ERROR:s.error}},87044:(e,t,i)=>{"use strict";i.d(t,{a:()=>n});let n=function(e){return e.artists="artist",e.songs="song",e.audiobook="audiobook",e.playlists="playlist",e.albums="album",e.podcasts="show",e.episodes="episode",e.genre="genre",e.basic="results",e.recent="recent",e.users="user",e}({})},73386:(e,t,i)=>{"use strict";i.d(t,{Eg:()=>_,R_:()=>c,Ri:()=>a,Xt:()=>r,YM:()=>d,cL:()=>u,dw:()=>s,eJ:()=>m,hk:()=>l,lq:()=>o});var n=i(87044);const a=e=>(null==e?void 0:e.type)===n.a.songs,s=e=>(null==e?void 0:e.type)===n.a.audiobook,r=e=>(null==e?void 0:e.type)===n.a.artists,o=e=>(null==e?void 0:e.type)===n.a.playlists,l=e=>(null==e?void 0:e.type)===n.a.albums,d=e=>(null==e?void 0:e.type)===n.a.podcasts,c=e=>(null==e?void 0:e.type)===n.a.episodes,u=e=>(null==e?void 0:e.type)===n.a.genre,m=e=>(null==e?void 0:e.type)===n.a.users,_=e=>a(e)||s(e)||r(e)||o(e)||l(e)||d(e)||c(e)||u(e)||m(e)},15449:(e,t,i)=>{"use strict";i.d(t,{D8:()=>h,Gr:()=>r,Wr:()=>_,_R:()=>c,a6:()=>p,bc:()=>m,cS:()=>d,gZ:()=>l,iv:()=>a,n$:()=>o,rf:()=>s,vC:()=>u});var n=i(31815);function a(){return{type:n.z2}}function s(){return{type:n.Vz}}function r(){return{type:n.WF}}function o(){return{type:n.RJ}}function l(){return{type:n.aR}}function d(){return{type:n.J_}}function c(){return{type:n.fM}}function u(e,t){return{type:n.yT,id:e,bool:!0,context:t}}function m(){return u(n.SY.LOGIN_TO_LISTEN)}function _(e){return{type:n.Ab,id:e,bool:!1}}function h(){return u(n.SY.SIGNUP_TO_LISTEN)}function p(e){return u(n.SY.ADD_TO_PLAYLIST,e)}},31815:(e,t,i)=>{"use strict";i.d(t,{A6:()=>_,Ab:()=>u,J_:()=>l,RA:()=>m,RJ:()=>r,SY:()=>h,Vz:()=>a,WF:()=>s,aR:()=>o,fG:()=>p,fM:()=>d,yT:()=>c,z2:()=>n});const n="SHOW_NOW_PLAYING_BAR",a="SHOW_NOW_PLAYING_VIEW",s="HIDE_NOW_PLAYING_VIEW",r="SHOW_CONNECT",o="HIDE_CONNECT",l="PROTECTED_CONTENT_DISALLOW",d="HARMONY_UNRECOVERABLE_ERROR",c="SHOW_DIALOG",u="HIDE_DIALOG",m="SHOW_OVERFLOW_MENU",_="HIDE_OVERFLOW_MENU";let h=function(e){return e.CONNECT="CONNECT",e.A2HS="A2HS",e.SIGNUP="SIGNUP",e.LOGIN_TO_LISTEN="LOGIN_TO_LISTEN",e.SIGNUP_TO_LISTEN="SIGNUP_TO_LISTEN",e.BACKGROUND_PLAYBACK_ERROR="BACKGROUND_PLAYBACK_ERROR",e.ERROR_BOUNDARY="ERROR_BOUNDARY",e.RATING="RATING",e.ADD_TO_PLAYLIST="ADD_TO_PLAYLIST",e.AUDIOBOOK_CONSUMPTION_CAP="AUDIOBOOK_CONSUMPTION_CAP",e}({}),p=function(e){return e.NOW_PLAYING_BAR="now_playing_bar",e.OVERFLOW_MENU="overflow_menu",e.CONNECT="connect",e}({})},78986:(e,t,i)=>{"use strict";i.d(t,{Bi:()=>s,Og:()=>r,oz:()=>a,vN:()=>n});const n=e=>"Album"===(null==e?void 0:e.__typename),a=e=>"NotFound"===(null==e?void 0:e.__typename),s=e=>e,r=e=>!!e&&"Album"===e.__typename},48363:(e,t,i)=>{"use strict";i.d(t,{O:()=>n});const n=e=>!!e&&"Artist"===e.__typename},58582:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});let n=function(e){return e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.EPISODE="episode",e.GENRE="genre",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.RADIO="radio",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes",e}({})},52633:(e,t,i)=>{"use strict";i.d(t,{i:()=>n});const n=e=>!!e&&"Playlist"===e.__typename},56143:(e,t,i)=>{"use strict";i.d(t,{qE:()=>h,ul:()=>_,JM:()=>p});var n=i(59496),a=i(84875),s=i.n(a);const r={PlayButton:"IeLnf2wUHVKqxhzBcBoM",primary:"KOoUMuC7IxI_1Pi4r4m5",secondary:"VgweZbpfbMSfOcTeGNj_",transparent:"D7HQ50jRBGU8qaAGHRTw",lockIcon:"f4XfIkH9v3tBTnI8AEDj"};var o=i(17249),l=i(44969),d=i(28321),c=i(28661),u=i(71062),m=i(4637);let _=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({}),h=function(e){return e[e.xxs=16]="xxs",e[e.xs=32]="xs",e[e.sm=40]="sm",e[e.md=48]="md",e[e.lg=56]="lg",e[e.xl=64]="xl",e}({});const p=n.memo((0,n.forwardRef)((function(e,t){const{onClick:i,isPlaying:n,locked:a,version:p=_.primary,size:v=h.sm,disabled:k=!1,children:g,ariaPauseLabel:E,ariaPlayLabel:S,isLoading:y}=e,f=v===h.lg?24:16,N={"--size":`${v}px`};let T=o.ag.get("play");T=a?o.ag.get("mwp.header.content.unavailable"):n?null!=E?E:o.ag.get("pause"):null!=S?S:o.ag.get("play");const R=n?(0,m.jsx)(l.k,{"aria-hidden":!0}):(0,m.jsx)(d.J,{"aria-hidden":!0});return(0,m.jsx)(u.w,{label:T,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("button",{style:N,className:s()(r.PlayButton,r[p],"encore-bright-accent-set"),onClick:e=>{const{currentTarget:t,detail:n}=e;i(e),n>0&&t&&t.blur()},disabled:k||y,"aria-label":T,ref:t,"data-testid":"play-button",children:[R,a&&(0,m.jsx)(c.Z,{color:"black",className:r.lockIcon,iconSize:f})]}),g]})})})))},76490:(e,t,i)=>{"use strict";i.d(t,{u:()=>_,f:()=>h});var n=i(59496),a=i(17249),s=i(28321),r=i(28661),o=i(44969),l=i(99730),d=i(17409);const c="PFgcCoJSWC3KjhZxHDYH";var u=i(71062),m=i(4637);let _=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({});const h=n.memo((0,n.forwardRef)((function(e,t){const{onClick:i,isPlaying:n,locked:h,version:p=_.primary,size:v="md",disabled:k=!1,children:g,ariaPauseLabel:E,ariaPlayLabel:S,isLoading:y}=e,f=e=>{const{currentTarget:t,detail:n}=e;i(e),n>0&&t&&t.blur()};let N=a.ag.get("play"),T=s.J;h?(N=a.ag.get("mwp.header.content.unavailable"),T=r.Z):n?(N=null!=E?E:a.ag.get("pause"),T=o.k):N=null!=S?S:N;return(0,m.jsx)(u.w,{label:a.ag.get("play-button.label"),children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:c,children:(()=>{const e={iconOnly:T,buttonSize:v,onClick:f,disabled:k||y,"aria-label":N,ref:t,"data-testid":"play-button"};switch(p){case _.secondary:return(0,m.jsx)(l.D,{...e,colorSet:"invertedLight"});case _.transparent:return(0,m.jsx)(d.o,{...e,semanticColor:"textBase"});default:return(0,m.jsx)(l.D,{...e})}})()}),g]})})})))},88652:(e,t,i)=>{"use strict";i.d(t,{Np:()=>o,du:()=>u,qT:()=>d});i(59538),i(71756);var n=i(59496),a=i(4637);const s={isOpen:!1,modifierKeyHeld:!1,isTouching:!1,menu:null,event:null,triggerElement:null},r=(0,n.createContext)(s);function o(){const e=n.useContext(r);if(void 0===e)throw new Error("useContextMenuState must be used within a ContextMenuProvider");return e}const l=(0,n.createContext)((()=>{}));function d(){const e=n.useContext(l);if(void 0===e)throw new Error("useContextMenuDispatch must be used within a ContextMenuProvider");return e}function c(e,t){switch(t.type){case"open":return{...e,menu:t.menu,isOpen:!0,event:t.event,triggerElement:t.triggerElement};case"toggle":return{...e,isOpen:!e.isOpen,menu:e.isOpen?null:t.menu,event:t.event,triggerElement:t.triggerElement};case"modifierKeyHeld":return{...e,modifierKeyHeld:t.value};case"touch":return{...e,isTouching:t.value};case"close":return{...s};default:throw new Error("Unknown action recieved!")}}const u=e=>{let{children:t}=e;const[i,o]=(0,n.useReducer)(c,s);return(0,a.jsx)(l.Provider,{value:o,children:(0,a.jsx)(r.Provider,{value:i,children:t})})}},58069:(e,t,i)=>{"use strict";i.d(t,{k:()=>r});i(31781);var n=i(24377);const a="rTMkDBDp47Eo12ZEQv4U";var s=i(4637);const r=e=>{let{copyrights:t,courtesyLine:i}=e;const r=(t||[]).map(((e,t)=>{const i=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let a;return a="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(n.D,{as:"p",variant:"finale",dir:"auto",children:`${a} ${i}`},t)}));return i&&r.unshift((0,s.jsx)(n.D,{as:"p",variant:"finale",dir:"auto",children:i},r.length)),(0,s.jsx)("div",{className:a,children:r})}},30730:(e,t,i)=>{"use strict";i.d(t,{O:()=>E,K:()=>g});var n=i(59496),a=i(84875),s=i.n(a),r=i(18979),o=i(90321);const l="g3kBhX1E4EYEC2NFhhxG",d="O5_0cReFdHe81E0xFAD1",c="H71KtIrytVayf_dFofu7",u="SBpny8HrUTBzSjk7Vtk1",m="CxurIfvXVb_TqGF4q8Yf",_="OadpZJiOaGfX6Qp4j6n5",h="iJp40IxKg6emF6KYJ414",p="vreceNX3ABcxyddeS83B";var v=i(35205),k=i(4637);let g=function(e){return e[e.ROUNDED_CORNERS=0]="ROUNDED_CORNERS",e[e.CIRCLE=1]="CIRCLE",e[e.SQUARE=2]="SQUARE",e}({});const E=(0,n.memo)((function(e){var t,i,n,a;let{loadingMode:E="lazy",fadeIn:S=!1,type:y,title:f,images:N=[],shape:T=g.SQUARE,size:R=o.m$.SIZE_56,iconSize:A,className:b,onContextMenu:C=(()=>{}),onTouchStart:I=(()=>{}),onTouchEnd:L=(()=>{}),color:P}=e;const D=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>Boolean(e.width))),t=e.filter((e=>e.url&&e.width&&e.width>=o.eM[o.m$.SIZE_56])).sort(((e,t)=>e.width-t.width));return t.length?t:e}(N),O=null!==(t=null!==(i=null===(n=D[0])||void 0===n?void 0:n.url)&&void 0!==i?i:null===(a=N[0])||void 0===a?void 0:a.url)&&void 0!==t?t:"",F=D.map((e=>{let{url:t,width:i}=e;return`${t} ${i/2}w, ${t} ${i}w`})).join(", ");return(0,k.jsx)("div",{className:s()(p,b,{[_]:T===g.CIRCLE,[m]:T===g.SQUARE,[l]:o.pj.includes(R),[d]:o.wL.includes(R),[c]:o.VZ.includes(R),[u]:o.B_.includes(R)}),onContextMenu:C,onTouchStart:I,onTouchEnd:L,style:{width:`${o.eM[R]}px`,height:`${o.eM[R]}px`,"--extracted-entity-color":P},children:(0,k.jsx)(r.E,{loading:E,fadeIn:S,src:O,alt:f,ariaHidden:!0,className:s()(h),srcSet:F||void 0,testid:"entity-image",children:(0,k.jsx)(v.j,{title:f,type:y,iconSize:A})})})}))},35205:(e,t,i)=>{"use strict";i.d(t,{j:()=>d});var n=i(84875),a=i.n(n);const s="Ozitxbqs1vcOukDz3GDw",r="AeEoI6ueagbJtaHl2cRd";var o=i(83349),l=i(4637);const d=e=>{let{title:t,type:i,className:n,iconSize:d}=e;return(0,l.jsx)("div",{"aria-label":t,className:a()(s,n),children:(0,l.jsx)(o.t,{type:i,className:a()({[r]:!d}),iconSize:d})})}},90321:(e,t,i)=>{"use strict";i.d(t,{B_:()=>l,VZ:()=>o,eM:()=>a,m$:()=>n,pj:()=>s,wL:()=>r});let n=function(e){return e[e.SIZE_48=0]="SIZE_48",e[e.SIZE_56=1]="SIZE_56",e[e.SIZE_64=2]="SIZE_64",e[e.SIZE_72=3]="SIZE_72",e[e.SIZE_80=4]="SIZE_80",e[e.SIZE_96=5]="SIZE_96",e[e.SIZE_104=6]="SIZE_104",e[e.SIZE_112=7]="SIZE_112",e[e.SIZE_120=8]="SIZE_120",e[e.SIZE_128=9]="SIZE_128",e[e.SIZE_136=10]="SIZE_136",e[e.SIZE_144=11]="SIZE_144",e[e.SIZE_152=12]="SIZE_152",e[e.SIZE_160=13]="SIZE_160",e[e.SIZE_168=14]="SIZE_168",e[e.SIZE_176=15]="SIZE_176",e[e.SIZE_184=16]="SIZE_184",e[e.SIZE_200=17]="SIZE_200",e[e.SIZE_232=18]="SIZE_232",e}({});const a={[n.SIZE_48]:48,[n.SIZE_56]:56,[n.SIZE_64]:64,[n.SIZE_72]:72,[n.SIZE_80]:80,[n.SIZE_96]:96,[n.SIZE_104]:104,[n.SIZE_112]:112,[n.SIZE_120]:120,[n.SIZE_128]:128,[n.SIZE_136]:136,[n.SIZE_144]:144,[n.SIZE_152]:152,[n.SIZE_160]:160,[n.SIZE_168]:168,[n.SIZE_176]:176,[n.SIZE_184]:184,[n.SIZE_200]:200,[n.SIZE_232]:232},s=[n.SIZE_48,n.SIZE_56,n.SIZE_64],r=[n.SIZE_72,n.SIZE_80,n.SIZE_96,n.SIZE_104,n.SIZE_112,n.SIZE_120,n.SIZE_128],o=[n.SIZE_136,n.SIZE_144,n.SIZE_152,n.SIZE_160,n.SIZE_168,n.SIZE_176],l=[n.SIZE_184,n.SIZE_200,n.SIZE_232]},83349:(e,t,i)=>{"use strict";i.d(t,{t:()=>m});var n=i(46394),a=i(72527),s=i(87938),r=i(61339),o=i(39949),l=i(17694),d=i(54352),c=i(83474),u=i(4637);function m(e){let{type:t,...i}=e,m=s.U;switch(t){case"folder":case c.p.FOLDER:m=n.P;break;case"album":case c.p.ALBUM:m=r.c;break;case"artist":case c.p.ARTIST:m=o.a;break;case"show":case"episode":case c.p.SHOW:case c.p.EPISODE:m=l.J;break;case"user":case c.p.USER:m=d.f;break;case"book":case"audiobook":case c.p.AUDIOBOOK:m=a.P;break;case"playlist":case c.p.PLAYLIST:default:m=s.U}return(0,u.jsx)(m,{"aria-hidden":"true","data-testid":t,...i})}},71062:(e,t,i)=>{"use strict";i.d(t,{w:()=>s});var n=i(42490),a=i(4637);const s=e=>{let{label:t,children:i,renderInline:s,showDelay:r,disabled:o,placement:l="top",labelClassName:d}=e;return(0,a.jsx)(n.Nt,{action:"open",trigger:"hover-or-focus",placement:l,content:o?null:(0,a.jsx)(n.xX,{showDelay:r,className:d,children:(0,a.jsx)("span",{id:"hover-or-focus-tooltip",role:"tooltip",children:t})}),renderInline:s,children:i})}},6336:(e,t,i)=>{"use strict";i.d(t,{N:()=>r});var n=i(17249),a=i(53111),s=i(4637);const r=e=>{let{className:t,fullText:i=!1}=e;return(0,s.jsx)(a.V,{ariaLabel:n.ag.get("card.a11y.explicit"),text:i?n.ag.get("card.a11y.explicit"):"E",className:t})}},77451:(e,t,i)=>{"use strict";i.d(t,{h:()=>r});var n=i(26982),a=i(17249),s=i(4637);function r(e){return(0,s.jsx)(n.T,{"aria-label":a.ag.get("a11y.externalLink"),...e})}},90902:(e,t,i)=>{"use strict";i.d(t,{X:()=>s});var n=i(17249),a=i(4637);const s=e=>{let{size:t=32,className:i}=e;return(0,a.jsxs)("svg",{role:"img",width:t,height:t,viewBox:"0 0 12 12",className:i,"aria-label":n.ag.get("age.restriction.nineeteen-badge"),children:[(0,a.jsx)("path",{fill:"#B3B3B3",d:"M4.607 9V3.328h-.96c-.112.592-.68 1.04-1.496 1.064v.752h1.36V9h1.096zm3.82-3.848c0 .616-.488 1.008-1.04 1.008-.568 0-1.04-.384-1.04-1.008 0-.608.48-1 1.04-1 .552 0 1.04.4 1.04 1zm-3 3.656c.288.184.84.312 1.312.312 1.92 0 2.92-1.208 2.92-3.256 0-1.8-1.049-2.656-2.249-2.656-1.208 0-2.144.816-2.144 1.976 0 1.192.92 1.904 1.952 1.904.64 0 1.136-.272 1.352-.632-.056 1.048-.72 1.696-1.84 1.696-.384 0-.8-.12-1.016-.24l-.288.896z"}),(0,a.jsx)("g",{transform:"scale(0.85) translate(1.1,1.1)",children:(0,a.jsx)("path",{fill:"#CD1A2B",d:"M6 11.2A5.2 5.2 0 01.8 6H-.8A6.8 6.8 0 006 12.8v-1.6zM11.2 6A5.2 5.2 0 016 11.2v1.6A6.8 6.8 0 0012.8 6h-1.6zM6 .8A5.2 5.2 0 0111.2 6h1.6A6.8 6.8 0 006-.8V.8zM6-.8A6.8 6.8 0 00-.8 6H.8A5.2 5.2 0 016 .8V-.8z"})})]})}},18979:(e,t,i)=>{"use strict";i.d(t,{E:()=>p});i(71756);var n=i(59496),a=i(84875),s=i.n(a);const r="mMx2LUixlnN_Fu45JpFB",o="yOKoknIYYzAE90pe7_SE",l="Yn2Ei5QZn19gria6LjZj";var d=i(91929);const c="VvxVxrxVVFjUD6BNsUub";var u=i(4637);const m=(0,n.memo)((function(e){const{children:t}=e,[i,a]=(0,n.useState)(!1),{ref:s,inView:r}=(0,d.YD)({triggerOnce:!0});return(0,n.useEffect)((()=>{r&&a(!0)}),[r]),(0,u.jsx)("div",{className:i?void 0:c,ref:s,children:i?t:null})}));function _(e){if(null!==e)return e}const h=e=>{let{children:t,loading:i}=e;return"lazy"!==i||"undefined"==typeof HTMLImageElement||"loading"in HTMLImageElement.prototype?(0,u.jsx)(u.Fragment,{children:t}):(0,u.jsx)(m,{children:t})},p=(0,n.memo)((function(e){const{ariaHidden:t=!1,testid:i,src:a,alt:d="",radius:c=0,className:m="",srcSet:p,draggable:v=!1,sizes:k,children:g,loading:E,width:S,height:y,fadeIn:f=!1}=e,[N,T]=(0,n.useState)("loading"),R=(0,n.useRef)(null),[A,b]=(0,n.useState)(f);return(0,n.useLayoutEffect)((()=>{var e;f&&null!==(e=R.current)&&void 0!==e&&e.complete&&b(!1)}),[f]),a&&"error"!==N?(0,u.jsx)(h,{loading:E,children:(0,u.jsx)("img",{"aria-hidden":t,draggable:v,loading:E,src:a,"data-testid":i,alt:d,className:s()(r,m,{[o]:A,[l]:"loaded"===N}),style:{borderRadius:c||void 0},srcSet:p,sizes:k,width:_(S),height:_(y),onLoad:()=>T("loaded"),onError:()=>T("error"),ref:R})}):(0,u.jsx)(u.Fragment,{children:g})}))},97422:(e,t,i)=>{"use strict";i.d(t,{Ee:()=>n.E});var n=i(18979);i(71756),i(59496)},67262:(e,t,i)=>{"use strict";i.d(t,{C:()=>c});var n=i(59496),a=i(91929),s=i(84875),r=i.n(s);const o="eqw9lvuoZHrkWMTdyTpY",l="lb08f71wES9AQnKx6e0R";var d=i(4637);const c=n.memo((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:i,showScrollbar:s=!0,horizontalScroll:c=!1,className:u}=e,{ref:m,inView:_}=(0,a.YD)({initialInView:t});return(0,n.useEffect)((()=>{_&&i&&i()}),[_,i]),(0,d.jsxs)("div",{className:r()({[l]:!s,[o]:c},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,d.jsx)("div",{ref:m})]})}))},78142:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>o,ZZ:()=>l});var n=i(87164),a=i(4637);const s=n.H8.Provider,r=n.H8.Consumer,o=e=>{let{value:t,index:i,children:n}=e;return(0,a.jsx)(r,{children:e=>{let r=""===e?t:`${e}/${t}`;return"number"==typeof i&&(r=`${r}/${i}`),(0,a.jsx)(s,{value:r,children:n})}})},l=e=>{const t=t=>(0,a.jsx)(r,{children:i=>(0,a.jsx)(e,{itemId:i,...t})}),i=e.displayName||e.name||"Component";return t.displayName=`usingItemId(${i})`,t}},53111:(e,t,i)=>{"use strict";i.d(t,{V:()=>o});const n="kpGMQq1KFz620g_BD_dS";var a=i(84875),s=i.n(a),r=i(4637);const o=e=>{let{text:t,ariaLabel:i=t,title:a=i,className:o}=e;return(0,r.jsx)("span",{"aria-label":i,className:s()(n,o),title:a,children:t})}},75068:(e,t,i)=>{"use strict";i.d(t,{E:()=>l});var n=i(59496);const a="NkWIcfgnWR9AXfikmWai",s="OvmkrxKmI82x4jlgEZG0";var r=i(24377),o=i(4637);const l=n.memo((function(e){let{onClick:t,children:i}=e;return(0,o.jsx)("button",{"data-testid":"clickable-timestamp",className:s,onClick:()=>{const e=d(i),n=1e3*e.split(":").reverse().reduce(((e,t,i)=>e+parseInt(t,10)*Math.pow(60,i)),0);t(n)},children:(0,o.jsx)(r.D,{className:a,variant:"ballad",children:i})})}));function d(e){let t="";return n.Children.map(e,(e=>{"string"==typeof e||"number"==typeof e?t+=e:n.isValidElement(e)&&e.props.children&&(t+=d(e.props.children))})),t}},42490:(e,t,i)=>{"use strict";i.d(t,{yv:()=>d,xX:()=>g,Nt:()=>I});var n=i(59496),a=i(84875),s=i.n(a);const r="aCtCKL9BxAoHeVZS0uRs",o="QavgDs_52SpJ2rw0LNYz";var l=i(4637);const d=e=>{let{children:t,className:i,arrowClassName:a,disableAutoFocus:d}=e;const c=(0,n.useRef)(null);return function(){let{onRestoreFocus:e,deps:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=(0,n.useRef)(null);(0,n.useRef)(e).current=e,(0,n.useEffect)((()=>(i.current=document.activeElement,()=>{var t;e?null==e||e(i.current):null===(t=i.current)||void 0===t||t.focus({preventScroll:!0})})),t)}(),(e=>{let{ref:t,getFocusElement:i,onFocus:a,preventScroll:s,deps:r=[]}=e;const o=(0,n.useRef)(i),l=(0,n.useRef)(a);o.current=i,l.current=a;const d=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e,i;d.current=document.activeElement;const n=null!==(e=null===(i=o.current)||void 0===i?void 0:i.call(o,t.current))&&void 0!==e?e:t.current;var r;a?null===(r=l.current)||void 0===r||r.call(l,n):null==n||n.focus({preventScroll:s})}),r)})({ref:d?{current:null}:c,preventScroll:!0}),(0,l.jsxs)("div",{...d&&{tabIndex:-1},ref:c,onClick:e=>{e.stopPropagation()},onContextMenu:e=>{e.stopPropagation()},className:s()(r,i),children:[t,(0,l.jsx)("div",{"data-popper-arrow":"",className:s()(o,a)})]})};i(71756);const c="X8yW2lJbFCQfV5GjoRwL",u="mph1R_QkS44EPi4lrhxd",m="v5IUMJNPJgol0273zQXD";var _=i(29404),h=i(88652);const p=(0,n.createContext)(null);function v(){var e;const t=function(){const e=(0,n.useContext)(p);return"undefined"==typeof window?null:null!=e?e:window}();return null!==(e=null==t?void 0:t.document)&&void 0!==e?e:null}const k=1600,g=e=>{let{children:t,className:i,showDelay:a=k}=e;const[r,o]=n.useState(!1),d=(0,h.qT)(),p=v(),g=(0,n.useRef)(!0);return(0,n.useEffect)((()=>(g.current=!0,()=>{g.current=!1}))),(0,n.useEffect)((()=>{const e=setTimeout((()=>{g.current&&(o(!0),null==p||p.addEventListener("click",t,{once:!0}))}),a);function t(){g.current&&(o(!1),d({type:"close"}),clearTimeout(e))}return()=>{null==p||p.removeEventListener("click",t),clearTimeout(e)}}),[p,a,d]),(0,l.jsx)(_.Z,{in:r,timeout:200,unmountOnExit:!0,classNames:{enter:u,enterActive:m},children:(0,l.jsx)("div",{className:s()(c,i),children:t})})};const E=e=>{let{toggleContextMenu:t,children:i}=e;return(0,l.jsx)(l.Fragment,{children:n.cloneElement(i,{onClick:e=>{var n,a;null===(n=(a=i.props).onClick)||void 0===n||n.call(a,e),t(e)}})})},S=e=>{let{openContextMenu:t,children:i}=e;const a=(0,h.qT)();return(0,l.jsx)(l.Fragment,{children:n.cloneElement(i,{onFocus:e=>{var n,a;document.documentElement.classList.contains("no-focus-outline")||(null===(n=(a=i.props).onFocus)||void 0===n||n.call(a,e),t(e))},onBlur:e=>{var t,n;null===(t=(n=i.props).onBlur)||void 0===t||t.call(n,e),a({type:"close"})},onMouseEnter:e=>{var n,a;null===(n=(a=i.props).onMouseEnter)||void 0===n||n.call(a,e),t(e)},onMouseLeave:e=>{var t,n;null===(t=(n=i.props).onMouseLeave)||void 0===t||t.call(n,e),a({type:"close"})}})})},y=e=>{let{openContextMenu:t,children:i}=e;const a=(0,h.qT)(),{isTouching:s}=(0,h.Np)(),r=(0,n.useRef)();return(0,l.jsx)(l.Fragment,{children:n.cloneElement(i,{onContextMenu:e=>{var n,a;null===(n=(a=i.props).onContextMenu)||void 0===n||n.call(a,e),s||t(e),e.stopPropagation()},onTouchStart:e=>{var t,n;r.current=Date.now(),null===(t=(n=i.props).onTouchStart)||void 0===t||t.call(n,e),a({type:"touch",value:!0})},onTouchEnd:e=>{var n,s,o;null===(n=(s=i.props).onTouchEnd)||void 0===n||n.call(s,e),(o=r.current)&&Date.now()-500>o&&(a({type:"touch",value:!1}),t(e)),document.body.hasAttribute("data-dragging-type")&&document.body.removeAttribute("data-dragging-type"),document.body.hasAttribute("data-dragging-uri-type")&&document.body.removeAttribute("data-dragging-uri-type")}})})},f=(0,n.forwardRef)((function(e,t){let{isOpen:i,handleContextMenu:a,trigger:s,children:r}=e;return function(e){return"function"==typeof e}(r)?(0,l.jsx)(l.Fragment,{children:r(i,a,t)}):"click"===s?(0,l.jsx)(E,{toggleContextMenu:a,children:r}):"right-click"===s?(0,l.jsx)(y,{openContextMenu:a,children:r}):"hover-or-focus"===s?(0,l.jsx)(S,{openContextMenu:a,children:r}):(0,l.jsx)(l.Fragment,{children:(0,n.cloneElement)(r,{ref:t})})}));var N=i(31217);var T=i(78142);const R=e=>{let{menu:t,onClickOutside:i,children:a,trigger:s,offset:r,placement:o,isOpen:d,preventScrollingWhileOpen:c,triggerRef:u,position:m,onShow:_,onHide:h,appendTo:p}=e;const v=(0,n.useRef)(null),k=(0,n.useRef)(null);((e,t)=>{(0,n.useEffect)((()=>{const i=e=>{t.current&&!t.current.contains(e.target)&&e.preventDefault()};if(e){const e={passive:!1};window.addEventListener("mousewheel",i,e),window.addEventListener("touchmove",i,e)}return()=>{window.removeEventListener("mousewheel",i),window.removeEventListener("touchmove",i)}}),[e,t])})(d&&c,v);const{updateAfterFirstLayout:g,cancel:E}=((e,t)=>{const i=(0,n.useRef)(0),a=(0,n.useCallback)((()=>{cancelAnimationFrame(i.current)}),[]),s=(0,n.useCallback)((()=>{var n,a,r;e.current&&0!==(null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect().width)?(null===(a=t.current)||void 0===a||null===(r=a.popperInstance)||void 0===r||r.update(),cancelAnimationFrame(i.current)):i.current=requestAnimationFrame(s)}),[e,t]);return(0,n.useEffect)((()=>()=>{cancelAnimationFrame(i.current)}),[s]),{updateAfterFirstLayout:s,cancel:a}})(v,k),S=(0,n.useCallback)((e=>{E(),e.reference.removeAttribute("data-context-menu-open"),h()}),[E,h]);return(0,n.useEffect)((()=>{const e=k.current;if(!e||!e.reference||"click"===s)return()=>{};const t=e.reference,i=S.bind(void 0,e);return t.addEventListener("click",i),()=>{t.removeEventListener("click",i)}}),[v,k,S,s]),(0,l.jsxs)(l.Fragment,{children:[a,d&&(0,l.jsx)(N.ZP,{onCreate:e=>{k.current=e},onShow:e=>{g(),e.reference.setAttribute("data-context-menu-open","true"),null==_||_(e)},onHide:S,visible:d,render:e=>(0,l.jsx)(T.ZP,{value:"contextmenu",children:(0,l.jsx)("div",{ref:v,id:"context-menu","data-placement":e["data-placement"],children:d?t:null})}),arrow:!0,popperOptions:{modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,padding:10,tether:!1}},{name:"arrow",options:{padding:10}}]},placement:o,onClickOutside:()=>{null==i||i()},interactive:!0,offset:r,...p?{appendTo:p}:{},reference:u,getReferenceClientRect:"right-click"!==s&&u?null:()=>{var e,t,i,n;return{width:0,height:0,top:null!==(e=null==m?void 0:m.y)&&void 0!==e?e:0,bottom:null!==(t=null==m?void 0:m.y)&&void 0!==t?t:0,left:null!==(i=null==m?void 0:m.x)&&void 0!==i?i:0,right:null!==(n=null==m?void 0:m.x)&&void 0!==n?n:0,x:0,y:0,toJSON:()=>{}}}})]})};function A(e){if(!e)return{x:0,y:0};if(function(e){return"touchend"===e.type||"touchstart"===e.type}(e))return{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(function(e){if("clientX"in e&&"clientY"in e)return 0!==e.clientX&&0!==e.clientY;return!1}(e))return{x:e.clientX,y:e.clientY};const t=e.target.getBoundingClientRect();return{x:t.x+t.width/2,y:t.y+t.height}}const b=e=>{var t;let{children:i,menu:a,action:s="toggle",trigger:r="click",renderInline:o=!1,offset:d=[0,8],placement:c="bottom-start",preventScrollingWhileOpen:u=!0,onShow:m,onHide:_}=e;const p=(0,h.qT)(),k=(0,h.Np)(),g=(e=>{let{action:t,menu:i}=e;const a=(0,h.qT)();return(0,n.useCallback)(((e,n)=>{e.persist(),e.preventDefault(),a({type:t,event:e,triggerElement:e.currentTarget,menu:n||i})}),[i,a,t])})({action:s,menu:a}),E=v();return(0,l.jsx)(R,{onClickOutside:()=>{p({type:"close"})},placement:c,trigger:r,offset:d,preventScrollingWhileOpen:u,triggerRef:null!==(t=k.triggerElement)&&void 0!==t?t:void 0,appendTo:!E||o?void 0:()=>E.body,isOpen:k.isOpen,position:A(k.event),menu:k.menu,onShow:m,onHide:function(){p({type:"close"});for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];null==_||_(...t)},children:(0,l.jsx)(f,{isOpen:k.isOpen,handleContextMenu:g,trigger:r,children:i})})},C=e=>(0,l.jsx)(h.du,{children:(0,l.jsx)(b,{...e})}),I=e=>{let{children:t,content:i,...n}=e;return(0,l.jsx)(C,{renderInline:!0,preventScrollingWhileOpen:!1,placement:"top-start",menu:i,...n,children:t})}},32080:(e,t,i)=>{"use strict";i.d(t,{i:()=>r});var n=i(1608),a=i.n(n),s=i(4637);const r=e=>(0,s.jsx)(a(),{...e})},51841:(e,t,i)=>{"use strict";i.d(t,{N:()=>s});var n=i(41177),a=i(4637);const s=e=>t=>{const i=(0,n.TH)(),s=(0,n.s0)(),r=(0,n.ur)(),o=(0,n.UO)();return(0,a.jsx)(e,{...t,navigate:s,navigationType:r,location:i,params:o})}},9944:(e,t,i)=>{"use strict";i.d(t,{n:()=>d});var n=i(67946);const a="UyzJidwrGk3awngSGIwv";var s=i(84875),r=i.n(s),o=i(29800),l=i(4637);const d=e=>{let{durationMs:t,className:i,displaySeconds:s}=e;const{hours:d,minutes:c,seconds:u}=(0,n.P)(t);return s=!1!==s&&!d&&u,(0,l.jsx)("span",{className:r()(a,i),children:(0,o.N)({h:d,m:c,s:s?u:0})})}},35239:(e,t,i)=>{"use strict";i.d(t,{j:()=>_});var n=i(67946);const a="poz9gZKE7xqFwgk231J4";var s=i(17249),r=i(84875),o=i.n(r);const l=36e5,d=864e5;function c(e,t){return e-e%t}var u=i(29800),m=i(4637);const _=e=>{let{durationMs:t,className:i}=e;const r=t>d;let _;var h;_=r?d:c(h=t,h>36e6?l:h>18e6?18e5:h>36e5?9e5:h>18e5?3e5:6e4);const{hours:p,minutes:v}=(0,n.P)(_);if(0===p&&0===v)return null;let k=(0,u.N)({h:p,m:v,s:0});return k=r?s.ag.get("time.over",k):s.ag.get("time.estimated",k),(0,m.jsx)("span",{className:o()(a,i),children:k})}},29800:(e,t,i)=>{"use strict";i.d(t,{N:()=>a});var n=i(17249);function a(e){let{h:t,m:i,s:a}=e;return[t?n.ag.get("time.hours.short",t):"",i?n.ag.get("time.minutes.short",i):"",a?n.ag.get("time.seconds.short",a):""].filter((e=>""!==e)).join(" ")}},82528:(e,t,i)=>{"use strict";i.d(t,{nL:()=>n.n,ng:()=>u});var n=i(9944),a=(i(35239),i(67946));const s="xWm_uA0Co4SXVxaO7wlB";var r=i(17249),o=i(84875),l=i.n(o),d=i(29800),c=i(4637);const u=e=>{let{durationMs:t,className:i,displaySeconds:n}=e;const{hours:o,minutes:u,seconds:m}=(0,a.P)(t);n=!1!==n&&!o&&m;const _=(0,d.N)({h:o,m:u,s:n?m:0});return(0,c.jsx)("span",{className:l()(s,i),children:r.ag.get("time.left",_)})}},76022:(e,t,i)=>{"use strict";i.d(t,{BK:()=>v,F0:()=>_,Jn:()=>g,Li:()=>s,Lz:()=>r,Np:()=>l,YJ:()=>u,ZW:()=>k,_S:()=>p,ci:()=>o,lL:()=>d,un:()=>h,wI:()=>E,zL:()=>m,zk:()=>c});i(71756);var n=i(17249),a=i(83474);const s="https://open.spotify.com/",r="https://open.spotify.com",o="https://www.spotify.com/account/overview/",l="https://www.spotify.com/premium/",d="https://www.spotify.com/legal/privacy-policy/",c="https://www.spotify.com/legal",u="https://support.spotify.com/",m="/__noul__",_="intl-",h=(new RegExp(`${`/${_}`}([a-zA-Z0-9-]+)`),[]),p=[n.go.id,n.go.de],v=[...p,...h],k=n.go.en,g=[],E=[a.p.ALBUM,a.p.ARTIST,a.p.TRACK],[S]=(h.length>0?h[0]:p[0],n.go.hu,p);h.length||n.go.ca,n.go.zhCN,n.go.es419,n.go.es},87164:(e,t,i)=>{"use strict";i.d(t,{H8:()=>a,VX:()=>s});var n=i(59496);const a=(0,n.createContext)(""),s=(0,n.createContext)({scrollNodeRef:{current:null},scrollNodeChildRef:{current:null}})},4370:(e,t,i)=>{"use strict";i.d(t,{c:()=>o});var n=i(24377);const a="UDuv2dzJuOEimwKzf_Ht",s="crU3_phk5OplHUp2b_iW";var r=i(4637);const o=e=>{let{padded:t}=e;return(0,r.jsx)(n.D,{as:"p",dir:"auto",variant:"finale",className:`${a} ${t?s:""}`,children:"Lyrics powered by Musixmatch."})}},93483:(e,t,i)=>{"use strict";i.d(t,{Uo:()=>n,ZU:()=>s,jh:()=>r,Db:()=>l});let n=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});var a=i(59496);const s=(0,a.createContext)(void 0),r=()=>(0,a.useContext)(s);i(71756);var o=i(23066);function l(e){const[t,i]=(0,a.useState)(),n=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:(0,o.y)({observeOnly:"width",onResize:e=>{let{width:a}=e;if(void 0===a)return;const s=n.find((e=>{let[,t]=e;return a>=t})),r=s&&s[0];r&&r!==t&&i(r)}}),breakpoint:t}}},41965:(e,t,i)=>{"use strict";i.d(t,{T:()=>s});i(71756);var n=i(59496),a=i(95682);const s=()=>(e=>{const t=(0,n.useMemo)((()=>(0,a.O)()?null:window.matchMedia(e)),[e]),[i,s]=(0,n.useState)((()=>!t||t.matches));return(0,n.useEffect)((()=>{if(!t||!t.addEventListener)return()=>{};const e=e=>{s(e.matches)};return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}}),[t]),i})("(prefers-reduced-motion: reduce)")},69912:(e,t,i)=>{"use strict";i.d(t,{a:()=>r});var n=i(59496),a=i(85830);const s=100;function r(e){const t=(0,a.y1)(e,s,{leading:!0});(0,n.useEffect)((()=>(window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),t.cancel()})),[t])}},23066:(e,t,i)=>{"use strict";i.d(t,{y:()=>d});i(71756);var n=i(59496),a=i(73023),s=i(95682);function r(e){return!(0,s.O)()&&e instanceof HTMLElement}let o;const l={subscribersByElement:new WeakMap,get resizeObserver(){return o||(o=new a.Z((e=>{Array.isArray(e)&&e.forEach((e=>{var t;const i={width:Math.round(e.contentRect.width),height:Math.round(e.contentRect.height)};(null!==(t=l.subscribersByElement.get(e.target))&&void 0!==t?t:new Set).forEach((e=>{e(i)}))}))}))),o}};function d(e){let{onResize:t,refOrElement:i,observeOnly:a,observeOnMount:s=!1}=e;const o=(0,n.useRef)(t);o.current=t;const d=(0,n.useRef)(a);d.current=a;const c=(0,n.useRef)({width:-1,height:-1}),u=(0,n.useCallback)((e=>{if(!o.current)return;const t=c.current.width!==e.width,i=c.current.height!==e.height;("width"===d.current&&t||"height"===d.current&&i||!d.current&&(t||i))&&o.current(e),c.current.width=e.width,c.current.height=e.height}),[]),m=function(e){var t;let{refOrElement:i,subscriber:a}=e,s=null;const o=(0,n.useRef)(null),l=(0,n.useRef)(null),d=(0,n.useRef)(null),c=(0,n.useRef)(),u=(0,n.useRef)(a);u.current=a;const m=(0,n.useCallback)((()=>{let e=null;l.current?e=l.current:o.current?e=o.current:r(i)&&(e=i),d.current!==e&&(c.current&&(c.current(),c.current=null),d.current=e,e&&u.current&&(c.current=u.current(e)))}),[i]),_=(0,n.useCallback)((e=>{l.current=e,m()}),[m]);return i&&!r(i)&&(s=i),(0,n.useEffect)((()=>{s&&(o.current=s.current),m()}),[s,null===(t=s)||void 0===t?void 0:t.current,m]),(0,n.useEffect)((()=>()=>{var e;null==c||null===(e=c.current)||void 0===e||e.call(c)}),[]),_}({refOrElement:i,subscriber:e=>{var t;return s&&u({width:e.offsetWidth,height:e.offsetHeight}),l.subscribersByElement.has(e)||(l.resizeObserver.observe(e),l.subscribersByElement.set(e,new Set)),null===(t=l.subscribersByElement.get(e))||void 0===t||t.add(u),()=>{var t,i;null===(t=l.subscribersByElement.get(e))||void 0===t||t.delete(u),0===(null===(i=l.subscribersByElement.get(e))||void 0===i?void 0:i.size)&&(l.resizeObserver.unobserve(e),l.subscribersByElement.delete(e))}}});return m}},97846:(e,t,i)=>{"use strict";i.d(t,{c:()=>s});var n=i(59496),a=i(87164);function s(e){let{executeOnceOnStart:t=!1,disabled:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{scrollNodeRef:s}=(0,n.useContext)(a.VX);(0,n.useEffect)((()=>{const n=s.current;if(!i&&n)return n.addEventListener("scroll",e),t&&n.dispatchEvent(new Event("scroll")),()=>n.removeEventListener("scroll",e)}),[s,e,t,i])}},1754:(e,t,i)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;const{name:i,value:n,days:a,domain:s,secure:r=!0,samesite:o="none"}=e;let l="";if(a){const e=new Date;e.setTime(Date.now()+24*a*60*60*1e3),l=`; expires=${e.toUTCString()}`}else l="";let d=`${i}=${n}${l}; path=/`;s&&s.length&&(d+=`;domain=${s}`),n&&(!0===r&&(d+=";secure"),d+=`;samesite=${o}`),t.cookie=d}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;try{const i=t.cookie;return i.split(";").map((e=>e.trim().split("="))).reduce(((e,t)=>(e[t[0]]=t[1],e)),{})[e]}catch(i){return null}}i.d(t,{pC:()=>n,vQ:()=>a})},78302:(e,t,i)=>{"use strict";i.d(t,{PC:()=>l,j6:()=>d});var n=i(9596),a=i(69981),s=i(39533),r=i(43665);const o=["open.spotifycdn.com","xpui.app.spotify.com"],l=e=>{(0,n.Tb)(e)},d=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=arguments.length>4?arguments[4]:void 0;(0,a.S1)({dsn:e,allowUrls:o,sampleRate:.1,release:t,...i,integrations:[new s.x],ignoreErrors:[/\/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}\/main\.js/,/^NotFoundError: Failed to execute '(removeChild|insertBefore)' on 'Node': The node.*child.*this node.$/,/ResizeObserver loop limit exceeded/,"PresentationRequest",/DA97E0680A7030159BC0C0EE3A1D098E947A08E3/]}),(0,n.e)((e=>{const t=(0,r.Z)("config").correlationId;t&&e.setUser({id:t}),Object.keys(l).forEach((t=>{e.setExtra(t,l[t])})),""!==document.referrer&&e.setExtra("referrer",document.referrer),d&&e.setTag("container",d)}))}},39106:(e,t,i)=>{"use strict";i.d(t,{m:()=>a});var n=i(67946);i(12033);const a=e=>{if(-1===e||Number.isNaN(e))return"-:--";const{hours:t,minutes:i,seconds:a}=(0,n.P)(e);return`${t>0?`${t}:`:""}${t>0&&i<10?`0${i}`:i}:${a<10?`0${a}`:a}`}},35780:(e,t,i)=>{"use strict";i.d(t,{Ie:()=>o,Xb:()=>l,IS:()=>d});i(31781);var n=i(60808),a=i(32953);const s=async(e,t,i)=>{var n;return null!==(n=i)&&void 0!==n||(i="com.widevine.alpha"),(await e.build().withMethod("GET").withHost(a.B8).withPath(`/unauth/episode/${t}/${i}`).withEndpointIdentifier("/unauth/episode/{episodeId}/{keysystem}").send()).body};var r=i(59272);function o(e){var t;return 0===(null===(t=e.showTypes)||void 0===t?void 0:t.length)}function l(e,t){var i;return e.uri===(null===(i=t.trailer)||void 0===i?void 0:i.uri)}async function d(e,t,i){var a;const o=(0,r.EC)(e.uri),l=await s(n.b.getInstance(),null==o?void 0:o.id,t);var d;if("video"===i)return{format:"MANIFEST_ID",mediaType:i,noManifest:!1,fileId:null===(d=l.video)||void 0===d?void 0:d[0].manifestId};const c=null===(a=l.format)||void 0===a?void 0:a.replace(/_(128|256)/,""),u="NONE"!==l.passthrough;return{format:c,mediaType:null!=i?i:"audio",noManifest:u,resolvedURL:u?l.passthroughUrl:l.url[0],fileId:u?"":l.fileId}}},60808:(e,t,i)=>{"use strict";i.d(t,{b:()=>y});i(71756),i(59538);var n=i(76045),a=i(91094),s=i(87132),r=i(98322);function o(e){return`${e.method}::${e.host}${e.path}::${JSON.stringify(e.queryParameters)}`}function l(e,t,i){try{(0,a.sQ)({metric_type:n.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:t,isFatal:i}}).catch((()=>({})))}catch(s){}}class d extends r.c{constructor(e){super(e),this.pendingRequests=new Set}resetPendingRequests(){this.pendingRequests=new Set}build(){const e=super.build();let t;return e.onBeforeSend=()=>{if(t=o(e),this.pendingRequests.has(t)){const e=new Error(`DUPLICATE_REQUEST_ERROR: Already sent this request (${t})`);throw e.name="DUPLICATE_REQUEST_ERROR",e}"GET"===e.method.toUpperCase()&&this.pendingRequests.add(t)},e.onAfterSend=i=>{t=o(e);let r="unknown",d=!1;if(null!==e.endpointIdentifier&&(d=!0,r=`${e.method} ${e.hostIdentifier||"unknown-host"}::${e.endpointIdentifier}`),this.pendingRequests.delete(t),i)throw d&&l(r,JSON.stringify(i.status||0),JSON.stringify(0===(e.endpointIdentifier||"").indexOf("/me"))),s.m.fromResponse(i,e.method);if(d){l(r,"200","false");const t=Date.now()-(e.startTimestamp||0);!function(e,t,i){try{(0,a.sQ)({metric_type:n.MetricTypes.TIMER,what:"request-duration",value:i,tags:{endpoint:e,statusCode:t}}).catch((()=>({})))}catch(s){}}(r,"200",n.Time.fromMillis(t).asNanos())}},e}}var c=i(53425),u=(i(45880),i(81816)),m=i(47196),_=i.n(m),h=i(21366),p=i.n(h);const v=_()(u.fetch);async function k(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;const n=new(p()),a=n.signal,r=setTimeout((()=>n.abort()),i),o=function(e){return e&&void 0!==e.retries&&e.retries>0?v:u.fetch}(t);return o(e,{...t,signal:a}).then((e=>(clearTimeout(r),e))).catch((n=>{var a;if("AbortError"===n.name)throw new s.V({timeout:i,url:e,method:null!==(a=null==t?void 0:t.method)&&void 0!==a?a:"get"});throw clearTimeout(r),n}))}class g{constructor(e,t){return this.method=e,this.url=t,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._includeCredentials=!1,this._endpointIdentifier=null,this}withQueryParameters(e){this.queryParameters=e}withResponseType(e){this.responseType=e}withPostData(e){this.postData=e}withEndpointIdentifier(e){this._endpointIdentifier=e}addHeader(e,t){return this._headers[e]=t,this}includeCredentials(){return this._includeCredentials=!0,this}async send(){let e;var t;this.postData&&(e=null!==(t=this._headers["Content-Type"])&&void 0!==t&&t.startsWith("application/json;charset=UTF-8")?JSON.stringify(this.postData):this.postData);const i=new URLSearchParams(this.queryParameters).toString(),r=n.Timer.start(),o=await k(`${this.url}${i?`?${i}`:""}`,{method:this.method,body:e,credentials:this._includeCredentials?"include":void 0,headers:{"User-Agent":{}.SERVER_UA,"Content-Type":E(this.responseType),...this._headers}},1e4);if((0,a.sQ)({metric_type:n.MetricTypes.TIMER,what:"isomorphic-request-time",value:r.end().nanoseconds,tags:this._endpointIdentifier?{endpoint:this._endpointIdentifier}:{}}),!o.ok)throw s.m.fromResponse(o,this.method||"GET");return{body:"text"===this.responseType?await o.text():await o.json(),status:o.status}}}function E(e){return"text"===e?"text/plain":"application/json"}let S=null;class y{static setSession(e){if(!e)return;const{accessToken:t}=e,i=this.getInstance();i.accessToken=t,t||i.resetPendingRequests()}static setLocale(e){this.getInstance().locale=e}static setGlobalRequestHeaders(e){this.getInstance().globalRequestHeaders=e}static setMarket(e){this.getInstance().market=e}static resetInstance(){S=null}static getInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S||(S=this.createNew(e)),S}static createNew(e){const{Constructor:t=d,fromServer:i=!1}=e;return new t(i?g:c.e)}}},86272:(e,t,i)=>{"use strict";i.d(t,{eK:()=>a,lD:()=>s});var n=i(32953);function a(e,t){return e.build().withHost(n.H).withPath(`/albums/${t}`).withEndpointIdentifier("/albums/{albumId}").send()}function s(e,t,i){return e.build().withHost(n.XA).withPath(`/album-entity-view/v2/album/${t}`).withQueryParameters(i).withEndpointIdentifier("/album-entity-view/v2/album/{albumId}").send()}},7649:(e,t,i)=>{"use strict";i.d(t,{zH:()=>a});var n=i(32953);function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.build().withHost(n.H).withPath(`/artists/${t}/albums`).withQueryParameters(i).withoutMarket().withEndpointIdentifier("/artists/{artistId}/albums").send()}},32953:(e,t,i)=>{"use strict";i.d(t,{B8:()=>g,H:()=>u,PQ:()=>h,SW:()=>c,XA:()=>r,XW:()=>S,aj:()=>p,f:()=>v,fW:()=>E,fe:()=>m,lW:()=>k,wI:()=>_});var n=i(50363),a=i.n(n);const{WEB_API_URL:s,SPCLIENT_WG_URL:r,PARTNER_API_ENDPOINT:o,ACCOUNTS_HOST:l,EXP_WG_ENDPOINT:d}=a(),c="",u=`${s}/v1`,m=`${r}/playlist/v2`,_=`${o}/pathfinder/v1`,h=`${r}/concerts`,p=`${r}/collection`,v=`${r}/color-lyrics/v2`,k=`${r}/campaigns-service/v1`,g=`${r}/soundfinder/v1`,E=`${r}/spotify.audiobookcashier.v1.AudiobookCashier`,S=`${r}/blend-party`},31185:(e,t,i)=>{"use strict";i.d(t,{$0:()=>d,A0:()=>l,FB:()=>o,HY:()=>c,YA:()=>u,gq:()=>s,ij:()=>m,l7:()=>r});var n=i(32953),a=i(17249);function s(e,t){return e.build().withHost(n.PQ).withPath(`/v1/concert/view/${t}`).withQueryParameters({locale:a.ag.getLocale()}).withEndpointIdentifier("/concert/{concertId}").send()}const r=(e,t)=>e.build().withMethod("POST").withHost(n.PQ).withPath(`/v2/concerts/saved/${t}`).withEndpointIdentifier("/concerts/saved/{concertId}").withoutMarket().send(),o=(e,t)=>e.build().withMethod("DELETE").withHost(n.PQ).withPath(`/v2/concerts/saved/${t}`).withEndpointIdentifier("/concerts/saved/{concertId}").withoutMarket().send(),l=(e,t,i)=>e.build().withMethod("POST").withHost(n.aj).withPath("/v2/contains").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({username:t,set:"concerts",items:[{uri:i}]})).send();function d(e,t){return e.build().withHost(n.PQ).withPath("/v3/concerts/view").withQueryParameters({locale:a.ag.getLocale(),source:["user","popular","online"],playlists:!1,...t&&{geonameId:t}}).withEndpointIdentifier("/concerts/view").send()}function c(e,t){return e.build().withHost(n.PQ).withPath("/v1/location/suggest").withQueryParameters({q:t}).withEndpointIdentifier("/concerts/location/suggest").send()}function u(e,t,i){const a={};return t&&(a.ip=t),i&&(a.geonameId=i),e.build().withHost(n.PQ).withPath("/v3/concerts/open").withQueryParameters(a).withEndpointIdentifier("/v3/concerts/open").send()}function m(e,t){const i={};return t.page&&(i.page=t.page),t.geonameId&&(i.geonameId=t.geonameId),t.startDate&&(i.startDate=t.startDate),t.endDate&&(i.endDate=t.endDate),e.build().withHost(n.PQ).withPath("/v3/concerts").withQueryParameters(i).withEndpointIdentifier("/v3/concerts").send()}},22872:(e,t,i)=>{"use strict";i.d(t,{Zz:()=>u,di:()=>n,uC:()=>a});var n={};i.r(n),i.d(n,{createCheckoutSession:()=>c,getEpisode:()=>l,getEpisodes:()=>d,getShow:()=>r,getShowEpisodes:()=>o});var a={};i.r(a),i.d(a,{getEligibility:()=>m});i(86272),i(7649),i(11539);var s=i(32953);i(31781);i(59538),i(71756);i(8580);i(15698);function r(e,t,i){return e.build().withHost(s.H).withPath(`/shows/${t}`).withQueryParameters({market:i}).withEndpointIdentifier("shows/{showId}").send()}function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return e.build().withHost(s.H).withPath(`/shows/${t}/episodes`).withQueryParameters({...i,market:n}).withEndpointIdentifier("shows/{showId}/episodes").send()}function l(e,t,i){return e.build().withHost(s.H).withPath(`/episodes/${t}`).withQueryParameters({market:i}).withEndpointIdentifier("episodes/{episodeId}").send()}function d(e,t,i){return e.build().withHost(s.H).withPath("/episodes").withQueryParameters({market:i,ids:t}).withEndpointIdentifier("episodes").send()}function c(e,t){var i;const n="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"";let a=null;return-1!==n.indexOf("Mac")?a="OSX":-1!==n.indexOf("Win")?a="Win32":-1!==n.indexOf("Linux")&&(a="Linux"),e.build().withMethod("POST").withHost(s.fW).withPath("/CheckoutBook").withoutMarket().withBody(JSON.stringify(t)).withEndpointIdentifier("show/{showId}").withHeaders([{key:"App-Platform",value:null!==(i=a)&&void 0!==i?i:"Browser"}]).send()}i(31185);var u=i(90977);const m=e=>e.build().withHost(s.lW).withMethod("GET").withPath("/campaigns/wrapped/consumer/eligible").withEndpointIdentifier("/campaigns/wrapped/").withoutMarket().send()},90977:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getSEOTrackLyrics:()=>a});var n=i(32953);const a=(e,t)=>e.build().withHost(n.f).withPath(`/seo/track/${encodeURIComponent(t)}`).withEndpointIdentifier("/seo/track/{trackId}").send()},8580:(e,t,i)=>{"use strict";i.d(t,{A7:()=>s,OE:()=>a});var n=i(32953);function a(e,t){return e.build().withHost(n.H).withPath(`/tracks/${t}`).withEndpointIdentifier("/tracks/{trackId}").send()}function s(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.build().withHost(n.XA).withPath(`/track-entity-view/v2/track/${t}`).withQueryParameters(i).withEndpointIdentifier("/track-entity-view/v2/track/{trackId}").send()}},11539:(e,t,i)=>{"use strict";i.d(t,{wr:()=>n});i(60178),i(59346),i(45060),i(60252),i(37193),i(12041),i(31266),i(36507),i(55553),i(6127),i(59538),i(59272);i(32953),i(99975);i(33892);const n=(e,t)=>({ads:"0",catalogue:"premium",country:e,"preferred-locale":t,product:"premium","on-demand":"1"})},15698:(e,t,i)=>{"use strict";i.d(t,{k:()=>a});var n=i(32953);function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.build().withHost(n.H).withPath(`/views/${encodeURIComponent(t)}`).withQueryParameters(i).withLocale(i.locale).withEndpointIdentifier("/views/{viewId}").send()}},87132:(e,t,i)=>{"use strict";i.d(t,{V:()=>a,m:()=>n});i(59538);class n extends Error{static fromResponse(e,t){return new n({message:e.statusText,url:e.url,method:t,status:e.status,response:e})}constructor(e){const{message:t,url:i,method:n,status:a,response:s}=e;super(t),this.name="HttpResponseError",this.requestUrl=i,this.requestMethod=n,this.status=a,this.response=s}}class a extends n{constructor(e){const{timeout:t,url:i,method:n}=e;super({message:`${n.toUpperCase()} ${i} timed out (${t}ms)`,url:i,method:n,status:503}),this.name="HttpRequestTimeoutError",this.timeout=t}}},98322:(e,t,i)=>{"use strict";i.d(t,{c:()=>r});i(71756);let n;class a{constructor(){this._accessToken=null,this._market="",this._headers=[],this._globalRequestHeaders=[],this._shouldSendMarket=!0,this._shouldSendGlobalHeaders=!0,this._locale=null,this._shouldSendLocale=!1,this._shouldSendAuthorization=!0,this._host="",this._hostIdentifier="",this.path="",this.responseType="json",this.queryParameters=void 0,this._method="GET",this.jsonContentType=!1,this.body=null,this._endpointIdentifier=null,this._startTimestamp=null,this._includeCredentials=!1}static setRequestImplementation(e){n=e}getRequestImplementation(){return n}set accessToken(e){this._accessToken=e}get market(){return this._market}set market(e){this._market=e}get locale(){return this._locale}set locale(e){this._locale=e}get globalRequestHeaders(){return this._globalRequestHeaders}set globalRequestHeaders(e){this._globalRequestHeaders=e}get startTimestamp(){return this._startTimestamp}get host(){return this._host}get hostIdentifier(){return this._hostIdentifier||this._host}get method(){return this._method}get endpointIdentifier(){return this._endpointIdentifier}withHost(e){return this._host=e,this}withHostIdentifier(e){return this._hostIdentifier=e,this}withPath(e){return this.path=e,this}withResponseType(e){return this.responseType=e,this}withEndpointIdentifier(e){return this._endpointIdentifier=e,this}withQueryParameters(e){return this.queryParameters=e,this}withBody(e){return this.body=e,this}withMethod(e){return this._method=e,this}withoutMarket(){return this._shouldSendMarket=!1,this}withoutGlobalHeaders(){return this._shouldSendGlobalHeaders=!1,this}withoutAuthorization(){return this._shouldSendAuthorization=!1,this}withLocale(e){return this._shouldSendLocale=!0,e&&(this._locale=e),this}withJsonContentType(){return this.jsonContentType=!0,this}withHeaders(e){return this._headers=e,this}withCredentials(){return this._includeCredentials=!0,this}onBeforeSend(e){}onAfterSend(e){}async send(){const e=new n(this.method,`${this._host}${this.path}`,this._shouldSendAuthorization);this._shouldSendMarket&&this.market&&(this.queryParameters={...this.queryParameters,market:this.market}),this._shouldSendLocale&&this.locale&&(this.queryParameters={...this.queryParameters,locale:this.locale}),this.locale&&e.addHeader("Accept-Language",this.locale),e.withQueryParameters(this.queryParameters),e.withResponseType(this.responseType),e.withEndpointIdentifier(this._endpointIdentifier),this._shouldSendAuthorization&&this._accessToken&&e.addHeader("Authorization",`Bearer ${this._accessToken}`),e.addHeader("Accept","application/json"),this._includeCredentials&&e.includeCredentials(),this._shouldSendGlobalHeaders&&this._globalRequestHeaders.length>0&&this._globalRequestHeaders.forEach((t=>{let[i,n]=t;e.addHeader(i,n)}));for(let i=0;i<this._headers.length;i++){const t=this._headers[i];e.addHeader(t.key,t.value)}this.jsonContentType&&e.addHeader("Content-Type","application/json;charset=UTF-8"),this.body&&e.withPostData(this.body);try{this.onBeforeSend(e)}catch(t){return Promise.reject(t)}return this._startTimestamp=Date.now(),e.send().then((e=>(this.onAfterSend(),e))).catch((e=>{throw this.onAfterSend(e),e}))}}var s=i(53425);class r{constructor(e){this._accessToken=null,this._market="",this._locale="",this._globalRequestHeaders=[],this._RequestImplementation=e||s.e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get globalRequestHeaders(){return this._globalRequestHeaders}set globalRequestHeaders(e){this._globalRequestHeaders=e}get market(){return this._market}set market(e){this._market=e}get locale(){return this._locale}set locale(e){this._locale=e}resetPendingRequests(){}build(){a.setRequestImplementation(this._RequestImplementation);const e=new a;return e.accessToken=this._accessToken,e.market=this.market,e.locale=this.locale,e.globalRequestHeaders=this.globalRequestHeaders,e}}},53425:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});i(71756),i(45880);var n=i(11721);class a{constructor(e,t,i){return this.method=e,this.url=t,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._authorize=i,this._includeCredentials=!1,this}withQueryParameters(e){this.queryParameters=e}withPostData(e){this.postData=e}withResponseType(e){this.responseType=e}withEndpointIdentifier(){}addHeader(e,t){return this._headers[e]=t,this}includeCredentials(){return this._includeCredentials=!0,this}async send(){const e=(0,n.k)(),t=new URLSearchParams(this.queryParameters).toString(),i=`${this.url}${t?`?${t}`:""}`,a={method:this.method,responseType:this.responseType,headers:this._headers,authorize:this._authorize,rejectNotOk:!0};var s;(this._includeCredentials&&(a.credentials="include"),this.postData)&&(null!==(s=this._headers["Content-Type"])&&void 0!==s&&s.startsWith("application/json;charset=UTF-8")?a.payload=JSON.stringify(this.postData):a.payload=this.postData);return e.request(i,a).then((e=>e)).catch((e=>{throw e}))}}},37253:(e,t,i)=>{"use strict";i.d(t,{Ct:()=>s,tp:()=>r});var n=i(25617);i(71756),i(59538);const a=864e5;class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,n.Z)(this,"_cache",new Map),this._ttl=e,null!==e&&(e<1||e>a))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const i=this.get(e);if(void 0===i){const i=t();return this.set(e,i),i}return i}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}class r extends s{constructor(e,t){super(e),setInterval(this.cleanup.bind(this),t)}}},1186:(e,t,i)=>{"use strict";i.d(t,{EC:()=>u,ab:()=>c});i(71756);var n=i(38185),a=(i(59538),i(49607));i(21727);const s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchExtractedColors"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ExtractedColors"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"isFallback"}}]}},{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"isFallback"}}]}},{kind:"Field",name:{kind:"Name",value:"colorLight"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"isFallback"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]};function r(e){return a.Il.fromHex(e)}var o=i(37253),l=i(95682);const d=new o.Ct,c={colorRaw:r(n.Sns),colorDark:r(n.Sns),colorLight:r(n.Sns)};async function u(e,t){Array.isArray(t)||(t=[t]);const n=await Promise.all(t.map((e=>d.get(e))));if(n.every((e=>!!e)))return n;try{const n=await async function(e,t){Array.isArray(t)||(t=[t]);const i=await e(s,{uris:t}),{extractedColors:n}=(null==i?void 0:i.data)||{};if(!n)throw new Error("Failed to fetch multiple extracted colors!");return n.map((e=>"ExtractedColors"!==e.__typename?null:{colorRaw:r(e.colorRaw.hex),colorDark:r(e.colorDark.hex),colorLight:r(e.colorLight.hex),isFallback:e.colorRaw.isFallback&&e.colorDark.isFallback&&e.colorLight.isFallback}))}(e,t),a=await function(e,t){const n=t.map((async(t,n)=>{if(t&&!t.isFallback)return t;if(""===e[n])return c;if(!(0,l.O)()){const{extractColors:t}=await Promise.all([i.e(225),i.e(103)]).then(i.bind(i,35103));return t(e[n])}return c}));return Promise.all(n)}(t,n);return a.forEach(((e,i)=>{d.set(t[i],Promise.resolve(e))})),a}catch{if(!(0,l.O)()){const{extractColors:e}=await Promise.all([i.e(225),i.e(103)]).then(i.bind(i,35103));return Promise.all(t.map((t=>{const i=e(t);return d.set(t,i),i})))}return Promise.resolve([c])}}},49607:(e,t,i)=>{"use strict";i.d(t,{jT:()=>a,Il:()=>_});var n=i(25617);i(59538);let a=function(e){return e[e.HEX=0]="HEX",e[e.HEXA=1]="HEXA",e[e.RGB=2]="RGB",e[e.RGBA=3]="RGBA",e[e.HSL=4]="HSL",e[e.HSLA=5]="HSLA",e}({});function s(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<i}function r(e){return e.toString(16).padStart(2,"0")}function o(e){return`${parseFloat((100*e).toFixed(1))}%`}i(31781);function l(e){var t,i,n,a;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));const s=/^#?(?<r>[a-f\d]{2})(?<g>[a-f\d]{2})(?<b>[a-f\d]{2})(?<a>[a-f\d]{2})?$/i.exec(e),r=null==s||null===(t=s.groups)||void 0===t?void 0:t.r,o=null==s||null===(i=s.groups)||void 0===i?void 0:i.g,l=null==s||null===(n=s.groups)||void 0===n?void 0:n.b,d=null==s||null===(a=s.groups)||void 0===a?void 0:a.a;if(void 0===r||void 0===o||void 0===l)throw new Error(`Invalid hex color code "${e}"`);return{r,g:o,b:l,a:d}}function d(e){const{a:t}=l(e);if(!t)return 1;return function(e,t,i){const n=e.toLocaleString("en",{useGrouping:!1,minimumFractionDigits:t,maximumFractionDigits:i});return Number(n)}(parseInt(t,16)/255,0,2)}function c(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function u(e){let{rgb:{r:t,g:i,b:n}}=e;return.2126*c(t/255)+.7152*c(i/255)+.0722*c(n/255)}function m(e,t){const i=u(e),n=u(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}i(71756);class _{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.rgb=e,this.hsl=t,this.hsv=i,this.a=n}static fromRGB(e,t){if(e.r<0||e.g<0||e.b<0||e.r>255||e.g>255||e.b>255||t&&t<0||t&&t>1)throw Error(`Invalid RGB color: ${JSON.stringify(e)}, alpha: ${t}`);const i=function(e){let{r:t,g:i,b:n}=e;const a=t/255,r=i/255,o=n/255,l=Math.max(a,r,o),d=Math.min(a,r,o),c=l-d;let u;const m=(l+d)/2,_=l;u=s(c,0)?0:s(_,a)?60*(0+(r-o)/c):s(_,r)?60*(2+(o-a)/c):60*(4+(a-r)/c),u%=360,u<0&&(u+=360);const h=0===m||1===m?0:(_-m)/Math.min(m,1-m);return{h:Math.round(u),s:h,l:m}}(e),n=function(e){let{r:t,g:i,b:n}=e;const a=t/255,r=i/255,o=n/255,l=Math.max(a,r,o),d=l-Math.min(a,r,o);let c;const u=l;c=s(d,0)?0:s(u,a)?60*(0+(r-o)/d):s(u,r)?60*(2+(o-a)/d):60*(4+(a-r)/d),c%=360,c<0&&(c+=360);const m=0===u?0:d/u;return{h:Math.round(c),s:m,v:u}}(e);return new _(e,i,n,t)}static fromHex(e,t){const i=function(e){const{r:t,g:i,b:n}=l(e);return{r:parseInt(t,16),g:parseInt(i,16),b:parseInt(n,16)}}(e),n=d(e);return _.fromRGB(i,null!=t?t:n)}static fromHSV(e,t){const i=function(e){let{h:t,s:i,v:n}=e;const a=n*i,s=t/60,r=a*(1-Math.abs(s%2-1));let o;o=s>=0&&s<=1?[a,r,0]:s>1&&s<=2?[r,a,0]:s>2&&s<=3?[0,a,r]:s>3&&s<=4?[0,r,a]:s>4&&s<=5?[r,0,a]:s>5&&s<=6?[a,0,r]:[0,0,0];const l=n-a;return{r:Math.round(255*(o[0]+l)),g:Math.round(255*(o[1]+l)),b:Math.round(255*(o[2]+l))}}(e);return _.fromRGB(i,t)}static fromHSL(e,t){const i=function(e){let{h:t,s:i,l:n}=e;const a=(1-Math.abs(2*n-1))*i,s=t/60,r=a*(1-Math.abs(s%2-1));let o;o=s>=0&&s<=1?[a,r,0]:s>1&&s<=2?[r,a,0]:s>2&&s<=3?[0,a,r]:s>3&&s<=4?[0,r,a]:s>4&&s<=5?[r,0,a]:s>5&&s<=6?[a,0,r]:[0,0,0];const l=n-a/2;return{r:Math.round(255*(o[0]+l)),g:Math.round(255*(o[1]+l)),b:Math.round(255*(o[2]+l))}}(e);return _.fromRGB(i,t)}static fromCSS(e,t){const i=function(e,t){const i=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(i){const[e,n,a,s]=i.slice(1),r=null!=t?t:parseFloat(s);return _.fromRGB({r:parseInt(e,10),g:parseInt(n,10),b:parseInt(a,10)},Number.isNaN(r)?void 0:r)}return null}(e,t);if(i)return i;const n=function(e,t){const i=e.match(/^#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i);if(i){const e=i[1];return _.fromHex(e,t)}return null}(e,t);if(n)return n;const a=function(e,t){const i=e.match(/^hsla?\((\d+),\s*(\d+)%,\s*(\d+)%(?:,\s*(\d*(?:\.\d+)?))?\)$/);if(i){const[e,n,a,s]=i.slice(1),r=null!=t?t:parseFloat(s);return _.fromHSL({h:parseInt(e,10),s:parseInt(n,10)/100,l:parseInt(a,10)/100},Number.isNaN(r)?void 0:r)}return null}(e,t);if(a)return a;throw new Error(`Invalid or unsupported CSS color: ${e}`)}toCSS(e){switch(e){case a.HEX:return`#${r((t=this).rgb.r)}${r(t.rgb.g)}${r(t.rgb.b)}`;case a.HEXA:return function(e){return`#${r(e.rgb.r)}${r(e.rgb.g)}${r(e.rgb.b)}${r(Math.floor(255*e.a))}`}(this);case a.RGB:return function(e){return`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b})`}(this);case a.RGBA:return function(e){return`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.a})`}(this);case a.HSL:return function(e){const{h:t,s:i,l:n}=e.hsl;return`hsl(${t}, ${o(i)}, ${o(n)})`}(this);case a.HSLA:return function(e){const{h:t,s:i,l:n}=e.hsl;return`hsla(${t}, ${o(i)}, ${o(n)}, ${e.a})`}(this);default:throw new Error("Invalid or unsupported CSSColorFormat!")}var t}contrastAdjust(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4.5,i=_.BLACK;return"light"===e&&(i=_.WHITE),function(e,t,i){if(t!==_.BLACK&&t!==_.WHITE)throw new Error("Only supports contrast calculation between black and white.");let n=m(e,t);if(n>=i)return e;let a=e.hsv.v,s=t===_.WHITE?-.02:.02,r=Number.MAX_VALUE,o=null;for(let l=0;l<100&&r>.07&&a>=0&&a<=1;l++){a=Math.min(a+s,1),o=_.fromHSV({h:e.hsv.h,s:e.hsl.s,v:a}),n=m(o,_.WHITE);const t=Math.round(10*Math.abs(n-i))/10;t>r&&(s*=-.5),r=t}return null===o?e:o}(this,i,t)}toString(){return`${this.rgb.r},${this.rgb.g},${this.rgb.b},${this.a}`}stringify(){return JSON.stringify(this)}static parse(e){const{rgb:t,hsl:i,hsv:n,a}=JSON.parse(e);return new _(t,i,n,a)}}(0,n.Z)(_,"BLACK",_.fromRGB({r:0,g:0,b:0})),(0,n.Z)(_,"WHITE",_.fromRGB({r:255,g:255,b:255}))},63270:(e,t,i)=>{"use strict";i.d(t,{iZ:()=>s});i(71756),i(70238),i(45880);var n=i(43665);function a(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new URL("undefined"!=typeof location&&location.href?location.href:"https://open.spotify.com");let a=null;if(e){const n=e.toURL();a=new URL(n),t&&i.searchParams.forEach(((e,t)=>{a.searchParams.set(t,e)}))}else a=i,t||(a.search="");a.searchParams.delete("nd"),a.searchParams.delete("fallback"),a.searchParams.set("go","1");const s=(0,n.Z)("config");return"string"==typeof(null==s?void 0:s.correlationId)&&a.searchParams.append("sp_cid",s.correlationId),a}function s(e,t){const i=a(e,t);return i.searchParams.set("fallback","getapp"),i}},19689:(e,t,i)=>{"use strict";i.d(t,{Cc:()=>a,D1:()=>o,Mn:()=>n,ao:()=>s,h2:()=>r});const n="STORE_DEFERRED_ACTION",a="PULL_DEFERRED_ACTION";let s=function(e){return e.PLAY="play",e.PLAYING="playing",e.USER_INVESTMENT="user-investment",e}({});const r=(e,t)=>({type:n,storeAction:e,actionIntent:t}),o=()=>({type:a})},87252:(e,t,i)=>{"use strict";i.d(t,{r:()=>a});var n=i(74772);class a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.vp;this._emitter=e,this._emitter=e||new n.vp}addListener(e,t,i){return this._emitter.addListener(e,t,i),this}removeListener(e,t,i){return this._emitter.removeListener(e,t,i),this}onAddListener(e,t){return this._emitter.onAddListener(e,t),this}onRemoveListener(e,t){return this._emitter.onRemoveListener(e,t),this}emit(e,t){return this._emitter.emit(e,t)}emitSync(e,t){return this._emitter.emitSync(e,t)}}},69063:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});i(59538);const n=(0,i(59496).createContext)({request:()=>{throw new Error("GraphQL Context not initialized with Request object")}})},56025:(e,t,i)=>{"use strict";i.d(t,{P:()=>o});i(59538);var n=i(32953),a=i(98813),s=i(87132),r=i(52427);function o(e){return async function(t,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const d=(0,r.Y)(t);if("subscription"===d.type)throw new Error("GraphQL subscriptions are not supported!");const c=await async function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=await async function(e){const t=await a.k.hash(e.body);return{persistedQuery:{version:1,sha256Hash:t}}}(t);try{var d,c;let a;return a="mutation"===t.type?await async function(e,t,i,a,s){const{name:r}=t;return e.build().withHost(n.wI).withMethod("POST").withoutMarket().withPath("/query").withJsonContentType().withBody({variables:i,operationName:r,extensions:a}).withQueryParameters({...s}).withEndpointIdentifier(`/query/${r}`).send()}(e,t,i,o,r):await async function(e,t,i,a,s){const{name:r}=t;return e.build().withHost(n.wI).withMethod("GET").withoutMarket().withPath("/query").withJsonContentType().withQueryParameters({operationName:r,variables:JSON.stringify(i),extensions:JSON.stringify(a),...s}).withEndpointIdentifier(`/query/${r}`).send()}(e,t,i,o,r),null!==(d=a.body)&&void 0!==d&&null!==(c=d.errors)&&void 0!==c&&c.some((e=>"PersistedQueryNotFound"===e.message))?l(e,t,i,o,r):a}catch(u){const n=405;if(u instanceof s.m&&u.status===n)return l(e,t,i,o,r);throw u}}(e,d,i,o);return c.body}}async function l(e,t,i,a,s){const{name:r,body:o}=t;return e.build().withHost(n.wI).withMethod("POST").withoutMarket().withPath("/query").withJsonContentType().withBody({operationName:r,variables:i,query:o,extensions:a}).withQueryParameters({...s}).withEndpointIdentifier(`/query/${r}`).send()}},52427:(e,t,i)=>{"use strict";i.d(t,{Y:()=>s});i(59538),i(71756);var n=i(4377);function a(e){return"OperationDefinition"===e.kind}function s(e){const t=e.definitions.filter(a);if(0===t.length)throw new Error("No GraphQL operation definition found in document!");if(t.length>1)throw new Error("Too many GraphQL operation definitions found in document! Expected exactly one.");const[i]=t;if(void 0===i.name)throw new Error("Nameless GraphQL operations are not supported!");return{type:i.operation,name:i.name.value,body:(0,n.S)(e)}}},33660:(e,t,i)=>{"use strict";i.d(t,{Ax:()=>n.A,$C:()=>s,QM:()=>o});i(56025);var n=i(69063),a=i(4637);const s=e=>{let{request:t,children:i}=e;return(0,a.jsx)(n.A.Provider,{value:{request:t},children:i})};i(71756),i(59538);const r=50;function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return async(i,n,a,s)=>{const r=[],o=Math.max(...a.map((e=>{var t,i;return null!==(t=null===(i=n[e])||void 0===i?void 0:i.length)&&void 0!==t?t:0})));for(let l=0;l<o;l+=t){const o={...n};a.forEach((e=>{var i;o[e]=null===(i=o[e])||void 0===i?void 0:i.slice(l,l+t)})),void 0!==s?r.push(e(i,o,s)):r.push(e(i,o))}return(await Promise.all(r)).map((e=>{if(null===e||void 0!==e.errors||null===e.data)throw new Error("GraphQL batched query failed!");return e.data}))}}},21727:(e,t,i)=>{"use strict";i(59496),i(9102),i(69063),i(52427),i(59538)},76339:(e,t,i)=>{"use strict";i.d(t,{K:()=>a});i(71756),i(45880);let n=function(e){return e.LOGGING_CATEGORY="l2l",e.LOGGING_CATEGORY_MWP="l2l-mwp",e}({});function a(e){let{isPremiumUser:t,locationSearch:i,navigate:a,logNavigation:s,showDialog:r}=e;const o=!!(l=i)&&"1"===new URLSearchParams(l).get(n.LOGGING_CATEGORY);var l;o&&(s(o),function(e,t){if(!e)return;const i=new URLSearchParams(e);i.delete(n.LOGGING_CATEGORY),t({search:i.toString()},{replace:!0})}(i,a),o&&!t&&r())}},67247:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(59272),a=i(60808),s=i(22872);const r=async e=>{const t=(0,n.EC)(e);return(await s.Zz.getSEOTrackLyrics(a.b.getInstance(),t.id)).body}},58839:(e,t,i)=>{"use strict";i.d(t,{oB:()=>a});i(59538),i(71756),i(59272),i(59496);var n=i(16391);let a=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});(0,n.Uy)(((e,t)=>{switch(t.type){case"LYRICS_LOADING":e[t.uri]={status:a.LOADING};break;case"LYRICS_LOADED":e[t.uri]={status:a.LOADED,data:{lyrics:{...t.response.lyrics}}};break;case"LYRICS_ERROR":e[t.uri]={status:a.UNAVAILABLE};break;default:throw new Error(`Unhandled lyrics action with type: ${t.type}`)}}));i(67247),i(4637);a.LOADING,a.UNAVAILABLE},43665:(e,t,i)=>{"use strict";i.d(t,{K:()=>a,Z:()=>n});i(86554);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const i=document.getElementById(e);return i?JSON.parse(i.innerHTML):t}catch{return t}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const n=document.getElementById(e);return n?JSON.parse((i=n.innerHTML,decodeURIComponent(Array.prototype.map.call(atob(i),(function(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`})).join("")))):t}catch{return t}var i}},94846:(e,t,i)=>{"use strict";i.d(t,{y:()=>s});var n=i(19496),a=i.n(n);i(24164);function s(){return a().getParser(window.navigator.userAgent).getOSName()||"not_applicable"}},24164:(e,t,i)=>{"use strict";i.d(t,{W:()=>n});let n=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({})},15520:(e,t,i)=>{"use strict";i.d(t,{Bc:()=>o,FE:()=>r,rg:()=>a});var n=i(87252);let a=function(e){return e.UPDATE="update",e.UPDATE_SHUFFLE_MODE="update_shuffle_mode",e.ERROR="error",e.ACTION="action",e.QUEUE_ACTION="queue_action",e.QUEUE_ACTION_COMPLETE="queue_action_complete",e.QUEUE_UPDATE="queue_update",e.CONTEXT_WRAPAROUND="context_wraparound",e}({}),s=function(e){return e.PLAY="play",e.PAUSE="pause",e.RESUME="resume",e.SKIP_TO_NEXT="skipToNext",e.SKIP_TO_PREVIOUS="skipToPrevious",e}({}),r=function(e){return e.ADD="add",e.REMOVE="remove",e.CLEAR="clear",e.INSERT="insert",e.REORDER="reorder",e}({});class o extends n.r{emitPlaySync(e,t,i){const{defaultPrevented:n}=this.emitSync(a.ACTION,{action:s.PLAY,context:e,origin:t,options:i});return n}emitPauseSync(){const{defaultPrevented:e}=this.emitSync(a.ACTION,{action:s.PAUSE});return e}emitResumeSync(){const{defaultPrevented:e}=this.emitSync(a.ACTION,{action:s.RESUME});return e}emitSkipToNextSync(){const{defaultPrevented:e}=this.emitSync(a.ACTION,{action:s.SKIP_TO_NEXT});return e}emitSkipToPreviousSync(){const{defaultPrevented:e}=this.emitSync(a.ACTION,{action:s.SKIP_TO_PREVIOUS});return e}emitQueueActionSync(e){const{defaultPrevented:t}=this.emitSync(a.QUEUE_ACTION,{action:e});return t}emitQueueActionComplete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(a.QUEUE_ACTION_COMPLETE,{action:e,error:t})}emitQueueUpdate(e){this.emit(a.QUEUE_UPDATE,e)}emitUpdateShuffleModeSync(e,t){const{defaultPrevented:i}=this.emitSync(a.UPDATE_SHUFFLE_MODE,{shuffleMode:e,contextURI:t});return i}}},6197:(e,t,i)=>{"use strict";i.d(t,{kq:()=>l,v9:()=>d,Jx:()=>o});const n=e=>e<=64?"small":e>640?"xlarge":e>300?"large":"standard";function a(e,t){return e.filter((e=>e.label?e.label===t:e.width?n(e.width)===t:!!e.height&&n(e.height)===t))[0]}var s=i(35780),r=i(44488);function o(e){var t,i,n,s,r,o,l,d;const c=a(e,"standard"),u=a(e,"large"),m=a(e,"small"),_=a(e,"xlarge");return{image_url:null==c?void 0:c.url,image_height:null==c||null===(t=c.height)||void 0===t?void 0:t.toString(),image_width:null==c||null===(i=c.width)||void 0===i?void 0:i.toString(),image_url_large:null==u?void 0:u.url,image_height_large:null==u||null===(n=u.height)||void 0===n?void 0:n.toString(),image_width_large:null==u||null===(s=u.width)||void 0===s?void 0:s.toString(),image_url_small:null==m?void 0:m.url,image_height_small:null==m||null===(r=m.height)||void 0===r?void 0:r.toString(),image_width_small:null==m||null===(o=m.width)||void 0===o?void 0:o.toString(),image_url_xlarge:null==_?void 0:_.url,image_height_xlarge:null==_||null===(l=_.height)||void 0===l?void 0:l.toString(),image_width_xlarge:null==_||null===(d=_.width)||void 0===d?void 0:d.toString()}}function l(e,t){var i;const n=(0,r.l)((null===(i=e.coverArt)||void 0===i?void 0:i.sources)||[]),a=(0,s.Xb)(e,t),l=(0,s.Ie)(t)||a;return{uri:e.uri,title:e.name,subtitle:t.name,type:"episode",album_uri:t.uri,album_title:t.name,artist_uri:t.uri,artist_name:t.name,...o(n),media_type:"audio",isTrailer:a,anonymousPlaybackAllowed:l}}function d(e){var t,i,n,a;return{uri:e.uri,title:e.name,subtitle:e.album.name,type:e.type,album_uri:e.album.uri,album_title:e.album.name,artist_uri:null===(t=e.artists[0])||void 0===t?void 0:t.uri,artist_name:null===(i=e.artists[0])||void 0===i?void 0:i.name,media_type:"audio",externalResolvedUrl:e.preview_url,anonymousPlaybackAllowed:Boolean(e.preview_url),isPreview:!0,...o(null!==(n=null!==(a=e.images)&&void 0!==a?a:e.album.images)&&void 0!==n?n:[])}}},19968:(e,t,i)=>{"use strict";function n(e,t){if(null===e||null===t||null===e.duration)return null;const{timestamp:i,duration:n,speed:a,hasContext:s,isPaused:r,isBuffering:o}=e;if(!s||r||o)return t;const l=(Date.now()-i)*(null!=a?a:0);return Math.min(t+l,n)}function a(e){var t;return n(e,null!==(t=null==e?void 0:e.positionAsOfTimestamp)&&void 0!==t?t:null)}i.d(t,{k:()=>a})},8701:(e,t,i)=>{"use strict";i.d(t,{vI:()=>n});i(71756),i(45880);const n=(e,t)=>{const i=t?new URLSearchParams(t.search):void 0;return"1"===(null==i?void 0:i.get(e))}},91094:(e,t,i)=>{"use strict";i.d(t,{Rn:()=>o,sQ:()=>l});i(59538),i(71756);var n=i(76045),a=i(85865);let s;function r(e){let{isAnonymous:t,transport:i,tokenProvider:s}=e;const{DEBUG_SEMANTIC_METRICS:r}={};if("1"===r)return[new n.ConsoleReporter];if(!i&&!s)throw new Error("[SemanticMetricsHelper] An instance of either transport or tokenProvider is required!");let o={environment:"undefined"!=typeof window?"browser":"nodejs"};return t||(o={...o,getToken:async e=>{if(s){const t=await(0,a.V)(s);e(await t())}else i&&e(i.getLastToken())}}),[(0,n.createUniversalReporter)(o),..."2"===r?[new n.ConsoleReporter]:[]]}function o(e,t){var i;let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{sendMetric:o}=(0,n.createSemanticMetrics)({key:e,dev:!(null!==(i="production")&&i.startsWith("prod")),reporter:r({tokenProvider:t,isAnonymous:a})});s=o}async function l(e){if(!s)throw new Error("Invalid call to sendMetric before initSemanticMetrics.");return e.tags||(e.tags={}),"slingshot"in e.tags||(e.tags.slingshot="1"==={}.IS_SLINGSHOT?"true":"false"),s(e)}},76317:(e,t,i)=>{"use strict";i.d(t,{rA:()=>n,rD:()=>a});const n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageURLAndSize"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageSource"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]},a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageSources"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageURLAndSize"}}]}}]}}]}},50047:(e,t,i)=>{"use strict";i.d(t,{EP:()=>u,Ht:()=>d,J9:()=>m,KH:()=>c});i(71756),i(45880);var n=i(71238),a=i(1754);const s=30,r="sp_s2l",o=".spotify.com";var l=function(e){return e.LOGGING_CATEGORY="s2l",e.LOGGING_CATEGORY_MWP="s2l-mwp",e}(l||{});const d=e=>{let{os:t="",country:i=""}=e;return(0,n.x)({category:"in_app_message",action:"display",label:"download",destination_url:"open.spotify.com",os:t,country:i,context:window.location.search})};function c(e){let{locationSearch:t,navigate:i,logDialog:n,showDialog:a}=e;(function(e){if(!e)return!1;const t=new URLSearchParams(e);return Boolean(t.get(l.LOGGING_CATEGORY))})(t)&&(n(),function(e,t){if(!e)return;const i=new URLSearchParams(e);i.delete(l.LOGGING_CATEGORY),t({search:i.toString()},{replace:!0})}(t,i),a())}function u(e){const t=encodeURIComponent(JSON.stringify({seen:e})),i=m();null!==i&&i.seen===e||(0,a.pC)({name:r,days:s,domain:o,value:t})}function m(){const e=(0,a.vQ)(r);return e?JSON.parse(decodeURIComponent(e)):null}},44488:(e,t,i)=>{"use strict";function n(e){return e.sort(((e,t)=>(t.width||0)-(e.width||0)))}i.d(t,{l:()=>n})},8632:(e,t,i)=>{"use strict";i.d(t,{Kw:()=>o,OT:()=>r,Od:()=>l,T5:()=>u,Zs:()=>m,cT:()=>c,eI:()=>s,mK:()=>d,nW:()=>_});var n=i(24511),a=i(62823);const s=(e,t)=>(t||[]).map((e=>{let{profile:{name:t}}=e;return t})).join(e.getSeparator()),r=e=>{let{albumArtists:t,albumName:i,albumType:s,shouldLocalize:r,i18n:o}=e;if(!s||!i||!t)return"";const l=s!==n.VZ.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(s):s,d=(0,a.R)(s),c=`${i} - ${l} by ${t} | Spotify`,u=o.get("i18n.meta.album.title",i,d,t);return r?u:c},o=e=>{let{artistName:t}=e;return t?`${t} | Spotify`:""},l=e=>{let{showOrAudiobookName:t,type:i,isVideoPodcastShowTitleTagEnabled:n=!1}=e;return t?n&&"Podcast"===i?`${t} | Video ${i} on Spotify`:`${t} | ${i} on Spotify`:""},d=e=>{let{episodeOrChapterName:t,showOrAudiobookName:i,type:n}=e;return t&&i?`${t} - ${i} | ${n} on Spotify`:""},c=e=>{let{genreName:t}=e;return t?`${t} | Spotify`:""},u=e=>{let{playlistName:t,userName:i,isSpotifyOwned:n=!1}=e;if(!t||!i)return"";return`${t}${n?"":` - playlist by ${i}`} | ${n?"Spotify Playlist":"Spotify"}`},m=e=>{let{i18n:t,trackArtistsList:i,trackName:n,shouldLocalize:a}=e;if(!i||!n)return"";const s=`${n} - song and lyrics by ${i} | Spotify`,r=t.get("i18n.meta.track-lyrics.title",n,i);return a?r:s},_=e=>{let{i18n:t,shouldLocalize:i}=e;const n=t.get("i18n.meta.home.title");return i?n:"Spotify - Web Player: Music for everyone"}},11721:(e,t,i)=>{"use strict";i.d(t,{J:()=>a,k:()=>s});i(59538);let n=null;function a(e){n=e}function s(){if(null===n)throw new Error("Missing `instance`. Have you called `setTransportInstance` yet?");return n}},85865:(e,t,i)=>{"use strict";i.d(t,{V:()=>n});i(59538);function n(e){return async()=>{const t=await e();if(null===t)throw new Error("Token is currently unavailable.");const{accessToken:i,accessTokenExpirationTimestampMs:n}=t;return[i,Math.floor(((n||0)-Date.now())/1e3)]}}},40946:(e,t,i)=>{"use strict";i.d(t,{ge:()=>o,k1:()=>a});i(71756);var n=i(17249);const a={[n.go.en]:{displayName:"English",displayNameEn:"English"},[n.go.af]:{displayName:"Afrikaans",displayNameEn:"Afrikaans"},[n.go.am]:{displayName:"አማርኛ",displayNameEn:"Amharic"},[n.go.ar]:{displayName:"العَرَبِيَّة",displayNameEn:"Arabic",isRTL:!0},[n.go.arEG]:{displayName:"عربي مصري",displayNameEn:"Arabic (Egypt)",isRTL:!0},[n.go.arMA]:{displayName:"عربي مغربي",displayNameEn:"Arabic (Morocco)",isRTL:!0},[n.go.arSA]:{displayName:"عربي سعودي",displayNameEn:"Arabic (Saudi Arabia)",isRTL:!0},[n.go.az]:{displayName:"Azərbaycanca",displayNameEn:"Azerbaijani"},[n.go.bg]:{displayName:"Български",displayNameEn:"Bulgarian"},[n.go.bho]:{displayName:"भोजपुरी",displayNameEn:"Bhojpuri"},[n.go.bn]:{displayName:"বাংলা",displayNameEn:"Bengali"},[n.go.bs]:{displayName:"Bosanski",displayNameEn:"Bosnian"},[n.go.ca]:{displayName:"Català",displayNameEn:"Catalan"},[n.go.cs]:{displayName:"Čeština",displayNameEn:"Czech"},[n.go.da]:{displayName:"Dansk",displayNameEn:"Danish"},[n.go.de]:{displayName:"Deutsch",displayNameEn:"German"},[n.go.el]:{displayName:"Eλληνικά",displayNameEn:"Greek"},[n.go.enGB]:{displayName:"English (United Kingdom)",displayNameEn:"English (United Kingdom)"},[n.go.es]:{displayName:"Español de España",displayNameEn:"European Spanish"},[n.go.esAR]:{displayName:"Español (Argentina)",displayNameEn:"Spanish (Argentina)"},[n.go.esMX]:{displayName:"Español (México)",displayNameEn:"Spanish (Mexico)"},[n.go.es419]:{displayName:"Español de Latinoamérica",displayNameEn:"Latin American Spanish"},[n.go.et]:{displayName:"Eesti",displayNameEn:"Estonian"},[n.go.eu]:{displayName:"Euskara",displayNameEn:"Basque"},[n.go.fa]:{displayName:"فارسی",displayNameEn:"Persian",isRTL:!0},[n.go.fi]:{displayName:"Suomeksi",displayNameEn:"Finnish"},[n.go.fil]:{displayName:"Filipino",displayNameEn:"Filipino"},[n.go.fr]:{displayName:"Français",displayNameEn:"French"},[n.go.frCA]:{displayName:"Français Canadien",displayNameEn:"Canadian French"},[n.go.gl]:{displayName:"Galego",displayNameEn:"Galician"},[n.go.gu]:{displayName:"ગુજરાતી",displayNameEn:"Gujarati"},[n.go.he]:{displayName:"עברית",displayNameEn:"Hebrew",isRTL:!0},[n.go.hi]:{displayName:"हिन्दी",displayNameEn:"Hindi"},[n.go.hr]:{displayName:"Hrvatski",displayNameEn:"Croatian"},[n.go.hu]:{displayName:"Magyar",displayNameEn:"Hungarian"},[n.go.id]:{displayName:"Bahasa Indonesia",displayNameEn:"Indonesian"},[n.go.is]:{displayName:"Íslenska",displayNameEn:"Icelandic"},[n.go.it]:{displayName:"Italiano",displayNameEn:"Italian"},[n.go.ja]:{displayName:"日本語",displayNameEn:"Japanese"},[n.go.kn]:{displayName:"ಕನ್ನಡ",displayNameEn:"Kannada"},[n.go.ko]:{displayName:"한국어",displayNameEn:"Korean"},[n.go.lt]:{displayName:"Lietuvių",displayNameEn:"Lithuanian"},[n.go.lv]:{displayName:"Latviešu",displayNameEn:"Latvian"},[n.go.mk]:{displayName:"Македонски",displayNameEn:"Macedonian"},[n.go.ml]:{displayName:"മലയാളം",displayNameEn:"Malayalam"},[n.go.mr]:{displayName:"मराठी",displayNameEn:"Marathi"},[n.go.ms]:{displayName:"Melayu",displayNameEn:"Malay"},[n.go.nb]:{displayName:"Norsk",displayNameEn:"Norwegian"},[n.go.ne]:{displayName:"नेपाली",displayNameEn:"Nepali"},[n.go.nl]:{displayName:"Nederlands",displayNameEn:"Dutch"},[n.go.or]:{displayName:"ଓଡ଼ିଆ",displayNameEn:"Odia"},[n.go.paIN]:{displayName:"ਪੰਜਾਬੀ",displayNameEn:"Punjabi"},[n.go.paPK]:{displayName:"پنجابی",displayNameEn:"Punjabi",isRTL:!0},[n.go.pl]:{displayName:"Polski",displayNameEn:"Polish"},[n.go.ptBR]:{displayName:"Português do Brasil",displayNameEn:"Brazilian Portuguese"},[n.go.ptPT]:{displayName:"Português",displayNameEn:"European Portuguese"},[n.go.ro]:{displayName:"Română",displayNameEn:"Romanian"},[n.go.ru]:{displayName:"Русский",displayNameEn:"Russian"},[n.go.sk]:{displayName:"Slovenčina",displayNameEn:"Slovak"},[n.go.sl]:{displayName:"Slovenski",displayNameEn:"Slovenian"},[n.go.sr]:{displayName:"Srpski",displayNameEn:"Serbian"},[n.go.sv]:{displayName:"Svenska",displayNameEn:"Swedish"},[n.go.sw]:{displayName:"Kiswahili",displayNameEn:"Swahili"},[n.go.ta]:{displayName:"தமிழ்",displayNameEn:"Tamil"},[n.go.te]:{displayName:"తెలుగు",displayNameEn:"Telugu"},[n.go.th]:{displayName:"ภาษาไทย",displayNameEn:"Thai"},[n.go.tr]:{displayName:"Türkçe",displayNameEn:"Turkish"},[n.go.uk]:{displayName:"Українська",displayNameEn:"Ukrainian"},[n.go.ur]:{displayName:"اردو",displayNameEn:"Urdu",isRTL:!0},[n.go.vi]:{displayName:"Tiếng Việt",displayNameEn:"Vietnamese"},[n.go.zhCN]:{displayName:"简体中文",displayNameEn:"Simplified Chinese"},[n.go.zhHK]:{displayName:"繁體中文 (香港)",displayNameEn:"Chinese (Traditional) Hong Kong"},[n.go.zhTW]:{displayName:"中文",displayNameEn:"Traditional Chinese"},[n.go.zu]:{displayName:"IsiZulu",displayNameEn:"Zulu"}},s=[n.go.en,n.go.af,n.go.am,n.go.ar,n.go.az,n.go.bg,n.go.bho,n.go.bn,n.go.ca,n.go.cs,n.go.da,n.go.de,n.go.el,n.go.es,n.go.es419,n.go.et,n.go.fa,n.go.fi,n.go.fil,n.go.fr,n.go.frCA,n.go.gu,n.go.he,n.go.hi,n.go.hr,n.go.hu,n.go.id,n.go.is,n.go.it,n.go.ja,n.go.kn,n.go.ko,n.go.lt,n.go.lv,n.go.ml,n.go.mr,n.go.ms,n.go.nb,n.go.ne,n.go.nl,n.go.or,n.go.paIN,n.go.paPK,n.go.pl,n.go.ptBR,n.go.ptPT,n.go.ro,n.go.ru,n.go.sk,n.go.sl,n.go.sr,n.go.sv,n.go.sw,n.go.ta,n.go.te,n.go.th,n.go.tr,n.go.uk,n.go.ur,n.go.vi,n.go.zhCN,n.go.zhTW,n.go.zu],r=[n.go.arEG,n.go.arMA,n.go.arSA,n.go.bs,n.go.enGB,n.go.esAR,n.go.esMX,n.go.eu,n.go.gl,n.go.zhHK,n.go.mk],o=[...s]},24511:(e,t,i)=>{"use strict";i.d(t,{$_:()=>r,Cl:()=>m,JI:()=>_,KS:()=>s,Ku:()=>c,Le:()=>u,VZ:()=>n,Wf:()=>l,bm:()=>d,sY:()=>o,t:()=>h,xN:()=>a});let n=function(e){return e.Album="ALBUM",e.Audiobook="AUDIOBOOK",e.Compilation="COMPILATION",e.Ep="EP",e.Podcast="PODCAST",e.Single="SINGLE",e.Unknown="UNKNOWN",e}({}),a=function(e){return e.Albums="ALBUMS",e.Artists="ARTISTS",e.Audiobooks="AUDIOBOOKS",e.Episodes="EPISODES",e.Genres="GENRES",e.Playlists="PLAYLISTS",e.Podcasts="PODCASTS",e.TopResults="TOP_RESULTS",e.Tracks="TRACKS",e.Users="USERS",e}({}),s=function(e){return e.Explicit="EXPLICIT",e.NineteenPlus="NINETEEN_PLUS",e.None="NONE",e.Unknown="UNKNOWN",e}({}),r=function(e){return e.Audio="AUDIO",e.Unknown="UNKNOWN",e.Video="VIDEO",e}({}),o=function(e){return e.Completed="COMPLETED",e.InProgress="IN_PROGRESS",e.NotStarted="NOT_STARTED",e}({}),l=function(e){return e.Episode="EPISODE",e.PodcastEpisode="PODCAST_EPISODE",e.Unknown="UNKNOWN",e}({}),d=function(e){return e.Facebook="FACEBOOK",e.Instagram="INSTAGRAM",e.Other="OTHER",e.Soundbetter="SOUNDBETTER",e.Twitter="TWITTER",e.Wikipedia="WIKIPEDIA",e}({}),c=function(e){return e.AgeRestricted="AGE_RESTRICTED",e.CatalogueRestricted="CATALOGUE_RESTRICTED",e.CountryRestricted="COUNTRY_RESTRICTED",e.Explicit="EXPLICIT",e.PaymentRequired="PAYMENT_REQUIRED",e.Playable="PLAYABLE",e.Unavailable="UNAVAILABLE",e.Unknown="UNKNOWN",e}({}),u=function(e){return e.AfterUid="AFTER_UID",e.BeforeUid="BEFORE_UID",e.BottomOfPlaylist="BOTTOM_OF_PLAYLIST",e.TopOfPlaylist="TOP_OF_PLAYLIST",e}({}),m=function(e){return e.Audio="AUDIO",e.Mixed="MIXED",e.Unknown="UNKNOWN",e.Video="VIDEO",e}({}),_=function(e){return e.ContentOnly="CONTENT_ONLY",e.OrganicTraffic="ORGANIC_TRAFFIC",e.OrganicTrafficContentPool="ORGANIC_TRAFFIC_CONTENT_POOL",e}({}),h=function(e){return e.Abp="ABP",e.AnchorPaywall="ANCHOR_PAYWALL",e.AudiobookDirectSales="AUDIOBOOK_DIRECT_SALES",e.AudiobookPromotion="AUDIOBOOK_PROMOTION",e.OapLinking="OAP_LINKING",e.OapOtp="OAP_OTP",e.Unknown="UNKNOWN",e}({})},56296:(e,t,i)=>{"use strict";i.d(t,{Bi:()=>n});i(24511);i(55590);function n(e){return{url:e.url,width:e.width,height:e.height}}i(83474);i(59538)},87824:(e,t,i)=>{"use strict";i.d(t,{Aw:()=>m,YS:()=>k,Zn:()=>v,es:()=>h,iU:()=>u,v0:()=>p});var n=i(65481);let a=function(e){return e.DISABLED="DISABLED",e.TWO_USER="TWO_USER",e.MULTI_USER="MULTI_USER",e}({}),s=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),r=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),o=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),l=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),d=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),c=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({});(0,n.JP)({name:"exampleOfSharedPropertyThatDoesNotExist",description:"Example of enabling a propoerty that is shared between Desktop, Mobile and Embed",default:!1}),(0,n.JP)({name:"enableOfflineVideoDev",description:"Enables Spotify videos to be offlined on DesktopX. Used during feature development",default:!1}),(0,n.JP)({name:"betamaxWidevineVersionSupported",description:"true if the version of widevine used is still supported.",default:!0}),(0,n.JP)({name:"betamaxBoomboxAudioSync",description:"true if video/audio sync is enabled (experimental).",default:!1}),(0,n.z8)({name:"betamaxOfflineTargetBitrate",description:"targetBitrate to use when offlining. The closest to this bitrate to this is used.",default:12e5,lower:1e3,upper:1e9}),(0,n.JP)({name:"enableBetamaxSdkSubtitlesDesktopX",description:"Enables subtitles setting and rendering subtitles on the betamax SDK on DesktopX",default:!1}),(0,n.JP)({name:"enableBetamaxSdkMuxDesktopXDev",description:"Enables MUX library for development on Desktop X",default:!1}),(0,n.JP)({name:"enableVideoOnVideoSaiDev",description:"Enables video-on-video SAI on videos Desktop X. Used during feature development",default:!1}),(0,n.JP)({name:"enableBetamaxSdkVmp",description:"Enables client-side widevine VMP (verified media path) on betamax SDK.",default:!1}),(0,n.JP)({name:"enableBetamaxSdkVideoOnVideoSai",description:"Enables video-on-video SAI on videos Desktop X",default:!1}),(0,n.z8)({name:"betamaxSdkMinimumBuffer",description:"Sets the minimum buffer goal (in seconds) required before starting or resuming playback video on betamax SDK",default:2,upper:8,lower:0}),(0,n.z8)({name:"betamaxSdkRetryAttempts",description:"The number of times to retry on network",default:2,upper:100,lower:1}),(0,n.JP)({name:"betamaxSdkDataSaverV2",description:"Enables the data saver feature on betamax SDK (linked to the video show/hide controls and close video window)",default:!1}),(0,n.z8)({name:"betamaxSdkDataSaverBufferMargin",description:"Sets the amount of buffer in seconds to be kept when disabling data saver (lower = faster variant change)",default:4,upper:100,lower:0}),(0,n.JP)({name:"betamaxVideoAutoplay",description:"Enables an alternative method for video autoplay to address Mux metrics",default:!1}),(0,n.z8)({name:"betamaxSdkMaxBitrate",description:"Sets the max bitrate cap for adaptive video on betamax SDK (0=disabled)",default:0,upper:1e8,lower:0}),(0,n.JP)({name:"enableBetamaxSdkPlayerPool",description:"Enables player pool for betamax SDK",default:!1}),(0,n.z8)({name:"betamaxSdkPlayerPoolSize",description:"Sets the player pool size, should it be enabled",default:20,upper:100,lower:0}),(0,n.JP)({name:"enableVideoPip",description:"Enables desktop picture-in-picture surface using betamax SDK.",default:!1}),(0,n.JP)({name:"enableStreamReportingTracker3",description:"Enables use of the StreamReporting module for video playback",default:!0});const u=(0,n.JP)({name:"showWrappedBanner",description:"Show Wrapped banner on wrapped genre page",default:!1}),m=((0,n.VL)({name:"enableBlendInvitation",description:"Enable users to join Blends through client-web",values:a,default:a.DISABLED}),(0,n.JP)({name:"enableLibraryGraphQL",description:"Use the `LibraryGraphQL` implementation using Pathfinder instead of Web API",default:!1}),(0,n.JP)({name:"enableLibraryGraphQLV2",description:"Use the `LibraryGraphQLExperimental` implementation to give some traffic to the YLX backend",default:!1}),(0,n.JP)({name:"enableSubtitlesUsingHarmony",description:"Enable subtitles using Harmony",default:!1}),(0,n.JP)({name:"enableUriLinks",description:"Enable the `uri_link` type in Web API /views",default:!1}),(0,n.VL)({name:"enableI18nRoutes",description:"Enable internationalized routes for all locales in EXPERIMENTAL_INTERNATIONALIZED_LOCALES.",values:s,default:s.DEFAULT}),(0,n.JP)({name:"enableCastConnect",description:"Enable Google's new Cast Connect feature for Android TV from Web Player's Cast Sender implementation",default:!1}),(0,n.JP)({name:"enableNewEpisodes",description:"Enable the new episodes view",default:!1}),(0,n.VL)({name:"merchVariantExperiment",description:"Merch shelf re-ordering experiment on Artist Profile Page(A/B/C test)",values:l,default:l.DEFAULT}),(0,n.VL)({name:"OnTourVariantExperiment",description:"On Tour shelf re-ordering experiment on Artist Page(A/B/C test)",values:d,default:d.DEFAULT}),(0,n.JP)({name:"enableMerchOnAlbum",description:"Enable merch shelf view on album page",default:!1}),(0,n.JP)({name:"enablePickAndShuffle",description:"Enable pick and shuffle",default:!1}),(0,n.JP)({name:"enableNewTicketingSection",description:"Enable New Ticketing section on Concert Event Pages",default:!1}));(0,n.JP)({name:"enableEqualizer",description:"Enable audio equalizer for Desktop and Web Player",default:!1}),(0,n.JP)({name:"enableCoreAutoplay",description:"Enable autoplay initiated by the core player rather than a local implementation",default:!1}),(0,n.JP)({name:"enableAlbumAndTrackCanonicals",description:"Add rel canonical tags for SEO to non-canonical album and track entity pages",default:!1}),(0,n.JP)({name:"betamaxFilterNegativeDuration",description:"Remove updates to esperanto for duration that is negative",default:!0});let _=function(e){return e.DEFAULT="DEFAULT",e.MORE_CARDS="MORE_CARDS",e.FEWER_CARDS="FEWER_CARDS",e}({});(0,n.VL)({name:"contentDensity",description:"Change the number of cards that are shown in a gridcontainer",values:_,default:_.DEFAULT});const h=(0,n.VL)({name:"enableRTPFeaturedArtists",description:"Enable featured artists rich data on track page",values:r,default:r.DEFAULT}),p=((0,n.VL)({name:"enableRTPTrackCredits",description:"Enable track credits on track page",values:o,default:o.DEFAULT}),(0,n.JP)({name:"enableUserFraudVerification",description:"Enable user fraud verification",default:!1}),(0,n.JP)({name:"enableUserFraudVerificationRequest",description:"Enable the IAV component make api requests",default:!0}),(0,n.JP)({name:"enableConcertsInterested",description:"Enable Save & Retrieve feature for concerts",default:!1}),(0,n.JP)({name:"enableConcertsSoldBySpotify",description:'Enable the "Sold by Spotify" tab for concerts',default:!1}),(0,n.VL)({name:"enableI18nAdditionalPages",description:"Enable additional internationalized pages beyond initial pages.",values:c,default:c.DEFAULT}));(0,n.JP)({name:"enableUserFraudSignals",description:"Enable user fraud signals",default:!1}),(0,n.JP)({name:"enablePlaylistEsperanto",description:"Use the PlaylistEsperanto implementation of the Playlist API",default:!1});let v=function(e){return e.DEFAULT="default",e.CONTROL="control",e.CANONICAL_TOP_POSITION="canonical-top-position",e.CANONICAL_BOTTOM_POSITION="canonical-bottom-position",e.ORGANIC_TOP_POSITION="organic-top-position",e.ORGANIC_BOTTOM_POSITION="organic-bottom-position",e}({});const k=(0,n.VL)({name:"enableTrackInternalLinkRecommender",description:"Enable internal link recommender component for track entity pages",values:v,default:v.DEFAULT});(0,n.JP)({name:"enableConcertsForThisIsPlaylist",description:"Enable Tour Card on This is Playlist",default:!1}),(0,n.JP)({name:"enableConcertsNearYou",description:"Enable Concerts Near You Playlist",default:!1}),(0,n.JP)({name:"enableUserFraudCanvas",description:"Enable user fraud Canvas Fingerprinting",default:!1})},1144:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});const n={ALBUM:"ALBUM",AUDIOBOOK:"AUDIOBOOK",EP:"EP",COMPILATION:"COMPILATION",PODCAST:"PODCAST",SINGLE:"SINGLE",UNKNOWN:"UNKNOWN"}},36406:()=>{},58846:()=>{},83474:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});let n=function(e){return e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.ARTIST_CONCERTS="artist-concerts",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.EPISODE="episode",e.PODCAST_SHORT="podcast-short",e.GENRE="genre",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.RADIO="radio",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes",e.FOLDER="folder",e}({})},81711:(e,t,i)=>{"use strict";i.d(t,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPFeaturedArtists="rtpv2p1",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e}({})},36882:()=>{},20344:(e,t,i)=>{"use strict";i.d(t,{E:()=>n});let n=function(e){return e.iOS="iOS",e.android="android",e}({})},37013:(e,t,i)=>{"use strict";i.d(t,{E:()=>b});var n=i(17249);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.ag;return(new Date).getUTCFullYear()===e.getUTCFullYear()?t.formatDate(e,{month:"short",day:"numeric",timeZone:"UTC"}):t.formatDate(e,{month:"short",year:"numeric",timeZone:"UTC"})};var s=i(25617),r=i(59496);const o="wIA_5Ypq0rltNPeZQpM4",l="Swi6YtNEFCCVz8l4y75v",d="pklLPOhfigdytL9bPoth",c="sb24Y8kdMZInJ8aI8dXT";var u=i(4637);class m extends r.PureComponent{render(){const{ariaValueText:e,max:t,current:i}=this.props,n=t&&i?100*Math.min(1,i/t):0,a={transform:`translateX(-${100-n}%)`},s=e||`${Math.round(n)}%`;return(0,u.jsxs)("div",{className:o,role:"progressbar",tabIndex:0,"aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":s,children:[(0,u.jsx)("div",{className:l}),(0,u.jsx)("div",{className:d,children:(0,u.jsx)("div",{"data-testid":"progressBarFg",className:c,style:a})})]})}}(0,s.Z)(m,"defaultProps",{current:0,max:1});const _=m,h="qfYkuLpETFW3axnfMntO",p="jOd7lbjiyc_kvRJaAbeL",v="_q93agegdE655O5zPz6l",k="z7Yl7CIT1AB0y91f_moh",g="iLIlkUcfIq56KncGtX7u",E="nV50yZ6BR_TIuWP3l7b1",S="qLjIx_SzBEpDRA_q7kxQ";var y=i(24377),f=i(73665),N=i(84875),T=i.n(N),R=i(82528);let A=function(e){return e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL",e}({});const b=e=>{const{resumePositionMs:t=0,releaseDate:i,isPlaying:s,fullyPlayed:r,durationMs:o,size:l=A.SMALL,position:d=t,compactVariant:c=!1}=e;return(0,u.jsxs)("div",{className:T()(h,{[p]:l===A.LARGE}),children:[i?(0,u.jsx)(y.D,{as:"p",variant:"mesto",className:v,children:a((m=i,new Date(m)))}):null,(()=>{if(r&&!s)return(0,u.jsxs)("div",{className:g,children:[(0,u.jsx)(y.D,{as:"p",variant:"mesto",className:k,children:n.ag.get("episode.played")}),(0,u.jsx)(f.N,{iconSize:16,className:S,"aria-hidden":"true"})]});if(d>0||s){const e=Math.ceil(Math.max(o-d,0));return(0,u.jsx)("div",{className:g,children:(0,u.jsx)(y.D,{as:"p",variant:"mesto",className:k,children:(0,u.jsx)(R.ng,{durationMs:e,displaySeconds:!c&&void 0})})})}return(0,u.jsx)(y.D,{as:"p",variant:"mesto",className:v,children:(0,u.jsx)(R.nL,{durationMs:o,displaySeconds:!c&&void 0})})})(),!r&&d>0||s?(0,u.jsx)("div",{className:E,children:(0,u.jsx)(_,{current:d,max:o,isEnabled:!1})}):null]});var m}},54293:(e,t,i)=>{"use strict";i.d(t,{h$:()=>c,L6:()=>u});i(31781),i(71756),i(70238),i(45880),i(94846);var n=i(24164);const a=/Spotify\/(?<version>.+)\s/;function s(){if(!!window.navigator.userAgent.match(a))return n.W.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,i="Windows"in window;return e&&(t||i)?n.W.PWA:n.W.Web}var r=i(76022);const o=()=>s()===n.W.PWA||"1"===function(e){try{var t,i;return null===(t=window)||void 0===t||null===(i=t.google_optimize)||void 0===i?void 0:i.get(e)}catch(n){return}}("u7gmg4jBRTOUMmTZNyEx9w"),l=()=>{if(o())return`${location.origin}/auth_redirect`;if(/iphone|ipod|ipad/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)){const e=new URL(window.location.href);return e.pathname=`${r.zL}${e.pathname}`,e.toString()}return window.location.href},d=(e,t,i)=>{var n;i&&(e+=`&${n=i,Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e]).replace(/%7C/g,"|")}`)).join("&")}`),o()?((e,t)=>{const i=void 0!==window.screenLeft?window.screenLeft:window.screenX,n=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=a/window.screen.availWidth,o=(a-t.width)/2/r+i,l=(s-t.height)/2/r+n,d=window.open(e,void 0,`scrollbars=${t.scrollbars?"yes":"no"},\n    toolbar=${t.toolbar?"yes":"no"},\n    width=${t.width/r},\n    height=${t.height/r},\n    top=${l},\n    left=${o}`);null!=d&&d.focus&&d.focus()})(e,t):window.location.assign(e)},c=e=>{const t=`https://accounts.spotify.com/login?continue=${encodeURIComponent(l())}`;d(t,{width:500,height:824,toolbar:!1,scrollbars:!0},e)},u=e=>{const t=`https://www.spotify.com/signup?forward_url=${encodeURIComponent(l())}`;d(t,{width:500,height:824,toolbar:!1,scrollbars:!0},e)}},12033:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});i(71756);const n=function(e){let{desiredSize:t=Number.MAX_SAFE_INTEGER,desiredHeight:i=t,desiredWidth:n=t,desiredLabel:a=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e.length<=0)return;if(a){const[t]=e.filter((e=>e.label===a));if(t)return t}if(1===e.length)return e[0];const[s]=e.map((e=>{const t=[(e.width||0)*(e.height||0),i*n];return{ratio:Math.max(...t)/Math.min(...t),image:e}})).sort(((e,t)=>e.ratio-t.ratio));return s.image}},55590:(e,t,i)=>{"use strict";i.d(t,{U:()=>n,_:()=>a});i(59538);function n(e,t){throw new Error(null!=t?t:`Unexpectedly hit unreachable code! Unhandled discriminated union member: ${JSON.stringify(e)}`)}function a(e,t){try{n(e,t)}catch(i){}}},66232:(e,t,i)=>{"use strict";i.d(t,{r:()=>s});var n=i(24511);let a=function(e){return e.NO="no",e.YES="yes",e.DOWNLOADING="downloading",e.WAITING="waiting",e}({});const s=e=>{let{downloadAvailability:t,isExplicit:i,isMOGEFRestricted:s,contentRating:r,isPaywalled:o,isEnhanced:l}=e,d=0;const c={download:!1,explicit:!1,nineteen:!1,paid:!1,enhanced:!1};return t===a.YES&&(c.download=!0,d++),(i&&!s||r===n.KS.Explicit)&&(c.explicit=!0,d++),(s||r===n.KS.NineteenPlus)&&(c.nineteen=!0,d++),o&&(c.paid=!0,d++),l&&(c.enhanced=!0,d++),{badges:c,hasBadges:d>0}}},67946:(e,t,i)=>{"use strict";function n(e){const t=Math.floor(e/1e3),i=Math.floor(t/60),n=Math.floor(i/60),a=60*n,s=i-a;return{hours:n,minutes:s,seconds:t-60*a-60*s}}i.d(t,{P:()=>n})},62823:(e,t,i)=>{"use strict";i.d(t,{R:()=>s});var n=i(17249),a=i(1144);function s(e){switch(e){case a.n.SINGLE:return n.ag.get("single");case a.n.EP:return n.ag.get("ep");case a.n.COMPILATION:return n.ag.get("compilation");case a.n.ALBUM:default:return n.ag.get("album")}}},98813:(e,t,i)=>{"use strict";i.d(t,{k:()=>s});var n=i(25617);i(60178),i(59346),i(45060),i(60252),i(37193),i(12041),i(31266),i(36507),i(55553),i(6127);function a(e){if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new Uint8Array(e.length);for(let i=0;i<e.length;i+=1)t[i]=e.charCodeAt(i);return t}class s{}(0,n.Z)(s,"encode",a),(0,n.Z)(s,"hash",(async function(e){const t=a(e),i=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("")}))},93381:(e,t,i)=>{"use strict";i.d(t,{ac:()=>s,is:()=>r,nT:()=>o});var n=i(17249),a=i(76022);const s=function(e){const t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"/":"";if(!e)return"";const i=e.split("/");return i[1].includes(a.F0)?`${t}${i.slice(2).join("/")}`:e},r=function(e,t){const i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?"/":"";if(!e)return"";if(!t||t===a.ZW)return e;const n="/"===e?"":e;return`${i}${a.F0}${t}${n}`},o=e=>{const t={[String(n.go.paIN)]:n.go.paIN,[String(n.go.paPK)]:n.go.paPK,[String(n.go.zhCN)]:n.go.zhCN,[String(n.go.zhTW)]:n.go.zhTW,[String(n.go.zhHK)]:n.go.zhHK};var i;return e?null!==(i=t[e])&&void 0!==i?i:e.substring(0,2):a.ZW}},64:(e,t,i)=>{"use strict";i.d(t,{S9:()=>o,fd:()=>l});i(71756);var n=i(76022);const a=(e,t)=>((e,t)=>{const i=n.un.some((t=>t===e));return(void 0===t||t)&&i})(e,t)||(e=>n._S.some((t=>t===e)))(e),s=(e,t)=>{if(void 0===e)return!1;const i=""===e;return t.some((t=>t===e))||i},r=(e,t)=>{const i=s(e,n.Jn)&&t,a=s(e,n.wI);return i||a},o=e=>{let{localeFeatureFlag:t,entityFeatureFlag:i,urlLocale:n,entity:s,type:o}=e;switch(o){case"locale":return a(n,t);case"route":return r(s,i);case"link":return a(n,t)&&r(s,i);default:return!1}},l=e=>["/",...n.BK.map((e=>`/${n.F0}${e}`))].includes(e)},95682:(e,t,i)=>{"use strict";i.d(t,{O:()=>n});const n=()=>"undefined"==typeof window},90957:(e,t,i)=>{"use strict";i.d(t,{J:()=>r,Q:()=>a});var n=i(59272);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=`https://open.spotify.com${e}`;let i="";const a=/^\/\w+\/([a-zA-Z0-9]+)[/\w+]*/.exec(e);a&&(i=a[1]);let s=e,r=e;const o=e.match(/^\/search\/(.*)\/(.*)/);return/^\/genre\//.test(e)||/^\/view\//.test(e)?r="/browse/genres":"/"===e?(r="/browse",s="/browse/featured"):"/browse/charts"===e?r="/charts":"/collection/tracks"===e||/^\/user\/.+\/collection/.test(e)?r="/collection/songs":"/search"===e?r="/search":o?(r="podcasts"===o[2]?"/search/shows":`/search/${o[2]}`,s=`/search/${o[2]}`):e.match(/\/search\/(?<query>.*)/)?(r="/search",s="/search/results"):"/download"===e?r="/upsell":"/queue"===e?r="/nowplaying/queue":/^\/artist\/[a-zA-Z0-9]+\/related/.test(e)?(s=(0,n.WN)(i).toString(),r="/artist/related"):/^\/artist\/[a-zA-Z0-9]+\/about/.test(e)?(s=(0,n.WN)(i).toString(),r="/artist/about"):(0,n.OB)(t)?(s=(0,n.WN)(i).toString(),r="/artist"):(0,n.nK)(t)?(s=(0,n.FW)(i).toString(),r="/playlist"):(0,n.YF)(t)?(s=(0,n.jy)(i).toString(),r="/album"):(0,n.hn)(t)?(s=(0,n.YD)(i).toString(),r="/episode"):(0,n.RS)(t)?(s=(0,n.xt)(i).toString(),r="/shows"):(0,n.Kv)(t)?(s=(0,n.QK)(i).toString(),r="/profile"):(0,n.wj)(t)&&(s=(0,n.tn)(i).toString(),r="/track"),{viewUri:s,mappedPageId:r}}const s=[{regExp:/^\/$/,pageIdentifier:"/home"},{regExp:/^\/genre/,pageIdentifier:"/genre"},{regExp:/^\/view/,pageIdentifier:"/view"},{regExp:/^\/browse/,pageIdentifier:"/browse"},{regExp:/^\/search/,pageIdentifier:"/search"},{regExp:/^\/upsell/,pageIdentifier:"/upsell"},{regExp:/^\/collection/,pageIdentifier:"/collection"},{regExp:/^\/artist/,pageIdentifier:"/artist"},{regExp:/^\/playlist/,pageIdentifier:"/playlist"},{regExp:/^\/album/,pageIdentifier:"/album"},{regExp:/^\/episode/,pageIdentifier:"/episode"},{regExp:/^\/show/,pageIdentifier:"/show"},{regExp:/^\/user/,pageIdentifier:"/user"},{regExp:/^\/track/,pageIdentifier:"/track"},{regExp:/^\/concerts/,pageIdentifier:"/concerts"},{regExp:/^\/concert\//,pageIdentifier:"/concert"},{regExp:/^\/made-for-you/,pageIdentifier:"/made-for-you"},{regExp:/^\/blend\/party/,pageIdentifier:"/blend/party"}],r=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const i=s.find((e=>{let{regExp:i}=e;return i.test(t)}));return null!==(e=null==i?void 0:i.pageIdentifier)&&void 0!==e?e:"unknown"}},44888:(e,t,i)=>{"use strict";i.d(t,{qV:()=>r,xU:()=>l,l3:()=>o});let n=function(e){return e.UNAUTH_LYRICS="track-lyrics-unauth-1.0",e.RTP_AND_LYRICS_HOLDOUT="rtp-and-lyrics-holdout",e.ARTIST_CONCERTS_METADATA="artist-concerts-metadata-1.0",e.ALBUM_CANONICALS="album-canonical",e.TRACK_CANONICALS="track-canonical",e.VIDEO_PODCAST_SHOW_TITLE_TAG="podcast-video-title-tag",e.RTP_FEATURED_ARTISTS="rtp-v21",e}({}),a=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});const s=e=>{let{treatment:t,entityId:i,experimentId:n,treatmentVariation:a}=e;if(t&&t[i]){const e=t[i];return e.experimentId===n&&e.treatment===a}return!1},r=(e,t)=>s({treatment:e,entityId:t,experimentId:n.ARTIST_CONCERTS_METADATA,treatmentVariation:a.VARIANT}),o=(e,t)=>s({treatment:e,entityId:t,experimentId:n.VIDEO_PODCAST_SHOW_TITLE_TAG,treatmentVariation:a.VARIANT}),l=(e,t)=>s({treatment:e,entityId:t,experimentId:n.RTP_FEATURED_ARTISTS,treatmentVariation:a.VARIANT})},36357:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={mainContent:"m6BzEMzOdb33y0G6kI1m",bottomFixed:"hK_6CFpJG8JDPkxhQT41",modalLayer:"wn0cyEPwai99nZ5phaKd"}},71313:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={container:"zfqp1TUU6rf1ETRIJ8V4",disabled:"sEiw6G02sxjOXY1RImHv",imageContainer:"_20erhI5I7q0MhHiLw5R",circleImage:"IPKcBQyKXTcn25tLI91x",radius:"mWbQ_r5hUbkFo7MHZ_SN",title:"y67SowI1qifilx25ty4N",subtitle:"BqXvJYUWmIP2gwoDvI2G"}},57294:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={TOP_BAR_HEIGHT:"56px",entityView:"E34FrewmewkuBM1IDQsg",logoButton:"NMw3sb63e2C5YJNyH5WW",openAppButton:"tFpZXlvG7VGu2yZJEVwZ",openAppButtonText:"vIN6X_YZk9J0s8vO3uqg",iconSearchLink:"V7faNUQZHOPh68ejp4o2",fixedTopBar:"WgXPl8hmQOs4k7Em9TTI",topBarSectionVariable:"xdBFM20jlfuhrxxERzoR",topBarSectionStart:"c1XHPjv6ZW1uVRksjeK0",topBarSectionEnd:"JM2zGYawSwyoOKBmo1ph",header:"M2zTPqWSULZAGKARgjXG",title:"gj6rSoF7K4FohS2DJDEm",headerBottomSection:"kVj4O1X1hlTwIyajGjJb",headerImageAndTextWrapper:"LTYHCckz80h0rAHEj0aQ",condensed:"lBPLQvOs6NEAQQaTuYm9",row:"jy9mr3vYagWjfUxmWauX",column:"OgFUAo4HM9zkORh6yYKs",titleAndSubtitleWrapper:"zJT83mTjBmPlNfEnuNYs",actions:"jXbmfyIkvfBoDgVxAaDD",moreButton:"w96CFLxhFqhRr3qTeQo2",playButton:"ZHjbpDQJimn7TrEg5NRa",bottomAligned:"SLA1vC6tXhIFG1Tfb7Db",playButtonInner:"KLdvTULHpZ_WiyOPzi0I",description:"GJjW130sRB_AyuNNFz0u",entityHeaderMetadata:"sMT6JaxLhI2QLVSevX_3",bulletSeparated:"fjP8GyQyM5IWQvTxWk6W",mainContent:"AXLhOsSjT3bowfjf42kK",loadingState:"XOErnGrVFhfEECdqd8pQ",errorContainer:"bU3UqkklVsK3NOIeFwOo"}},95627:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={albumArtist:"b81TNrTkVyPCOH0aDdLG",trackCloud:"dsEoBBWhrjzcHSAvR1aA",tracksContainer:"AKq_lvmj1Ta9hiltD__Y",bulletMetadata:"BOlThRgIUplH_7GfJXgi",copyrights:"a7a1ezCOlPHrypYvDqND"}},90932:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={tippyWrapper:"h2xvvwYHCtpyAEe92KFh"}},64612:()=>{},50421:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={TOP_BAR_HEIGHT:"56px",entityView:"EmPyYSLB0GzLG3npyj0i",logoButton:"lrTuOVldX3mOw3uXH4co",openAppButton:"L284yLRJDF3HebQUZGFJ",openAppButtonText:"ARX22o9hYHguLPsqvSi5",iconSearchLink:"Jluzw6W6H33aYx5CJb2v",fixedTopBar:"B3FZEuJmAr_xqf2zl6oI",topBarSectionVariable:"kGEiRIi5wRTx2rX0S9Lx",topBarSectionStart:"y_1y1QIwHj94BSMT8XXE",topBarSectionEnd:"JMlcYVAX2wt4TRnWIBjd",header:"Qro3ta2LEb8hw0AV3M6V",title:"tO7o5iVf2INwGBvDAHti",headerBottomSection:"VDb7iNBd2ywlzvHei7G0",headerImageAndTextWrapper:"MYm985RyOlwQzgznVaRq",condensed:"wiykuJewGrpK_OYFDRD8",row:"FNGL_8UjuihKAXIOzSxg",column:"_XFtAtmCIMb4QmZAmvTk",titleAndSubtitleWrapper:"T5403RVkX67MpVeXOoDS",actions:"aDsMqBQv1BRvG5reWxtV",moreButton:"razC1oWsRd7vPEojll4o",playButton:"OPYUc2kYiszPjPpWCiXO",bottomAligned:"glJ4sg0qOn7qulvvF613",playButtonInner:"sDIsPFLmVPBu2tcjc8Da",description:"gKD4FT5lLt7aPsBUSCxw",entityHeaderMetadata:"jJu_dn86EBRLtUdmDHZO",bulletSeparated:"BnyWsivVqykr7q49ka5Q",mainContent:"Lr8c2pSDKusW0TW8PUHT",loadingState:"LKaZeDA5qBND0w8vTR9s",errorContainer:"M3j2ohdpdDkMb6IvDJKS",headerWrapper:"Q2OIKLapdCsZHX389IVv",loginTopBarSpacer:"bwN2Fnwr4p6wZNv8LJ2L",headerBackgroundContainer:"WfzyroOHeNVbr2U8ez_D",headerTitle:"NXmFzmcxx810EMAtD60A",headerFilters:"lEpA0iRFi6iUcMbPjHjW",backButton:"nHbkPB51Vxk206niEHD8",locationButtonIcon:"Jj22emOQmRnyn5Hmqovb",concertsHubContainer:"GvnrcqC8prDN5eGXQ85Q",concertsHubNoConcertsTitle:"fV_AWH16USnVlpP9iXwJ",concertsGrid:"kgKf6z_DwQnL7K3azt7h",concertsHubSection:"u0Yf7kTH6JpTrbQB2H2n",concertsHubSectionRow:"zHwjSfy6Z0gDcID_bUxk",concertsHubSectionHeader:"schCX26mkvQRwWG4c4rI",concertsHubSectionRowImage:"uX3giPh75Oe1AbDpkVMQ",concertsHubSectionRowTitleAndVenue:"uXi_VKq3howLFK_M7G4T",concertsHubSectionRowTitle:"STzJ_Gpwp_8Q_TtQOmG8",concertsHubSectionRowWeekdayMonthDayAndVenue:"cbSLdMxs5hie6fovpNZj",artistChevronRight:"XdP8TuEVaLEdSmdep8DD",overlay:"cMysoSvdFpbALRgMLRvs",overlayEnter:"n1jzKP3G8qTHwpzvZkwZ",overlayEnterActive:"bHxLYhqyf585qJd2uaPv",overlayExit:"aepisJG9G6u5TnEJBhWd",overlayExitActive:"fX0cjqkLCk117Ymz5O3G",groupConcert:"sqazpRcRMHQW6iUB7DwD",locationSelector:"CjxhGfKHIJkrmhnktioj",stickyLocationSearchBar:"J3dcG0Eu0ECSlOL0hhfg",inputAndBackButtonWrapper:"QdB1UPEVtzm6_XN3heeo",locationSelectorResult:"XM30g5z41rn0FNqE32Ga",changeLocationError:"lfAYzdort408pZZJIyHm",changeLocationErrorIcon:"iFaxktHzFDeGaj9nRG5Y",locationSelectorResultRow:"pPTzGMkPlmJIG5QsG9nj",closeButton:"U0KSIxz5spkH4YSBmjlN",closeButtonText:"LXpdK49RfGaBNsS6e5NB",artistContainer:"rMmobCOIgzCEorsTTX4A",artistImage:"RLgQNC5VUcUp5fwvfgq2",artistInfoContainer:"X5cWMH2JXfQs6fE_GaQ4",concertsCount:"OHndc2u0d5mbVy1MbEO2",artistName:"cgSg2eeoLBXJsE_j5Cll",groupedConcertRow:"hdFWtQ6oufiA1PJz6Cym",groupedConcertCalendar:"tUyOCRyt5tnPbD0X7jPr",groupedConcertInfo:"OxRM9ElZfALFKWBf2u01",groupedConcertWeekdayTimeAndVenue:"urvfZvdaSuaSP29JzrZA",groupedConcertCalendarMonth:"l0G1ulp0V8nTNnsRHVi1",groupedConcertCalendarDate:"_XZ3vmCJkVTtVWGRHD_C",groupedConcertTitle:"yb3foqBLmFmzbfhSvAwp",disclaimerContainer:"L6OMwliGknw9duahglQ0",disclaimer:"bk0qHTcFq3OsB3En5Er0",dateSection:"JD05hnNLIQjXNEAmzoWw",loadMore:"kK6IPsMAQ6lHcPFwWUxs",emptyStateWrapper:"TaY9wbNzzzDzmAe2Ijzl",emptyStateTitle:"_KR8yY26m49pjFn79OAb",emptyStateMessage:"Ts38tYgLJf5lJuYqZSSg",navBar:"IzNY5ZQ4h9svnoRtjpdL",navBarList:"LEnouRJRBlRg3pr3JVye",navItem:"KJUtOyE0VFDbCUbzxf9G"}},32526:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={item:"kZAjDLOBaUEUgIh0u_ar",date:"jqymLdIlkUVKl8shJfKZ",dateMonth:"diaCgR2BgDJgHboSPS1S",dateDay:"RjfBbWVLuXMzwFtTXDL0",info:"ymKJ1kNm06pnfmgmATrg",list:"o_4Hq0EfTskY5qc0ivxe",title:"UmCMpZhcC2lll241N1NU",time:"cR3tL5CgXmgwfJDDKQ2A",timeAndVenue:"bk3jsOor2S1AwKPihqwM",seeAll:"EOV5e4GVgot1kyhgQS7O"}},86854:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={description:"NVZbcfkhR1jnPefW4OyU",monthlyListeners:"ovtJYocZljdWcU1FLBL5",externalLinks:"ZdmJvgeayszd6ZvSl5B6",followers:"_STYpglIwDef2Vqxu7xV"}}},t={},i,n,a;function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,i=[],s.O=(e,t,n,a)=>{if(!t){var r=1/0;for(c=0;c<i.length;c++){for(var[t,n,a]=i[c],o=!0,l=0;l<t.length;l++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](t[l])))?t.splice(l--,1):(o=!1,a<r&&(r=a));if(o){i.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=i.length;c>0&&i[c-1][2]>a;c--)i[c]=i[c-1];i[c]=[t,n,a]},s.F={},s.E=e=>{Object.keys(s.F).map((t=>{s.F[t](e)}))},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,i)=>(s.f[i](e,t),t)),[])),s.u=e=>(({129:"mwp-search-landing",142:"mwp-upsell",224:"mwp-connect-view-container",242:"mwp-genre-view",243:"mwp-browse-page",271:"mwp-user-profile",458:"mwp-blend-party-page",518:"mwp-artist-page",574:"mwp-search-results",587:"mwp-dialog-container",592:"mwp-now-playing-view",671:"mwp-home-page",737:"mwp-context-menu-container"}[e]||e)+"."+{103:"97b4d3bb",129:"a572fbfc",142:"489042e4",224:"e06c6b31",242:"718d4135",243:"142b73a4",271:"c2a73fe6",458:"97f0f2fe",518:"00d3ed64",574:"4d46ca46",587:"8e08f417",592:"56000ff7",671:"f85429dd",737:"86db4d06"}[e]+".js"),s.miniCssF=e=>({129:"mwp-search-landing",142:"mwp-upsell",224:"mwp-connect-view-container",242:"mwp-genre-view",243:"mwp-browse-page",271:"mwp-user-profile",458:"mwp-blend-party-page",518:"mwp-artist-page",574:"mwp-search-results",587:"mwp-dialog-container",592:"mwp-now-playing-view",671:"mwp-home-page",737:"mwp-context-menu-container"}[e]+"."+{129:"a572fbfc",142:"489042e4",224:"e06c6b31",242:"718d4135",243:"142b73a4",271:"c2a73fe6",458:"97f0f2fe",518:"00d3ed64",574:"4d46ca46",587:"8e08f417",592:"56000ff7",671:"f85429dd",737:"86db4d06"}[e]+".css"),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},a="client-web:",s.l=(e,t,i,r)=>{if(n[e])n[e].push(t);else{var o,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+i){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",a+i),o.src=e),n[e]=[t];var m=(t,i)=>{o.onerror=o.onload=null,clearTimeout(_);var a=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(i))),t)return t(i)},_=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.p="https://open.spotifycdn.com/cdn/build/mobile-web-player/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,i)=>{var n=s.miniCssF(e),a=s.p+n;if(((e,t)=>{for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var a=(r=i[n]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===e||a===t))return r}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var r;if((a=(r=s[n]).getAttribute("data-href"))===e||a===t)return r}})(n,a))return t();((e,t,i,n,a)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.onerror=s.onload=i=>{if(s.onerror=s.onload=null,"load"===i.type)n();else{var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,s.parentNode&&s.parentNode.removeChild(s),a(l)}},s.href=t,i?i.parentNode.insertBefore(s,i.nextSibling):document.head.appendChild(s)})(e,a,null,t,i)})),t={429:0};s.f.miniCss=(i,n)=>{t[i]?n.push(t[i]):0!==t[i]&&{129:1,142:1,224:1,242:1,243:1,271:1,458:1,518:1,574:1,587:1,592:1,671:1,737:1}[i]&&n.push(t[i]=e(i).then((()=>{t[i]=0}),(e=>{throw delete t[i],e})))}}})(),(()=>{var e={429:0};s.f.j=(t,i)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var a=new Promise(((i,a)=>n=e[t]=[i,a]));i.push(n[2]=a);var r=s.p+s.u(t),o=new Error;s.l(r,(i=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,n[1](o)}}),"chunk-"+t,t)}},s.F.j=t=>{if(!s.o(e,t)||void 0===e[t]){e[t]=null;var i=document.createElement("link");s.nc&&i.setAttribute("nonce",s.nc),i.rel="prefetch",i.as="script",i.href=s.p+s.u(t),document.head.appendChild(i)}},s.O.j=t=>0===e[t];var t=(t,i)=>{var n,a,[r,o,l]=i,d=0;if(r.some((t=>0!==e[t]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var c=l(s)}for(t&&t(i);d<r.length;d++)a=r[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},i=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.nc=void 0,s.O(0,[429],(()=>{[129,225,574,142,737].map(s.E)}),5);var r=s.O(void 0,[225],(()=>s(82518)));r=s.O(r)})();
//# sourceMappingURL=mobile-web-player.209c2bd9.js.map